import{r as f,c as ye,s as we,h as u,i as t,j as w,C as _,z as be,J as ke,K as _e,t as m,w as Y,k as Ce,F as Z,l as ee,v as Ae,e as Te,o as c,n as je}from"./index-CSzH4brs.js";import{s as D}from"./superadmin.service-BkJLvc6W.js";const De={class:"min-h-screen bg-gray-50"},Ue={class:"bg-white border-b border-gray-200 shadow-sm"},$e={class:"max-w-7xl mx-auto px-2 sm:px-4 lg:px-6 xl:px-8 py-4 sm:py-6"},Se={class:"flex flex-col sm:flex-row sm:items-center sm:justify-between"},Me={class:"flex items-center space-x-4"},Re={key:0,class:"flex items-center text-sm text-gray-500"},Le={class:"max-w-7xl mx-auto px-2 sm:px-4 lg:px-6 xl:px-8 py-4 sm:py-6 lg:py-8"},Ie={class:"flex flex-wrap gap-2 sm:gap-4 mb-6 sm:mb-8"},Pe={class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 sm:gap-6 mb-6 sm:mb-8"},Ne={class:"bg-white rounded-xl shadow-md p-6 border border-gray-100 hover:shadow-lg transition-all duration-200"},Ee={class:"flex items-center justify-between"},ze={class:"text-3xl font-bold text-orange-600 mt-2"},Be={class:"bg-white rounded-xl shadow-md p-6 border border-gray-100 hover:shadow-lg transition-all duration-200"},We={class:"flex items-center justify-between"},Ve={class:"text-3xl font-bold text-green-600 mt-2"},Fe={class:"mt-4"},He={class:"text-sm text-green-600"},Oe={class:"bg-white rounded-xl shadow-md p-6 border border-gray-100 hover:shadow-lg transition-all duration-200"},Je={class:"flex items-center justify-between"},Ge={class:"text-3xl font-bold text-indigo-600 mt-2"},Ke={class:"bg-white rounded-xl shadow-md p-6 border border-gray-100 hover:shadow-lg transition-all duration-200"},qe={class:"flex items-center justify-between"},Qe={class:"text-3xl font-bold text-red-600 mt-2"},Xe={class:"bg-white rounded-xl shadow-md border border-gray-100 mb-8"},Ye={class:"px-6 py-4 border-b border-gray-200"},Ze={class:"flex items-center justify-between"},et={class:"flex items-center space-x-3"},tt={key:0,class:"flex justify-center items-center py-12"},st={key:1,class:"divide-y divide-gray-200"},ot={key:0,class:"text-center py-12"},nt={class:"flex items-start justify-between"},rt={class:"flex-1"},lt={class:"flex items-center space-x-3 mb-3"},at={class:"text-lg font-semibold text-gray-900"},it={class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3 sm:gap-4 mb-4"},dt={class:"font-medium text-gray-900"},ut={class:"font-medium text-gray-900"},ct={class:"font-medium text-gray-900"},mt={class:"font-medium text-gray-900"},pt={class:"font-medium text-indigo-600"},gt={key:0,class:"mb-4"},vt={class:"text-gray-900"},ft={key:1,class:"mb-4"},ht={class:"bg-yellow-50 border border-yellow-200 rounded-lg p-3 mt-1"},xt={class:"text-yellow-800 text-sm"},yt={class:"flex flex-col sm:flex-row lg:flex-col space-y-2 sm:space-y-0 sm:space-x-2 lg:space-x-0 lg:space-y-2 ml-0 sm:ml-4 lg:ml-6 mt-4 sm:mt-0"},wt=["onClick"],bt={key:0,class:"flex flex-col space-y-2"},kt=["onClick","disabled"],_t=["onClick","disabled"],Ct={key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50"},At={class:"bg-white rounded-xl shadow-xl max-w-4xl w-full max-h-[90vh] overflow-y-auto"},Tt={class:"p-6"},jt={key:0,class:"space-y-6"},Dt={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Ut={class:"font-medium text-gray-900"},$t={class:"font-medium text-gray-900"},St={class:"md:col-span-2"},Mt={class:"font-medium text-gray-900"},Rt={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Lt={class:"font-medium text-gray-900"},It={class:"font-medium text-gray-900"},Pt={key:0,class:"p-4 border border-dashed border-gray-300 rounded-lg text-sm text-gray-600"},Nt={key:1,class:"grid grid-cols-1 md:grid-cols-2 gap-3"},Et={class:"flex items-center justify-center w-10 h-10 rounded bg-indigo-50 text-indigo-600"},zt={key:0,class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},Bt={key:1,class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},Wt={key:2,class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},Vt={class:"flex-1 min-w-0"},Ft={class:"text-sm font-medium text-gray-900 truncate"},Ht={class:"text-xs text-gray-500"},Ot={class:"flex items-center space-x-2"},Jt=["onClick","disabled"],Gt=["onClick","disabled"],Kt={key:0,class:"w-4 h-4 animate-spin",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},qt={key:1,class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},Qt={class:"px-6 py-4 border-t border-gray-200 flex justify-end space-x-3"},Xt={key:0,class:"flex space-x-3"},Yt=["disabled"],Zt=["disabled"],es={key:1,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50"},ts={class:"bg-white rounded-xl shadow-xl max-w-md w-full"},ss={class:"p-6"},os={class:"px-6 py-4 border-t border-gray-200 flex justify-end space-x-3"},ns=["disabled"],rs={key:2,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50"},ls={class:"bg-white rounded-xl shadow-xl max-w-3xl w-full max-h-[80vh] overflow-auto"},as={class:"px-6 py-4 border-b border-gray-200 flex items-center justify-between"},is={class:"p-6"},ds={class:"bg-gray-100 p-4 rounded font-mono text-xs overflow-auto whitespace-pre"},us={class:"px-6 py-4 border-t border-gray-200 flex justify-end"},gs={__name:"SuperAdminDashboard",setup(cs){const d=Te(),U=f(!1),W=f(!1),x=f(!1),N=f(!1),S=f("all"),T=f(!1),E=f(!1),p=f(null),C=f(""),te=f(!1),M=f(!1),R=f(""),$=f("Not tested"),z=f(null),y=f({pendingApprovals:0,activeTemples:0,totalUsers:0,rejectedTemples:0,newThisWeek:0}),h=f([]),V=f([]),b=f(null),F=ye(()=>S.value==="all"?h.value:h.value.filter(s=>s.status.toLowerCase()===S.value.toLowerCase())),se=s=>{const e=((s==null?void 0:s.type)||"").toLowerCase(),n=((s==null?void 0:s.name)||(s==null?void 0:s.filename)||"").toLowerCase();return e.includes("pdf")||n.endsWith(".pdf")},oe=s=>{const e=((s==null?void 0:s.type)||"").toLowerCase(),n=((s==null?void 0:s.name)||(s==null?void 0:s.filename)||"").toLowerCase();return e.startsWith("image/")||n.endsWith(".png")||n.endsWith(".jpg")||n.endsWith(".jpeg")||n.endsWith(".webp")},ne=s=>{if(!s&&s!==0)return"";const e=["B","KB","MB","GB"];let n=0,l=Number(s);for(;l>=1024&&n<e.length-1;)l/=1024,n++;return`${l.toFixed(1)} ${e[n]}`},re=s=>{const e=[];return s.size&&e.push(ne(s.size)),s.type&&e.push(s.type),e.join(" â€¢ ")||"Document"},le=s=>typeof s=="string"?s:"",L=(s,e)=>{const n=(e||"").toLowerCase(),l=(s||"").toLowerCase(),o=n||l;return o.endsWith(".pdf")?"application/pdf":o.endsWith(".png")?"image/png":o.endsWith(".jpg")||o.endsWith(".jpeg")?"image/jpeg":""},ae=s=>{console.log("normalizeTempleDocuments - input temple:",s);const e=[],n=r=>{if(!r)return"";let i=r.trim();return i=i.replace(/\/files\//g,"/"),/uploads\/\d+\//.test(i)&&(console.log("normalizeTempleDocuments - removing WRONG folder:",i),i=i.replace(/uploads\/\d+\//,"uploads/")),i=i.replace(/^\/+/,""),i};Array.isArray(s.documents)&&s.documents.length>0&&(console.log("normalizeTempleDocuments - found documents array:",s.documents),s.documents.forEach((r,i)=>{let v=r.download_url||r.downloadUrl||r.url||r.file_url||r.fileUrl||r.path||"";v=n(v),console.log(`normalizeTempleDocuments - cleaned document ${i} URL:`,v),e.push({id:r.id||`${s.id||s.ID||"doc"}-${i}`,name:r.name||r.filename||`Document ${i+1}`,type:r.type||L(v,r.name||r.filename),size:r.size||null,url:v})})),[{key:"registration_cert",label:"Registration Certificate"},{key:"trust_deed",label:"Trust Deed"},{key:"property_docs",label:"Property Documents"}].forEach(({key:r,label:i})=>{let k=[s[`${r}_url`],s[`${r}Url`],s[r],s[`${r}_path`],s[`${r}_link`]].map(le).filter(Boolean).find(P=>P.startsWith("http")||P.startsWith("/"))||"";k=n(k),k&&(console.log(`normalizeTempleDocuments - cleaned single field ${r}:`,k),e.push({id:r,name:i,type:L(k,i),size:null,url:k}))});const o=[s.additional_docs,s.additionalDocs,s.additional_documents,s.additionalDocuments].find(r=>Array.isArray(r));o&&o.length>0&&(console.log("normalizeTempleDocuments - found additional docs:",o),o.forEach((r,i)=>{let v=r.download_url||r.downloadUrl||r.url||r.file_url||r.fileUrl||r.path||"";v=n(v),console.log(`normalizeTempleDocuments - cleaned additional doc ${i}:`,v),e.push({id:r.id||`additional-${i}`,name:r.name||r.filename||`Additional Document ${i+1}`,type:r.type||L(v,r.name||r.filename),size:r.size||null,url:v})}));const a=new Set,g=e.filter(r=>{const i=`${r.id}-${r.name}`;return a.has(i)?!1:(a.add(i),!0)});return console.log("normalizeTempleDocuments - final docs:",g),g},H=(s,e,n="view")=>{console.log("buildDocUrl - doc:",s),console.log("buildDocUrl - appId:",e);let l=s.download_url||s.downloadUrl||s.url||s.file_url||s.fileUrl||s.path||"";if(console.log("buildDocUrl - direct (raw):",l),!l){if(s.id&&e){const g=`http://localhost:8080/api/v1/entities/${encodeURIComponent(e)}/documents/${encodeURIComponent(s.id)}/${n}`;return console.log("buildDocUrl - API fallback:",g),g}return""}if(l=l.replace(/\/files\//g,"/"),/uploads\/\d+\//.test(l)&&(console.log("buildDocUrl - removing WRONG temple folder:",l),l=l.replace(/uploads\/\d+\//,"uploads/")),l.startsWith("http://")||l.startsWith("https://"))return console.log("buildDocUrl - absolute URL returned:",l),l;let o=l.replace(/^\/+/,"");o.startsWith("uploads/")||(o=`uploads/${o}`),o=o.replace(/uploads\/uploads\//g,"uploads/");const a=`http://localhost:8080/${o}`;return console.log("buildDocUrl - FINAL URL:",a),a},ie=s=>{try{window.open(s,"_blank","noopener,noreferrer")||d.warning("Pop-up blocked. Please allow pop-ups for this site.")}catch(e){console.error("Error opening new tab:",e),d.error("Unable to open document in a new tab.")}},A=s=>((s||"").trim()||"document").replace(/[\\/:*?"<>|\u0000-\u001F]/g,"_").slice(0,200),de=s=>{if(!s)return"";const e=/filename\*\s*=\s*([^;]+)/i.exec(s);if(e){let l=e[1].trim();l=l.replace(/^"+|"+$/g,""),l.toLowerCase().startsWith("utf-8''")&&(l=l.substring(7));try{return A(decodeURIComponent(l))}catch{return A(l)}}const n=/filename\s*=\s*("?)([^";]+)\1/i.exec(s);return n&&n[2]?A(n[2]):""},ue=s=>{try{const n=new URL(s,window.location.origin).pathname.split("/").filter(Boolean).pop()||"";return A(decodeURIComponent(n))}catch{const n=(s||"").split("?")[0].split("#")[0].split("/").filter(Boolean).pop()||"";try{return A(decodeURIComponent(n))}catch{return A(n)}}},ce=(s,e,n)=>A(de(n)||(s==null?void 0:s.name)||(s==null?void 0:s.filename)||ue(e)||"document"),me=async s=>{if(console.log("viewDocument called with doc:",s),!p.value){console.log("viewDocument - no selected application");return}const e=H(s,p.value.id,"view");if(console.log("viewDocument - built URL:",e),!e){d.error("View URL not available for this document.");return}try{console.log("viewDocument - opening URL directly in new tab:",e),ie(e)}catch(n){console.error("Error viewing document:",n),d.error("Failed to open document for viewing.")}},pe=async s=>{if(console.log("downloadDocument called with doc:",s),!p.value)return;const e=p.value.id,n=H(s,e,"download"),l=n?n.includes("?")?`${n}&download=true&filename=${encodeURIComponent(s.name||s.filename||"document")}`:`${n}?download=true&filename=${encodeURIComponent(s.name||s.filename||"document")}`:"";if(console.log("downloadDocument - built download URL:",l),!l){d.error("Download URL not available for this document.");return}const o=s.id||s.name;b.value=o;try{console.log("downloadDocument - trying fetch blob method");const a=localStorage.getItem("auth_token")||localStorage.getItem("authToken")||"",g=await fetch(API_URL+l,{method:"GET",headers:{...a?{Authorization:`Bearer ${a}`}:{},Accept:"*/*"},credentials:"include"});if(!g.ok)throw new Error(`HTTP ${g.status}`);const r=g.headers.get("Content-Disposition")||g.headers.get("content-disposition")||"",i=g.headers.get("Content-Type")||g.headers.get("content-type")||(s==null?void 0:s.type)||L(l,(s==null?void 0:s.name)||(s==null?void 0:s.filename))||"application/octet-stream",v=await g.blob(),k=v.type?v:new Blob([v],{type:i}),P=ce(s,l,r),X=URL.createObjectURL(k),j=document.createElement("a");j.style.display="none",j.href=X,j.download=P,document.body.appendChild(j),j.click(),setTimeout(()=>{URL.revokeObjectURL(X),j.remove()},0),d.success("Download ready"),b.value=null;return}catch(a){console.warn("downloadDocument - fetch blob method failed, falling back:",a)}try{console.log("downloadDocument - falling back to window.location"),window.location.href=l,setTimeout(()=>{b.value=null},2e3),d.info("Attempting direct download");return}catch(a){console.warn("downloadDocument - window.location failed, trying iframe:",a)}try{console.log("downloadDocument - trying iframe method");const a=document.createElement("iframe");a.style.display="none",a.src=l,document.body.appendChild(a),setTimeout(()=>{document.body.contains(a)&&document.body.removeChild(a)},5e3),d.info("Download initiated via alternative method"),b.value=null;return}catch(a){console.warn("downloadDocument - iframe method failed, last resort new tab:",a)}try{window.open(l,"_blank","noopener,noreferrer")?d.info('Document opened in new tab - use "Save As" to download'):d.warning("Please allow pop-ups and try again")}catch(a){console.error("All download methods failed:",a),d.error("Unable to download document. Please contact support.")}finally{b.value=null}},I=async()=>{try{N.value=!0,$.value="Loading...";const s=await D.getTempleApprovalCounts();s&&s.success&&s.data?(y.value={pendingApprovals:s.data.pendingApprovals||0,activeTemples:s.data.activeTemples||0,totalUsers:s.data.totalUsers||0,rejectedTemples:s.data.rejectedTemples||0,newThisWeek:s.data.newThisWeek||0},$.value="Success",z.value=new Date().toLocaleString(),d.success("Dashboard stats updated from API")):($.value="Invalid response format",y.value.pendingApprovals===0&&(y.value={pendingApprovals:5,activeTemples:32,totalUsers:178,rejectedTemples:3,newThisWeek:4}),d.warning("Using fallback data for dashboard stats"))}catch(s){console.error("Failed to load temple counts:",s),$.value=`Error: ${s.message}`,d.error("Failed to load dashboard statistics")}finally{N.value=!1}},ge=async()=>{R.value=`Testing temple counts API...
`,M.value=!0;try{const s=[];s.push(`==== TEMPLE COUNTS API TEST ====
`),s.push("Testing direct API call to /api/v1/superadmin/temple-approval-count...");try{const e=await fetch(API_URL+"/superadmin/temple-approval-count",{headers:{Authorization:`Bearer ${localStorage.getItem("auth_token")}`}});if(e.ok){const n=await e.json();s.push(`Direct API Response Status: ${e.status}`),s.push(`Direct API Response Data: ${JSON.stringify(n,null,2)}`)}else{s.push(`Direct API Error: ${e.status} ${e.statusText}`);const n=await e.text();s.push(`Error details: ${n}`)}}catch(e){s.push(`Direct API Error: ${e.message}`)}s.push(`
==== SERVICE METHOD TEST ====
`);try{const e=await D.getTempleApprovalCounts();s.push(`Service Response: ${JSON.stringify(e,null,2)}`),e.success&&e.data?(y.value={pendingApprovals:e.data.pendingApprovals||0,activeTemples:e.data.activeTemples||0,totalUsers:e.data.totalUsers||0,rejectedTemples:e.data.rejectedTemples||0,newThisWeek:e.data.newThisWeek||0},s.push(`Updated dashboard stats: ${JSON.stringify(y.value,null,2)}`),z.value=new Date().toLocaleString(),d.success("Stats updated from API test!")):s.push("Service method returned failure")}catch(e){s.push(`Service Error: ${e.message}`)}s.push(`
==== CURRENT STATS ====
`),s.push(`Current summaryStats: ${JSON.stringify(y.value,null,2)}`),s.push(`Last update: ${z.value||"Never"}`),s.push(`API Status: ${$.value}`),R.value=s.join(`
`)}catch(s){R.value+=`
Error running test: ${s.message}`}},O=async()=>{try{U.value=!0;const s=await D.getPendingEntities().catch(e=>(console.error("Error fetching pending entities:",e),null));s&&s.success&&s.data?(h.value=s.data.map(e=>{const n=(e.Status||e.status||"pending").toLowerCase(),l=e.CreatedAt||e.createdAt||e.SubmittedAt||e.submittedAt||e.created_at||e.submitted_at||new Date().toISOString();let o="";if(e.Address&&e.Address.trim())o=e.Address.trim();else if(e.address&&e.address.trim())o=e.address.trim();else{const a=[],g=e.StreetAddress||e.streetAddress||e.street_address;g&&g.trim()&&a.push(g.trim());const r=e.City||e.city;r&&r.trim()&&a.push(r.trim());const i=e.State||e.state;i&&i.trim()&&a.push(i.trim());const v=e.Pincode||e.pincode||e.PostalCode||e.postalCode||e.zipcode;v&&v.toString().trim()&&a.push(v.toString().trim()),o=a.filter(Boolean).join(", ")}return{id:e.ID||e.id,templeName:e.Name||e.name,adminName:e.CreatedBy||e.createdBy||"Unknown",adminEmail:e.Email||e.email||"unknown@example.com",phone:e.Phone||e.phone,city:e.City||e.city,state:e.State||e.state,address:o||"Address not provided",status:n,submittedAt:l,approvedAt:e.ApprovedAt||e.approvedAt,rejectedAt:e.RejectedAt||e.rejectedAt,notes:e.Notes||e.notes,registrationType:e.TempleType||e.templeType,documents:ae(e)}}),d.success(`Loaded ${h.value.length} temple applications`)):h.value=[]}catch(s){console.error("Failed to load pending temples:",s),d.error("Failed to load pending temple applications")}finally{U.value=!1}},J=async()=>{try{W.value=!0;try{const s=await D.getRecentActivities();if(s&&s.success&&s.data){V.value=s.data;return}}catch{}V.value=[]}catch(s){console.error("Failed to load activities:",s),d.error("Failed to load recent activities")}finally{W.value=!1}},G=async()=>{try{U.value=!0,await Promise.all([I(),O(),J()]),d.success("Data refreshed successfully")}catch(s){console.error("Error refreshing data:",s),d.error("Failed to refresh data")}finally{U.value=!1}},ve=s=>{p.value=s,T.value=!0},B=()=>{T.value=!1,p.value=null},K=async s=>{if(!x.value)try{x.value=!0,T.value&&B();try{await D.approveEntity(s.id,{notes:"Approved by super admin"})}catch{await new Promise(n=>setTimeout(n,500))}const e=h.value.findIndex(n=>n.id===s.id);e!==-1&&(h.value[e].status="approved",h.value[e].approvedAt=new Date().toISOString()),await I(),d.success(`${s.templeName} has been approved successfully!`)}catch(e){console.error("Error approving temple:",e),d.error("Failed to approve temple. Please try again.")}finally{x.value=!1}},q=s=>{p.value=s,E.value=!0,T.value&&(T.value=!1)},Q=()=>{E.value=!1,p.value=null,C.value=""},fe=async()=>{if(!C.value.trim()){d.error("Please provide a reason for rejection");return}if(!(x.value||!p.value))try{x.value=!0;const s=p.value;try{await D.rejectEntity(s.id,{notes:C.value,reason:C.value})}catch{await new Promise(n=>setTimeout(n,500))}const e=h.value.findIndex(n=>n.id===s.id);e!==-1&&(h.value[e].status="rejected",h.value[e].rejectedAt=new Date().toISOString(),h.value[e].notes=C.value),await I(),d.success(`${s.templeName} application has been rejected`),Q()}catch(s){console.error("Error rejecting temple:",s),d.error("Failed to reject temple. Please try again.")}finally{x.value=!1}},he=s=>({pending:"bg-orange-100 text-orange-800",approved:"bg-green-100 text-green-800",rejected:"bg-red-100 text-red-800"})[s]||"bg-gray-100 text-gray-800",xe=s=>{if(!s)return"Not available";try{const e=new Date(s);return isNaN(e.getTime())?"Invalid date":e.toLocaleDateString("en-IN",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}catch{return"Date unavailable"}};return we(async()=>{await I(),await Promise.all([O(),J()])}),(s,e)=>{var l;const n=_e("router-link");return c(),u("div",De,[t("div",Ue,[t("div",$e,[t("div",Se,[e[8]||(e[8]=t("div",{class:"mb-4 sm:mb-0"},[t("h1",{class:"text-xl sm:text-2xl lg:text-3xl font-bold text-gray-900",style:{"font-family":"'Roboto', sans-serif"}}," Super Admin Dashboard "),t("p",{class:"mt-1 text-xs sm:text-sm text-gray-600"}," Manage temple registrations and system oversight ")],-1)),t("div",Me,[e[7]||(e[7]=t("div",{class:"bg-indigo-50 text-indigo-800 px-3 py-1 rounded-full text-sm font-medium"}," System Administrator ",-1)),N.value?(c(),u("div",Re,[...e[6]||(e[6]=[t("div",{class:"animate-spin rounded-full h-4 w-4 border-2 border-indigo-600 border-t-transparent mr-2"},null,-1),_(" Loading stats... ",-1)])])):w("",!0)])])])]),t("div",Le,[t("div",Ie,[te.value?(c(),u("button",{key:0,onClick:ge,class:"inline-flex items-center px-4 py-2 bg-gray-600 text-white rounded-lg text-sm font-medium hover:bg-gray-700 transition-colors duration-200"},[...e[9]||(e[9]=[t("svg",{class:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 10V3L4 14h7v7l9-11h-7z"})],-1),_(" Test Counts API ",-1)])])):w("",!0),be(n,{to:"/superadmin/reports",class:"inline-flex items-center px-4 py-2 bg-indigo-600 text-white rounded-lg text-sm font-medium hover:bg-indigo-700 transition-colors duration-200"},{default:ke(()=>[...e[10]||(e[10]=[t("svg",{class:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 17v-2m3 2v-4m3 4v-6m2 10H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1),_(" Reports ",-1)])]),_:1}),t("button",{onClick:G,class:"inline-flex items-center px-4 py-2 bg-white border border-gray-300 text-gray-700 rounded-lg text-sm font-medium hover:bg-gray-50 transition-colors duration-200"},[...e[11]||(e[11]=[t("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582M20 12a8 8 0 10-15.418-3M20 12h-5"})],-1),_(" Refresh ",-1)])])]),t("div",Pe,[t("div",Ne,[t("div",Ee,[t("div",null,[e[12]||(e[12]=t("p",{class:"text-sm font-medium text-gray-600 uppercase tracking-wide"},"Pending Approvals",-1)),t("p",ze,m(y.value.pendingApprovals),1)]),e[13]||(e[13]=t("div",{class:"bg-orange-100 p-3 rounded-lg"},[t("svg",{class:"w-6 h-6 text-orange-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1))]),e[14]||(e[14]=t("div",{class:"mt-4"},[t("span",{class:"text-sm text-gray-500"},"Awaiting review")],-1))]),t("div",Be,[t("div",We,[t("div",null,[e[15]||(e[15]=t("p",{class:"text-sm font-medium text-gray-600 uppercase tracking-wide"},"Active Temples",-1)),t("p",Ve,m(y.value.activeTemples),1)]),e[16]||(e[16]=t("div",{class:"bg-green-100 p-3 rounded-lg"},[t("svg",{class:"w-6 h-6 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2M5 21H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})])],-1))]),t("div",Fe,[t("span",He,"+"+m(y.value.newThisWeek)+" this week",1)])]),t("div",Oe,[t("div",Je,[t("div",null,[e[17]||(e[17]=t("p",{class:"text-sm font-medium text-gray-600 uppercase tracking-wide"},"Total Users",-1)),t("p",Ge,m(y.value.totalUsers),1)]),e[18]||(e[18]=t("div",{class:"bg-indigo-100 p-3 rounded-lg"},[t("svg",{class:"w-6 h-6 text-indigo-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2m.356-1.857a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0z"})])],-1))]),e[19]||(e[19]=t("div",{class:"mt-4"},[t("span",{class:"text-sm text-gray-500"},"Across all temples")],-1))]),t("div",Ke,[t("div",qe,[t("div",null,[e[20]||(e[20]=t("p",{class:"text-sm font-medium text-gray-600 uppercase tracking-wide"},"Rejected",-1)),t("p",Qe,m(y.value.rejectedTemples),1)]),e[21]||(e[21]=t("div",{class:"bg-red-100 p-3 rounded-lg"},[t("svg",{class:"w-6 h-6 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01M5.062 19h13.876c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.732-.833-2.464 0L3.33 16.5c-.77.833.192 2.5 1.732 2.5z"})])],-1))]),e[22]||(e[22]=t("div",{class:"mt-4"},[t("span",{class:"text-sm text-gray-500"},"This month")],-1))])]),t("div",Xe,[t("div",Ye,[t("div",Ze,[e[25]||(e[25]=t("h2",{class:"text-xl font-bold text-gray-900",style:{"font-family":"'Roboto', sans-serif"}}," Pending Temple Approvals ",-1)),t("div",et,[Y(t("select",{"onUpdate:modelValue":e[0]||(e[0]=o=>S.value=o),class:"text-sm border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"},[...e[23]||(e[23]=[t("option",{value:"all"},"All Status",-1),t("option",{value:"pending"},"Pending",-1),t("option",{value:"approved"},"Approved",-1),t("option",{value:"rejected"},"Rejected",-1)])],512),[[Ce,S.value]]),t("button",{onClick:G,class:"bg-indigo-600 text-white px-4 py-2 rounded-lg text-sm font-medium hover:bg-indigo-700 transition-colors duration-200"},[...e[24]||(e[24]=[t("svg",{class:"w-4 h-4 inline mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})],-1),_(" Refresh ",-1)])])])])]),U.value?(c(),u("div",tt,[...e[26]||(e[26]=[t("div",{class:"animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600"},null,-1),t("span",{class:"ml-3 text-gray-600"},"Loading temple applications...",-1)])])):(c(),u("div",st,[F.value.length===0?(c(),u("div",ot,[...e[27]||(e[27]=[t("svg",{class:"mx-auto h-12 w-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})],-1),t("h3",{class:"mt-2 text-sm font-medium text-gray-900"},"No applications found",-1),t("p",{class:"mt-1 text-sm text-gray-500"},"No temple applications match your current filter.",-1)])])):w("",!0),(c(!0),u(Z,null,ee(F.value,o=>{var a;return c(),u("div",{key:o.id,class:"p-6 hover:bg-gray-50 transition-colors duration-200"},[t("div",nt,[t("div",rt,[t("div",lt,[t("h3",at,m(o.templeName),1),t("span",{class:je([he(o.status),"px-2 py-1 rounded-full text-xs font-medium uppercase tracking-wide"])},m(o.status),3)]),t("div",it,[t("div",null,[e[28]||(e[28]=t("p",{class:"text-sm text-gray-600"},"Email",-1)),t("p",dt,m(o.adminEmail),1)]),t("div",null,[e[29]||(e[29]=t("p",{class:"text-sm text-gray-600"},"Phone",-1)),t("p",ut,m(o.phone||"Not provided"),1)]),t("div",null,[e[30]||(e[30]=t("p",{class:"text-sm text-gray-600"},"Location",-1)),t("p",ct,m(o.city)+", "+m(o.state),1)]),t("div",null,[e[31]||(e[31]=t("p",{class:"text-sm text-gray-600"},"Submitted",-1)),t("p",mt,m(xe(o.submittedAt)),1)]),t("div",null,[e[32]||(e[32]=t("p",{class:"text-sm text-gray-600"},"Documents",-1)),t("p",pt,m(((a=o.documents)==null?void 0:a.length)||0)+" files",1)])]),o.address?(c(),u("div",gt,[e[33]||(e[33]=t("p",{class:"text-sm text-gray-600"},"Address",-1)),t("p",vt,m(o.address),1)])):w("",!0),o.notes?(c(),u("div",ft,[e[34]||(e[34]=t("p",{class:"text-sm text-gray-600"},"Admin Notes",-1)),t("div",ht,[t("p",xt,m(o.notes),1)])])):w("",!0)]),t("div",yt,[t("button",{onClick:g=>ve(o),class:"bg-gray-100 text-gray-700 px-4 py-2 rounded-lg text-sm font-medium hover:bg-gray-200 transition-colors duration-200 whitespace-nowrap"},[...e[35]||(e[35]=[t("svg",{class:"w-4 h-4 inline mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})],-1),_(" View Details ",-1)])],8,wt),o.status==="pending"?(c(),u("div",bt,[t("button",{onClick:g=>K(o),class:"bg-green-600 text-white px-4 py-2 rounded-lg text-sm font-medium hover:bg-green-700 transition-colors duration-200 whitespace-nowrap",disabled:x.value},[...e[36]||(e[36]=[t("svg",{class:"w-4 h-4 inline mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})],-1),_(" Approve ",-1)])],8,kt),t("button",{onClick:g=>q(o),class:"bg-red-600 text-white px-4 py-2 rounded-lg text-sm font-medium hover:bg-red-700 transition-colors duration-200 whitespace-nowrap",disabled:x.value},[...e[37]||(e[37]=[t("svg",{class:"w-4 h-4 inline mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1),_(" Reject ",-1)])],8,_t)])):w("",!0)])])])}),128))]))]),T.value?(c(),u("div",Ct,[t("div",At,[t("div",{class:"px-6 py-4 border-b border-gray-200 flex items-center justify-between"},[e[39]||(e[39]=t("h3",{class:"text-lg font-bold text-gray-900"},"Temple Application Details",-1)),t("button",{onClick:B,class:"text-gray-400 hover:text-gray-600"},[...e[38]||(e[38]=[t("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),t("div",Tt,[p.value?(c(),u("div",jt,[t("div",null,[e[43]||(e[43]=t("h4",{class:"text-md font-semibold text-gray-900 mb-3"},"Temple Information",-1)),t("div",Dt,[t("div",null,[e[40]||(e[40]=t("label",{class:"text-sm text-gray-600"},"Temple Name",-1)),t("p",Ut,m(p.value.templeName),1)]),t("div",null,[e[41]||(e[41]=t("label",{class:"text-sm text-gray-600"},"Temple Type",-1)),t("p",$t,m(p.value.registrationType||"Religious Trust"),1)]),t("div",St,[e[42]||(e[42]=t("label",{class:"text-sm text-gray-600"},"Address",-1)),t("p",Mt,m(p.value.address),1)])])]),t("div",null,[e[47]||(e[47]=t("h4",{class:"text-md font-semibold text-gray-900 mb-3"},"Administrator Information",-1)),t("div",Rt,[t("div",null,[e[44]||(e[44]=t("label",{class:"text-sm text-gray-600"},"Email",-1)),t("p",Lt,m(p.value.adminEmail),1)]),t("div",null,[e[45]||(e[45]=t("label",{class:"text-sm text-gray-600"},"Phone",-1)),t("p",It,m(p.value.phone||"Not provided"),1)]),e[46]||(e[46]=t("div",null,[t("label",{class:"text-sm text-gray-600"},"Role"),t("p",{class:"font-medium text-gray-900"},"Temple Administrator")],-1))])]),t("div",null,[e[54]||(e[54]=t("h4",{class:"text-md font-semibold text-gray-900 mb-3"},"Uploaded Documents",-1)),!p.value.documents||p.value.documents.length===0?(c(),u("div",Pt," No documents uploaded or available. ")):(c(),u("div",Nt,[(c(!0),u(Z,null,ee(p.value.documents,o=>(c(),u("div",{key:o.id||o.name,class:"flex items-center space-x-3 p-3 border border-gray-200 rounded-lg"},[t("div",Et,[se(o)?(c(),u("svg",zt,[...e[48]||(e[48]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 11c0-.943 0-1.414.293-1.707C12.586 9 13.057 9 14 9h1c.943 0 1.414 0 1.707.293C17 9.586 17 10.057 17 11v2c0 .943 0 1.414-.293 1.707C16.414 15 15.943 15 15 15h-1m-4 0H9c-.943 0-1.414 0-1.707-.293C7 14.414 7 13.943 7 13v-2c0-.943 0-1.414.293-1.707C7.586 9 8.057 9 9 9h1m2 6V9m0 0V5.5c0-.465 0-.697.146-.854C12.293 4.5 12.526 4.5 12.99 4.5h1.02c.465 0 .697 0  .854.146.146.157.146.389.146.854V9"},null,-1)])])):oe(o)?(c(),u("svg",Bt,[...e[49]||(e[49]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16l4-4 4 4 4-4 4 4M4 8h16M5 20h14a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"},null,-1)])])):(c(),u("svg",Wt,[...e[50]||(e[50]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"},null,-1)])]))]),t("div",Vt,[t("p",Ft,m(o.name||o.filename||"document"),1),t("p",Ht,m(re(o)),1)]),t("div",Ot,[t("button",{onClick:a=>me(o),class:"px-2 py-1 text-indigo-600 hover:text-indigo-800 text-sm font-medium rounded hover:bg-indigo-50",disabled:b.value===(o.id||o.name),title:"View"},[...e[51]||(e[51]=[t("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})],-1)])],8,Jt),t("button",{onClick:a=>pe(o),class:"px-2 py-1 text-gray-700 hover:text-gray-900 text-sm font-medium rounded hover:bg-gray-100",disabled:b.value===(o.id||o.name),title:"Download"},[b.value===(o.id||o.name)?(c(),u("svg",Kt,[...e[52]||(e[52]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"},null,-1)])])):(c(),u("svg",qt,[...e[53]||(e[53]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"},null,-1)])]))],8,Gt)])]))),128))]))])])):w("",!0)]),t("div",Qt,[t("button",{onClick:B,class:"px-4 py-2 text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors duration-200"}," Close "),((l=p.value)==null?void 0:l.status)==="pending"?(c(),u("div",Xt,[t("button",{onClick:e[1]||(e[1]=o=>K(p.value)),class:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors duration-200",disabled:x.value}," Approve Temple ",8,Yt),t("button",{onClick:e[2]||(e[2]=o=>q(p.value)),class:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors duration-200",disabled:x.value}," Reject Application ",8,Zt)])):w("",!0)])])])):w("",!0),E.value?(c(),u("div",es,[t("div",ts,[e[56]||(e[56]=t("div",{class:"px-6 py-4 border-b border-gray-200"},[t("h3",{class:"text-lg font-bold text-gray-900"},"Reject Application")],-1)),t("div",ss,[e[55]||(e[55]=t("p",{class:"text-gray-600 mb-4"},"Please provide a reason for rejecting this temple application:",-1)),Y(t("textarea",{"onUpdate:modelValue":e[3]||(e[3]=o=>C.value=o),class:"w-full h-32 border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 resize-none",placeholder:"Enter rejection reason..."},null,512),[[Ae,C.value]])]),t("div",os,[t("button",{onClick:Q,class:"px-4 py-2 text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors duration-200"}," Cancel "),t("button",{onClick:fe,class:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors duration-200",disabled:x.value}," Confirm Reject ",8,ns)])])])):w("",!0),M.value?(c(),u("div",rs,[t("div",ls,[t("div",as,[e[58]||(e[58]=t("h3",{class:"text-lg font-bold text-gray-900"},"Temple Counts API Debug",-1)),t("button",{onClick:e[4]||(e[4]=o=>M.value=!1),class:"text-gray-400 hover:text-gray-600"},[...e[57]||(e[57]=[t("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),t("div",is,[t("div",ds,m(R.value),1)]),t("div",us,[t("button",{onClick:e[5]||(e[5]=o=>M.value=!1),class:"px-4 py-2 bg-gray-200 hover:bg-gray-300 text-gray-800 rounded-lg"}," Close ")])])])):w("",!0)])])}}};export{gs as default};
