import{_ as Ae,V as Ce,q as Re,Y as Le,e as Ee,r as w,c as M,E as Ne,s as Fe,I as Y,h as i,j as S,i as s,z as Ie,J as $e,K as Me,C as c,t as o,y as le,n as J,w as O,k as ae,F as j,l as V,v as oe,G as q,A as Ue,o as d}from"./index-y_ul9IQ_.js";const Be={class:"min-h-screen bg-gray-50"},Oe={key:0,class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 pt-4"},je={class:"bg-white shadow-sm border-b border-gray-200 rounded-2xl"},Ve={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6"},qe={class:"flex items-center justify-between"},Pe={class:"text-gray-600 mt-1"},ze={key:0,class:"text-indigo-600 font-medium"},We={key:1,class:"text-indigo-600 font-medium"},He={class:"flex items-center space-x-4"},Ye={class:"bg-indigo-50 px-4 py-2 rounded-lg border border-indigo-200"},Je={class:"text-indigo-800 font-medium"},Xe={class:"text-indigo-600 text-sm ml-2"},Ge={key:1,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},Ke={key:2,class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 pt-4"},Ze={class:"bg-red-50 border border-red-200 rounded-md p-4"},Qe={class:"flex"},et={class:"ml-3"},tt={class:"mt-1 text-sm text-red-700"},st={key:3,class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 pt-4"},nt={class:"bg-yellow-50 border border-yellow-200 rounded-md p-4 text-sm"},lt={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},at={class:"bg-white rounded-2xl shadow-sm border border-gray-200 overflow-hidden mb-8"},ot={class:"p-6"},rt={class:"mb-6"},it={class:"flex items-center justify-between mb-2"},dt=["disabled"],ut={class:"relative"},ct=["disabled"],mt=["value"],gt={key:0,class:"text-gray-500"},vt={key:0,class:"mt-2 text-sm text-amber-600 bg-amber-50 border border-amber-200 rounded-md p-2"},pt={key:1,class:"mt-2 text-sm text-green-600"},ft={key:0},yt={class:"mb-6"},bt={class:"flex flex-wrap gap-2"},ht=["onClick"],xt={class:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6"},wt={class:"flex flex-wrap gap-2"},_t=["onClick"],St={key:0,class:"mb-6 p-4 bg-gray-50 border border-gray-200 rounded-lg"},kt={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Tt={class:"border-t border-gray-200 pt-6"},Dt={class:"flex flex-col md:flex-row md:items-center md:justify-between"},At={class:"flex items-center space-x-3"},Ct={class:"relative"},Rt=["value"],Lt=["disabled"],Et={key:0,class:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",fill:"none",viewBox:"0 0 24 24"},Nt={key:1,class:"mr-2 h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},Ft={class:"bg-white rounded-2xl shadow-sm border border-gray-200 overflow-hidden"},It={class:"p-6"},$t={class:"flex flex-wrap gap-2"},Mt={class:"inline-flex items-center px-3 py-1.5 rounded-full text-sm bg-indigo-100 text-indigo-800"},Ut={class:"font-medium mr-1"},Bt={key:0},Ot={key:1},jt={class:"inline-flex items-center px-3 py-1.5 rounded-full text-sm bg-indigo-100 text-indigo-800"},Vt={class:"inline-flex items-center px-3 py-1.5 rounded-full text-sm bg-indigo-100 text-indigo-800"},qt={class:"inline-flex items-center px-3 py-1.5 rounded-full text-sm bg-indigo-100 text-indigo-800"},Pt={key:0},zt={class:"inline-flex items-center px-3 py-1.5 rounded-full text-sm bg-indigo-100 text-indigo-800"},Wt={__name:"TempleActivitiesReport",setup(Ht,{expose:re}){const v=Ne();Ue();const U=Ce(),A=Re(),P=Le(),{showToast:C}=Ee(),m=w("all"),R=w("events"),L=w("monthly"),N=w("pdf"),ie=w(!1),z=t=>{if(!t||t.startsWith("0000-")||t.startsWith("0001-")||t==="0000-01-01"||t==="0001-01-01"||t.includes("0000-01-01")||t.includes("0001-01-01"))return!1;const e=new Date(t);return!isNaN(e.getTime())&&e.getFullYear()>1900},de=t=>{if(!t)return"";const e=String(t);if(e.startsWith("0000-")||e.startsWith("0001-")||e.includes("0000-01-01")||e.includes("0001-01-01")||e==="0000-01-01"||e==="0001-01-01"||/^0000/.test(e)||/^0001/.test(e))return"";try{let n,a,l;if(e.includes("T")||e.includes(" ")&&e.includes("-")){if(!z(e))return"";const y=new Date(e);if(!isNaN(y.getTime())&&y.getFullYear()>1900)n=y.getHours(),a=y.getMinutes();else return""}else if(e.includes(":")){const y=e.split(":");n=parseInt(y[0],10),a=parseInt(y[1],10),l=y[2]?parseInt(y[2],10):0}else return"";if(isNaN(n)||isNaN(a)||n<0||n>23||a<0||a>59)return"";const x=n>=12?"PM":"AM",f=n%12||12,k=a.toString().padStart(2,"0");return`${f}:${k} ${x}`}catch(n){return console.error("Error formatting time:",n),""}},ue=t=>{if(!t)return"";const e=String(t);if(e.startsWith("0000-")||e.startsWith("0001-")||e.includes("0000-01-01")||e.includes("0001-01-01")||e==="0000-01-01"||e==="0001-01-01"||/^0000/.test(e)||/^0001/.test(e))return"";try{if(!z(e))return"";const n=new Date(e);return isNaN(n.getTime())||n.getFullYear()<1900?"":n.toLocaleString("en-IN",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit",hour12:!0})}catch(n){return console.error("Error formatting datetime:",n),""}},ce=t=>{if(!t)return"";const e=String(t);return e.includes("0000-01-01")||e.includes("0001-01-01")||e.startsWith("0000-")||e.startsWith("0001-")||/^0000/.test(e)||/^0001/.test(e)?"":e},me=()=>{const t=new Date;return{start:new Date(t.getTime()-720*60*60*1e3).toISOString().split("T")[0],end:t.toISOString().split("T")[0]}},{start:ge,end:ve}=me(),b=w(ge),h=w(ve),D=w(!1),p=w(null),B=w([]),E=w(!1),X=[{label:"Events Report",value:"events"},{label:"Seva Reports",value:"sevas"},{label:"Seva Bookings",value:"bookings"},{label:"Donations Reports",value:"donations"}],G=[{label:"Weekly",value:"weekly"},{label:"Monthly",value:"monthly"},{label:"Yearly",value:"yearly"},{label:"Custom Range",value:"custom"}],K=[{label:"PDF",value:"pdf"},{label:"CSV",value:"csv"},{label:"Excel",value:"excel"}],pe=M(()=>{var l;const t=(A==null?void 0:A.user)||{},e=(t.role||t.userType||"").toString().toLowerCase(),n=Array.isArray(t.roles)?t.roles.map(x=>(x||"").toString().toLowerCase()):[],a=!!(t.isSuperAdmin||t.is_super_admin);return e==="superadmin"||n.includes("superadmin")||a||((l=v==null?void 0:v.query)==null?void 0:l.from)==="superadmin"}),g=M(()=>!!pe.value),u=M(()=>{var t,e;if(g.value&&v.query.tenants){const n=String(v.query.tenants).split(",").filter(Boolean);if(n.length>1)return null;if(n.length===1)return n[0].trim()}return v.params.tenantId||v.query.tenantId||v.query.tenant_id||((t=A.user)==null?void 0:t.tenantId)||((e=A.user)==null?void 0:e.tenant_id)||(typeof localStorage<"u"?localStorage.getItem("current_tenant_id"):null)||null}),r=M(()=>{if(g.value&&v.query.tenants)return String(v.query.tenants).split(",").map(e=>e.trim()).filter(Boolean);const t=u.value;return t?[t]:[]}),_=M(()=>g.value&&r.value.length>1?B.value||[]:U.temples||[]),Z=t=>{if(t==="all")return"All Temples";const e=_.value.find(n=>{var a;return((a=n.id)==null?void 0:a.toString())===(t==null?void 0:t.toString())});return e?e.name:"Unknown Temple"},W=t=>{const e=X.find(n=>n.value===t);return e?e.label:"Unknown"},fe=t=>{const e=G.find(n=>n.value===t);return e?e.label:"Unknown"},Q=t=>{const e=K.find(n=>n.value===t);return e?e.label:"Unknown"},ee=t=>t?new Date(t).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):"",H=()=>{p.value=null},ye=t=>{R.value=t},be=t=>{L.value=t;const e=new Date;if(t==="weekly"){const n=new Date(e.getTime()-6048e5);b.value=n.toISOString().split("T")[0],h.value=e.toISOString().split("T")[0]}else if(t==="monthly"){const n=new Date(e.getTime()-2592e6);b.value=n.toISOString().split("T")[0],h.value=e.toISOString().split("T")[0]}else if(t==="yearly"){const n=new Date(e.getFullYear()-1,e.getMonth(),e.getDate());b.value=n.toISOString().split("T")[0],h.value=e.toISOString().split("T")[0]}},he=()=>{console.log("Temple changed to:",m.value),H()},te=()=>{b.value&&h.value&&new Date(b.value)>new Date(h.value)?p.value="Start date cannot be after end date":H()},F=t=>t?{"X-Tenant-ID":String(t),"X-Entity-ID":String(t)}:{},xe=()=>{const t={type:R.value,dateRange:L.value,startDate:b.value,endDate:h.value,format:N.value,isSuperAdmin:g.value};if(m.value!=="all"){const e=m.value,n=_.value.find(a=>String(a.id)===String(e));if(t.templeId=e,t.temple_id=e,t.entityId=e,t.entity_id=e,n){const a=n.tenant_id||n.entityId||n.created_by;a&&(t.tenantId=a,t.tenant_id=a)}else u.value&&(t.tenantId=u.value,t.tenant_id=u.value);t.singleTemple=!0,t.filterByEntity=!0,console.log("Single temple selected - filtering by entity:",{templeId:e,templeTenantId:n==null?void 0:n.tenant_id,params:t})}else g.value&&r.value.length>1?(t.tenantIds=r.value.slice(),t.entityIds=r.value.slice(),t.allTemples=!0):u.value&&(t.tenantId=u.value,t.tenant_id=u.value,t.entityId=u.value,t.entity_id=u.value,t.allTemples=!0),console.log("All temples selected:",{multiTenant:g.value&&r.value.length>1,tenantIds:r.value,params:t});return t},we=async()=>{var t,e;if(!E.value){if(!b.value||!h.value){p.value="Please select both start and end dates",C("Please select both start and end dates","error");return}if(new Date(b.value)>new Date(h.value)){p.value="Start date cannot be after end date",C("Start date cannot be after end date","error");return}if(r.value.length===0){p.value="No tenant selected for report generation",C("No tenant selected for report generation","error");return}if(m.value!=="all"&&!_.value.find(a=>String(a.id)===String(m.value))){p.value="Selected temple not found. Please refresh and try again.",C("Selected temple not found","error");return}E.value=!0,p.value=null;try{const n=xe();console.log("Downloading report with params:",n);let a;if(P&&typeof P.downloadActivitiesReport=="function")a=await P.downloadActivitiesReport(n);else{const l={"Content-Type":"application/json"};if(m.value!=="all"){const T=_.value.find(De=>String(De.id)===String(m.value)),ne=(T==null?void 0:T.tenant_id)||(T==null?void 0:T.entityId)||(T==null?void 0:T.created_by)||u.value;ne&&Object.assign(l,F(ne))}else u.value&&r.value.length===1&&Object.assign(l,F(u.value));const x=await q.post("/v1/reports/activities/download",n,{responseType:"blob",headers:l}),f=x.headers["content-type"]||"application/octet-stream",k=new Blob([x.data],{type:f}),y=window.URL.createObjectURL(k),$=document.createElement("a");$.href=y;const Se=new Date().toISOString().split("T")[0],ke=W(R.value).toLowerCase().replace(/\s+/g,"-"),Te=m.value==="all"?"all-temples":`temple-${m.value}`;$.download=`${ke}-${Te}-${Se}.${n.format}`,document.body.appendChild($),$.click(),document.body.removeChild($),window.URL.revokeObjectURL(y),a={success:!0}}if(a&&a.success){const l=m.value==="all"?"all temples":Z(m.value);C(`${W(R.value)} for ${l} downloaded successfully as ${Q(N.value)}`,"success")}else throw new Error((a==null?void 0:a.message)||"Failed to download report")}catch(n){console.error("Error downloading report:",n);const a=((e=(t=n.response)==null?void 0:t.data)==null?void 0:e.message)||n.message||"Unknown error occurred";p.value=`Failed to download report: ${a}`,C("Failed to download report. Please try again.","error")}finally{E.value=!1}}},I=async()=>{var t,e;D.value=!0,p.value=null;try{if(U.temples=[],B.value=[],r.value.length===0){console.warn("No tenant IDs available for fetching temples"),p.value="No tenant selected to load temples.";return}if(g.value&&r.value.length>1){console.log("Fetching temples for multiple tenants:",r.value);const n=r.value.map(f=>se(f).catch(k=>(console.warn(`Failed to fetch temples for tenant ${f}:`,k),[]))),a=await Promise.allSettled(n),l=[];for(let f=0;f<a.length;f++){const k=a[f];k.status==="fulfilled"&&Array.isArray(k.value)&&l.push(...k.value)}const x=new Set;B.value=l.filter(f=>x.has(f.id)?!1:(x.add(f.id),!0)),console.log(`Loaded ${B.value.length} temples from ${r.value.length} tenants`)}else if(u.value){console.log("Fetching temples for single tenant:",u.value);const n=await se(u.value);U.temples=n,console.log(`Loaded ${U.temples.length} temples for tenant ${u.value}`)}else console.warn("No tenant ID available to fetch temples"),p.value="No tenant selected to load temples."}catch(n){console.error("Error in fetchTemples:",n);const a=((e=(t=n.response)==null?void 0:t.data)==null?void 0:e.message)||n.message||"Unknown error occurred";p.value=`Failed to load temple data: ${a}`}finally{D.value=!1}},se=async t=>{console.log(`Fetching temples for tenant: ${t}`);try{try{const e=await q.get("/temples",{params:{tenant_id:t,entityId:t,entity_id:t},headers:F(t)});let n=[];if(Array.isArray(e.data)?n=e.data:e.data&&Array.isArray(e.data.data)?n=e.data.data:e.data&&Array.isArray(e.data.temples)&&(n=e.data.temples),n.length>0)return n.map(a=>({id:a.id,name:a.name||a.temple_name||a.entity_name||"Unknown Temple",status:a.status||"active",tenant_id:a.tenant_id||a.entityId||a.created_by||t,created_by:a.created_by||t,entityId:a.entityId||a.tenant_id||t}))}catch(e){console.log("Temples endpoint failed, trying entities endpoint:",e.message)}try{const e=await q.get("/entities",{params:{tenant_id:t,entityId:t,entity_id:t,created_by:t},headers:F(t)});let n=[];return Array.isArray(e.data)?n=e.data:e.data&&Array.isArray(e.data.data)?n=e.data.data:e.data&&Array.isArray(e.data.entities)&&(n=e.data.entities),n.filter(l=>String(l.created_by)===String(t)||String(l.tenant_id)===String(t)||String(l.entityId)===String(t)).map(l=>({id:l.id,name:l.name||l.temple_name||l.entity_name||"Unknown Temple",status:l.status||"active",tenant_id:l.tenant_id||l.entityId||l.created_by||t,created_by:l.created_by||t,entityId:l.entityId||l.tenant_id||t}))}catch(e){console.log("Entities endpoint also failed:",e.message)}try{const e=await q.get("/entities",{headers:F(t)});let n=[];return Array.isArray(e.data)?n=e.data:e.data&&Array.isArray(e.data.data)&&(n=e.data.data),n.filter(l=>String(l.created_by)===String(t)||String(l.tenant_id)===String(t)||String(l.entityId)===String(t)).map(l=>({id:l.id,name:l.name||l.temple_name||l.entity_name||"Unknown Temple",status:l.status||"active",tenant_id:l.tenant_id||l.entityId||l.created_by||t,created_by:l.created_by||t,entityId:l.entityId||l.tenant_id||t}))}catch(e){return console.error("All strategies failed for tenant:",t,e),[]}}catch(e){return console.error(`Error fetching temples for tenant ${t}:`,e),[]}},_e=async()=>{await I()};return Fe(async()=>{console.log("Component mounted with tenant context:",{fromSuperadmin:g.value,effectiveTenantId:u.value,tenantIds:r.value,routeQuery:v.query,routeParams:v.params}),await I()}),Y(r,async(t,e)=>{t&&t.length>0&&JSON.stringify(t)!==JSON.stringify(e)&&(console.log("Tenant IDs changed, refetching temples:",{old:e,new:t}),await I())},{deep:!0}),Y(u,async(t,e)=>{t!==e&&(console.log("Effective tenant ID changed, refetching temples:",{old:e,new:t}),await I())}),Y(()=>v.query,async(t,e)=>{(t.tenants!==e.tenants||t.tenantId!==e.tenantId)&&(console.log("Route query changed, updating tenant context:",{old:e,new:t}),await I())},{deep:!0}),re({formatTime12Hour:de,formatDateTime:ue,cleanTimeValue:ce,isValidDate:z}),(t,e)=>{var a;const n=Me("router-link");return d(),i("div",Be,[g.value?(d(),i("div",Oe,[Ie(n,{to:"/superadmin/reports",class:"inline-flex items-center px-4 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition-colors"},{default:$e(()=>[...e[4]||(e[4]=[s("svg",{class:"mr-2 h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 19l-7-7m0 0l7-7m-7 7h18"})],-1),c(" Back to SuperAdmin Reports ",-1)])]),_:1})])):S("",!0),s("div",je,[s("div",Ve,[s("div",qe,[s("div",null,[e[6]||(e[6]=s("h1",{class:"text-2xl font-bold text-gray-900"},"Temple Activities Report",-1)),s("p",Pe,[e[5]||(e[5]=c(" Download event, seva, and booking activity data for your temples ",-1)),g.value&&r.value.length>1?(d(),i("span",ze," (Multiple Tenants: "+o(r.value.length)+" selected) ",1)):u.value?(d(),i("span",We," (Tenant ID: "+o(u.value)+") ",1)):S("",!0)])]),s("div",He,[s("div",Ye,[s("span",Je,o(((a=le(A).user)==null?void 0:a.name)||"Tenant User"),1),s("span",Xe,o(g.value?"(Super Admin)":"(Tenant)"),1)])])])])]),D.value?(d(),i("div",Ge,[...e[7]||(e[7]=[s("div",{class:"bg-white rounded-lg p-6 flex items-center space-x-3"},[s("div",{class:"animate-spin rounded-full h-6 w-6 border-b-2 border-indigo-600"}),s("span",{class:"text-gray-900 font-medium"},"Loading data...")],-1)])])):S("",!0),p.value?(d(),i("div",Ke,[s("div",Ze,[s("div",Qe,[e[10]||(e[10]=s("svg",{class:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor"},[s("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"})],-1)),s("div",et,[e[8]||(e[8]=s("h3",{class:"text-sm font-medium text-red-800"},"Error",-1)),s("p",tt,o(p.value),1)]),s("div",{class:"ml-auto pl-3"},[s("button",{onClick:H,class:"text-red-400 hover:text-red-500"},[...e[9]||(e[9]=[s("span",{class:"sr-only"},"Dismiss",-1),s("svg",{class:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor"},[s("path",{"fill-rule":"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z","clip-rule":"evenodd"})],-1)])])])])])])):S("",!0),ie.value?(d(),i("div",st,[s("div",nt,[e[17]||(e[17]=s("h4",{class:"font-medium text-yellow-800"},"Debug Info:",-1)),s("p",null,[e[11]||(e[11]=s("strong",null,"From Superadmin:",-1)),c(" "+o(g.value),1)]),s("p",null,[e[12]||(e[12]=s("strong",null,"Effective Tenant ID:",-1)),c(" "+o(u.value),1)]),s("p",null,[e[13]||(e[13]=s("strong",null,"Tenant IDs:",-1)),c(" "+o(JSON.stringify(r.value)),1)]),s("p",null,[e[14]||(e[14]=s("strong",null,"Selected Temple:",-1)),c(" "+o(m.value),1)]),s("p",null,[e[15]||(e[15]=s("strong",null,"Available Temples:",-1)),c(" "+o(_.value.length),1)]),s("p",null,[e[16]||(e[16]=s("strong",null,"Route Query:",-1)),c(" "+o(JSON.stringify(le(v).query)),1)])])])):S("",!0),s("div",lt,[s("div",at,[e[29]||(e[29]=s("div",{class:"p-6 border-b border-gray-200"},[s("h3",{class:"text-xl font-bold text-gray-900"},"Temple Activities"),s("p",{class:"text-gray-600 mt-1"},"Configure filters and download your temple activity data")],-1)),s("div",ot,[s("div",rt,[s("div",it,[e[19]||(e[19]=s("label",{class:"block text-gray-700 font-medium"},"Select Temple",-1)),s("button",{onClick:_e,disabled:D.value,class:"inline-flex items-center px-3 py-1.5 text-xs font-medium text-indigo-600 bg-indigo-50 border border-indigo-200 rounded-md hover:bg-indigo-100 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50 disabled:cursor-not-allowed"},[(d(),i("svg",{class:J(["mr-1 h-3 w-3",{"animate-spin":D.value}]),fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[...e[18]||(e[18]=[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"},null,-1)])],2)),c(" "+o(D.value?"Refreshing...":"Refresh"),1)],8,dt)]),s("div",ut,[O(s("select",{"onUpdate:modelValue":e[0]||(e[0]=l=>m.value=l),class:"block w-full py-2 px-3 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500",onChange:he,disabled:D.value},[e[20]||(e[20]=s("option",{value:"all"},"All Temples",-1)),(d(!0),i(j,null,V(_.value,l=>(d(),i("option",{key:l.id,value:l.id},[c(o(l.name)+" ",1),l.tenant_id?(d(),i("span",gt,"(Tenant: "+o(l.tenant_id)+")",1)):S("",!0)],8,mt))),128))],40,ct),[[ae,m.value]])]),_.value.length===0&&!D.value?(d(),i("div",vt,[...e[21]||(e[21]=[s("div",{class:"flex items-center"},[s("svg",{class:"h-4 w-4 text-amber-500 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L4.082 16.5c-.77.833.192 2.5 1.732 2.5z"})]),c(" No temples found for selected tenant(s). Please check tenant access or try refreshing. ")],-1)])])):_.value.length>0?(d(),i("div",pt,[c(o(_.value.length)+" temple"+o(_.value.length!==1?"s":"")+" available ",1),g.value&&r.value.length>1?(d(),i("span",ft," across "+o(r.value.length)+" tenant"+o(r.value.length!==1?"s":""),1)):S("",!0)])):S("",!0)]),s("div",yt,[e[22]||(e[22]=s("label",{class:"block text-gray-700 font-medium mb-2"},"Activity Type",-1)),s("div",bt,[(d(),i(j,null,V(X,l=>s("button",{key:l.value,onClick:x=>ye(l.value),class:J(["px-4 py-2 rounded-md text-sm font-medium transition-colors duration-200",R.value===l.value?"bg-indigo-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"])},o(l.label),11,ht)),64))])]),s("div",xt,[s("div",null,[e[23]||(e[23]=s("label",{class:"block text-gray-700 font-medium mb-2"},"Date Range",-1)),s("div",wt,[(d(),i(j,null,V(G,l=>s("button",{key:l.value,onClick:x=>be(l.value),class:J(["px-4 py-2 rounded-md text-sm font-medium transition-colors duration-200",L.value===l.value?"bg-indigo-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"])},o(l.label),11,_t)),64))])])]),L.value==="custom"?(d(),i("div",St,[s("div",kt,[s("div",null,[e[24]||(e[24]=s("label",{class:"block text-gray-700 text-sm font-medium mb-2"},"Start Date",-1)),O(s("input",{type:"date","onUpdate:modelValue":e[1]||(e[1]=l=>b.value=l),class:"w-full py-2 px-3 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500",onChange:te},null,544),[[oe,b.value]])]),s("div",null,[e[25]||(e[25]=s("label",{class:"block text-gray-700 text-sm font-medium mb-2"},"End Date",-1)),O(s("input",{type:"date","onUpdate:modelValue":e[2]||(e[2]=l=>h.value=l),class:"w-full py-2 px-3 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500",onChange:te},null,544),[[oe,h.value]])])])])):S("",!0),s("div",Tt,[s("div",Dt,[e[28]||(e[28]=s("div",{class:"mb-4 md:mb-0"},[s("h4",{class:"text-lg font-medium text-gray-900"},"Download Report"),s("p",{class:"text-sm text-gray-600"},"Select a format and click download")],-1)),s("div",At,[s("div",Ct,[O(s("select",{"onUpdate:modelValue":e[3]||(e[3]=l=>N.value=l),class:"block w-full py-2 px-3 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500"},[(d(),i(j,null,V(K,l=>s("option",{key:l.value,value:l.value},o(l.label),9,Rt)),64))],512),[[ae,N.value]])]),s("button",{onClick:we,disabled:E.value,class:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50 disabled:cursor-not-allowed"},[E.value?(d(),i("svg",Et,[...e[26]||(e[26]=[s("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),s("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)])])):(d(),i("svg",Nt,[...e[27]||(e[27]=[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"},null,-1)])])),c(" "+o(E.value?"Downloading...":"Download"),1)],8,Lt)])])])])]),s("div",Ft,[s("div",It,[e[34]||(e[34]=s("h3",{class:"text-lg font-medium text-gray-900 mb-4"},"Applied Filters",-1)),s("div",$t,[s("div",Mt,[s("span",Ut,o(g.value&&r.value.length>1?"Tenants:":"Tenant:"),1),g.value&&r.value.length>1?(d(),i("span",Bt,o(r.value.length)+" selected ",1)):(d(),i("span",Ot,o(u.value),1))]),s("div",jt,[e[30]||(e[30]=s("span",{class:"font-medium mr-1"},"Temple:",-1)),c(" "+o(m.value==="all"?"All Temples":Z(m.value)),1)]),s("div",Vt,[e[31]||(e[31]=s("span",{class:"font-medium mr-1"},"Activity:",-1)),c(" "+o(W(R.value)),1)]),s("div",qt,[e[32]||(e[32]=s("span",{class:"font-medium mr-1"},"Period:",-1)),c(" "+o(fe(L.value))+" ",1),L.value==="custom"?(d(),i("span",Pt," ("+o(ee(b.value))+" - "+o(ee(h.value))+") ",1)):S("",!0)]),s("div",zt,[e[33]||(e[33]=s("span",{class:"font-medium mr-1"},"Format:",-1)),c(" "+o(Q(N.value)),1)])]),e[35]||(e[35]=s("p",{class:"mt-4 text-sm text-gray-600"}," Your report will include data based on the filters above. Click Download to generate and download the report. ",-1))])])])])}}},Jt=Ae(Wt,[["__scopeId","data-v-be5b3e67"]]);export{Jt as default};
