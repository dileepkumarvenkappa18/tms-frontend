import{_ as se,h as r,j as u,o as n,e as we,c as S,r as w,s as ke,i as e,C as c,F as E,l as q,n as f,t as i,p as R,B as _e,w as _,v as N,z as te,O as Ce,k as Ue,P as Ne}from"./index-DBwbCPCQ.js";import{u as De}from"./superadmin-CNKF4_6H.js";import"./superadmin.service-BupbF8UL.js";const Se={name:"UserAssignButton",props:{user:{type:Object,required:!0}},computed:{shouldShowAssignButton(){if(!this.user||!this.user.role)return!1;let j="";return typeof this.user.role=="string"?j=this.user.role.toLowerCase():typeof this.user.role=="object"&&(j=(this.user.role.role_name||this.user.role.roleName||"").toLowerCase()),["standarduser","standard user","Standard User","monitoringuser","monitoring user","Monitor User"].includes(j)}},methods:{navigateToAssignPage(){this.$router.push({name:"AssignTenants",params:{userId:this.user.id||this.user.ID}})}}};function Pe(j,A,D,h,z,P){return P.shouldShowAssignButton?(n(),r("button",{key:0,onClick:A[0]||(A[0]=(...O)=>P.navigateToAssignPage&&P.navigateToAssignPage(...O)),class:"text-indigo-600 hover:text-indigo-900 ml-2"}," Tenant Assigned / Assign ")):u("",!0)}const Ae=se(Se,[["render",Pe]]),je={class:"bg-white rounded-xl shadow-sm border border-gray-200"},Me={class:"p-6"},Ve={class:"overflow-x-auto"},Be={class:"min-w-full divide-y divide-gray-200"},Fe={class:"bg-white divide-y divide-gray-200"},Te={key:0,class:"animate-pulse"},$e={key:1},Le={class:"px-6 py-4 whitespace-nowrap"},Ee={class:"text-sm font-medium text-gray-900"},qe={class:"px-6 py-4 whitespace-nowrap"},Re={class:"text-sm text-gray-500"},ze={class:"px-6 py-4 whitespace-nowrap"},Oe={class:"text-sm text-gray-500"},Ie={class:"px-6 py-4 whitespace-nowrap"},He={class:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-indigo-100 text-indigo-800"},Je={class:"px-6 py-4 whitespace-nowrap"},We={class:"relative inline-block w-10 mr-2 align-middle select-none"},Ge=["id","checked","onChange"],Ke=["for"],Qe={class:"text-xs ml-1"},Xe={class:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium"},Ye=["onClick"],Ze={key:0,class:"fixed inset-0 z-50 overflow-auto bg-black bg-opacity-50 flex items-center justify-center"},et={class:"bg-white rounded-lg shadow-xl max-w-5xl w-full mx-4 max-h-[90vh] overflow-y-auto"},tt={class:"px-6 py-4"},st={class:"flex items-start"},lt={class:"flex-shrink-0"},at={key:0,class:"h-5 w-5 text-green-500",fill:"currentColor",viewBox:"0 0 20 20"},ot={key:1,class:"h-5 w-5 text-red-500",fill:"currentColor",viewBox:"0 0 20 20"},rt={class:"ml-3 w-full"},nt={key:0},it={key:0},dt={key:1},ut={key:2,class:"mt-2 list-disc list-inside"},pt={key:1,class:"space-y-6"},ct={class:"bg-blue-50 border border-blue-200 rounded-lg p-4"},mt={class:"flex items-start"},vt={class:"mt-2 text-sm text-blue-700"},gt={class:"list-disc list-inside mt-1 space-y-1"},xt={class:"mt-6"},ft={key:0,class:"mt-2 text-sm text-red-600"},bt={key:2,class:"space-y-6"},ht={class:"flex items-center justify-between"},yt={class:"text-sm text-gray-600"},wt={class:"overflow-x-auto border border-gray-200 rounded-lg"},kt={class:"min-w-full divide-y divide-gray-200"},_t={class:"bg-white divide-y divide-gray-200"},Ct={class:"px-4 py-3 text-sm text-gray-900"},Ut={class:"px-4 py-3 text-sm text-gray-500"},Nt={class:"px-4 py-3 text-sm text-gray-500"},Dt={class:"px-4 py-3 text-sm text-gray-500"},St={class:"px-4 py-3 text-sm"},Pt={class:"px-4 py-3 text-sm"},At={key:0,class:"text-sm text-gray-500 text-center"},jt={class:"flex justify-end space-x-3 pt-4 border-t border-gray-200"},Mt=["disabled"],Vt={key:0,class:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},Bt={key:1,class:"fixed inset-0 z-50 overflow-auto bg-black bg-opacity-50 flex items-center justify-center"},Ft={class:"bg-white rounded-lg shadow-xl max-w-3xl w-full mx-4 max-h-[90vh] overflow-y-auto"},Tt={class:"px-6 py-4 border-b border-gray-200 flex justify-between items-center"},$t={class:"text-lg font-medium text-gray-900"},Lt={class:"px-6 py-4"},Et={key:0,class:"mb-6 bg-green-50 border border-green-200 rounded-lg p-4"},qt={class:"flex items-center"},Rt={class:"ml-3"},zt={class:"text-sm font-medium text-green-800"},Ot={class:"mt-1 text-sm text-green-700"},It={key:0,class:"mt-1 text-sm text-red-600"},Ht={key:0,class:"mt-1 text-sm text-red-600"},Jt={key:0},Wt={key:0,class:"mt-1 text-sm text-red-600"},Gt={key:0,class:"mt-1 text-sm text-red-600"},Kt=["disabled"],Qt={value:"",disabled:""},Xt=["value"],Yt={key:0,class:"mt-2 text-sm text-amber-600"},Zt={key:1,class:"mt-2 text-sm text-red-600"},es={key:1,class:"space-y-4 p-4 bg-gray-50 rounded-lg border border-gray-200"},ts={key:0,class:"mt-1 text-sm text-red-600"},ss={key:0,class:"mt-1 text-sm text-red-600"},ls={key:0,class:"mt-1 text-sm text-red-600"},as={key:0,class:"mt-1 text-sm text-red-600"},os={key:0,class:"mt-1 text-sm text-red-600"},rs={key:2,class:"flex items-center space-x-2"},ns={class:"relative inline-block w-10 mr-2 align-middle select-none"},is={class:"text-sm text-gray-500"},ds={class:"flex justify-end space-x-3 pt-3"},us=["disabled"],ps={key:0,class:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},cs={__name:"UserManagement",setup(j){const{success:A,error:D}=we(),h=De(),z=S(()=>h.loadingUserAction),P=S(()=>h.loadingUserRoles),O=S(()=>h.loadingUsers),M=w(!1),V=w(!1),g=w(!1),I=w(null),H=w(!1),y=w([]),b=w(""),F=w(!1),B=w(!1),m=w(null),T=S(()=>h.userRoles||[]),le=S(()=>h.users||[]),J=S(()=>T.value.map(s=>s.role_name)),W=s=>{let t="";return typeof s=="object"&&s?t=s.role_name||s.name||s.description||"":t=s||"",String(t).toLowerCase().replace(/[\s\-_]/g,"")},ae=s=>W(s==null?void 0:s.role)==="templeadmin",oe=s=>{var U,L,Z,ee;const t=v=>typeof v=="string"?v.toLowerCase().trim():null,d=v=>typeof v=="boolean"?v:null,p=[t((U=s==null?void 0:s.temple_details)==null?void 0:U.approval_status),t((L=s==null?void 0:s.temple_details)==null?void 0:L.approvalStatus),t((Z=s==null?void 0:s.temple_details)==null?void 0:Z.approval),t(s==null?void 0:s.approval_status),t(s==null?void 0:s.approvalStatus)].filter(Boolean);if([d((ee=s==null?void 0:s.temple_details)==null?void 0:ee.is_approved),d(s==null?void 0:s.is_approved)].filter(v=>v!==null).includes(!0))return{known:!0,approved:!0};if(p.some(v=>v==="approved"||v==="approve"||v.includes("approve")&&!v.includes("not")&&!v.includes("un")&&!v.includes("reject")&&!v.includes("pending")))return{known:!0,approved:!0};const l=["pending","under_review","underreview","awaiting_approval","awaitingapproval","not_approved","notapproved","rejected","declined"];return p.some(v=>l.includes(v))?{known:!0,approved:!1}:{known:!1,approved:!1}},G=S(()=>(le.value||[]).filter(s=>{if(!ae(s))return!0;const t=oe(s);return t.known?t.approved:!0})),a=w({fullName:"",email:"",password:"",phone:"",role:"",isActive:!0,templeDetails:{name:"",place:"",address:"",phoneNumber:"",description:""}}),o=w({}),re=()=>{V.value=!0},ne=()=>{H.value=!0,m.value=null},ie=()=>{H.value=!1,$(),m.value=null};ke(async()=>{await h.refreshUserData()});const de=s=>{if(typeof s=="object"&&(s!=null&&s.description))return s.description;if(typeof s=="object"&&(s!=null&&s.role_name))return s.role_name;const t=T.value.find(d=>d.role_name===s);return t?t.description||t.role_name:s},K=s=>{const t=W(s==null?void 0:s.role),d=t==="standarduser"||t==="monitoringuser",p=((s==null?void 0:s.status)||"").toLowerCase()!=="active";return d&&p},ue=s=>J.value.includes(s),pe=s=>["active","inactive"].includes(s==null?void 0:s.toLowerCase()),ce=()=>{const t=[["Full Name","Email","Phone","Password","Role","Status"],["John Doe","john.doe@example.com","+1234567890","password123","user","active"],["Jane Smith","jane.smith@example.com","+1234567891","password456","admin","active"],["Mike Johnson","mike.johnson@example.com","+1234567892","password789","templeadmin","inactive"]].map(k=>k.map(l=>`"${l}"`).join(",")).join(`
`),d=new Blob([t],{type:"text/csv;charset=utf-8;"}),p=document.createElement("a"),C=URL.createObjectURL(d);p.setAttribute("href",C),p.setAttribute("download","bulk_users_template.csv"),p.style.visibility="hidden",document.body.appendChild(p),p.click(),document.body.removeChild(p)},me=s=>{const t=s.target.files[0];t&&Q(t)},ve=s=>{F.value=!1;const t=s.dataTransfer.files;t.length>0&&Q(t[0])},Q=s=>{if(b.value="",!s.name.toLowerCase().endsWith(".csv")){b.value="Please upload a CSV file (.csv extension required)";return}if(s.size>5*1024*1024){b.value="File size must be less than 5MB";return}const t=new FileReader;t.onload=d=>{try{const p=d.target.result;ge(p)}catch{b.value="Error reading the file. Please try again."}},t.onerror=()=>{b.value="Error reading the file. Please try again."},t.readAsText(s)},ge=s=>{try{const t=s.split(`
`).filter(l=>l.trim());if(t.length<2){b.value="CSV file must contain at least a header row and one data row";return}const d=t[0].split(",").map(l=>l.replace(/\"/g,"").trim()),p=["Full Name","Email","Phone","Password","Role","Status"];if(p.some(l=>!d.includes(l))){b.value=`CSV headers must match exactly: ${p.join(", ")}`;return}const k=[];for(let l=1;l<t.length;l++){const x=t[l].split(",").map(L=>L.replace(/\"/g,"").trim());if(x.length!==d.length){b.value=`Row ${l+1} has ${x.length} columns but expected ${d.length}`;return}const U={full_name:x[d.indexOf("Full Name")],email:x[d.indexOf("Email")],phone:x[d.indexOf("Phone")],password:x[d.indexOf("Password")],role:x[d.indexOf("Role")],status:x[d.indexOf("Status")]};if(!U.full_name||!U.email||!U.phone||!U.password||!U.role){b.value=`Row ${l+1} is missing required fields`;return}k.push(U)}y.value=k}catch{b.value="Error parsing CSV file. Please check the format and try again."}},$=()=>{y.value=[],b.value="",window.document.querySelector('input[type="file"]')&&(window.document.querySelector('input[type="file"]').value="")},xe=async()=>{if(!y.value.length){D("No CSV data to upload");return}B.value=!0,m.value=null;try{const s=await h.createBulkUsers(y.value);s.success?(m.value={success:!0,message:"Bulk upload completed successfully",data:s.data},A(`Successfully uploaded ${s.data.success_count} out of ${s.data.total_rows} users`),await h.refreshUserData(),setTimeout(()=>{$()},3e3)):(m.value={success:!1,message:s.error||"Bulk upload failed",data:s.data},D(s.error||"Failed to upload users"))}catch{m.value={success:!1,message:"An error occurred during bulk upload",data:null},D("Failed to upload users. Please try again.")}finally{B.value=!1}};S(()=>!a.value.fullName||!a.value.email||!g.value&&!a.value.password||!a.value.phone||!a.value.role||a.value.role==="templeadmin"&&(!a.value.templeDetails.name||!a.value.templeDetails.place||!a.value.templeDetails.address||!a.value.templeDetails.phoneNumber||!a.value.templeDetails.description)?!1:Object.keys(o.value).length===0);const fe=()=>{var s;return o.value={},a.value.fullName.trim()?a.value.fullName.trim().length<2&&(o.value.fullName="Full name must be at least 2 characters"):o.value.fullName="Full name is required",a.value.email?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(a.value.email)||(o.value.email="Please enter a valid email address"):o.value.email="Email is required",g.value||(a.value.password?a.value.password.length<6&&(o.value.password="Password must be at least 6 characters"):o.value.password="Password is required"),a.value.phone?/^[\+]?[1-9][\d]{0,15}$/.test(a.value.phone.replace(/\s/g,""))||(o.value.phone="Please enter a valid phone number"):o.value.phone="Phone number is required",a.value.role||(o.value.role="Please select a user role"),a.value.role==="templeadmin"&&(a.value.templeDetails.name||(o.value.templeName="Temple name is required"),a.value.templeDetails.place||(o.value.templePlace="Temple location is required"),a.value.templeDetails.address||(o.value.templeAddress="Temple address is required"),a.value.templeDetails.phoneNumber||(o.value.templePhoneNumber="Temple phone number is required"),(s=a.value.templeDetails.description)!=null&&s.trim()||(o.value.templeDescription="Temple description is required")),Object.keys(o.value).length===0},be=async()=>{if(fe())try{const s={fullName:a.value.fullName,email:a.value.email,phone:a.value.phone,role:a.value.role};g.value||(s.password=a.value.password),a.value.role==="templeadmin"&&(s.templeName=a.value.templeDetails.name,s.templePlace=a.value.templeDetails.place,s.templeAddress=a.value.templeDetails.address,s.templePhoneNo=a.value.templeDetails.phoneNumber,s.templeDescription=a.value.templeDetails.description);let t;g.value?t=await h.updateUser(I.value,s):t=await h.createUser(s),t.success?(M.value=!0,A(t.message||`User ${g.value?"updated":"created"} successfully!`),setTimeout(()=>{Y(),V.value=!1,M.value=!1},2e3)):D(t.error||`Failed to ${g.value?"update":"create"} user`)}catch{D(`Failed to ${g.value?"update":"create"} user. Please try again.`)}},he=async s=>{try{const t=(s.status||"").toLowerCase()==="active"?"inactive":"active",d=await h.updateUserStatus(s.id,t);d.success?A(d.message||`User status updated to ${t}`):D(d.error||"Failed to update user status")}catch{D("Failed to update user status")}},ye=s=>{var t,d,p,C,k,l;g.value=!0,I.value=s.id,a.value={fullName:s.full_name,email:s.email,phone:s.phone,role:(typeof s.role=="object"?(t=s.role)==null?void 0:t.role_name:s.role)||"",isActive:(s.status||"").toLowerCase()==="active",templeDetails:{name:((d=s.temple_details)==null?void 0:d.temple_name)||"",place:((p=s.temple_details)==null?void 0:p.temple_place)||"",address:((C=s.temple_details)==null?void 0:C.temple_address)||"",phoneNumber:((k=s.temple_details)==null?void 0:k.temple_phone_no)||"",description:((l=s.temple_details)==null?void 0:l.temple_description)||""}},V.value=!0},X=()=>{V.value=!1,setTimeout(()=>{Y(),g.value=!1,I.value=null,M.value=!1},300)},Y=()=>{a.value={fullName:"",email:"",password:"",phone:"",role:"",isActive:!0,templeDetails:{name:"",place:"",address:"",phoneNumber:"",description:""}},o.value={}};return(s,t)=>{var d,p,C,k;return n(),r("div",je,[e("div",{class:"p-6 border-b border-gray-200 flex justify-between items-center"},[t[16]||(t[16]=e("div",null,[e("h3",{class:"text-lg font-semibold text-gray-900 font-roboto"},"User Management"),e("p",{class:"text-sm text-gray-600 mt-1"},"Create and manage system users")],-1)),e("div",{class:"flex space-x-3"},[e("button",{onClick:ne,class:"flex items-center px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors"},[...t[14]||(t[14]=[e("svg",{class:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})],-1),c(" Bulk Upload User ",-1)])]),e("button",{onClick:re,class:"flex items-center px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors"},[...t[15]||(t[15]=[e("svg",{class:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),c(" Create User ",-1)])])])]),e("div",Me,[e("div",Ve,[e("table",Be,[t[19]||(t[19]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Full Name"),e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Email"),e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Phone"),e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Role"),e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Status"),e("th",{scope:"col",class:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"},"Actions")])],-1)),e("tbody",Fe,[O.value?(n(),r("tr",Te,[...t[17]||(t[17]=[e("td",{colspan:"6",class:"px-6 py-4"},[e("div",{class:"h-4 bg-gray-200 rounded w-3/4"})],-1)])])):G.value.length===0?(n(),r("tr",$e,[...t[18]||(t[18]=[e("td",{colspan:"6",class:"px-6 py-4 text-center text-sm text-gray-500"}," No users found. Create your first user by clicking the 'Create User' button or upload users in bulk via CSV. ",-1)])])):u("",!0),(n(!0),r(E,null,q(G.value,l=>(n(),r("tr",{key:l.id,class:"hover:bg-gray-50"},[e("td",Le,[e("div",Ee,i(l.full_name),1)]),e("td",qe,[e("div",Re,i(l.email),1)]),e("td",ze,[e("div",Oe,i(l.phone),1)]),e("td",Ie,[e("span",He,i(de(l.role)),1)]),e("td",Je,[e("div",We,[e("input",{type:"checkbox",id:`toggle-${l.id}`,checked:(l.status||"").toLowerCase()==="active",onChange:x=>he(l),class:"toggle-checkbox absolute block w-6 h-6 rounded-full bg-white border-4 appearance-none cursor-pointer"},null,40,Ge),e("label",{for:`toggle-${l.id}`,class:"toggle-label block overflow-hidden h-6 rounded-full bg-gray-300 cursor-pointer"},null,8,Ke)]),e("span",Qe,i((l.status||"").toLowerCase()==="active"?"Active":"Inactive"),1)]),e("td",Xe,[e("button",{onClick:x=>ye(l),class:"text-indigo-600 hover:text-indigo-900 mr-3"}," Edit ",8,Ye),e("div",{class:f({"opacity-50 pointer-events-none select-none":K(l)})},[te(Ae,{user:l,disabled:K(l)},null,8,["user","disabled"])],2)])]))),128))])])])]),H.value?(n(),r("div",Ze,[e("div",et,[e("div",{class:"px-6 py-4 border-b border-gray-200 flex justify-between items-center"},[t[21]||(t[21]=e("h3",{class:"text-lg font-medium text-gray-900"},"Bulk Upload Users via CSV",-1)),e("button",{onClick:ie,class:"text-gray-400 hover:text-gray-500"},[...t[20]||(t[20]=[e("svg",{class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),e("div",tt,[m.value?(n(),r("div",{key:0,class:f(["mb-6 rounded-lg p-4",m.value.success?"bg-green-50 border border-green-200":"bg-red-50 border border-red-200"])},[e("div",st,[e("div",lt,[m.value.success?(n(),r("svg",at,[...t[22]||(t[22]=[e("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z","clip-rule":"evenodd"},null,-1)])])):(n(),r("svg",ot,[...t[23]||(t[23]=[e("path",{"fill-rule":"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z","clip-rule":"evenodd"},null,-1)])]))]),e("div",rt,[e("h3",{class:f(["text-sm font-medium",m.value.success?"text-green-800":"text-red-800"])},i(m.value.success?"Bulk Upload Completed!":"Bulk Upload Failed!"),3),e("div",{class:f(["mt-2 text-sm",m.value.success?"text-green-700":"text-red-700"])},[m.value.success?(n(),r("p",nt,[c(" Successfully processed "+i(((d=m.value.data)==null?void 0:d.total_rows)||0)+" rows. "+i(((p=m.value.data)==null?void 0:p.success_count)||0)+" users created successfully. ",1),((C=m.value.data)==null?void 0:C.failed_count)>0?(n(),r("span",it,i(m.value.data.failed_count)+" failed. ",1)):u("",!0)])):(n(),r("p",dt,i(m.value.message),1)),(k=m.value.data)!=null&&k.errors&&m.value.data.errors.length>0?(n(),r("ul",ut,[(n(!0),r(E,null,q(m.value.data.errors,(l,x)=>(n(),r("li",{key:x,class:"text-xs"},i(l),1))),128))])):u("",!0)],2)])])],2)):u("",!0),y.value.length?u("",!0):(n(),r("div",pt,[e("div",ct,[e("div",mt,[t[32]||(t[32]=e("svg",{class:"h-5 w-5 text-blue-500 mt-0.5 mr-3",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z","clip-rule":"evenodd"})],-1)),e("div",null,[t[31]||(t[31]=e("h4",{class:"text-sm font-medium text-blue-800"},"CSV Upload Instructions",-1)),e("div",vt,[t[30]||(t[30]=e("p",null,"Please ensure your CSV file contains the following columns in exact order:",-1)),e("ul",gt,[t[25]||(t[25]=e("li",null,[e("strong",null,"Full Name"),c(" - User's complete name")],-1)),t[26]||(t[26]=e("li",null,[e("strong",null,"Email"),c(" - Valid email address")],-1)),t[27]||(t[27]=e("li",null,[e("strong",null,"Phone"),c(" - Phone number")],-1)),t[28]||(t[28]=e("li",null,[e("strong",null,"Password"),c(" - User password")],-1)),e("li",null,[t[24]||(t[24]=e("strong",null,"Role",-1)),c(" - User role ("+i(J.value.join(", "))+")",1)]),t[29]||(t[29]=e("li",null,[e("strong",null,"Status"),c(" - active or inactive")],-1))])])])])]),e("div",{class:"flex items-center justify-between p-4 bg-gray-50 rounded-lg"},[t[34]||(t[34]=e("div",null,[e("h4",{class:"text-sm font-medium text-gray-800"},"Need a template?"),e("p",{class:"text-sm text-gray-600"},"Download a sample CSV file with the correct format.")],-1)),e("button",{onClick:ce,class:"flex items-center px-3 py-2 bg-gray-600 text-white text-sm rounded-lg hover:bg-gray-700 transition-colors"},[...t[33]||(t[33]=[e("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1),c(" Download Sample ",-1)])])]),e("div",xt,[e("div",{onClick:t[0]||(t[0]=l=>s.$refs.fileInput.click()),onDragover:t[1]||(t[1]=R(l=>F.value=!0,["prevent"])),onDragleave:t[2]||(t[2]=R(l=>F.value=!1,["prevent"])),onDrop:R(ve,["prevent"]),class:f(["relative border-2 border-dashed border-gray-300 rounded-lg p-8 text-center hover:border-gray-400 cursor-pointer transition-colors",{"border-green-400 bg-green-50":F.value}])},[e("input",{ref:"fileInput",type:"file",accept:".csv",onChange:me,class:"hidden"},null,544),t[35]||(t[35]=_e('<svg class="mx-auto h-12 w-12 text-gray-400" stroke="currentColor" fill="none" viewBox="0 0 48 48" data-v-db114179><path d="M28 8H12a4 4 0 00-4 4v20m32-12v8m0 0v8a4 4 0 01-4 4H12a4 4 0 01-4-4v-4m32-4l-3.172-3.172a4 4 0 00-5.656 0L28 28M8 32l9.172-9.172a4 4 0 015.656 0L28 28m0 0l4 4m4-24h8m-4-4v8m-12 4h.02" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-db114179></path></svg><div class="mt-4" data-v-db114179><p class="text-lg text-gray-600" data-v-db114179>Drop your CSV file here or click to browse</p><p class="text-sm text-gray-500 mt-1" data-v-db114179>Only .csv files are accepted</p></div>',2))],34),b.value?(n(),r("div",ft,i(b.value),1)):u("",!0)])])),y.value.length>0?(n(),r("div",bt,[e("div",ht,[e("div",null,[t[36]||(t[36]=e("h4",{class:"text-lg font-medium text-gray-900"},"CSV Data Preview",-1)),e("p",yt,i(y.value.length)+" rows found. Review the data before uploading.",1)]),e("button",{onClick:$,class:"text-sm text-gray-500 hover:text-gray-700"}," Upload Different File ")]),e("div",wt,[e("table",kt,[t[37]||(t[37]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Full Name"),e("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Email"),e("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Phone"),e("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Password"),e("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Role"),e("th",{class:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Status")])],-1)),e("tbody",_t,[(n(!0),r(E,null,q(y.value.slice(0,10),(l,x)=>(n(),r("tr",{key:x,class:"hover:bg-gray-50"},[e("td",Ct,i(l.full_name),1),e("td",Ut,i(l.email),1),e("td",Nt,i(l.phone),1),e("td",Dt,i(l.password?"****":"Missing"),1),e("td",St,[e("span",{class:f(["px-2 py-1 text-xs rounded-full",ue(l.role)?"bg-green-100 text-green-800":"bg-red-100 text-red-800"])},i(l.role),3)]),e("td",Pt,[e("span",{class:f(["px-2 py-1 text-xs rounded-full",pe(l.status)?"bg-green-100 text-green-800":"bg-red-100 text-red-800"])},i(l.status),3)])]))),128))])])]),y.value.length>10?(n(),r("p",At," Showing first 10 rows. "+i(y.value.length-10)+" more rows will be processed. ",1)):u("",!0),e("div",jt,[e("button",{onClick:$,class:"px-4 py-2 bg-gray-200 text-gray-800 rounded-lg hover:bg-gray-300 transition-colors"}," Cancel "),e("button",{onClick:xe,disabled:B.value||!y.value.length,class:"flex items-center px-6 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed"},[B.value?(n(),r("svg",Vt,[...t[38]||(t[38]=[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)])])):u("",!0),c(" "+i(B.value?"Uploading...":`Upload ${y.value.length} Users`),1)],8,Mt)])])):u("",!0)])])])):u("",!0),V.value?(n(),r("div",Bt,[e("div",Ft,[e("div",Tt,[e("h3",$t,i(g.value?"Edit User":"Create New User"),1),e("button",{onClick:X,class:"text-gray-400 hover:text-gray-500"},[...t[39]||(t[39]=[e("svg",{class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),e("div",Lt,[M.value?(n(),r("div",Et,[e("div",qt,[t[40]||(t[40]=e("div",{class:"flex-shrink-0"},[e("svg",{class:"h-5 w-5 text-green-500",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[e("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z","clip-rule":"evenodd"})])],-1)),e("div",Rt,[e("h3",zt,"User "+i(g.value?"Updated":"Created")+" Successfully!",1),e("div",Ot,[e("p",null," User account has been "+i(g.value?"updated":"created")+" successfully. ",1)])])])])):u("",!0),M.value?u("",!0):(n(),r("form",{key:1,onSubmit:R(be,["prevent"]),class:"space-y-6"},[e("div",null,[t[41]||(t[41]=e("label",{for:"fullName",class:"block text-sm font-medium text-gray-700 mb-2"},[c(" Full Name "),e("span",{class:"text-red-500"},"*")],-1)),_(e("input",{id:"fullName","onUpdate:modelValue":t[3]||(t[3]=l=>a.value.fullName=l),type:"text",placeholder:"Enter full name",required:"",autocomplete:"name",class:f(["block w-full border border-gray-300 rounded-lg shadow-sm focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm p-2.5",{"border-red-500":o.value.fullName}])},null,2),[[N,a.value.fullName]]),o.value.fullName?(n(),r("div",It,i(o.value.fullName),1)):u("",!0)]),e("div",null,[t[42]||(t[42]=e("label",{for:"email",class:"block text-sm font-medium text-gray-700 mb-2"},[c(" Email Address "),e("span",{class:"text-red-500"},"*")],-1)),_(e("input",{id:"email","onUpdate:modelValue":t[4]||(t[4]=l=>a.value.email=l),type:"email",placeholder:"Enter email",required:"",autocomplete:"email",class:f(["block w-full border border-gray-300 rounded-lg shadow-sm focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm p-2.5",{"border-red-500":o.value.email}])},null,2),[[N,a.value.email]]),o.value.email?(n(),r("div",Ht,i(o.value.email),1)):u("",!0)]),g.value?u("",!0):(n(),r("div",Jt,[t[43]||(t[43]=e("label",{for:"password",class:"block text-sm font-medium text-gray-700 mb-2"},[c(" Password "),e("span",{class:"text-red-500"},"*")],-1)),_(e("input",{id:"password","onUpdate:modelValue":t[5]||(t[5]=l=>a.value.password=l),type:"password",placeholder:"Create a strong password",required:"",autocomplete:"new-password",class:f(["block w-full border border-gray-300 rounded-lg shadow-sm focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm p-2.5",{"border-red-500":o.value.password}])},null,2),[[N,a.value.password]]),o.value.password?(n(),r("div",Wt,i(o.value.password),1)):u("",!0),te(Ce,{password:a.value.password,class:"mt-2"},null,8,["password"])])),e("div",null,[t[44]||(t[44]=e("label",{for:"phone",class:"block text-sm font-medium text-gray-700 mb-2"},[c(" Phone Number "),e("span",{class:"text-red-500"},"*")],-1)),_(e("input",{id:"phone","onUpdate:modelValue":t[6]||(t[6]=l=>a.value.phone=l),type:"tel",placeholder:"Enter phone number",required:"",autocomplete:"tel",class:f(["block w-full border border-gray-300 rounded-lg shadow-sm focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm p-2.5",{"border-red-500":o.value.phone}])},null,2),[[N,a.value.phone]]),o.value.phone?(n(),r("div",Gt,i(o.value.phone),1)):u("",!0)]),e("div",null,[t[45]||(t[45]=e("label",{for:"role",class:"block text-sm font-medium text-gray-700 mb-2"},[c(" User Role "),e("span",{class:"text-red-500"},"*")],-1)),_(e("select",{id:"role","onUpdate:modelValue":t[7]||(t[7]=l=>a.value.role=l),class:"block w-full border border-gray-300 rounded-lg shadow-sm focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm p-2.5",required:"",disabled:P.value},[e("option",Qt,i(P.value?"Loading roles...":"Select a role"),1),(n(!0),r(E,null,q(T.value,l=>(n(),r("option",{key:l.id,value:l.role_name},i(l.role_name),9,Xt))),128))],8,Kt),[[Ue,a.value.role]]),T.value.length===0&&!P.value?(n(),r("div",Yt," No roles available. Please check role configuration. ")):u("",!0),o.value.role?(n(),r("div",Zt,i(o.value.role),1)):u("",!0)]),a.value.role==="templeadmin"?(n(),r("div",es,[t[51]||(t[51]=e("h4",{class:"font-medium text-gray-900"},"Temple Details",-1)),e("div",null,[t[46]||(t[46]=e("label",{for:"templeName",class:"block text-sm font-medium text-gray-700 mb-2"},[c(" Temple Name "),e("span",{class:"text-red-500"},"*")],-1)),_(e("input",{id:"templeName","onUpdate:modelValue":t[8]||(t[8]=l=>a.value.templeDetails.name=l),type:"text",placeholder:"Enter temple name",required:"",class:f(["block w-full border border-gray-300 rounded-lg shadow-sm focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm p-2.5",{"border-red-500":o.value.templeName}])},null,2),[[N,a.value.templeDetails.name]]),o.value.templeName?(n(),r("div",ts,i(o.value.templeName),1)):u("",!0)]),e("div",null,[t[47]||(t[47]=e("label",{for:"templePlace",class:"block text-sm font-medium text-gray-700 mb-2"},[c(" Temple Location "),e("span",{class:"text-red-500"},"*")],-1)),_(e("input",{id:"templePlace","onUpdate:modelValue":t[9]||(t[9]=l=>a.value.templeDetails.place=l),type:"text",placeholder:"Enter city, state",required:"",class:f(["block w-full border border-gray-300 rounded-lg shadow-sm focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm p-2.5",{"border-red-500":o.value.templePlace}])},null,2),[[N,a.value.templeDetails.place]]),o.value.templePlace?(n(),r("div",ss,i(o.value.templePlace),1)):u("",!0)]),e("div",null,[t[48]||(t[48]=e("label",{for:"templeAddress",class:"block text-sm font-medium text-gray-700 mb-2"},[c(" Temple Address "),e("span",{class:"text-red-500"},"*")],-1)),_(e("input",{id:"templeAddress","onUpdate:modelValue":t[10]||(t[10]=l=>a.value.templeDetails.address=l),type:"text",placeholder:"Enter complete address",required:"",class:f(["block w-full border border-gray-300 rounded-lg shadow-sm focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm p-2.5",{"border-red-500":o.value.templeAddress}])},null,2),[[N,a.value.templeDetails.address]]),o.value.templeAddress?(n(),r("div",ls,i(o.value.templeAddress),1)):u("",!0)]),e("div",null,[t[49]||(t[49]=e("label",{for:"templePhoneNumber",class:"block text-sm font-medium text-gray-700 mb-2"},[c(" Temple Phone "),e("span",{class:"text-red-500"},"*")],-1)),_(e("input",{id:"templePhoneNumber","onUpdate:modelValue":t[11]||(t[11]=l=>a.value.templeDetails.phoneNumber=l),type:"tel",placeholder:"Enter temple contact number",required:"",class:f(["block w-full border border-gray-300 rounded-lg shadow-sm focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm p-2.5",{"border-red-500":o.value.templePhoneNumber}])},null,2),[[N,a.value.templeDetails.phoneNumber]]),o.value.templePhoneNumber?(n(),r("div",as,i(o.value.templePhoneNumber),1)):u("",!0)]),e("div",null,[t[50]||(t[50]=e("label",{for:"templeDescription",class:"block text-sm font-medium text-gray-700 mb-2"},[c(" Temple Description "),e("span",{class:"text-red-500"},"*")],-1)),_(e("textarea",{id:"templeDescription","onUpdate:modelValue":t[12]||(t[12]=l=>a.value.templeDetails.description=l),rows:"3",class:"block w-full border border-gray-300 rounded-lg shadow-sm focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm transition-colors duration-200 p-3 leading-relaxed",placeholder:"Brief description about the temple",required:""},null,512),[[N,a.value.templeDetails.description]]),o.value.templeDescription?(n(),r("div",os,i(o.value.templeDescription),1)):u("",!0)])])):u("",!0),g.value?(n(),r("div",rs,[t[53]||(t[53]=e("label",{for:"status",class:"text-sm font-medium text-gray-700"},"User Status:",-1)),e("div",ns,[_(e("input",{type:"checkbox",id:"status","onUpdate:modelValue":t[13]||(t[13]=l=>a.value.isActive=l),class:"toggle-checkbox absolute block w-6 h-6 rounded-full bg-white border-4 appearance-none cursor-pointer"},null,512),[[Ne,a.value.isActive]]),t[52]||(t[52]=e("label",{for:"status",class:"toggle-label block overflow-hidden h-6 rounded-full bg-gray-300 cursor-pointer"},null,-1))]),e("span",is,i(a.value.isActive?"Active":"Inactive"),1)])):u("",!0),e("div",ds,[e("button",{type:"button",class:"px-4 py-2 bg-gray-200 text-gray-800 rounded-lg hover:bg-gray-300 transition-colors",onClick:X}," Cancel "),e("button",{type:"submit",class:"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors flex items-center",disabled:z.value},[z.value?(n(),r("svg",ps,[...t[54]||(t[54]=[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)])])):u("",!0),c(" "+i(g.value?"Update User":"Create User"),1)],8,us)])],32))])])])):u("",!0)])}}},xs=se(cs,[["__scopeId","data-v-db114179"]]);export{xs as default};
