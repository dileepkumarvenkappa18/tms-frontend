import{_ as Te,h as p,i as t,j as A,t as d,w as K,k as we,F as Q,l as X,C as h,v as _e,n as H,r as f,c as k,I as Z,s as Ae,N as ee,e as ke,o as m}from"./index-CvQC7wJ-.js";import{s as te}from"./superadmin.service-DzL33MF6.js";const je={name:"TenantApprovals",emits:["updated"],setup(se,{emit:n}){const L=f(!0),s=f([]),g=f([]),u=ke(),j=f(!1),D="http://localhost:8080/api/v1",l=f(!0),C=f(!1),v=f(""),N=f(!1),E=f(null),F=f(""),J=f(!1),T=f(""),x=f(1),P=f(5),w=e=>{if(!e)return"pending";let o=e.status||e.Status||e.approval_status||e.approvalStatus||e.tenant_status||e.user_status||"";return o=String(o).toLowerCase().trim(),!o||o==="null"||o==="undefined"?"pending":{approved:"approved",active:"approved",accepted:"approved",confirm:"approved",confirmed:"approved",approved_active:"approved",rejected:"rejected",declined:"rejected",denied:"rejected",cancelled:"rejected",refused:"rejected",inactive:"rejected",pending:"pending",pending_approval:"pending",waiting:"pending",submitted:"pending",under_review:"pending",new:"pending"}[o]||"pending"},I=e=>w(e)==="pending",R=e=>w(e)==="approved",M=e=>w(e)==="rejected",O=k(()=>{const e=Array.isArray(g.value)?g.value:[];if(e.length===0)return 0;const o=e.filter(r=>{const a=I(r);return l.value&&console.log(`Tenant ${r.id||"unknown"}: status="${w(r)}", isPending=${a}`),a}).length;return l.value&&console.log(`ðŸŸ¡ PENDING COUNT: ${o} out of ${e.length} total tenants`),o}),B=k(()=>{const e=Array.isArray(g.value)?g.value:[];if(e.length===0)return 0;const o=e.filter(r=>{const a=R(r);return l.value&&console.log(`Tenant ${r.id||"unknown"}: status="${w(r)}", isApproved=${a}`),a}).length;return l.value&&console.log(`ðŸŸ¢ APPROVED COUNT: ${o} out of ${e.length} total tenants`),o}),z=k(()=>{const e=Array.isArray(g.value)?g.value:[];if(e.length===0)return 0;const o=e.filter(r=>{const a=M(r);return l.value&&console.log(`Tenant ${r.id||"unknown"}: status="${w(r)}", isRejected=${a}`),a}).length;return l.value&&console.log(`ðŸ”´ REJECTED COUNT: ${o} out of ${e.length} total tenants`),o}),b=k(()=>{const e=Array.isArray(g.value)?g.value:[];if(!T.value||T.value===""||T.value==="all")return l.value&&console.log(`ðŸ“‹ SHOWING ALL TENANTS: ${e.length}`),e;let o=[];switch(T.value.toLowerCase()){case"pending":o=e.filter(r=>I(r));break;case"approved":o=e.filter(r=>R(r));break;case"rejected":o=e.filter(r=>M(r));break;default:o=e}return l.value&&console.log(`ðŸ“‹ FILTERED TENANTS (${T.value}): ${o.length} out of ${e.length}`),o}),oe=(e,o,r="Not provided")=>{if(!e)return r;if(e.temple_details&&e.temple_details[o])return e.temple_details[o];if(e[o])return e[o];const a=[o,o.toLowerCase(),o.toUpperCase(),o.replace(/_([a-z])/g,(i,c)=>c.toUpperCase()),o.charAt(0).toUpperCase()+o.slice(1)];for(const i of a)if(e[i])return e[i];return r},ne=e=>{if(!e)return"No additional details provided.";if(e.temple_details&&e.temple_details.temple_description)return e.temple_details.temple_description;const o=["temple_description","templeDescription","TempleDescription","description","Description"];for(const r of o)if(e[r])return e[r];return"No additional details provided."},G=e=>{e&&(console.log("=== TENANT DEBUG ==="),console.log("Full tenant object:",e),console.log("Temple details object:",e.temple_details),e.temple_details&&(console.log("Temple name:",e.temple_details.temple_name),console.log("Temple place:",e.temple_details.temple_place),console.log("Temple address:",e.temple_details.temple_address),console.log("Temple phone:",e.temple_details.temple_phone_no),console.log("Temple description:",e.temple_details.temple_description)),console.log("Available keys on tenant:",Object.keys(e)),e.temple_details&&console.log("Available keys on temple_details:",Object.keys(e.temple_details)),console.log("=================="))},re=k(()=>{const e=Array.isArray(b.value)?b.value:[],o=(x.value-1)*P.value,r=o+P.value;return e.slice(o,r)}),_=k(()=>{const e=Array.isArray(b.value)?b.value:[];return Math.ceil(e.length/P.value)||1}),ae=k(()=>(Array.isArray(b.value)?b.value:[]).length===0?0:(x.value-1)*P.value+1),le=k(()=>{const e=Array.isArray(b.value)?b.value:[];return Math.min(x.value*P.value,e.length)}),ie=k(()=>{const o=[];if(_.value<=5)for(let r=1;r<=_.value;r++)o.push(r);else{o.push(1);let r=Math.max(2,x.value-1),a=Math.min(_.value-1,x.value+1);x.value<=2&&(a=3),x.value>=_.value-1&&(r=_.value-2),r>2&&o.push("...");for(let i=r;i<=a;i++)o.push(i);a<_.value-1&&o.push("..."),_.value>1&&o.push(_.value)}return o}),U=e=>e?e.full_name?e.full_name:e.FullName?e.FullName:e.fullName?e.fullName:e.name?e.name:e.Name?e.Name:e.email?e.email.split("@")[0]:e.Email?e.Email.split("@")[0]:e.id||e.ID?`User ${e.id||e.ID}`:"Unknown Tenant":"Unknown Tenant",$=e=>e?e.email?e.email:e.Email?e.Email:e.email_address?e.email_address:e.EmailAddress?e.EmailAddress:"No email provided":"No email provided",de=e=>{if(!e)return"T";const o=U(e);if(o&&o!=="Unknown Tenant"&&o.length>0)return o.charAt(0).toUpperCase();const r=$(e);return r&&r!=="No email provided"&&r.length>0?r.charAt(0).toUpperCase():"T"},ce=e=>{const o=w({status:e});return{pending:"bg-yellow-100 text-yellow-800 border border-yellow-200",approved:"bg-green-100 text-green-800 border border-green-200",rejected:"bg-red-100 text-red-800 border border-red-200"}[o]||"bg-gray-100 text-gray-800 border border-gray-200"},ue=e=>{if(!e)return"N/A";try{return new Date(e).toLocaleDateString("en-IN",{year:"numeric",month:"short",day:"numeric"})}catch{return"N/A"}},ge=e=>{e!=="..."&&(x.value=e)},pe=(e=null)=>{e!==null&&(T.value=e),x.value=1,console.log(`Applied filter: ${T.value}`),console.log(`Filtered tenants count: ${b.value.length}`)},me=e=>{E.value=e,console.log("Opening details for tenant:",e),l.value&&G(e),J.value=!0},fe=()=>{Y(E.value),J.value=!1},W=()=>{console.log("=== ALL TENANT STATUSES ===");const e=Array.isArray(g.value)?g.value:[];e.forEach((o,r)=>{const a=o.status||o.Status||"undefined",i=w(o),c=I(o),y=R(o),V=M(o);console.log(`Tenant ${r+1} (ID: ${o.id||o.ID||"unknown"}):`,{name:U(o),rawStatus:a,normalizedStatus:i,isPending:c,isApproved:y,isRejected:V})}),console.log(`
SUMMARY:
        Total: ${e.length}
        Pending: ${O.value}
        Approved: ${B.value}
        Rejected: ${z.value}
        Sum: ${O.value+B.value+z.value}`),console.log("==========================")},S=async()=>{L.value=!0;try{console.log("ðŸ”„ Loading ALL tenant data from multiple endpoints...");let e=[];const o=["/api/v1/superadmin/tenants","/api/v1/superadmin/tenants?status=pending","/api/v1/superadmin/tenants?status=approved","/api/v1/superadmin/tenants?status=active","/api/v1/superadmin/tenants?status=rejected"];for(const r of o)try{console.log(`ðŸ”— Trying endpoint: ${r}`);const a=await fetch(D+r,{headers:{Authorization:`Bearer ${localStorage.getItem("auth_token")}`}});if(a.ok){const i=await a.json();let c=[];i&&i.data&&Array.isArray(i.data)?c=i.data:Array.isArray(i)?c=i:i&&Array.isArray(i.tenants)&&(c=i.tenants),c.length>0&&(console.log(`âœ… Got ${c.length} tenants from ${r}`),c.forEach(y=>{const V=y.id||y.ID;V&&!e.find(q=>(q.id||q.ID)===V)&&e.push(y)}))}else console.log(`âŒ Endpoint ${r} returned ${a.status}`)}catch(a){console.error(`âŒ Error with endpoint ${r}:`,a)}if(e.length===0){console.log("ðŸ”§ Trying service methods as fallback...");try{const r=await te.getAllTenants();if(r&&r.success&&r.data)Array.isArray(r.data)&&(e=r.data,console.log(`âœ… Loaded ${e.length} tenants from service`));else{const a=await te.getPendingTenants();a&&a.success&&a.data&&Array.isArray(a.data)&&(e=a.data,console.log(`âš ï¸ Loaded ${e.length} pending tenants only`))}}catch(r){console.error("âŒ Error with service methods:",r)}}g.value=[...e],s.value=[...e],await ee(),console.log(`ðŸ“Š FINAL RESULT: ${e.length} total tenants loaded`),console.log(`ðŸ“Š STATUS BREAKDOWN:
          - Pending: ${e.filter(r=>I(r)).length}
          - Approved: ${e.filter(r=>R(r)).length}
          - Rejected: ${e.filter(r=>M(r)).length}`),e.length>0?u.success(`Loaded ${e.length} total tenants`):u.warning("No tenant data found")}catch(e){console.error("âŒ Error in loadAllTenants:",e),g.value=[],s.value=[],u.error("Error loading tenant data")}finally{L.value=!1}},ve=async()=>{await S()},xe=async()=>{v.value="Loading API debug information...",C.value=!0;try{const e=[];e.push(`==== TENANT DATA DEBUG ====
`);const o=["/superadmin/tenants","/superadmin/tenants?status=pending","/superadmin/tenants?status=approved","/superadmin/tenants?status=active","/superadmin/tenants?status=rejected"];for(const r of o){e.push(`
Testing endpoint: ${r}`);try{const a=await fetch(D+r,{headers:{Authorization:`Bearer ${localStorage.getItem("auth_token")}`}});if(e.push(`Response status: ${a.status} ${a.statusText}`),a.ok){const i=await a.json();let c=0;i&&i.data&&Array.isArray(i.data)?(c=i.data.length,e.push(`Data structure: { data: [${c} items] }`),c>0&&(e.push(`Sample item keys: ${Object.keys(i.data[0]).join(", ")}`),e.push(`Sample status values: ${i.data.slice(0,3).map(y=>y.status||y.Status||"undefined").join(", ")}`))):Array.isArray(i)?(c=i.length,e.push(`Data structure: [${c} items]`),c>0&&(e.push(`Sample item keys: ${Object.keys(i[0]).join(", ")}`),e.push(`Sample status values: ${i.slice(0,3).map(y=>y.status||y.Status||"undefined").join(", ")}`))):e.push(`Unexpected data structure keys: ${Object.keys(i).join(", ")}`)}else{const i=await a.text();e.push(`Error: ${i}`)}}catch(a){e.push(`Error: ${a.message}`)}}e.push(`
==== COMPONENT STATE ====`),e.push(`Total tenants loaded: ${g.value.length}`),e.push(`Pending count: ${O.value}`),e.push(`Approved count: ${B.value}`),e.push(`Rejected count: ${z.value}`),e.push(`Current filter: ${T.value}`),e.push(`Filtered tenants: ${b.value.length}`),g.value.length>0&&(e.push(`
==== SAMPLE TENANT STATUS ANALYSIS ====`),g.value.slice(0,5).forEach((r,a)=>{const i=r.status||r.Status||"undefined",c=w(r);e.push(`Tenant ${a+1}: raw="${i}" -> normalized="${c}"`)})),v.value=e.join(`
`)}catch(e){v.value=`Error running debug: ${e.message}`}},be=async e=>{if(!e){u.error("No tenant selected for testing");return}v.value=`Testing API call for tenant ${e.id||e.ID||"unknown"}...`,C.value=!0;try{const o=[];o.push(`Testing API approval for tenant:
${JSON.stringify(e,null,2)}
`);const r=e.id||e.ID||e.user_id||e.userId;if(!r){o.push("ERROR: No tenant ID found in tenant object!"),v.value=o.join(`
`);return}o.push(`Using tenant ID: ${r}`),o.push(`
Testing direct PATCH call to approve tenant...`);try{const a=localStorage.getItem("auth_token");o.push(`Auth token available: ${!!a}`);const i=await fetch(D+`/superadmin/tenants/${r}/approval`,{method:"PATCH",headers:{"Content-Type":"application/json",Authorization:`Bearer ${a}`},body:JSON.stringify({status:"APPROVED"})});if(o.push(`API Response Status: ${i.status} ${i.statusText}`),i.ok){const c=await i.json();o.push(`API Response Data: ${JSON.stringify(c,null,2)}`),o.push(`
SUCCESS: Direct API call worked! The backend endpoint is functional.`),u.success("Test API call successful!"),await S()}else{const c=await i.text();o.push(`Error response: ${c}`)}}catch(a){o.push(`API Error: ${a.message}`)}v.value=o.join(`
`)}catch(o){v.value=`Error running API test: ${o.message}`}},Y=async e=>{if(!e){u.error("Cannot approve: Missing tenant");return}const o=e.id||e.ID;if(!o){u.error("Cannot approve: Missing tenant ID");return}j.value=!0,console.log(`ðŸ”„ Attempting to approve tenant ${o}`);try{const r=await fetch(D+`/superadmin/tenants/${o}/approval`,{method:"PATCH",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("auth_token")}`},body:JSON.stringify({status:"APPROVED"})});if(r.ok){const a=await r.json();console.log("âœ… Approval successful:",a),u.success(`Tenant ${U(e)} approved successfully`),await S(),n("updated")}else{console.error("âŒ Approval failed with status:",r.status);const a=await r.text();console.error("Error response:",a),u.error(`Failed to approve tenant: ${r.statusText}`)}}catch(r){console.error("âŒ Error in approval process:",r),u.error("Error approving tenant: "+(r.message||"Unknown error"))}finally{j.value=!1}},ye=e=>{if(!e){u.error("Cannot reject: Missing tenant");return}if(!(e.id||e.ID)){u.error("Cannot reject: Missing tenant ID");return}E.value=e,F.value="",N.value=!0},he=async()=>{const e=E.value;if(!e){u.error("Cannot reject: Missing tenant"),N.value=!1;return}const o=e.id||e.ID;if(!o){u.error("Cannot reject: Missing tenant ID"),N.value=!1;return}if(!F.value.trim()){u.warning("Please provide a rejection reason");return}j.value=!0;try{const r=await fetch(D+`/superadmin/tenants/${o}/approval`,{method:"PATCH",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("auth_token")}`},body:JSON.stringify({status:"REJECTED",reason:F.value})});if(r.ok){const a=await r.json();console.log("âœ… Rejection successful:",a),u.success(`Tenant ${U(e)} rejected successfully`),N.value=!1,await S(),n("updated")}else{console.error("âŒ Rejection failed with status:",r.status);const a=await r.text();console.error("Error response:",a),u.error(`Failed to reject tenant: ${r.statusText}`)}}catch(r){console.error("âŒ Error in rejection process:",r),u.error("Error rejecting tenant: "+(r.message||"Unknown error"))}finally{j.value=!1}};return Z(T,(e,o)=>{e!==o&&(console.log(`Status filter changed from ${o} to ${e}`),x.value=1)}),Z(g,e=>{console.log(`ðŸ”„ allTenants changed: ${e.length} tenants`),l.value&&e.length>0&&ee(()=>{W()})},{deep:!0}),Ae(()=>{console.log("ðŸš€ Component mounted, loading tenants..."),S()}),{loading:L,tenants:s,allTenants:g,pendingCount:O,approvedCount:B,rejectedCount:z,statusFilter:T,currentPage:x,itemsPerPage:P,filteredTenants:b,paginatedTenants:re,totalPages:_,paginationStart:ae,paginationEnd:le,displayedPageNumbers:ie,getStatusBadgeClass:ce,formatDate:ue,loadTenants:ve,loadAllTenants:S,handleApprove:Y,handleRejectClick:ye,getTenantName:U,getTenantEmail:$,getTenantInitial:de,goToPage:ge,isStatusPending:I,isStatusApproved:R,isStatusRejected:M,applyFilters:pe,isProcessing:j,showRejectModal:N,selectedTenant:E,rejectReason:F,confirmReject:he,showDetailsModal:J,handleViewDetails:me,handleApproveFromDetails:fe,getTempleDetail:oe,getTempleDescription:ne,debugTenantDetails:G,debugMode:l,debugTenantData:xe,logAllTenantStatuses:W,normalizeStatus:w,testApprovalApi:be,showApiDebugModal:C,apiDebugInfo:v}}},De={class:"space-y-6"},Ce={class:"flex flex-wrap gap-3"},Pe={class:"bg-yellow-50 border border-yellow-200 rounded-xl px-4 py-3 text-center min-w-[100px] flex-1"},Se={class:"text-2xl font-bold text-yellow-800"},Ne={class:"bg-green-50 border border-green-200 rounded-xl px-4 py-3 text-center min-w-[100px] flex-1"},Ee={class:"text-2xl font-bold text-green-800"},Ie={class:"bg-red-50 border border-red-200 rounded-xl px-4 py-3 text-center min-w-[100px] flex-1"},Re={class:"text-2xl font-bold text-red-800"},Me={class:"flex flex-col sm:flex-row justify-between gap-3"},Ue={class:"flex gap-3"},Le={key:0,class:"flex justify-center items-center py-12"},Fe={key:1,class:"space-y-4"},Oe={class:"p-6"},Be={class:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4 mb-4"},ze={class:"flex items-start gap-4"},Ve={class:"h-12 w-12 rounded-full bg-indigo-100 flex items-center justify-center flex-shrink-0"},Je={class:"text-indigo-600 font-semibold text-lg"},He={class:"flex-1 min-w-0"},Ge={class:"text-lg font-semibold text-gray-900 font-roboto"},$e={class:"text-sm text-gray-600"},We={class:"flex flex-col sm:flex-row items-start sm:items-center gap-3"},Ye={class:"text-xs text-gray-500"},qe={class:"flex flex-col sm:flex-row gap-3"},Ke=["onClick"],Qe={key:0,class:"flex flex-col sm:flex-row gap-3 flex-1"},Xe=["onClick","disabled"],Ze=["onClick","disabled"],et={class:"flex flex-col sm:flex-row items-center justify-between bg-white p-4 rounded-xl shadow-sm border border-gray-200"},tt={class:"text-sm text-gray-700 mb-3 sm:mb-0"},st={class:"font-medium"},ot={class:"font-medium"},nt={class:"font-medium"},rt={class:"flex space-x-2"},at=["disabled"],lt={class:"flex space-x-1"},it=["onClick"],dt=["disabled"],ct={key:2,class:"text-center py-12"},ut={class:"mt-2 text-sm text-gray-500"},gt={key:3,class:"fixed inset-0 z-50 overflow-y-auto bg-black bg-opacity-50 flex items-center justify-center"},pt={class:"bg-white rounded-xl p-6 w-full max-w-md mx-4"},mt={key:0,class:"bg-gray-100 p-2 mb-3 rounded text-xs"},ft={class:"mb-4"},vt={class:"font-medium"},xt={class:"flex justify-end gap-3"},bt=["disabled"],yt=["disabled"],ht={key:4,class:"fixed inset-0 z-50 overflow-y-auto bg-black bg-opacity-50 flex items-center justify-center"},Tt={class:"bg-white rounded-xl p-6 w-full max-w-2xl mx-4 max-h-[90vh] overflow-auto"},wt={class:"flex justify-between items-center border-b border-gray-200 pb-4 mb-5"},_t={key:0,class:"space-y-5"},At={class:"flex items-center gap-4 mb-4"},kt={class:"h-16 w-16 rounded-full bg-indigo-100 flex items-center justify-center flex-shrink-0"},jt={class:"text-indigo-600 font-semibold text-2xl"},Dt={class:"text-xl font-semibold text-gray-900"},Ct={class:"text-gray-600"},Pt={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},St={class:"space-y-4"},Nt={class:"border-b border-gray-100 pb-3"},Et={class:"text-base text-gray-900 mt-1"},It={class:"border-b border-gray-100 pb-3"},Rt={class:"text-base text-gray-900 mt-1"},Mt={class:"border-b border-gray-100 pb-3"},Ut={class:"text-base text-gray-900 mt-1"},Lt={class:"border-b border-gray-100 pb-3"},Ft={class:"text-base text-gray-900 mt-1"},Ot={class:"space-y-4"},Bt={class:"border-b border-gray-100 pb-3"},zt={class:"text-base text-gray-900 mt-1"},Vt={class:"border-b border-gray-100 pb-3"},Jt={class:"text-base text-gray-900 mt-1"},Ht={class:"border-b border-gray-100 pb-3"},Gt={class:"text-base text-gray-900 mt-1"},$t={class:"border-b border-gray-100 pb-3"},Wt={class:"text-base text-gray-900 mt-1"},Yt={class:"mt-5 border-t border-gray-100 pt-4"},qt={class:"text-base text-gray-900 bg-gray-50 p-4 rounded-lg"},Kt={class:"flex justify-end gap-3 mt-6 pt-4 border-t border-gray-200"},Qt={key:0},Xt=["disabled"],Zt={key:5,class:"fixed inset-0 z-50 overflow-y-auto bg-black bg-opacity-50 flex items-center justify-center"},es={class:"bg-white rounded-xl p-6 w-full max-w-3xl mx-4 max-h-[80vh] overflow-auto"},ts={class:"bg-gray-100 p-4 rounded font-mono text-xs overflow-auto whitespace-pre"},ss={class:"mt-4 flex justify-end"};function os(se,n,L,s,g,u){var j,D;return m(),p("div",De,[n[43]||(n[43]=t("div",{class:"border-b border-gray-200 pb-4"},[t("h1",{class:"text-2xl font-bold text-gray-900 font-roboto"},"Tenant Approvals"),t("p",{class:"mt-1 text-sm text-gray-500"},"Review and manage tenant registration requests")],-1)),t("div",Ce,[t("div",Pe,[t("div",Se,d(s.pendingCount),1),n[12]||(n[12]=t("div",{class:"text-xs text-yellow-600 font-medium"},"Pending",-1))]),t("div",Ne,[t("div",Ee,d(s.approvedCount),1),n[13]||(n[13]=t("div",{class:"text-xs text-green-600 font-medium"},"Approved",-1))]),t("div",Ie,[t("div",Re,d(s.rejectedCount),1),n[14]||(n[14]=t("div",{class:"text-xs text-red-600 font-medium"},"Rejected",-1))])]),t("div",Me,[t("div",Ue,[K(t("select",{"onUpdate:modelValue":n[0]||(n[0]=l=>s.statusFilter=l),class:"px-3 py-2 bg-white border border-gray-300 rounded-lg text-sm w-full sm:w-auto",onChange:n[1]||(n[1]=(...l)=>s.applyFilters&&s.applyFilters(...l))},[...n[15]||(n[15]=[t("option",{value:""},"View All",-1),t("option",{value:"pending"},"Pending",-1),t("option",{value:"approved"},"Approved",-1),t("option",{value:"rejected"},"Rejected",-1)])],544),[[we,s.statusFilter]])]),t("button",{onClick:n[2]||(n[2]=(...l)=>s.loadTenants&&s.loadTenants(...l)),class:"px-4 py-2 bg-indigo-600 hover:bg-indigo-700 text-white rounded-lg text-sm"}," Refresh Data ")]),s.loading?(m(),p("div",Le,[...n[16]||(n[16]=[t("div",{class:"animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600"},null,-1)])])):A("",!0),!s.loading&&Array.isArray(s.filteredTenants)&&s.filteredTenants.length>0?(m(),p("div",Fe,[(m(!0),p(Q,null,X(s.paginatedTenants,(l,C)=>(m(),p("div",{key:l.id||l.ID||C,class:"bg-white rounded-xl shadow-md border border-gray-200 hover:shadow-lg transition-all duration-200"},[t("div",Oe,[t("div",Be,[t("div",ze,[t("div",Ve,[t("span",Je,d(s.getTenantInitial(l)),1)]),t("div",He,[t("h3",Ge,d(s.getTenantName(l)),1),t("p",$e,d(s.getTenantEmail(l)),1)])]),t("div",We,[t("span",{class:H([s.getStatusBadgeClass(l.status||l.Status),"inline-flex items-center px-3 py-1 rounded-full text-xs font-medium"])},d(l.status||l.Status||"pending"),3),t("span",Ye," Applied: "+d(s.formatDate(l.created_at||l.CreatedAt)),1)])]),t("div",qe,[t("button",{onClick:v=>s.handleViewDetails(l),class:"flex-1 sm:flex-none px-6 py-2 bg-indigo-100 hover:bg-indigo-200 text-indigo-700 text-sm font-medium rounded-xl transition-all duration-200 flex items-center justify-center gap-2"},[...n[17]||(n[17]=[t("svg",{class:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})],-1),h(" View Details ",-1)])],8,Ke),s.isStatusPending(l)?(m(),p("div",Qe,[t("button",{onClick:v=>s.handleApprove(l),class:"flex-1 sm:flex-none px-6 py-2 bg-green-600 hover:bg-green-700 text-white text-sm font-medium rounded-xl transition-all duration-200 flex items-center justify-center gap-2",disabled:s.isProcessing},[n[18]||(n[18]=t("svg",{class:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})],-1)),h(" "+d(s.isProcessing?"Processing...":"Approve"),1)],8,Xe),t("button",{onClick:v=>s.handleRejectClick(l),class:"flex-1 sm:flex-none px-6 py-2 bg-red-600 hover:bg-red-700 text-white text-sm font-medium rounded-xl transition-all duration-200 flex items-center justify-center gap-2",disabled:s.isProcessing},[n[19]||(n[19]=t("svg",{class:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)),h(" "+d(s.isProcessing?"Processing...":"Reject"),1)],8,Ze)])):A("",!0)])])]))),128)),t("div",et,[t("div",tt,[n[20]||(n[20]=h(" Showing ",-1)),t("span",st,d(s.paginationStart),1),n[21]||(n[21]=h(" to ",-1)),t("span",ot,d(s.paginationEnd),1),n[22]||(n[22]=h(" of ",-1)),t("span",nt,d(Array.isArray(s.filteredTenants)?s.filteredTenants.length:0),1),n[23]||(n[23]=h(" results ",-1))]),t("div",rt,[t("button",{onClick:n[3]||(n[3]=l=>s.currentPage--),disabled:s.currentPage===1,class:"inline-flex items-center px-3 py-2 border border-gray-300 text-sm font-medium rounded-md bg-white text-gray-700 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed"}," Previous ",8,at),t("div",lt,[(m(!0),p(Q,null,X(s.displayedPageNumbers,l=>(m(),p("button",{key:l,onClick:C=>s.goToPage(l),class:H(["inline-flex items-center px-3 py-2 border text-sm font-medium rounded-md",s.currentPage===l?"border-indigo-500 bg-indigo-50 text-indigo-600":"border-gray-300 bg-white text-gray-700 hover:bg-gray-50"])},d(l),11,it))),128))]),t("button",{onClick:n[4]||(n[4]=l=>s.currentPage++),disabled:s.currentPage===s.totalPages,class:"inline-flex items-center px-3 py-2 border border-gray-300 text-sm font-medium rounded-md bg-white text-gray-700 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed"}," Next ",8,dt)])])])):s.loading?A("",!0):(m(),p("div",ct,[n[24]||(n[24]=t("svg",{class:"mx-auto h-12 w-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1)),n[25]||(n[25]=t("h3",{class:"mt-4 text-lg font-medium text-gray-900"},"No tenant applications found",-1)),t("p",ut,d(s.statusFilter?`No tenants with "${s.statusFilter}" status found`:"Try refreshing or checking back later"),1)])),s.showRejectModal?(m(),p("div",gt,[t("div",pt,[n[30]||(n[30]=t("h3",{class:"text-lg font-semibold mb-4"},"Reject Tenant",-1)),s.debugMode?(m(),p("div",mt,[t("div",null,[n[26]||(n[26]=t("span",{class:"font-bold"},"Selected Tenant ID:",-1)),h(" "+d(((j=s.selectedTenant)==null?void 0:j.id)||((D=s.selectedTenant)==null?void 0:D.ID)),1)]),t("div",null,[n[27]||(n[27]=t("span",{class:"font-bold"},"Selected Tenant Name:",-1)),h(" "+d(s.getTenantName(s.selectedTenant)),1)])])):A("",!0),t("p",ft,[n[28]||(n[28]=h("Please provide a reason for rejecting ",-1)),t("span",vt,d(s.selectedTenant?s.getTenantName(s.selectedTenant):""),1),n[29]||(n[29]=h(":",-1))]),K(t("textarea",{"onUpdate:modelValue":n[5]||(n[5]=l=>s.rejectReason=l),class:"w-full border border-gray-300 rounded-lg p-3 mb-4 min-h-[100px] focus:ring-2 focus:ring-indigo-500 focus:border-transparent",placeholder:"Enter rejection reason..."},null,512),[[_e,s.rejectReason]]),t("div",xt,[t("button",{onClick:n[6]||(n[6]=l=>s.showRejectModal=!1),class:"px-4 py-2 bg-gray-200 hover:bg-gray-300 text-gray-800 rounded-lg",disabled:s.isProcessing}," Cancel ",8,bt),t("button",{onClick:n[7]||(n[7]=(...l)=>s.confirmReject&&s.confirmReject(...l)),disabled:!s.rejectReason.trim()||s.isProcessing,class:"px-4 py-2 bg-red-600 hover:bg-red-700 text-white rounded-lg disabled:opacity-50"},d(s.isProcessing?"Processing...":"Reject"),9,yt)])])])):A("",!0),s.showDetailsModal?(m(),p("div",ht,[t("div",Tt,[t("div",wt,[n[32]||(n[32]=t("h3",{class:"text-xl font-bold text-gray-900"},"Tenant Details",-1)),t("button",{onClick:n[8]||(n[8]=l=>s.showDetailsModal=!1),class:"text-gray-400 hover:text-gray-600"},[...n[31]||(n[31]=[t("svg",{class:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),s.selectedTenant?(m(),p("div",_t,[t("div",null,[t("div",At,[t("div",kt,[t("span",jt,d(s.getTenantInitial(s.selectedTenant)),1)]),t("div",null,[t("h4",Dt,d(s.getTenantName(s.selectedTenant)),1),t("p",Ct,d(s.getTenantEmail(s.selectedTenant)),1)])]),t("div",Pt,[t("div",St,[t("div",Nt,[n[33]||(n[33]=t("div",{class:"text-sm font-medium text-gray-500"},"Status",-1)),t("div",Et,[t("span",{class:H([s.getStatusBadgeClass(s.selectedTenant.status||s.selectedTenant.Status),"inline-flex items-center px-3 py-1 rounded-full text-xs font-medium"])},d(s.selectedTenant.status||s.selectedTenant.Status||"pending"),3)])]),t("div",It,[n[34]||(n[34]=t("div",{class:"text-sm font-medium text-gray-500"},"Application Date",-1)),t("div",Rt,d(s.formatDate(s.selectedTenant.created_at||s.selectedTenant.CreatedAt)),1)]),t("div",Mt,[n[35]||(n[35]=t("div",{class:"text-sm font-medium text-gray-500"},"Phone Number",-1)),t("div",Ut,d(s.selectedTenant.phone||s.selectedTenant.Phone||"Not provided"),1)]),t("div",Lt,[n[36]||(n[36]=t("div",{class:"text-sm font-medium text-gray-500"},"User ID",-1)),t("div",Ft,d(s.selectedTenant.id||s.selectedTenant.ID||"Not available"),1)])]),t("div",Ot,[t("div",Bt,[n[37]||(n[37]=t("div",{class:"text-sm font-medium text-gray-500"},"Temple Name",-1)),t("div",zt,d(s.getTempleDetail(s.selectedTenant,"temple_name")),1)]),t("div",Vt,[n[38]||(n[38]=t("div",{class:"text-sm font-medium text-gray-500"},"Temple Location",-1)),t("div",Jt,d(s.getTempleDetail(s.selectedTenant,"temple_place")),1)]),t("div",Ht,[n[39]||(n[39]=t("div",{class:"text-sm font-medium text-gray-500"},"Temple Address",-1)),t("div",Gt,d(s.getTempleDetail(s.selectedTenant,"temple_address")),1)]),t("div",$t,[n[40]||(n[40]=t("div",{class:"text-sm font-medium text-gray-500"},"Temple Phone",-1)),t("div",Wt,d(s.getTempleDetail(s.selectedTenant,"temple_phone_no")),1)])])]),t("div",Yt,[n[41]||(n[41]=t("div",{class:"text-sm font-medium text-gray-500 mb-2"},"Temple Description",-1)),t("div",qt,d(s.getTempleDescription(s.selectedTenant)),1)])])])):A("",!0),t("div",Kt,[t("button",{onClick:n[9]||(n[9]=l=>s.showDetailsModal=!1),class:"px-4 py-2 bg-gray-200 hover:bg-gray-300 text-gray-800 rounded-lg"}," Close "),s.isStatusPending(s.selectedTenant)?(m(),p("div",Qt,[t("button",{onClick:n[10]||(n[10]=(...l)=>s.handleApproveFromDetails&&s.handleApproveFromDetails(...l)),class:"px-4 py-2 bg-green-600 hover:bg-green-700 text-white rounded-lg disabled:opacity-50",disabled:s.isProcessing},d(s.isProcessing?"Processing...":"Approve"),9,Xt)])):A("",!0)])])])):A("",!0),s.showApiDebugModal?(m(),p("div",Zt,[t("div",es,[n[42]||(n[42]=t("h3",{class:"text-lg font-semibold mb-4"},"API Debug Information",-1)),t("div",ts,d(s.apiDebugInfo),1),t("div",ss,[t("button",{onClick:n[11]||(n[11]=l=>s.showApiDebugModal=!1),class:"px-4 py-2 bg-gray-200 hover:bg-gray-300 text-gray-800 rounded-lg"}," Close ")])])])):A("",!0)])}const as=Te(je,[["render",os]]);export{as as default};
