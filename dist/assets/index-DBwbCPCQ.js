const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/SuperAdminDashboard-BcKPo8Uy.js","assets/superadmin.service-BupbF8UL.js","assets/TenantApprovals-Dowy3c6M.js","assets/UserManagement-BJNBd8St.js","assets/superadmin-CNKF4_6H.js","assets/UserManagement-CkJFeFzo.css","assets/RoleManagement-C0khLVzu.js","assets/RoleManagement-DuMOOaJd.css","assets/ResetPassword-XCus_ZFW.js","assets/ResetPasswordForm-o8rMbq5Z.js","assets/AssignTenantsView-DmMY8PWT.js","assets/AssignTenantsView-BGYqtsG5.css","assets/SuperadminReportsView-Bir8HcHv.js","assets/TempleActivitiesReport-9xlZLMYb.js","assets/TempleActivitiesReport-tn0RQdqM.css","assets/BirthdaysReport-Zo6vQe_X.js","assets/UserManagement-DCUnR_6x.js","assets/UserManagement-DW6r8lom.css"])))=>i.map(i=>d[i]);
(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const l of r)if(l.type==="childList")for(const a of l.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function s(r){const l={};return r.integrity&&(l.integrity=r.integrity),r.referrerPolicy&&(l.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?l.credentials="include":r.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function n(r){if(r.ep)return;r.ep=!0;const l=s(r);fetch(r.href,l)}})();/**
* @vue/shared v3.5.22
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function na(t){const o=Object.create(null);for(const s of t.split(","))o[s]=1;return s=>s in o}const nt={},as=[],io=()=>{},ju=()=>!1,Hn=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&(t.charCodeAt(2)>122||t.charCodeAt(2)<97),ra=t=>t.startsWith("onUpdate:"),ft=Object.assign,aa=(t,o)=>{const s=t.indexOf(o);s>-1&&t.splice(s,1)},mp=Object.prototype.hasOwnProperty,Xe=(t,o)=>mp.call(t,o),Pe=Array.isArray,ls=t=>Qs(t)==="[object Map]",xs=t=>Qs(t)==="[object Set]",Ki=t=>Qs(t)==="[object Date]",je=t=>typeof t=="function",ut=t=>typeof t=="string",Xt=t=>typeof t=="symbol",Qe=t=>t!==null&&typeof t=="object",Lu=t=>(Qe(t)||je(t))&&je(t.then)&&je(t.catch),Bu=Object.prototype.toString,Qs=t=>Bu.call(t),gp=t=>Qs(t).slice(8,-1),Uu=t=>Qs(t)==="[object Object]",la=t=>ut(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,Ms=na(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),qn=t=>{const o=Object.create(null);return(s=>o[s]||(o[s]=t(s)))},fp=/-\w/g,Wt=qn(t=>t.replace(fp,o=>o.slice(1).toUpperCase())),vp=/\B([A-Z])/g,Bo=qn(t=>t.replace(vp,"-$1").toLowerCase()),Gn=qn(t=>t.charAt(0).toUpperCase()+t.slice(1)),ur=qn(t=>t?`on${Gn(t)}`:""),Po=(t,o)=>!Object.is(t,o),wn=(t,...o)=>{for(let s=0;s<t.length;s++)t[s](...o)},Fu=(t,o,s,n=!1)=>{Object.defineProperty(t,o,{configurable:!0,enumerable:!1,writable:n,value:s})},En=t=>{const o=parseFloat(t);return isNaN(o)?t:o},hp=t=>{const o=ut(t)?Number(t):NaN;return isNaN(o)?t:o};let Xi;const Jn=()=>Xi||(Xi=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function Vt(t){if(Pe(t)){const o={};for(let s=0;s<t.length;s++){const n=t[s],r=ut(n)?wp(n):Vt(n);if(r)for(const l in r)o[l]=r[l]}return o}else if(ut(t)||Qe(t))return t}const yp=/;(?![^(]*\))/g,xp=/:([^]+)/,bp=/\/\*[^]*?\*\//g;function wp(t){const o={};return t.replace(bp,"").split(yp).forEach(s=>{if(s){const n=s.split(xp);n.length>1&&(o[n[0].trim()]=n[1].trim())}}),o}function se(t){let o="";if(ut(t))o=t;else if(Pe(t))for(let s=0;s<t.length;s++){const n=se(t[s]);n&&(o+=n+" ")}else if(Qe(t))for(const s in t)t[s]&&(o+=s+" ");return o.trim()}const kp="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",_p=na(kp);function Vu(t){return!!t||t===""}function $p(t,o){if(t.length!==o.length)return!1;let s=!0;for(let n=0;s&&n<t.length;n++)s=Zo(t[n],o[n]);return s}function Zo(t,o){if(t===o)return!0;let s=Ki(t),n=Ki(o);if(s||n)return s&&n?t.getTime()===o.getTime():!1;if(s=Xt(t),n=Xt(o),s||n)return t===o;if(s=Pe(t),n=Pe(o),s||n)return s&&n?$p(t,o):!1;if(s=Qe(t),n=Qe(o),s||n){if(!s||!n)return!1;const r=Object.keys(t).length,l=Object.keys(o).length;if(r!==l)return!1;for(const a in t){const d=t.hasOwnProperty(a),i=o.hasOwnProperty(a);if(d&&!i||!d&&i||!Zo(t[a],o[a]))return!1}}return String(t)===String(o)}function ia(t,o){return t.findIndex(s=>Zo(s,o))}const Ou=t=>!!(t&&t.__v_isRef===!0),h=t=>ut(t)?t:t==null?"":Pe(t)||Qe(t)&&(t.toString===Bu||!je(t.toString))?Ou(t)?h(t.value):JSON.stringify(t,zu,2):String(t),zu=(t,o)=>Ou(o)?zu(t,o.value):ls(o)?{[`Map(${o.size})`]:[...o.entries()].reduce((s,[n,r],l)=>(s[cr(n,l)+" =>"]=r,s),{})}:xs(o)?{[`Set(${o.size})`]:[...o.values()].map(s=>cr(s))}:Xt(o)?cr(o):Qe(o)&&!Pe(o)&&!Uu(o)?String(o):o,cr=(t,o="")=>{var s;return Xt(t)?`Symbol(${(s=t.description)!=null?s:o})`:t};/**
* @vue/reactivity v3.5.22
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let _t;class Hu{constructor(o=!1){this.detached=o,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=_t,!o&&_t&&(this.index=(_t.scopes||(_t.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let o,s;if(this.scopes)for(o=0,s=this.scopes.length;o<s;o++)this.scopes[o].pause();for(o=0,s=this.effects.length;o<s;o++)this.effects[o].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let o,s;if(this.scopes)for(o=0,s=this.scopes.length;o<s;o++)this.scopes[o].resume();for(o=0,s=this.effects.length;o<s;o++)this.effects[o].resume()}}run(o){if(this._active){const s=_t;try{return _t=this,o()}finally{_t=s}}}on(){++this._on===1&&(this.prevScope=_t,_t=this)}off(){this._on>0&&--this._on===0&&(_t=this.prevScope,this.prevScope=void 0)}stop(o){if(this._active){this._active=!1;let s,n;for(s=0,n=this.effects.length;s<n;s++)this.effects[s].stop();for(this.effects.length=0,s=0,n=this.cleanups.length;s<n;s++)this.cleanups[s]();if(this.cleanups.length=0,this.scopes){for(s=0,n=this.scopes.length;s<n;s++)this.scopes[s].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!o){const r=this.parent.scopes.pop();r&&r!==this&&(this.parent.scopes[this.index]=r,r.index=this.index)}this.parent=void 0}}}function qu(t){return new Hu(t)}function Gu(){return _t}function Sp(t,o=!1){_t&&_t.cleanups.push(t)}let rt;const pr=new WeakSet;class Ju{constructor(o){this.fn=o,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,_t&&_t.active&&_t.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,pr.has(this)&&(pr.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||Yu(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,Zi(this),Ku(this);const o=rt,s=Kt;rt=this,Kt=!0;try{return this.fn()}finally{Xu(this),rt=o,Kt=s,this.flags&=-3}}stop(){if(this.flags&1){for(let o=this.deps;o;o=o.nextDep)ca(o);this.deps=this.depsTail=void 0,Zi(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?pr.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){Mr(this)&&this.run()}get dirty(){return Mr(this)}}let Wu=0,Rs,Ps;function Yu(t,o=!1){if(t.flags|=8,o){t.next=Ps,Ps=t;return}t.next=Rs,Rs=t}function da(){Wu++}function ua(){if(--Wu>0)return;if(Ps){let o=Ps;for(Ps=void 0;o;){const s=o.next;o.next=void 0,o.flags&=-9,o=s}}let t;for(;Rs;){let o=Rs;for(Rs=void 0;o;){const s=o.next;if(o.next=void 0,o.flags&=-9,o.flags&1)try{o.trigger()}catch(n){t||(t=n)}o=s}}if(t)throw t}function Ku(t){for(let o=t.deps;o;o=o.nextDep)o.version=-1,o.prevActiveLink=o.dep.activeLink,o.dep.activeLink=o}function Xu(t){let o,s=t.depsTail,n=s;for(;n;){const r=n.prevDep;n.version===-1?(n===s&&(s=r),ca(n),Dp(n)):o=n,n.dep.activeLink=n.prevActiveLink,n.prevActiveLink=void 0,n=r}t.deps=o,t.depsTail=s}function Mr(t){for(let o=t.deps;o;o=o.nextDep)if(o.dep.version!==o.version||o.dep.computed&&(Zu(o.dep.computed)||o.dep.version!==o.version))return!0;return!!t._dirty}function Zu(t){if(t.flags&4&&!(t.flags&16)||(t.flags&=-17,t.globalVersion===zs)||(t.globalVersion=zs,!t.isSSR&&t.flags&128&&(!t.deps&&!t._dirty||!Mr(t))))return;t.flags|=2;const o=t.dep,s=rt,n=Kt;rt=t,Kt=!0;try{Ku(t);const r=t.fn(t._value);(o.version===0||Po(r,t._value))&&(t.flags|=128,t._value=r,o.version++)}catch(r){throw o.version++,r}finally{rt=s,Kt=n,Xu(t),t.flags&=-3}}function ca(t,o=!1){const{dep:s,prevSub:n,nextSub:r}=t;if(n&&(n.nextSub=r,t.prevSub=void 0),r&&(r.prevSub=n,t.nextSub=void 0),s.subs===t&&(s.subs=n,!n&&s.computed)){s.computed.flags&=-5;for(let l=s.computed.deps;l;l=l.nextDep)ca(l,!0)}!o&&!--s.sc&&s.map&&s.map.delete(s.key)}function Dp(t){const{prevDep:o,nextDep:s}=t;o&&(o.nextDep=s,t.prevDep=void 0),s&&(s.prevDep=o,t.nextDep=void 0)}let Kt=!0;const Qu=[];function ko(){Qu.push(Kt),Kt=!1}function _o(){const t=Qu.pop();Kt=t===void 0?!0:t}function Zi(t){const{cleanup:o}=t;if(t.cleanup=void 0,o){const s=rt;rt=void 0;try{o()}finally{rt=s}}}let zs=0;class Cp{constructor(o,s){this.sub=o,this.dep=s,this.version=s.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class pa{constructor(o){this.computed=o,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(o){if(!rt||!Kt||rt===this.computed)return;let s=this.activeLink;if(s===void 0||s.sub!==rt)s=this.activeLink=new Cp(rt,this),rt.deps?(s.prevDep=rt.depsTail,rt.depsTail.nextDep=s,rt.depsTail=s):rt.deps=rt.depsTail=s,ec(s);else if(s.version===-1&&(s.version=this.version,s.nextDep)){const n=s.nextDep;n.prevDep=s.prevDep,s.prevDep&&(s.prevDep.nextDep=n),s.prevDep=rt.depsTail,s.nextDep=void 0,rt.depsTail.nextDep=s,rt.depsTail=s,rt.deps===s&&(rt.deps=n)}return s}trigger(o){this.version++,zs++,this.notify(o)}notify(o){da();try{for(let s=this.subs;s;s=s.prevSub)s.sub.notify()&&s.sub.dep.notify()}finally{ua()}}}function ec(t){if(t.dep.sc++,t.sub.flags&4){const o=t.dep.computed;if(o&&!t.dep.subs){o.flags|=20;for(let n=o.deps;n;n=n.nextDep)ec(n)}const s=t.dep.subs;s!==t&&(t.prevSub=s,s&&(s.nextSub=t)),t.dep.subs=t}}const An=new WeakMap,Yo=Symbol(""),Rr=Symbol(""),Hs=Symbol("");function $t(t,o,s){if(Kt&&rt){let n=An.get(t);n||An.set(t,n=new Map);let r=n.get(s);r||(n.set(s,r=new pa),r.map=n,r.key=s),r.track()}}function yo(t,o,s,n,r,l){const a=An.get(t);if(!a){zs++;return}const d=i=>{i&&i.trigger()};if(da(),o==="clear")a.forEach(d);else{const i=Pe(t),c=i&&la(s);if(i&&s==="length"){const u=Number(n);a.forEach((p,w)=>{(w==="length"||w===Hs||!Xt(w)&&w>=u)&&d(p)})}else switch((s!==void 0||a.has(void 0))&&d(a.get(s)),c&&d(a.get(Hs)),o){case"add":i?c&&d(a.get("length")):(d(a.get(Yo)),ls(t)&&d(a.get(Rr)));break;case"delete":i||(d(a.get(Yo)),ls(t)&&d(a.get(Rr)));break;case"set":ls(t)&&d(a.get(Yo));break}}ua()}function Tp(t,o){const s=An.get(t);return s&&s.get(o)}function os(t){const o=ze(t);return o===t?o:($t(o,"iterate",Hs),Gt(t)?o:o.map(xt))}function Wn(t){return $t(t=ze(t),"iterate",Hs),t}const Ep={__proto__:null,[Symbol.iterator](){return mr(this,Symbol.iterator,xt)},concat(...t){return os(this).concat(...t.map(o=>Pe(o)?os(o):o))},entries(){return mr(this,"entries",t=>(t[1]=xt(t[1]),t))},every(t,o){return co(this,"every",t,o,void 0,arguments)},filter(t,o){return co(this,"filter",t,o,s=>s.map(xt),arguments)},find(t,o){return co(this,"find",t,o,xt,arguments)},findIndex(t,o){return co(this,"findIndex",t,o,void 0,arguments)},findLast(t,o){return co(this,"findLast",t,o,xt,arguments)},findLastIndex(t,o){return co(this,"findLastIndex",t,o,void 0,arguments)},forEach(t,o){return co(this,"forEach",t,o,void 0,arguments)},includes(...t){return gr(this,"includes",t)},indexOf(...t){return gr(this,"indexOf",t)},join(t){return os(this).join(t)},lastIndexOf(...t){return gr(this,"lastIndexOf",t)},map(t,o){return co(this,"map",t,o,void 0,arguments)},pop(){return $s(this,"pop")},push(...t){return $s(this,"push",t)},reduce(t,...o){return Qi(this,"reduce",t,o)},reduceRight(t,...o){return Qi(this,"reduceRight",t,o)},shift(){return $s(this,"shift")},some(t,o){return co(this,"some",t,o,void 0,arguments)},splice(...t){return $s(this,"splice",t)},toReversed(){return os(this).toReversed()},toSorted(t){return os(this).toSorted(t)},toSpliced(...t){return os(this).toSpliced(...t)},unshift(...t){return $s(this,"unshift",t)},values(){return mr(this,"values",xt)}};function mr(t,o,s){const n=Wn(t),r=n[o]();return n!==t&&!Gt(t)&&(r._next=r.next,r.next=()=>{const l=r._next();return l.done||(l.value=s(l.value)),l}),r}const Ap=Array.prototype;function co(t,o,s,n,r,l){const a=Wn(t),d=a!==t&&!Gt(t),i=a[o];if(i!==Ap[o]){const p=i.apply(t,l);return d?xt(p):p}let c=s;a!==t&&(d?c=function(p,w){return s.call(this,xt(p),w,t)}:s.length>2&&(c=function(p,w){return s.call(this,p,w,t)}));const u=i.call(a,c,n);return d&&r?r(u):u}function Qi(t,o,s,n){const r=Wn(t);let l=s;return r!==t&&(Gt(t)?s.length>3&&(l=function(a,d,i){return s.call(this,a,d,i,t)}):l=function(a,d,i){return s.call(this,a,xt(d),i,t)}),r[o](l,...n)}function gr(t,o,s){const n=ze(t);$t(n,"iterate",Hs);const r=n[o](...s);return(r===-1||r===!1)&&fa(s[0])?(s[0]=ze(s[0]),n[o](...s)):r}function $s(t,o,s=[]){ko(),da();const n=ze(t)[o].apply(t,s);return ua(),_o(),n}const Ip=na("__proto__,__v_isRef,__isVue"),tc=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(Xt));function Mp(t){Xt(t)||(t=String(t));const o=ze(this);return $t(o,"has",t),o.hasOwnProperty(t)}class oc{constructor(o=!1,s=!1){this._isReadonly=o,this._isShallow=s}get(o,s,n){if(s==="__v_skip")return o.__v_skip;const r=this._isReadonly,l=this._isShallow;if(s==="__v_isReactive")return!r;if(s==="__v_isReadonly")return r;if(s==="__v_isShallow")return l;if(s==="__v_raw")return n===(r?l?Op:ac:l?rc:nc).get(o)||Object.getPrototypeOf(o)===Object.getPrototypeOf(n)?o:void 0;const a=Pe(o);if(!r){let i;if(a&&(i=Ep[s]))return i;if(s==="hasOwnProperty")return Mp}const d=Reflect.get(o,s,dt(o)?o:n);if((Xt(s)?tc.has(s):Ip(s))||(r||$t(o,"get",s),l))return d;if(dt(d)){const i=a&&la(s)?d:d.value;return r&&Qe(i)?Nr(i):i}return Qe(d)?r?Nr(d):Je(d):d}}class sc extends oc{constructor(o=!1){super(!1,o)}set(o,s,n,r){let l=o[s];if(!this._isShallow){const i=No(l);if(!Gt(n)&&!No(n)&&(l=ze(l),n=ze(n)),!Pe(o)&&dt(l)&&!dt(n))return i||(l.value=n),!0}const a=Pe(o)&&la(s)?Number(s)<o.length:Xe(o,s),d=Reflect.set(o,s,n,dt(o)?o:r);return o===ze(r)&&(a?Po(n,l)&&yo(o,"set",s,n):yo(o,"add",s,n)),d}deleteProperty(o,s){const n=Xe(o,s);o[s];const r=Reflect.deleteProperty(o,s);return r&&n&&yo(o,"delete",s,void 0),r}has(o,s){const n=Reflect.has(o,s);return(!Xt(s)||!tc.has(s))&&$t(o,"has",s),n}ownKeys(o){return $t(o,"iterate",Pe(o)?"length":Yo),Reflect.ownKeys(o)}}class Rp extends oc{constructor(o=!1){super(!0,o)}set(o,s){return!0}deleteProperty(o,s){return!0}}const Pp=new sc,Np=new Rp,jp=new sc(!0);const Pr=t=>t,pn=t=>Reflect.getPrototypeOf(t);function Lp(t,o,s){return function(...n){const r=this.__v_raw,l=ze(r),a=ls(l),d=t==="entries"||t===Symbol.iterator&&a,i=t==="keys"&&a,c=r[t](...n),u=s?Pr:o?In:xt;return!o&&$t(l,"iterate",i?Rr:Yo),{next(){const{value:p,done:w}=c.next();return w?{value:p,done:w}:{value:d?[u(p[0]),u(p[1])]:u(p),done:w}},[Symbol.iterator](){return this}}}}function mn(t){return function(...o){return t==="delete"?!1:t==="clear"?void 0:this}}function Bp(t,o){const s={get(r){const l=this.__v_raw,a=ze(l),d=ze(r);t||(Po(r,d)&&$t(a,"get",r),$t(a,"get",d));const{has:i}=pn(a),c=o?Pr:t?In:xt;if(i.call(a,r))return c(l.get(r));if(i.call(a,d))return c(l.get(d));l!==a&&l.get(r)},get size(){const r=this.__v_raw;return!t&&$t(ze(r),"iterate",Yo),r.size},has(r){const l=this.__v_raw,a=ze(l),d=ze(r);return t||(Po(r,d)&&$t(a,"has",r),$t(a,"has",d)),r===d?l.has(r):l.has(r)||l.has(d)},forEach(r,l){const a=this,d=a.__v_raw,i=ze(d),c=o?Pr:t?In:xt;return!t&&$t(i,"iterate",Yo),d.forEach((u,p)=>r.call(l,c(u),c(p),a))}};return ft(s,t?{add:mn("add"),set:mn("set"),delete:mn("delete"),clear:mn("clear")}:{add(r){!o&&!Gt(r)&&!No(r)&&(r=ze(r));const l=ze(this);return pn(l).has.call(l,r)||(l.add(r),yo(l,"add",r,r)),this},set(r,l){!o&&!Gt(l)&&!No(l)&&(l=ze(l));const a=ze(this),{has:d,get:i}=pn(a);let c=d.call(a,r);c||(r=ze(r),c=d.call(a,r));const u=i.call(a,r);return a.set(r,l),c?Po(l,u)&&yo(a,"set",r,l):yo(a,"add",r,l),this},delete(r){const l=ze(this),{has:a,get:d}=pn(l);let i=a.call(l,r);i||(r=ze(r),i=a.call(l,r)),d&&d.call(l,r);const c=l.delete(r);return i&&yo(l,"delete",r,void 0),c},clear(){const r=ze(this),l=r.size!==0,a=r.clear();return l&&yo(r,"clear",void 0,void 0),a}}),["keys","values","entries",Symbol.iterator].forEach(r=>{s[r]=Lp(r,t,o)}),s}function ma(t,o){const s=Bp(t,o);return(n,r,l)=>r==="__v_isReactive"?!t:r==="__v_isReadonly"?t:r==="__v_raw"?n:Reflect.get(Xe(s,r)&&r in n?s:n,r,l)}const Up={get:ma(!1,!1)},Fp={get:ma(!1,!0)},Vp={get:ma(!0,!1)};const nc=new WeakMap,rc=new WeakMap,ac=new WeakMap,Op=new WeakMap;function zp(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Hp(t){return t.__v_skip||!Object.isExtensible(t)?0:zp(gp(t))}function Je(t){return No(t)?t:ga(t,!1,Pp,Up,nc)}function lc(t){return ga(t,!1,jp,Fp,rc)}function Nr(t){return ga(t,!0,Np,Vp,ac)}function ga(t,o,s,n,r){if(!Qe(t)||t.__v_raw&&!(o&&t.__v_isReactive))return t;const l=Hp(t);if(l===0)return t;const a=r.get(t);if(a)return a;const d=new Proxy(t,l===2?n:s);return r.set(t,d),d}function wo(t){return No(t)?wo(t.__v_raw):!!(t&&t.__v_isReactive)}function No(t){return!!(t&&t.__v_isReadonly)}function Gt(t){return!!(t&&t.__v_isShallow)}function fa(t){return t?!!t.__v_raw:!1}function ze(t){const o=t&&t.__v_raw;return o?ze(o):t}function Jo(t){return!Xe(t,"__v_skip")&&Object.isExtensible(t)&&Fu(t,"__v_skip",!0),t}const xt=t=>Qe(t)?Je(t):t,In=t=>Qe(t)?Nr(t):t;function dt(t){return t?t.__v_isRef===!0:!1}function B(t){return ic(t,!1)}function qp(t){return ic(t,!0)}function ic(t,o){return dt(t)?t:new Gp(t,o)}class Gp{constructor(o,s){this.dep=new pa,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=s?o:ze(o),this._value=s?o:xt(o),this.__v_isShallow=s}get value(){return this.dep.track(),this._value}set value(o){const s=this._rawValue,n=this.__v_isShallow||Gt(o)||No(o);o=n?o:ze(o),Po(o,s)&&(this._rawValue=o,this._value=n?o:xt(o),this.dep.trigger())}}function Te(t){return dt(t)?t.value:t}const Jp={get:(t,o,s)=>o==="__v_raw"?t:Te(Reflect.get(t,o,s)),set:(t,o,s,n)=>{const r=t[o];return dt(r)&&!dt(s)?(r.value=s,!0):Reflect.set(t,o,s,n)}};function dc(t){return wo(t)?t:new Proxy(t,Jp)}function uc(t){const o=Pe(t)?new Array(t.length):{};for(const s in t)o[s]=cc(t,s);return o}class Wp{constructor(o,s,n){this._object=o,this._key=s,this._defaultValue=n,this.__v_isRef=!0,this._value=void 0}get value(){const o=this._object[this._key];return this._value=o===void 0?this._defaultValue:o}set value(o){this._object[this._key]=o}get dep(){return Tp(ze(this._object),this._key)}}class Yp{constructor(o){this._getter=o,this.__v_isRef=!0,this.__v_isReadonly=!0,this._value=void 0}get value(){return this._value=this._getter()}}function Kp(t,o,s){return dt(t)?t:je(t)?new Yp(t):Qe(t)&&arguments.length>1?cc(t,o,s):B(t)}function cc(t,o,s){const n=t[o];return dt(n)?n:new Wp(t,o,s)}class Xp{constructor(o,s,n){this.fn=o,this.setter=s,this._value=void 0,this.dep=new pa(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=zs-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!s,this.isSSR=n}notify(){if(this.flags|=16,!(this.flags&8)&&rt!==this)return Yu(this,!0),!0}get value(){const o=this.dep.track();return Zu(this),o&&(o.version=this.dep.version),this._value}set value(o){this.setter&&this.setter(o)}}function Zp(t,o,s=!1){let n,r;return je(t)?n=t:(n=t.get,r=t.set),new Xp(n,r,s)}const gn={},Mn=new WeakMap;let qo;function Qp(t,o=!1,s=qo){if(s){let n=Mn.get(s);n||Mn.set(s,n=[]),n.push(t)}}function em(t,o,s=nt){const{immediate:n,deep:r,once:l,scheduler:a,augmentJob:d,call:i}=s,c=j=>r?j:Gt(j)||r===!1||r===0?xo(j,1):xo(j);let u,p,w,f,v=!1,N=!1;if(dt(t)?(p=()=>t.value,v=Gt(t)):wo(t)?(p=()=>c(t),v=!0):Pe(t)?(N=!0,v=t.some(j=>wo(j)||Gt(j)),p=()=>t.map(j=>{if(dt(j))return j.value;if(wo(j))return c(j);if(je(j))return i?i(j,2):j()})):je(t)?o?p=i?()=>i(t,2):t:p=()=>{if(w){ko();try{w()}finally{_o()}}const j=qo;qo=u;try{return i?i(t,3,[f]):t(f)}finally{qo=j}}:p=io,o&&r){const j=p,$=r===!0?1/0:r;p=()=>xo(j(),$)}const A=Gu(),F=()=>{u.stop(),A&&A.active&&aa(A.effects,u)};if(l&&o){const j=o;o=(...$)=>{j(...$),F()}}let I=N?new Array(t.length).fill(gn):gn;const C=j=>{if(!(!(u.flags&1)||!u.dirty&&!j))if(o){const $=u.run();if(r||v||(N?$.some((y,b)=>Po(y,I[b])):Po($,I))){w&&w();const y=qo;qo=u;try{const b=[$,I===gn?void 0:N&&I[0]===gn?[]:I,f];I=$,i?i(o,3,b):o(...b)}finally{qo=y}}}else u.run()};return d&&d(C),u=new Ju(p),u.scheduler=a?()=>a(C,!1):C,f=j=>Qp(j,!1,u),w=u.onStop=()=>{const j=Mn.get(u);if(j){if(i)i(j,4);else for(const $ of j)$();Mn.delete(u)}},o?n?C(!0):I=u.run():a?a(C.bind(null,!0),!0):u.run(),F.pause=u.pause.bind(u),F.resume=u.resume.bind(u),F.stop=F,F}function xo(t,o=1/0,s){if(o<=0||!Qe(t)||t.__v_skip||(s=s||new Map,(s.get(t)||0)>=o))return t;if(s.set(t,o),o--,dt(t))xo(t.value,o,s);else if(Pe(t))for(let n=0;n<t.length;n++)xo(t[n],o,s);else if(xs(t)||ls(t))t.forEach(n=>{xo(n,o,s)});else if(Uu(t)){for(const n in t)xo(t[n],o,s);for(const n of Object.getOwnPropertySymbols(t))Object.prototype.propertyIsEnumerable.call(t,n)&&xo(t[n],o,s)}return t}/**
* @vue/runtime-core v3.5.22
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function en(t,o,s,n){try{return n?t(...n):t()}catch(r){Yn(r,o,s)}}function Zt(t,o,s,n){if(je(t)){const r=en(t,o,s,n);return r&&Lu(r)&&r.catch(l=>{Yn(l,o,s)}),r}if(Pe(t)){const r=[];for(let l=0;l<t.length;l++)r.push(Zt(t[l],o,s,n));return r}}function Yn(t,o,s,n=!0){const r=o?o.vnode:null,{errorHandler:l,throwUnhandledErrorInProduction:a}=o&&o.appContext.config||nt;if(o){let d=o.parent;const i=o.proxy,c=`https://vuejs.org/error-reference/#runtime-${s}`;for(;d;){const u=d.ec;if(u){for(let p=0;p<u.length;p++)if(u[p](t,i,c)===!1)return}d=d.parent}if(l){ko(),en(l,null,10,[t,i,c]),_o();return}}tm(t,s,r,n,a)}function tm(t,o,s,n=!0,r=!1){if(r)throw t;console.error(t)}const Mt=[];let ro=-1;const is=[];let Io=null,ns=0;const pc=Promise.resolve();let Rn=null;function Qo(t){const o=Rn||pc;return t?o.then(this?t.bind(this):t):o}function om(t){let o=ro+1,s=Mt.length;for(;o<s;){const n=o+s>>>1,r=Mt[n],l=qs(r);l<t||l===t&&r.flags&2?o=n+1:s=n}return o}function va(t){if(!(t.flags&1)){const o=qs(t),s=Mt[Mt.length-1];!s||!(t.flags&2)&&o>=qs(s)?Mt.push(t):Mt.splice(om(o),0,t),t.flags|=1,mc()}}function mc(){Rn||(Rn=pc.then(fc))}function sm(t){Pe(t)?is.push(...t):Io&&t.id===-1?Io.splice(ns+1,0,t):t.flags&1||(is.push(t),t.flags|=1),mc()}function ed(t,o,s=ro+1){for(;s<Mt.length;s++){const n=Mt[s];if(n&&n.flags&2){if(t&&n.id!==t.uid)continue;Mt.splice(s,1),s--,n.flags&4&&(n.flags&=-2),n(),n.flags&4||(n.flags&=-2)}}}function gc(t){if(is.length){const o=[...new Set(is)].sort((s,n)=>qs(s)-qs(n));if(is.length=0,Io){Io.push(...o);return}for(Io=o,ns=0;ns<Io.length;ns++){const s=Io[ns];s.flags&4&&(s.flags&=-2),s.flags&8||s(),s.flags&=-2}Io=null,ns=0}}const qs=t=>t.id==null?t.flags&2?-1:1/0:t.id;function fc(t){try{for(ro=0;ro<Mt.length;ro++){const o=Mt[ro];o&&!(o.flags&8)&&(o.flags&4&&(o.flags&=-2),en(o,o.i,o.i?15:14),o.flags&4||(o.flags&=-2))}}finally{for(;ro<Mt.length;ro++){const o=Mt[ro];o&&(o.flags&=-2)}ro=-1,Mt.length=0,gc(),Rn=null,(Mt.length||is.length)&&fc()}}let bt=null,vc=null;function Pn(t){const o=bt;return bt=t,vc=t&&t.type.__scopeId||null,o}function ye(t,o=bt,s){if(!o||t._n)return t;const n=(...r)=>{n._d&&Bn(-1);const l=Pn(o);let a;try{a=t(...r)}finally{Pn(l),n._d&&Bn(1)}return a};return n._n=!0,n._c=!0,n._d=!0,n}function ce(t,o){if(bt===null)return t;const s=er(bt),n=t.dirs||(t.dirs=[]);for(let r=0;r<o.length;r++){let[l,a,d,i=nt]=o[r];l&&(je(l)&&(l={mounted:l,updated:l}),l.deep&&xo(a),n.push({dir:l,instance:s,value:a,oldValue:void 0,arg:d,modifiers:i}))}return t}function Vo(t,o,s,n){const r=t.dirs,l=o&&o.dirs;for(let a=0;a<r.length;a++){const d=r[a];l&&(d.oldValue=l[a].value);let i=d.dir[n];i&&(ko(),Zt(i,s,8,[t.el,d,t,o]),_o())}}const hc=Symbol("_vte"),yc=t=>t.__isTeleport,Ns=t=>t&&(t.disabled||t.disabled===""),td=t=>t&&(t.defer||t.defer===""),od=t=>typeof SVGElement<"u"&&t instanceof SVGElement,sd=t=>typeof MathMLElement=="function"&&t instanceof MathMLElement,jr=(t,o)=>{const s=t&&t.to;return ut(s)?o?o(s):null:s},xc={name:"Teleport",__isTeleport:!0,process(t,o,s,n,r,l,a,d,i,c){const{mc:u,pc:p,pbc:w,o:{insert:f,querySelector:v,createText:N,createComment:A}}=c,F=Ns(o.props);let{shapeFlag:I,children:C,dynamicChildren:j}=o;if(t==null){const $=o.el=N(""),y=o.anchor=N("");f($,s,n),f(y,s,n);const b=(R,M)=>{I&16&&u(C,R,M,r,l,a,d,i)},E=()=>{const R=o.target=jr(o.props,v),M=bc(R,o,N,f);R&&(a!=="svg"&&od(R)?a="svg":a!=="mathml"&&sd(R)&&(a="mathml"),r&&r.isCE&&(r.ce._teleportTargets||(r.ce._teleportTargets=new Set)).add(R),F||(b(R,M),kn(o,!1)))};F&&(b(s,y),kn(o,!0)),td(o.props)?(o.el.__isMounted=!1,It(()=>{E(),delete o.el.__isMounted},l)):E()}else{if(td(o.props)&&t.el.__isMounted===!1){It(()=>{xc.process(t,o,s,n,r,l,a,d,i,c)},l);return}o.el=t.el,o.targetStart=t.targetStart;const $=o.anchor=t.anchor,y=o.target=t.target,b=o.targetAnchor=t.targetAnchor,E=Ns(t.props),R=E?s:y,M=E?$:b;if(a==="svg"||od(y)?a="svg":(a==="mathml"||sd(y))&&(a="mathml"),j?(w(t.dynamicChildren,j,R,r,l,a,d),wa(t,o,!0)):i||p(t,o,R,M,r,l,a,d,!1),F)E?o.props&&t.props&&o.props.to!==t.props.to&&(o.props.to=t.props.to):fn(o,s,$,c,1);else if((o.props&&o.props.to)!==(t.props&&t.props.to)){const G=o.target=jr(o.props,v);G&&fn(o,G,null,c,0)}else E&&fn(o,y,b,c,1);kn(o,F)}},remove(t,o,s,{um:n,o:{remove:r}},l){const{shapeFlag:a,children:d,anchor:i,targetStart:c,targetAnchor:u,target:p,props:w}=t;if(p&&(r(c),r(u)),l&&r(i),a&16){const f=l||!Ns(w);for(let v=0;v<d.length;v++){const N=d[v];n(N,o,s,f,!!N.dynamicChildren)}}},move:fn,hydrate:nm};function fn(t,o,s,{o:{insert:n},m:r},l=2){l===0&&n(t.targetAnchor,o,s);const{el:a,anchor:d,shapeFlag:i,children:c,props:u}=t,p=l===2;if(p&&n(a,o,s),(!p||Ns(u))&&i&16)for(let w=0;w<c.length;w++)r(c[w],o,s,2);p&&n(d,o,s)}function nm(t,o,s,n,r,l,{o:{nextSibling:a,parentNode:d,querySelector:i,insert:c,createText:u}},p){function w(N,A,F,I){A.anchor=p(a(N),A,d(N),s,n,r,l),A.targetStart=F,A.targetAnchor=I}const f=o.target=jr(o.props,i),v=Ns(o.props);if(f){const N=f._lpa||f.firstChild;if(o.shapeFlag&16)if(v)w(t,o,N,N&&a(N));else{o.anchor=a(t);let A=N;for(;A;){if(A&&A.nodeType===8){if(A.data==="teleport start anchor")o.targetStart=A;else if(A.data==="teleport anchor"){o.targetAnchor=A,f._lpa=o.targetAnchor&&a(o.targetAnchor);break}}A=a(A)}o.targetAnchor||bc(f,o,u,c),p(N&&a(N),o,f,s,n,r,l)}kn(o,v)}else v&&o.shapeFlag&16&&w(t,o,t,a(t));return o.anchor&&a(o.anchor)}const Nn=xc;function kn(t,o){const s=t.ctx;if(s&&s.ut){let n,r;for(o?(n=t.el,r=t.anchor):(n=t.targetStart,r=t.targetAnchor);n&&n!==r;)n.nodeType===1&&n.setAttribute("data-v-owner",s.uid),n=n.nextSibling;s.ut()}}function bc(t,o,s,n){const r=o.targetStart=s(""),l=o.targetAnchor=s("");return r[hc]=l,t&&(n(r,t),n(l,t)),l}const vo=Symbol("_leaveCb"),vn=Symbol("_enterCb");function wc(){const t={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return Me(()=>{t.isMounted=!0}),ya(()=>{t.isUnmounting=!0}),t}const zt=[Function,Array],kc={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:zt,onEnter:zt,onAfterEnter:zt,onEnterCancelled:zt,onBeforeLeave:zt,onLeave:zt,onAfterLeave:zt,onLeaveCancelled:zt,onBeforeAppear:zt,onAppear:zt,onAfterAppear:zt,onAppearCancelled:zt},_c=t=>{const o=t.subTree;return o.component?_c(o.component):o},rm={name:"BaseTransition",props:kc,setup(t,{slots:o}){const s=tn(),n=wc();return()=>{const r=o.default&&ha(o.default(),!0);if(!r||!r.length)return;const l=$c(r),a=ze(t),{mode:d}=a;if(n.isLeaving)return fr(l);const i=nd(l);if(!i)return fr(l);let c=Gs(i,a,n,s,p=>c=p);i.type!==St&&es(i,c);let u=s.subTree&&nd(s.subTree);if(u&&u.type!==St&&!Go(u,i)&&_c(s).type!==St){let p=Gs(u,a,n,s);if(es(u,p),d==="out-in"&&i.type!==St)return n.isLeaving=!0,p.afterLeave=()=>{n.isLeaving=!1,s.job.flags&8||s.update(),delete p.afterLeave,u=void 0},fr(l);d==="in-out"&&i.type!==St?p.delayLeave=(w,f,v)=>{const N=Sc(n,u);N[String(u.key)]=u,w[vo]=()=>{f(),w[vo]=void 0,delete c.delayedLeave,u=void 0},c.delayedLeave=()=>{v(),delete c.delayedLeave,u=void 0}}:u=void 0}else u&&(u=void 0);return l}}};function $c(t){let o=t[0];if(t.length>1){for(const s of t)if(s.type!==St){o=s;break}}return o}const am=rm;function Sc(t,o){const{leavingVNodes:s}=t;let n=s.get(o.type);return n||(n=Object.create(null),s.set(o.type,n)),n}function Gs(t,o,s,n,r){const{appear:l,mode:a,persisted:d=!1,onBeforeEnter:i,onEnter:c,onAfterEnter:u,onEnterCancelled:p,onBeforeLeave:w,onLeave:f,onAfterLeave:v,onLeaveCancelled:N,onBeforeAppear:A,onAppear:F,onAfterAppear:I,onAppearCancelled:C}=o,j=String(t.key),$=Sc(s,t),y=(R,M)=>{R&&Zt(R,n,9,M)},b=(R,M)=>{const G=M[1];y(R,M),Pe(R)?R.every(U=>U.length<=1)&&G():R.length<=1&&G()},E={mode:a,persisted:d,beforeEnter(R){let M=i;if(!s.isMounted)if(l)M=A||i;else return;R[vo]&&R[vo](!0);const G=$[j];G&&Go(t,G)&&G.el[vo]&&G.el[vo](),y(M,[R])},enter(R){let M=c,G=u,U=p;if(!s.isMounted)if(l)M=F||c,G=I||u,U=C||p;else return;let _=!1;const k=R[vn]=L=>{_||(_=!0,L?y(U,[R]):y(G,[R]),E.delayedLeave&&E.delayedLeave(),R[vn]=void 0)};M?b(M,[R,k]):k()},leave(R,M){const G=String(t.key);if(R[vn]&&R[vn](!0),s.isUnmounting)return M();y(w,[R]);let U=!1;const _=R[vo]=k=>{U||(U=!0,M(),k?y(N,[R]):y(v,[R]),R[vo]=void 0,$[G]===t&&delete $[G])};$[G]=t,f?b(f,[R,_]):_()},clone(R){const M=Gs(R,o,s,n,r);return r&&r(M),M}};return E}function fr(t){if(Kn(t))return t=jo(t),t.children=null,t}function nd(t){if(!Kn(t))return yc(t.type)&&t.children?$c(t.children):t;if(t.component)return t.component.subTree;const{shapeFlag:o,children:s}=t;if(s){if(o&16)return s[0];if(o&32&&je(s.default))return s.default()}}function es(t,o){t.shapeFlag&6&&t.component?(t.transition=o,es(t.component.subTree,o)):t.shapeFlag&128?(t.ssContent.transition=o.clone(t.ssContent),t.ssFallback.transition=o.clone(t.ssFallback)):t.transition=o}function ha(t,o=!1,s){let n=[],r=0;for(let l=0;l<t.length;l++){let a=t[l];const d=s==null?a.key:String(s)+String(a.key!=null?a.key:l);a.type===be?(a.patchFlag&128&&r++,n=n.concat(ha(a.children,o,d))):(o||a.type!==St)&&n.push(d!=null?jo(a,{key:d}):a)}if(r>1)for(let l=0;l<n.length;l++)n[l].patchFlag=-2;return n}function Dc(t,o){return je(t)?ft({name:t.name},o,{setup:t}):t}function Cc(t){t.ids=[t.ids[0]+t.ids[2]+++"-",0,0]}const jn=new WeakMap;function js(t,o,s,n,r=!1){if(Pe(t)){t.forEach((v,N)=>js(v,o&&(Pe(o)?o[N]:o),s,n,r));return}if(ds(n)&&!r){n.shapeFlag&512&&n.type.__asyncResolved&&n.component.subTree.component&&js(t,o,s,n.component.subTree);return}const l=n.shapeFlag&4?er(n.component):n.el,a=r?null:l,{i:d,r:i}=t,c=o&&o.r,u=d.refs===nt?d.refs={}:d.refs,p=d.setupState,w=ze(p),f=p===nt?ju:v=>Xe(w,v);if(c!=null&&c!==i){if(rd(o),ut(c))u[c]=null,f(c)&&(p[c]=null);else if(dt(c)){c.value=null;const v=o;v.k&&(u[v.k]=null)}}if(je(i))en(i,d,12,[a,u]);else{const v=ut(i),N=dt(i);if(v||N){const A=()=>{if(t.f){const F=v?f(i)?p[i]:u[i]:i.value;if(r)Pe(F)&&aa(F,l);else if(Pe(F))F.includes(l)||F.push(l);else if(v)u[i]=[l],f(i)&&(p[i]=u[i]);else{const I=[l];i.value=I,t.k&&(u[t.k]=I)}}else v?(u[i]=a,f(i)&&(p[i]=a)):N&&(i.value=a,t.k&&(u[t.k]=a))};if(a){const F=()=>{A(),jn.delete(t)};F.id=-1,jn.set(t,F),It(F,s)}else rd(t),A()}}}function rd(t){const o=jn.get(t);o&&(o.flags|=8,jn.delete(t))}Jn().requestIdleCallback;Jn().cancelIdleCallback;const ds=t=>!!t.type.__asyncLoader,Kn=t=>t.type.__isKeepAlive;function lm(t,o){Tc(t,"a",o)}function im(t,o){Tc(t,"da",o)}function Tc(t,o,s=Dt){const n=t.__wdc||(t.__wdc=()=>{let r=s;for(;r;){if(r.isDeactivated)return;r=r.parent}return t()});if(Xn(o,n,s),s){let r=s.parent;for(;r&&r.parent;)Kn(r.parent.vnode)&&dm(n,o,s,r),r=r.parent}}function dm(t,o,s,n){const r=Xn(o,t,n,!0);Pt(()=>{aa(n[o],r)},s)}function Xn(t,o,s=Dt,n=!1){if(s){const r=s[t]||(s[t]=[]),l=o.__weh||(o.__weh=(...a)=>{ko();const d=on(s),i=Zt(o,s,t,a);return d(),_o(),i});return n?r.unshift(l):r.push(l),l}}const $o=t=>(o,s=Dt)=>{(!Ys||t==="sp")&&Xn(t,(...n)=>o(...n),s)},um=$o("bm"),Me=$o("m"),cm=$o("bu"),Ec=$o("u"),ya=$o("bum"),Pt=$o("um"),pm=$o("sp"),mm=$o("rtg"),gm=$o("rtc");function fm(t,o=Dt){Xn("ec",t,o)}const Ac="components";function Ze(t,o){return Mc(Ac,t,!0,o)||t}const Ic=Symbol.for("v-ndc");function wt(t){return ut(t)?Mc(Ac,t,!1)||t:t||Ic}function Mc(t,o,s=!0,n=!1){const r=bt||Dt;if(r){const l=r.type;{const d=ng(l,!1);if(d&&(d===o||d===Wt(o)||d===Gn(Wt(o))))return l}const a=ad(r[t]||l[t],o)||ad(r.appContext[t],o);return!a&&n?l:a}}function ad(t,o){return t&&(t[o]||t[Wt(o)]||t[Gn(Wt(o))])}function $e(t,o,s,n){let r;const l=s,a=Pe(t);if(a||ut(t)){const d=a&&wo(t);let i=!1,c=!1;d&&(i=!Gt(t),c=No(t),t=Wn(t)),r=new Array(t.length);for(let u=0,p=t.length;u<p;u++)r[u]=o(i?c?In(xt(t[u])):xt(t[u]):t[u],u,void 0,l)}else if(typeof t=="number"){r=new Array(t);for(let d=0;d<t;d++)r[d]=o(d+1,d,void 0,l)}else if(Qe(t))if(t[Symbol.iterator])r=Array.from(t,(d,i)=>o(d,i,void 0,l));else{const d=Object.keys(t);r=new Array(d.length);for(let i=0,c=d.length;i<c;i++){const u=d[i];r[i]=o(t[u],u,i,l)}}else r=[];return r}function Tt(t,o,s={},n,r){if(bt.ce||bt.parent&&ds(bt.parent)&&bt.parent.ce){const c=Object.keys(s).length>0;return o!=="default"&&(s.name=o),m(),Ne(be,null,[le("slot",s,n&&n())],c?-2:64)}let l=t[o];l&&l._c&&(l._d=!1),m();const a=l&&Rc(l(s)),d=s.key||a&&a.key,i=Ne(be,{key:(d&&!Xt(d)?d:`_${o}`)+(!a&&n?"_fb":"")},a||(n?n():[]),a&&t._===1?64:-2);return!r&&i.scopeId&&(i.slotScopeIds=[i.scopeId+"-s"]),l&&l._c&&(l._d=!0),i}function Rc(t){return t.some(o=>Ws(o)?!(o.type===St||o.type===be&&!Rc(o.children)):!0)?t:null}const Lr=t=>t?Zc(t)?er(t):Lr(t.parent):null,Ls=ft(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>Lr(t.parent),$root:t=>Lr(t.root),$host:t=>t.ce,$emit:t=>t.emit,$options:t=>Nc(t),$forceUpdate:t=>t.f||(t.f=()=>{va(t.update)}),$nextTick:t=>t.n||(t.n=Qo.bind(t.proxy)),$watch:t=>Um.bind(t)}),vr=(t,o)=>t!==nt&&!t.__isScriptSetup&&Xe(t,o),vm={get({_:t},o){if(o==="__v_skip")return!0;const{ctx:s,setupState:n,data:r,props:l,accessCache:a,type:d,appContext:i}=t;let c;if(o[0]!=="$"){const f=a[o];if(f!==void 0)switch(f){case 1:return n[o];case 2:return r[o];case 4:return s[o];case 3:return l[o]}else{if(vr(n,o))return a[o]=1,n[o];if(r!==nt&&Xe(r,o))return a[o]=2,r[o];if((c=t.propsOptions[0])&&Xe(c,o))return a[o]=3,l[o];if(s!==nt&&Xe(s,o))return a[o]=4,s[o];Br&&(a[o]=0)}}const u=Ls[o];let p,w;if(u)return o==="$attrs"&&$t(t.attrs,"get",""),u(t);if((p=d.__cssModules)&&(p=p[o]))return p;if(s!==nt&&Xe(s,o))return a[o]=4,s[o];if(w=i.config.globalProperties,Xe(w,o))return w[o]},set({_:t},o,s){const{data:n,setupState:r,ctx:l}=t;return vr(r,o)?(r[o]=s,!0):n!==nt&&Xe(n,o)?(n[o]=s,!0):Xe(t.props,o)||o[0]==="$"&&o.slice(1)in t?!1:(l[o]=s,!0)},has({_:{data:t,setupState:o,accessCache:s,ctx:n,appContext:r,propsOptions:l,type:a}},d){let i,c;return!!(s[d]||t!==nt&&d[0]!=="$"&&Xe(t,d)||vr(o,d)||(i=l[0])&&Xe(i,d)||Xe(n,d)||Xe(Ls,d)||Xe(r.config.globalProperties,d)||(c=a.__cssModules)&&c[d])},defineProperty(t,o,s){return s.get!=null?t._.accessCache[o]=0:Xe(s,"value")&&this.set(t,o,s.value,null),Reflect.defineProperty(t,o,s)}};function hm(){return ym().slots}function ym(t){const o=tn();return o.setupContext||(o.setupContext=e0(o))}function ld(t){return Pe(t)?t.reduce((o,s)=>(o[s]=null,o),{}):t}let Br=!0;function xm(t){const o=Nc(t),s=t.proxy,n=t.ctx;Br=!1,o.beforeCreate&&id(o.beforeCreate,t,"bc");const{data:r,computed:l,methods:a,watch:d,provide:i,inject:c,created:u,beforeMount:p,mounted:w,beforeUpdate:f,updated:v,activated:N,deactivated:A,beforeDestroy:F,beforeUnmount:I,destroyed:C,unmounted:j,render:$,renderTracked:y,renderTriggered:b,errorCaptured:E,serverPrefetch:R,expose:M,inheritAttrs:G,components:U,directives:_,filters:k}=o;if(c&&bm(c,n,null),a)for(const q in a){const K=a[q];je(K)&&(n[q]=K.bind(s))}if(r){const q=r.call(s,s);Qe(q)&&(t.data=Je(q))}if(Br=!0,l)for(const q in l){const K=l[q],H=je(K)?K.bind(s,s):je(K.get)?K.get.bind(s,s):io,O=!je(K)&&je(K.set)?K.set.bind(s):io,ee=oe({get:H,set:O});Object.defineProperty(n,q,{enumerable:!0,configurable:!0,get:()=>ee.value,set:ge=>ee.value=ge})}if(d)for(const q in d)Pc(d[q],n,s,q);if(i){const q=je(i)?i.call(s):i;Reflect.ownKeys(q).forEach(K=>{Bs(K,q[K])})}u&&id(u,t,"c");function z(q,K){Pe(K)?K.forEach(H=>q(H.bind(s))):K&&q(K.bind(s))}if(z(um,p),z(Me,w),z(cm,f),z(Ec,v),z(lm,N),z(im,A),z(fm,E),z(gm,y),z(mm,b),z(ya,I),z(Pt,j),z(pm,R),Pe(M))if(M.length){const q=t.exposed||(t.exposed={});M.forEach(K=>{Object.defineProperty(q,K,{get:()=>s[K],set:H=>s[K]=H,enumerable:!0})})}else t.exposed||(t.exposed={});$&&t.render===io&&(t.render=$),G!=null&&(t.inheritAttrs=G),U&&(t.components=U),_&&(t.directives=_),R&&Cc(t)}function bm(t,o,s=io){Pe(t)&&(t=Ur(t));for(const n in t){const r=t[n];let l;Qe(r)?"default"in r?l=Nt(r.from||n,r.default,!0):l=Nt(r.from||n):l=Nt(r),dt(l)?Object.defineProperty(o,n,{enumerable:!0,configurable:!0,get:()=>l.value,set:a=>l.value=a}):o[n]=l}}function id(t,o,s){Zt(Pe(t)?t.map(n=>n.bind(o.proxy)):t.bind(o.proxy),o,s)}function Pc(t,o,s,n){let r=n.includes(".")?Jc(s,n):()=>s[n];if(ut(t)){const l=o[t];je(l)&&Oe(r,l)}else if(je(t))Oe(r,t.bind(s));else if(Qe(t))if(Pe(t))t.forEach(l=>Pc(l,o,s,n));else{const l=je(t.handler)?t.handler.bind(s):o[t.handler];je(l)&&Oe(r,l,t)}}function Nc(t){const o=t.type,{mixins:s,extends:n}=o,{mixins:r,optionsCache:l,config:{optionMergeStrategies:a}}=t.appContext,d=l.get(o);let i;return d?i=d:!r.length&&!s&&!n?i=o:(i={},r.length&&r.forEach(c=>Ln(i,c,a,!0)),Ln(i,o,a)),Qe(o)&&l.set(o,i),i}function Ln(t,o,s,n=!1){const{mixins:r,extends:l}=o;l&&Ln(t,l,s,!0),r&&r.forEach(a=>Ln(t,a,s,!0));for(const a in o)if(!(n&&a==="expose")){const d=wm[a]||s&&s[a];t[a]=d?d(t[a],o[a]):o[a]}return t}const wm={data:dd,props:ud,emits:ud,methods:As,computed:As,beforeCreate:At,created:At,beforeMount:At,mounted:At,beforeUpdate:At,updated:At,beforeDestroy:At,beforeUnmount:At,destroyed:At,unmounted:At,activated:At,deactivated:At,errorCaptured:At,serverPrefetch:At,components:As,directives:As,watch:_m,provide:dd,inject:km};function dd(t,o){return o?t?function(){return ft(je(t)?t.call(this,this):t,je(o)?o.call(this,this):o)}:o:t}function km(t,o){return As(Ur(t),Ur(o))}function Ur(t){if(Pe(t)){const o={};for(let s=0;s<t.length;s++)o[t[s]]=t[s];return o}return t}function At(t,o){return t?[...new Set([].concat(t,o))]:o}function As(t,o){return t?ft(Object.create(null),t,o):o}function ud(t,o){return t?Pe(t)&&Pe(o)?[...new Set([...t,...o])]:ft(Object.create(null),ld(t),ld(o??{})):o}function _m(t,o){if(!t)return o;if(!o)return t;const s=ft(Object.create(null),t);for(const n in o)s[n]=At(t[n],o[n]);return s}function jc(){return{app:null,config:{isNativeTag:ju,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let $m=0;function Sm(t,o){return function(n,r=null){je(n)||(n=ft({},n)),r!=null&&!Qe(r)&&(r=null);const l=jc(),a=new WeakSet,d=[];let i=!1;const c=l.app={_uid:$m++,_component:n,_props:r,_container:null,_context:l,_instance:null,version:ag,get config(){return l.config},set config(u){},use(u,...p){return a.has(u)||(u&&je(u.install)?(a.add(u),u.install(c,...p)):je(u)&&(a.add(u),u(c,...p))),c},mixin(u){return l.mixins.includes(u)||l.mixins.push(u),c},component(u,p){return p?(l.components[u]=p,c):l.components[u]},directive(u,p){return p?(l.directives[u]=p,c):l.directives[u]},mount(u,p,w){if(!i){const f=c._ceVNode||le(n,r);return f.appContext=l,w===!0?w="svg":w===!1&&(w=void 0),t(f,u,w),i=!0,c._container=u,u.__vue_app__=c,er(f.component)}},onUnmount(u){d.push(u)},unmount(){i&&(Zt(d,c._instance,16),t(null,c._container),delete c._container.__vue_app__)},provide(u,p){return l.provides[u]=p,c},runWithContext(u){const p=Ko;Ko=c;try{return u()}finally{Ko=p}}};return c}}let Ko=null;function Bs(t,o){if(Dt){let s=Dt.provides;const n=Dt.parent&&Dt.parent.provides;n===s&&(s=Dt.provides=Object.create(n)),s[t]=o}}function Nt(t,o,s=!1){const n=tn();if(n||Ko){let r=Ko?Ko._context.provides:n?n.parent==null||n.ce?n.vnode.appContext&&n.vnode.appContext.provides:n.parent.provides:void 0;if(r&&t in r)return r[t];if(arguments.length>1)return s&&je(o)?o.call(n&&n.proxy):o}}function Dm(){return!!(tn()||Ko)}const Lc={},Bc=()=>Object.create(Lc),Uc=t=>Object.getPrototypeOf(t)===Lc;function Cm(t,o,s,n=!1){const r={},l=Bc();t.propsDefaults=Object.create(null),Fc(t,o,r,l);for(const a in t.propsOptions[0])a in r||(r[a]=void 0);s?t.props=n?r:lc(r):t.type.props?t.props=r:t.props=l,t.attrs=l}function Tm(t,o,s,n){const{props:r,attrs:l,vnode:{patchFlag:a}}=t,d=ze(r),[i]=t.propsOptions;let c=!1;if((n||a>0)&&!(a&16)){if(a&8){const u=t.vnode.dynamicProps;for(let p=0;p<u.length;p++){let w=u[p];if(Zn(t.emitsOptions,w))continue;const f=o[w];if(i)if(Xe(l,w))f!==l[w]&&(l[w]=f,c=!0);else{const v=Wt(w);r[v]=Fr(i,d,v,f,t,!1)}else f!==l[w]&&(l[w]=f,c=!0)}}}else{Fc(t,o,r,l)&&(c=!0);let u;for(const p in d)(!o||!Xe(o,p)&&((u=Bo(p))===p||!Xe(o,u)))&&(i?s&&(s[p]!==void 0||s[u]!==void 0)&&(r[p]=Fr(i,d,p,void 0,t,!0)):delete r[p]);if(l!==d)for(const p in l)(!o||!Xe(o,p))&&(delete l[p],c=!0)}c&&yo(t.attrs,"set","")}function Fc(t,o,s,n){const[r,l]=t.propsOptions;let a=!1,d;if(o)for(let i in o){if(Ms(i))continue;const c=o[i];let u;r&&Xe(r,u=Wt(i))?!l||!l.includes(u)?s[u]=c:(d||(d={}))[u]=c:Zn(t.emitsOptions,i)||(!(i in n)||c!==n[i])&&(n[i]=c,a=!0)}if(l){const i=ze(s),c=d||nt;for(let u=0;u<l.length;u++){const p=l[u];s[p]=Fr(r,i,p,c[p],t,!Xe(c,p))}}return a}function Fr(t,o,s,n,r,l){const a=t[s];if(a!=null){const d=Xe(a,"default");if(d&&n===void 0){const i=a.default;if(a.type!==Function&&!a.skipFactory&&je(i)){const{propsDefaults:c}=r;if(s in c)n=c[s];else{const u=on(r);n=c[s]=i.call(null,o),u()}}else n=i;r.ce&&r.ce._setProp(s,n)}a[0]&&(l&&!d?n=!1:a[1]&&(n===""||n===Bo(s))&&(n=!0))}return n}const Em=new WeakMap;function Vc(t,o,s=!1){const n=s?Em:o.propsCache,r=n.get(t);if(r)return r;const l=t.props,a={},d=[];let i=!1;if(!je(t)){const u=p=>{i=!0;const[w,f]=Vc(p,o,!0);ft(a,w),f&&d.push(...f)};!s&&o.mixins.length&&o.mixins.forEach(u),t.extends&&u(t.extends),t.mixins&&t.mixins.forEach(u)}if(!l&&!i)return Qe(t)&&n.set(t,as),as;if(Pe(l))for(let u=0;u<l.length;u++){const p=Wt(l[u]);cd(p)&&(a[p]=nt)}else if(l)for(const u in l){const p=Wt(u);if(cd(p)){const w=l[u],f=a[p]=Pe(w)||je(w)?{type:w}:ft({},w),v=f.type;let N=!1,A=!0;if(Pe(v))for(let F=0;F<v.length;++F){const I=v[F],C=je(I)&&I.name;if(C==="Boolean"){N=!0;break}else C==="String"&&(A=!1)}else N=je(v)&&v.name==="Boolean";f[0]=N,f[1]=A,(N||Xe(f,"default"))&&d.push(p)}}const c=[a,d];return Qe(t)&&n.set(t,c),c}function cd(t){return t[0]!=="$"&&!Ms(t)}const xa=t=>t==="_"||t==="_ctx"||t==="$stable",ba=t=>Pe(t)?t.map(lo):[lo(t)],Am=(t,o,s)=>{if(o._n)return o;const n=ye((...r)=>ba(o(...r)),s);return n._c=!1,n},Oc=(t,o,s)=>{const n=t._ctx;for(const r in t){if(xa(r))continue;const l=t[r];if(je(l))o[r]=Am(r,l,n);else if(l!=null){const a=ba(l);o[r]=()=>a}}},zc=(t,o)=>{const s=ba(o);t.slots.default=()=>s},Hc=(t,o,s)=>{for(const n in o)(s||!xa(n))&&(t[n]=o[n])},Im=(t,o,s)=>{const n=t.slots=Bc();if(t.vnode.shapeFlag&32){const r=o._;r?(Hc(n,o,s),s&&Fu(n,"_",r,!0)):Oc(o,n)}else o&&zc(t,o)},Mm=(t,o,s)=>{const{vnode:n,slots:r}=t;let l=!0,a=nt;if(n.shapeFlag&32){const d=o._;d?s&&d===1?l=!1:Hc(r,o,s):(l=!o.$stable,Oc(o,r)),a=o}else o&&(zc(t,o),a={default:1});if(l)for(const d in r)!xa(d)&&a[d]==null&&delete r[d]},It=Jm;function Rm(t){return Pm(t)}function Pm(t,o){const s=Jn();s.__VUE__=!0;const{insert:n,remove:r,patchProp:l,createElement:a,createText:d,createComment:i,setText:c,setElementText:u,parentNode:p,nextSibling:w,setScopeId:f=io,insertStaticContent:v}=t,N=(T,V,Z,X=null,W=null,re=null,ne=void 0,fe=null,we=!!V.dynamicChildren)=>{if(T===V)return;T&&!Go(T,V)&&(X=Q(T),ge(T,W,re,!0),T=null),V.patchFlag===-2&&(we=!1,V.dynamicChildren=null);const{type:ve,ref:De,shapeFlag:he}=V;switch(ve){case Qn:A(T,V,Z,X);break;case St:F(T,V,Z,X);break;case _n:T==null&&I(V,Z,X,ne);break;case be:U(T,V,Z,X,W,re,ne,fe,we);break;default:he&1?$(T,V,Z,X,W,re,ne,fe,we):he&6?_(T,V,Z,X,W,re,ne,fe,we):(he&64||he&128)&&ve.process(T,V,Z,X,W,re,ne,fe,we,S)}De!=null&&W?js(De,T&&T.ref,re,V||T,!V):De==null&&T&&T.ref!=null&&js(T.ref,null,re,T,!0)},A=(T,V,Z,X)=>{if(T==null)n(V.el=d(V.children),Z,X);else{const W=V.el=T.el;V.children!==T.children&&c(W,V.children)}},F=(T,V,Z,X)=>{T==null?n(V.el=i(V.children||""),Z,X):V.el=T.el},I=(T,V,Z,X)=>{[T.el,T.anchor]=v(T.children,V,Z,X,T.el,T.anchor)},C=({el:T,anchor:V},Z,X)=>{let W;for(;T&&T!==V;)W=w(T),n(T,Z,X),T=W;n(V,Z,X)},j=({el:T,anchor:V})=>{let Z;for(;T&&T!==V;)Z=w(T),r(T),T=Z;r(V)},$=(T,V,Z,X,W,re,ne,fe,we)=>{V.type==="svg"?ne="svg":V.type==="math"&&(ne="mathml"),T==null?y(V,Z,X,W,re,ne,fe,we):R(T,V,W,re,ne,fe,we)},y=(T,V,Z,X,W,re,ne,fe)=>{let we,ve;const{props:De,shapeFlag:he,transition:Se,dirs:Ee}=T;if(we=T.el=a(T.type,re,De&&De.is,De),he&8?u(we,T.children):he&16&&E(T.children,we,null,X,W,hr(T,re),ne,fe),Ee&&Vo(T,null,X,"created"),b(we,T,T.scopeId,ne,X),De){for(const Y in De)Y!=="value"&&!Ms(Y)&&l(we,Y,null,De[Y],re,X);"value"in De&&l(we,"value",null,De.value,re),(ve=De.onVnodeBeforeMount)&&oo(ve,X,T)}Ee&&Vo(T,null,X,"beforeMount");const ae=Nm(W,Se);ae&&Se.beforeEnter(we),n(we,V,Z),((ve=De&&De.onVnodeMounted)||ae||Ee)&&It(()=>{ve&&oo(ve,X,T),ae&&Se.enter(we),Ee&&Vo(T,null,X,"mounted")},W)},b=(T,V,Z,X,W)=>{if(Z&&f(T,Z),X)for(let re=0;re<X.length;re++)f(T,X[re]);if(W){let re=W.subTree;if(V===re||Yc(re.type)&&(re.ssContent===V||re.ssFallback===V)){const ne=W.vnode;b(T,ne,ne.scopeId,ne.slotScopeIds,W.parent)}}},E=(T,V,Z,X,W,re,ne,fe,we=0)=>{for(let ve=we;ve<T.length;ve++){const De=T[ve]=fe?Mo(T[ve]):lo(T[ve]);N(null,De,V,Z,X,W,re,ne,fe)}},R=(T,V,Z,X,W,re,ne)=>{const fe=V.el=T.el;let{patchFlag:we,dynamicChildren:ve,dirs:De}=V;we|=T.patchFlag&16;const he=T.props||nt,Se=V.props||nt;let Ee;if(Z&&Oo(Z,!1),(Ee=Se.onVnodeBeforeUpdate)&&oo(Ee,Z,V,T),De&&Vo(V,T,Z,"beforeUpdate"),Z&&Oo(Z,!0),(he.innerHTML&&Se.innerHTML==null||he.textContent&&Se.textContent==null)&&u(fe,""),ve?M(T.dynamicChildren,ve,fe,Z,X,hr(V,W),re):ne||K(T,V,fe,null,Z,X,hr(V,W),re,!1),we>0){if(we&16)G(fe,he,Se,Z,W);else if(we&2&&he.class!==Se.class&&l(fe,"class",null,Se.class,W),we&4&&l(fe,"style",he.style,Se.style,W),we&8){const ae=V.dynamicProps;for(let Y=0;Y<ae.length;Y++){const ue=ae[Y],Ae=he[ue],Le=Se[ue];(Le!==Ae||ue==="value")&&l(fe,ue,Ae,Le,W,Z)}}we&1&&T.children!==V.children&&u(fe,V.children)}else!ne&&ve==null&&G(fe,he,Se,Z,W);((Ee=Se.onVnodeUpdated)||De)&&It(()=>{Ee&&oo(Ee,Z,V,T),De&&Vo(V,T,Z,"updated")},X)},M=(T,V,Z,X,W,re,ne)=>{for(let fe=0;fe<V.length;fe++){const we=T[fe],ve=V[fe],De=we.el&&(we.type===be||!Go(we,ve)||we.shapeFlag&198)?p(we.el):Z;N(we,ve,De,null,X,W,re,ne,!0)}},G=(T,V,Z,X,W)=>{if(V!==Z){if(V!==nt)for(const re in V)!Ms(re)&&!(re in Z)&&l(T,re,V[re],null,W,X);for(const re in Z){if(Ms(re))continue;const ne=Z[re],fe=V[re];ne!==fe&&re!=="value"&&l(T,re,fe,ne,W,X)}"value"in Z&&l(T,"value",V.value,Z.value,W)}},U=(T,V,Z,X,W,re,ne,fe,we)=>{const ve=V.el=T?T.el:d(""),De=V.anchor=T?T.anchor:d("");let{patchFlag:he,dynamicChildren:Se,slotScopeIds:Ee}=V;Ee&&(fe=fe?fe.concat(Ee):Ee),T==null?(n(ve,Z,X),n(De,Z,X),E(V.children||[],Z,De,W,re,ne,fe,we)):he>0&&he&64&&Se&&T.dynamicChildren?(M(T.dynamicChildren,Se,Z,W,re,ne,fe),(V.key!=null||W&&V===W.subTree)&&wa(T,V,!0)):K(T,V,Z,De,W,re,ne,fe,we)},_=(T,V,Z,X,W,re,ne,fe,we)=>{V.slotScopeIds=fe,T==null?V.shapeFlag&512?W.ctx.activate(V,Z,X,ne,we):k(V,Z,X,W,re,ne,we):L(T,V,we)},k=(T,V,Z,X,W,re,ne)=>{const fe=T.component=eg(T,X,W);if(Kn(T)&&(fe.ctx.renderer=S),tg(fe,!1,ne),fe.asyncDep){if(W&&W.registerDep(fe,z,ne),!T.el){const we=fe.subTree=le(St);F(null,we,V,Z),T.placeholder=we.el}}else z(fe,T,V,Z,W,re,ne)},L=(T,V,Z)=>{const X=V.component=T.component;if(qm(T,V,Z))if(X.asyncDep&&!X.asyncResolved){q(X,V,Z);return}else X.next=V,X.update();else V.el=T.el,X.vnode=V},z=(T,V,Z,X,W,re,ne)=>{const fe=()=>{if(T.isMounted){let{next:he,bu:Se,u:Ee,parent:ae,vnode:Y}=T;{const st=qc(T);if(st){he&&(he.el=Y.el,q(T,he,ne)),st.asyncDep.then(()=>{T.isUnmounted||fe()});return}}let ue=he,Ae;Oo(T,!1),he?(he.el=Y.el,q(T,he,ne)):he=Y,Se&&wn(Se),(Ae=he.props&&he.props.onVnodeBeforeUpdate)&&oo(Ae,ae,he,Y),Oo(T,!0);const Le=md(T),He=T.subTree;T.subTree=Le,N(He,Le,p(He.el),Q(He),T,W,re),he.el=Le.el,ue===null&&Gm(T,Le.el),Ee&&It(Ee,W),(Ae=he.props&&he.props.onVnodeUpdated)&&It(()=>oo(Ae,ae,he,Y),W)}else{let he;const{el:Se,props:Ee}=V,{bm:ae,m:Y,parent:ue,root:Ae,type:Le}=T,He=ds(V);Oo(T,!1),ae&&wn(ae),!He&&(he=Ee&&Ee.onVnodeBeforeMount)&&oo(he,ue,V),Oo(T,!0);{Ae.ce&&Ae.ce._def.shadowRoot!==!1&&Ae.ce._injectChildStyle(Le);const st=T.subTree=md(T);N(null,st,Z,X,T,W,re),V.el=st.el}if(Y&&It(Y,W),!He&&(he=Ee&&Ee.onVnodeMounted)){const st=V;It(()=>oo(he,ue,st),W)}(V.shapeFlag&256||ue&&ds(ue.vnode)&&ue.vnode.shapeFlag&256)&&T.a&&It(T.a,W),T.isMounted=!0,V=Z=X=null}};T.scope.on();const we=T.effect=new Ju(fe);T.scope.off();const ve=T.update=we.run.bind(we),De=T.job=we.runIfDirty.bind(we);De.i=T,De.id=T.uid,we.scheduler=()=>va(De),Oo(T,!0),ve()},q=(T,V,Z)=>{V.component=T;const X=T.vnode.props;T.vnode=V,T.next=null,Tm(T,V.props,X,Z),Mm(T,V.children,Z),ko(),ed(T),_o()},K=(T,V,Z,X,W,re,ne,fe,we=!1)=>{const ve=T&&T.children,De=T?T.shapeFlag:0,he=V.children,{patchFlag:Se,shapeFlag:Ee}=V;if(Se>0){if(Se&128){O(ve,he,Z,X,W,re,ne,fe,we);return}else if(Se&256){H(ve,he,Z,X,W,re,ne,fe,we);return}}Ee&8?(De&16&&ke(ve,W,re),he!==ve&&u(Z,he)):De&16?Ee&16?O(ve,he,Z,X,W,re,ne,fe,we):ke(ve,W,re,!0):(De&8&&u(Z,""),Ee&16&&E(he,Z,X,W,re,ne,fe,we))},H=(T,V,Z,X,W,re,ne,fe,we)=>{T=T||as,V=V||as;const ve=T.length,De=V.length,he=Math.min(ve,De);let Se;for(Se=0;Se<he;Se++){const Ee=V[Se]=we?Mo(V[Se]):lo(V[Se]);N(T[Se],Ee,Z,null,W,re,ne,fe,we)}ve>De?ke(T,W,re,!0,!1,he):E(V,Z,X,W,re,ne,fe,we,he)},O=(T,V,Z,X,W,re,ne,fe,we)=>{let ve=0;const De=V.length;let he=T.length-1,Se=De-1;for(;ve<=he&&ve<=Se;){const Ee=T[ve],ae=V[ve]=we?Mo(V[ve]):lo(V[ve]);if(Go(Ee,ae))N(Ee,ae,Z,null,W,re,ne,fe,we);else break;ve++}for(;ve<=he&&ve<=Se;){const Ee=T[he],ae=V[Se]=we?Mo(V[Se]):lo(V[Se]);if(Go(Ee,ae))N(Ee,ae,Z,null,W,re,ne,fe,we);else break;he--,Se--}if(ve>he){if(ve<=Se){const Ee=Se+1,ae=Ee<De?V[Ee].el:X;for(;ve<=Se;)N(null,V[ve]=we?Mo(V[ve]):lo(V[ve]),Z,ae,W,re,ne,fe,we),ve++}}else if(ve>Se)for(;ve<=he;)ge(T[ve],W,re,!0),ve++;else{const Ee=ve,ae=ve,Y=new Map;for(ve=ae;ve<=Se;ve++){const kt=V[ve]=we?Mo(V[ve]):lo(V[ve]);kt.key!=null&&Y.set(kt.key,ve)}let ue,Ae=0;const Le=Se-ae+1;let He=!1,st=0;const to=new Array(Le);for(ve=0;ve<Le;ve++)to[ve]=0;for(ve=Ee;ve<=he;ve++){const kt=T[ve];if(Ae>=Le){ge(kt,W,re,!0);continue}let Ut;if(kt.key!=null)Ut=Y.get(kt.key);else for(ue=ae;ue<=Se;ue++)if(to[ue-ae]===0&&Go(kt,V[ue])){Ut=ue;break}Ut===void 0?ge(kt,W,re,!0):(to[Ut-ae]=ve+1,Ut>=st?st=Ut:He=!0,N(kt,V[Ut],Z,null,W,re,ne,fe,we),Ae++)}const Fo=He?jm(to):as;for(ue=Fo.length-1,ve=Le-1;ve>=0;ve--){const kt=ae+ve,Ut=V[kt],ks=V[kt+1],_s=kt+1<De?ks.el||ks.placeholder:X;to[ve]===0?N(null,Ut,Z,_s,W,re,ne,fe,we):He&&(ue<0||ve!==Fo[ue]?ee(Ut,Z,_s,2):ue--)}}},ee=(T,V,Z,X,W=null)=>{const{el:re,type:ne,transition:fe,children:we,shapeFlag:ve}=T;if(ve&6){ee(T.component.subTree,V,Z,X);return}if(ve&128){T.suspense.move(V,Z,X);return}if(ve&64){ne.move(T,V,Z,S);return}if(ne===be){n(re,V,Z);for(let he=0;he<we.length;he++)ee(we[he],V,Z,X);n(T.anchor,V,Z);return}if(ne===_n){C(T,V,Z);return}if(X!==2&&ve&1&&fe)if(X===0)fe.beforeEnter(re),n(re,V,Z),It(()=>fe.enter(re),W);else{const{leave:he,delayLeave:Se,afterLeave:Ee}=fe,ae=()=>{T.ctx.isUnmounted?r(re):n(re,V,Z)},Y=()=>{re._isLeaving&&re[vo](!0),he(re,()=>{ae(),Ee&&Ee()})};Se?Se(re,ae,Y):Y()}else n(re,V,Z)},ge=(T,V,Z,X=!1,W=!1)=>{const{type:re,props:ne,ref:fe,children:we,dynamicChildren:ve,shapeFlag:De,patchFlag:he,dirs:Se,cacheIndex:Ee}=T;if(he===-2&&(W=!1),fe!=null&&(ko(),js(fe,null,Z,T,!0),_o()),Ee!=null&&(V.renderCache[Ee]=void 0),De&256){V.ctx.deactivate(T);return}const ae=De&1&&Se,Y=!ds(T);let ue;if(Y&&(ue=ne&&ne.onVnodeBeforeUnmount)&&oo(ue,V,T),De&6)me(T.component,Z,X);else{if(De&128){T.suspense.unmount(Z,X);return}ae&&Vo(T,null,V,"beforeUnmount"),De&64?T.type.remove(T,V,Z,S,X):ve&&!ve.hasOnce&&(re!==be||he>0&&he&64)?ke(ve,V,Z,!1,!0):(re===be&&he&384||!W&&De&16)&&ke(we,V,Z),X&&de(T)}(Y&&(ue=ne&&ne.onVnodeUnmounted)||ae)&&It(()=>{ue&&oo(ue,V,T),ae&&Vo(T,null,V,"unmounted")},Z)},de=T=>{const{type:V,el:Z,anchor:X,transition:W}=T;if(V===be){ie(Z,X);return}if(V===_n){j(T);return}const re=()=>{r(Z),W&&!W.persisted&&W.afterLeave&&W.afterLeave()};if(T.shapeFlag&1&&W&&!W.persisted){const{leave:ne,delayLeave:fe}=W,we=()=>ne(Z,re);fe?fe(T.el,re,we):we()}else re()},ie=(T,V)=>{let Z;for(;T!==V;)Z=w(T),r(T),T=Z;r(V)},me=(T,V,Z)=>{const{bum:X,scope:W,job:re,subTree:ne,um:fe,m:we,a:ve}=T;pd(we),pd(ve),X&&wn(X),W.stop(),re&&(re.flags|=8,ge(ne,T,V,Z)),fe&&It(fe,V),It(()=>{T.isUnmounted=!0},V)},ke=(T,V,Z,X=!1,W=!1,re=0)=>{for(let ne=re;ne<T.length;ne++)ge(T[ne],V,Z,X,W)},Q=T=>{if(T.shapeFlag&6)return Q(T.component.subTree);if(T.shapeFlag&128)return T.suspense.next();const V=w(T.anchor||T.el),Z=V&&V[hc];return Z?w(Z):V};let D=!1;const x=(T,V,Z)=>{T==null?V._vnode&&ge(V._vnode,null,null,!0):N(V._vnode||null,T,V,null,null,null,Z),V._vnode=T,D||(D=!0,ed(),gc(),D=!1)},S={p:N,um:ge,m:ee,r:de,mt:k,mc:E,pc:K,pbc:M,n:Q,o:t};return{render:x,hydrate:void 0,createApp:Sm(x)}}function hr({type:t,props:o},s){return s==="svg"&&t==="foreignObject"||s==="mathml"&&t==="annotation-xml"&&o&&o.encoding&&o.encoding.includes("html")?void 0:s}function Oo({effect:t,job:o},s){s?(t.flags|=32,o.flags|=4):(t.flags&=-33,o.flags&=-5)}function Nm(t,o){return(!t||t&&!t.pendingBranch)&&o&&!o.persisted}function wa(t,o,s=!1){const n=t.children,r=o.children;if(Pe(n)&&Pe(r))for(let l=0;l<n.length;l++){const a=n[l];let d=r[l];d.shapeFlag&1&&!d.dynamicChildren&&((d.patchFlag<=0||d.patchFlag===32)&&(d=r[l]=Mo(r[l]),d.el=a.el),!s&&d.patchFlag!==-2&&wa(a,d)),d.type===Qn&&d.patchFlag!==-1&&(d.el=a.el),d.type===St&&!d.el&&(d.el=a.el)}}function jm(t){const o=t.slice(),s=[0];let n,r,l,a,d;const i=t.length;for(n=0;n<i;n++){const c=t[n];if(c!==0){if(r=s[s.length-1],t[r]<c){o[n]=r,s.push(n);continue}for(l=0,a=s.length-1;l<a;)d=l+a>>1,t[s[d]]<c?l=d+1:a=d;c<t[s[l]]&&(l>0&&(o[n]=s[l-1]),s[l]=n)}}for(l=s.length,a=s[l-1];l-- >0;)s[l]=a,a=o[a];return s}function qc(t){const o=t.subTree.component;if(o)return o.asyncDep&&!o.asyncResolved?o:qc(o)}function pd(t){if(t)for(let o=0;o<t.length;o++)t[o].flags|=8}const Lm=Symbol.for("v-scx"),Bm=()=>Nt(Lm);function Oe(t,o,s){return Gc(t,o,s)}function Gc(t,o,s=nt){const{immediate:n,deep:r,flush:l,once:a}=s,d=ft({},s),i=o&&n||!o&&l!=="post";let c;if(Ys){if(l==="sync"){const f=Bm();c=f.__watcherHandles||(f.__watcherHandles=[])}else if(!i){const f=()=>{};return f.stop=io,f.resume=io,f.pause=io,f}}const u=Dt;d.call=(f,v,N)=>Zt(f,u,v,N);let p=!1;l==="post"?d.scheduler=f=>{It(f,u&&u.suspense)}:l!=="sync"&&(p=!0,d.scheduler=(f,v)=>{v?f():va(f)}),d.augmentJob=f=>{o&&(f.flags|=4),p&&(f.flags|=2,u&&(f.id=u.uid,f.i=u))};const w=em(t,o,d);return Ys&&(c?c.push(w):i&&w()),w}function Um(t,o,s){const n=this.proxy,r=ut(t)?t.includes(".")?Jc(n,t):()=>n[t]:t.bind(n,n);let l;je(o)?l=o:(l=o.handler,s=o);const a=on(this),d=Gc(r,l.bind(n),s);return a(),d}function Jc(t,o){const s=o.split(".");return()=>{let n=t;for(let r=0;r<s.length&&n;r++)n=n[s[r]];return n}}const Fm=(t,o)=>o==="modelValue"||o==="model-value"?t.modelModifiers:t[`${o}Modifiers`]||t[`${Wt(o)}Modifiers`]||t[`${Bo(o)}Modifiers`];function Vm(t,o,...s){if(t.isUnmounted)return;const n=t.vnode.props||nt;let r=s;const l=o.startsWith("update:"),a=l&&Fm(n,o.slice(7));a&&(a.trim&&(r=s.map(u=>ut(u)?u.trim():u)),a.number&&(r=s.map(En)));let d,i=n[d=ur(o)]||n[d=ur(Wt(o))];!i&&l&&(i=n[d=ur(Bo(o))]),i&&Zt(i,t,6,r);const c=n[d+"Once"];if(c){if(!t.emitted)t.emitted={};else if(t.emitted[d])return;t.emitted[d]=!0,Zt(c,t,6,r)}}const Om=new WeakMap;function Wc(t,o,s=!1){const n=s?Om:o.emitsCache,r=n.get(t);if(r!==void 0)return r;const l=t.emits;let a={},d=!1;if(!je(t)){const i=c=>{const u=Wc(c,o,!0);u&&(d=!0,ft(a,u))};!s&&o.mixins.length&&o.mixins.forEach(i),t.extends&&i(t.extends),t.mixins&&t.mixins.forEach(i)}return!l&&!d?(Qe(t)&&n.set(t,null),null):(Pe(l)?l.forEach(i=>a[i]=null):ft(a,l),Qe(t)&&n.set(t,a),a)}function Zn(t,o){return!t||!Hn(o)?!1:(o=o.slice(2).replace(/Once$/,""),Xe(t,o[0].toLowerCase()+o.slice(1))||Xe(t,Bo(o))||Xe(t,o))}function md(t){const{type:o,vnode:s,proxy:n,withProxy:r,propsOptions:[l],slots:a,attrs:d,emit:i,render:c,renderCache:u,props:p,data:w,setupState:f,ctx:v,inheritAttrs:N}=t,A=Pn(t);let F,I;try{if(s.shapeFlag&4){const j=r||n,$=j;F=lo(c.call($,j,u,p,f,w,v)),I=d}else{const j=o;F=lo(j.length>1?j(p,{attrs:d,slots:a,emit:i}):j(p,null)),I=o.props?d:zm(d)}}catch(j){Us.length=0,Yn(j,t,1),F=le(St)}let C=F;if(I&&N!==!1){const j=Object.keys(I),{shapeFlag:$}=C;j.length&&$&7&&(l&&j.some(ra)&&(I=Hm(I,l)),C=jo(C,I,!1,!0))}return s.dirs&&(C=jo(C,null,!1,!0),C.dirs=C.dirs?C.dirs.concat(s.dirs):s.dirs),s.transition&&es(C,s.transition),F=C,Pn(A),F}const zm=t=>{let o;for(const s in t)(s==="class"||s==="style"||Hn(s))&&((o||(o={}))[s]=t[s]);return o},Hm=(t,o)=>{const s={};for(const n in t)(!ra(n)||!(n.slice(9)in o))&&(s[n]=t[n]);return s};function qm(t,o,s){const{props:n,children:r,component:l}=t,{props:a,children:d,patchFlag:i}=o,c=l.emitsOptions;if(o.dirs||o.transition)return!0;if(s&&i>=0){if(i&1024)return!0;if(i&16)return n?gd(n,a,c):!!a;if(i&8){const u=o.dynamicProps;for(let p=0;p<u.length;p++){const w=u[p];if(a[w]!==n[w]&&!Zn(c,w))return!0}}}else return(r||d)&&(!d||!d.$stable)?!0:n===a?!1:n?a?gd(n,a,c):!0:!!a;return!1}function gd(t,o,s){const n=Object.keys(o);if(n.length!==Object.keys(t).length)return!0;for(let r=0;r<n.length;r++){const l=n[r];if(o[l]!==t[l]&&!Zn(s,l))return!0}return!1}function Gm({vnode:t,parent:o},s){for(;o;){const n=o.subTree;if(n.suspense&&n.suspense.activeBranch===t&&(n.el=t.el),n===t)(t=o.vnode).el=s,o=o.parent;else break}}const Yc=t=>t.__isSuspense;function Jm(t,o){o&&o.pendingBranch?Pe(t)?o.effects.push(...t):o.effects.push(t):sm(t)}const be=Symbol.for("v-fgt"),Qn=Symbol.for("v-txt"),St=Symbol.for("v-cmt"),_n=Symbol.for("v-stc"),Us=[];let Ft=null;function m(t=!1){Us.push(Ft=t?null:[])}function Wm(){Us.pop(),Ft=Us[Us.length-1]||null}let Js=1;function Bn(t,o=!1){Js+=t,t<0&&Ft&&o&&(Ft.hasOnce=!0)}function Kc(t){return t.dynamicChildren=Js>0?Ft||as:null,Wm(),Js>0&&Ft&&Ft.push(t),t}function g(t,o,s,n,r,l){return Kc(e(t,o,s,n,r,l,!0))}function Ne(t,o,s,n,r){return Kc(le(t,o,s,n,r,!0))}function Ws(t){return t?t.__v_isVNode===!0:!1}function Go(t,o){return t.type===o.type&&t.key===o.key}const Xc=({key:t})=>t??null,$n=({ref:t,ref_key:o,ref_for:s})=>(typeof t=="number"&&(t=""+t),t!=null?ut(t)||dt(t)||je(t)?{i:bt,r:t,k:o,f:!!s}:t:null);function e(t,o=null,s=null,n=0,r=null,l=t===be?0:1,a=!1,d=!1){const i={__v_isVNode:!0,__v_skip:!0,type:t,props:o,key:o&&Xc(o),ref:o&&$n(o),scopeId:vc,slotScopeIds:null,children:s,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:l,patchFlag:n,dynamicProps:r,dynamicChildren:null,appContext:null,ctx:bt};return d?(ka(i,s),l&128&&t.normalize(i)):s&&(i.shapeFlag|=ut(s)?8:16),Js>0&&!a&&Ft&&(i.patchFlag>0||l&6)&&i.patchFlag!==32&&Ft.push(i),i}const le=Ym;function Ym(t,o=null,s=null,n=0,r=null,l=!1){if((!t||t===Ic)&&(t=St),Ws(t)){const d=jo(t,o,!0);return s&&ka(d,s),Js>0&&!l&&Ft&&(d.shapeFlag&6?Ft[Ft.indexOf(t)]=d:Ft.push(d)),d.patchFlag=-2,d}if(rg(t)&&(t=t.__vccOpts),o){o=Km(o);let{class:d,style:i}=o;d&&!ut(d)&&(o.class=se(d)),Qe(i)&&(fa(i)&&!Pe(i)&&(i=ft({},i)),o.style=Vt(i))}const a=ut(t)?1:Yc(t)?128:yc(t)?64:Qe(t)?4:je(t)?2:0;return e(t,o,s,n,r,a,l,!0)}function Km(t){return t?fa(t)||Uc(t)?ft({},t):t:null}function jo(t,o,s=!1,n=!1){const{props:r,ref:l,patchFlag:a,children:d,transition:i}=t,c=o?Xm(r||{},o):r,u={__v_isVNode:!0,__v_skip:!0,type:t.type,props:c,key:c&&Xc(c),ref:o&&o.ref?s&&l?Pe(l)?l.concat($n(o)):[l,$n(o)]:$n(o):l,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:d,target:t.target,targetStart:t.targetStart,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:o&&t.type!==be?a===-1?16:a|16:a,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:i,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&jo(t.ssContent),ssFallback:t.ssFallback&&jo(t.ssFallback),placeholder:t.placeholder,el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce};return i&&n&&es(u,i.clone(u)),u}function te(t=" ",o=0){return le(Qn,null,t,o)}function Ce(t,o){const s=le(_n,null,t);return s.staticCount=o,s}function J(t="",o=!1){return o?(m(),Ne(St,null,t)):le(St,null,t)}function lo(t){return t==null||typeof t=="boolean"?le(St):Pe(t)?le(be,null,t.slice()):Ws(t)?Mo(t):le(Qn,null,String(t))}function Mo(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:jo(t)}function ka(t,o){let s=0;const{shapeFlag:n}=t;if(o==null)o=null;else if(Pe(o))s=16;else if(typeof o=="object")if(n&65){const r=o.default;r&&(r._c&&(r._d=!1),ka(t,r()),r._c&&(r._d=!0));return}else{s=32;const r=o._;!r&&!Uc(o)?o._ctx=bt:r===3&&bt&&(bt.slots._===1?o._=1:(o._=2,t.patchFlag|=1024))}else je(o)?(o={default:o,_ctx:bt},s=32):(o=String(o),n&64?(s=16,o=[te(o)]):s=8);t.children=o,t.shapeFlag|=s}function Xm(...t){const o={};for(let s=0;s<t.length;s++){const n=t[s];for(const r in n)if(r==="class")o.class!==n.class&&(o.class=se([o.class,n.class]));else if(r==="style")o.style=Vt([o.style,n.style]);else if(Hn(r)){const l=o[r],a=n[r];a&&l!==a&&!(Pe(l)&&l.includes(a))&&(o[r]=l?[].concat(l,a):a)}else r!==""&&(o[r]=n[r])}return o}function oo(t,o,s,n=null){Zt(t,o,7,[s,n])}const Zm=jc();let Qm=0;function eg(t,o,s){const n=t.type,r=(o?o.appContext:t.appContext)||Zm,l={uid:Qm++,vnode:t,type:n,parent:o,appContext:r,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new Hu(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:o?o.provides:Object.create(r.provides),ids:o?o.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Vc(n,r),emitsOptions:Wc(n,r),emit:null,emitted:null,propsDefaults:nt,inheritAttrs:n.inheritAttrs,ctx:nt,data:nt,props:nt,attrs:nt,slots:nt,refs:nt,setupState:nt,setupContext:null,suspense:s,suspenseId:s?s.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return l.ctx={_:l},l.root=o?o.root:l,l.emit=Vm.bind(null,l),t.ce&&t.ce(l),l}let Dt=null;const tn=()=>Dt||bt;let Un,Vr;{const t=Jn(),o=(s,n)=>{let r;return(r=t[s])||(r=t[s]=[]),r.push(n),l=>{r.length>1?r.forEach(a=>a(l)):r[0](l)}};Un=o("__VUE_INSTANCE_SETTERS__",s=>Dt=s),Vr=o("__VUE_SSR_SETTERS__",s=>Ys=s)}const on=t=>{const o=Dt;return Un(t),t.scope.on(),()=>{t.scope.off(),Un(o)}},fd=()=>{Dt&&Dt.scope.off(),Un(null)};function Zc(t){return t.vnode.shapeFlag&4}let Ys=!1;function tg(t,o=!1,s=!1){o&&Vr(o);const{props:n,children:r}=t.vnode,l=Zc(t);Cm(t,n,l,o),Im(t,r,s||o);const a=l?og(t,o):void 0;return o&&Vr(!1),a}function og(t,o){const s=t.type;t.accessCache=Object.create(null),t.proxy=new Proxy(t.ctx,vm);const{setup:n}=s;if(n){ko();const r=t.setupContext=n.length>1?e0(t):null,l=on(t),a=en(n,t,0,[t.props,r]),d=Lu(a);if(_o(),l(),(d||t.sp)&&!ds(t)&&Cc(t),d){if(a.then(fd,fd),o)return a.then(i=>{vd(t,i)}).catch(i=>{Yn(i,t,0)});t.asyncDep=a}else vd(t,a)}else Qc(t)}function vd(t,o,s){je(o)?t.type.__ssrInlineRender?t.ssrRender=o:t.render=o:Qe(o)&&(t.setupState=dc(o)),Qc(t)}function Qc(t,o,s){const n=t.type;t.render||(t.render=n.render||io);{const r=on(t);ko();try{xm(t)}finally{_o(),r()}}}const sg={get(t,o){return $t(t,"get",""),t[o]}};function e0(t){const o=s=>{t.exposed=s||{}};return{attrs:new Proxy(t.attrs,sg),slots:t.slots,emit:t.emit,expose:o}}function er(t){return t.exposed?t.exposeProxy||(t.exposeProxy=new Proxy(dc(Jo(t.exposed)),{get(o,s){if(s in o)return o[s];if(s in Ls)return Ls[s](t)},has(o,s){return s in o||s in Ls}})):t.proxy}function ng(t,o=!0){return je(t)?t.displayName||t.name:t.name||o&&t.__name}function rg(t){return je(t)&&"__vccOpts"in t}const oe=(t,o)=>Zp(t,o,Ys);function qt(t,o,s){try{Bn(-1);const n=arguments.length;return n===2?Qe(o)&&!Pe(o)?Ws(o)?le(t,null,[o]):le(t,o):le(t,null,o):(n>3?s=Array.prototype.slice.call(arguments,2):n===3&&Ws(s)&&(s=[s]),le(t,o,s))}finally{Bn(1)}}const ag="3.5.22";/**
* @vue/runtime-dom v3.5.22
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Or;const hd=typeof window<"u"&&window.trustedTypes;if(hd)try{Or=hd.createPolicy("vue",{createHTML:t=>t})}catch{}const t0=Or?t=>Or.createHTML(t):t=>t,lg="http://www.w3.org/2000/svg",ig="http://www.w3.org/1998/Math/MathML",fo=typeof document<"u"?document:null,yd=fo&&fo.createElement("template"),dg={insert:(t,o,s)=>{o.insertBefore(t,s||null)},remove:t=>{const o=t.parentNode;o&&o.removeChild(t)},createElement:(t,o,s,n)=>{const r=o==="svg"?fo.createElementNS(lg,t):o==="mathml"?fo.createElementNS(ig,t):s?fo.createElement(t,{is:s}):fo.createElement(t);return t==="select"&&n&&n.multiple!=null&&r.setAttribute("multiple",n.multiple),r},createText:t=>fo.createTextNode(t),createComment:t=>fo.createComment(t),setText:(t,o)=>{t.nodeValue=o},setElementText:(t,o)=>{t.textContent=o},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>fo.querySelector(t),setScopeId(t,o){t.setAttribute(o,"")},insertStaticContent(t,o,s,n,r,l){const a=s?s.previousSibling:o.lastChild;if(r&&(r===l||r.nextSibling))for(;o.insertBefore(r.cloneNode(!0),s),!(r===l||!(r=r.nextSibling)););else{yd.innerHTML=t0(n==="svg"?`<svg>${t}</svg>`:n==="mathml"?`<math>${t}</math>`:t);const d=yd.content;if(n==="svg"||n==="mathml"){const i=d.firstChild;for(;i.firstChild;)d.appendChild(i.firstChild);d.removeChild(i)}o.insertBefore(d,s)}return[a?a.nextSibling:o.firstChild,s?s.previousSibling:o.lastChild]}},So="transition",Ss="animation",ps=Symbol("_vtc"),o0={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},s0=ft({},kc,o0),ug=t=>(t.displayName="Transition",t.props=s0,t),mt=ug((t,{slots:o})=>qt(am,n0(t),o)),zo=(t,o=[])=>{Pe(t)?t.forEach(s=>s(...o)):t&&t(...o)},xd=t=>t?Pe(t)?t.some(o=>o.length>1):t.length>1:!1;function n0(t){const o={};for(const U in t)U in o0||(o[U]=t[U]);if(t.css===!1)return o;const{name:s="v",type:n,duration:r,enterFromClass:l=`${s}-enter-from`,enterActiveClass:a=`${s}-enter-active`,enterToClass:d=`${s}-enter-to`,appearFromClass:i=l,appearActiveClass:c=a,appearToClass:u=d,leaveFromClass:p=`${s}-leave-from`,leaveActiveClass:w=`${s}-leave-active`,leaveToClass:f=`${s}-leave-to`}=t,v=cg(r),N=v&&v[0],A=v&&v[1],{onBeforeEnter:F,onEnter:I,onEnterCancelled:C,onLeave:j,onLeaveCancelled:$,onBeforeAppear:y=F,onAppear:b=I,onAppearCancelled:E=C}=o,R=(U,_,k,L)=>{U._enterCancelled=L,To(U,_?u:d),To(U,_?c:a),k&&k()},M=(U,_)=>{U._isLeaving=!1,To(U,p),To(U,f),To(U,w),_&&_()},G=U=>(_,k)=>{const L=U?b:I,z=()=>R(_,U,k);zo(L,[_,z]),bd(()=>{To(_,U?i:l),no(_,U?u:d),xd(L)||wd(_,n,N,z)})};return ft(o,{onBeforeEnter(U){zo(F,[U]),no(U,l),no(U,a)},onBeforeAppear(U){zo(y,[U]),no(U,i),no(U,c)},onEnter:G(!1),onAppear:G(!0),onLeave(U,_){U._isLeaving=!0;const k=()=>M(U,_);no(U,p),U._enterCancelled?(no(U,w),zr(U)):(zr(U),no(U,w)),bd(()=>{U._isLeaving&&(To(U,p),no(U,f),xd(j)||wd(U,n,A,k))}),zo(j,[U,k])},onEnterCancelled(U){R(U,!1,void 0,!0),zo(C,[U])},onAppearCancelled(U){R(U,!0,void 0,!0),zo(E,[U])},onLeaveCancelled(U){M(U),zo($,[U])}})}function cg(t){if(t==null)return null;if(Qe(t))return[yr(t.enter),yr(t.leave)];{const o=yr(t);return[o,o]}}function yr(t){return hp(t)}function no(t,o){o.split(/\s+/).forEach(s=>s&&t.classList.add(s)),(t[ps]||(t[ps]=new Set)).add(o)}function To(t,o){o.split(/\s+/).forEach(n=>n&&t.classList.remove(n));const s=t[ps];s&&(s.delete(o),s.size||(t[ps]=void 0))}function bd(t){requestAnimationFrame(()=>{requestAnimationFrame(t)})}let pg=0;function wd(t,o,s,n){const r=t._endId=++pg,l=()=>{r===t._endId&&n()};if(s!=null)return setTimeout(l,s);const{type:a,timeout:d,propCount:i}=r0(t,o);if(!a)return n();const c=a+"end";let u=0;const p=()=>{t.removeEventListener(c,w),l()},w=f=>{f.target===t&&++u>=i&&p()};setTimeout(()=>{u<i&&p()},d+1),t.addEventListener(c,w)}function r0(t,o){const s=window.getComputedStyle(t),n=v=>(s[v]||"").split(", "),r=n(`${So}Delay`),l=n(`${So}Duration`),a=kd(r,l),d=n(`${Ss}Delay`),i=n(`${Ss}Duration`),c=kd(d,i);let u=null,p=0,w=0;o===So?a>0&&(u=So,p=a,w=l.length):o===Ss?c>0&&(u=Ss,p=c,w=i.length):(p=Math.max(a,c),u=p>0?a>c?So:Ss:null,w=u?u===So?l.length:i.length:0);const f=u===So&&/\b(?:transform|all)(?:,|$)/.test(n(`${So}Property`).toString());return{type:u,timeout:p,propCount:w,hasTransform:f}}function kd(t,o){for(;t.length<o.length;)t=t.concat(t);return Math.max(...o.map((s,n)=>_d(s)+_d(t[n])))}function _d(t){return t==="auto"?0:Number(t.slice(0,-1).replace(",","."))*1e3}function zr(t){return(t?t.ownerDocument:document).body.offsetHeight}function mg(t,o,s){const n=t[ps];n&&(o=(o?[o,...n]:[...n]).join(" ")),o==null?t.removeAttribute("class"):s?t.setAttribute("class",o):t.className=o}const Fn=Symbol("_vod"),a0=Symbol("_vsh"),us={name:"show",beforeMount(t,{value:o},{transition:s}){t[Fn]=t.style.display==="none"?"":t.style.display,s&&o?s.beforeEnter(t):Ds(t,o)},mounted(t,{value:o},{transition:s}){s&&o&&s.enter(t)},updated(t,{value:o,oldValue:s},{transition:n}){!o!=!s&&(n?o?(n.beforeEnter(t),Ds(t,!0),n.enter(t)):n.leave(t,()=>{Ds(t,!1)}):Ds(t,o))},beforeUnmount(t,{value:o}){Ds(t,o)}};function Ds(t,o){t.style.display=o?t[Fn]:"none",t[a0]=!o}const gg=Symbol(""),fg=/(?:^|;)\s*display\s*:/;function vg(t,o,s){const n=t.style,r=ut(s);let l=!1;if(s&&!r){if(o)if(ut(o))for(const a of o.split(";")){const d=a.slice(0,a.indexOf(":")).trim();s[d]==null&&Sn(n,d,"")}else for(const a in o)s[a]==null&&Sn(n,a,"");for(const a in s)a==="display"&&(l=!0),Sn(n,a,s[a])}else if(r){if(o!==s){const a=n[gg];a&&(s+=";"+a),n.cssText=s,l=fg.test(s)}}else o&&t.removeAttribute("style");Fn in t&&(t[Fn]=l?n.display:"",t[a0]&&(n.display="none"))}const $d=/\s*!important$/;function Sn(t,o,s){if(Pe(s))s.forEach(n=>Sn(t,o,n));else if(s==null&&(s=""),o.startsWith("--"))t.setProperty(o,s);else{const n=hg(t,o);$d.test(s)?t.setProperty(Bo(n),s.replace($d,""),"important"):t[n]=s}}const Sd=["Webkit","Moz","ms"],xr={};function hg(t,o){const s=xr[o];if(s)return s;let n=Wt(o);if(n!=="filter"&&n in t)return xr[o]=n;n=Gn(n);for(let r=0;r<Sd.length;r++){const l=Sd[r]+n;if(l in t)return xr[o]=l}return o}const Dd="http://www.w3.org/1999/xlink";function Cd(t,o,s,n,r,l=_p(o)){n&&o.startsWith("xlink:")?s==null?t.removeAttributeNS(Dd,o.slice(6,o.length)):t.setAttributeNS(Dd,o,s):s==null||l&&!Vu(s)?t.removeAttribute(o):t.setAttribute(o,l?"":Xt(s)?String(s):s)}function Td(t,o,s,n,r){if(o==="innerHTML"||o==="textContent"){s!=null&&(t[o]=o==="innerHTML"?t0(s):s);return}const l=t.tagName;if(o==="value"&&l!=="PROGRESS"&&!l.includes("-")){const d=l==="OPTION"?t.getAttribute("value")||"":t.value,i=s==null?t.type==="checkbox"?"on":"":String(s);(d!==i||!("_value"in t))&&(t.value=i),s==null&&t.removeAttribute(o),t._value=s;return}let a=!1;if(s===""||s==null){const d=typeof t[o];d==="boolean"?s=Vu(s):s==null&&d==="string"?(s="",a=!0):d==="number"&&(s=0,a=!0)}try{t[o]=s}catch{}a&&t.removeAttribute(r||o)}function bo(t,o,s,n){t.addEventListener(o,s,n)}function yg(t,o,s,n){t.removeEventListener(o,s,n)}const Ed=Symbol("_vei");function xg(t,o,s,n,r=null){const l=t[Ed]||(t[Ed]={}),a=l[o];if(n&&a)a.value=n;else{const[d,i]=bg(o);if(n){const c=l[o]=_g(n,r);bo(t,d,c,i)}else a&&(yg(t,d,a,i),l[o]=void 0)}}const Ad=/(?:Once|Passive|Capture)$/;function bg(t){let o;if(Ad.test(t)){o={};let n;for(;n=t.match(Ad);)t=t.slice(0,t.length-n[0].length),o[n[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):Bo(t.slice(2)),o]}let br=0;const wg=Promise.resolve(),kg=()=>br||(wg.then(()=>br=0),br=Date.now());function _g(t,o){const s=n=>{if(!n._vts)n._vts=Date.now();else if(n._vts<=s.attached)return;Zt($g(n,s.value),o,5,[n])};return s.value=t,s.attached=kg(),s}function $g(t,o){if(Pe(o)){const s=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{s.call(t),t._stopped=!0},o.map(n=>r=>!r._stopped&&n&&n(r))}else return o}const Id=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)>96&&t.charCodeAt(2)<123,Sg=(t,o,s,n,r,l)=>{const a=r==="svg";o==="class"?mg(t,n,a):o==="style"?vg(t,s,n):Hn(o)?ra(o)||xg(t,o,s,n,l):(o[0]==="."?(o=o.slice(1),!0):o[0]==="^"?(o=o.slice(1),!1):Dg(t,o,n,a))?(Td(t,o,n),!t.tagName.includes("-")&&(o==="value"||o==="checked"||o==="selected")&&Cd(t,o,n,a,l,o!=="value")):t._isVueCE&&(/[A-Z]/.test(o)||!ut(n))?Td(t,Wt(o),n,l,o):(o==="true-value"?t._trueValue=n:o==="false-value"&&(t._falseValue=n),Cd(t,o,n,a))};function Dg(t,o,s,n){if(n)return!!(o==="innerHTML"||o==="textContent"||o in t&&Id(o)&&je(s));if(o==="spellcheck"||o==="draggable"||o==="translate"||o==="autocorrect"||o==="form"||o==="list"&&t.tagName==="INPUT"||o==="type"&&t.tagName==="TEXTAREA")return!1;if(o==="width"||o==="height"){const r=t.tagName;if(r==="IMG"||r==="VIDEO"||r==="CANVAS"||r==="SOURCE")return!1}return Id(o)&&ut(s)?!1:o in t}const l0=new WeakMap,i0=new WeakMap,Vn=Symbol("_moveCb"),Md=Symbol("_enterCb"),Cg=t=>(delete t.props.mode,t),Tg=Cg({name:"TransitionGroup",props:ft({},s0,{tag:String,moveClass:String}),setup(t,{slots:o}){const s=tn(),n=wc();let r,l;return Ec(()=>{if(!r.length)return;const a=t.moveClass||`${t.name||"v"}-move`;if(!Rg(r[0].el,s.vnode.el,a)){r=[];return}r.forEach(Ag),r.forEach(Ig);const d=r.filter(Mg);zr(s.vnode.el),d.forEach(i=>{const c=i.el,u=c.style;no(c,a),u.transform=u.webkitTransform=u.transitionDuration="";const p=c[Vn]=w=>{w&&w.target!==c||(!w||w.propertyName.endsWith("transform"))&&(c.removeEventListener("transitionend",p),c[Vn]=null,To(c,a))};c.addEventListener("transitionend",p)}),r=[]}),()=>{const a=ze(t),d=n0(a);let i=a.tag||be;if(r=[],l)for(let c=0;c<l.length;c++){const u=l[c];u.el&&u.el instanceof Element&&(r.push(u),es(u,Gs(u,d,n,s)),l0.set(u,u.el.getBoundingClientRect()))}l=o.default?ha(o.default()):[];for(let c=0;c<l.length;c++){const u=l[c];u.key!=null&&es(u,Gs(u,d,n,s))}return le(i,null,l)}}}),Eg=Tg;function Ag(t){const o=t.el;o[Vn]&&o[Vn](),o[Md]&&o[Md]()}function Ig(t){i0.set(t,t.el.getBoundingClientRect())}function Mg(t){const o=l0.get(t),s=i0.get(t),n=o.left-s.left,r=o.top-s.top;if(n||r){const l=t.el.style;return l.transform=l.webkitTransform=`translate(${n}px,${r}px)`,l.transitionDuration="0s",t}}function Rg(t,o,s){const n=t.cloneNode(),r=t[ps];r&&r.forEach(d=>{d.split(/\s+/).forEach(i=>i&&n.classList.remove(i))}),s.split(/\s+/).forEach(d=>d&&n.classList.add(d)),n.style.display="none";const l=o.nodeType===1?o:o.parentNode;l.appendChild(n);const{hasTransform:a}=r0(n);return l.removeChild(n),a}const Lo=t=>{const o=t.props["onUpdate:modelValue"]||!1;return Pe(o)?s=>wn(o,s):o};function Pg(t){t.target.composing=!0}function Rd(t){const o=t.target;o.composing&&(o.composing=!1,o.dispatchEvent(new Event("input")))}const Jt=Symbol("_assign"),_e={created(t,{modifiers:{lazy:o,trim:s,number:n}},r){t[Jt]=Lo(r);const l=n||r.props&&r.props.type==="number";bo(t,o?"change":"input",a=>{if(a.target.composing)return;let d=t.value;s&&(d=d.trim()),l&&(d=En(d)),t[Jt](d)}),s&&bo(t,"change",()=>{t.value=t.value.trim()}),o||(bo(t,"compositionstart",Pg),bo(t,"compositionend",Rd),bo(t,"change",Rd))},mounted(t,{value:o}){t.value=o??""},beforeUpdate(t,{value:o,oldValue:s,modifiers:{lazy:n,trim:r,number:l}},a){if(t[Jt]=Lo(a),t.composing)return;const d=(l||t.type==="number")&&!/^0\d/.test(t.value)?En(t.value):t.value,i=o??"";d!==i&&(document.activeElement===t&&t.type!=="range"&&(n&&o===s||r&&t.value.trim()===i)||(t.value=i))}},ct={deep:!0,created(t,o,s){t[Jt]=Lo(s),bo(t,"change",()=>{const n=t._modelValue,r=ms(t),l=t.checked,a=t[Jt];if(Pe(n)){const d=ia(n,r),i=d!==-1;if(l&&!i)a(n.concat(r));else if(!l&&i){const c=[...n];c.splice(d,1),a(c)}}else if(xs(n)){const d=new Set(n);l?d.add(r):d.delete(r),a(d)}else a(d0(t,l))})},mounted:Pd,beforeUpdate(t,o,s){t[Jt]=Lo(s),Pd(t,o,s)}};function Pd(t,{value:o,oldValue:s},n){t._modelValue=o;let r;if(Pe(o))r=ia(o,n.props.value)>-1;else if(xs(o))r=o.has(n.props.value);else{if(o===s)return;r=Zo(o,d0(t,!0))}t.checked!==r&&(t.checked=r)}const cs={created(t,{value:o},s){t.checked=Zo(o,s.props.value),t[Jt]=Lo(s),bo(t,"change",()=>{t[Jt](ms(t))})},beforeUpdate(t,{value:o,oldValue:s},n){t[Jt]=Lo(n),o!==s&&(t.checked=Zo(o,n.props.value))}},Re={deep:!0,created(t,{value:o,modifiers:{number:s}},n){const r=xs(o);bo(t,"change",()=>{const l=Array.prototype.filter.call(t.options,a=>a.selected).map(a=>s?En(ms(a)):ms(a));t[Jt](t.multiple?r?new Set(l):l:l[0]),t._assigning=!0,Qo(()=>{t._assigning=!1})}),t[Jt]=Lo(n)},mounted(t,{value:o}){Nd(t,o)},beforeUpdate(t,o,s){t[Jt]=Lo(s)},updated(t,{value:o}){t._assigning||Nd(t,o)}};function Nd(t,o){const s=t.multiple,n=Pe(o);if(!(s&&!n&&!xs(o))){for(let r=0,l=t.options.length;r<l;r++){const a=t.options[r],d=ms(a);if(s)if(n){const i=typeof d;i==="string"||i==="number"?a.selected=o.some(c=>String(c)===String(d)):a.selected=ia(o,d)>-1}else a.selected=o.has(d);else if(Zo(ms(a),o)){t.selectedIndex!==r&&(t.selectedIndex=r);return}}!s&&t.selectedIndex!==-1&&(t.selectedIndex=-1)}}function ms(t){return"_value"in t?t._value:t.value}function d0(t,o){const s=o?"_trueValue":"_falseValue";return s in t?t[s]:o}const Ng=["ctrl","shift","alt","meta"],jg={stop:t=>t.stopPropagation(),prevent:t=>t.preventDefault(),self:t=>t.target!==t.currentTarget,ctrl:t=>!t.ctrlKey,shift:t=>!t.shiftKey,alt:t=>!t.altKey,meta:t=>!t.metaKey,left:t=>"button"in t&&t.button!==0,middle:t=>"button"in t&&t.button!==1,right:t=>"button"in t&&t.button!==2,exact:(t,o)=>Ng.some(s=>t[`${s}Key`]&&!o.includes(s))},qe=(t,o)=>{const s=t._withMods||(t._withMods={}),n=o.join(".");return s[n]||(s[n]=((r,...l)=>{for(let a=0;a<o.length;a++){const d=jg[o[a]];if(d&&d(r,o))return}return t(r,...l)}))},Lg={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},Xse=(t,o)=>{const s=t._withKeys||(t._withKeys={}),n=o.join(".");return s[n]||(s[n]=(r=>{if(!("key"in r))return;const l=Bo(r.key);if(o.some(a=>a===l||Lg[a]===l))return t(r)}))},Bg=ft({patchProp:Sg},dg);let jd;function Ug(){return jd||(jd=Rm(Bg))}const Fg=((...t)=>{const o=Ug().createApp(...t),{mount:s}=o;return o.mount=n=>{const r=Og(n);if(!r)return;const l=o._component;!je(l)&&!l.render&&!l.template&&(l.template=r.innerHTML),r.nodeType===1&&(r.textContent="");const a=s(r,!1,Vg(r));return r instanceof Element&&(r.removeAttribute("v-cloak"),r.setAttribute("data-v-app","")),a},o});function Vg(t){if(t instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&t instanceof MathMLElement)return"mathml"}function Og(t){return ut(t)?document.querySelector(t):t}/*!
 * pinia v3.0.3
 * (c) 2025 Eduardo San Martin Morote
 * @license MIT
 */let u0;const tr=t=>u0=t,c0=Symbol();function Hr(t){return t&&typeof t=="object"&&Object.prototype.toString.call(t)==="[object Object]"&&typeof t.toJSON!="function"}var Fs;(function(t){t.direct="direct",t.patchObject="patch object",t.patchFunction="patch function"})(Fs||(Fs={}));function zg(){const t=qu(!0),o=t.run(()=>B({}));let s=[],n=[];const r=Jo({install(l){tr(r),r._a=l,l.provide(c0,r),l.config.globalProperties.$pinia=r,n.forEach(a=>s.push(a)),n=[]},use(l){return this._a?s.push(l):n.push(l),this},_p:s,_a:null,_e:t,_s:new Map,state:o});return r}const p0=()=>{};function Ld(t,o,s,n=p0){t.push(o);const r=()=>{const l=t.indexOf(o);l>-1&&(t.splice(l,1),n())};return!s&&Gu()&&Sp(r),r}function ss(t,...o){t.slice().forEach(s=>{s(...o)})}const Hg=t=>t(),Bd=Symbol(),wr=Symbol();function qr(t,o){t instanceof Map&&o instanceof Map?o.forEach((s,n)=>t.set(n,s)):t instanceof Set&&o instanceof Set&&o.forEach(t.add,t);for(const s in o){if(!o.hasOwnProperty(s))continue;const n=o[s],r=t[s];Hr(r)&&Hr(n)&&t.hasOwnProperty(s)&&!dt(n)&&!wo(n)?t[s]=qr(r,n):t[s]=n}return t}const qg=Symbol();function Gg(t){return!Hr(t)||!Object.prototype.hasOwnProperty.call(t,qg)}const{assign:Eo}=Object;function Jg(t){return!!(dt(t)&&t.effect)}function Wg(t,o,s,n){const{state:r,actions:l,getters:a}=o,d=s.state.value[t];let i;function c(){d||(s.state.value[t]=r?r():{});const u=uc(s.state.value[t]);return Eo(u,l,Object.keys(a||{}).reduce((p,w)=>(p[w]=Jo(oe(()=>{tr(s);const f=s._s.get(t);return a[w].call(f,f)})),p),{}))}return i=m0(t,c,o,s,n,!0),i}function m0(t,o,s={},n,r,l){let a;const d=Eo({actions:{}},s),i={deep:!0};let c,u,p=[],w=[],f;const v=n.state.value[t];!l&&!v&&(n.state.value[t]={}),B({});let N;function A(E){let R;c=u=!1,typeof E=="function"?(E(n.state.value[t]),R={type:Fs.patchFunction,storeId:t,events:f}):(qr(n.state.value[t],E),R={type:Fs.patchObject,payload:E,storeId:t,events:f});const M=N=Symbol();Qo().then(()=>{N===M&&(c=!0)}),u=!0,ss(p,R,n.state.value[t])}const F=l?function(){const{state:R}=s,M=R?R():{};this.$patch(G=>{Eo(G,M)})}:p0;function I(){a.stop(),p=[],w=[],n._s.delete(t)}const C=(E,R="")=>{if(Bd in E)return E[wr]=R,E;const M=function(){tr(n);const G=Array.from(arguments),U=[],_=[];function k(q){U.push(q)}function L(q){_.push(q)}ss(w,{args:G,name:M[wr],store:$,after:k,onError:L});let z;try{z=E.apply(this&&this.$id===t?this:$,G)}catch(q){throw ss(_,q),q}return z instanceof Promise?z.then(q=>(ss(U,q),q)).catch(q=>(ss(_,q),Promise.reject(q))):(ss(U,z),z)};return M[Bd]=!0,M[wr]=R,M},j={_p:n,$id:t,$onAction:Ld.bind(null,w),$patch:A,$reset:F,$subscribe(E,R={}){const M=Ld(p,E,R.detached,()=>G()),G=a.run(()=>Oe(()=>n.state.value[t],U=>{(R.flush==="sync"?u:c)&&E({storeId:t,type:Fs.direct,events:f},U)},Eo({},i,R)));return M},$dispose:I},$=Je(j);n._s.set(t,$);const b=(n._a&&n._a.runWithContext||Hg)(()=>n._e.run(()=>(a=qu()).run(()=>o({action:C}))));for(const E in b){const R=b[E];if(dt(R)&&!Jg(R)||wo(R))l||(v&&Gg(R)&&(dt(R)?R.value=v[E]:qr(R,v[E])),n.state.value[t][E]=R);else if(typeof R=="function"){const M=C(R,E);b[E]=M,d.actions[E]=R}}return Eo($,b),Eo(ze($),b),Object.defineProperty($,"$state",{get:()=>n.state.value[t],set:E=>{A(R=>{Eo(R,E)})}}),n._p.forEach(E=>{Eo($,a.run(()=>E({store:$,app:n._a,pinia:n,options:d})))}),v&&l&&s.hydrate&&s.hydrate($.$state,v),c=!0,u=!0,$}/*! #__NO_SIDE_EFFECTS__ */function Uo(t,o,s){let n;const r=typeof o=="function";n=r?s:o;function l(a,d){const i=Dm();return a=a||(i?Nt(c0,null):null),a&&tr(a),a=u0,a._s.has(t)||(r?m0(t,o,n,a):Wg(t,n,a)),a._s.get(t)}return l.$id=t,l}function Yg(t){const o=ze(t),s={};for(const n in o){const r=o[n];r.effect?s[n]=oe({get:()=>t[n],set(l){t[n]=l}}):(dt(r)||wo(r))&&(s[n]=Kp(t,n))}return s}/*!
  * vue-router v4.5.1
  * (c) 2025 Eduardo San Martin Morote
  * @license MIT
  */const rs=typeof document<"u";function g0(t){return typeof t=="object"||"displayName"in t||"props"in t||"__vccOpts"in t}function Kg(t){return t.__esModule||t[Symbol.toStringTag]==="Module"||t.default&&g0(t.default)}const Ke=Object.assign;function kr(t,o){const s={};for(const n in o){const r=o[n];s[n]=Qt(r)?r.map(t):t(r)}return s}const Vs=()=>{},Qt=Array.isArray,f0=/#/g,Xg=/&/g,Zg=/\//g,Qg=/=/g,ef=/\?/g,v0=/\+/g,tf=/%5B/g,of=/%5D/g,h0=/%5E/g,sf=/%60/g,y0=/%7B/g,nf=/%7C/g,x0=/%7D/g,rf=/%20/g;function _a(t){return encodeURI(""+t).replace(nf,"|").replace(tf,"[").replace(of,"]")}function af(t){return _a(t).replace(y0,"{").replace(x0,"}").replace(h0,"^")}function Gr(t){return _a(t).replace(v0,"%2B").replace(rf,"+").replace(f0,"%23").replace(Xg,"%26").replace(sf,"`").replace(y0,"{").replace(x0,"}").replace(h0,"^")}function lf(t){return Gr(t).replace(Qg,"%3D")}function df(t){return _a(t).replace(f0,"%23").replace(ef,"%3F")}function uf(t){return t==null?"":df(t).replace(Zg,"%2F")}function Ks(t){try{return decodeURIComponent(""+t)}catch{}return""+t}const cf=/\/$/,pf=t=>t.replace(cf,"");function _r(t,o,s="/"){let n,r={},l="",a="";const d=o.indexOf("#");let i=o.indexOf("?");return d<i&&d>=0&&(i=-1),i>-1&&(n=o.slice(0,i),l=o.slice(i+1,d>-1?d:o.length),r=t(l)),d>-1&&(n=n||o.slice(0,d),a=o.slice(d,o.length)),n=vf(n??o,s),{fullPath:n+(l&&"?")+l+a,path:n,query:r,hash:Ks(a)}}function mf(t,o){const s=o.query?t(o.query):"";return o.path+(s&&"?")+s+(o.hash||"")}function Ud(t,o){return!o||!t.toLowerCase().startsWith(o.toLowerCase())?t:t.slice(o.length)||"/"}function gf(t,o,s){const n=o.matched.length-1,r=s.matched.length-1;return n>-1&&n===r&&gs(o.matched[n],s.matched[r])&&b0(o.params,s.params)&&t(o.query)===t(s.query)&&o.hash===s.hash}function gs(t,o){return(t.aliasOf||t)===(o.aliasOf||o)}function b0(t,o){if(Object.keys(t).length!==Object.keys(o).length)return!1;for(const s in t)if(!ff(t[s],o[s]))return!1;return!0}function ff(t,o){return Qt(t)?Fd(t,o):Qt(o)?Fd(o,t):t===o}function Fd(t,o){return Qt(o)?t.length===o.length&&t.every((s,n)=>s===o[n]):t.length===1&&t[0]===o}function vf(t,o){if(t.startsWith("/"))return t;if(!t)return o;const s=o.split("/"),n=t.split("/"),r=n[n.length-1];(r===".."||r===".")&&n.push("");let l=s.length-1,a,d;for(a=0;a<n.length;a++)if(d=n[a],d!==".")if(d==="..")l>1&&l--;else break;return s.slice(0,l).join("/")+"/"+n.slice(a).join("/")}const Do={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};var Xs;(function(t){t.pop="pop",t.push="push"})(Xs||(Xs={}));var Os;(function(t){t.back="back",t.forward="forward",t.unknown=""})(Os||(Os={}));function hf(t){if(!t)if(rs){const o=document.querySelector("base");t=o&&o.getAttribute("href")||"/",t=t.replace(/^\w+:\/\/[^\/]+/,"")}else t="/";return t[0]!=="/"&&t[0]!=="#"&&(t="/"+t),pf(t)}const yf=/^[^#]+#/;function xf(t,o){return t.replace(yf,"#")+o}function bf(t,o){const s=document.documentElement.getBoundingClientRect(),n=t.getBoundingClientRect();return{behavior:o.behavior,left:n.left-s.left-(o.left||0),top:n.top-s.top-(o.top||0)}}const or=()=>({left:window.scrollX,top:window.scrollY});function wf(t){let o;if("el"in t){const s=t.el,n=typeof s=="string"&&s.startsWith("#"),r=typeof s=="string"?n?document.getElementById(s.slice(1)):document.querySelector(s):s;if(!r)return;o=bf(r,t)}else o=t;"scrollBehavior"in document.documentElement.style?window.scrollTo(o):window.scrollTo(o.left!=null?o.left:window.scrollX,o.top!=null?o.top:window.scrollY)}function Vd(t,o){return(history.state?history.state.position-o:-1)+t}const Jr=new Map;function kf(t,o){Jr.set(t,o)}function _f(t){const o=Jr.get(t);return Jr.delete(t),o}let $f=()=>location.protocol+"//"+location.host;function w0(t,o){const{pathname:s,search:n,hash:r}=o,l=t.indexOf("#");if(l>-1){let d=r.includes(t.slice(l))?t.slice(l).length:1,i=r.slice(d);return i[0]!=="/"&&(i="/"+i),Ud(i,"")}return Ud(s,t)+n+r}function Sf(t,o,s,n){let r=[],l=[],a=null;const d=({state:w})=>{const f=w0(t,location),v=s.value,N=o.value;let A=0;if(w){if(s.value=f,o.value=w,a&&a===v){a=null;return}A=N?w.position-N.position:0}else n(f);r.forEach(F=>{F(s.value,v,{delta:A,type:Xs.pop,direction:A?A>0?Os.forward:Os.back:Os.unknown})})};function i(){a=s.value}function c(w){r.push(w);const f=()=>{const v=r.indexOf(w);v>-1&&r.splice(v,1)};return l.push(f),f}function u(){const{history:w}=window;w.state&&w.replaceState(Ke({},w.state,{scroll:or()}),"")}function p(){for(const w of l)w();l=[],window.removeEventListener("popstate",d),window.removeEventListener("beforeunload",u)}return window.addEventListener("popstate",d),window.addEventListener("beforeunload",u,{passive:!0}),{pauseListeners:i,listen:c,destroy:p}}function Od(t,o,s,n=!1,r=!1){return{back:t,current:o,forward:s,replaced:n,position:window.history.length,scroll:r?or():null}}function Df(t){const{history:o,location:s}=window,n={value:w0(t,s)},r={value:o.state};r.value||l(n.value,{back:null,current:n.value,forward:null,position:o.length-1,replaced:!0,scroll:null},!0);function l(i,c,u){const p=t.indexOf("#"),w=p>-1?(s.host&&document.querySelector("base")?t:t.slice(p))+i:$f()+t+i;try{o[u?"replaceState":"pushState"](c,"",w),r.value=c}catch(f){console.error(f),s[u?"replace":"assign"](w)}}function a(i,c){const u=Ke({},o.state,Od(r.value.back,i,r.value.forward,!0),c,{position:r.value.position});l(i,u,!0),n.value=i}function d(i,c){const u=Ke({},r.value,o.state,{forward:i,scroll:or()});l(u.current,u,!0);const p=Ke({},Od(n.value,i,null),{position:u.position+1},c);l(i,p,!1),n.value=i}return{location:n,state:r,push:d,replace:a}}function Cf(t){t=hf(t);const o=Df(t),s=Sf(t,o.state,o.location,o.replace);function n(l,a=!0){a||s.pauseListeners(),history.go(l)}const r=Ke({location:"",base:t,go:n,createHref:xf.bind(null,t)},o,s);return Object.defineProperty(r,"location",{enumerable:!0,get:()=>o.location.value}),Object.defineProperty(r,"state",{enumerable:!0,get:()=>o.state.value}),r}function Tf(t){return typeof t=="string"||t&&typeof t=="object"}function k0(t){return typeof t=="string"||typeof t=="symbol"}const _0=Symbol("");var zd;(function(t){t[t.aborted=4]="aborted",t[t.cancelled=8]="cancelled",t[t.duplicated=16]="duplicated"})(zd||(zd={}));function fs(t,o){return Ke(new Error,{type:t,[_0]:!0},o)}function po(t,o){return t instanceof Error&&_0 in t&&(o==null||!!(t.type&o))}const Hd="[^/]+?",Ef={sensitive:!1,strict:!1,start:!0,end:!0},Af=/[.+*?^${}()[\]/\\]/g;function If(t,o){const s=Ke({},Ef,o),n=[];let r=s.start?"^":"";const l=[];for(const c of t){const u=c.length?[]:[90];s.strict&&!c.length&&(r+="/");for(let p=0;p<c.length;p++){const w=c[p];let f=40+(s.sensitive?.25:0);if(w.type===0)p||(r+="/"),r+=w.value.replace(Af,"\\$&"),f+=40;else if(w.type===1){const{value:v,repeatable:N,optional:A,regexp:F}=w;l.push({name:v,repeatable:N,optional:A});const I=F||Hd;if(I!==Hd){f+=10;try{new RegExp(`(${I})`)}catch(j){throw new Error(`Invalid custom RegExp for param "${v}" (${I}): `+j.message)}}let C=N?`((?:${I})(?:/(?:${I}))*)`:`(${I})`;p||(C=A&&c.length<2?`(?:/${C})`:"/"+C),A&&(C+="?"),r+=C,f+=20,A&&(f+=-8),N&&(f+=-20),I===".*"&&(f+=-50)}u.push(f)}n.push(u)}if(s.strict&&s.end){const c=n.length-1;n[c][n[c].length-1]+=.7000000000000001}s.strict||(r+="/?"),s.end?r+="$":s.strict&&!r.endsWith("/")&&(r+="(?:/|$)");const a=new RegExp(r,s.sensitive?"":"i");function d(c){const u=c.match(a),p={};if(!u)return null;for(let w=1;w<u.length;w++){const f=u[w]||"",v=l[w-1];p[v.name]=f&&v.repeatable?f.split("/"):f}return p}function i(c){let u="",p=!1;for(const w of t){(!p||!u.endsWith("/"))&&(u+="/"),p=!1;for(const f of w)if(f.type===0)u+=f.value;else if(f.type===1){const{value:v,repeatable:N,optional:A}=f,F=v in c?c[v]:"";if(Qt(F)&&!N)throw new Error(`Provided param "${v}" is an array but it is not repeatable (* or + modifiers)`);const I=Qt(F)?F.join("/"):F;if(!I)if(A)w.length<2&&(u.endsWith("/")?u=u.slice(0,-1):p=!0);else throw new Error(`Missing required param "${v}"`);u+=I}}return u||"/"}return{re:a,score:n,keys:l,parse:d,stringify:i}}function Mf(t,o){let s=0;for(;s<t.length&&s<o.length;){const n=o[s]-t[s];if(n)return n;s++}return t.length<o.length?t.length===1&&t[0]===80?-1:1:t.length>o.length?o.length===1&&o[0]===80?1:-1:0}function $0(t,o){let s=0;const n=t.score,r=o.score;for(;s<n.length&&s<r.length;){const l=Mf(n[s],r[s]);if(l)return l;s++}if(Math.abs(r.length-n.length)===1){if(qd(n))return 1;if(qd(r))return-1}return r.length-n.length}function qd(t){const o=t[t.length-1];return t.length>0&&o[o.length-1]<0}const Rf={type:0,value:""},Pf=/[a-zA-Z0-9_]/;function Nf(t){if(!t)return[[]];if(t==="/")return[[Rf]];if(!t.startsWith("/"))throw new Error(`Invalid path "${t}"`);function o(f){throw new Error(`ERR (${s})/"${c}": ${f}`)}let s=0,n=s;const r=[];let l;function a(){l&&r.push(l),l=[]}let d=0,i,c="",u="";function p(){c&&(s===0?l.push({type:0,value:c}):s===1||s===2||s===3?(l.length>1&&(i==="*"||i==="+")&&o(`A repeatable param (${c}) must be alone in its segment. eg: '/:ids+.`),l.push({type:1,value:c,regexp:u,repeatable:i==="*"||i==="+",optional:i==="*"||i==="?"})):o("Invalid state to consume buffer"),c="")}function w(){c+=i}for(;d<t.length;){if(i=t[d++],i==="\\"&&s!==2){n=s,s=4;continue}switch(s){case 0:i==="/"?(c&&p(),a()):i===":"?(p(),s=1):w();break;case 4:w(),s=n;break;case 1:i==="("?s=2:Pf.test(i)?w():(p(),s=0,i!=="*"&&i!=="?"&&i!=="+"&&d--);break;case 2:i===")"?u[u.length-1]=="\\"?u=u.slice(0,-1)+i:s=3:u+=i;break;case 3:p(),s=0,i!=="*"&&i!=="?"&&i!=="+"&&d--,u="";break;default:o("Unknown state");break}}return s===2&&o(`Unfinished custom RegExp for param "${c}"`),p(),a(),r}function jf(t,o,s){const n=If(Nf(t.path),s),r=Ke(n,{record:t,parent:o,children:[],alias:[]});return o&&!r.record.aliasOf==!o.record.aliasOf&&o.children.push(r),r}function Lf(t,o){const s=[],n=new Map;o=Yd({strict:!1,end:!0,sensitive:!1},o);function r(p){return n.get(p)}function l(p,w,f){const v=!f,N=Jd(p);N.aliasOf=f&&f.record;const A=Yd(o,p),F=[N];if("alias"in p){const j=typeof p.alias=="string"?[p.alias]:p.alias;for(const $ of j)F.push(Jd(Ke({},N,{components:f?f.record.components:N.components,path:$,aliasOf:f?f.record:N})))}let I,C;for(const j of F){const{path:$}=j;if(w&&$[0]!=="/"){const y=w.record.path,b=y[y.length-1]==="/"?"":"/";j.path=w.record.path+($&&b+$)}if(I=jf(j,w,A),f?f.alias.push(I):(C=C||I,C!==I&&C.alias.push(I),v&&p.name&&!Wd(I)&&a(p.name)),S0(I)&&i(I),N.children){const y=N.children;for(let b=0;b<y.length;b++)l(y[b],I,f&&f.children[b])}f=f||I}return C?()=>{a(C)}:Vs}function a(p){if(k0(p)){const w=n.get(p);w&&(n.delete(p),s.splice(s.indexOf(w),1),w.children.forEach(a),w.alias.forEach(a))}else{const w=s.indexOf(p);w>-1&&(s.splice(w,1),p.record.name&&n.delete(p.record.name),p.children.forEach(a),p.alias.forEach(a))}}function d(){return s}function i(p){const w=Ff(p,s);s.splice(w,0,p),p.record.name&&!Wd(p)&&n.set(p.record.name,p)}function c(p,w){let f,v={},N,A;if("name"in p&&p.name){if(f=n.get(p.name),!f)throw fs(1,{location:p});A=f.record.name,v=Ke(Gd(w.params,f.keys.filter(C=>!C.optional).concat(f.parent?f.parent.keys.filter(C=>C.optional):[]).map(C=>C.name)),p.params&&Gd(p.params,f.keys.map(C=>C.name))),N=f.stringify(v)}else if(p.path!=null)N=p.path,f=s.find(C=>C.re.test(N)),f&&(v=f.parse(N),A=f.record.name);else{if(f=w.name?n.get(w.name):s.find(C=>C.re.test(w.path)),!f)throw fs(1,{location:p,currentLocation:w});A=f.record.name,v=Ke({},w.params,p.params),N=f.stringify(v)}const F=[];let I=f;for(;I;)F.unshift(I.record),I=I.parent;return{name:A,path:N,params:v,matched:F,meta:Uf(F)}}t.forEach(p=>l(p));function u(){s.length=0,n.clear()}return{addRoute:l,resolve:c,removeRoute:a,clearRoutes:u,getRoutes:d,getRecordMatcher:r}}function Gd(t,o){const s={};for(const n of o)n in t&&(s[n]=t[n]);return s}function Jd(t){const o={path:t.path,redirect:t.redirect,name:t.name,meta:t.meta||{},aliasOf:t.aliasOf,beforeEnter:t.beforeEnter,props:Bf(t),children:t.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in t?t.components||null:t.component&&{default:t.component}};return Object.defineProperty(o,"mods",{value:{}}),o}function Bf(t){const o={},s=t.props||!1;if("component"in t)o.default=s;else for(const n in t.components)o[n]=typeof s=="object"?s[n]:s;return o}function Wd(t){for(;t;){if(t.record.aliasOf)return!0;t=t.parent}return!1}function Uf(t){return t.reduce((o,s)=>Ke(o,s.meta),{})}function Yd(t,o){const s={};for(const n in t)s[n]=n in o?o[n]:t[n];return s}function Ff(t,o){let s=0,n=o.length;for(;s!==n;){const l=s+n>>1;$0(t,o[l])<0?n=l:s=l+1}const r=Vf(t);return r&&(n=o.lastIndexOf(r,n-1)),n}function Vf(t){let o=t;for(;o=o.parent;)if(S0(o)&&$0(t,o)===0)return o}function S0({record:t}){return!!(t.name||t.components&&Object.keys(t.components).length||t.redirect)}function Of(t){const o={};if(t===""||t==="?")return o;const n=(t[0]==="?"?t.slice(1):t).split("&");for(let r=0;r<n.length;++r){const l=n[r].replace(v0," "),a=l.indexOf("="),d=Ks(a<0?l:l.slice(0,a)),i=a<0?null:Ks(l.slice(a+1));if(d in o){let c=o[d];Qt(c)||(c=o[d]=[c]),c.push(i)}else o[d]=i}return o}function Kd(t){let o="";for(let s in t){const n=t[s];if(s=lf(s),n==null){n!==void 0&&(o+=(o.length?"&":"")+s);continue}(Qt(n)?n.map(l=>l&&Gr(l)):[n&&Gr(n)]).forEach(l=>{l!==void 0&&(o+=(o.length?"&":"")+s,l!=null&&(o+="="+l))})}return o}function zf(t){const o={};for(const s in t){const n=t[s];n!==void 0&&(o[s]=Qt(n)?n.map(r=>r==null?null:""+r):n==null?n:""+n)}return o}const Hf=Symbol(""),Xd=Symbol(""),sr=Symbol(""),$a=Symbol(""),Wr=Symbol("");function Cs(){let t=[];function o(n){return t.push(n),()=>{const r=t.indexOf(n);r>-1&&t.splice(r,1)}}function s(){t=[]}return{add:o,list:()=>t.slice(),reset:s}}function Ro(t,o,s,n,r,l=a=>a()){const a=n&&(n.enterCallbacks[r]=n.enterCallbacks[r]||[]);return()=>new Promise((d,i)=>{const c=w=>{w===!1?i(fs(4,{from:s,to:o})):w instanceof Error?i(w):Tf(w)?i(fs(2,{from:o,to:w})):(a&&n.enterCallbacks[r]===a&&typeof w=="function"&&a.push(w),d())},u=l(()=>t.call(n&&n.instances[r],o,s,c));let p=Promise.resolve(u);t.length<3&&(p=p.then(c)),p.catch(w=>i(w))})}function $r(t,o,s,n,r=l=>l()){const l=[];for(const a of t)for(const d in a.components){let i=a.components[d];if(!(o!=="beforeRouteEnter"&&!a.instances[d]))if(g0(i)){const u=(i.__vccOpts||i)[o];u&&l.push(Ro(u,s,n,a,d,r))}else{let c=i();l.push(()=>c.then(u=>{if(!u)throw new Error(`Couldn't resolve component "${d}" at "${a.path}"`);const p=Kg(u)?u.default:u;a.mods[d]=u,a.components[d]=p;const f=(p.__vccOpts||p)[o];return f&&Ro(f,s,n,a,d,r)()}))}}return l}function Zd(t){const o=Nt(sr),s=Nt($a),n=oe(()=>{const i=Te(t.to);return o.resolve(i)}),r=oe(()=>{const{matched:i}=n.value,{length:c}=i,u=i[c-1],p=s.matched;if(!u||!p.length)return-1;const w=p.findIndex(gs.bind(null,u));if(w>-1)return w;const f=Qd(i[c-2]);return c>1&&Qd(u)===f&&p[p.length-1].path!==f?p.findIndex(gs.bind(null,i[c-2])):w}),l=oe(()=>r.value>-1&&Yf(s.params,n.value.params)),a=oe(()=>r.value>-1&&r.value===s.matched.length-1&&b0(s.params,n.value.params));function d(i={}){if(Wf(i)){const c=o[Te(t.replace)?"replace":"push"](Te(t.to)).catch(Vs);return t.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>c),c}return Promise.resolve()}return{route:n,href:oe(()=>n.value.href),isActive:l,isExactActive:a,navigate:d}}function qf(t){return t.length===1?t[0]:t}const Gf=Dc({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"},viewTransition:Boolean},useLink:Zd,setup(t,{slots:o}){const s=Je(Zd(t)),{options:n}=Nt(sr),r=oe(()=>({[eu(t.activeClass,n.linkActiveClass,"router-link-active")]:s.isActive,[eu(t.exactActiveClass,n.linkExactActiveClass,"router-link-exact-active")]:s.isExactActive}));return()=>{const l=o.default&&qf(o.default(s));return t.custom?l:qt("a",{"aria-current":s.isExactActive?t.ariaCurrentValue:null,href:s.href,onClick:s.navigate,class:r.value},l)}}}),Jf=Gf;function Wf(t){if(!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)&&!t.defaultPrevented&&!(t.button!==void 0&&t.button!==0)){if(t.currentTarget&&t.currentTarget.getAttribute){const o=t.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(o))return}return t.preventDefault&&t.preventDefault(),!0}}function Yf(t,o){for(const s in o){const n=o[s],r=t[s];if(typeof n=="string"){if(n!==r)return!1}else if(!Qt(r)||r.length!==n.length||n.some((l,a)=>l!==r[a]))return!1}return!0}function Qd(t){return t?t.aliasOf?t.aliasOf.path:t.path:""}const eu=(t,o,s)=>t??o??s,Kf=Dc({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(t,{attrs:o,slots:s}){const n=Nt(Wr),r=oe(()=>t.route||n.value),l=Nt(Xd,0),a=oe(()=>{let c=Te(l);const{matched:u}=r.value;let p;for(;(p=u[c])&&!p.components;)c++;return c}),d=oe(()=>r.value.matched[a.value]);Bs(Xd,oe(()=>a.value+1)),Bs(Hf,d),Bs(Wr,r);const i=B();return Oe(()=>[i.value,d.value,t.name],([c,u,p],[w,f,v])=>{u&&(u.instances[p]=c,f&&f!==u&&c&&c===w&&(u.leaveGuards.size||(u.leaveGuards=f.leaveGuards),u.updateGuards.size||(u.updateGuards=f.updateGuards))),c&&u&&(!f||!gs(u,f)||!w)&&(u.enterCallbacks[p]||[]).forEach(N=>N(c))},{flush:"post"}),()=>{const c=r.value,u=t.name,p=d.value,w=p&&p.components[u];if(!w)return tu(s.default,{Component:w,route:c});const f=p.props[u],v=f?f===!0?c.params:typeof f=="function"?f(c):f:null,A=qt(w,Ke({},v,o,{onVnodeUnmounted:F=>{F.component.isUnmounted&&(p.instances[u]=null)},ref:i}));return tu(s.default,{Component:A,route:c})||A}}});function tu(t,o){if(!t)return null;const s=t(o);return s.length===1?s[0]:s}const Xf=Kf;function Zf(t){const o=Lf(t.routes,t),s=t.parseQuery||Of,n=t.stringifyQuery||Kd,r=t.history,l=Cs(),a=Cs(),d=Cs(),i=qp(Do);let c=Do;rs&&t.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const u=kr.bind(null,Q=>""+Q),p=kr.bind(null,uf),w=kr.bind(null,Ks);function f(Q,D){let x,S;return k0(Q)?(x=o.getRecordMatcher(Q),S=D):S=Q,o.addRoute(S,x)}function v(Q){const D=o.getRecordMatcher(Q);D&&o.removeRoute(D)}function N(){return o.getRoutes().map(Q=>Q.record)}function A(Q){return!!o.getRecordMatcher(Q)}function F(Q,D){if(D=Ke({},D||i.value),typeof Q=="string"){const Z=_r(s,Q,D.path),X=o.resolve({path:Z.path},D),W=r.createHref(Z.fullPath);return Ke(Z,X,{params:w(X.params),hash:Ks(Z.hash),redirectedFrom:void 0,href:W})}let x;if(Q.path!=null)x=Ke({},Q,{path:_r(s,Q.path,D.path).path});else{const Z=Ke({},Q.params);for(const X in Z)Z[X]==null&&delete Z[X];x=Ke({},Q,{params:p(Z)}),D.params=p(D.params)}const S=o.resolve(x,D),P=Q.hash||"";S.params=u(w(S.params));const T=mf(n,Ke({},Q,{hash:af(P),path:S.path})),V=r.createHref(T);return Ke({fullPath:T,hash:P,query:n===Kd?zf(Q.query):Q.query||{}},S,{redirectedFrom:void 0,href:V})}function I(Q){return typeof Q=="string"?_r(s,Q,i.value.path):Ke({},Q)}function C(Q,D){if(c!==Q)return fs(8,{from:D,to:Q})}function j(Q){return b(Q)}function $(Q){return j(Ke(I(Q),{replace:!0}))}function y(Q){const D=Q.matched[Q.matched.length-1];if(D&&D.redirect){const{redirect:x}=D;let S=typeof x=="function"?x(Q):x;return typeof S=="string"&&(S=S.includes("?")||S.includes("#")?S=I(S):{path:S},S.params={}),Ke({query:Q.query,hash:Q.hash,params:S.path!=null?{}:Q.params},S)}}function b(Q,D){const x=c=F(Q),S=i.value,P=Q.state,T=Q.force,V=Q.replace===!0,Z=y(x);if(Z)return b(Ke(I(Z),{state:typeof Z=="object"?Ke({},P,Z.state):P,force:T,replace:V}),D||x);const X=x;X.redirectedFrom=D;let W;return!T&&gf(n,S,x)&&(W=fs(16,{to:X,from:S}),ee(S,S,!0,!1)),(W?Promise.resolve(W):M(X,S)).catch(re=>po(re)?po(re,2)?re:O(re):K(re,X,S)).then(re=>{if(re){if(po(re,2))return b(Ke({replace:V},I(re.to),{state:typeof re.to=="object"?Ke({},P,re.to.state):P,force:T}),D||X)}else re=U(X,S,!0,V,P);return G(X,S,re),re})}function E(Q,D){const x=C(Q,D);return x?Promise.reject(x):Promise.resolve()}function R(Q){const D=ie.values().next().value;return D&&typeof D.runWithContext=="function"?D.runWithContext(Q):Q()}function M(Q,D){let x;const[S,P,T]=Qf(Q,D);x=$r(S.reverse(),"beforeRouteLeave",Q,D);for(const Z of S)Z.leaveGuards.forEach(X=>{x.push(Ro(X,Q,D))});const V=E.bind(null,Q,D);return x.push(V),ke(x).then(()=>{x=[];for(const Z of l.list())x.push(Ro(Z,Q,D));return x.push(V),ke(x)}).then(()=>{x=$r(P,"beforeRouteUpdate",Q,D);for(const Z of P)Z.updateGuards.forEach(X=>{x.push(Ro(X,Q,D))});return x.push(V),ke(x)}).then(()=>{x=[];for(const Z of T)if(Z.beforeEnter)if(Qt(Z.beforeEnter))for(const X of Z.beforeEnter)x.push(Ro(X,Q,D));else x.push(Ro(Z.beforeEnter,Q,D));return x.push(V),ke(x)}).then(()=>(Q.matched.forEach(Z=>Z.enterCallbacks={}),x=$r(T,"beforeRouteEnter",Q,D,R),x.push(V),ke(x))).then(()=>{x=[];for(const Z of a.list())x.push(Ro(Z,Q,D));return x.push(V),ke(x)}).catch(Z=>po(Z,8)?Z:Promise.reject(Z))}function G(Q,D,x){d.list().forEach(S=>R(()=>S(Q,D,x)))}function U(Q,D,x,S,P){const T=C(Q,D);if(T)return T;const V=D===Do,Z=rs?history.state:{};x&&(S||V?r.replace(Q.fullPath,Ke({scroll:V&&Z&&Z.scroll},P)):r.push(Q.fullPath,P)),i.value=Q,ee(Q,D,x,V),O()}let _;function k(){_||(_=r.listen((Q,D,x)=>{if(!me.listening)return;const S=F(Q),P=y(S);if(P){b(Ke(P,{replace:!0,force:!0}),S).catch(Vs);return}c=S;const T=i.value;rs&&kf(Vd(T.fullPath,x.delta),or()),M(S,T).catch(V=>po(V,12)?V:po(V,2)?(b(Ke(I(V.to),{force:!0}),S).then(Z=>{po(Z,20)&&!x.delta&&x.type===Xs.pop&&r.go(-1,!1)}).catch(Vs),Promise.reject()):(x.delta&&r.go(-x.delta,!1),K(V,S,T))).then(V=>{V=V||U(S,T,!1),V&&(x.delta&&!po(V,8)?r.go(-x.delta,!1):x.type===Xs.pop&&po(V,20)&&r.go(-1,!1)),G(S,T,V)}).catch(Vs)}))}let L=Cs(),z=Cs(),q;function K(Q,D,x){O(Q);const S=z.list();return S.length?S.forEach(P=>P(Q,D,x)):console.error(Q),Promise.reject(Q)}function H(){return q&&i.value!==Do?Promise.resolve():new Promise((Q,D)=>{L.add([Q,D])})}function O(Q){return q||(q=!Q,k(),L.list().forEach(([D,x])=>Q?x(Q):D()),L.reset()),Q}function ee(Q,D,x,S){const{scrollBehavior:P}=t;if(!rs||!P)return Promise.resolve();const T=!x&&_f(Vd(Q.fullPath,0))||(S||!x)&&history.state&&history.state.scroll||null;return Qo().then(()=>P(Q,D,T)).then(V=>V&&wf(V)).catch(V=>K(V,Q,D))}const ge=Q=>r.go(Q);let de;const ie=new Set,me={currentRoute:i,listening:!0,addRoute:f,removeRoute:v,clearRoutes:o.clearRoutes,hasRoute:A,getRoutes:N,resolve:F,options:t,push:j,replace:$,go:ge,back:()=>ge(-1),forward:()=>ge(1),beforeEach:l.add,beforeResolve:a.add,afterEach:d.add,onError:z.add,isReady:H,install(Q){const D=this;Q.component("RouterLink",Jf),Q.component("RouterView",Xf),Q.config.globalProperties.$router=D,Object.defineProperty(Q.config.globalProperties,"$route",{enumerable:!0,get:()=>Te(i)}),rs&&!de&&i.value===Do&&(de=!0,j(r.location).catch(P=>{}));const x={};for(const P in Do)Object.defineProperty(x,P,{get:()=>i.value[P],enumerable:!0});Q.provide(sr,D),Q.provide($a,lc(x)),Q.provide(Wr,i);const S=Q.unmount;ie.add(Q),Q.unmount=function(){ie.delete(Q),ie.size<1&&(c=Do,_&&_(),_=null,i.value=Do,de=!1,q=!1),S()}}};function ke(Q){return Q.reduce((D,x)=>D.then(()=>R(x)),Promise.resolve())}return me}function Qf(t,o){const s=[],n=[],r=[],l=Math.max(o.matched.length,t.matched.length);for(let a=0;a<l;a++){const d=o.matched[a];d&&(t.matched.find(c=>gs(c,d))?n.push(d):s.push(d));const i=t.matched[a];i&&(o.matched.find(c=>gs(c,i))||r.push(i))}return[s,n,r]}function et(){return Nt(sr)}function tt(t){return Nt($a)}function D0(t,o){return function(){return t.apply(o,arguments)}}const{toString:ev}=Object.prototype,{getPrototypeOf:Sa}=Object,{iterator:nr,toStringTag:C0}=Symbol,rr=(t=>o=>{const s=ev.call(o);return t[s]||(t[s]=s.slice(8,-1).toLowerCase())})(Object.create(null)),eo=t=>(t=t.toLowerCase(),o=>rr(o)===t),ar=t=>o=>typeof o===t,{isArray:bs}=Array,vs=ar("undefined");function sn(t){return t!==null&&!vs(t)&&t.constructor!==null&&!vs(t.constructor)&&jt(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const T0=eo("ArrayBuffer");function tv(t){let o;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?o=ArrayBuffer.isView(t):o=t&&t.buffer&&T0(t.buffer),o}const ov=ar("string"),jt=ar("function"),E0=ar("number"),nn=t=>t!==null&&typeof t=="object",sv=t=>t===!0||t===!1,Dn=t=>{if(rr(t)!=="object")return!1;const o=Sa(t);return(o===null||o===Object.prototype||Object.getPrototypeOf(o)===null)&&!(C0 in t)&&!(nr in t)},nv=t=>{if(!nn(t)||sn(t))return!1;try{return Object.keys(t).length===0&&Object.getPrototypeOf(t)===Object.prototype}catch{return!1}},rv=eo("Date"),av=eo("File"),lv=eo("Blob"),iv=eo("FileList"),dv=t=>nn(t)&&jt(t.pipe),uv=t=>{let o;return t&&(typeof FormData=="function"&&t instanceof FormData||jt(t.append)&&((o=rr(t))==="formdata"||o==="object"&&jt(t.toString)&&t.toString()==="[object FormData]"))},cv=eo("URLSearchParams"),[pv,mv,gv,fv]=["ReadableStream","Request","Response","Headers"].map(eo),vv=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function rn(t,o,{allOwnKeys:s=!1}={}){if(t===null||typeof t>"u")return;let n,r;if(typeof t!="object"&&(t=[t]),bs(t))for(n=0,r=t.length;n<r;n++)o.call(null,t[n],n,t);else{if(sn(t))return;const l=s?Object.getOwnPropertyNames(t):Object.keys(t),a=l.length;let d;for(n=0;n<a;n++)d=l[n],o.call(null,t[d],d,t)}}function A0(t,o){if(sn(t))return null;o=o.toLowerCase();const s=Object.keys(t);let n=s.length,r;for(;n-- >0;)if(r=s[n],o===r.toLowerCase())return r;return null}const Wo=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,I0=t=>!vs(t)&&t!==Wo;function Yr(){const{caseless:t,skipUndefined:o}=I0(this)&&this||{},s={},n=(r,l)=>{const a=t&&A0(s,l)||l;Dn(s[a])&&Dn(r)?s[a]=Yr(s[a],r):Dn(r)?s[a]=Yr({},r):bs(r)?s[a]=r.slice():(!o||!vs(r))&&(s[a]=r)};for(let r=0,l=arguments.length;r<l;r++)arguments[r]&&rn(arguments[r],n);return s}const hv=(t,o,s,{allOwnKeys:n}={})=>(rn(o,(r,l)=>{s&&jt(r)?t[l]=D0(r,s):t[l]=r},{allOwnKeys:n}),t),yv=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),xv=(t,o,s,n)=>{t.prototype=Object.create(o.prototype,n),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:o.prototype}),s&&Object.assign(t.prototype,s)},bv=(t,o,s,n)=>{let r,l,a;const d={};if(o=o||{},t==null)return o;do{for(r=Object.getOwnPropertyNames(t),l=r.length;l-- >0;)a=r[l],(!n||n(a,t,o))&&!d[a]&&(o[a]=t[a],d[a]=!0);t=s!==!1&&Sa(t)}while(t&&(!s||s(t,o))&&t!==Object.prototype);return o},wv=(t,o,s)=>{t=String(t),(s===void 0||s>t.length)&&(s=t.length),s-=o.length;const n=t.indexOf(o,s);return n!==-1&&n===s},kv=t=>{if(!t)return null;if(bs(t))return t;let o=t.length;if(!E0(o))return null;const s=new Array(o);for(;o-- >0;)s[o]=t[o];return s},_v=(t=>o=>t&&o instanceof t)(typeof Uint8Array<"u"&&Sa(Uint8Array)),$v=(t,o)=>{const n=(t&&t[nr]).call(t);let r;for(;(r=n.next())&&!r.done;){const l=r.value;o.call(t,l[0],l[1])}},Sv=(t,o)=>{let s;const n=[];for(;(s=t.exec(o))!==null;)n.push(s);return n},Dv=eo("HTMLFormElement"),Cv=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(s,n,r){return n.toUpperCase()+r}),ou=(({hasOwnProperty:t})=>(o,s)=>t.call(o,s))(Object.prototype),Tv=eo("RegExp"),M0=(t,o)=>{const s=Object.getOwnPropertyDescriptors(t),n={};rn(s,(r,l)=>{let a;(a=o(r,l,t))!==!1&&(n[l]=a||r)}),Object.defineProperties(t,n)},Ev=t=>{M0(t,(o,s)=>{if(jt(t)&&["arguments","caller","callee"].indexOf(s)!==-1)return!1;const n=t[s];if(jt(n)){if(o.enumerable=!1,"writable"in o){o.writable=!1;return}o.set||(o.set=()=>{throw Error("Can not rewrite read-only method '"+s+"'")})}})},Av=(t,o)=>{const s={},n=r=>{r.forEach(l=>{s[l]=!0})};return bs(t)?n(t):n(String(t).split(o)),s},Iv=()=>{},Mv=(t,o)=>t!=null&&Number.isFinite(t=+t)?t:o;function Rv(t){return!!(t&&jt(t.append)&&t[C0]==="FormData"&&t[nr])}const Pv=t=>{const o=new Array(10),s=(n,r)=>{if(nn(n)){if(o.indexOf(n)>=0)return;if(sn(n))return n;if(!("toJSON"in n)){o[r]=n;const l=bs(n)?[]:{};return rn(n,(a,d)=>{const i=s(a,r+1);!vs(i)&&(l[d]=i)}),o[r]=void 0,l}}return n};return s(t,0)},Nv=eo("AsyncFunction"),jv=t=>t&&(nn(t)||jt(t))&&jt(t.then)&&jt(t.catch),R0=((t,o)=>t?setImmediate:o?((s,n)=>(Wo.addEventListener("message",({source:r,data:l})=>{r===Wo&&l===s&&n.length&&n.shift()()},!1),r=>{n.push(r),Wo.postMessage(s,"*")}))(`axios@${Math.random()}`,[]):s=>setTimeout(s))(typeof setImmediate=="function",jt(Wo.postMessage)),Lv=typeof queueMicrotask<"u"?queueMicrotask.bind(Wo):typeof process<"u"&&process.nextTick||R0,Bv=t=>t!=null&&jt(t[nr]),xe={isArray:bs,isArrayBuffer:T0,isBuffer:sn,isFormData:uv,isArrayBufferView:tv,isString:ov,isNumber:E0,isBoolean:sv,isObject:nn,isPlainObject:Dn,isEmptyObject:nv,isReadableStream:pv,isRequest:mv,isResponse:gv,isHeaders:fv,isUndefined:vs,isDate:rv,isFile:av,isBlob:lv,isRegExp:Tv,isFunction:jt,isStream:dv,isURLSearchParams:cv,isTypedArray:_v,isFileList:iv,forEach:rn,merge:Yr,extend:hv,trim:vv,stripBOM:yv,inherits:xv,toFlatObject:bv,kindOf:rr,kindOfTest:eo,endsWith:wv,toArray:kv,forEachEntry:$v,matchAll:Sv,isHTMLForm:Dv,hasOwnProperty:ou,hasOwnProp:ou,reduceDescriptors:M0,freezeMethods:Ev,toObjectSet:Av,toCamelCase:Cv,noop:Iv,toFiniteNumber:Mv,findKey:A0,global:Wo,isContextDefined:I0,isSpecCompliantForm:Rv,toJSONObject:Pv,isAsyncFn:Nv,isThenable:jv,setImmediate:R0,asap:Lv,isIterable:Bv};function Be(t,o,s,n,r){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",o&&(this.code=o),s&&(this.config=s),n&&(this.request=n),r&&(this.response=r,this.status=r.status?r.status:null)}xe.inherits(Be,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:xe.toJSONObject(this.config),code:this.code,status:this.status}}});const P0=Be.prototype,N0={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{N0[t]={value:t}});Object.defineProperties(Be,N0);Object.defineProperty(P0,"isAxiosError",{value:!0});Be.from=(t,o,s,n,r,l)=>{const a=Object.create(P0);xe.toFlatObject(t,a,function(u){return u!==Error.prototype},c=>c!=="isAxiosError");const d=t&&t.message?t.message:"Error",i=o==null&&t?t.code:o;return Be.call(a,d,i,s,n,r),t&&a.cause==null&&Object.defineProperty(a,"cause",{value:t,configurable:!0}),a.name=t&&t.name||"Error",l&&Object.assign(a,l),a};const Uv=null;function Kr(t){return xe.isPlainObject(t)||xe.isArray(t)}function j0(t){return xe.endsWith(t,"[]")?t.slice(0,-2):t}function su(t,o,s){return t?t.concat(o).map(function(r,l){return r=j0(r),!s&&l?"["+r+"]":r}).join(s?".":""):o}function Fv(t){return xe.isArray(t)&&!t.some(Kr)}const Vv=xe.toFlatObject(xe,{},null,function(o){return/^is[A-Z]/.test(o)});function lr(t,o,s){if(!xe.isObject(t))throw new TypeError("target must be an object");o=o||new FormData,s=xe.toFlatObject(s,{metaTokens:!0,dots:!1,indexes:!1},!1,function(N,A){return!xe.isUndefined(A[N])});const n=s.metaTokens,r=s.visitor||u,l=s.dots,a=s.indexes,i=(s.Blob||typeof Blob<"u"&&Blob)&&xe.isSpecCompliantForm(o);if(!xe.isFunction(r))throw new TypeError("visitor must be a function");function c(v){if(v===null)return"";if(xe.isDate(v))return v.toISOString();if(xe.isBoolean(v))return v.toString();if(!i&&xe.isBlob(v))throw new Be("Blob is not supported. Use a Buffer instead.");return xe.isArrayBuffer(v)||xe.isTypedArray(v)?i&&typeof Blob=="function"?new Blob([v]):Buffer.from(v):v}function u(v,N,A){let F=v;if(v&&!A&&typeof v=="object"){if(xe.endsWith(N,"{}"))N=n?N:N.slice(0,-2),v=JSON.stringify(v);else if(xe.isArray(v)&&Fv(v)||(xe.isFileList(v)||xe.endsWith(N,"[]"))&&(F=xe.toArray(v)))return N=j0(N),F.forEach(function(C,j){!(xe.isUndefined(C)||C===null)&&o.append(a===!0?su([N],j,l):a===null?N:N+"[]",c(C))}),!1}return Kr(v)?!0:(o.append(su(A,N,l),c(v)),!1)}const p=[],w=Object.assign(Vv,{defaultVisitor:u,convertValue:c,isVisitable:Kr});function f(v,N){if(!xe.isUndefined(v)){if(p.indexOf(v)!==-1)throw Error("Circular reference detected in "+N.join("."));p.push(v),xe.forEach(v,function(F,I){(!(xe.isUndefined(F)||F===null)&&r.call(o,F,xe.isString(I)?I.trim():I,N,w))===!0&&f(F,N?N.concat(I):[I])}),p.pop()}}if(!xe.isObject(t))throw new TypeError("data must be an object");return f(t),o}function nu(t){const o={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(n){return o[n]})}function Da(t,o){this._pairs=[],t&&lr(t,this,o)}const L0=Da.prototype;L0.append=function(o,s){this._pairs.push([o,s])};L0.toString=function(o){const s=o?function(n){return o.call(this,n,nu)}:nu;return this._pairs.map(function(r){return s(r[0])+"="+s(r[1])},"").join("&")};function Ov(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function B0(t,o,s){if(!o)return t;const n=s&&s.encode||Ov;xe.isFunction(s)&&(s={serialize:s});const r=s&&s.serialize;let l;if(r?l=r(o,s):l=xe.isURLSearchParams(o)?o.toString():new Da(o,s).toString(n),l){const a=t.indexOf("#");a!==-1&&(t=t.slice(0,a)),t+=(t.indexOf("?")===-1?"?":"&")+l}return t}class ru{constructor(){this.handlers=[]}use(o,s,n){return this.handlers.push({fulfilled:o,rejected:s,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(o){this.handlers[o]&&(this.handlers[o]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(o){xe.forEach(this.handlers,function(n){n!==null&&o(n)})}}const U0={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},zv=typeof URLSearchParams<"u"?URLSearchParams:Da,Hv=typeof FormData<"u"?FormData:null,qv=typeof Blob<"u"?Blob:null,Gv={isBrowser:!0,classes:{URLSearchParams:zv,FormData:Hv,Blob:qv},protocols:["http","https","file","blob","url","data"]},Ca=typeof window<"u"&&typeof document<"u",Xr=typeof navigator=="object"&&navigator||void 0,Jv=Ca&&(!Xr||["ReactNative","NativeScript","NS"].indexOf(Xr.product)<0),Wv=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",Yv=Ca&&window.location.href||"http://localhost",Kv=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Ca,hasStandardBrowserEnv:Jv,hasStandardBrowserWebWorkerEnv:Wv,navigator:Xr,origin:Yv},Symbol.toStringTag,{value:"Module"})),Ct={...Kv,...Gv};function Xv(t,o){return lr(t,new Ct.classes.URLSearchParams,{visitor:function(s,n,r,l){return Ct.isNode&&xe.isBuffer(s)?(this.append(n,s.toString("base64")),!1):l.defaultVisitor.apply(this,arguments)},...o})}function Zv(t){return xe.matchAll(/\w+|\[(\w*)]/g,t).map(o=>o[0]==="[]"?"":o[1]||o[0])}function Qv(t){const o={},s=Object.keys(t);let n;const r=s.length;let l;for(n=0;n<r;n++)l=s[n],o[l]=t[l];return o}function F0(t){function o(s,n,r,l){let a=s[l++];if(a==="__proto__")return!0;const d=Number.isFinite(+a),i=l>=s.length;return a=!a&&xe.isArray(r)?r.length:a,i?(xe.hasOwnProp(r,a)?r[a]=[r[a],n]:r[a]=n,!d):((!r[a]||!xe.isObject(r[a]))&&(r[a]=[]),o(s,n,r[a],l)&&xe.isArray(r[a])&&(r[a]=Qv(r[a])),!d)}if(xe.isFormData(t)&&xe.isFunction(t.entries)){const s={};return xe.forEachEntry(t,(n,r)=>{o(Zv(n),r,s,0)}),s}return null}function e1(t,o,s){if(xe.isString(t))try{return(o||JSON.parse)(t),xe.trim(t)}catch(n){if(n.name!=="SyntaxError")throw n}return(s||JSON.stringify)(t)}const an={transitional:U0,adapter:["xhr","http","fetch"],transformRequest:[function(o,s){const n=s.getContentType()||"",r=n.indexOf("application/json")>-1,l=xe.isObject(o);if(l&&xe.isHTMLForm(o)&&(o=new FormData(o)),xe.isFormData(o))return r?JSON.stringify(F0(o)):o;if(xe.isArrayBuffer(o)||xe.isBuffer(o)||xe.isStream(o)||xe.isFile(o)||xe.isBlob(o)||xe.isReadableStream(o))return o;if(xe.isArrayBufferView(o))return o.buffer;if(xe.isURLSearchParams(o))return s.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),o.toString();let d;if(l){if(n.indexOf("application/x-www-form-urlencoded")>-1)return Xv(o,this.formSerializer).toString();if((d=xe.isFileList(o))||n.indexOf("multipart/form-data")>-1){const i=this.env&&this.env.FormData;return lr(d?{"files[]":o}:o,i&&new i,this.formSerializer)}}return l||r?(s.setContentType("application/json",!1),e1(o)):o}],transformResponse:[function(o){const s=this.transitional||an.transitional,n=s&&s.forcedJSONParsing,r=this.responseType==="json";if(xe.isResponse(o)||xe.isReadableStream(o))return o;if(o&&xe.isString(o)&&(n&&!this.responseType||r)){const a=!(s&&s.silentJSONParsing)&&r;try{return JSON.parse(o,this.parseReviver)}catch(d){if(a)throw d.name==="SyntaxError"?Be.from(d,Be.ERR_BAD_RESPONSE,this,null,this.response):d}}return o}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Ct.classes.FormData,Blob:Ct.classes.Blob},validateStatus:function(o){return o>=200&&o<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};xe.forEach(["delete","get","head","post","put","patch"],t=>{an.headers[t]={}});const t1=xe.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),o1=t=>{const o={};let s,n,r;return t&&t.split(`
`).forEach(function(a){r=a.indexOf(":"),s=a.substring(0,r).trim().toLowerCase(),n=a.substring(r+1).trim(),!(!s||o[s]&&t1[s])&&(s==="set-cookie"?o[s]?o[s].push(n):o[s]=[n]:o[s]=o[s]?o[s]+", "+n:n)}),o},au=Symbol("internals");function Ts(t){return t&&String(t).trim().toLowerCase()}function Cn(t){return t===!1||t==null?t:xe.isArray(t)?t.map(Cn):String(t)}function s1(t){const o=Object.create(null),s=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let n;for(;n=s.exec(t);)o[n[1]]=n[2];return o}const n1=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function Sr(t,o,s,n,r){if(xe.isFunction(n))return n.call(this,o,s);if(r&&(o=s),!!xe.isString(o)){if(xe.isString(n))return o.indexOf(n)!==-1;if(xe.isRegExp(n))return n.test(o)}}function r1(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(o,s,n)=>s.toUpperCase()+n)}function a1(t,o){const s=xe.toCamelCase(" "+o);["get","set","has"].forEach(n=>{Object.defineProperty(t,n+s,{value:function(r,l,a){return this[n].call(this,o,r,l,a)},configurable:!0})})}let Lt=class{constructor(o){o&&this.set(o)}set(o,s,n){const r=this;function l(d,i,c){const u=Ts(i);if(!u)throw new Error("header name must be a non-empty string");const p=xe.findKey(r,u);(!p||r[p]===void 0||c===!0||c===void 0&&r[p]!==!1)&&(r[p||i]=Cn(d))}const a=(d,i)=>xe.forEach(d,(c,u)=>l(c,u,i));if(xe.isPlainObject(o)||o instanceof this.constructor)a(o,s);else if(xe.isString(o)&&(o=o.trim())&&!n1(o))a(o1(o),s);else if(xe.isObject(o)&&xe.isIterable(o)){let d={},i,c;for(const u of o){if(!xe.isArray(u))throw TypeError("Object iterator must return a key-value pair");d[c=u[0]]=(i=d[c])?xe.isArray(i)?[...i,u[1]]:[i,u[1]]:u[1]}a(d,s)}else o!=null&&l(s,o,n);return this}get(o,s){if(o=Ts(o),o){const n=xe.findKey(this,o);if(n){const r=this[n];if(!s)return r;if(s===!0)return s1(r);if(xe.isFunction(s))return s.call(this,r,n);if(xe.isRegExp(s))return s.exec(r);throw new TypeError("parser must be boolean|regexp|function")}}}has(o,s){if(o=Ts(o),o){const n=xe.findKey(this,o);return!!(n&&this[n]!==void 0&&(!s||Sr(this,this[n],n,s)))}return!1}delete(o,s){const n=this;let r=!1;function l(a){if(a=Ts(a),a){const d=xe.findKey(n,a);d&&(!s||Sr(n,n[d],d,s))&&(delete n[d],r=!0)}}return xe.isArray(o)?o.forEach(l):l(o),r}clear(o){const s=Object.keys(this);let n=s.length,r=!1;for(;n--;){const l=s[n];(!o||Sr(this,this[l],l,o,!0))&&(delete this[l],r=!0)}return r}normalize(o){const s=this,n={};return xe.forEach(this,(r,l)=>{const a=xe.findKey(n,l);if(a){s[a]=Cn(r),delete s[l];return}const d=o?r1(l):String(l).trim();d!==l&&delete s[l],s[d]=Cn(r),n[d]=!0}),this}concat(...o){return this.constructor.concat(this,...o)}toJSON(o){const s=Object.create(null);return xe.forEach(this,(n,r)=>{n!=null&&n!==!1&&(s[r]=o&&xe.isArray(n)?n.join(", "):n)}),s}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([o,s])=>o+": "+s).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(o){return o instanceof this?o:new this(o)}static concat(o,...s){const n=new this(o);return s.forEach(r=>n.set(r)),n}static accessor(o){const n=(this[au]=this[au]={accessors:{}}).accessors,r=this.prototype;function l(a){const d=Ts(a);n[d]||(a1(r,a),n[d]=!0)}return xe.isArray(o)?o.forEach(l):l(o),this}};Lt.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);xe.reduceDescriptors(Lt.prototype,({value:t},o)=>{let s=o[0].toUpperCase()+o.slice(1);return{get:()=>t,set(n){this[s]=n}}});xe.freezeMethods(Lt);function Dr(t,o){const s=this||an,n=o||s,r=Lt.from(n.headers);let l=n.data;return xe.forEach(t,function(d){l=d.call(s,l,r.normalize(),o?o.status:void 0)}),r.normalize(),l}function V0(t){return!!(t&&t.__CANCEL__)}function ws(t,o,s){Be.call(this,t??"canceled",Be.ERR_CANCELED,o,s),this.name="CanceledError"}xe.inherits(ws,Be,{__CANCEL__:!0});function O0(t,o,s){const n=s.config.validateStatus;!s.status||!n||n(s.status)?t(s):o(new Be("Request failed with status code "+s.status,[Be.ERR_BAD_REQUEST,Be.ERR_BAD_RESPONSE][Math.floor(s.status/100)-4],s.config,s.request,s))}function l1(t){const o=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return o&&o[1]||""}function i1(t,o){t=t||10;const s=new Array(t),n=new Array(t);let r=0,l=0,a;return o=o!==void 0?o:1e3,function(i){const c=Date.now(),u=n[l];a||(a=c),s[r]=i,n[r]=c;let p=l,w=0;for(;p!==r;)w+=s[p++],p=p%t;if(r=(r+1)%t,r===l&&(l=(l+1)%t),c-a<o)return;const f=u&&c-u;return f?Math.round(w*1e3/f):void 0}}function d1(t,o){let s=0,n=1e3/o,r,l;const a=(c,u=Date.now())=>{s=u,r=null,l&&(clearTimeout(l),l=null),t(...c)};return[(...c)=>{const u=Date.now(),p=u-s;p>=n?a(c,u):(r=c,l||(l=setTimeout(()=>{l=null,a(r)},n-p)))},()=>r&&a(r)]}const On=(t,o,s=3)=>{let n=0;const r=i1(50,250);return d1(l=>{const a=l.loaded,d=l.lengthComputable?l.total:void 0,i=a-n,c=r(i),u=a<=d;n=a;const p={loaded:a,total:d,progress:d?a/d:void 0,bytes:i,rate:c||void 0,estimated:c&&d&&u?(d-a)/c:void 0,event:l,lengthComputable:d!=null,[o?"download":"upload"]:!0};t(p)},s)},lu=(t,o)=>{const s=t!=null;return[n=>o[0]({lengthComputable:s,total:t,loaded:n}),o[1]]},iu=t=>(...o)=>xe.asap(()=>t(...o)),u1=Ct.hasStandardBrowserEnv?((t,o)=>s=>(s=new URL(s,Ct.origin),t.protocol===s.protocol&&t.host===s.host&&(o||t.port===s.port)))(new URL(Ct.origin),Ct.navigator&&/(msie|trident)/i.test(Ct.navigator.userAgent)):()=>!0,c1=Ct.hasStandardBrowserEnv?{write(t,o,s,n,r,l){const a=[t+"="+encodeURIComponent(o)];xe.isNumber(s)&&a.push("expires="+new Date(s).toGMTString()),xe.isString(n)&&a.push("path="+n),xe.isString(r)&&a.push("domain="+r),l===!0&&a.push("secure"),document.cookie=a.join("; ")},read(t){const o=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return o?decodeURIComponent(o[3]):null},remove(t){this.write(t,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function p1(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function m1(t,o){return o?t.replace(/\/?\/$/,"")+"/"+o.replace(/^\/+/,""):t}function z0(t,o,s){let n=!p1(o);return t&&(n||s==!1)?m1(t,o):o}const du=t=>t instanceof Lt?{...t}:t;function ts(t,o){o=o||{};const s={};function n(c,u,p,w){return xe.isPlainObject(c)&&xe.isPlainObject(u)?xe.merge.call({caseless:w},c,u):xe.isPlainObject(u)?xe.merge({},u):xe.isArray(u)?u.slice():u}function r(c,u,p,w){if(xe.isUndefined(u)){if(!xe.isUndefined(c))return n(void 0,c,p,w)}else return n(c,u,p,w)}function l(c,u){if(!xe.isUndefined(u))return n(void 0,u)}function a(c,u){if(xe.isUndefined(u)){if(!xe.isUndefined(c))return n(void 0,c)}else return n(void 0,u)}function d(c,u,p){if(p in o)return n(c,u);if(p in t)return n(void 0,c)}const i={url:l,method:l,data:l,baseURL:a,transformRequest:a,transformResponse:a,paramsSerializer:a,timeout:a,timeoutMessage:a,withCredentials:a,withXSRFToken:a,adapter:a,responseType:a,xsrfCookieName:a,xsrfHeaderName:a,onUploadProgress:a,onDownloadProgress:a,decompress:a,maxContentLength:a,maxBodyLength:a,beforeRedirect:a,transport:a,httpAgent:a,httpsAgent:a,cancelToken:a,socketPath:a,responseEncoding:a,validateStatus:d,headers:(c,u,p)=>r(du(c),du(u),p,!0)};return xe.forEach(Object.keys({...t,...o}),function(u){const p=i[u]||r,w=p(t[u],o[u],u);xe.isUndefined(w)&&p!==d||(s[u]=w)}),s}const H0=t=>{const o=ts({},t);let{data:s,withXSRFToken:n,xsrfHeaderName:r,xsrfCookieName:l,headers:a,auth:d}=o;if(o.headers=a=Lt.from(a),o.url=B0(z0(o.baseURL,o.url,o.allowAbsoluteUrls),t.params,t.paramsSerializer),d&&a.set("Authorization","Basic "+btoa((d.username||"")+":"+(d.password?unescape(encodeURIComponent(d.password)):""))),xe.isFormData(s)){if(Ct.hasStandardBrowserEnv||Ct.hasStandardBrowserWebWorkerEnv)a.setContentType(void 0);else if(xe.isFunction(s.getHeaders)){const i=s.getHeaders(),c=["content-type","content-length"];Object.entries(i).forEach(([u,p])=>{c.includes(u.toLowerCase())&&a.set(u,p)})}}if(Ct.hasStandardBrowserEnv&&(n&&xe.isFunction(n)&&(n=n(o)),n||n!==!1&&u1(o.url))){const i=r&&l&&c1.read(l);i&&a.set(r,i)}return o},g1=typeof XMLHttpRequest<"u",f1=g1&&function(t){return new Promise(function(s,n){const r=H0(t);let l=r.data;const a=Lt.from(r.headers).normalize();let{responseType:d,onUploadProgress:i,onDownloadProgress:c}=r,u,p,w,f,v;function N(){f&&f(),v&&v(),r.cancelToken&&r.cancelToken.unsubscribe(u),r.signal&&r.signal.removeEventListener("abort",u)}let A=new XMLHttpRequest;A.open(r.method.toUpperCase(),r.url,!0),A.timeout=r.timeout;function F(){if(!A)return;const C=Lt.from("getAllResponseHeaders"in A&&A.getAllResponseHeaders()),$={data:!d||d==="text"||d==="json"?A.responseText:A.response,status:A.status,statusText:A.statusText,headers:C,config:t,request:A};O0(function(b){s(b),N()},function(b){n(b),N()},$),A=null}"onloadend"in A?A.onloadend=F:A.onreadystatechange=function(){!A||A.readyState!==4||A.status===0&&!(A.responseURL&&A.responseURL.indexOf("file:")===0)||setTimeout(F)},A.onabort=function(){A&&(n(new Be("Request aborted",Be.ECONNABORTED,t,A)),A=null)},A.onerror=function(j){const $=j&&j.message?j.message:"Network Error",y=new Be($,Be.ERR_NETWORK,t,A);y.event=j||null,n(y),A=null},A.ontimeout=function(){let j=r.timeout?"timeout of "+r.timeout+"ms exceeded":"timeout exceeded";const $=r.transitional||U0;r.timeoutErrorMessage&&(j=r.timeoutErrorMessage),n(new Be(j,$.clarifyTimeoutError?Be.ETIMEDOUT:Be.ECONNABORTED,t,A)),A=null},l===void 0&&a.setContentType(null),"setRequestHeader"in A&&xe.forEach(a.toJSON(),function(j,$){A.setRequestHeader($,j)}),xe.isUndefined(r.withCredentials)||(A.withCredentials=!!r.withCredentials),d&&d!=="json"&&(A.responseType=r.responseType),c&&([w,v]=On(c,!0),A.addEventListener("progress",w)),i&&A.upload&&([p,f]=On(i),A.upload.addEventListener("progress",p),A.upload.addEventListener("loadend",f)),(r.cancelToken||r.signal)&&(u=C=>{A&&(n(!C||C.type?new ws(null,t,A):C),A.abort(),A=null)},r.cancelToken&&r.cancelToken.subscribe(u),r.signal&&(r.signal.aborted?u():r.signal.addEventListener("abort",u)));const I=l1(r.url);if(I&&Ct.protocols.indexOf(I)===-1){n(new Be("Unsupported protocol "+I+":",Be.ERR_BAD_REQUEST,t));return}A.send(l||null)})},v1=(t,o)=>{const{length:s}=t=t?t.filter(Boolean):[];if(o||s){let n=new AbortController,r;const l=function(c){if(!r){r=!0,d();const u=c instanceof Error?c:this.reason;n.abort(u instanceof Be?u:new ws(u instanceof Error?u.message:u))}};let a=o&&setTimeout(()=>{a=null,l(new Be(`timeout ${o} of ms exceeded`,Be.ETIMEDOUT))},o);const d=()=>{t&&(a&&clearTimeout(a),a=null,t.forEach(c=>{c.unsubscribe?c.unsubscribe(l):c.removeEventListener("abort",l)}),t=null)};t.forEach(c=>c.addEventListener("abort",l));const{signal:i}=n;return i.unsubscribe=()=>xe.asap(d),i}},h1=function*(t,o){let s=t.byteLength;if(s<o){yield t;return}let n=0,r;for(;n<s;)r=n+o,yield t.slice(n,r),n=r},y1=async function*(t,o){for await(const s of x1(t))yield*h1(s,o)},x1=async function*(t){if(t[Symbol.asyncIterator]){yield*t;return}const o=t.getReader();try{for(;;){const{done:s,value:n}=await o.read();if(s)break;yield n}}finally{await o.cancel()}},uu=(t,o,s,n)=>{const r=y1(t,o);let l=0,a,d=i=>{a||(a=!0,n&&n(i))};return new ReadableStream({async pull(i){try{const{done:c,value:u}=await r.next();if(c){d(),i.close();return}let p=u.byteLength;if(s){let w=l+=p;s(w)}i.enqueue(new Uint8Array(u))}catch(c){throw d(c),c}},cancel(i){return d(i),r.return()}},{highWaterMark:2})},cu=64*1024,{isFunction:hn}=xe,b1=(({Request:t,Response:o})=>({Request:t,Response:o}))(xe.global),{ReadableStream:pu,TextEncoder:mu}=xe.global,gu=(t,...o)=>{try{return!!t(...o)}catch{return!1}},w1=t=>{t=xe.merge.call({skipUndefined:!0},b1,t);const{fetch:o,Request:s,Response:n}=t,r=o?hn(o):typeof fetch=="function",l=hn(s),a=hn(n);if(!r)return!1;const d=r&&hn(pu),i=r&&(typeof mu=="function"?(v=>N=>v.encode(N))(new mu):async v=>new Uint8Array(await new s(v).arrayBuffer())),c=l&&d&&gu(()=>{let v=!1;const N=new s(Ct.origin,{body:new pu,method:"POST",get duplex(){return v=!0,"half"}}).headers.has("Content-Type");return v&&!N}),u=a&&d&&gu(()=>xe.isReadableStream(new n("").body)),p={stream:u&&(v=>v.body)};r&&["text","arrayBuffer","blob","formData","stream"].forEach(v=>{!p[v]&&(p[v]=(N,A)=>{let F=N&&N[v];if(F)return F.call(N);throw new Be(`Response type '${v}' is not supported`,Be.ERR_NOT_SUPPORT,A)})});const w=async v=>{if(v==null)return 0;if(xe.isBlob(v))return v.size;if(xe.isSpecCompliantForm(v))return(await new s(Ct.origin,{method:"POST",body:v}).arrayBuffer()).byteLength;if(xe.isArrayBufferView(v)||xe.isArrayBuffer(v))return v.byteLength;if(xe.isURLSearchParams(v)&&(v=v+""),xe.isString(v))return(await i(v)).byteLength},f=async(v,N)=>{const A=xe.toFiniteNumber(v.getContentLength());return A??w(N)};return async v=>{let{url:N,method:A,data:F,signal:I,cancelToken:C,timeout:j,onDownloadProgress:$,onUploadProgress:y,responseType:b,headers:E,withCredentials:R="same-origin",fetchOptions:M}=H0(v),G=o||fetch;b=b?(b+"").toLowerCase():"text";let U=v1([I,C&&C.toAbortSignal()],j),_=null;const k=U&&U.unsubscribe&&(()=>{U.unsubscribe()});let L;try{if(y&&c&&A!=="get"&&A!=="head"&&(L=await f(E,F))!==0){let ee=new s(N,{method:"POST",body:F,duplex:"half"}),ge;if(xe.isFormData(F)&&(ge=ee.headers.get("content-type"))&&E.setContentType(ge),ee.body){const[de,ie]=lu(L,On(iu(y)));F=uu(ee.body,cu,de,ie)}}xe.isString(R)||(R=R?"include":"omit");const z=l&&"credentials"in s.prototype,q={...M,signal:U,method:A.toUpperCase(),headers:E.normalize().toJSON(),body:F,duplex:"half",credentials:z?R:void 0};_=l&&new s(N,q);let K=await(l?G(_,M):G(N,q));const H=u&&(b==="stream"||b==="response");if(u&&($||H&&k)){const ee={};["status","statusText","headers"].forEach(me=>{ee[me]=K[me]});const ge=xe.toFiniteNumber(K.headers.get("content-length")),[de,ie]=$&&lu(ge,On(iu($),!0))||[];K=new n(uu(K.body,cu,de,()=>{ie&&ie(),k&&k()}),ee)}b=b||"text";let O=await p[xe.findKey(p,b)||"text"](K,v);return!H&&k&&k(),await new Promise((ee,ge)=>{O0(ee,ge,{data:O,headers:Lt.from(K.headers),status:K.status,statusText:K.statusText,config:v,request:_})})}catch(z){throw k&&k(),z&&z.name==="TypeError"&&/Load failed|fetch/i.test(z.message)?Object.assign(new Be("Network Error",Be.ERR_NETWORK,v,_),{cause:z.cause||z}):Be.from(z,z&&z.code,v,_)}}},k1=new Map,q0=t=>{let o=t?t.env:{};const{fetch:s,Request:n,Response:r}=o,l=[n,r,s];let a=l.length,d=a,i,c,u=k1;for(;d--;)i=l[d],c=u.get(i),c===void 0&&u.set(i,c=d?new Map:w1(o)),u=c;return c};q0();const Zr={http:Uv,xhr:f1,fetch:{get:q0}};xe.forEach(Zr,(t,o)=>{if(t){try{Object.defineProperty(t,"name",{value:o})}catch{}Object.defineProperty(t,"adapterName",{value:o})}});const fu=t=>`- ${t}`,_1=t=>xe.isFunction(t)||t===null||t===!1,G0={getAdapter:(t,o)=>{t=xe.isArray(t)?t:[t];const{length:s}=t;let n,r;const l={};for(let a=0;a<s;a++){n=t[a];let d;if(r=n,!_1(n)&&(r=Zr[(d=String(n)).toLowerCase()],r===void 0))throw new Be(`Unknown adapter '${d}'`);if(r&&(xe.isFunction(r)||(r=r.get(o))))break;l[d||"#"+a]=r}if(!r){const a=Object.entries(l).map(([i,c])=>`adapter ${i} `+(c===!1?"is not supported by the environment":"is not available in the build"));let d=s?a.length>1?`since :
`+a.map(fu).join(`
`):" "+fu(a[0]):"as no adapter specified";throw new Be("There is no suitable adapter to dispatch the request "+d,"ERR_NOT_SUPPORT")}return r},adapters:Zr};function Cr(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new ws(null,t)}function vu(t){return Cr(t),t.headers=Lt.from(t.headers),t.data=Dr.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),G0.getAdapter(t.adapter||an.adapter,t)(t).then(function(n){return Cr(t),n.data=Dr.call(t,t.transformResponse,n),n.headers=Lt.from(n.headers),n},function(n){return V0(n)||(Cr(t),n&&n.response&&(n.response.data=Dr.call(t,t.transformResponse,n.response),n.response.headers=Lt.from(n.response.headers))),Promise.reject(n)})}const J0="1.12.2",ir={};["object","boolean","number","function","string","symbol"].forEach((t,o)=>{ir[t]=function(n){return typeof n===t||"a"+(o<1?"n ":" ")+t}});const hu={};ir.transitional=function(o,s,n){function r(l,a){return"[Axios v"+J0+"] Transitional option '"+l+"'"+a+(n?". "+n:"")}return(l,a,d)=>{if(o===!1)throw new Be(r(a," has been removed"+(s?" in "+s:"")),Be.ERR_DEPRECATED);return s&&!hu[a]&&(hu[a]=!0,console.warn(r(a," has been deprecated since v"+s+" and will be removed in the near future"))),o?o(l,a,d):!0}};ir.spelling=function(o){return(s,n)=>(console.warn(`${n} is likely a misspelling of ${o}`),!0)};function $1(t,o,s){if(typeof t!="object")throw new Be("options must be an object",Be.ERR_BAD_OPTION_VALUE);const n=Object.keys(t);let r=n.length;for(;r-- >0;){const l=n[r],a=o[l];if(a){const d=t[l],i=d===void 0||a(d,l,t);if(i!==!0)throw new Be("option "+l+" must be "+i,Be.ERR_BAD_OPTION_VALUE);continue}if(s!==!0)throw new Be("Unknown option "+l,Be.ERR_BAD_OPTION)}}const Tn={assertOptions:$1,validators:ir},so=Tn.validators;let Xo=class{constructor(o){this.defaults=o||{},this.interceptors={request:new ru,response:new ru}}async request(o,s){try{return await this._request(o,s)}catch(n){if(n instanceof Error){let r={};Error.captureStackTrace?Error.captureStackTrace(r):r=new Error;const l=r.stack?r.stack.replace(/^.+\n/,""):"";try{n.stack?l&&!String(n.stack).endsWith(l.replace(/^.+\n.+\n/,""))&&(n.stack+=`
`+l):n.stack=l}catch{}}throw n}}_request(o,s){typeof o=="string"?(s=s||{},s.url=o):s=o||{},s=ts(this.defaults,s);const{transitional:n,paramsSerializer:r,headers:l}=s;n!==void 0&&Tn.assertOptions(n,{silentJSONParsing:so.transitional(so.boolean),forcedJSONParsing:so.transitional(so.boolean),clarifyTimeoutError:so.transitional(so.boolean)},!1),r!=null&&(xe.isFunction(r)?s.paramsSerializer={serialize:r}:Tn.assertOptions(r,{encode:so.function,serialize:so.function},!0)),s.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?s.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:s.allowAbsoluteUrls=!0),Tn.assertOptions(s,{baseUrl:so.spelling("baseURL"),withXsrfToken:so.spelling("withXSRFToken")},!0),s.method=(s.method||this.defaults.method||"get").toLowerCase();let a=l&&xe.merge(l.common,l[s.method]);l&&xe.forEach(["delete","get","head","post","put","patch","common"],v=>{delete l[v]}),s.headers=Lt.concat(a,l);const d=[];let i=!0;this.interceptors.request.forEach(function(N){typeof N.runWhen=="function"&&N.runWhen(s)===!1||(i=i&&N.synchronous,d.unshift(N.fulfilled,N.rejected))});const c=[];this.interceptors.response.forEach(function(N){c.push(N.fulfilled,N.rejected)});let u,p=0,w;if(!i){const v=[vu.bind(this),void 0];for(v.unshift(...d),v.push(...c),w=v.length,u=Promise.resolve(s);p<w;)u=u.then(v[p++],v[p++]);return u}w=d.length;let f=s;for(;p<w;){const v=d[p++],N=d[p++];try{f=v(f)}catch(A){N.call(this,A);break}}try{u=vu.call(this,f)}catch(v){return Promise.reject(v)}for(p=0,w=c.length;p<w;)u=u.then(c[p++],c[p++]);return u}getUri(o){o=ts(this.defaults,o);const s=z0(o.baseURL,o.url,o.allowAbsoluteUrls);return B0(s,o.params,o.paramsSerializer)}};xe.forEach(["delete","get","head","options"],function(o){Xo.prototype[o]=function(s,n){return this.request(ts(n||{},{method:o,url:s,data:(n||{}).data}))}});xe.forEach(["post","put","patch"],function(o){function s(n){return function(l,a,d){return this.request(ts(d||{},{method:o,headers:n?{"Content-Type":"multipart/form-data"}:{},url:l,data:a}))}}Xo.prototype[o]=s(),Xo.prototype[o+"Form"]=s(!0)});let S1=class W0{constructor(o){if(typeof o!="function")throw new TypeError("executor must be a function.");let s;this.promise=new Promise(function(l){s=l});const n=this;this.promise.then(r=>{if(!n._listeners)return;let l=n._listeners.length;for(;l-- >0;)n._listeners[l](r);n._listeners=null}),this.promise.then=r=>{let l;const a=new Promise(d=>{n.subscribe(d),l=d}).then(r);return a.cancel=function(){n.unsubscribe(l)},a},o(function(l,a,d){n.reason||(n.reason=new ws(l,a,d),s(n.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(o){if(this.reason){o(this.reason);return}this._listeners?this._listeners.push(o):this._listeners=[o]}unsubscribe(o){if(!this._listeners)return;const s=this._listeners.indexOf(o);s!==-1&&this._listeners.splice(s,1)}toAbortSignal(){const o=new AbortController,s=n=>{o.abort(n)};return this.subscribe(s),o.signal.unsubscribe=()=>this.unsubscribe(s),o.signal}static source(){let o;return{token:new W0(function(r){o=r}),cancel:o}}};function D1(t){return function(s){return t.apply(null,s)}}function C1(t){return xe.isObject(t)&&t.isAxiosError===!0}const Qr={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Qr).forEach(([t,o])=>{Qr[o]=t});function Y0(t){const o=new Xo(t),s=D0(Xo.prototype.request,o);return xe.extend(s,Xo.prototype,o,{allOwnKeys:!0}),xe.extend(s,o,null,{allOwnKeys:!0}),s.create=function(r){return Y0(ts(t,r))},s}const Ie=Y0(an);Ie.Axios=Xo;Ie.CanceledError=ws;Ie.CancelToken=S1;Ie.isCancel=V0;Ie.VERSION=J0;Ie.toFormData=lr;Ie.AxiosError=Be;Ie.Cancel=Ie.CanceledError;Ie.all=function(o){return Promise.all(o)};Ie.spread=D1;Ie.isAxiosError=C1;Ie.mergeConfig=ts;Ie.AxiosHeaders=Lt;Ie.formToJSON=t=>F0(xe.isHTMLForm(t)?new FormData(t):t);Ie.getAdapter=G0.getAdapter;Ie.HttpStatusCode=Qr;Ie.default=Ie;const{Axios:ene,AxiosError:tne,CanceledError:one,isCancel:sne,CancelToken:nne,VERSION:rne,all:ane,Cancel:lne,isAxiosError:ine,spread:dne,toFormData:une,AxiosHeaders:cne,HttpStatusCode:pne,formToJSON:mne,getAdapter:gne,mergeConfig:fne}=Ie;Ie.defaults.baseURL="/api/v1";const T1="http://localhost:8080/api/v1",pe=Ie.create({baseURL:T1,timeout:12e4,headers:{"Content-Type":"application/json",Accept:"application/json"}});pe.interceptors.request.use(t=>{var n;const o=localStorage.getItem("auth_token");if(o&&(t.headers.Authorization=`Bearer ${o}`),!(t.url.includes("/auth/")||t.url.includes("/v1/auth/"))){const r=localStorage.getItem("current_tenant_id"),l=localStorage.getItem("current_entity_id");r&&(t.headers["X-Tenant-ID"]=r);const a=(n=t.url)==null?void 0:n.match(/\/entities\/(\d+)/),i=(a?a[1]:null)||l;i&&(t.headers["X-Entity-ID"]=i)}return t},t=>(console.error("Request error:",t),Promise.reject(t)));pe.interceptors.response.use(t=>t,t=>{var o,s,n,r,l,a,d;return console.error("API Error:",t.message),t.response&&(console.error(`Status: ${t.response.status}`,`Method: ${(s=(o=t.config)==null?void 0:o.method)==null?void 0:s.toUpperCase()}`,`URL: ${(n=t.config)==null?void 0:n.url}`),console.error("Response data:",t.response.data),t.response.status===401&&((l=(r=t.config)==null?void 0:r.url)!=null&&l.includes("/auth/login")||(d=(a=t.config)==null?void 0:a.url)!=null&&d.includes("/v1/auth/login")||(localStorage.removeItem("auth_token"),localStorage.removeItem("user_data"),localStorage.removeItem("current_tenant_id"),delete pe.defaults.headers.common.Authorization,delete pe.defaults.headers.common["X-Tenant-ID"],window.location.pathname.includes("/login")||(window.location.href="/login?error=session_expired")))),Promise.reject(t)});const E1={login:t=>pe.post("/auth/login",t),register:t=>pe.post("/auth/register",t),logout:()=>pe.post("/auth/logout"),refreshToken:()=>pe.post("/auth/refresh"),getProfile:()=>pe.get("/auth/me"),getPublicRoles:()=>pe.get("/auth/public-roles")},A1={create:t=>pe.post("/tenant/temples",t),getAll:()=>pe.get("/tenant/temples"),getById:t=>pe.get(`/tenant/temples/${t}`),update:(t,o)=>pe.put(`/tenant/temples/${t}`,o),delete:t=>pe.delete(`/tenant/temples/${t}`)},I1={devotee:{getProfile:()=>pe.get("/devotee/profile"),updateProfile:t=>pe.put("/devotee/profile",t),joinTemple:t=>pe.post("/devotee/join-temple",{templeId:t})},volunteer:{getProfile:()=>pe.get("/volunteer/profile"),updateProfile:t=>pe.put("/volunteer/profile",t),joinTemple:t=>pe.post("/volunteer/join-temple",{templeId:t})}},M1={getTemples:()=>pe.get("/superadmin/temples"),getPendingTemples:()=>pe.get("/superadmin/temples/pending"),approveTemple:(t,o)=>pe.post(`/superadmin/temples/${t}/approve`,{notes:o}),rejectTemple:(t,o)=>pe.post(`/superadmin/temples/${t}/reject`,{reason:o})},R1={getAll:()=>pe.get("/events"),getUpcoming:()=>pe.get("/events/upcoming"),getById:t=>pe.get(`/events/${t}`),getStats:()=>pe.get("/events/stats"),create:t=>pe.post("/events",t),update:(t,o)=>pe.put(`/events/${t}`,o),delete:t=>pe.delete(`/events/${t}`),getRSVPs:t=>pe.get(`/event-rsvps/${t}`),createRSVP:t=>pe.post(`/event-rsvps/${t}`,{})},P1={getEntityDashboard:t=>pe.get(`/entities/${t}/dashboard`),getEntityEvents:(t,o=3)=>pe.get(`/events/upcoming?entity_id=${t}&limit=${o}`),getEntityDonors:(t,o=5)=>pe.get(`/donations/top?entity_id=${t}&limit=${o}`),getEntityNotifications:(t,o=5)=>pe.get(`/notifications?entity_id=${t}&limit=${o}`)},N1={getTemplates:()=>pe.get("/notifications/templates"),createTemplate:t=>pe.post("/notifications/templates",t),updateTemplate:(t,o)=>pe.put(`/notifications/templates/${t}`,o),deleteTemplate:t=>pe.delete(`/notifications/templates/${t}`),sendBulk:(t,o)=>pe.post(`/entities/${t}/communication/bulk-send`,o),previewBulk:(t,o)=>pe.post(`/entities/${t}/communication/preview`,o),getHistory:(t,o)=>pe.get(`/entities/${t}/communication/history?${o}`),getMessageDetails:(t,o)=>pe.get(`/entities/${t}/communication/messages/${o}`),getDevotees:(t,o)=>pe.get(`/entities/${t}/devotees/for-messaging?${o}`),sendNotification:(t,o)=>pe.post(`/entities/${t}/communication/notifications`,o),getUnreadNotifications:(t,o)=>pe.get(`/entities/${t}/users/${o}/notifications/unread`),markNotificationAsRead:(t,o,s)=>pe.put(`/entities/${t}/users/${o}/notifications/${s}/read`),getStats:(t,o)=>pe.get(`/entities/${t}/communication/stats?${o}`),sendDirectNotification:t=>pe.post("/notifications/send",t)},j1={listInApp:(t=20)=>pe.get(`/notifications/inapp?limit=${t}`),markInAppRead:t=>pe.put(`/notifications/inapp/${t}/read`)},ea={getActivities:(t,o={})=>{const s=new URLSearchParams(o).toString();return pe.get(`/entities/${t}/reports/activities?${s}`)},downloadActivities:(t,o={})=>{const s=new URLSearchParams(o).toString();return pe.get(`/entities/${t}/reports/activities?${s}`,{responseType:"blob",headers:{Accept:"application/octet-stream"}})},getActivitiesByType:(t,o,s={})=>{const n={type:o,date_range:s.dateRange||"weekly",...s};return ea.getActivities(t,n)},downloadActivitiesByType:(t,o,s,n={})=>{const r={type:o,format:s,date_range:n.dateRange||"weekly",...n};return ea.downloadActivities(t,r)},getTempleRegistered:(t,o={})=>{const s=new URLSearchParams(o).toString();return pe.get(`/entities/${t}/reports/temple-registered?${s}`)},downloadTempleRegistered:(t,o={})=>{const s=new URLSearchParams(o).toString();return pe.get(`/entities/${t}/reports/temple-registered?${s}`,{responseType:"blob",headers:{Accept:"application/octet-stream"}})},getDevoteeBirthdays:(t,o={})=>{const s=new URLSearchParams(o).toString();return pe.get(`/entities/${t}/reports/devotee-birthdays?${s}`)},downloadDevoteeBirthdays:(t,o={})=>{const s=new URLSearchParams(o).toString();return pe.get(`/entities/${t}/reports/devotee-birthdays?${s}`,{responseType:"blob",headers:{Accept:"application/octet-stream"}})}},Fe={auth:E1,temple:A1,user:I1,admin:M1,event:R1,dashboard:P1,communication:N1,inapp:j1,reports:ea},yn={SUPER_ADMIN:"super_admin",TENANT:"tenant",DEVOTEE:"devotee",VOLUNTEER:"volunteer"},Tr={PENDING:"pending",APPROVED:"approved",REJECTED:"rejected"},L1="modulepreload",B1=function(t){return"/"+t},yu={},vt=function(o,s,n){let r=Promise.resolve();if(s&&s.length>0){let a=function(c){return Promise.all(c.map(u=>Promise.resolve(u).then(p=>({status:"fulfilled",value:p}),p=>({status:"rejected",reason:p}))))};document.getElementsByTagName("link");const d=document.querySelector("meta[property=csp-nonce]"),i=(d==null?void 0:d.nonce)||(d==null?void 0:d.getAttribute("nonce"));r=a(s.map(c=>{if(c=B1(c),c in yu)return;yu[c]=!0;const u=c.endsWith(".css"),p=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${p}`))return;const w=document.createElement("link");if(w.rel=u?"stylesheet":L1,u||(w.as="script"),w.crossOrigin="",w.href=c,i&&w.setAttribute("nonce",i),document.head.appendChild(w),u)return new Promise((f,v)=>{w.addEventListener("load",f),w.addEventListener("error",()=>v(new Error(`Unable to preload CSS for ${c}`)))})}))}function l(a){const d=new Event("vite:preloadError",{cancelable:!0});if(d.payload=a,window.dispatchEvent(d),!d.defaultPrevented)throw a}return r.then(a=>{for(const d of a||[])d.status==="rejected"&&l(d.reason);return o().catch(l)})},Es=B([]);let U1=0;const Ue=()=>{const t={SUCCESS:{icon:"",bgClass:"bg-green-50 border-green-200",textClass:"text-green-800",iconClass:"text-green-600"},ERROR:{icon:"",bgClass:"bg-red-50 border-red-200",textClass:"text-red-800",iconClass:"text-red-600"},WARNING:{icon:"",bgClass:"bg-yellow-50 border-yellow-200",textClass:"text-yellow-800",iconClass:"text-yellow-600"},INFO:{icon:"",bgClass:"bg-indigo-50 border-indigo-200",textClass:"text-indigo-800",iconClass:"text-indigo-600"}};function o(c,u="info",p=5e3){let w,f,v;return typeof c=="object"?(w=c.message,f=(c.type||"info").toUpperCase(),v=c.duration||5e3):(w=c,f=(u||"info").toUpperCase(),v=p),s(w,f,v)}const s=(c,u="INFO",p=5e3)=>{const w=++U1,f={id:w,message:c,type:u,duration:p,...t[u],timestamp:Date.now()};return Es.value.push(f),p>0&&setTimeout(()=>{n(w)},p),w},n=c=>{const u=Es.value.findIndex(p=>p.id===c);u>-1&&Es.value.splice(u,1)};return{toasts:Es,showToast:o,addToast:s,removeToast:n,clearAllToasts:()=>{Es.value=[]},success:(c,u=5e3)=>s(c,"SUCCESS",u),error:(c,u=7e3)=>s(c,"ERROR",u),warning:(c,u=6e3)=>s(c,"WARNING",u),info:(c,u=5e3)=>s(c,"INFO",u),TOAST_TYPES:t}},K0=()=>{const t=localStorage.getItem("temple_auth_token")||localStorage.getItem("auth_token");return t?(console.log(" Auth token found:",t.substring(0,20)+"..."),t):(console.log(" No auth token found in localStorage"),console.log("Available localStorage keys:",Object.keys(localStorage)),null)},pt=()=>{const t=K0();return t!=null&&t!==""},X0=()=>{localStorage.removeItem("temple_auth_token"),localStorage.removeItem("temple_user_data"),localStorage.removeItem("temple_user_role"),localStorage.removeItem("auth_token"),localStorage.removeItem("user_data")},xu=()=>{X0(),hs.currentRoute.value.path!=="/login"&&hs.push("/login")},Ht={async getProfile(){try{if(!pt())throw new Error("Authentication required");return await pe.get("/profiles/me")}catch(t){throw this.handleError(t)}},async getDevoteeById(t){try{if(!pt())throw new Error("Authentication required");return await pe.get(`/profiles/${t}`)}catch(o){throw this.handleError(o)}},async getDevoteeProfileByEntity(t,o){var s,n,r;try{if(console.log(" getDevoteeProfileByEntity called:",{entityId:t,userId:o}),!pt())throw console.error(" User not authenticated"),new Error("Authentication required");if(!t||!o)throw console.error(" Missing required parameters"),new Error("Entity ID and User ID are required");const l=parseInt(t,10),a=parseInt(o,10);console.log(" Making request to:",`/entities/${l}/devotees/${a}/profile`);const d=await pe.get(`/entities/${l}/devotees/${a}/profile`);return console.log(" Devotee profile fetched successfully"),d}catch(l){throw console.error(" getDevoteeProfileByEntity error:",{status:(s=l.response)==null?void 0:s.status,statusText:(n=l.response)==null?void 0:n.statusText,data:(r=l.response)==null?void 0:r.data,entityId:t,userId:o}),this.handleError(l)}},async createOrUpdateProfile(t){try{if(!pt())throw new Error("Authentication required");let o;return t instanceof FormData?o=await pe.post("/profiles",t,{headers:{"Content-Type":"multipart/form-data"}}):o=await pe.post("/profiles",t),o}catch(o){throw this.handleError(o)}},async updateProfile(t,o){try{if(!pt())throw new Error("Authentication required");let s;return o instanceof FormData?s=await pe.put("/profiles",o,{headers:{"Content-Type":"multipart/form-data"}}):s=await pe.put("/profiles",o),s}catch(s){throw this.handleError(s)}},async joinTemple(t){try{if(!pt())throw new Error("Authentication required");const o=parseInt(t,10);return await pe.post("/memberships",{entity_id:o})}catch(o){throw this.handleError(o)}},async getMemberships(){try{if(!pt())throw new Error("Authentication required");return await pe.get("/memberships")}catch(t){throw this.handleError(t)}},async checkTempleJoined(t){var o;try{if(!pt())throw new Error("Authentication required");const s=parseInt(t,10);return await pe.get(`/memberships/check/${s}`)}catch(s){if(((o=s.response)==null?void 0:o.status)===404)return{data:{joined:!1}};throw this.handleError(s)}},async getAllDevotees(t){var o,s,n,r;try{if(console.log(" getAllDevotees called with entityId:",t,"type:",typeof t),!pt())throw console.error(" User not authenticated"),new Error("Authentication required");if(!t)throw console.error(" Entity ID is missing"),new Error("Entity ID is required");const l=parseInt(t,10);console.log(" Parsed entityId:",l,"type:",typeof l);const a=localStorage.getItem("temple_user_data")||localStorage.getItem("user_data");if(a)try{const u=JSON.parse(a);console.log(" Current user:",{id:u.id,email:u.email,role:u.role})}catch{console.warn(" Could not parse user data")}const d=localStorage.getItem("current_entity_id"),i=localStorage.getItem("current_tenant_id");console.log(" Current context:",{entityId:l,storedEntityId:d,storedTenantId:i}),console.log(" Making request to:",`/entities/${l}/devotees`);const c=await pe.get(`/entities/${l}/devotees`);return console.log(" Devotees fetched successfully:",((o=c.data)==null?void 0:o.length)||0),c}catch(l){throw console.error(" getAllDevotees error:",{status:(s=l.response)==null?void 0:s.status,statusText:(n=l.response)==null?void 0:n.statusText,data:(r=l.response)==null?void 0:r.data,entityId:t}),this.handleError(l)}},async getDevoteeStats(t){var o,s,n;try{if(console.log(" getDevoteeStats called with entityId:",t,"type:",typeof t),!pt())throw console.error(" User not authenticated"),new Error("Authentication required");if(!t)throw console.error(" Entity ID is missing"),new Error("Entity ID is required");const r=parseInt(t,10);console.log(" Parsed entityId:",r,"type:",typeof r),console.log(" Making request to:",`/entities/${r}/devotee-stats`);const l=await pe.get(`/entities/${r}/devotee-stats`);return console.log(" Devotee stats fetched successfully"),l}catch(r){throw console.error(" getDevoteeStats error:",{status:(o=r.response)==null?void 0:o.status,statusText:(s=r.response)==null?void 0:s.statusText,data:(n=r.response)==null?void 0:n.data,entityId:t}),this.handleError(r)}},async updateDevoteeStatus(t,o,s){var n,r,l;try{if(console.log(" updateDevoteeStatus called:",{entityId:t,devoteeId:o,status:s}),console.log(" Parameter types:",{entityIdType:typeof t,devoteeIdType:typeof o}),!pt())throw console.error(" User not authenticated"),new Error("Authentication required");if(!t||!o||!s)throw console.error(" Missing required parameters"),new Error("Entity ID, Devotee ID, and Status are required");const a=parseInt(t,10),d=parseInt(o,10);if(console.log(" Parsed IDs:",{parsedEntityId:a,parsedDevoteeId:d,entityIdType:typeof a,devoteeIdType:typeof d}),isNaN(a)||isNaN(d))throw console.error(" Invalid ID format after parsing"),new Error("Invalid entity ID or devotee ID format");console.log(" Making request to:",`/entities/${a}/devotees/${d}/status`);const i=await pe.patch(`/entities/${a}/devotees/${d}/status`,{status:s});return console.log(" Devotee status updated successfully"),i}catch(a){throw console.error(" updateDevoteeStatus error:",{status:(n=a.response)==null?void 0:n.status,statusText:(r=a.response)==null?void 0:r.statusText,data:(l=a.response)==null?void 0:l.data,entityId:t,devoteeId:o,newStatus:s}),this.handleError(a)}},async getAllProfiles(){try{if(!pt())throw new Error("Authentication required");return await pe.get("/profiles")}catch(t){throw this.handleError(t)}},async addFamilyMember(t,o){try{if(!pt())throw new Error("Authentication required");const s=parseInt(t,10);return await pe.post(`/profiles/${s}/family`,o)}catch(s){throw this.handleError(s)}},async updateFamilyMember(t,o,s){try{if(!pt())throw new Error("Authentication required");const n=parseInt(t,10),r=parseInt(o,10);return await pe.put(`/profiles/${n}/family/${r}`,s)}catch(n){throw this.handleError(n)}},async removeFamilyMember(t,o){try{if(!pt())throw new Error("Authentication required");const s=parseInt(t,10),n=parseInt(o,10);return await pe.delete(`/profiles/${s}/family/${n}`)}catch(s){throw this.handleError(s)}},async getDashboardData(t){try{if(!pt())throw new Error("Authentication required");const o=parseInt(t,10);return await pe.get(`/entity/${o}/devotee/dashboard`)}catch(o){throw console.warn("Dashboard endpoint not available"),this.handleError(o)}},async searchTemples(t={}){try{if(!pt())throw new Error("Authentication required");return await pe.get("/temples/search",{params:t})}catch(o){throw this.handleError(o)}},async getRecentTemples(){try{if(!pt())throw new Error("Authentication required");return await pe.get("/temples/recent")}catch(t){throw this.handleError(t)}},handleError(t){var o,s,n,r,l,a,d,i,c,u,p,w,f,v,N,A,F,I;if(((o=t.response)==null?void 0:o.status)===401)return console.error(" 401 Authentication error:",(s=t.response)==null?void 0:s.data),xu(),new Error("Authentication failed. Please login again.");if(((n=t.response)==null?void 0:n.status)===403){console.error(" 403 Authorization error:",(r=t.response)==null?void 0:r.data);const C=((a=(l=t.response)==null?void 0:l.data)==null?void 0:a.error)||"Access denied. You do not have permission to perform this action.";return new Error(C)}if(((d=t.response)==null?void 0:d.status)===404)return new Error("The requested resource was not found.");if(((i=t.response)==null?void 0:i.status)===400){console.error(" 400 Bad Request error:",(c=t.response)==null?void 0:c.data);const C=((p=(u=t.response)==null?void 0:u.data)==null?void 0:p.error)||((f=(w=t.response)==null?void 0:w.data)==null?void 0:f.message)||"Bad request. Please check your input.";return new Error(C)}return((v=t.response)==null?void 0:v.status)>=500?new Error("Server error. Please try again later."):t.code==="NETWORK_ERROR"||!t.response?new Error("Network error. Please check your internet connection."):t.code==="ECONNABORTED"?new Error("Request timeout. Please try again."):(A=(N=t.response)==null?void 0:N.data)!=null&&A.message?new Error(t.response.data.message):(I=(F=t.response)==null?void 0:F.data)!=null&&I.error?new Error(t.response.data.error):t.message?new Error(t.message):new Error("An unexpected error occurred")},isAuthenticated:pt,getAuthToken:K0,clearAuth:X0,redirectToLogin:xu},F1={SUPER_ADMIN:{id:"SUPER_ADMIN",name:"Super Administrator",description:"Internal system administrator with full access",permissions:["manage_tenants","manage_temples","approve_tenants","approve_temples","system_settings","view_all_data"],dashboard:"/admin/dashboard",allowRegistration:!1,internal:!0},TENANT:{id:"TENANT",name:"Temple Administrator",description:"Creates and manages temples",permissions:["create_temple","manage_own_temples","view_temple_stats","upload_documents"],dashboard:"/tenant/dashboard",allowRegistration:!0,requiresApproval:!0,internal:!1},DEVOTEE:{id:"DEVOTEE",name:"Devotee",description:"Temple member who can book sevas and donate",permissions:["join_temple","book_seva","make_donation","view_events","manage_profile","view_donation_history"],dashboard:"/entity/:id/devotee/dashboard",allowRegistration:!0,requiresApproval:!1,internal:!1},VOLUNTEER:{id:"VOLUNTEER",name:"Volunteer",description:"Temple volunteer who assists with temple activities",permissions:["join_temple","view_assignments","view_events","manage_profile"],dashboard:"/entity/:id/volunteer/dashboard",allowRegistration:!0,requiresApproval:!1,internal:!1}},V1={PENDING:{value:"PENDING",label:"Pending Approval",color:"bg-yellow-100 text-yellow-800",icon:"clock"},APPROVED:{value:"APPROVED",label:"Approved",color:"bg-green-100 text-green-800",icon:"check-circle"},REJECTED:{value:"REJECTED",label:"Rejected",color:"bg-red-100 text-red-800",icon:"x-circle"}},O1={TENANT:{postRegistration:"PENDING",emailTemplate:"tenant_registration_received",approvalRequired:!0,redirectAfterApproval:"/tenant/dashboard"},DEVOTEE:{postRegistration:"ACTIVE",emailTemplate:"devotee_welcome",approvalRequired:!1,redirectAfterRegistration:"/devotee/temple-selection"},VOLUNTEER:{postRegistration:"ACTIVE",emailTemplate:"volunteer_welcome",approvalRequired:!1,redirectAfterRegistration:"/volunteer/temple-selection"}},bu={roles:F1,statusTypes:V1,registrationFlow:O1},yt=B(null),mo=B(localStorage.getItem("auth_token")),Et=B(!1),wu=B(!1),go=B(localStorage.getItem("assigned_tenant_id"));function ln(){const t=oe(()=>!!mo.value&&!!yt.value),o=oe(()=>{var _;return((_=yt.value)==null?void 0:_.role)||null}),s=oe(()=>{var _;return((_=yt.value)==null?void 0:_.status)||null}),n=oe(()=>{var _;return((_=yt.value)==null?void 0:_.current_entity)||null}),r=oe(()=>o.value===yn.SUPER_ADMIN),l=oe(()=>o.value===yn.TENANT),a=oe(()=>o.value===yn.DEVOTEE),d=oe(()=>o.value===yn.VOLUNTEER),i=oe(()=>a.value||d.value),c=oe(()=>{const _=(o.value||"").toLowerCase();return _==="standard_user"||_==="standarduser"}),u=oe(()=>{const _=(o.value||"").toLowerCase();return _==="monitoring_user"||_==="monitoringuser"}),p=oe(()=>s.value===Tr.PENDING),w=oe(()=>s.value===Tr.APPROVED),f=oe(()=>s.value===Tr.REJECTED),v=oe(()=>{const _=!!localStorage.getItem("auth_token"),k=!!localStorage.getItem("user_data"),L=!!localStorage.getItem("assigned_tenant_id"),z=!!localStorage.getItem("current_tenant_id");return _||k||L||z}),N=_=>{try{const L=_.split(".")[1].replace(/-/g,"+").replace(/_/g,"/"),z=decodeURIComponent(atob(L).split("").map(function(q){return"%"+("00"+q.charCodeAt(0).toString(16)).slice(-2)}).join(""));return JSON.parse(z)}catch(k){return console.error("Error parsing JWT token:",k),{}}},A=_=>bu.roles[_]||null,F=()=>{if(!yt.value)return"/login";const _=A(o.value);return _?c.value||u.value?go.value?(console.log(` Redirecting ${o.value} to assigned tenant: ${go.value}`),`/tenant/${go.value}/dashboard`):"/tenant-selection":a.value?"/devotee/temple-selection":d.value&&n.value?_.dashboard.replace(":id",n.value.id):_.dashboard:"/login"},I=()=>v.value?(console.log(" Returning user detected - redirecting to login"),"/login"):(console.log(" New user detected - showing landing page"),"/"),C=_=>{var L;if(!yt.value)return!1;const k=A(o.value);return((L=k==null?void 0:k.permissions)==null?void 0:L.includes(_))||!1},j=(_,k=null,L=[])=>!t.value||k&&o.value!==k?!1:L.length>0?L.every(z=>C(z)):!0,$=async _=>{var L,z;const{showToast:k}=Ue();try{Et.value=!0;const q=await Fe.auth.login(_),{user:K,token:H}=q.data;mo.value=H,yt.value=K,localStorage.setItem("auth_token",H),localStorage.setItem("user_data",JSON.stringify(K));try{const ee=N(H);ee.assigned_tenant_id&&(go.value=ee.assigned_tenant_id,localStorage.setItem("assigned_tenant_id",ee.assigned_tenant_id),console.log("Found assigned tenant ID in token:",ee.assigned_tenant_id),Fe.setTenantId(ee.assigned_tenant_id))}catch(ee){console.error("Failed to parse token for assigned tenant ID:",ee)}k("Login successful!","success");const O=F();return{success:!0,user:K,redirectPath:O}}catch(q){return console.error("Login failed:",q),{success:!1,error:((z=(L=q.response)==null?void 0:L.data)==null?void 0:z.message)||"Login failed"}}finally{Et.value=!1}},y=async _=>{var L,z;const{showToast:k}=Ue();try{Et.value=!0;const q=await Fe.auth.register(_),{user:K,message:H}=q.data,O=bu.registrationFlow[_.role];if(O.approvalRequired)return k(H||"Registration successful! You will be notified after approval.","success"),{success:!0,user:K,redirectPath:"/auth/pending-approval"};if(k(H||"Registration successful! Please join a temple to continue.","success"),q.data.token){mo.value=q.data.token,yt.value=K,localStorage.setItem("auth_token",q.data.token),localStorage.setItem("user_data",JSON.stringify(K));try{const ee=N(q.data.token);ee.assigned_tenant_id&&(go.value=ee.assigned_tenant_id,localStorage.setItem("assigned_tenant_id",ee.assigned_tenant_id),console.log("Found assigned tenant ID in token:",ee.assigned_tenant_id),Fe.setTenantId(ee.assigned_tenant_id))}catch(ee){console.error("Failed to parse token for assigned tenant ID:",ee)}return{success:!0,user:K,redirectPath:O.redirectAfterRegistration}}else return{success:!0,user:K,redirectPath:"/login"}}catch(q){return console.error("Registration failed:",q),{success:!1,error:((z=(L=q.response)==null?void 0:L.data)==null?void 0:z.message)||"Registration failed"}}finally{Et.value=!1}},b=async()=>{const{showToast:_}=Ue();try{Et.value=!0,mo.value&&await Fe.auth.logout()}catch(k){console.error("Logout error:",k)}finally{return mo.value=null,yt.value=null,go.value=null,localStorage.removeItem("auth_token"),localStorage.removeItem("user_data"),localStorage.removeItem("current_tenant_id"),localStorage.removeItem("assigned_tenant_id"),Et.value=!1,_("Logged out successfully","success"),{success:!0,redirectPath:"/login"}}},E=async _=>{var L,z;const{showToast:k}=Ue();try{return Et.value=!0,await Fe.auth.forgotPassword(_),k("Password reset link sent to your email","success"),{success:!0}}catch(q){return console.error("Forgot password failed:",q),{success:!1,error:((z=(L=q.response)==null?void 0:L.data)==null?void 0:z.message)||"Failed to send reset link"}}finally{Et.value=!1}},R=async(_,k)=>{var z,q;const{showToast:L}=Ue();try{return Et.value=!0,await Fe.auth.resetPassword(_,k),L("Password reset successful! Please login with your new password.","success"),{success:!0,redirectPath:"/login"}}catch(K){return console.error("Reset password failed:",K),{success:!1,error:((q=(z=K.response)==null?void 0:z.data)==null?void 0:q.message)||"Password reset failed"}}finally{Et.value=!1}},M=async()=>{try{const _=localStorage.getItem("auth_token"),k=localStorage.getItem("user_data");if(_&&k){mo.value=_,yt.value=JSON.parse(k);try{const L=N(_);L.assigned_tenant_id&&(go.value=L.assigned_tenant_id,localStorage.setItem("assigned_tenant_id",L.assigned_tenant_id),console.log("Found assigned tenant ID in token:",L.assigned_tenant_id),Fe.setTenantId(L.assigned_tenant_id))}catch(L){console.error("Failed to parse token for assigned tenant ID:",L)}try{const L=await Fe.auth.refreshToken();if(L.data.token){mo.value=L.data.token,localStorage.setItem("auth_token",L.data.token);try{const z=N(L.data.token);z.assigned_tenant_id&&(go.value=z.assigned_tenant_id,localStorage.setItem("assigned_tenant_id",z.assigned_tenant_id),console.log("Found assigned tenant ID in refreshed token:",z.assigned_tenant_id),Fe.setTenantId(z.assigned_tenant_id))}catch(z){console.error("Failed to parse refreshed token for assigned tenant ID:",z)}}}catch{console.warn("Token refresh failed, clearing auth state"),await b()}}}catch(_){console.error("Auth initialization failed:",_)}finally{wu.value=!0}},G=async _=>{var L,z;const{showToast:k}=Ue();try{Et.value=!0;let q;if(l.value)q=await Fe.tenant.updateProfile(_);else if(a.value)q=await Fe.devotee.updateProfile(_);else throw new Error("Profile update not supported for this role");return yt.value={...yt.value,...q.data.user},localStorage.setItem("user_data",JSON.stringify(yt.value)),k("Profile updated successfully!","success"),{success:!0,user:yt.value}}catch(q){return console.error("Profile update failed:",q),{success:!1,error:((z=(L=q.response)==null?void 0:L.data)==null?void 0:z.message)||"Profile update failed"}}finally{Et.value=!1}},U=async _=>{var L,z,q;const{showToast:k}=Ue();try{Et.value=!0;let K;if(a.value)K=await Fe.devotee.joinTemple(_);else if(d.value)K=await Fe.volunteer.joinTemple(_);else throw new Error("Only devotees and volunteers can join temples");const H=K.data.entity_id||_,O={...yt.value,current_entity:{id:H,...K.data.temple}};yt.value=O,localStorage.setItem("user_data",JSON.stringify(O)),k(`Successfully joined ${((L=K.data.temple)==null?void 0:L.name)||"temple"}!`,"success");const ee=F();return{success:!0,temple:K.data.temple,entityId:H,redirectPath:ee}}catch(K){return console.error("Join temple failed:",K),{success:!1,error:((q=(z=K.response)==null?void 0:z.data)==null?void 0:q.message)||"Failed to join temple"}}finally{Et.value=!1}};return Oe(mo,_=>{},{immediate:!0}),{user:oe(()=>yt.value),token:oe(()=>mo.value),isLoading:oe(()=>Et.value),isInitialized:oe(()=>wu.value),assignedTenantId:oe(()=>go.value),isAuthenticated:t,userRole:o,userStatus:s,currentEntity:n,isSuperAdmin:r,isTenant:l,isDevotee:a,isVolunteer:d,isEndUser:i,isStandardUser:c,isMonitoringUser:u,isPending:p,isApproved:w,isRejected:f,isReturningUser:v,login:$,register:y,logout:b,forgotPassword:E,resetPassword:R,initializeAuth:M,updateProfile:G,joinTemple:U,hasPermission:C,canAccessRoute:j,getDashboardPath:F,getInitialRedirectPath:I,getRoleConfig:A,parseJwt:N}}const{logout:Ho}=ln(),{showToast:Ye}=Ue(),ht={async createDonation(t){var o,s,n;try{console.log("Creating donation with data:",t);const r=this.getCurrentEntityId(),l=localStorage.getItem("current_tenant_id");if(!r)throw new Error("No entity ID available for donation creation");console.log(`Creating donation for entity ID: ${r}, tenant ID: ${l}`);const a={Amount:Number(t.amount),DonationType:t.donationType||t.type||t.donation_type,Note:t.note||t.purpose||""};t.referenceID&&(a.ReferenceID=t.referenceID),console.log("Sending donation payload:",a);const d={headers:{Authorization:`Bearer ${localStorage.getItem("auth_token")}`,"Content-Type":"application/json","X-Tenant-ID":l,"X-Entity-ID":r}},i=`/donations?entity_id=${r}`,c=await Ie.post(i,a,d);return console.log("Create donation response:",c.data),console.log("Full response structure:",JSON.stringify(c.data,null,2)),c.data}catch(r){if(console.error("Error creating donation:",r),((o=r.response)==null?void 0:o.status)===401)Ye("Please login to make a donation","error"),Ho();else if(((s=r.response)==null?void 0:s.status)===400){const l=((n=r.response.data)==null?void 0:n.error)||"Invalid donation data";Ye(l,"error"),console.error("Validation error:",l)}else Ye("Failed to create donation","error");throw r}},async verifyDonation(t){var o;try{console.log("Verifying donation with payment data:",t);const s={paymentID:t.razorpay_payment_id||t.paymentID,orderID:t.razorpay_order_id||t.orderID,razorpaySig:t.razorpay_signature||t.razorpaySig};console.log("Sending verification payload:",s);const n=await pe.post("/donations/verify",s);return console.log("Verify donation response:",n.data),console.log("Verification response structure:",JSON.stringify(n.data,null,2)),n.data}catch(s){throw console.error("Error verifying donation:",s),((o=s.response)==null?void 0:o.status)===400?Ye("Payment verification failed","error"):Ye("Failed to verify donation","error"),s}},async getMyDonations(){var t,o;try{console.log("Calling getMyDonations API...");const s=this.getCurrentEntityId(),n=localStorage.getItem("current_tenant_id");console.log(`Fetching my donations for entity ID: ${s}, tenant ID: ${n}`);const r={headers:{Authorization:`Bearer ${localStorage.getItem("auth_token")}`,"Content-Type":"application/json","X-Tenant-ID":n,"X-Entity-ID":s}},l=s?`/donations/my?entity_id=${s}`:"/donations/my",a=await Ie.get(l,r);if(console.log("My donations raw response:",a),console.log("My donations response data:",a.data),a.data&&a.data.success){const d=a.data.data||[];return console.log("Extracted donations from successful response:",d),d}else return Array.isArray(a.data)?(console.log("Response data is array:",a.data),a.data):a.data&&a.data.data?(console.log("Response has data property:",a.data.data),a.data.data):(console.log("Fallback: returning data or empty array"),a.data||[])}catch(s){if(console.error("Error fetching my donations:",s),((t=s.response)==null?void 0:t.status)===401)Ye("Please login to view your donations","error"),Ho();else{if(((o=s.response)==null?void 0:o.status)===404)return console.warn("My donations endpoint not found - this is expected if not implemented yet"),[];Ye("Failed to load your donations","error")}throw s}},async getMyRecentDonations(){var t,o;try{console.log("Calling getMyRecentDonations API...");const s=this.getCurrentEntityId(),n=localStorage.getItem("current_tenant_id");console.log(`Fetching my recent donations for entity ID: ${s}, tenant ID: ${n}`);const r={headers:{Authorization:`Bearer ${localStorage.getItem("auth_token")}`,"Content-Type":"application/json","X-Tenant-ID":n,"X-Entity-ID":s}},l=s?`/donations/recent?entity_id=${s}`:"/donations/recent",a=await Ie.get(l,r);if(console.log("Recent donations raw response:",a),console.log("Recent donations response data:",a.data),a.data&&a.data.recent_donations&&Array.isArray(a.data.recent_donations)){const d=a.data.recent_donations.map(i=>({id:i.id||i.ID||Math.random(),amount:i.amount||i.Amount,donation_type:i.donation_type||i.DonationType,donationType:i.donation_type||i.DonationType,type:i.donation_type||i.DonationType,method:i.method||i.Method,status:i.status||i.Status,date:i.donated_at||i.DonatedAt||i.date,donation_date:i.donated_at||i.DonatedAt,donated_at:i.donated_at||i.DonatedAt,note:i.note||i.Note||i.purpose}));return console.log("Mapped recent donations:",d),d}else return Array.isArray(a.data)?a.data.map(d=>({id:d.id||d.ID||Math.random(),amount:d.amount||d.Amount,donation_type:d.donation_type||d.DonationType,donationType:d.donation_type||d.DonationType,type:d.donation_type||d.DonationType,method:d.method||d.Method,status:d.status||d.Status,date:d.donated_at||d.DonatedAt||d.date,donation_date:d.donated_at||d.DonatedAt,donated_at:d.donated_at||d.DonatedAt,note:d.note||d.Note||d.purpose})):(console.warn("Unexpected response format for recent donations:",a.data),[])}catch(s){if(console.error("Error fetching recent donations:",s),((t=s.response)==null?void 0:t.status)===401)Ye("Please login to view your recent donations","error"),Ho();else{if(((o=s.response)==null?void 0:o.status)===404)return console.warn("Recent donations endpoint not found"),[];Ye("Failed to load recent donations","error")}return[]}},async getDonationStats(){var t,o;try{const s=this.getCurrentEntityId(),n=localStorage.getItem("current_tenant_id");console.log(`Fetching donation stats for entity ID: ${s}, tenant ID: ${n}`);const r={headers:{Authorization:`Bearer ${localStorage.getItem("auth_token")}`,"Content-Type":"application/json","X-Tenant-ID":n,"X-Entity-ID":s}},l=s?`/donations/dashboard?entity_id=${s}`:"/donations/dashboard",a=await Ie.get(l,r);return console.log("Dashboard stats response:",a.data),a.data}catch(s){throw console.error("Error fetching donation stats:",s),((t=s.response)==null?void 0:t.status)===403?Ye("You do not have permission to view statistics","error"):((o=s.response)==null?void 0:o.status)===401?(Ye("Please login to view statistics","error"),Ho()):Ye("Failed to load statistics","error"),s}},async getRecentDonations(t=5){var o,s;try{const n=this.getCurrentEntityId(),r=localStorage.getItem("current_tenant_id"),l={headers:{Authorization:`Bearer ${localStorage.getItem("auth_token")}`,"Content-Type":"application/json","X-Tenant-ID":r,"X-Entity-ID":n}};try{const i=n?`/donations/recent?entity_id=${n}&limit=${t}`:`/donations/recent?limit=${t}`,c=await Ie.get(i,l);if(c.data&&c.data.recent_donations)return c.data.recent_donations.slice(0,t)}catch(i){console.warn("Recent donations endpoint failed, falling back to general endpoint:",i)}const a=n?`/donations?entity_id=${n}&limit=${t}&page=1`:`/donations?limit=${t}&page=1`,d=await Ie.get(a,l);return console.log("Recent donations response:",d.data),((o=d.data)==null?void 0:o.data)||[]}catch(n){throw console.error("Error fetching recent donations:",n),((s=n.response)==null?void 0:s.status)===403?Ye("You do not have permission to view recent donations","error"):Ye("Failed to load recent donations","error"),n}},async getDonations(t={}){var o,s,n;try{const r=this.getCurrentEntityId(),l=localStorage.getItem("current_tenant_id");console.log(`Fetching donations for entity ID: ${r}, tenant ID: ${l}`);const a={page:t.page||1,limit:t.limit||20,...r?{entity_id:r}:{},...t.status&&t.status!=="all"?{status:t.status}:{},...t.type&&t.type!=="all"?{type:t.type}:{},...t.method&&t.method!=="all"?{method:t.method}:{},...t.search?{search:t.search}:{},...t.min!==void 0&&t.min!==null&&t.min!==""?{min:t.min}:{},...t.max!==void 0&&t.max!==null&&t.max!==""?{max:t.max}:{},...t.from?{from:t.from}:{},...t.to?{to:t.to}:{},...t.dateRange&&t.dateRange!=="all"?{dateRange:t.dateRange}:{}},d={headers:{Authorization:`Bearer ${localStorage.getItem("auth_token")}`,"Content-Type":"application/json","X-Tenant-ID":l,"X-Entity-ID":r}};console.log("Fetching donations with params:",a);const i=await Ie.get("/donations/",{params:a,...d});return console.log("Get donations response:",i.data),i.data}catch(r){throw console.error("Error fetching donations:",r),((o=r.response)==null?void 0:o.status)===403?(Ye("You do not have permission to view donations","error"),Ho()):((s=r.response)==null?void 0:s.status)===404?Ye("Donation endpoint not found","error"):((n=r.response)==null?void 0:n.status)===401?(Ye("Please login to view donations","error"),Ho()):Ye("Failed to load donations","error"),r}},async getDashboard(){var t,o;try{const s=this.getCurrentEntityId(),n=localStorage.getItem("current_tenant_id"),r={headers:{Authorization:`Bearer ${localStorage.getItem("auth_token")}`,"Content-Type":"application/json","X-Tenant-ID":n,"X-Entity-ID":s}},l=s?`/donations/dashboard?entity_id=${s}`:"/donations/dashboard",a=await Ie.get(l,r);return console.log("Dashboard data response:",a.data),a.data}catch(s){throw console.error("Error fetching donation dashboard:",s),((t=s.response)==null?void 0:t.status)===401?(Ye("Please login to view dashboard","error"),Ho()):((o=s.response)==null?void 0:o.status)===403?Ye("You do not have permission to view dashboard","error"):Ye("Failed to load dashboard data","error"),s}},async getTopDonors(t=5){var o;try{const s=this.getCurrentEntityId(),n=localStorage.getItem("current_tenant_id"),r={headers:{Authorization:`Bearer ${localStorage.getItem("auth_token")}`,"Content-Type":"application/json","X-Tenant-ID":n,"X-Entity-ID":s}},l={limit:t,...s?{entity_id:s}:{}},a=await Ie.get("/donations/top-donors",{params:l,...r});return console.log("Top donors response:",a.data),a.data}catch(s){throw console.error("Error fetching top donors:",s),((o=s.response)==null?void 0:o.status)===403?Ye("You do not have permission to view top donors","error"):Ye("Failed to load top donors","error"),s}},async getAnalytics(t=30){var o;try{const s=this.getCurrentEntityId(),n=localStorage.getItem("current_tenant_id"),r={headers:{Authorization:`Bearer ${localStorage.getItem("auth_token")}`,"Content-Type":"application/json","X-Tenant-ID":n,"X-Entity-ID":s}},l={days:t,...s?{entity_id:s}:{}},a=await Ie.get("/donations/analytics",{params:l,...r});return console.log("Analytics response:",a.data),a.data}catch(s){throw console.error("Error fetching analytics:",s),((o=s.response)==null?void 0:o.status)===403?Ye("You do not have permission to view analytics","error"):Ye("Failed to load analytics","error"),s}},async generateReceipt(t){var o,s;try{const n=this.getCurrentEntityId(),r=localStorage.getItem("current_tenant_id"),l={headers:{Authorization:`Bearer ${localStorage.getItem("auth_token")}`,"Content-Type":"application/json","X-Tenant-ID":r,"X-Entity-ID":n}},a=n?`/donations/${t}/receipt?entity_id=${n}`:`/donations/${t}/receipt`,d=await Ie.get(a,l);return console.log("Receipt response:",d.data),d.data}catch(n){throw console.error("Error generating receipt:",n),((o=n.response)==null?void 0:o.status)===403?Ye("You do not have permission to generate receipts","error"):((s=n.response)==null?void 0:s.status)===404?Ye("Donation not found","error"):Ye("Failed to generate receipt","error"),n}},async exportDonations(t={},o="csv"){var s;try{const n=this.getCurrentEntityId(),r=localStorage.getItem("current_tenant_id"),l={format:o,...n?{entity_id:n}:{},...t.status&&t.status!=="all"?{status:t.status}:{},...t.type&&t.type!=="all"?{type:t.type}:{},...t.method&&t.method!=="all"?{method:t.method}:{},...t.search?{search:t.search}:{},...t.from?{from:t.from}:{},...t.to?{to:t.to}:{}},a={headers:{Authorization:`Bearer ${localStorage.getItem("auth_token")}`,"X-Tenant-ID":r,"X-Entity-ID":n}},d=await Ie.get("/donations/export",{params:l,...a,responseType:"blob"}),i=window.URL.createObjectURL(new Blob([d.data])),c=document.createElement("a");return c.href=i,c.setAttribute("download",`donations_export_${new Date().toISOString().slice(0,10)}.${o}`),document.body.appendChild(c),c.click(),document.body.removeChild(c),window.URL.revokeObjectURL(i),d.data}catch(n){throw console.error("Error exporting donations:",n),((s=n.response)==null?void 0:s.status)===403?Ye("You do not have permission to export donations","error"):Ye("Failed to export donations","error"),n}},getCurrentEntityId(){const o=window.location.pathname.match(/\/entity\/(\d+)/);if(o){const r=o[1];return console.log(`Entity ID from URL path: ${r}`),r}const s=localStorage.getItem("current_entity_id");if(s&&s!=="null"&&s!=="undefined")return console.log(`Entity ID from localStorage: ${s}`),s;const n=this.getUserInfo();if(n)switch(n.role){case"templeadmin":if(n.entityId)return console.log(`TempleAdmin entity ID: ${n.entityId}`),n.entityId.toString();break;case"standarduser":case"monitoringuser":if(n.assignedTenantId)return console.log(`StandardUser/MonitoringUser assigned tenant ID: ${n.assignedTenantId}`),n.assignedTenantId.toString();break}return console.warn("Could not resolve entity ID"),null},getUserInfo(){try{const t=localStorage.getItem("auth_token");if(t){const o=JSON.parse(atob(t.split(".")[1]));return{userId:o.user_id,role:o.role||o.role_name,entityId:o.entity_id,assignedTenantId:o.assigned_tenant_id}}}catch(t){console.warn("Error parsing user info from token:",t)}return null},getDonationTypes(){return[{value:"general",label:"General Donation"},{value:"seva",label:"Seva Donation"},{value:"festival",label:"Festival Donation"},{value:"construction",label:"Construction Fund"},{value:"annadanam",label:"Annadanam"},{value:"education",label:"Education Fund"},{value:"maintenance",label:"Maintenance"},{value:"temple_maintenance",label:"Temple Maintenance"},{value:"event",label:"Event Donation"}]}},dn=Uo("devotee",()=>{const t=Ue(),{user:o,currentEntity:s}=ln(),n=B({personal:{},spiritual:{},lineage:{},preferences:{},family:{},notes:{}}),r=B({summary:{totalDonations:0,totalSevaBookings:0,upcomingEvents:0,profileCompletion:0},recentDonations:[],upcomingSevas:[],announcements:[],quickStats:{thisMonthDonations:0,thisMonthSevas:0,favoriteDeity:"",memberSince:""}}),l=B([]),a=B(null),d=B(!1),i=B([]),c=B([]),u=B(6),p=oe(()=>u.value===0?0:Math.round(i.value.length/u.value*100)),w=oe(()=>p.value===100),f=B(null),v=B([]),N=B({total:0,active:0,inactive:0,newThisMonth:0,maleCount:0,femaleCount:0,otherCount:0}),A=B(null),F=B({status:"all",search:"",gender:"all",sortBy:"name",sortOrder:"asc"}),I=oe(()=>{let S=[...v.value];if(F.value.status!=="all"&&(S=S.filter(P=>P.status===F.value.status)),F.value.gender!=="all"&&(S=S.filter(P=>P.gender===F.value.gender)),F.value.search){const P=F.value.search.toLowerCase();S=S.filter(T=>{var V,Z,X,W;return((V=T.full_name)==null?void 0:V.toLowerCase().includes(P))||((Z=T.email)==null?void 0:Z.toLowerCase().includes(P))||((X=T.phone)==null?void 0:X.includes(P))||((W=T.gotra)==null?void 0:W.toLowerCase().includes(P))})}return S.sort((P,T)=>{let V,Z;switch(F.value.sortBy){case"name":V=P.full_name||"",Z=T.full_name||"";break;case"email":V=P.email||"",Z=T.email||"";break;case"gotra":V=P.gotra||"",Z=T.gotra||"";break;case"date":V=P.created_at?new Date(P.created_at):new Date(0),Z=T.created_at?new Date(T.created_at):new Date(0);break;default:V=P.full_name||"",Z=T.full_name||""}return V instanceof Date?F.value.sortOrder==="asc"?V-Z:Z-V:F.value.sortOrder==="asc"?V.localeCompare(Z):Z.localeCompare(V)}),S}),C=B(!1),j=B(null),$=()=>{var S;return((S=s.value)==null?void 0:S.id)||f.value},y=async()=>{var S,P;try{C.value=!0,j.value=null;const T=await Ht.getProfile();if(T.data){const V=T.data,Z={personal:{fullName:V.full_name||"",dateOfBirth:V.dob||"",gender:V.gender||"",phone:"",email:"",address:{street:V.street_address||"",city:V.city||"",state:V.state||"",pincode:V.pincode||"",country:V.country||"India"}},spiritual:{gotra:V.gotra||"",nakshatra:V.nakshatra||"",rashi:V.rashi||"",lagna:V.lagna||"",vedaShaka:V.veda_shaka||""},lineage:{father:{name:V.father_name||"",gotra:V.father_gotra||"",nativePlace:V.father_native_place||"",vedaShaka:V.father_veda_shaka||""},mother:{name:V.mother_name||"",maidenGotra:V.maiden_gotra||"",nativePlace:V.mother_native_place||"",fatherName:V.maternal_grandfather_name||""},paternalGrandfather:V.paternal_grandfather_name||"",paternalGrandmother:V.paternal_grandmother_name||"",maternalGrandfather:V.maternal_grandfather_name||"",maternalGrandmother:V.maternal_grandmother_name||""},preferences:{favoriteSevas:b(V),donationInterests:E(V),preferredFrequency:"",specialInterests:V.special_interests_or_notes||""},family:{spouse:{name:V.spouse_name||"",email:V.spouse_email||"",phone:V.spouse_phone||"",dateOfBirth:V.spouse_dob||"",gotra:V.spouse_gotra||"",nakshatra:V.spouse_nakshatra||""},children:(V.children||[]).map(X=>({name:X.child_name||"",dateOfBirth:X.child_dob||"",gender:X.child_gender||"",education:X.child_education||"",interests:X.child_interests||""})),emergencyContacts:(V.emergency_contacts||[]).map(X=>({name:X.contact_name||"",relationship:X.contact_relationship||"",phone:X.contact_phone||"",address:X.contact_address||""}))},notes:{healthNotes:V.health_notes||"",allergies:V.allergies_or_conditions||"",dietaryRestrictions:V.dietary_restrictions||"",sankalpa:V.personal_sankalpa||"",additionalNotes:V.additional_notes||"",documents:[],profilePhoto:null,familyPhoto:null,shareProfile:!0,receiveNotifications:!0}};return n.value=Z,_(Z),Z}return null}catch(T){return j.value=((P=(S=T.response)==null?void 0:S.data)==null?void 0:P.error)||"Failed to load profile data",console.error("Error loading profile data:",T),null}finally{C.value=!1}};function b(S){const P=[];return S.seva_abhisheka&&P.push("abhisheka"),S.seva_arti&&P.push("arti"),S.seva_annadana&&P.push("annadana"),S.seva_archana&&P.push("archana"),S.seva_kalyanam&&P.push("kalyanam"),S.seva_homam&&P.push("homam"),P}function E(S){const P=[];return S.donate_temple_maintenance&&P.push("temple-maintenance"),S.donate_annadana_program&&P.push("annadana"),S.donate_festival_celebrations&&P.push("festivals"),S.donate_religious_education&&P.push("education"),S.donate_temple_construction&&P.push("construction"),S.donate_general&&P.push("general"),P}const R=async(S,P)=>{var T,V;console.log(` STORE UPDATING STEP ${S}:`,P);try{return C.value=!0,j.value=null,n.value[S]=P,i.value.includes(S)||(i.value.push(S),c.value=c.value.filter(Z=>Z!==S)),{success:!0}}catch(Z){return j.value=((V=(T=Z.response)==null?void 0:T.data)==null?void 0:V.error)||`Error updating profile step: ${S}`,console.error(`Error updating profile step ${S}:`,Z),t.error(j.value),{success:!1}}finally{C.value=!1}},M=async()=>{var S,P,T,V,Z,X,W,re,ne,fe,we,ve,De,he,Se,Ee,ae,Y,ue,Ae,Le,He,st,to,Fo,kt,Ut,ks,_s,Pa,Na,ja,La,Ba,Ua,Fa,Va,Oa,za,Ha,qa,Ga,Ja,Wa,Ya,Ka,Xa,Za,Qa,el,tl,ol,sl,nl,rl,al,ll,il,dl,ul,cl,pl,ml,gl,fl,vl,hl,yl,xl,bl,wl,kl,_l,$l,Sl,Dl,Cl,Tl,El,Al,Il,Ml,Rl,Pl,Nl,jl,Ll,Bl,Ul,Fl,Vl,Ol,zl,Hl,ql,Gl,Jl,Wl,Yl,Kl,Xl,Zl,Ql,ei,ti,oi,si,ni,ri,ai,li,ii,di,ui,ci,pi,mi,gi,fi,vi,hi,yi,xi,bi,wi,ki,_i,$i,Si,Di,Ci,Ti,Ei,Ai,Ii,Mi,Ri,Pi,Ni,ji,Li,Bi,Ui,Fi,Vi,Oi,zi,Hi,qi,Gi,Ji;console.log(" PROFILE STATE BEFORE API CONVERSION:",JSON.stringify(n.value,null,2));try{C.value=!0,j.value=null,console.log("Starting profile completion...");const uo=Ge=>{if(!Ge)return null;try{const cn=new Date(Ge);return isNaN(cn.getTime())?null:cn.toISOString()}catch(cn){return console.error("Date conversion error:",cn),null}},Wi={full_name:((P=(S=n.value)==null?void 0:S.personal)==null?void 0:P.fullName)||null,dob:uo((V=(T=n.value)==null?void 0:T.personal)==null?void 0:V.dateOfBirth),gender:((X=(Z=n.value)==null?void 0:Z.personal)==null?void 0:X.gender)||null,street_address:((ne=(re=(W=n.value)==null?void 0:W.personal)==null?void 0:re.address)==null?void 0:ne.street)||null,city:((ve=(we=(fe=n.value)==null?void 0:fe.personal)==null?void 0:we.address)==null?void 0:ve.city)||null,state:((Se=(he=(De=n.value)==null?void 0:De.personal)==null?void 0:he.address)==null?void 0:Se.state)||null,pincode:((Y=(ae=(Ee=n.value)==null?void 0:Ee.personal)==null?void 0:ae.address)==null?void 0:Y.pincode)||null,country:((Le=(Ae=(ue=n.value)==null?void 0:ue.personal)==null?void 0:Ae.address)==null?void 0:Le.country)||"India",gotra:((st=(He=n.value)==null?void 0:He.spiritual)==null?void 0:st.gotra)||null,nakshatra:((Fo=(to=n.value)==null?void 0:to.spiritual)==null?void 0:Fo.nakshatra)||null,rashi:((Ut=(kt=n.value)==null?void 0:kt.spiritual)==null?void 0:Ut.rashi)||null,lagna:((_s=(ks=n.value)==null?void 0:ks.spiritual)==null?void 0:_s.lagna)||null,veda_shaka:((Na=(Pa=n.value)==null?void 0:Pa.spiritual)==null?void 0:Na.vedaShaka)||null,father_name:((Ba=(La=(ja=n.value)==null?void 0:ja.lineage)==null?void 0:La.father)==null?void 0:Ba.name)||null,father_gotra:((Va=(Fa=(Ua=n.value)==null?void 0:Ua.lineage)==null?void 0:Fa.father)==null?void 0:Va.gotra)||null,father_native_place:((Ha=(za=(Oa=n.value)==null?void 0:Oa.lineage)==null?void 0:za.father)==null?void 0:Ha.nativePlace)||null,father_veda_shaka:((Ja=(Ga=(qa=n.value)==null?void 0:qa.lineage)==null?void 0:Ga.father)==null?void 0:Ja.vedaShaka)||null,mother_name:((Ka=(Ya=(Wa=n.value)==null?void 0:Wa.lineage)==null?void 0:Ya.mother)==null?void 0:Ka.name)||null,maiden_gotra:((Qa=(Za=(Xa=n.value)==null?void 0:Xa.lineage)==null?void 0:Za.mother)==null?void 0:Qa.maidenGotra)||null,mother_native_place:((ol=(tl=(el=n.value)==null?void 0:el.lineage)==null?void 0:tl.mother)==null?void 0:ol.nativePlace)||null,maternal_grandfather_name:((rl=(nl=(sl=n.value)==null?void 0:sl.lineage)==null?void 0:nl.mother)==null?void 0:rl.fatherName)||null,paternal_grandfather_name:((ll=(al=n.value)==null?void 0:al.lineage)==null?void 0:ll.paternalGrandfather)||null,paternal_grandmother_name:((dl=(il=n.value)==null?void 0:il.lineage)==null?void 0:dl.paternalGrandmother)||null,maternal_grandmother_name:((cl=(ul=n.value)==null?void 0:ul.lineage)==null?void 0:cl.maternalGrandmother)||null,seva_abhisheka:Array.isArray((ml=(pl=n.value)==null?void 0:pl.preferences)==null?void 0:ml.favoriteSevas)?(fl=(gl=n.value)==null?void 0:gl.preferences)==null?void 0:fl.favoriteSevas.includes("abhisheka"):!1,seva_arti:Array.isArray((hl=(vl=n.value)==null?void 0:vl.preferences)==null?void 0:hl.favoriteSevas)?(xl=(yl=n.value)==null?void 0:yl.preferences)==null?void 0:xl.favoriteSevas.includes("arti"):!1,seva_annadana:Array.isArray((wl=(bl=n.value)==null?void 0:bl.preferences)==null?void 0:wl.favoriteSevas)?(_l=(kl=n.value)==null?void 0:kl.preferences)==null?void 0:_l.favoriteSevas.includes("annadana"):!1,seva_archana:Array.isArray((Sl=($l=n.value)==null?void 0:$l.preferences)==null?void 0:Sl.favoriteSevas)?(Cl=(Dl=n.value)==null?void 0:Dl.preferences)==null?void 0:Cl.favoriteSevas.includes("archana"):!1,seva_kalyanam:Array.isArray((El=(Tl=n.value)==null?void 0:Tl.preferences)==null?void 0:El.favoriteSevas)?(Il=(Al=n.value)==null?void 0:Al.preferences)==null?void 0:Il.favoriteSevas.includes("kalyanam"):!1,seva_homam:Array.isArray((Rl=(Ml=n.value)==null?void 0:Ml.preferences)==null?void 0:Rl.favoriteSevas)?(Nl=(Pl=n.value)==null?void 0:Pl.preferences)==null?void 0:Nl.favoriteSevas.includes("homam"):!1,donate_temple_maintenance:Array.isArray((Ll=(jl=n.value)==null?void 0:jl.preferences)==null?void 0:Ll.donationInterests)?(Ul=(Bl=n.value)==null?void 0:Bl.preferences)==null?void 0:Ul.donationInterests.includes("temple-maintenance"):!1,donate_annadana_program:Array.isArray((Vl=(Fl=n.value)==null?void 0:Fl.preferences)==null?void 0:Vl.donationInterests)?(zl=(Ol=n.value)==null?void 0:Ol.preferences)==null?void 0:zl.donationInterests.includes("annadana"):!1,donate_festival_celebrations:Array.isArray((ql=(Hl=n.value)==null?void 0:Hl.preferences)==null?void 0:ql.donationInterests)?(Jl=(Gl=n.value)==null?void 0:Gl.preferences)==null?void 0:Jl.donationInterests.includes("festivals"):!1,donate_religious_education:Array.isArray((Yl=(Wl=n.value)==null?void 0:Wl.preferences)==null?void 0:Yl.donationInterests)?(Xl=(Kl=n.value)==null?void 0:Kl.preferences)==null?void 0:Xl.donationInterests.includes("education"):!1,donate_temple_construction:Array.isArray((Ql=(Zl=n.value)==null?void 0:Zl.preferences)==null?void 0:Ql.donationInterests)?(ti=(ei=n.value)==null?void 0:ei.preferences)==null?void 0:ti.donationInterests.includes("construction"):!1,donate_general:Array.isArray((si=(oi=n.value)==null?void 0:oi.preferences)==null?void 0:si.donationInterests)?(ri=(ni=n.value)==null?void 0:ni.preferences)==null?void 0:ri.donationInterests.includes("general"):!1,special_interests_or_notes:((li=(ai=n.value)==null?void 0:ai.preferences)==null?void 0:li.specialInterests)||null,spouse_name:((ui=(di=(ii=n.value)==null?void 0:ii.family)==null?void 0:di.spouse)==null?void 0:ui.name)||null,spouse_email:((mi=(pi=(ci=n.value)==null?void 0:ci.family)==null?void 0:pi.spouse)==null?void 0:mi.email)||null,spouse_phone:((vi=(fi=(gi=n.value)==null?void 0:gi.family)==null?void 0:fi.spouse)==null?void 0:vi.phone)||null,spouse_dob:uo((xi=(yi=(hi=n.value)==null?void 0:hi.family)==null?void 0:yi.spouse)==null?void 0:xi.dateOfBirth),spouse_gotra:((ki=(wi=(bi=n.value)==null?void 0:bi.family)==null?void 0:wi.spouse)==null?void 0:ki.gotra)||null,spouse_nakshatra:((Si=($i=(_i=n.value)==null?void 0:_i.family)==null?void 0:$i.spouse)==null?void 0:Si.nakshatra)||null,children:Array.isArray((Ci=(Di=n.value)==null?void 0:Di.family)==null?void 0:Ci.children)?(Ei=(Ti=n.value)==null?void 0:Ti.family)==null?void 0:Ei.children.map(Ge=>({child_name:(Ge==null?void 0:Ge.name)||"",child_dob:uo(Ge==null?void 0:Ge.dateOfBirth),child_gender:(Ge==null?void 0:Ge.gender)||"",child_education:(Ge==null?void 0:Ge.education)||"",child_interests:(Ge==null?void 0:Ge.interests)||""})):[],emergency_contacts:Array.isArray((Ii=(Ai=n.value)==null?void 0:Ai.family)==null?void 0:Ii.emergencyContacts)?(Ri=(Mi=n.value)==null?void 0:Mi.family)==null?void 0:Ri.emergencyContacts.map(Ge=>({contact_name:(Ge==null?void 0:Ge.name)||"",contact_relationship:(Ge==null?void 0:Ge.relationship)||"",contact_phone:(Ge==null?void 0:Ge.phone)||"",contact_address:(Ge==null?void 0:Ge.address)||""})):[],health_notes:((Ni=(Pi=n.value)==null?void 0:Pi.notes)==null?void 0:Ni.healthNotes)||null,allergies_or_conditions:((Li=(ji=n.value)==null?void 0:ji.notes)==null?void 0:Li.allergies)||null,dietary_restrictions:((Ui=(Bi=n.value)==null?void 0:Bi.notes)==null?void 0:Ui.dietaryRestrictions)||null,personal_sankalpa:((Vi=(Fi=n.value)==null?void 0:Fi.notes)==null?void 0:Vi.sankalpa)||null,additional_notes:((zi=(Oi=n.value)==null?void 0:Oi.notes)==null?void 0:zi.additionalNotes)||null};console.log("Sending API data:",Wi);const un=await Ht.createOrUpdateProfile(Wi);console.log("Profile completed:",un.data),t.success("Profile completed successfully!");const Yi=((Hi=un.data)==null?void 0:Hi.entity_id)||$();return Yi?{success:!0,data:un.data,redirectPath:`/entity/${Yi}/devotee/dashboard`}:{success:!0,data:un.data,redirectPath:"/devotee/dashboard"}}catch(uo){throw j.value=((Gi=(qi=uo.response)==null?void 0:qi.data)==null?void 0:Gi.error)||uo.message||"Failed to complete profile",console.error("Error completing profile:",uo),console.error("Error response:",(Ji=uo.response)==null?void 0:Ji.data),t.error(j.value),uo}finally{C.value=!1}},G=async S=>{var P,T;try{C.value=!0,j.value=null;const V=await Ht.joinTemple(S);return f.value=S,t.success("Successfully joined temple"),V.data}catch(V){throw j.value=((T=(P=V.response)==null?void 0:P.data)==null?void 0:T.error)||"Failed to join temple",t.error(j.value),console.error("Error joining temple:",V),V}finally{C.value=!1}},U=async S=>{try{C.value=!0;const P=await Ht.getDashboardData(S);if(P.data)return r.value=P.data,P.data;throw new Error("No dashboard data returned")}catch(P){throw console.error("Error fetching dashboard data:",P),t.error("Failed to load dashboard data"),P}finally{C.value=!1}},_=S=>{var T,V,Z,X,W,re,ne,fe,we,ve,De,he,Se,Ee,ae,Y;i.value=[],(T=S.personal)!=null&&T.fullName&&i.value.push("personal"),((V=S.spiritual)!=null&&V.gotra||(Z=S.spiritual)!=null&&Z.nakshatra)&&i.value.push("spiritual"),((W=(X=S.lineage)==null?void 0:X.father)!=null&&W.name||(ne=(re=S.lineage)==null?void 0:re.mother)!=null&&ne.name)&&i.value.push("lineage"),((((we=(fe=S.preferences)==null?void 0:fe.favoriteSevas)==null?void 0:we.length)||0)>0||(((De=(ve=S.preferences)==null?void 0:ve.donationInterests)==null?void 0:De.length)||0)>0)&&i.value.push("preferences"),((Se=(he=S.family)==null?void 0:he.spouse)!=null&&Se.name||(((Ee=S.family.children)==null?void 0:Ee.length)||0)>0)&&i.value.push("family"),((ae=S.notes)!=null&&ae.sankalpa||(Y=S.notes)!=null&&Y.allergies)&&i.value.push("notes");const P=["personal","spiritual","lineage","preferences","family","notes"];c.value=P.filter(ue=>!i.value.includes(ue))},k=S=>{f.value=S},L=async S=>{var P,T;try{if(C.value=!0,j.value=null,!S)throw new Error("Entity ID is required");console.log(" Fetching devotees for entity:",S);const V=await Ht.getAllDevotees(S);return V.data?(v.value=V.data,console.log(" Devotees loaded:",V.data.length),V.data):(v.value=[],[])}catch(V){return j.value=((T=(P=V.response)==null?void 0:P.data)==null?void 0:T.error)||V.message||"Failed to fetch devotees",console.error(" Error fetching devotees:",V),v.value=[],[]}finally{C.value=!1}},z=async S=>L(S),q=async S=>{var P,T;try{if(C.value=!0,j.value=null,!S)throw new Error("Entity ID is required");try{const V=await Ht.getDevoteeStats(S);if(V.data)return N.value=V.data,console.log(" Devotee stats loaded from API:",V.data),V.data}catch{v.value.length===0&&await L(S);const V={total:v.value.length,active:v.value.filter(Z=>Z.status==="active").length,inactive:v.value.filter(Z=>Z.status==="inactive").length,newThisMonth:K(),maleCount:v.value.filter(Z=>Z.gender==="male").length,femaleCount:v.value.filter(Z=>Z.gender==="female").length,otherCount:v.value.filter(Z=>Z.gender!=="male"&&Z.gender!=="female").length};return N.value=V,console.log(" Devotee stats calculated:",V),V}}catch(V){j.value=((T=(P=V.response)==null?void 0:P.data)==null?void 0:T.error)||V.message||"Failed to fetch devotee statistics",console.error(" Error fetching devotee stats:",V);const Z={total:0,active:0,inactive:0,newThisMonth:0,maleCount:0,femaleCount:0,otherCount:0};return N.value=Z,Z}finally{C.value=!1}},K=()=>{const S=new Date,P=new Date(S.getFullYear(),S.getMonth(),1);return v.value.filter(T=>T.created_at?new Date(T.created_at)>=P:!1).length},H=async S=>{var P,T;try{if(C.value=!0,j.value=null,!S)throw new Error("Devotee ID is required");const V=v.value.find(X=>X.id===Number(S));if(V)return A.value=V,V;const Z=await Ht.getDevoteeById(S);if(Z.data)return A.value=Z.data,Z.data;throw new Error("Devotee not found")}catch(V){return j.value=((T=(P=V.response)==null?void 0:P.data)==null?void 0:T.error)||V.message||"Failed to fetch devotee",console.error("Error fetching devotee:",V),t.error(j.value),null}finally{C.value=!1}},O=async(S,P,T)=>{var V,Z,X,W,re;try{if(C.value=!0,j.value=null,!S)throw new Error("Entity ID is required");if(!P)throw new Error("Devotee ID is required");if(!T||!["active","inactive"].includes(T))throw new Error('Status must be either "active" or "inactive"');const ne=Number(S),fe=Number(P);if(isNaN(ne)||isNaN(fe))throw new Error("Invalid ID format");console.log(" Updating devotee status:",{entityId:ne,devoteeId:fe,status:T});const we=v.value.findIndex(he=>he.id===fe);we===-1&&console.warn(" Devotee not found in local store, proceeding with API call");const ve=await Ht.updateDevoteeStatus(ne,fe,T);if(!ve||!ve.data)throw new Error("Invalid response from server");we!==-1&&(v.value[we]={...v.value[we],status:T,updated_at:new Date().toISOString()},console.log(" Local devotee updated:",v.value[we])),A.value&&A.value.id===fe&&(A.value={...A.value,status:T,updated_at:new Date().toISOString()});try{await q(ne)}catch(he){console.warn(" Failed to refresh stats after status update:",he)}const De=T==="active"?"activated":"deactivated";return t.success(`Devotee ${De} successfully`),console.log(" Devotee status updated successfully"),ve.data}catch(ne){const fe=((Z=(V=ne.response)==null?void 0:V.data)==null?void 0:Z.error)||((W=(X=ne.response)==null?void 0:X.data)==null?void 0:W.message)||ne.message||"Failed to update devotee status";throw j.value=fe,console.error(" Error updating devotee status:",{error:ne,entityId:S,devoteeId:P,status:T,response:(re=ne.response)==null?void 0:re.data}),t.error(fe),new Error(fe)}finally{C.value=!1}},ee=async(S,P)=>{try{return await O(S,P,"active")}catch(T){throw console.error(" Error activating devotee:",T),T}},ge=async(S,P)=>{try{return await O(S,P,"inactive")}catch(T){throw console.error(" Error deactivating devotee:",T),T}},de=(S,P)=>{F.value.hasOwnProperty(S)?F.value[S]=P:console.warn(` Invalid filter key: ${S}`)},ie=()=>{F.value={status:"all",search:"",gender:"all",sortBy:"name",sortOrder:"asc"}},me=async S=>{var P,T;try{if(d.value=!0,j.value=null,!S||!S.amount)throw new Error("Invalid donation data");const V={...S,amount:Math.round(S.amount*100),currency:"INR"},Z=await ht.createDonation(V);if(Z.data)return a.value=Z.data,Z.data;throw new Error("Failed to create donation order")}catch(V){throw j.value=((T=(P=V.response)==null?void 0:P.data)==null?void 0:T.error)||V.message||"Failed to create donation",t.error(j.value),console.error("Error creating donation:",V),V}finally{d.value=!1}},ke=async S=>{var P,T;try{if(d.value=!0,j.value=null,!S)throw new Error("Verification data is required");const V=await ht.verifyDonation(S);if(V.data){t.success("Donation verified successfully!");try{await Q(),f.value&&await U(f.value)}catch(Z){console.warn(" Failed to refresh data after donation verification:",Z)}return V.data}throw new Error("Failed to verify donation")}catch(V){throw j.value=((T=(P=V.response)==null?void 0:P.data)==null?void 0:T.error)||V.message||"Failed to verify donation",t.error(j.value),console.error("Error verifying donation:",V),V}finally{d.value=!1}},Q=async()=>{var S,P;try{C.value=!0,j.value=null;const T=await ht.getMyDonations();return T.data?(l.value=T.data,T.data):(l.value=[],[])}catch(T){return j.value=((P=(S=T.response)==null?void 0:S.data)==null?void 0:P.error)||T.message||"Failed to fetch donation history",console.error("Error fetching donation history:",T),l.value=[],[]}finally{C.value=!1}};return{profile:n,dashboardData:r,loading:C,error:j,selectedTempleId:f,donationHistory:l,currentDonation:a,isProcessingDonation:d,completedSteps:i,incompleteSteps:c,totalSteps:u,completionPercentage:p,isProfileComplete:w,devotees:v,devoteeStats:N,currentDevotee:A,devoteeFilters:F,filteredDevotees:I,loadProfileData:y,updateProfileStep:R,completeProfile:M,fetchDashboardData:U,joinTemple:G,setSelectedTempleId:k,getCurrentEntityId:$,fetchDevoteesByEntity:L,fetchDevotees:z,fetchDevoteeStats:q,getDevoteeById:H,updateDevoteeStatus:O,activateDevotee:ee,deactivateDevotee:ge,setDevoteeFilter:de,resetDevoteeFilters:ie,createDonation:me,verifyDonation:ke,fetchDonationHistory:Q,clearError:()=>{j.value=null},resetStore:()=>{n.value={personal:{},spiritual:{},lineage:{},preferences:{},family:{},notes:{}},r.value={summary:{totalDonations:0,totalSevaBookings:0,upcomingEvents:0,profileCompletion:0},recentDonations:[],upcomingSevas:[],announcements:[],quickStats:{thisMonthDonations:0,thisMonthSevas:0,favoriteDeity:"",memberSince:""}},l.value=[],a.value=null,v.value=[],A.value=null,f.value=null,i.value=[],c.value=[],C.value=!1,d.value=!1,j.value=null,ie()}}});function z1(t,o,s){const n=We();if(!n.isAuthenticated){const r=localStorage.getItem("auth_token"),l=localStorage.getItem("user_data");r&&l&&(console.log(" Auth not loaded, reinitializing from localStorage..."),n.initialize())}return console.log(" Auth Check:",{isAuthenticated:n.isAuthenticated,user:n.user,userRole:n.userRole,needsTenantSelection:n.needsTenantSelection,assignedTenantId:n.assignedTenantId,route:t.path,toName:t.name}),n.isAuthenticated?n.needsTenantSelection&&t.name!=="TenantSelection"&&!t.path.includes("/tenant-selection")?(console.log(" User needs tenant selection, redirecting..."),console.log("- User role:",n.userRole),console.log("- Needs tenant selection:",n.needsTenantSelection),console.log("- Assigned tenant ID:",n.assignedTenantId),s({name:"TenantSelection"}),!1):n.isSuperAdmin&&t.name==="TenantSelection"?(console.log(" SuperAdmin accessing tenant selection - allowed"),s(),!0):(console.log(" Auth guard passed for role:",n.userRole),s(),!0):(console.log(" Not authenticated, redirecting to login"),s({name:"Login",query:{redirect:t.fullPath,message:"Please login to access this page"}}),!1)}const Zs={BASE_URL:"http://localhost:8080/api/v1",TIMEOUT:3e4,RETRY_ATTEMPTS:3,RETRY_DELAY:1e3};console.log("import.meta.env.VITE_API_BASE_URL= ","http://localhost:8080/api/v1");console.log(" API Config:",Zs);const ho=Ie.create({baseURL:Zs.BASE_URL,timeout:Zs.TIMEOUT,headers:{"Content-Type":"application/json",Accept:"application/json"}});ho.interceptors.request.use(t=>{var s,n;console.log(` API Request: ${(s=t.method)==null?void 0:s.toUpperCase()} ${t.url}`);let o=localStorage.getItem("access_token");if(!o)try{o=We().token}catch(r){console.warn("Could not access auth store:",r)}o?t.headers.Authorization=`Bearer ${o}`:console.warn("No authentication token for:",t.url);try{const r=We();(n=r.user)!=null&&n.entityId&&!t.url.includes("/superadmin/")&&(t.headers["X-Tenant-ID"]=r.user.entityId)}catch(r){console.warn("Could not set X-Tenant-ID:",r)}return t.metadata={startTime:new Date},t},t=>Promise.reject(t));ho.interceptors.response.use(t=>{var s;const o=new Date-t.config.metadata.startTime;return console.log(` API Response: ${(s=t.config.method)==null?void 0:s.toUpperCase()} ${t.config.url} - ${o}ms`),t},async t=>{console.error(" API Error:",t);let o;try{const n=Ue();o=n.showToast||n.error||n}catch{o=()=>{}}let s;try{s=We()}catch{}if(t.response){const{status:n,data:r}=t.response;switch(n){case 401:o({type:"error",title:"Authentication Required",message:"Your session has expired. Please login again."}),s?s.logout():localStorage.removeItem("auth_token"),window.location.href="/login";break;case 403:o({type:"warning",title:"Access Denied",message:r.message||"You do not have permission."});break;case 404:o({type:"error",title:"Not Found",message:(r==null?void 0:r.message)||"API endpoint not found."}),console.warn("404 URL:",t.config.url);break;case 422:console.warn("Validation errors:",r.errors);break;case 429:o({type:"warning",title:"Too Many Requests",message:"Please wait before retrying."});break;case 500:o({type:"error",title:"Server Error",message:"Internal error, please try again later."});break;default:o({type:"error",title:"Request Failed",message:(r==null?void 0:r.message)||"Unexpected error occurred."})}}else t.request?o({type:"error",title:"Network Error",message:"Check your internet connection."}):o({type:"error",title:"Request Error",message:"Request setup failed."});return Promise.reject(t)});const Z0=async(t,o=1)=>{var s;try{return await ho(t)}catch(n){if(o<Zs.RETRY_ATTEMPTS&&((s=n.response)==null?void 0:s.status)>=500)return console.log(`Retrying request (attempt ${o+1})`),await new Promise(r=>setTimeout(r,Zs.RETRY_DELAY*o)),Z0(t,o+1);throw n}},Co={async get(t,o={}){try{return(await Z0({method:"get",url:t,...o})).data}catch(s){throw this.handleError(s)}},async post(t,o={},s={}){try{return(await ho.post(t,o,s)).data}catch(n){throw this.handleError(n)}},async put(t,o={},s={}){try{return(await ho.put(t,o,s)).data}catch(n){throw this.handleError(n)}},async patch(t,o={},s={}){try{return(await ho.patch(t,o,s)).data}catch(n){throw this.handleError(n)}},async delete(t,o={}){try{return(await ho.delete(t,o)).data}catch(s){throw this.handleError(s)}},async upload(t,o,s=null){try{const n={headers:{"Content-Type":"multipart/form-data"}};return s&&(n.onUploadProgress=l=>{const a=Math.round(l.loaded*100/l.total);s(a)}),(await ho.post(t,o,n)).data}catch(n){throw this.handleError(n)}},async download(t,o=null){try{const s=await ho.get(t,{responseType:"blob"}),n=new Blob([s.data]),r=URL.createObjectURL(n),l=document.createElement("a");return l.href=r,l.download=o||"download",document.body.appendChild(l),l.click(),document.body.removeChild(l),URL.revokeObjectURL(r),s.data}catch(s){throw this.handleError(s)}},async batch(t){try{const o=t.map(({method:s,url:n,data:r,config:l})=>this[s](n,r,l));return await Promise.allSettled(o)}catch(o){throw this.handleError(o)}},handleError(t){var s,n;const o={message:"Unexpected error occurred",status:null,data:null,errors:null};return t.response?(o.message=((s=t.response.data)==null?void 0:s.message)||t.message,o.status=t.response.status,o.data=t.response.data,o.errors=(n=t.response.data)==null?void 0:n.errors):t.request?o.message="Network error - check your internet connection":o.message=t.message,o}},ot=(t,o)=>{const s=t.__vccOpts||t;for(const[n,r]of o)s[n]=r;return s},H1=[{path:"dashboard",name:"SuperAdminDashboard",component:()=>vt(()=>import("./SuperAdminDashboard-BcKPo8Uy.js"),__vite__mapDeps([0,1])),meta:{title:"Super Admin Dashboard",breadcrumb:"Dashboard"}},{path:"tenant-approvals",name:"TenantApprovals",component:()=>vt(()=>import("./TenantApprovals-Dowy3c6M.js"),__vite__mapDeps([2,1])),meta:{title:"Tenant Approvals",breadcrumb:"Tenant Approvals"}},{path:"user-management",name:"SuperadminUserManagement",component:()=>vt(()=>import("./UserManagement-BJNBd8St.js"),__vite__mapDeps([3,4,1,5])),meta:{requiresAuth:!0,role:"superadmin"}},{path:"role-management",name:"SuperadminRoleManagement",component:()=>vt(()=>import("./RoleManagement-C0khLVzu.js"),__vite__mapDeps([6,1,7])),meta:{requiresAuth:!0,role:"superadmin"}},{path:"reset-password",name:"ResetPassword",component:()=>vt(()=>import("./ResetPassword-XCus_ZFW.js"),__vite__mapDeps([8,1])),meta:{requiresAuth:!0,role:"superadmin"}},{path:"reset-password/:userId",name:"ResetPasswordForm",component:()=>vt(()=>import("./ResetPasswordForm-o8rMbq5Z.js"),__vite__mapDeps([9,1])),meta:{requiresAuth:!0,role:"superadmin",title:"Reset User Password"}},{path:"users/:userId/assign-tenants",name:"AssignTenants",component:()=>vt(()=>import("./AssignTenantsView-DmMY8PWT.js"),__vite__mapDeps([10,1,11])),meta:{requiresAuth:!0,role:"superadmin",title:"Assign Tenants to User"}},{path:"audit-logs",name:"AuditLogs",component:()=>vt(()=>import("./AuditLogsView-y_4g_Njy.js"),[]),meta:{requiresAuth:!0,role:"superadmin",title:"Audit Logs",breadcrumb:"Audit Logs"}},{path:"reports",name:"superadmin-reports",component:()=>vt(()=>import("./SuperadminReportsView-Bir8HcHv.js"),__vite__mapDeps([12,4,1])),meta:{requiresAuth:!0,role:"superadmin",title:"Reports Management"}},{path:"reports/temple-register",name:"SuperadminTempleRegister",component:()=>vt(()=>import("./TempleRegisterReport-CbFWRJ8v.js"),[]),meta:{requiresAuth:!0,role:"superadmin",title:"Temple Register Report"}},{path:"reports/temple-activities",name:"SuperadminTempleActivities",component:()=>vt(()=>import("./TempleActivitiesReport-9xlZLMYb.js"),__vite__mapDeps([13,14])),meta:{requiresAuth:!0,role:"superadmin",title:"Temple Activities Report"}},{path:"reports/birthdays",name:"SuperadminBirthdays",component:()=>vt(()=>import("./BirthdaysReport-Zo6vQe_X.js"),__vite__mapDeps([15,14])),meta:{requiresAuth:!0,role:"superadmin",title:"Devotee Birthdays Report"}},{path:"reports/user-details",name:"SuperadminUserDetails",component:()=>vt(()=>import("./UserDetailsReport-CrIgFFkd.js"),[]),meta:{requiresAuth:!0,role:"superadmin",title:"User Details Report"}},{path:"reports/approval-status",name:"SuperadminApprovalStatus",component:()=>vt(()=>import("./ApprovalStatusReport-DgjHn88I.js"),[]),meta:{requiresAuth:!0,role:"superadmin",title:"Approval Status Report"}}],ta={async getTemplates(){try{return{success:!0,data:(await Fe.communication.getTemplates()).data}}catch(t){return this.handleError(t)}},async createTemplate(t){try{return{success:!0,data:(await Fe.communication.createTemplate(t)).data}}catch(o){return this.handleError(o)}},async updateTemplate(t,o){try{return{success:!0,data:(await Fe.communication.updateTemplate(t,o)).data}}catch(s){return this.handleError(s)}},async deleteTemplate(t){try{return await Fe.communication.deleteTemplate(t),{success:!0,message:"Deleted successfully"}}catch(o){return this.handleError(o)}},async sendBulkMessage(t,o){try{return{success:!0,data:(await Fe.communication.sendBulk(t,o)).data}}catch(s){return this.handleError(s)}},async previewBulkMessage(t,o){try{return{success:!0,data:(await Fe.communication.previewBulk(t,o)).data}}catch(s){return this.handleError(s)}},async getMessageHistory(t,o){try{return{success:!0,data:(await Fe.communication.getHistory(t,o)).data}}catch(s){return this.handleError(s)}},async getMessageDetails(t,o){try{return{success:!0,data:(await Fe.communication.getMessageDetails(t,o)).data}}catch(s){return this.handleError(s)}},async getDevoteesForMessaging(t,o){try{return{success:!0,data:(await Fe.communication.getDevotees(t,o)).data}}catch(s){return this.handleError(s)}},async sendDirectNotification(t){var o,s;try{if(console.log(" CommunicationService: Sending notification with payload:",t),!t)throw new Error("Payload is required");if(!t.channel)throw new Error("Channel is required");if(!t.subject)throw new Error("Subject is required");if(!t.body)throw new Error("Body is required");console.log("-->payload:",t.channel,t.subject,t.body);const n=await Fe.communication.sendDirectNotification(t);return console.log("---->response",n),console.log(" CommunicationService: Notification sent successfully:",n.data),{success:!0,data:n.data}}catch(n){console.error(" CommunicationService: Error in sendDirectNotification:",n);let r="Failed to send notification";return n.response?(console.error("Server response error:",{status:n.response.status,data:n.response.data,headers:n.response.headers}),console.log("error.response.data:",n.response.data),n.response.data&&(typeof n.response.data=="string"?r=n.response.data:n.response.data.error?r=n.response.data.error:n.response.data.message?r=n.response.data.message:n.response.data.details&&(r=n.response.data.details)),n.response.status===400?r=`Bad Request: ${r}`:n.response.status===401?r="Authentication failed":n.response.status===403?r="Access denied":n.response.status===404?r="Service not found":n.response.status>=500&&(r=`Server error: ${r}`)):n.request?(console.error("No response received:",n.request),r="No response from server. Please check your connection."):n.message&&(r=n.message),{success:!1,error:r,status:((o=n.response)==null?void 0:o.status)||500,details:((s=n.response)==null?void 0:s.data)||null}}},async getUnreadNotifications(t,o){try{return{success:!0,data:(await Fe.communication.getUnreadNotifications(t,o)).data}}catch(s){return this.handleError(s)}},async markNotificationAsRead(t,o,s){try{return await Fe.communication.markNotificationAsRead(t,o,s),{success:!0,message:"Marked as read"}}catch(n){return this.handleError(n)}},async getCommunicationStats(t,o){try{return{success:!0,data:(await Fe.communication.getStats(t,o)).data}}catch(s){return this.handleError(s)}},validateMessage(t){const o=[];return t.type||o.push("Message type is required"),!t.content&&!t.templateId&&o.push("Content or template required"),t.type==="email"&&!t.subject&&o.push("Email subject required"),t.recipients||o.push("Recipients required"),{isValid:o.length===0,errors:o}},renderTemplate(t,o={}){let s=t;const n={temple_name:"[Temple Name]",devotee_name:"[Devotee Name]",current_date:new Date().toLocaleDateString("en-IN"),current_time:new Date().toLocaleTimeString("en-IN"),...o};return Object.entries(n).forEach(([r,l])=>{s=s.replace(new RegExp(`\\{${r}\\}`,"gi"),l)}),s},handleError(t){var s;console.error("CommunicationService: API Error:",t);let o="An unexpected error occurred";return console.log("error.response",t.response),t.response?(console.error("Error response:",{status:t.response.status,data:t.response.data,headers:t.response.headers}),t.response.data&&(typeof t.response.data=="string"?o=t.response.data:t.response.data.error?o=t.response.data.error:t.response.data.message&&(o=t.response.data.message)),t.response.status===500?o=`Server error: ${o}`:t.response.status===404?o="Service not found":t.response.status===401?o="Authentication error":t.response.status===403&&(o="Access denied")):t.request?(console.error("No response received:",t.request),o="No response from server. Check your connection."):t.message&&(o=t.message),{success:!1,error:o,status:((s=t.response)==null?void 0:s.status)||500}}},q1={name:"MessageComposer",setup(){const t=We(),o=tt(),s=B(!1),n=B(""),r=B(!1),l=B(!1),a=oe(()=>{var _;return(_=t.user)==null?void 0:_.id}),d=oe(()=>{var k,L,z,q;const _=o.params.entityId||o.params.id;return _?parseInt(_):((k=t.user)==null?void 0:k.entity_id)??((L=t.user)==null?void 0:L.entityId)??((q=(z=t.user)==null?void 0:z.current_entity)==null?void 0:q.id)??parseInt(localStorage.getItem("current_entity_id"))??null}),i=oe(()=>!!localStorage.getItem("auth_token")),c=oe(()=>!1),u=B("all"),p=B([]),w=B("announcement"),f=B(""),v=B(""),N=B(["email"]),A=B("now"),F=B(""),I=B(""),C=B(!1),j=B(!1),$=oe(()=>{const k=u.value==="custom"?p.value.length>0:!0;return f.value.trim()&&v.value.trim()&&N.value.length>0&&k&&!s.value}),y=(_,k=!1)=>{n.value=_,r.value=k,setTimeout(()=>{n.value=""},5e3)},b=()=>{u.value==="all"?p.value=[{id:1,name:"All Devotees",type:"devotee"},{id:2,name:"All Volunteers",type:"volunteer"}]:u.value==="devotees"?p.value=[{id:1,name:"All Devotees",type:"devotee"}]:u.value==="volunteers"&&(p.value=[{id:2,name:"All Volunteers",type:"volunteer"}])},E=_=>{p.value=p.value.filter(k=>k.id!==_)},R=()=>{console.log("Opening template selector...")},M=()=>{C.value=!0,console.log("Saving draft...")},G=()=>{f.value="",v.value="",C.value=!1},U=async()=>{var _,k,L,z;if(console.log(" Starting message send process..."),!a.value||!d.value){const q=`Missing required data - Sender ID: ${a.value}, Entity ID: ${d.value}`;console.error(" Validation failed:",q),y(q,!0);return}if(!i.value){const q="No authentication token found";console.error(" Auth check failed:",q),y(q,!0);return}if(!f.value.trim()||!v.value.trim()){const q="Subject and message are required";console.error(" Content validation failed:",q),y(q,!0);return}if(!N.value.length){const q="Please select at least one delivery method";console.error(" Delivery method validation failed:",q),y(q,!0);return}s.value=!0;try{const q=u.value==="custom";let K=0,H=0,O="";y("Sending messages...",!1);for(const ee of N.value){console.log(` Preparing to send via ${ee}...`);const ge={channel:ee,subject:f.value.trim(),body:v.value.trim(),template_id:null,recipients:q?p.value.map(de=>ee==="email"?de.email:ee==="sms"||ee==="whatsapp"?de.phone:de.id).filter(Boolean):[],audience:q?null:u.value,metadata:{sender_id:a.value,entity_id:d.value,message_type:w.value,scheduled_type:A.value}};console.log(` Payload for ${ee}:`,JSON.stringify(ge,null,2));try{const de=await ta.sendDirectNotification(ge);de.success?(K++,console.log(` Successfully sent via ${ee}`)):(H++,((_=de.error)==null?void 0:_.error)==="no_recipients"?O=de.error.details||"No recipients found. Please add devotees or volunteers to this temple first.":((k=de.error)==null?void 0:k.error)==="service_not_configured"?O=de.error.details||"Email service is not properly configured. Please contact your administrator.":O=((L=de.error)==null?void 0:L.message)||de.error||"Unknown error",console.error(` Failed to send via ${ee}:`,de.error))}catch(de){if(H++,(z=de.response)!=null&&z.data){const ie=de.response.data;console.log(" Error data received:",ie),ie.error==="no_recipients"?O=` ${ie.details||"No recipients found. Please add devotees or volunteers to this temple first."}`:ie.error==="service_not_configured"?O=` ${ie.details||"Email service is not properly configured. Please contact your administrator."}`:ie.error==="template_error"?O=` ${ie.details||"Template error occurred."}`:O=ie.details||ie.message||ie.error||de.message}else O=de.message||"Network error";console.error(` Exception sending via ${ee}:`,de)}}K>0&&H===0?(y(` Message sent successfully via ${K} channel(s)!`,!1),f.value="",v.value="",p.value=[],b()):K>0&&H>0?y(` Partially sent: ${K} successful, ${H} failed. ${O}`,!0):y(` ${O}`,!0)}catch(q){console.error(" Unexpected error in sendMessage:",q),y(` Unexpected error: ${q.message}`,!0)}finally{s.value=!1}};return Me(()=>{console.log(" MessageComposer mounted"),console.log("Auth state:",{user:t.user,senderID:a.value,entityID:d.value,hasToken:i.value}),b();const _=o.query.subject,k=o.query.content;_&&(f.value=_),k&&(v.value=k)}),{recipientType:u,selectedRecipients:p,messageType:w,subject:f,message:v,deliveryMethods:N,scheduleType:A,scheduledDate:F,scheduledTime:I,isDraft:C,showRecipientModal:j,isSubmitting:s,statusMessage:n,isError:r,showDebugInfo:l,canSend:$,senderID:a,entityID:d,hasAuthToken:i,isDevelopment:c,updateRecipients:b,removeRecipient:E,insertTemplate:R,saveDraft:M,clearDraft:G,sendMessage:U}}},G1={class:"bg-white rounded-2xl shadow-lg border border-gray-100 overflow-hidden"},J1={class:"bg-gradient-to-r from-indigo-600 to-indigo-700 px-6 py-4"},W1={class:"flex items-center justify-between"},Y1={class:"flex items-center justify-between"},K1={key:1,class:"p-4 bg-yellow-50 border border-yellow-200 rounded-lg text-sm"},X1={class:"space-y-1 text-yellow-700"},Z1={class:"space-y-4"},Q1={class:"flex items-center justify-between"},eh={class:"text-xs text-gray-500"},th={class:"grid grid-cols-1 md:grid-cols-3 gap-3"},oh={class:"relative cursor-pointer"},sh={class:"relative cursor-pointer"},nh={class:"relative cursor-pointer"},rh={key:0,class:"space-y-3"},ah={class:"flex items-center justify-between"},lh={class:"flex flex-wrap gap-2"},ih=["onClick"],dh={class:"space-y-2"},uh={class:"space-y-2"},ch={class:"flex items-center justify-between text-sm"},ph={class:"flex items-center space-x-4"},mh={class:"text-gray-500"},gh={class:"space-y-3"},fh={class:"space-y-2"},vh={class:"flex items-center space-x-3"},hh={class:"flex items-center space-x-3"},yh={class:"flex items-center space-x-3"},xh={class:"flex flex-col sm:flex-row gap-3 pt-6 border-t border-gray-100"},bh=["disabled"],wh={key:0,class:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},kh={key:1,class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"};function _h(t,o,s,n,r,l){return m(),g("div",G1,[e("div",J1,[e("div",W1,[o[18]||(o[18]=Ce('<div class="flex items-center space-x-3"><div class="bg-white/20 rounded-lg p-2"><svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 19l9 2-9-18-9 18 9-2zm0 0v-8"></path></svg></div><div><h2 class="text-xl font-bold text-white">Compose Message</h2><p class="text-indigo-100 text-sm">Send notifications to devotees and volunteers</p></div></div>',1)),n.isDraft?(m(),g("button",{key:0,onClick:o[0]||(o[0]=(...a)=>n.clearDraft&&n.clearDraft(...a)),class:"bg-white/20 hover:bg-white/30 text-white px-4 py-2 rounded-lg text-sm font-medium transition-all duration-200"}," Clear Draft ")):J("",!0)])]),e("form",{onSubmit:o[17]||(o[17]=qe((...a)=>n.sendMessage&&n.sendMessage(...a),["prevent"])),class:"p-6 space-y-6"},[n.statusMessage?(m(),g("div",{key:0,class:se(["p-4 rounded-lg text-sm",n.isError?"bg-red-100 text-red-800":"bg-green-100 text-green-800"])},[e("div",Y1,[e("span",null,h(n.statusMessage),1),e("button",{onClick:o[1]||(o[1]=a=>n.statusMessage=""),class:"ml-2 text-gray-500 hover:text-gray-700"},[...o[19]||(o[19]=[e("svg",{class:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z","clip-rule":"evenodd"})],-1)])])])],2)):J("",!0),n.isDevelopment&&n.showDebugInfo?(m(),g("div",K1,[o[20]||(o[20]=e("div",{class:"font-semibold text-yellow-800 mb-2"},"Debug Info:",-1)),e("div",X1,[e("div",null,"Sender ID: "+h(n.senderID||"Not set"),1),e("div",null,"Entity ID: "+h(n.entityID||"Not set"),1),e("div",null,"Auth Token: "+h(n.hasAuthToken?"Present":"Missing"),1),e("div",null,"Recipient Type: "+h(n.recipientType),1),e("div",null,"Selected Recipients: "+h(n.selectedRecipients.length),1),e("div",null,"Delivery Methods: "+h(n.deliveryMethods.join(", ")),1)]),e("button",{type:"button",onClick:o[2]||(o[2]=a=>n.showDebugInfo=!1),class:"text-yellow-600 underline mt-2"},"Hide Debug")])):J("",!0),e("div",Z1,[e("div",Q1,[o[21]||(o[21]=e("label",{class:"text-sm font-semibold text-gray-900"},"Recipients",-1)),e("span",eh,h(n.selectedRecipients.length)+" selected",1)]),e("div",th,[e("label",oh,[ce(e("input",{type:"radio",value:"all","onUpdate:modelValue":o[3]||(o[3]=a=>n.recipientType=a),class:"sr-only",onChange:o[4]||(o[4]=(...a)=>n.updateRecipients&&n.updateRecipients(...a))},null,544),[[cs,n.recipientType]]),e("div",{class:se(["border-2 rounded-xl p-4 text-center transition-all duration-200",n.recipientType==="all"?"border-indigo-500 bg-indigo-50":"border-gray-200 hover:border-gray-300"])},[e("div",{class:se(["w-8 h-8 mx-auto mb-2 rounded-full flex items-center justify-center",n.recipientType==="all"?"bg-indigo-500 text-white":"bg-gray-100 text-gray-400"])},[...o[22]||(o[22]=[e("svg",{class:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{d:"M13 6a3 3 0 11-6 0 3 3 0 016 0zM18 8a2 2 0 11-4 0 2 2 0 014 0zM14 15a4 4 0 00-8 0v3h8v-3z"})],-1)])],2),e("span",{class:se(["font-medium text-sm",n.recipientType==="all"?"text-indigo-700":"text-gray-600"])}," All Members ",2)],2)]),e("label",sh,[ce(e("input",{type:"radio",value:"devotees","onUpdate:modelValue":o[5]||(o[5]=a=>n.recipientType=a),class:"sr-only",onChange:o[6]||(o[6]=(...a)=>n.updateRecipients&&n.updateRecipients(...a))},null,544),[[cs,n.recipientType]]),e("div",{class:se(["border-2 rounded-xl p-4 text-center transition-all duration-200",n.recipientType==="devotees"?"border-indigo-500 bg-indigo-50":"border-gray-200 hover:border-gray-300"])},[e("div",{class:se(["w-8 h-8 mx-auto mb-2 rounded-full flex items-center justify-center",n.recipientType==="devotees"?"bg-indigo-500 text-white":"bg-gray-100 text-gray-400"])},[...o[23]||(o[23]=[e("svg",{class:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)])],2),e("span",{class:se(["font-medium text-sm",n.recipientType==="devotees"?"text-indigo-700":"text-gray-600"])}," Devotees Only ",2)],2)]),e("label",nh,[ce(e("input",{type:"radio",value:"volunteers","onUpdate:modelValue":o[7]||(o[7]=a=>n.recipientType=a),class:"sr-only",onChange:o[8]||(o[8]=(...a)=>n.updateRecipients&&n.updateRecipients(...a))},null,544),[[cs,n.recipientType]]),e("div",{class:se(["border-2 rounded-xl p-4 text-center transition-all duration-200",n.recipientType==="volunteers"?"border-indigo-500 bg-indigo-50":"border-gray-200 hover:border-gray-300"])},[e("div",{class:se(["w-8 h-8 mx-auto mb-2 rounded-full flex items-center justify-center",n.recipientType==="volunteers"?"bg-indigo-500 text-white":"bg-gray-100 text-gray-400"])},[...o[24]||(o[24]=[e("svg",{class:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{d:"M13 6a3 3 0 11-6 0 3 3 0 016 0zM18 8a2 2 0 11-4 0 2 2 0 014 0zM14 15a4 4 0 00-8 0v3h8v-3z"})],-1)])],2),e("span",{class:se(["font-medium text-sm",n.recipientType==="volunteers"?"text-indigo-700":"text-gray-600"])}," Volunteers Only ",2)],2)])]),n.recipientType==="custom"?(m(),g("div",rh,[e("div",ah,[o[25]||(o[25]=e("label",{class:"text-sm font-medium text-gray-700"},"Select Recipients",-1)),e("button",{type:"button",onClick:o[9]||(o[9]=a=>n.showRecipientModal=!0),class:"text-indigo-600 hover:text-indigo-700 text-sm font-medium"}," Browse & Select ")]),e("div",lh,[(m(!0),g(be,null,$e(n.selectedRecipients,a=>(m(),g("span",{key:a.id,class:"inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-indigo-100 text-indigo-800"},[te(h(a.name)+" ",1),e("button",{type:"button",onClick:d=>n.removeRecipient(a.id),class:"ml-2 text-indigo-600 hover:text-indigo-800"},[...o[26]||(o[26]=[e("svg",{class:"w-3 h-3",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z","clip-rule":"evenodd"})],-1)])],8,ih)]))),128))])])):J("",!0)]),e("div",dh,[o[27]||(o[27]=e("label",{class:"text-sm font-semibold text-gray-900"},"Subject",-1)),ce(e("input",{type:"text","onUpdate:modelValue":o[10]||(o[10]=a=>n.subject=a),placeholder:"Enter message subject...",class:"w-full px-4 py-3 border border-gray-200 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-all duration-200",required:""},null,512),[[_e,n.subject]])]),e("div",uh,[o[28]||(o[28]=e("label",{class:"text-sm font-semibold text-gray-900"},"Message",-1)),ce(e("textarea",{"onUpdate:modelValue":o[11]||(o[11]=a=>n.message=a),placeholder:"Type your message here...",rows:"6",class:"w-full px-4 py-3 border border-gray-200 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-all duration-200 resize-none",required:""},null,512),[[_e,n.message]]),e("div",ch,[e("div",ph,[e("button",{type:"button",onClick:o[12]||(o[12]=(...a)=>n.insertTemplate&&n.insertTemplate(...a)),class:"text-indigo-600 hover:text-indigo-700 font-medium"}," Insert Template "),n.isDevelopment?(m(),g("button",{key:0,type:"button",onClick:o[13]||(o[13]=a=>n.showDebugInfo=!n.showDebugInfo),class:"text-gray-500 hover:text-gray-700 font-medium"},h(n.showDebugInfo?"Hide":"Show")+" Debug ",1)):J("",!0)]),e("span",mh,h(n.message.length)+"/1000 characters",1)])]),e("div",gh,[o[32]||(o[32]=e("label",{class:"text-sm font-semibold text-gray-900"},"Delivery Method",-1)),e("div",fh,[e("label",vh,[ce(e("input",{type:"checkbox","onUpdate:modelValue":o[14]||(o[14]=a=>n.deliveryMethods=a),value:"sms",class:"w-4 h-4 text-indigo-600 border-gray-300 rounded focus:ring-indigo-500"},null,512),[[ct,n.deliveryMethods]]),o[29]||(o[29]=e("span",{class:"text-sm text-gray-700"},"SMS",-1))]),e("label",hh,[ce(e("input",{type:"checkbox","onUpdate:modelValue":o[15]||(o[15]=a=>n.deliveryMethods=a),value:"email",class:"w-4 h-4 text-indigo-600 border-gray-300 rounded focus:ring-indigo-500"},null,512),[[ct,n.deliveryMethods]]),o[30]||(o[30]=e("span",{class:"text-sm text-gray-700"},"Email",-1))]),e("label",yh,[ce(e("input",{type:"checkbox","onUpdate:modelValue":o[16]||(o[16]=a=>n.deliveryMethods=a),value:"whatsapp",class:"w-4 h-4 text-indigo-600 border-gray-300 rounded focus:ring-indigo-500"},null,512),[[ct,n.deliveryMethods]]),o[31]||(o[31]=e("span",{class:"text-sm text-gray-700"},"WhatsApp",-1))])])]),e("div",xh,[e("button",{type:"submit",disabled:!n.canSend||n.isSubmitting,class:"flex-1 bg-indigo-600 hover:bg-indigo-700 disabled:bg-gray-300 disabled:cursor-not-allowed text-white font-semibold py-3 px-6 rounded-lg transition-all duration-200 flex items-center justify-center space-x-2"},[n.isSubmitting?(m(),g("svg",wh,[...o[33]||(o[33]=[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)])])):(m(),g("svg",kh,[...o[34]||(o[34]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 19l9 2-9-18-9 18 9-2zm0 0v-8"},null,-1)])])),e("span",null,h(n.scheduleType==="now"?"Send Message":"Schedule Message"),1)],8,bh)])],32)])}const Q0=ot(q1,[["render",_h]]),lt={async getTemples(t={}){var o,s,n,r,l,a,d;try{console.log(" Making API call to fetch available temples"),console.log(" Search params:",t);const i=window.location.pathname;console.log(" Current path:",i);const c=i.includes("/standarduser")||i.match(/\/tenant\/\d+\/dashboard/)!==null||i==="/tenant/dashboard",u=((o=t.headers)==null?void 0:o["X-Tenant-ID"])||localStorage.getItem("current_tenant_id")||((s=i.match(/\/tenant\/(\d+)\/dashboard/))==null?void 0:s[1])||localStorage.getItem("X-Tenant-ID");console.log(` Is standard user check: ${c}`),console.log(` Using tenant ID: ${u||"none"}`);const p=t.superAdmin===!0;if(console.log(` Is SuperAdmin request: ${p}`),c&&!p)return console.log(" Standard user detected - using specialized multi-fetch approach"),await this.getTemplesForStandardUser();let w;if(p){console.log(` Using SuperAdmin endpoint for tenant ${t.tenantId}`);try{const A=Date.now();w=await pe.get(`/entities?tenant_id=${t.tenantId}&_=${A}`),console.log(" First attempt successful with /entities endpoint")}catch(A){console.log(" First endpoint failed, trying fallback...",A.message);try{const F=Date.now();w=await pe.get(`/superadmin/entities?tenant_id=${t.tenantId}&_=${F}`),console.log(" Second attempt successful with /superadmin/entities endpoint")}catch(F){console.log(" Second endpoint failed, trying third endpoint...",F.message);try{const I=Date.now();w=await pe.get(`/superadmin/tenants/${t.tenantId}/entities?_=${I}`),console.log(" Third attempt successful with /superadmin/tenants/[id]/entities endpoint")}catch(I){console.log(" All SuperAdmin tenant-specific endpoints failed, using generic endpoint",I.message);const C=Date.now();w=await pe.get(`/entities?_=${C}`)}}}}else if(i.includes("/tenant/dashboard")){const A=Date.now();console.log(" Using temple admin special endpoint with multi-fallback strategy");try{console.log(" Trying /entities/by-creator endpoint..."),w=await pe.get(`/entities/by-creator?_=${A}`),console.log(" by-creator endpoint successful")}catch(F){console.log(" by-creator endpoint failed, trying tenant-created endpoint...",F.message);try{const I=((n=t.headers)==null?void 0:n["X-Tenant-ID"])||localStorage.getItem("current_tenant_id")||((r=i.match(/\/tenant\/(\d+)\/dashboard/))==null?void 0:r[1]);if(I)console.log(` Trying /entities/tenant/${I}/created endpoint...`),w=await pe.get(`/entities/tenant/${I}/created?_=${A}`),console.log(" tenant-created endpoint successful");else throw new Error("No tenant ID available for tenant-created endpoint")}catch(I){console.log(" tenant-created endpoint failed, trying general entities...",I.message);try{console.log(" Trying /entities endpoint..."),w=await pe.get(`/entities?_=${A}`),console.log(" general entities endpoint successful")}catch(C){console.log(" All temple admin endpoints failed, creating empty response",C.message),w={data:[]}}}}}else if(i.includes("/tenant/")||i.includes("/entity/")||i.includes("/admin/")||i.includes("/standarduser/")||i.includes("/superadmin/")){const A=Date.now();console.log(" Using admin endpoint: /entities"),w=await pe.get(`/entities?_=${A}`)}else{console.log(" Using devotee endpoint: /temples/search");const A=new URLSearchParams;t.query&&A.append("query",t.query),t.state&&A.append("state",t.state),t.type&&A.append("type",t.type),A.append("_",Date.now()),w=await pe.get(`/temples/search${A.toString()?"?"+A.toString():""}`)}console.log(" Temple API response received:",w);let f=(w==null?void 0:w.data)||w;if(!Array.isArray(f))if(f!=null&&f.data&&Array.isArray(f.data))f=f.data;else if(f!=null&&f.temples&&Array.isArray(f.temples))f=f.temples;else if(f!=null&&f.entities&&Array.isArray(f.entities))f=f.entities;else if(f!=null&&f.items&&Array.isArray(f.items))f=f.items;else return console.log(" Could not extract temple data from response, returning empty array"),[];if(!Array.isArray(f))return console.error(" Could not extract array from response:",w),[];if(p&&t.tenantId){console.log(` SUPERADMIN: Filtering temples by tenant ID ${t.tenantId}`),f=f.filter(F=>F.created_by&&F.created_by.toString()===t.tenantId.toString()||F.tenant_id&&F.tenant_id.toString()===t.tenantId.toString()||F.creator_id&&F.creator_id.toString()===t.tenantId.toString()),console.log(` SUPERADMIN: After filtering: ${f.length} temples match tenant ID ${t.tenantId}`);const A=f.map(F=>this.normalizeTempleData(F));return console.log(` SUPERADMIN: Final normalized temples: ${A.length}`),A}const v=((l=t.headers)==null?void 0:l["X-Tenant-ID"])||t.tenantId||localStorage.getItem("current_tenant_id")||((a=i.match(/\/tenant\/(\d+)\/dashboard/))==null?void 0:a[1]);c?console.log(` STANDARD USER - SHOWING ALL TEMPLES (${f.length}) WITHOUT FILTERING`):v&&(i.includes("/tenant/")||t.superAdmin)&&(console.log(` Filtering temples by tenant ID ${v}`),f=f.filter(A=>A.created_by&&A.created_by.toString()===v.toString()||A.tenant_id&&A.tenant_id.toString()===v.toString()||A.creator_id&&A.creator_id.toString()===v.toString()),console.log(` After filtering: ${f.length} temples match tenant ID ${v}`));const N=f.map(A=>this.normalizeTempleData(A));return console.log(` Final temples count: ${N.length}`),console.log(" Normalized temples:",N),N}catch(i){return console.error(" Error fetching temples:",i),console.error("Error response:",(d=i.response)==null?void 0:d.data),[]}},async getTempleById(t){var o;try{console.log(` Fetching temple details for ID: ${t}`);const s=Date.now(),n=await pe.get(`/entities/${t}?_=${s}`);console.log(" Temple details response:",n);const r=n.data||n;return this.normalizeTempleData(r)}catch(s){throw console.error(` Error fetching temple ID ${t}:`,s),console.error("Error response:",(o=s.response)==null?void 0:o.data),s}},async getTempleDocuments(t){var o;try{console.log(` Fetching documents for temple ID: ${t}`);const s=Date.now(),n=await pe.get(`/entities/${t}/documents?_=${s}`);return console.log(" Temple documents response:",n),n.data||n}catch(s){throw console.error(` Error fetching temple documents for ID ${t}:`,s),console.error("Error response:",(o=s.response)==null?void 0:o.data),s}},async downloadDocument(t,o){try{console.log(` Downloading ${o} for temple ID: ${t}`);const s=await pe.get(`/entities/${t}/documents/${o}/download`,{responseType:"blob"}),n=new Blob([s.data]),r=window.URL.createObjectURL(n),l=s.headers["content-disposition"];let a=`${o}_${t}.pdf`;if(l){const i=l.match(/filename="(.+)"/);i&&(a=i[1])}const d=document.createElement("a");return d.href=r,d.download=a,document.body.appendChild(d),d.click(),document.body.removeChild(d),window.URL.revokeObjectURL(r),console.log(` Downloaded ${o} as ${a}`),{success:!0,filename:a}}catch(s){throw console.error(` Error downloading ${o} for temple ID ${t}:`,s),s}},async getSuperAdminTemplesStrict(t){try{if(console.log(` STRICT: Fetching temples for tenant ID ${t}`),!t)return console.error(" STRICT: No tenant ID provided"),[];const o=Date.now(),s=await pe.get(`/entities?_=${o}`,{headers:{"X-Tenant-ID":t}});console.log(" STRICT: API response:",s);let n=(s==null?void 0:s.data)||s;Array.isArray(n)||(n!=null&&n.data&&Array.isArray(n.data)?n=n.data:n!=null&&n.temples&&Array.isArray(n.temples)?n=n.temples:n!=null&&n.entities&&Array.isArray(n.entities)?n=n.entities:n!=null&&n.items&&Array.isArray(n.items)?n=n.items:n=[]),console.log(` STRICT: Total temples before filtering: ${n.length}`);const r=n.filter(a=>{const d=a.created_by&&a.created_by.toString()===t.toString(),i=a.tenant_id&&a.tenant_id.toString()===t.toString(),c=a.creator_id&&a.creator_id.toString()===t.toString();return d||i||c});return console.log(` STRICT: Temples after filtering: ${r.length}`),r.map(a=>this.normalizeTempleData(a))}catch(o){return console.error(" STRICT: Error fetching temples:",o),[]}},async getTemplesDirectByTenant(t){try{if(console.log(` DIRECT: Making direct API call for tenant ${t}`),!t)return console.error(" DIRECT: No tenant ID provided"),[];let o=null,s="",n=!1;const r={Authorization:`Bearer ${localStorage.getItem("auth_token")}`,"X-Tenant-ID":t};try{s=`/entities/by-creator?tenant_id=${t}&_=${Date.now()}`,console.log(` DIRECT: Trying endpoint: ${s}`),o=await pe.get(s,{headers:r}),console.log(` DIRECT: Success with ${s}`),n=!0}catch(d){console.log(` DIRECT: Failed with ${s}: ${d.message}`);try{s=`/entities?tenant_id=${t}&_=${Date.now()}`,console.log(` DIRECT: Trying endpoint: ${s}`),o=await pe.get(s,{headers:r}),console.log(` DIRECT: Success with ${s}`),n=!0}catch(i){console.log(` DIRECT: Failed with ${s}: ${i.message}`);try{s=`/superadmin/tenants/${t}/entities?_=${Date.now()}`,console.log(` DIRECT: Trying endpoint: ${s}`),o=await pe.get(s,{headers:r}),console.log(` DIRECT: Success with ${s}`),n=!0}catch(c){console.log(` DIRECT: Failed with ${s}: ${c.message}`),s=`/entities?_=${Date.now()}`,console.log(` DIRECT: Using fallback endpoint: ${s}`),o=await pe.get(s,{headers:r})}}}console.log(` DIRECT: Response from ${s}:`,o);let l=[];o&&o.data&&(l=Array.isArray(o.data)?o.data:o.data.data?o.data.data:o.data.entities?o.data.entities:o.data.items?o.data.items:[]),console.log(` DIRECT: Extracted ${l.length} temples`);const a=l.filter(d=>{const i=d.created_by&&d.created_by.toString()===t.toString(),c=d.tenant_id&&d.tenant_id.toString()===t.toString(),u=d.creator_id&&d.creator_id.toString()===t.toString();return i||c||u});return console.log(` DIRECT: After filtering: ${a.length} temples`),a.map(d=>this.normalizeTempleData(d))}catch(o){return console.error(" DIRECT: Fatal error:",o),[]}},async getTemplesForStandardUser(){var t,o;try{console.log(" Standard user: Fetching all accessible temples...");const s=localStorage.getItem("current_tenant_id")||((t=document.querySelector('meta[name="tenant-id"]'))==null?void 0:t.getAttribute("content"))||((o=window.location.pathname.match(/\/tenant\/(\d+)\/dashboard/))==null?void 0:o[1]);console.log(` Using tenant ID: ${s}`);const n=new Map;try{console.log("1 Fetching assigned entity...");const a=Date.now();let i=(await pe.get(`/entities?_=${a}`)).data||[];Array.isArray(i)||(i.data&&Array.isArray(i.data)?i=i.data:i.entities&&Array.isArray(i.entities)?i=i.entities:i.items&&Array.isArray(i.items)?i=i.items:i=[]),console.log(` Got ${i.length} assigned temples`),i.forEach(c=>{n.set(c.id,c)})}catch(a){console.warn(" Error fetching assigned entity:",a.message)}if(s)try{console.log(`2 Fetching temples for tenant ${s}...`);const a=Date.now();let i=(await pe.get(`/entities?tenant_id=${s}&_=${a}`)).data||[];Array.isArray(i)||(i.data&&Array.isArray(i.data)?i=i.data:i.entities&&Array.isArray(i.entities)?i=i.entities:i.items&&Array.isArray(i.items)?i=i.items:i=[]),console.log(` Got ${i.length} tenant temples`),i.forEach(c=>{n.set(c.id,c)})}catch(a){console.warn(" Error fetching tenant temples:",a.message)}try{console.log("3 Fetching all temples as fallback...");const a=Date.now();let i=(await pe.get(`/superadmin/entities?_=${a}`)).data||[];Array.isArray(i)||(i.data&&Array.isArray(i.data)?i=i.data:i.entities&&Array.isArray(i.entities)?i=i.entities:i.items&&Array.isArray(i.items)?i=i.items:i=[]),s&&(i=i.filter(c=>c.created_by&&c.created_by.toString()===s.toString()||c.tenant_id&&c.tenant_id.toString()===s.toString()||c.creator_id&&c.creator_id.toString()===s.toString())),console.log(` Got ${i.length} superadmin temples for tenant`),i.forEach(c=>{n.set(c.id,c)})}catch(a){console.warn(" Error fetching superadmin temples:",a.message)}const r=Array.from(n.values());return console.log(` Total unique temples found: ${r.length}`),r.map(a=>this.normalizeTempleData(a))}catch(s){return console.error(" Error in getTemplesForStandardUser:",s),[]}},async getSuperAdminTemples(t){return console.log(` Making API call to fetch temples for SuperAdmin for tenant ${t}`),this.getTemples({tenantId:t,superAdmin:!0})},async createTemple(t){var o,s,n,r,l,a,d,i,c;try{console.log(" Creating new temple entity"),console.log(" Temple data received:",t);const u=t.documents&&(t.documents.registration||t.documents.trustDeed||t.documents.property||t.documents.additional&&t.documents.additional.length>0);let p,w={};if(u){console.log(" Creating FormData with files");const v=new FormData;v.append("name",t.name||""),v.append("main_deity",t.main_deity||t.mainDeity||""),v.append("temple_type",t.temple_type||t.templeType||t.category||""),v.append("established_year",t.established_year?t.established_year.toString():""),v.append("phone",t.phone||""),v.append("email",t.email||""),v.append("description",t.description||""),v.append("street_address",t.street_address||((o=t.address)==null?void 0:o.street)||t.streetAddress||""),v.append("city",t.city||((s=t.address)==null?void 0:s.city)||""),v.append("district",t.district||""),v.append("state",t.state||((n=t.address)==null?void 0:n.state)||""),v.append("pincode",t.pincode||((r=t.address)==null?void 0:r.pincode)||""),v.append("landmark",t.landmark||""),v.append("map_link",t.map_link||t.mapLink||""),v.append("status","pending"),t.documents.registration&&(v.append("registration_cert",t.documents.registration),console.log(" Added registration certificate:",t.documents.registration.name)),t.documents.trustDeed&&(v.append("trust_deed",t.documents.trustDeed),console.log(" Added trust deed:",t.documents.trustDeed.name)),t.documents.property&&(v.append("property_docs",t.documents.property),console.log(" Added property documents:",t.documents.property.name)),t.documents.additional&&t.documents.additional.length>0&&t.documents.additional.forEach((N,A)=>{v.append(`additional_docs_${A}`,N),console.log(` Added additional document ${A}:`,N.name)}),p=v,console.log(" FormData contents:");for(let[N,A]of v.entries())A instanceof File?console.log(`${N}: File - ${A.name} (${A.size} bytes)`):console.log(`${N}: ${A}`)}else console.log(" Creating JSON payload (no files)"),p={name:t.name||"",main_deity:t.main_deity||t.mainDeity||"",temple_type:t.temple_type||t.templeType||t.category||"",established_year:t.established_year?parseInt(t.established_year):null,phone:t.phone||"",email:t.email||"",description:t.description||"",street_address:t.street_address||((l=t.address)==null?void 0:l.street)||t.streetAddress||"",city:t.city||((a=t.address)==null?void 0:a.city)||"",district:t.district||"",state:t.state||((d=t.address)==null?void 0:d.state)||"",pincode:t.pincode||((i=t.address)==null?void 0:i.pincode)||"",landmark:t.landmark||"",map_link:t.map_link||t.mapLink||"",status:"pending"},w["Content-Type"]="application/json",console.log(" JSON payload:",p);console.log(" Making API request to /entities"),console.log(" Headers:",w);const f=await pe.post("/entities",p,{headers:w});return console.log(" Temple created successfully:",f.data),f.data||f}catch(u){throw console.error(" Error creating temple:",u),console.error(" Error response:",(c=u.response)==null?void 0:c.data),console.error(" Error config:",u.config),u}},async updateTemple(t,o){var s,n,r,l,a,d,i;try{console.log(` Updating temple with ID: ${t}`),console.log(" Update data:",o);const c={id:parseInt(t),name:o.name||"",main_deity:o.maindeity||o.mainDeity||o.main_deity||"",temple_type:o.templetype||o.templeType||o.temple_type||o.category||"",established_year:o.establishedyear||o.establishedYear||o.established_year?parseInt(o.establishedyear||o.establishedYear||o.established_year):null,phone:((s=o.contact)==null?void 0:s.phone)||o.phone||"",email:((n=o.contact)==null?void 0:n.email)||o.email||"",description:o.description||"",street_address:o.streetaddress||o.streetAddress||o.street_address||((r=o.address)==null?void 0:r.street)||o.addressLine1||"",city:((l=o.address)==null?void 0:l.city)||o.city||"",district:o.district||"",state:((a=o.address)==null?void 0:a.state)||o.state||"",pincode:o.pincode||((d=o.address)==null?void 0:d.pincode)||"",landmark:o.landmark||"",map_link:o.maplink||o.mapLink||o.map_link||""};console.log(" Final update payload:",c);const u=await pe.put(`/entities/${t}`,c);return console.log(" Update temple response:",u),u.data||u}catch(c){throw console.error(` Error updating temple ID ${t}:`,c),console.error("Error details:",c.message||((i=c.response)==null?void 0:i.data)),c}},async toggleTempleStatus(t,o){var s,n,r,l,a,d,i,c,u,p,w,f;try{console.log(` Toggling temple status for ID: ${t} to ${o?"active":"inactive"}`);const v=localStorage.getItem("current_tenant_id")||localStorage.getItem("X-Tenant-ID")||localStorage.getItem("tenant_id"),N={"Content-Type":"application/json"};v&&(N["X-Tenant-ID"]=v,console.log(` Including tenant ID in request: ${v}`));const A={isactive:o};console.log(" Sending payload:",A),console.log(" With headers:",N);let F,I;try{console.log(` Trying POST /entities/${t}/toggle-status`),F=await pe.post(`/entities/${t}/toggle-status`,A,{headers:N}),console.log(" Success with POST /entities/{id}/toggle-status")}catch(C){console.log(" POST toggle-status failed, trying PATCH status..."),I=C;try{console.log(` Trying PATCH /entities/${t}/status`),F=await pe.patch(`/entities/${t}/status`,A,{headers:N}),console.log(" Success with PATCH /entities/{id}/status")}catch(j){console.log(" PATCH status failed, trying PUT status..."),I=j;try{console.log(` Trying PUT /entities/${t}/status`),F=await pe.put(`/entities/${t}/status`,A,{headers:N}),console.log(" Success with PUT /entities/{id}/status")}catch($){throw I=$,I}}}return console.log(" Status updated successfully:",F.data),F.data}catch(v){if(console.error(` Failed to toggle temple status for ID ${t}:`,v.message),console.error("Error response:",(s=v.response)==null?void 0:s.data),((n=v.response)==null?void 0:n.status)===403){const N=((l=(r=v.response)==null?void 0:r.data)==null?void 0:l.error)||((d=(a=v.response)==null?void 0:a.data)==null?void 0:d.message);throw new Error(N||"You do not have permission to toggle this temple status.")}else{if(((i=v.response)==null?void 0:i.status)===404)throw new Error("Temple not found.");if(((c=v.response)==null?void 0:c.status)===401)throw new Error("Please log in to perform this action.");{const N=((p=(u=v.response)==null?void 0:u.data)==null?void 0:p.error)||((f=(w=v.response)==null?void 0:w.data)==null?void 0:f.message);throw new Error(N||"Failed to toggle temple status. Please try again.")}}}},async deleteTemple(t){var o;try{console.log(` Deleting temple with ID: ${t}`);const s=await pe.delete(`/entities/${t}`);return console.log(" Temple deleted successfully"),s.data||s}catch(s){throw console.error(` Error deleting temple ID ${t}:`,s),console.error("Error response:",(o=s.response)==null?void 0:o.data),s}},async joinTemple(t){var o;try{console.log(` Joining temple ID ${t}`);const s=await pe.post("/memberships",{entity_id:t});return console.log(" Join temple response:",s),s.data||s}catch(s){throw console.error(` Error joining temple ID ${t}:`,s),console.error("Error response:",(o=s.response)==null?void 0:o.data),s}},async getRecentTemples(){var t;try{console.log(" Fetching recent temples");const o=await pe.get("/temples/recent");console.log(" Recent temples response:",o);let s=o.data||o;return Array.isArray(s)||(s.data&&Array.isArray(s.data)?s=s.data:s.temples&&Array.isArray(s.temples)?s=s.temples:s.entities&&Array.isArray(s.entities)?s=s.entities:s.items&&Array.isArray(s.items)&&(s=s.items)),Array.isArray(s)?s.map(n=>this.normalizeTempleData(n)):(console.error(" Could not extract array from response:",o),[])}catch(o){return console.error(" Error fetching recent temples:",o),console.error("Error response:",(t=o.response)==null?void 0:t.data),[]}},normalizeTempleData(t){return t?{id:t.id||t.ID||0,name:t.name||t.Name||"Unknown Temple",description:t.description||t.Description||"",templeType:t.temple_type||t.TempleType||"",category:t.temple_type||t.TempleType||"",addressLine1:t.street_address||t.StreetAddress||"",city:t.city||t.City||"",state:t.state||t.State||"",district:t.district||t.District||"",pincode:t.pincode||t.Pincode||"",country:"India",phone:t.phone||t.Phone||"",email:t.email||t.Email||"",status:t.status||t.Status||"pending",devoteeCount:t.devotee_count||t.DevoteeCount||0,volunteersCount:t.volunteers_count||t.VolunteersCount||0,image:t.image_url||t.ImageUrl||null,mainDeity:t.main_deity||t.MainDeity||"",establishedYear:t.established_year||t.EstablishedYear||null,createdAt:t.created_at||t.CreatedAt||null,updatedAt:t.updated_at||t.UpdatedAt||null,createdBy:t.created_by||t.CreatedBy||null,tenantId:t.tenant_id||t.TenantId||t.created_by||t.CreatedBy||null,registrationCertUrl:t.registration_cert_url||t.RegistrationCertUrl||null,trustDeedUrl:t.trust_deed_url||t.TrustDeedUrl||null,propertyDocsUrl:t.property_docs_url||t.PropertyDocsUrl||null,additionalDocsUrls:t.additional_docs_urls||t.AdditionalDocsUrls||null,address:{street:t.street_address||t.StreetAddress||"",city:t.city||t.City||"",state:t.state||t.State||"",district:t.district||t.District||"",pincode:t.pincode||t.Pincode||"",country:"India"},contact:{phone:t.phone||t.Phone||"",email:t.email||t.Email||"",website:t.website||t.Website||""}}:null},async getEntityDetails(t){return(await pe.get(`/entities/${t}`)).data},async searchTemples(t){var o;try{console.log(` Searching temples with query: ${t}`);const s=window.location.pathname;let n;s.includes("/tenant/")||s.includes("/entity/")||s.includes("/admin/")||s.includes("/standarduser/")||s.includes("/superadmin/")?(console.log(" Using admin search endpoint: /entities"),n=await pe.get(`/entities?search=${encodeURIComponent(t)}`)):(console.log(" Using devotee search endpoint: /temples/search"),n=await pe.get(`/temples/search?query=${encodeURIComponent(t)}`));let r=n.data||n;return Array.isArray(r)||(r.data&&Array.isArray(r.data)?r=r.data:r.temples&&Array.isArray(r.temples)?r=r.temples:r.entities&&Array.isArray(r.entities)?r=r.entities:r.items&&Array.isArray(r.items)&&(r=r.items)),Array.isArray(r)?r.map(l=>this.normalizeTempleData(l)):(console.error(" Could not extract array from response:",n),[])}catch(s){return console.error(" Error searching temples:",s),console.error("Error response:",(o=s.response)==null?void 0:o.data),[]}}},Ot=Uo("temple",()=>{const t=B([]),o=B(null),s=B(!1),n=B(null),r=Ue(),l=B({name:"",mainDeity:"",description:"",templeType:"",establishedYear:"",contact:{phone:"",email:"",website:""},address:{street:"",city:"",state:"",pincode:"",country:"India"},district:"",landmark:"",mapLink:"",documents:{registration:null,trustDeed:null,property:null,additional:[]},status:"pending",rejection_reason:"",admin_notes:""}),a=oe(()=>t.value.filter(U=>U.status==="approved"||U.status==="active")),d=oe(()=>t.value.filter(U=>U.status==="pending")),i=oe(()=>t.value.filter(U=>U.status==="rejected")),c=oe(()=>({total:t.value.length,approved:a.value.length,pending:d.value.length,rejected:i.value.length})),u=()=>{t.value=[],o.value=null},p=async U=>{try{s.value=!0,n.value=null,console.log(` Fetching temples for tenant ID ${U||"unknown"}...`);const _={};U&&(_.headers={"X-Tenant-ID":U});const k=Date.now(),L=await lt.getTemples(_,k);return console.log(" Temple service response:",L),t.value=L||[],console.log(" Temples set in store:",t.value),L}catch(_){const k=_.message||"Failed to fetch temples";throw n.value=k,r.error(k),console.error("Error fetching temples:",_),_}finally{s.value=!1}},w=async U=>{console.log(` Fetching temples for SuperAdmin for tenant ID ${U}...`),t.value=[],s.value=!0,n.value=null;try{if(!U)return console.warn("No tenant ID provided for fetchTemplesForSuperAdmin"),[];console.log(` Starting fresh fetch for tenant ID ${U}`),localStorage.setItem("current_tenant_id",U);const _={tenantId:U,superAdmin:!0,headers:{"X-Tenant-ID":U},timestamp:Date.now()},k=await lt.getTemples(_);if(k&&Array.isArray(k)){const L=k.filter(z=>z.created_by&&z.created_by.toString()===U.toString()||z.tenant_id&&z.tenant_id.toString()===U.toString()||z.creator_id&&z.creator_id.toString()===U.toString());t.value=L,console.log(` Temple service response for SuperAdmin: ${L.length} temples for tenant ${U}`)}else t.value=[],console.warn(`No temples returned for tenant ID ${U}`);return t.value}catch(_){return console.error(" Error fetching temples for SuperAdmin:",_),n.value=`Failed to fetch temples: ${_.message||"Unknown error"}`,[]}finally{s.value=!1}},f=async U=>{console.log(` STRICT STORE: Fetching temples for tenant ID ${U}`),t.value=[],s.value=!0,n.value=null;try{if(!U)return console.warn(" STRICT STORE: No tenant ID provided"),[];const _=await lt.getSuperAdminTemplesStrict(U);return t.value=_,console.log(` STRICT STORE: Set ${t.value.length} temples in store`),t.value}catch(_){return console.error(" STRICT STORE: Error:",_),n.value=`Failed to fetch temples: ${_.message||"Unknown error"}`,[]}finally{s.value=!1}},v=async U=>{console.log(` STORE DIRECT: Fetching temples for tenant ${U}`),t.value=[],s.value=!0,n.value=null;try{const _=await lt.getTemplesDirectByTenant(U);return t.value=_,console.log(` STORE DIRECT: Set ${_.length} temples in store`),_}catch(_){return console.error(" STORE DIRECT: Error:",_),n.value=_.message||"Unknown error",[]}finally{s.value=!1}},N=async U=>{var _,k,L,z,q,K;try{s.value=!0,n.value=null,console.log(" STORE: Creating temple with data:",U);const H={name:U.name||"",mainDeity:U.mainDeity||U.presiding_deity||"",templeType:U.templeType||U.category||"",establishedYear:U.establishedYear||"",description:U.description||"",contact:{phone:((_=U.contact)==null?void 0:_.phone)||U.phone||"",email:((k=U.contact)==null?void 0:k.email)||U.email||""},address:{street:((L=U.address)==null?void 0:L.street)||U.addressLine1||U.streetAddress||"",city:((z=U.address)==null?void 0:z.city)||U.city||"",state:((q=U.address)==null?void 0:q.state)||U.state||"",pincode:((K=U.address)==null?void 0:K.pincode)||U.pincode||""},district:U.district||"",landmark:U.landmark||"",mapLink:U.mapLink||"",documents:U.documents||{}};console.log(" STORE: Transformed data for service:",H);const O=await lt.createTemple(H);console.log(" STORE: Service response:",O);const ee={id:O.id||O.ID||Date.now(),name:H.name,description:H.description,status:"pending",templeType:H.templeType,mainDeity:H.mainDeity,establishedYear:H.establishedYear,phone:H.contact.phone,email:H.contact.email,addressLine1:H.address.street,city:H.address.city,state:H.address.state,pincode:H.address.pincode,district:H.district,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),address:H.address,contact:H.contact};t.value.push(ee),r.success("Temple created successfully. It will be reviewed by the admin."),b();try{localStorage.removeItem("dashboard_local_data"),localStorage.removeItem("dashboard_counts"),localStorage.removeItem("dashboard_seva_names")}catch(ge){console.warn("Could not clear localStorage cache:",ge)}return O}catch(H){const O=H.message||"Failed to create temple";throw n.value=O,r.error(O),console.error("Error creating temple:",H),H}finally{s.value=!1}},A=async(U,_)=>{var k,L,z,q,K,H;try{s.value=!0,n.value=null,console.log(" STORE: Updating temple with data:",_);const O={name:_.name||"",mainDeity:_.mainDeity||_.presiding_deity||"",templeType:_.templeType||_.category||"",establishedYear:_.establishedYear||"",description:_.description||"",contact:{phone:((k=_.contact)==null?void 0:k.phone)||_.phone||"",email:((L=_.contact)==null?void 0:L.email)||_.email||""},address:{street:((z=_.address)==null?void 0:z.street)||_.addressLine1||_.streetAddress||"",city:((q=_.address)==null?void 0:q.city)||_.city||"",state:((K=_.address)==null?void 0:K.state)||_.state||"",pincode:((H=_.address)==null?void 0:H.pincode)||_.pincode||""},district:_.district||"",landmark:_.landmark||"",mapLink:_.mapLink||"",documents:_.documents||{}},ee=await lt.updateTemple(U,O),ge=t.value.findIndex(de=>de.id===Number(U));return ge!==-1&&(t.value[ge]={...t.value[ge],...ee,templeType:ee.temple_type||ee.templeType,mainDeity:ee.main_deity||ee.mainDeity,addressLine1:ee.street_address||ee.addressLine1,updatedAt:new Date().toISOString()}),r.success("Temple updated successfully"),ee}catch(O){const ee=O.message||`Failed to update temple with ID: ${U}`;throw n.value=ee,r.error(ee),console.error("Error updating temple:",O),O}finally{s.value=!1}},F=async(U,_)=>{try{s.value=!0,n.value=null,console.log(` STORE: Updating temple ${U} status to ${_}`);const k=await lt.toggleTempleStatus(U,_),L=t.value.findIndex(z=>z.id===Number(U));return L!==-1&&(t.value[L]={...t.value[L],isActive:_,updatedAt:new Date().toISOString()},console.log(` STORE: Updated temple ${U} in local list`)),r.success(`Temple ${_?"activated":"deactivated"} successfully`),k}catch(k){const L=k.message||"Failed to update temple status";throw n.value=L,r.error(L),console.error("Error updating temple status:",k),k}finally{s.value=!1}},I=async U=>{try{s.value=!0,n.value=null,await lt.deleteTemple(U),t.value=t.value.filter(_=>_.id!==Number(U)),r.success("Temple deleted successfully")}catch(_){const k=_.message||`Failed to delete temple with ID: ${U}`;throw n.value=k,r.error(k),console.error("Error deleting temple:",_),_}finally{s.value=!1}},C=U=>{o.value=U},j=()=>o.value,$=U=>t.value.find(_=>_.slug===U),y=U=>{const _=$(U);return _?(o.value=_,_):null},b=()=>{l.value={name:"",mainDeity:"",description:"",templeType:"",establishedYear:"",contact:{phone:"",email:"",website:""},address:{street:"",city:"",state:"",pincode:"",country:"India"},district:"",landmark:"",mapLink:"",documents:{registration:null,trustDeed:null,property:null,additional:[]},status:"pending",rejection_reason:"",admin_notes:""}},E=(U,_)=>{if(U.includes(".")){const[k,L]=U.split(".");l.value[k][L]=_}else l.value[U]=_},R=U=>{if(!U.trim())return t.value;const _=U.toLowerCase();return t.value.filter(k=>{var L,z,q,K,H;return k.name.toLowerCase().includes(_)||((z=(L=k.address)==null?void 0:L.city)==null?void 0:z.toLowerCase().includes(_))||((K=(q=k.address)==null?void 0:q.state)==null?void 0:K.toLowerCase().includes(_))||((H=k.mainDeity)==null?void 0:H.toLowerCase().includes(_))})},M=oe(()=>U=>t.value.find(_=>_.id===parseInt(U)));return{temples:t,currentTemple:o,loading:s,error:n,templeForm:l,approvedTemples:a,pendingTemples:d,rejectedTemples:i,templeCounts:c,getTempleById:M,fetchTemples:p,fetchDirectByTenant:v,createTemple:N,updateTemple:A,deleteTemple:I,setCurrentTemple:C,getCurrentTemple:j,getTempleBySlug:$,setCurrentTempleBySlug:y,resetForm:b,updateFormField:E,searchTemples:R,clearError:()=>{n.value=null},updateTempleStatus:F,fetchTemplesForSuperAdmin:w,fetchSuperAdminTemplesStrict:f,clearTempleData:u}}),$h={key:0,class:"w-2 h-2 bg-current rounded-full animate-pulse opacity-60"},ep={__name:"TempleApprovalStatus",props:{status:{type:String,required:!0,validator:t=>{const o=String(t||"").toUpperCase();return["PENDING","APPROVED","REJECTED"].includes(o)}},size:{type:String,default:"md",validator:t=>["sm","md","lg"].includes(t)}},setup(t){const o=t,s=oe(()=>String(o.status||"").toUpperCase()),n=oe(()=>{const r={PENDING:{text:"Pending Approval",classes:"bg-amber-100 text-amber-800 border border-amber-200",icon:()=>qt("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[qt("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})])},APPROVED:{text:"Approved",classes:"bg-green-100 text-green-800 border border-green-200",icon:()=>qt("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[qt("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})])},REJECTED:{text:"Rejected",classes:"bg-red-100 text-red-800 border border-red-200",icon:()=>qt("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[qt("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z"})])}};return r[s.value]||r.PENDING});return(r,l)=>(m(),g("div",{class:se(["inline-flex items-center gap-2 px-3 py-1.5 rounded-full text-sm font-medium transition-all duration-200",n.value.classes])},[(m(),Ne(wt(n.value.icon),{class:"w-4 h-4"})),e("span",null,h(n.value.text),1),s.value==="PENDING"?(m(),g("div",$h)):J("",!0)],2))}},Sh={class:"min-h-screen bg-gray-50"},Dh={class:"bg-white shadow-sm border-b border-gray-200 rounded-2xl"},Ch={class:"max-w-7xl mx-auto px-2 sm:px-4 lg:px-6 xl:px-8 py-4 sm:py-6"},Th={class:"flex flex-col sm:flex-row sm:items-center sm:justify-between"},Eh={class:"mb-4 sm:mb-0"},Ah={class:"text-sm sm:text-base text-gray-600 mt-1"},Ih={key:0,class:"text-indigo-600 font-medium"},Mh={class:"flex items-center space-x-4"},Rh={class:"bg-indigo-50 px-4 py-2 rounded-lg border border-indigo-200"},Ph={class:"text-indigo-800 font-medium"},Nh={class:"text-indigo-600 text-sm ml-2"},jh={class:"max-w-7xl mx-auto px-2 sm:px-4 lg:px-6 xl:px-8 py-4 sm:py-6 lg:py-8"},Lh={class:"bg-gradient-to-r from-indigo-600 to-indigo-800 rounded-2xl shadow-lg p-4 sm:p-6 lg:p-8 mb-6 sm:mb-8 text-white"},Bh={class:"flex flex-col md:flex-row md:items-center md:justify-between"},Uh={class:"flex-1"},Fh={class:"text-indigo-100 text-sm sm:text-base lg:text-lg mb-4"},Vh={key:0,class:"mt-6 md:mt-0"},Oh=["disabled","title"],zh={key:0,class:"mb-8 bg-red-50 border-l-4 border-red-500 p-6 rounded-lg shadow-sm"},Hh={class:"flex items-start"},qh={class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 sm:gap-6 mb-6 sm:mb-8"},Gh={class:"bg-white rounded-2xl shadow-sm border border-gray-200 p-6 hover:shadow-md transition-shadow duration-200"},Jh={class:"flex items-center"},Wh={class:"ml-4"},Yh={class:"text-2xl font-bold text-gray-900"},Kh={class:"bg-white rounded-2xl shadow-sm border border-gray-200 p-6 hover:shadow-md transition-shadow duration-200"},Xh={class:"flex items-center"},Zh={class:"ml-4"},Qh={class:"text-2xl font-bold text-gray-900"},e2={class:"bg-white rounded-2xl shadow-sm border border-gray-200 p-6 hover:shadow-md transition-shadow duration-200"},t2={class:"flex items-center"},o2={class:"ml-4"},s2={class:"text-2xl font-bold text-gray-900"},n2={class:"bg-white rounded-2xl shadow-sm border border-gray-200 overflow-hidden"},r2={class:"p-6 border-b border-gray-200"},a2={class:"flex flex-col sm:flex-row sm:items-center sm:justify-between"},l2={class:"text-xl font-bold text-gray-900"},i2={class:"text-gray-600 mt-1"},d2={key:0,class:"mt-4 sm:mt-0"},u2=["disabled","title"],c2={key:0,class:"p-12 text-center"},p2={key:1,class:"divide-y divide-gray-200"},m2={class:"flex flex-col lg:flex-row lg:items-center lg:justify-between"},g2={class:"flex-1"},f2={class:"flex flex-col sm:flex-row sm:items-center mb-2"},v2={class:"text-base sm:text-lg font-semibold text-gray-900 mr-0 sm:mr-3 mb-2 sm:mb-0"},h2={class:"text-gray-600 mb-2"},y2={class:"flex flex-wrap items-center text-sm text-gray-500 gap-4"},x2={class:"flex items-center"},b2={class:"flex items-center"},w2={class:"mt-4 lg:mt-0 flex flex-col sm:flex-row items-stretch sm:items-center space-y-2 sm:space-y-0 sm:space-x-3"},k2=["onClick"],_2=["onClick"],$2=["onClick","disabled","title"],S2={key:0,class:"mt-4 p-4 bg-red-50 border border-red-200 rounded-lg"},D2={class:"flex items-start"},C2={class:"text-sm text-red-700"},T2=["onClick"],E2={key:2,class:"p-12 text-center"},A2={class:"text-gray-600 mb-6"},Er={__name:"TenantDashboard",setup(t){B("dashboard");const o=et(),s=tt(),n=Ot(),r=We(),{showToast:l}=Ue(),a=B(!0),d=B(!1),i=_=>(_.status||"").toString().toLowerCase()==="approved",c=_=>(_.status||"").toString().toLowerCase()==="rejected",u=_=>(_.status||"").toString().toLowerCase()==="pending";oe(()=>{var k;return(((k=r.user)==null?void 0:k.status)||"").toString().toLowerCase()==="approved"});const p=oe(()=>{var k;return(((k=r.user)==null?void 0:k.status)||"").toString().toLowerCase()==="rejected"}),w=oe(()=>{var k;const _=(((k=r.user)==null?void 0:k.status)||"").toString().toLowerCase();return _==="pending"||!_}),f=oe(()=>{const _=(r.userRole||"").toLowerCase();return _==="tenant"||_==="templeadmin"}),v=oe(()=>{var L,z;const _=(r.userRole||"").toLowerCase(),k=((L=r.user)==null?void 0:L.roleId)||((z=r.user)==null?void 0:z.role_id);return _==="monitoring_user"||_==="monitoringuser"||k===6||k==="6"}),N=oe(()=>{const _=(r.userRole||"").toLowerCase();return _==="standard_user"||_==="standarduser"}),A=oe(()=>f.value&&!v.value?"Tenant":v.value?"Monitoring User":N.value?"Standard User":r.userRole||"User"),F=oe(()=>{var k;if(s.params.tenantId)return console.log("Using tenantId from route params:",s.params.tenantId),s.params.tenantId;if((v.value||N.value)&&r.assignedTenantId)return console.log("Using assigned tenant ID:",r.assignedTenantId),r.assignedTenantId;const _=((k=r.user)==null?void 0:k.id)||localStorage.getItem("current_tenant_id");return console.log("Using tenantId from auth store:",_),_}),I=()=>{localStorage.removeItem("temple_data"),localStorage.removeItem("temple_cache"),typeof n.clearTempleData=="function"&&n.clearTempleData()},C=oe(()=>n.temples.filter(_=>i(_)).length),j=oe(()=>n.temples.filter(_=>u(_)).length),$=()=>{if(v.value){d.value=!0,l("You are not allowed to create temples. Monitoring users have view-only access.","error"),setTimeout(()=>{d.value=!1},5e3);return}o.push("/tenant/entities/create")},y=_=>_?new Date(_).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):"N/A",b=_=>{o.push(`/tenant/entities/${_.id}`)},E=_=>{if(v.value){l("You are not allowed to edit temples. Monitoring users have view-only access.","error");return}o.push(`/tenant/entities/${_.id}/edit`)},R=_=>{o.push(`/entity/${_.id}/dashboard`)},M=_=>{if(v.value){l("You are not allowed to re-upload documents. Monitoring users have view-only access.","error");return}o.push(`/tenant/entities/${_.id}/documents`)};Oe(F,async(_,k)=>{_&&_!==k&&(console.log(`TenantId changed from ${k} to ${_}, reloading data...`),await G())});const G=async()=>{if(a.value=!0,!F.value){console.warn("No tenant ID available, cannot load temples"),a.value=!1;return}try{I();const _=localStorage.getItem("selected_tenant_id");console.log("Loading temples for tenant ID:",F.value,"Selected tenant ID:",_),_?(console.log("Using fetchDirectByTenant for SuperAdmin tenant view"),await n.fetchDirectByTenant(_)):(console.log("Using standard fetchTemples"),await n.fetchTemples(F.value))}catch(_){console.error("Error loading temple data:",_),l("Failed to load temple data. Please try again.","error")}finally{a.value=!1}},U=_=>{if(!_)return"";try{const k=typeof _=="string"?JSON.parse(_):_;return k?[k.street,k.city,k.state,k.pincode,k.country].filter(Boolean).join(", "):""}catch{return _||""}};return Me(async()=>{var _;console.log("TenantDashboard mounted with tenantId:",F.value),console.log("User role:",r.userRole,"Role ID:",(_=r.user)==null?void 0:_.roleId),console.log("Is Monitoring User:",v.value),await G(),f.value&&!v.value&&(w.value?l("Your account is pending approval from the administrator.","info"):p.value&&l("Your account has been rejected. Please contact support.","error"))}),(_,k)=>{var L,z;return m(),g("div",Sh,[e("div",Dh,[k[3]||(k[3]=te(" <",-1)),e("div",Ch,[e("div",Th,[e("div",Eh,[k[2]||(k[2]=e("h1",{class:"text-xl sm:text-2xl font-bold text-gray-900"},"Tenant Dashboard",-1)),e("p",Ah,[k[1]||(k[1]=te(" Manage your temple registrations and applications ",-1)),F.value?(m(),g("span",Ih," (Tenant ID: "+h(F.value)+")",1)):J("",!0)])]),e("div",Mh,[e("div",Rh,[e("span",Ph,h(((L=Te(r).user)==null?void 0:L.name)||((z=Te(r).user)==null?void 0:z.fullName)),1),e("span",Nh,"("+h(A.value)+")",1)])])])])]),e("div",jh,[e("div",Lh,[e("div",Bh,[e("div",Uh,[k[4]||(k[4]=e("h2",{class:"text-xl sm:text-2xl lg:text-3xl font-bold mb-2"},"Welcome back!",-1)),e("p",Fh,h(f.value?"Manage your temple applications and track their approval status":"View and access temples for this tenant"),1)]),f.value?(m(),g("div",Vh,[e("button",{onClick:$,disabled:v.value,class:se(["inline-flex items-center px-6 py-3 rounded-xl font-semibold transition-all duration-200 shadow-lg",v.value?"bg-gray-400 text-gray-200 cursor-not-allowed":"bg-white text-indigo-600 hover:bg-indigo-50 hover:shadow-xl transform hover:-translate-y-1"]),title:v.value?"Monitoring users are not allowed to create temples":"Create a new temple"},[...k[5]||(k[5]=[e("svg",{class:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})],-1),te(" Create New Temple ",-1)])],10,Oh)])):J("",!0)])]),d.value?(m(),g("div",zh,[e("div",Hh,[k[7]||(k[7]=Ce('<div class="flex-shrink-0"><svg class="h-6 w-6 text-red-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"></path></svg></div><div class="ml-3 flex-1"><h3 class="text-lg font-semibold text-red-800">Access Restricted</h3><p class="mt-2 text-sm text-red-700"> You are not allowed to create temples. Monitoring users have view-only access to temple data. Please contact your administrator if you need additional permissions. </p></div>',2)),e("button",{onClick:k[0]||(k[0]=q=>d.value=!1),class:"flex-shrink-0 ml-4 text-red-500 hover:text-red-700"},[...k[6]||(k[6]=[e("svg",{class:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])])])):J("",!0),e("div",qh,[e("div",Gh,[e("div",Jh,[k[9]||(k[9]=e("div",{class:"p-3 bg-indigo-100 rounded-xl"},[e("svg",{class:"w-8 h-8 text-indigo-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-4m-5 0H3m2 0h4M9 7h6m-6 4h6m-6 4h6"})])],-1)),e("div",Wh,[k[8]||(k[8]=e("p",{class:"text-sm text-gray-600"},"Total Temples",-1)),e("p",Yh,h(Te(n).temples.length),1)])])]),e("div",Kh,[e("div",Xh,[k[11]||(k[11]=e("div",{class:"p-3 bg-green-100 rounded-xl"},[e("svg",{class:"w-8 h-8 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1)),e("div",Zh,[k[10]||(k[10]=e("p",{class:"text-sm text-gray-600"},"Approved",-1)),e("p",Qh,h(C.value),1)])])]),e("div",e2,[e("div",t2,[k[13]||(k[13]=e("div",{class:"p-3 bg-amber-100 rounded-xl"},[e("svg",{class:"w-8 h-8 text-amber-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1)),e("div",o2,[k[12]||(k[12]=e("p",{class:"text-sm text-gray-600"},"Pending",-1)),e("p",s2,h(j.value),1)])])])]),e("div",n2,[e("div",r2,[e("div",a2,[e("div",null,[e("h3",l2,h(f.value?"Your Temples":"Available Temples"),1),e("p",i2,h(f.value?"Manage and track your temple applications":"Select a temple to access its dashboard"),1)]),f.value?(m(),g("div",d2,[e("button",{onClick:$,disabled:v.value,class:se(["inline-flex items-center px-4 py-2 rounded-lg transition-colors duration-200 font-medium",v.value?"bg-gray-400 text-gray-200 cursor-not-allowed":"bg-indigo-600 text-white hover:bg-indigo-700"]),title:v.value?"Monitoring users are not allowed to create temples":"Add a new temple"},[...k[14]||(k[14]=[e("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})],-1),te(" Add Temple ",-1)])],10,u2)])):J("",!0)])]),a.value?(m(),g("div",c2,[...k[15]||(k[15]=[e("div",{class:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-indigo-500 mx-auto"},null,-1),e("p",{class:"mt-4 text-gray-600"},"Loading temples...",-1)])])):Te(n).temples.length>0?(m(),g("div",p2,[(m(!0),g(be,null,$e(Te(n).temples,q=>(m(),g("div",{key:q.id,class:"p-6 hover:bg-gray-50 transition-colors duration-150"},[e("div",m2,[e("div",g2,[e("div",f2,[e("h4",v2,h(q.name),1),le(ep,{status:q.status},null,8,["status"])]),e("p",h2,h(U(q.address)),1),e("div",y2,[e("span",x2,[k[16]||(k[16]=e("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})],-1)),te(" Created: "+h(y(q.createdAt)),1)]),e("span",b2,[k[17]||(k[17]=e("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})],-1)),te(" "+h(q.city)+", "+h(q.state),1)])])]),e("div",w2,[e("button",{onClick:K=>b(q),class:"inline-flex items-center px-4 py-2 border border-gray-300 rounded-lg text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 transition-colors duration-200"},[...k[18]||(k[18]=[e("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})],-1),te(" View ",-1)])],8,k2),f.value&&!v.value?(m(),g("button",{key:0,onClick:K=>E(q),class:"inline-flex items-center px-4 py-2 border border-indigo-300 rounded-lg text-sm font-medium text-indigo-700 bg-indigo-50 hover:bg-indigo-100 transition-colors duration-200"},[...k[19]||(k[19]=[e("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})],-1),te(" Edit ",-1)])],8,_2)):J("",!0),e("button",{onClick:K=>R(q),disabled:f.value&&!v.value&&!i(q),class:se(["inline-flex items-center px-4 py-2 text-sm font-medium rounded-lg transition-colors duration-200",f.value&&!v.value&&!i(q)?"bg-gray-400 text-gray-100 cursor-not-allowed":"bg-indigo-600 text-white hover:bg-indigo-700"]),title:f.value&&!v.value&&!i(q)?"Temple needs approval before it can be managed":""},[k[20]||(k[20]=e("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6V4m0 2a2 2 0 100 4m0-4a2 2 0 110 4m-6 8a2 2 0 100-4m0 4a2 2 0 100 4m0-4v2m0-6V4m6 6v10m6-2a2 2 0 100-4m0 4a2 2 0 100 4m0-4v2m0-6V4"})],-1)),te(" "+h(f.value&&!v.value?"Manage":"Access Dashboard"),1)],10,$2)])]),f.value&&!v.value&&c(q)&&q.adminNotes?(m(),g("div",S2,[e("div",D2,[k[22]||(k[22]=e("svg",{class:"w-5 h-5 text-red-400 mt-0.5 mr-2 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),e("div",null,[k[21]||(k[21]=e("h5",{class:"text-sm font-medium text-red-800 mb-1"},"Admin Notes:",-1)),e("p",C2,h(q.adminNotes),1),e("button",{onClick:K=>M(q),class:"mt-2 text-sm text-red-600 hover:text-red-800 font-medium underline"}," Re-upload Documents ",8,T2)])])])):J("",!0)]))),128))])):(m(),g("div",E2,[k[24]||(k[24]=e("svg",{class:"w-16 h-16 text-gray-400 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1",d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-4m-5 0H3m2 0h4M9 7h6m-6 4h6m-6 4h6"})],-1)),k[25]||(k[25]=e("h3",{class:"text-lg font-medium text-gray-900 mb-2"},"No temples registered yet",-1)),e("p",A2,h(f.value&&!v.value?"Get started by creating your first temple registration":"No temples are available for this tenant"),1),f.value&&!v.value?(m(),g("button",{key:0,onClick:$,class:"inline-flex items-center bg-indigo-600 text-white px-6 py-3 rounded-lg hover:bg-indigo-700 transition-colors duration-200 font-medium"},[...k[23]||(k[23]=[e("svg",{class:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})],-1),te(" Create Your First Temple ",-1)])])):J("",!0)]))])])])}}},I2={class:"min-h-screen bg-gray-50"},M2={class:"bg-white shadow-sm border-b border-gray-200 rounded-2xl"},R2={class:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-6"},P2={class:"flex items-center justify-between"},N2={class:"flex items-center space-x-2 text-sm text-gray-500 mb-2"},j2={key:0,class:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-4"},L2={class:"bg-red-50 border border-red-200 rounded-lg p-4"},B2={class:"flex items-start"},U2={class:"text-sm text-red-700"},F2={class:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},V2={class:"mb-8"},O2={class:"flex items-center justify-between mb-2"},z2={class:"text-sm font-medium text-indigo-600"},H2={class:"text-sm text-gray-500"},q2={class:"w-full bg-gray-200 rounded-full h-2"},G2={class:"bg-white rounded-2xl shadow-sm border border-gray-200 overflow-hidden"},J2={class:"p-8"},W2={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},Y2={class:"md:col-span-2"},K2={key:0,class:"text-red-600 text-sm mt-1"},X2={key:0,class:"text-red-600 text-sm mt-1"},Z2={key:0,class:"text-red-600 text-sm mt-1"},Q2=["max"],ey={key:0,class:"text-red-600 text-sm mt-1"},ty={key:0,class:"text-red-600 text-sm mt-1"},oy={class:"md:col-span-2"},sy={key:0,class:"text-red-600 text-sm mt-1"},ny={class:"md:col-span-2"},ry={class:"p-8"},ay={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},ly={class:"md:col-span-2"},iy={key:0,class:"text-red-600 text-sm mt-1"},dy={key:0,class:"text-red-600 text-sm mt-1"},uy={key:0,class:"text-red-600 text-sm mt-1"},cy={key:0,class:"text-red-600 text-sm mt-1"},py={key:0,class:"text-red-600 text-sm mt-1"},my={class:"md:col-span-2"},gy={class:"md:col-span-2"},fy={key:0,class:"text-red-600 text-sm mt-1"},vy={class:"p-8"},hy={class:"space-y-6"},yy={class:"border-2 border-dashed border-gray-300 rounded-lg p-6 hover:border-indigo-400 transition-colors duration-200"},xy={class:"text-center"},by={class:"flex justify-center"},wy={class:"cursor-pointer bg-indigo-600 text-white px-6 py-2 rounded-lg hover:bg-indigo-700 transition-colors duration-200"},ky={key:0,class:"text-sm text-green-600 mt-2"},_y={key:1,class:"text-red-600 text-sm mt-2"},$y={class:"border-2 border-dashed border-gray-300 rounded-lg p-6 hover:border-indigo-400 transition-colors duration-200"},Sy={class:"text-center"},Dy={class:"flex justify-center"},Cy={class:"cursor-pointer bg-indigo-600 text-white px-6 py-2 rounded-lg hover:bg-indigo-700 transition-colors duration-200"},Ty={key:0,class:"text-sm text-green-600 mt-2"},Ey={key:1,class:"text-red-600 text-sm mt-2"},Ay={class:"border-2 border-dashed border-gray-300 rounded-lg p-6 hover:border-indigo-400 transition-colors duration-200"},Iy={class:"text-center"},My={class:"flex justify-center"},Ry={class:"cursor-pointer bg-gray-600 text-white px-6 py-2 rounded-lg hover:bg-gray-700 transition-colors duration-200"},Py={key:0,class:"text-sm text-green-600 mt-2"},Ny={key:1,class:"text-red-600 text-sm mt-2"},jy={class:"border-2 border-dashed border-gray-300 rounded-lg p-6 hover:border-indigo-400 transition-colors duration-200"},Ly={class:"text-center"},By={class:"flex justify-center"},Uy={class:"cursor-pointer bg-gray-600 text-white px-6 py-2 rounded-lg hover:bg-gray-700 transition-colors duration-200"},Fy={key:0,class:"mt-2"},Vy={key:1,class:"text-red-600 text-sm mt-2"},Oy={class:"mt-8 p-4 bg-gray-50 rounded-lg"},zy={class:"flex items-start"},Hy={class:"text-sm text-gray-700"},qy={key:0,class:"text-red-600 text-sm mt-1"},Gy={class:"px-8 py-6 bg-gray-50 border-t border-gray-200 flex justify-between"},Jy={key:1},Wy={class:"flex space-x-3"},Yy=["disabled"],Ky={key:0,class:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",fill:"none",viewBox:"0 0 24 24"},Xy={__name:"CreateTemple",setup(t){const o=et();Ot();const s=Ue(),n=B(1),r=B(!1),l=B(null),a=B({}),d=B({}),i=Je({name:"",main_deity:"",temple_type:"",established_year:"",phone:"",email:"",description:"",street_address:"",city:"",state:"",district:"",pincode:"",landmark:"",map_link:"",documents:{registration:null,trustDeed:null,property:null,additional:[]},acceptTerms:!1}),c=$=>{a.value[$]&&delete a.value[$]},u=$=>{c("phone");let y=$.target.value.replace(/\D/g,"");y.startsWith("91")&&y.length>2?y="+91 "+y.slice(2):(y.length===10||y.length>0&&!y.startsWith("+")&&y.length<=10)&&(y="+91 "+y),i.phone=y},p=$=>{c("pincode");let y=$.target.value.replace(/\D/g,"");y.length>6&&(y=y.slice(0,6)),i.pincode=y},w=$=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test($),f=$=>{const y=$.replace(/\D/g,"");return!!(y.length===12&&y.startsWith("91")||y.length===10)},v=$=>{try{return new URL($),!0}catch{return!1}},N=$=>{const y=new Date().getFullYear(),b=parseInt($);return b>=1800&&b<=y},A=()=>{var y,b,E,R,M,G,U,_,k;a.value={};let $=!0;return n.value===1?((y=i.name)!=null&&y.trim()||(a.value.name="Temple name is required",$=!1),(b=i.main_deity)!=null&&b.trim()||(a.value.main_deity="Main deity is required",$=!1),i.temple_type||(a.value.temple_type="Temple type is required",$=!1),i.established_year?N(i.established_year)||(a.value.established_year="Please enter a valid year between 1800 and current year",$=!1):(a.value.established_year="Established year is required",$=!1),(E=i.phone)!=null&&E.trim()?f(i.phone)||(a.value.phone="Please enter a valid phone number with country code (e.g., +91 9876543210)",$=!1):(a.value.phone="Phone number is required",$=!1),(R=i.email)!=null&&R.trim()?w(i.email)||(a.value.email="Please enter a valid email address",$=!1):(a.value.email="Email is required",$=!1)):n.value===2?((M=i.street_address)!=null&&M.trim()||(a.value.street_address="Street address is required",$=!1),(G=i.city)!=null&&G.trim()||(a.value.city="City is required",$=!1),i.state||(a.value.state="State is required",$=!1),(U=i.district)!=null&&U.trim()||(a.value.district="District is required",$=!1),(_=i.pincode)!=null&&_.trim()?/^\d{6}$/.test(i.pincode)||(a.value.pincode="PIN code must be exactly 6 digits",$=!1):(a.value.pincode="PIN code is required",$=!1),(k=i.map_link)!=null&&k.trim()&&!v(i.map_link)&&(a.value.map_link="Please enter a valid URL",$=!1)):n.value===3&&(i.documents.registration||(d.value.registration="Registration certificate is required",$=!1),i.documents.trustDeed||(d.value.trustDeed="Trust deed is required",$=!1),i.acceptTerms||(a.value.acceptTerms="You must accept the terms and conditions",$=!1)),$?l.value=null:l.value="Please fix the errors above before proceeding",$},F=()=>{A()&&(n.value++,window.scrollTo({top:0,behavior:"smooth"}))},I=()=>{n.value--,l.value=null,a.value={},d.value={},window.scrollTo({top:0,behavior:"smooth"})},C=($,y)=>{var k,L,z;const b=Array.from($.target.files);if(console.log(` handleFileUpload called with type: ${y}`),console.log(` Number of files selected: ${b.length}`),d.value[y]&&delete d.value[y],b.length===0){console.log(" No files selected");return}const E=10*1024*1024,R=b.filter(q=>q.size>E);if(R.length>0){d.value[y]=`File size too large. Maximum size allowed is 10MB. Large files: ${R.map(q=>q.name).join(", ")}`,console.error(" Files too large:",R.map(q=>q.name));return}const M=["application/pdf","image/jpeg","image/jpg","image/png"],G=b.filter(q=>!M.includes(q.type));if(G.length>0){d.value[y]=`Invalid file type. Only PDF, JPG, JPEG, and PNG files are allowed. Invalid files: ${G.map(q=>q.name).join(", ")}`,console.error(" Invalid file types:",G.map(q=>q.name));return}y==="additional"?(i.documents.additional||(i.documents.additional=[]),i.documents.additional=[...i.documents.additional,...b],console.log(` Added ${b.length} additional files. Total: ${i.documents.additional.length}`)):(i.documents[y]=b[0],console.log(` Set ${y} file:`,b[0].name)),console.log(" Current documents state:",{registration:((k=i.documents.registration)==null?void 0:k.name)||"Not set",trustDeed:((L=i.documents.trustDeed)==null?void 0:L.name)||"Not set",property:((z=i.documents.property)==null?void 0:z.name)||"Not set",additional:i.documents.additional?`${i.documents.additional.length} files`:"Not set"}),l.value=null;const U=y==="additional"?b.length:1,_=U===1?`File uploaded successfully: ${b[0].name}`:`${U} files uploaded successfully`;s.success(_)},j=async()=>{var $,y,b,E,R,M,G,U,_,k,L,z,q,K,H,O,ee,ge,de,ie,me,ke,Q,D,x,S,P,T,V;if(!A()){window.scrollTo({top:0,behavior:"smooth"});return}try{r.value=!0,l.value=null,console.log(" FORM DATA AT SUBMISSION:"),console.log("Form data:",i),console.log("Documents object:",i.documents);let Z=i.phone.replace(/\D/g,"");Z.startsWith("91")&&Z.length===12?Z="+"+Z:Z.length===10&&(Z="+91"+Z);const X=i.documents&&(i.documents.registration||i.documents.trustDeed||i.documents.property||i.documents.additional&&i.documents.additional.length>0);if(console.log(" Has files:",X),X){const W=new FormData;W.append("name",(($=i.name)==null?void 0:$.trim())||""),W.append("main_deity",((y=i.main_deity)==null?void 0:y.trim())||""),W.append("temple_type",i.temple_type||""),W.append("established_year",i.established_year?i.established_year.toString():""),W.append("phone",Z),W.append("email",((b=i.email)==null?void 0:b.trim())||""),W.append("description",((E=i.description)==null?void 0:E.trim())||""),W.append("street_address",((R=i.street_address)==null?void 0:R.trim())||""),W.append("city",((M=i.city)==null?void 0:M.trim())||""),W.append("district",((G=i.district)==null?void 0:G.trim())||""),W.append("state",i.state||""),W.append("pincode",i.pincode||""),W.append("landmark",((U=i.landmark)==null?void 0:U.trim())||""),W.append("map_link",((_=i.map_link)==null?void 0:_.trim())||""),W.append("status","pending"),i.documents.registration&&(W.append("registration_cert",i.documents.registration),console.log(" Added registration_cert:",i.documents.registration.name)),i.documents.trustDeed&&(W.append("trust_deed",i.documents.trustDeed),console.log(" Added trust_deed:",i.documents.trustDeed.name)),i.documents.property&&(W.append("property_docs",i.documents.property),console.log(" Added property_docs:",i.documents.property.name)),i.documents.additional&&i.documents.additional.length>0&&i.documents.additional.forEach((ne,fe)=>{W.append(`additional_docs_${fe}`,ne),console.log(` Added additional_docs_${fe}:`,ne.name)}),console.log(" FormData contents:");for(let[ne,fe]of W.entries())fe instanceof File?console.log(`${ne}: File - ${fe.name} (${fe.size} bytes)`):console.log(`${ne}: ${fe}`);const re=await pe.post("/entities",W,{headers:{"Content-Type":"multipart/form-data"},timeout:3e4});console.log(" Temple created successfully:",re.data)}else{const W={name:((k=i.name)==null?void 0:k.trim())||"",main_deity:((L=i.main_deity)==null?void 0:L.trim())||"",temple_type:i.temple_type||"",established_year:parseInt(i.established_year||0),phone:Z,email:((z=i.email)==null?void 0:z.trim())||"",description:((q=i.description)==null?void 0:q.trim())||"",street_address:((K=i.street_address)==null?void 0:K.trim())||"",city:((H=i.city)==null?void 0:H.trim())||"",district:((O=i.district)==null?void 0:O.trim())||"",state:i.state||"",pincode:i.pincode||"",landmark:((ee=i.landmark)==null?void 0:ee.trim())||"",map_link:((ge=i.map_link)==null?void 0:ge.trim())||"",status:"pending"};console.log(" JSON payload:",W);const re=await pe.post("/entities",W,{headers:{"Content-Type":"application/json"},timeout:3e4});console.log(" Temple created successfully:",re.data)}s.success("Temple registration submitted successfully! You will receive a confirmation email shortly."),Object.keys(i).forEach(W=>{W==="documents"?i[W]={registration:null,trustDeed:null,property:null,additional:[]}:W==="acceptTerms"?i[W]=!1:i[W]=""}),setTimeout(()=>{o.push("/tenant/dashboard")},2e3)}catch(Z){if(console.error("Temple registration failed:",Z),Z.code==="ECONNABORTED"||Z.message.includes("timeout"))l.value="Request timed out. Please check your internet connection and try again.";else if(((de=Z.response)==null?void 0:de.status)===413)l.value="Files are too large. Please reduce file sizes and try again.";else if(((ie=Z.response)==null?void 0:ie.status)===422){const X=((me=Z.response.data)==null?void 0:me.errors)||{};a.value={...a.value,...X},l.value="Please correct the validation errors and try again."}else((ke=Z.response)==null?void 0:ke.status)===400?l.value=((Q=Z.response.data)==null?void 0:Q.message)||"Invalid data submitted. Please check your inputs.":((D=Z.response)==null?void 0:D.status)>=500?l.value="Server error occurred. Please try again later or contact support.":l.value=((S=(x=Z.response)==null?void 0:x.data)==null?void 0:S.error)||((T=(P=Z.response)==null?void 0:P.data)==null?void 0:T.message)||"Failed to submit temple registration. Please try again.";s.error(l.value),console.error("Error details:",((V=Z.response)==null?void 0:V.data)||Z.message),window.scrollTo({top:0,behavior:"smooth"})}finally{r.value=!1}};return($,y)=>{const b=Ze("router-link");return m(),g("div",I2,[e("div",M2,[e("div",R2,[e("div",P2,[e("div",null,[e("nav",N2,[le(b,{to:"/tenant/dashboard",class:"hover:text-indigo-600"},{default:ye(()=>[...y[20]||(y[20]=[te("Dashboard",-1)])]),_:1}),y[21]||(y[21]=e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1)),y[22]||(y[22]=e("span",{class:"text-gray-900"},"Create Temple",-1))]),y[23]||(y[23]=e("h1",{class:"text-2xl font-bold text-gray-900"},"Register New Temple",-1)),y[24]||(y[24]=e("p",{class:"text-gray-600 mt-1"},"Fill out the form below to register your temple for approval",-1))])])])]),l.value?(m(),g("div",j2,[e("div",L2,[e("div",B2,[y[27]||(y[27]=e("svg",{class:"w-5 h-5 text-red-600 mt-0.5 mr-3 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})],-1)),e("div",null,[y[25]||(y[25]=e("h3",{class:"text-sm font-medium text-red-800 mb-1"},"Error",-1)),e("p",U2,h(l.value),1)]),e("button",{onClick:y[0]||(y[0]=E=>l.value=null),class:"ml-auto"},[...y[26]||(y[26]=[e("svg",{class:"w-4 h-4 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])])])])):J("",!0),e("div",F2,[e("div",V2,[e("div",O2,[e("span",z2,"Step "+h(n.value)+" of 3",1),e("span",H2,h(Math.round(n.value/3*100))+"% Complete",1)]),e("div",q2,[e("div",{class:"bg-indigo-600 h-2 rounded-full transition-all duration-300",style:Vt({width:`${n.value/3*100}%`})},null,4)])]),e("div",G2,[e("form",{onSubmit:qe(j,["prevent"])},[ce(e("div",J2,[y[37]||(y[37]=e("div",{class:"mb-6"},[e("h2",{class:"text-xl font-bold text-gray-900 mb-2"},"Temple Basic Information"),e("p",{class:"text-gray-600"},"Provide the essential details about your temple")],-1)),e("div",W2,[e("div",Y2,[y[28]||(y[28]=e("label",{for:"templeName",class:"block text-sm font-medium text-gray-700 mb-2"}," Temple Name * ",-1)),ce(e("input",{id:"templeName","onUpdate:modelValue":y[1]||(y[1]=E=>i.name=E),type:"text",required:"",class:se(["w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-colors duration-200",{"border-red-300 focus:border-red-500 focus:ring-red-500":a.value.name}]),placeholder:"Enter temple name"},null,2),[[_e,i.name]]),a.value.name?(m(),g("p",K2,h(a.value.name),1)):J("",!0)]),e("div",null,[y[29]||(y[29]=e("label",{for:"deity",class:"block text-sm font-medium text-gray-700 mb-2"}," Main Deity * ",-1)),ce(e("input",{id:"deity","onUpdate:modelValue":y[2]||(y[2]=E=>i.main_deity=E),type:"text",required:"",class:se(["w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-colors duration-200",{"border-red-300 focus:border-red-500 focus:ring-red-500":a.value.main_deity}]),placeholder:"e.g., Lord Vishnu, Goddess Lakshmi"},null,2),[[_e,i.main_deity]]),a.value.main_deity?(m(),g("p",X2,h(a.value.main_deity),1)):J("",!0)]),e("div",null,[y[31]||(y[31]=e("label",{for:"templeType",class:"block text-sm font-medium text-gray-700 mb-2"}," Temple Type * ",-1)),ce(e("select",{id:"templeType","onUpdate:modelValue":y[3]||(y[3]=E=>i.temple_type=E),required:"",class:se(["w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-colors duration-200",{"border-red-300 focus:border-red-500 focus:ring-red-500":a.value.temple_type}])},[...y[30]||(y[30]=[Ce('<option value="">Select temple type</option><option value="traditional">Traditional</option><option value="modern">Modern</option><option value="heritage">Heritage</option><option value="community">Community</option>',5)])],2),[[Re,i.temple_type]]),a.value.temple_type?(m(),g("p",Z2,h(a.value.temple_type),1)):J("",!0)]),e("div",null,[y[32]||(y[32]=e("label",{for:"establishedYear",class:"block text-sm font-medium text-gray-700 mb-2"}," Established Year * ",-1)),ce(e("input",{id:"establishedYear","onUpdate:modelValue":y[4]||(y[4]=E=>i.established_year=E),type:"number",min:"1800",max:new Date().getFullYear(),required:"",class:se(["w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-colors duration-200",{"border-red-300 focus:border-red-500 focus:ring-red-500":a.value.established_year}]),placeholder:"YYYY"},null,10,Q2),[[_e,i.established_year]]),a.value.established_year?(m(),g("p",ey,h(a.value.established_year),1)):J("",!0)]),e("div",null,[y[33]||(y[33]=e("label",{for:"phone",class:"block text-sm font-medium text-gray-700 mb-2"}," Contact Phone * ",-1)),ce(e("input",{id:"phone","onUpdate:modelValue":y[5]||(y[5]=E=>i.phone=E),type:"tel",required:"",class:se(["w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-colors duration-200",{"border-red-300 focus:border-red-500 focus:ring-red-500":a.value.phone}]),placeholder:"+91 XXXXX XXXXX",onInput:u},null,34),[[_e,i.phone]]),a.value.phone?(m(),g("p",ty,h(a.value.phone),1)):J("",!0),y[34]||(y[34]=e("p",{class:"text-gray-500 text-xs mt-1"},"Enter with country code (e.g., +91 9876543210)",-1))]),e("div",oy,[y[35]||(y[35]=e("label",{for:"email",class:"block text-sm font-medium text-gray-700 mb-2"}," Temple Email * ",-1)),ce(e("input",{id:"email","onUpdate:modelValue":y[6]||(y[6]=E=>i.email=E),type:"email",required:"",class:se(["w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-colors duration-200",{"border-red-300 focus:border-red-500 focus:ring-red-500":a.value.email}]),placeholder:"temple@example.com"},null,2),[[_e,i.email]]),a.value.email?(m(),g("p",sy,h(a.value.email),1)):J("",!0)]),e("div",ny,[y[36]||(y[36]=e("label",{for:"description",class:"block text-sm font-medium text-gray-700 mb-2"}," Temple Description ",-1)),ce(e("textarea",{id:"description","onUpdate:modelValue":y[7]||(y[7]=E=>i.description=E),rows:"4",class:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-colors duration-200",placeholder:"Brief description of the temple, its history, and significance..."},null,512),[[_e,i.description]])])])],512),[[us,n.value===1]]),ce(e("div",ry,[y[46]||(y[46]=e("div",{class:"mb-6"},[e("h2",{class:"text-xl font-bold text-gray-900 mb-2"},"Temple Address"),e("p",{class:"text-gray-600"},"Provide the complete address details")],-1)),e("div",ay,[e("div",ly,[y[38]||(y[38]=e("label",{for:"street_address",class:"block text-sm font-medium text-gray-700 mb-2"}," Street Address * ",-1)),ce(e("input",{id:"street_address","onUpdate:modelValue":y[8]||(y[8]=E=>i.street_address=E),type:"text",required:"",class:se(["w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-colors duration-200",{"border-red-300 focus:border-red-500 focus:ring-red-500":a.value.street_address}]),placeholder:"Enter complete street address"},null,2),[[_e,i.street_address]]),a.value.street_address?(m(),g("p",iy,h(a.value.street_address),1)):J("",!0)]),e("div",null,[y[39]||(y[39]=e("label",{for:"city",class:"block text-sm font-medium text-gray-700 mb-2"}," City * ",-1)),ce(e("input",{id:"city","onUpdate:modelValue":y[9]||(y[9]=E=>i.city=E),type:"text",required:"",class:se(["w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-colors duration-200",{"border-red-300 focus:border-red-500 focus:ring-red-500":a.value.city}]),placeholder:"Enter city name"},null,2),[[_e,i.city]]),a.value.city?(m(),g("p",dy,h(a.value.city),1)):J("",!0)]),e("div",null,[y[41]||(y[41]=e("label",{for:"state",class:"block text-sm font-medium text-gray-700 mb-2"}," State * ",-1)),ce(e("select",{id:"state","onUpdate:modelValue":y[10]||(y[10]=E=>i.state=E),required:"",class:se(["w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-colors duration-200",{"border-red-300 focus:border-red-500 focus:ring-red-500":a.value.state}])},[...y[40]||(y[40]=[Ce('<option value="">Select state</option><option value="Andhra Pradesh">Andhra Pradesh</option><option value="Arunachal Pradesh">Arunachal Pradesh</option><option value="Assam">Assam</option><option value="Bihar">Bihar</option><option value="Chhattisgarh">Chhattisgarh</option><option value="Goa">Goa</option><option value="Gujarat">Gujarat</option><option value="Haryana">Haryana</option><option value="Himachal Pradesh">Himachal Pradesh</option><option value="Jharkhand">Jharkhand</option><option value="Karnataka">Karnataka</option><option value="Kerala">Kerala</option><option value="Madhya Pradesh">Madhya Pradesh</option><option value="Maharashtra">Maharashtra</option><option value="Manipur">Manipur</option><option value="Meghalaya">Meghalaya</option><option value="Mizoram">Mizoram</option><option value="Nagaland">Nagaland</option><option value="Odisha">Odisha</option><option value="Punjab">Punjab</option><option value="Rajasthan">Rajasthan</option><option value="Sikkim">Sikkim</option><option value="Tamil Nadu">Tamil Nadu</option><option value="Telangana">Telangana</option><option value="Tripura">Tripura</option><option value="Uttar Pradesh">Uttar Pradesh</option><option value="Uttarakhand">Uttarakhand</option><option value="West Bengal">West Bengal</option>',29)])],2),[[Re,i.state]]),a.value.state?(m(),g("p",uy,h(a.value.state),1)):J("",!0)]),e("div",null,[y[42]||(y[42]=e("label",{for:"district",class:"block text-sm font-medium text-gray-700 mb-2"}," District * ",-1)),ce(e("input",{id:"district","onUpdate:modelValue":y[11]||(y[11]=E=>i.district=E),type:"text",required:"",class:se(["w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-colors duration-200",{"border-red-300 focus:border-red-500 focus:ring-red-500":a.value.district}]),placeholder:"Enter district name"},null,2),[[_e,i.district]]),a.value.district?(m(),g("p",cy,h(a.value.district),1)):J("",!0)]),e("div",null,[y[43]||(y[43]=e("label",{for:"pincode",class:"block text-sm font-medium text-gray-700 mb-2"}," PIN Code * ",-1)),ce(e("input",{id:"pincode","onUpdate:modelValue":y[12]||(y[12]=E=>i.pincode=E),type:"text",pattern:"[0-9]{6}",required:"",maxlength:"6",class:se(["w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-colors duration-200",{"border-red-300 focus:border-red-500 focus:ring-red-500":a.value.pincode}]),placeholder:"Enter 6-digit PIN code",onInput:p},null,34),[[_e,i.pincode]]),a.value.pincode?(m(),g("p",py,h(a.value.pincode),1)):J("",!0)]),e("div",my,[y[44]||(y[44]=e("label",{for:"landmark",class:"block text-sm font-medium text-gray-700 mb-2"}," Landmark (Optional) ",-1)),ce(e("input",{id:"landmark","onUpdate:modelValue":y[13]||(y[13]=E=>i.landmark=E),type:"text",class:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-colors duration-200",placeholder:"Nearby landmark for easy identification"},null,512),[[_e,i.landmark]])]),e("div",gy,[y[45]||(y[45]=e("label",{for:"map_link",class:"block text-sm font-medium text-gray-700 mb-2"}," Google Maps Link (Optional) ",-1)),ce(e("input",{id:"map_link","onUpdate:modelValue":y[14]||(y[14]=E=>i.map_link=E),type:"url",class:se(["w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-colors duration-200",{"border-red-300 focus:border-red-500 focus:ring-red-500":a.value.map_link}]),placeholder:"https://maps.google.com/..."},null,2),[[_e,i.map_link]]),a.value.map_link?(m(),g("p",fy,h(a.value.map_link),1)):J("",!0)])])],512),[[us,n.value===2]]),ce(e("div",vy,[y[66]||(y[66]=e("div",{class:"mb-6"},[e("h2",{class:"text-xl font-bold text-gray-900 mb-2"},"Upload Documents"),e("p",{class:"text-gray-600"},"Upload required documents for temple verification")],-1)),e("div",hy,[e("div",yy,[e("div",xy,[y[48]||(y[48]=e("svg",{class:"w-12 h-12 text-gray-400 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1)),y[49]||(y[49]=e("h3",{class:"text-lg font-medium text-gray-900 mb-2"},"Registration Certificate *",-1)),y[50]||(y[50]=e("p",{class:"text-gray-600 mb-4"},"Upload temple registration certificate",-1)),e("div",by,[e("label",wy,[y[47]||(y[47]=e("span",null,"Choose File",-1)),e("input",{type:"file",class:"hidden",accept:".pdf,.jpg,.jpeg,.png",onChange:y[15]||(y[15]=E=>C(E,"registration"))},null,32)])]),i.documents.registration?(m(),g("p",ky,"  "+h(i.documents.registration.name),1)):J("",!0),d.value.registration?(m(),g("p",_y,h(d.value.registration),1)):J("",!0)])]),e("div",$y,[e("div",Sy,[y[52]||(y[52]=e("svg",{class:"w-12 h-12 text-gray-400 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1)),y[53]||(y[53]=e("h3",{class:"text-lg font-medium text-gray-900 mb-2"},"Trust Deed *",-1)),y[54]||(y[54]=e("p",{class:"text-gray-600 mb-4"},"Upload temple trust deed document",-1)),e("div",Dy,[e("label",Cy,[y[51]||(y[51]=e("span",null,"Choose File",-1)),e("input",{type:"file",class:"hidden",accept:".pdf,.jpg,.jpeg,.png",onChange:y[16]||(y[16]=E=>C(E,"trustDeed"))},null,32)])]),i.documents.trustDeed?(m(),g("p",Ty,"  "+h(i.documents.trustDeed.name),1)):J("",!0),d.value.trustDeed?(m(),g("p",Ey,h(d.value.trustDeed),1)):J("",!0)])]),e("div",Ay,[e("div",Iy,[y[56]||(y[56]=Ce('<svg class="w-12 h-12 text-gray-400 mx-auto mb-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2H5a2 2 0 00-2-2z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 5a2 2 0 012-2h4a2 2 0 012 2v2H8V5z"></path></svg><h3 class="text-lg font-medium text-gray-900 mb-2">Property Documents</h3><p class="text-gray-600 mb-4">Upload property ownership documents (Optional)</p>',3)),e("div",My,[e("label",Ry,[y[55]||(y[55]=e("span",null,"Choose File",-1)),e("input",{type:"file",class:"hidden",accept:".pdf,.jpg,.jpeg,.png",onChange:y[17]||(y[17]=E=>C(E,"property"))},null,32)])]),i.documents.property?(m(),g("p",Py,"  "+h(i.documents.property.name),1)):J("",!0),d.value.property?(m(),g("p",Ny,h(d.value.property),1)):J("",!0)])]),e("div",jy,[e("div",Ly,[y[58]||(y[58]=e("svg",{class:"w-12 h-12 text-gray-400 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15.172 7l-6.586 6.586a2 2 0 102.828 2.828l6.414-6.586a4 4 0 00-5.656-5.656l-6.415 6.585a6 6 0 108.486 8.486L20.5 13"})],-1)),y[59]||(y[59]=e("h3",{class:"text-lg font-medium text-gray-900 mb-2"},"Additional Documents",-1)),y[60]||(y[60]=e("p",{class:"text-gray-600 mb-4"},"Upload any additional supporting documents (Optional)",-1)),e("div",By,[e("label",Uy,[y[57]||(y[57]=e("span",null,"Choose Files",-1)),e("input",{type:"file",class:"hidden",accept:".pdf,.jpg,.jpeg,.png",multiple:"",onChange:y[18]||(y[18]=E=>C(E,"additional"))},null,32)])]),i.documents.additional&&i.documents.additional.length>0?(m(),g("div",Fy,[(m(!0),g(be,null,$e(i.documents.additional,(E,R)=>(m(),g("p",{key:R,class:"text-sm text-green-600"},"  "+h(E.name),1))),128))])):J("",!0),d.value.additional?(m(),g("p",Vy,h(d.value.additional),1)):J("",!0)])])]),e("div",Oy,[e("label",zy,[ce(e("input",{"onUpdate:modelValue":y[19]||(y[19]=E=>i.acceptTerms=E),type:"checkbox",class:"mt-1 mr-3 h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded",required:""},null,512),[[ct,i.acceptTerms]]),e("span",Hy,[y[63]||(y[63]=te(" I agree to the ",-1)),le(b,{to:"/terms",class:"text-indigo-600 hover:text-indigo-800 underline"},{default:ye(()=>[...y[61]||(y[61]=[te("Terms and Conditions",-1)])]),_:1}),y[64]||(y[64]=te(" and ",-1)),le(b,{to:"/privacy",class:"text-indigo-600 hover:text-indigo-800 underline"},{default:ye(()=>[...y[62]||(y[62]=[te("Privacy Policy",-1)])]),_:1}),y[65]||(y[65]=te(". I confirm that all information provided is accurate and complete. ",-1))])]),a.value.acceptTerms?(m(),g("p",qy,h(a.value.acceptTerms),1)):J("",!0)])],512),[[us,n.value===3]]),e("div",Gy,[n.value>1?(m(),g("button",{key:0,type:"button",onClick:I,class:"inline-flex items-center px-6 py-3 border border-gray-300 rounded-lg text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 transition-colors duration-200"},[...y[67]||(y[67]=[e("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1),te(" Previous ",-1)])])):(m(),g("div",Jy)),e("div",Wy,[le(b,{to:"/tenant/dashboard",class:"inline-flex items-center px-6 py-3 border border-gray-300 rounded-lg text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 transition-colors duration-200"},{default:ye(()=>[...y[68]||(y[68]=[te(" Cancel ",-1)])]),_:1}),n.value<3?(m(),g("button",{key:0,type:"button",onClick:F,class:"inline-flex items-center px-6 py-3 bg-indigo-600 text-white rounded-lg text-sm font-medium hover:bg-indigo-700 transition-colors duration-200"},[...y[69]||(y[69]=[te(" Next ",-1),e("svg",{class:"w-4 h-4 ml-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1)])])):(m(),g("button",{key:1,type:"submit",disabled:r.value,class:"inline-flex items-center px-6 py-3 bg-indigo-600 text-white rounded-lg text-sm font-medium hover:bg-indigo-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200"},[r.value?(m(),g("svg",Ky,[...y[70]||(y[70]=[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)])])):J("",!0),te(" "+h(r.value?"Submitting...":"Submit Temple Registration"),1)],8,Yy))])])],32)]),y[71]||(y[71]=Ce('<div class="mt-8 bg-blue-50 border border-blue-200 rounded-lg p-6"><div class="flex items-start"><svg class="w-6 h-6 text-blue-600 mt-0.5 mr-3 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg><div><h3 class="text-sm font-medium text-blue-800 mb-1">Need Help?</h3><p class="text-sm text-blue-700"> If you need assistance with temple registration, please contact our support team at <a href="mailto:support@templesaas.com" class="underline">support@templesaas.com</a> or call us at <a href="tel:+91-800-123-4567" class="underline">+91-800-123-4567</a></p></div></div></div>',1))])])}}};function Zy(t,o){return m(),g("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M4.26 10.147a60.438 60.438 0 0 0-.491 6.347A48.62 48.62 0 0 1 12 20.904a48.62 48.62 0 0 1 8.232-4.41 60.46 60.46 0 0 0-.491-6.347m-15.482 0a50.636 50.636 0 0 0-2.658-.813A59.906 59.906 0 0 1 12 3.493a59.903 59.903 0 0 1 10.399 5.84c-.896.248-1.783.52-2.658.814m-15.482 0A50.717 50.717 0 0 1 12 13.489a50.702 50.702 0 0 1 7.74-3.342M6.75 15a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5Zm0 0v-3.675A55.378 55.378 0 0 1 12 8.443m-7.007 11.55A5.981 5.981 0 0 0 6.75 15.75v-1.5"})])}function Qy(t,o){return m(),g("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 21v-8.25M15.75 21v-8.25M8.25 21v-8.25M3 9l9-6 9 6m-1.5 12V10.332A48.36 48.36 0 0 0 12 9.75c-2.551 0-5.056.2-7.5.582V21M3 21h18M12 6.75h.008v.008H12V6.75Z"})])}function tp(t,o){return m(),g("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9 12.75 11.25 15 15 9.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"})])}function ex(t,o){return m(),g("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M10.5 1.5H8.25A2.25 2.25 0 0 0 6 3.75v16.5a2.25 2.25 0 0 0 2.25 2.25h7.5A2.25 2.25 0 0 0 18 20.25V3.75a2.25 2.25 0 0 0-2.25-2.25H13.5m-3 0V3h3V1.5m-3 0h3m-3 18.75h3"})])}function Ta(t,o){return m(),g("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126ZM12 15.75h.007v.008H12v-.008Z"})])}function tx(t,o){return m(),g("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3.98 8.223A10.477 10.477 0 0 0 1.934 12C3.226 16.338 7.244 19.5 12 19.5c.993 0 1.953-.138 2.863-.395M6.228 6.228A10.451 10.451 0 0 1 12 4.5c4.756 0 8.773 3.162 10.065 7.498a10.522 10.522 0 0 1-4.293 5.774M6.228 6.228 3 3m3.228 3.228 3.65 3.65m7.894 7.894L21 21m-3.228-3.228-3.65-3.65m0 0a3 3 0 1 0-4.243-4.243m4.242 4.242L9.88 9.88"})])}function ox(t,o){return m(),g("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M2.036 12.322a1.012 1.012 0 0 1 0-.639C3.423 7.51 7.36 4.5 12 4.5c4.638 0 8.573 3.007 9.963 7.178.07.207.07.431 0 .639C20.577 16.49 16.64 19.5 12 19.5c-4.638 0-8.573-3.007-9.963-7.178Z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"})])}function ku(t,o){return m(),g("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M21 11.25v8.25a1.5 1.5 0 0 1-1.5 1.5H5.25a1.5 1.5 0 0 1-1.5-1.5v-8.25M12 4.875A2.625 2.625 0 1 0 9.375 7.5H12m0-2.625V7.5m0-2.625A2.625 2.625 0 1 1 14.625 7.5H12m0 0V21m-8.625-9.75h18c.621 0 1.125-.504 1.125-1.125v-1.5c0-.621-.504-1.125-1.125-1.125h-18c-.621 0-1.125.504-1.125 1.125v1.5c0 .621.504 1.125 1.125 1.125Z"})])}function sx(t,o){return m(),g("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M10.05 4.575a1.575 1.575 0 1 0-3.15 0v3m3.15-3v-1.5a1.575 1.575 0 0 1 3.15 0v1.5m-3.15 0 .075 5.925m3.075.75V4.575m0 0a1.575 1.575 0 0 1 3.15 0V15M6.9 7.575a1.575 1.575 0 1 0-3.15 0v8.175a6.75 6.75 0 0 0 6.75 6.75h2.018a5.25 5.25 0 0 0 3.712-1.538l1.732-1.732a5.25 5.25 0 0 0 1.538-3.712l.003-2.024a.668.668 0 0 1 .198-.471 1.575 1.575 0 1 0-2.228-2.228 3.818 3.818 0 0 0-1.12 2.687M6.9 7.575V12m6.27 4.318A4.49 4.49 0 0 1 16.35 15m.002 0h-.002"})])}function oa(t,o){return m(),g("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M21 8.25c0-2.485-2.099-4.5-4.688-4.5-1.935 0-3.597 1.126-4.312 2.733-.715-1.607-2.377-2.733-4.313-2.733C5.1 3.75 3 5.765 3 8.25c0 7.22 9 12 9 12s9-4.78 9-12Z"})])}function nx(t,o){return m(),g("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m2.25 12 8.954-8.955c.44-.439 1.152-.439 1.591 0L21.75 12M4.5 9.75v10.125c0 .621.504 1.125 1.125 1.125H9.75v-4.875c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125V21h4.125c.621 0 1.125-.504 1.125-1.125V9.75M8.25 21h8.25"})])}function op(t,o){return m(),g("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m11.25 11.25.041-.02a.75.75 0 0 1 1.063.852l-.708 2.836a.75.75 0 0 0 1.063.853l.041-.021M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9-3.75h.008v.008H12V8.25Z"})])}function rx(t,o){return m(),g("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M2.25 6.75c0 8.284 6.716 15 15 15h2.25a2.25 2.25 0 0 0 2.25-2.25v-1.372c0-.516-.351-.966-.852-1.091l-4.423-1.106c-.44-.11-.902.055-1.173.417l-.97 1.293c-.282.376-.769.542-1.21.38a12.035 12.035 0 0 1-7.143-7.143c-.162-.441.004-.928.38-1.21l1.293-.97c.363-.271.527-.734.417-1.173L6.963 3.102a1.125 1.125 0 0 0-1.091-.852H4.5A2.25 2.25 0 0 0 2.25 4.5v2.25Z"})])}function _u(t,o){return m(),g("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 4.5v15m7.5-7.5h-15"})])}function $u(t,o){return m(),g("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9.813 15.904 9 18.75l-.813-2.846a4.5 4.5 0 0 0-3.09-3.09L2.25 12l2.846-.813a4.5 4.5 0 0 0 3.09-3.09L9 5.25l.813 2.846a4.5 4.5 0 0 0 3.09 3.09L15.75 12l-2.846.813a4.5 4.5 0 0 0-3.09 3.09ZM18.259 8.715 18 9.75l-.259-1.035a3.375 3.375 0 0 0-2.455-2.456L14.25 6l1.036-.259a3.375 3.375 0 0 0 2.455-2.456L18 2.25l.259 1.035a3.375 3.375 0 0 0 2.456 2.456L21.75 6l-1.035.259a3.375 3.375 0 0 0-2.456 2.456ZM16.894 20.567 16.5 21.75l-.394-1.183a2.25 2.25 0 0 0-1.423-1.423L13.5 18.75l1.183-.394a2.25 2.25 0 0 0 1.423-1.423l.394-1.183.394 1.183a2.25 2.25 0 0 0 1.423 1.423l1.183.394-1.183.394a2.25 2.25 0 0 0-1.423 1.423Z"})])}function Su(t,o){return m(),g("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 3v2.25m6.364.386-1.591 1.591M21 12h-2.25m-.386 6.364-1.591-1.591M12 18.75V21m-4.773-4.227-1.591 1.591M5.25 12H3m4.227-4.773L5.636 5.636M15.75 12a3.75 3.75 0 1 1-7.5 0 3.75 3.75 0 0 1 7.5 0Z"})])}function Du(t,o){return m(),g("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0"})])}function ax(t,o){return m(),g("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M18 18.72a9.094 9.094 0 0 0 3.741-.479 3 3 0 0 0-4.682-2.72m.94 3.198.001.031c0 .225-.012.447-.037.666A11.944 11.944 0 0 1 12 21c-2.17 0-4.207-.576-5.963-1.584A6.062 6.062 0 0 1 6 18.719m12 0a5.971 5.971 0 0 0-.941-3.197m0 0A5.995 5.995 0 0 0 12 12.75a5.995 5.995 0 0 0-5.058 2.772m0 0a3 3 0 0 0-4.681 2.72 8.986 8.986 0 0 0 3.74.477m.94-3.197a5.971 5.971 0 0 0-.94 3.197M15 6.75a3 3 0 1 1-6 0 3 3 0 0 1 6 0Zm6 3a2.25 2.25 0 1 1-4.5 0 2.25 2.25 0 0 1 4.5 0Zm-13.5 0a2.25 2.25 0 1 1-4.5 0 2.25 2.25 0 0 1 4.5 0Z"})])}function lx(t,o){return m(),g("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15 19.128a9.38 9.38 0 0 0 2.625.372 9.337 9.337 0 0 0 4.121-.952 4.125 4.125 0 0 0-7.533-2.493M15 19.128v-.003c0-1.113-.285-2.16-.786-3.07M15 19.128v.106A12.318 12.318 0 0 1 8.624 21c-2.331 0-4.512-.645-6.374-1.766l-.001-.109a6.375 6.375 0 0 1 11.964-3.07M12 6.375a3.375 3.375 0 1 1-6.75 0 3.375 3.375 0 0 1 6.75 0Zm8.25 2.25a2.625 2.625 0 1 1-5.25 0 2.625 2.625 0 0 1 5.25 0Z"})])}function ix(t,o){return m(),g("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M8.288 15.038a5.25 5.25 0 0 1 7.424 0M5.106 11.856c3.807-3.808 9.98-3.808 13.788 0M1.924 8.674c5.565-5.565 14.587-5.565 20.152 0M12.53 18.22l-.53.53-.53-.53a.75.75 0 0 1 1.06 0Z"})])}function sp(t,o){return m(),g("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m9.75 9.75 4.5 4.5m0-4.5-4.5 4.5M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"})])}function Ea(t,o){return m(),g("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 18 18 6M6 6l12 12"})])}const dx={key:0,class:"fixed inset-0 z-50 overflow-y-auto","aria-labelledby":"modal-title",role:"dialog","aria-modal":"true"},ux={class:"flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0"},cx={key:0,class:"bg-white px-6 py-4 border-b border-gray-200"},px={class:"flex items-center justify-between"},mx={class:"flex items-center"},gx={key:0,class:"flex-shrink-0 mr-4"},fx={class:"text-lg font-semibold text-gray-900",id:"modal-title"},vx={key:0,class:"text-sm text-gray-600 mt-1"},hx={key:0,class:"text-gray-700"},yx={key:1,class:"text-gray-700"},xx={key:1,class:"bg-gray-50 px-6 py-4 border-t border-gray-200 flex justify-end space-x-3"},bx=["disabled"],wx=["disabled"],kx={key:0,class:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},_x={__name:"BaseModal",props:{modelValue:{type:Boolean,default:!1},title:{type:String,default:"Confirm Action"},subtitle:{type:String,default:""},message:{type:String,default:""},icon:{type:[String,Object],default:null},variant:{type:String,default:"default",validator:t=>["default","danger","warning","success"].includes(t)},size:{type:String,default:"md",validator:t=>["sm","md","lg","xl","full"].includes(t)},showHeader:{type:Boolean,default:!0},showCloseButton:{type:Boolean,default:!0},showFooter:{type:Boolean,default:!0},showCancelButton:{type:Boolean,default:!0},showConfirmButton:{type:Boolean,default:!0},cancelText:{type:String,default:"Cancel"},confirmText:{type:String,default:"Confirm"},loadingText:{type:String,default:"Loading..."},loading:{type:Boolean,default:!1},closeOnBackdrop:{type:Boolean,default:!0},closeOnEscape:{type:Boolean,default:!0},persistent:{type:Boolean,default:!1}},emits:["update:modelValue","confirm","cancel","close"],setup(t,{emit:o}){const s=t,n=o,r=oe(()=>({sm:"sm:max-w-sm",md:"sm:max-w-md",lg:"sm:max-w-lg",xl:"sm:max-w-2xl",full:"sm:max-w-7xl"})[s.size]),l=oe(()=>s.showHeader||s.showFooter?"px-6 py-4":"p-6"),a=oe(()=>({default:"bg-indigo-100",danger:"bg-red-100",warning:"bg-yellow-100",success:"bg-green-100"})[s.variant]),d=oe(()=>({default:"text-indigo-600",danger:"text-red-600",warning:"text-yellow-600",success:"text-green-600"})[s.variant]),i=oe(()=>`${{default:"border border-transparent bg-indigo-600 text-white hover:bg-indigo-700 focus:ring-indigo-500",danger:"border border-transparent bg-red-600 text-white hover:bg-red-700 focus:ring-red-500",warning:"border border-transparent bg-yellow-600 text-white hover:bg-yellow-700 focus:ring-yellow-500",success:"border border-transparent bg-green-600 text-white hover:bg-green-700 focus:ring-green-500"}[s.variant]} ${s.loading?"opacity-75 cursor-not-allowed":""}`),c=()=>{!s.persistent&&!s.loading&&(n("update:modelValue",!1),n("close"))},u=()=>{s.closeOnBackdrop&&c()},p=()=>{s.loading||(n("cancel"),n("update:modelValue",!1))},w=()=>{s.loading||n("confirm")},f=N=>{N.key==="Escape"&&s.closeOnEscape&&s.modelValue&&c()};Me(()=>{document.addEventListener("keydown",f),s.modelValue&&(document.body.style.overflow="hidden")}),Pt(()=>{document.removeEventListener("keydown",f),document.body.style.overflow=""});const{modelValue:v}=uc(s);return Oe(v,N=>{Qo(()=>{N?document.body.style.overflow="hidden":document.body.style.overflow=""})}),(N,A)=>(m(),Ne(Nn,{to:"body"},[Te(v)?(m(),g("div",dx,[e("div",ux,[le(mt,{"enter-active-class":"transition-opacity ease-out duration-300","enter-from-class":"opacity-0","enter-to-class":"opacity-100","leave-active-class":"transition-opacity ease-in duration-200","leave-from-class":"opacity-100","leave-to-class":"opacity-0"},{default:ye(()=>[Te(v)?(m(),g("div",{key:0,class:"fixed inset-0 bg-gray-500 bg-opacity-75 backdrop-blur-sm transition-opacity",onClick:u})):J("",!0)]),_:1}),A[2]||(A[2]=e("span",{class:"hidden sm:inline-block sm:align-middle sm:h-screen","aria-hidden":"true"},"",-1)),le(mt,{"enter-active-class":"transition-all ease-out duration-300","enter-from-class":"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95","enter-to-class":"opacity-100 translate-y-0 sm:scale-100","leave-active-class":"transition-all ease-in duration-200","leave-from-class":"opacity-100 translate-y-0 sm:scale-100","leave-to-class":"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95"},{default:ye(()=>[Te(v)?(m(),g("div",{key:0,class:se(["inline-block align-bottom bg-white rounded-xl text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:w-full border border-gray-200",r.value])},[t.showHeader?(m(),g("div",cx,[e("div",px,[e("div",mx,[t.icon?(m(),g("div",gx,[e("div",{class:se(["mx-auto flex items-center justify-center h-10 w-10 rounded-full",a.value])},[(m(),Ne(wt(t.icon),{class:se(["h-5 w-5",d.value])},null,8,["class"]))],2)])):J("",!0),e("div",null,[e("h3",fx,h(t.title),1),t.subtitle?(m(),g("p",vx,h(t.subtitle),1)):J("",!0)])]),t.showCloseButton?(m(),g("button",{key:0,onClick:c,class:"rounded-md text-gray-400 hover:text-gray-600 focus:outline-none focus:ring-2 focus:ring-indigo-500 transition-colors duration-200"},[A[0]||(A[0]=e("span",{class:"sr-only"},"Close",-1)),le(Te(Ea),{class:"h-5 w-5"})])):J("",!0)])])):J("",!0),e("div",{class:se(["bg-white",l.value])},[N.$slots.default?(m(),g("div",hx,[Tt(N.$slots,"default",{},void 0,!0)])):t.message?(m(),g("div",yx,[e("p",null,h(t.message),1)])):J("",!0)],2),t.showFooter?(m(),g("div",xx,[Tt(N.$slots,"footer",{},()=>[t.showCancelButton?(m(),g("button",{key:0,onClick:p,type:"button",class:"inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 transition-colors duration-200 sm:text-sm",disabled:t.loading},h(t.cancelText),9,bx)):J("",!0),t.showConfirmButton?(m(),g("button",{key:1,onClick:w,type:"button",class:se(["inline-flex items-center justify-center rounded-md shadow-sm px-4 py-2 text-base font-medium focus:outline-none focus:ring-2 focus:ring-offset-2 transition-all duration-200 sm:text-sm",i.value]),disabled:t.loading},[t.loading?(m(),g("svg",kx,[...A[1]||(A[1]=[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)])])):J("",!0),te(" "+h(t.loading?t.loadingText:t.confirmText),1)],10,wx)):J("",!0)],!0)])):J("",!0)],2)):J("",!0)]),_:3})])])):J("",!0)]))}},Aa=ot(_x,[["__scopeId","data-v-86a742fd"]]),np={__name:"AppBreadcrumb",props:{items:{type:Array,default:()=>[]}},setup(t){const o=t,s=tt(),n=We(),r=oe(()=>{var a;return(a=n.user)==null?void 0:a.role}),l=oe(()=>{const a=[],d=s.path,i=s.params,c=()=>{switch(r.value){case"tenant":return{name:"Dashboard",to:"/tenant/dashboard"};case"entity_admin":return{name:"Dashboard",to:`/entity/${i.entityId}/dashboard`};case"devotee":return{name:"Dashboard",to:`/entity/${i.entityId}/devotee/dashboard`};case"volunteer":return{name:"Dashboard",to:`/entity/${i.entityId}/volunteer/dashboard`};default:return{name:"Dashboard",to:"/"}}};return d==="/"||d==="/landing"?a.push({name:"Home",current:!0}):d.includes("/login")||d.includes("/register")?(a.push({name:"Home",to:"/"}),a.push({name:d.includes("/login")?"Login":"Register",current:!0})):d.includes("/tenant")?(a.push(c()),d.includes("/entities/create")?(a.push({name:"My Temples",to:"/tenant/entities"}),a.push({name:"Create Temple",current:!0})):d.includes("/entities")&&!d.includes("/create")&&!d.includes("/edit")?d.match(/\/tenant\/entities\/\d+$/)?(a.push({name:"My Temples",to:"/tenant/entities"}),a.push({name:"Temple Details",current:!0})):a.push({name:"My Temples",current:!0,badge:"3"}):d.includes("/entities")&&d.includes("/edit")?(a.push({name:"My Temples",to:"/tenant/entities"}),a.push({name:"Edit Temple",current:!0})):d.includes("/settings")?a.push({name:"Settings",current:!0}):a[0].current=!0):d.includes("/entity")&&r.value==="entity_admin"?(a.push(c()),d.includes("/devotees")?(a.push({name:"Management",to:`/entity/${i.entityId}/devotees`}),a.push({name:"Devotees",current:!0,badge:"1,247"})):d.includes("/volunteers")?(a.push({name:"Management",to:`/entity/${i.entityId}/volunteers`}),a.push({name:"Volunteers",current:!0,badge:"89"})):d.includes("/sevas")?a.push({name:"Seva Management",current:!0,badge:"5 pending"}):d.includes("/donations")?a.push({name:"Donations",current:!0}):d.includes("/events")?a.push({name:"Events & Festivals",current:!0,badge:"2 upcoming"}):d.includes("/communication")?a.push({name:"Communication",current:!0}):d.includes("/settings")?a.push({name:"Settings",current:!0}):a[0].current=!0):d.includes("/entity")&&r.value==="devotee"?(a.push(c()),d.includes("/seva-booking")?a.push({name:"Book Seva",current:!0}):d.includes("/donations")?a.push({name:"My Donations",current:!0}):d.includes("/events")?a.push({name:"Temple Events",current:!0}):d.includes("/profile")?(a.push({name:"My Profile",current:!0}),d.includes("/create")&&(a[a.length-1].current=!1,a[a.length-1].to=`/entity/${i.entityId}/devotee/profile`,a.push({name:"Complete Profile",current:!0}))):a[0].current=!0):d.includes("/entity")&&r.value==="volunteer"?(a.push(c()),d.includes("/assignments")?a.push({name:"My Assignments",current:!0,badge:"3 active"}):d.includes("/schedule")?a.push({name:"My Schedule",current:!0}):d.includes("/events")?a.push({name:"Temple Events",current:!0}):a[0].current=!0):d.includes("/devotee/temple-selection")?(a.push({name:"Home",to:"/"}),a.push({name:"Select Temple",current:!0})):d.includes("/volunteer/temple-selection")?(a.push({name:"Home",to:"/"}),a.push({name:"Select Temple",current:!0})):(a.push({name:"Home",to:"/"}),a.push({name:"Page",current:!0})),a});return oe(()=>o.items&&o.items.length>0?o.items.map((a,d)=>({name:a.name,to:a.path||void 0,current:d===o.items.length-1})):l.value),(a,d)=>null}},$x={key:0,class:"relative"},Sx={key:1,class:"flex space-x-2"},Dx={key:2,class:"flex space-x-1"},Cx={key:3,class:"ml-3"},Tx={class:"bg-white rounded-xl shadow-lg p-8 max-w-sm w-full mx-4"},Ex={class:"text-center"},Ax={class:"text-lg font-semibold text-gray-900 mb-2"},Ix={class:"text-gray-600"},Mx={__name:"BaseLoader",props:{show:{type:Boolean,default:!0},type:{type:String,default:"spinner",validator:t=>["spinner","dots","pulse"].includes(t)},size:{type:String,default:"md",validator:t=>["sm","md","lg","xl"].includes(t)},color:{type:String,default:"indigo"},text:{type:String,default:""},subtext:{type:String,default:""},center:{type:Boolean,default:!1},fullHeight:{type:Boolean,default:!1},overlay:{type:Boolean,default:!1},overlayDark:{type:Boolean,default:!1},overlayTitle:{type:String,default:""},overlayText:{type:String,default:""}},setup(t){const o=t,s=oe(()=>({sm:"h-4 w-4",md:"h-6 w-6",lg:"h-8 w-8",xl:"h-12 w-12"})[o.size]),n=oe(()=>({sm:"h-2 w-2",md:"h-3 w-3",lg:"h-4 w-4",xl:"h-5 w-5"})[o.size]),r=oe(()=>({sm:"h-2 w-1",md:"h-4 w-1",lg:"h-6 w-1",xl:"h-8 w-2"})[o.size]),l=oe(()=>({sm:"sm",md:"base",lg:"lg",xl:"xl"})[o.size]),a=oe(()=>({sm:"xs",md:"sm",lg:"base",xl:"lg"})[o.size]),d=oe(()=>{let i=[];return o.center&&i.push("justify-center"),o.fullHeight&&i.push("min-h-screen"),i.join(" ")});return(i,c)=>(m(),g(be,null,[t.show?(m(),g("div",{key:0,class:se(["flex items-center justify-center",d.value])},[t.type==="spinner"?(m(),g("div",$x,[e("div",{class:se(["animate-spin rounded-full border-2 border-indigo-200",[s.value,`border-t-${t.color}-600`]])},null,2)])):t.type==="dots"?(m(),g("div",Sx,[(m(),g(be,null,$e(3,u=>e("div",{key:u,class:se(["animate-bounce rounded-full",[n.value,`bg-${t.color}-600`,{"animation-delay-150":u===2,"animation-delay-300":u===3}]]),style:Vt({animationDelay:`${(u-1)*150}ms`})},null,6)),64))])):t.type==="pulse"?(m(),g("div",Dx,[(m(),g(be,null,$e(3,u=>e("div",{key:u,class:se(["animate-pulse rounded",[r.value,`bg-${t.color}-600`]]),style:Vt({animationDelay:`${(u-1)*200}ms`})},null,6)),64))])):J("",!0),t.text?(m(),g("div",Cx,[e("p",{class:se(`text-${l.value} text-${t.color}-700 font-medium`)},h(t.text),3),t.subtext?(m(),g("p",{key:0,class:se(`text-${a.value} text-gray-500 mt-1`)},h(t.subtext),3)):J("",!0)])):J("",!0)],2)):J("",!0),t.overlay&&t.show?(m(),g("div",{key:1,class:se(["fixed inset-0 bg-white bg-opacity-75 backdrop-blur-sm flex items-center justify-center z-50",{"bg-gray-900 bg-opacity-50":t.overlayDark}])},[e("div",Tx,[e("div",Ex,[c[0]||(c[0]=e("div",{class:"flex justify-center mb-4"},[e("div",{class:"animate-spin rounded-full h-12 w-12 border-2 border-indigo-200 border-t-indigo-600"})],-1)),e("h3",Ax,h(t.overlayTitle||"Loading..."),1),e("p",Ix,h(t.overlayText||"Please wait while we process your request."),1)])])],2)):J("",!0)],64))}},Ia=ot(Mx,[["__scopeId","data-v-4fefcc0d"]]),Rx=["aria-live"],Px={class:"flex items-start gap-3 p-4"},Nx={class:"flex-1 min-w-0"},jx={key:1,class:"mt-3 flex gap-2"},Lx={key:0,class:"absolute bottom-0 left-0 right-0 h-1 bg-black/10 rounded-b-xl overflow-hidden"},Bx={__name:"BaseAlert",props:{type:{type:String,default:"info",validator:t=>["success","error","warning","info"].includes(t)},title:{type:String,default:""},message:{type:String,default:""},dismissible:{type:Boolean,default:!0},autoDismiss:{type:Boolean,default:!1},autoDismissTime:{type:Number,default:5e3},actionText:{type:String,default:""},showActions:{type:Boolean,default:!1},persistent:{type:Boolean,default:!1}},emits:["dismiss","action"],setup(t,{expose:o,emit:s}){const n=t,r=s,l=B(!0),a=B(0);let d=null;const i=oe(()=>({success:tp,error:sp,warning:Ta,info:op})[n.type]),c=oe(()=>`w-full max-w-md mx-auto sm:max-w-lg md:max-w-xl lg:max-w-2xl ${{success:"bg-green-50 border-green-200 text-green-900",error:"bg-red-50 border-red-200 text-red-900",warning:"bg-yellow-50 border-yellow-200 text-yellow-900",info:"bg-blue-50 border-blue-200 text-blue-900"}[n.type]}`),u=oe(()=>({success:"bg-green-100 text-green-600",error:"bg-red-100 text-red-600",warning:"bg-yellow-100 text-yellow-600",info:"bg-blue-100 text-blue-600"})[n.type]),p=oe(()=>({success:"text-green-600",error:"text-red-600",warning:"text-yellow-600",info:"text-blue-600"})[n.type]),w=oe(()=>({success:"text-green-900",error:"text-red-900",warning:"text-yellow-900",info:"text-blue-900"})[n.type]),f=oe(()=>({success:"text-green-800",error:"text-red-800",warning:"text-yellow-800",info:"text-blue-800"})[n.type]),v=oe(()=>({success:"bg-green-100 text-green-800 hover:bg-green-200 focus:ring-green-500",error:"bg-red-100 text-red-800 hover:bg-red-200 focus:ring-red-500",warning:"bg-yellow-100 text-yellow-800 hover:bg-yellow-200 focus:ring-yellow-500",info:"bg-blue-100 text-blue-800 hover:bg-blue-200 focus:ring-blue-500"})[n.type]),N=oe(()=>({success:"text-green-500 hover:bg-green-100 focus:ring-green-500",error:"text-red-500 hover:bg-red-100 focus:ring-red-500",warning:"text-yellow-500 hover:bg-yellow-100 focus:ring-yellow-500",info:"text-blue-500 hover:bg-blue-100 focus:ring-blue-500"})[n.type]),A=()=>{n.persistent||(l.value=!1,d&&clearTimeout(d),setTimeout(()=>{r("dismiss")},300))},F=()=>{r("action")};return Me(()=>{n.autoDismiss&&n.autoDismissTime&&!n.persistent&&(setTimeout(()=>{a.value=100},100),d=setTimeout(()=>{A()},n.autoDismissTime))}),Pt(()=>{d&&clearTimeout(d)}),o({dismiss:A}),(I,C)=>(m(),Ne(mt,{"enter-active-class":"transition-all duration-300 ease-out","enter-from-class":"opacity-0 transform -translate-y-2 scale-95","enter-to-class":"opacity-100 transform translate-y-0 scale-100","leave-active-class":"transition-all duration-200 ease-in","leave-from-class":"opacity-100 transform translate-y-0 scale-100","leave-to-class":"opacity-0 transform -translate-y-2 scale-95"},{default:ye(()=>[l.value?(m(),g("div",{key:0,class:se([c.value,"relative rounded-xl shadow-lg border transition-all duration-200 hover:shadow-xl"]),role:"alert","aria-live":t.type==="error"?"assertive":"polite"},[e("div",Px,[e("div",{class:se([u.value,"flex-shrink-0 rounded-full p-1"])},[(m(),Ne(wt(i.value),{class:se([p.value,"w-5 h-5"])},null,8,["class"]))],2),e("div",Nx,[t.title?(m(),g("h4",{key:0,class:se([w.value,"font-bold text-sm font-roboto leading-5 mb-1"])},h(t.title),3)):J("",!0),e("div",{class:se([f.value,"text-sm font-sans leading-5"])},[Tt(I.$slots,"default",{},()=>[te(h(t.message),1)],!0)],2),I.$slots.actions||t.showActions?(m(),g("div",jx,[Tt(I.$slots,"actions",{},()=>[t.actionText?(m(),g("button",{key:0,onClick:F,class:se([v.value,"text-xs font-medium px-3 py-1.5 rounded-lg transition-all duration-200 hover:shadow-md focus:outline-none focus:ring-2 focus:ring-offset-2"])},h(t.actionText),3)):J("",!0)],!0)])):J("",!0)]),t.dismissible?(m(),g("button",{key:0,onClick:A,class:se([N.value,"flex-shrink-0 rounded-lg p-1.5 transition-all duration-200 hover:shadow-md focus:outline-none focus:ring-2 focus:ring-offset-2"]),"aria-label":"Dismiss alert"},[le(Te(Ea),{class:"w-4 h-4"})],2)):J("",!0)]),t.autoDismiss&&t.autoDismissTime?(m(),g("div",Lx,[e("div",{class:"h-full bg-current transition-all ease-linear",style:Vt({width:`${a.value}%`,transitionDuration:`${t.autoDismissTime}ms`})},null,4)])):J("",!0)],10,Rx)):J("",!0)]),_:3}))}},Ux=ot(Bx,[["__scopeId","data-v-b76fa8a6"]]),Fx={class:"min-h-screen bg-gray-50"},Vx={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},Ox={key:0,class:"flex justify-center items-center h-64"},zx={key:2,class:"space-y-8"},Hx={class:"bg-white shadow rounded-lg overflow-hidden"},qx={class:"px-6 py-5 border-b border-gray-200 flex justify-between items-center"},Gx={class:"text-2xl font-bold text-gray-900"},Jx={class:"p-6"},Wx={class:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6"},Yx={class:"mt-2 space-y-3"},Kx={class:"ml-2 text-sm text-gray-900"},Xx={class:"ml-2 text-sm text-gray-900"},Zx={class:"ml-2 text-sm text-gray-900"},Qx={class:"mt-2 space-y-3"},eb={class:"ml-2 text-sm text-gray-900"},tb={class:"ml-2 text-sm text-gray-900"},ob={class:"ml-2 text-sm text-gray-900"},sb={class:"mb-6"},nb={class:"text-sm text-gray-700"},rb={key:3,class:"flex flex-col items-center justify-center py-16 text-center"},ab={__name:"TempleDetails",setup(t){const o=tt();et();const s=Ot(),n=B(!0),r=B(null),l=B(null),a=oe(()=>{var c;return[{name:"My Temples",to:"/tenant/entities"},{name:((c=l.value)==null?void 0:c.name)||"Temple Details",current:!0}]}),d=oe(()=>{var c;return((c=l.value)==null?void 0:c.mainDeity)||"Not mentioned"}),i=async()=>{try{n.value=!0,r.value=null;const c=o.params.id,u=await s.getTempleById(c);u?(l.value=u,console.log("Fetched temple:",u)):r.value="Temple not found"}catch(c){console.error("Error fetching temple:",c),r.value=c.message||"Failed to load temple details"}finally{n.value=!1}};return Me(()=>{i()}),(c,u)=>(m(),g("div",Fx,[e("div",Vx,[le(np,{items:a.value,class:"mb-6"},null,8,["items"]),e("div",null,[n.value?(m(),g("div",Ox,[le(Ia,{size:"lg"})])):r.value?(m(),Ne(Ux,{key:1,type:"error",title:"Error Loading Temple",message:r.value,class:"mb-6"},null,8,["message"])):l.value?(m(),g("div",zx,[e("div",Hx,[e("div",qx,[e("h1",Gx,h(l.value.name||"Unnamed Temple"),1),le(ep,{status:l.value.status},null,8,["status"])]),e("div",Jx,[e("div",Wx,[e("div",null,[u[4]||(u[4]=e("h3",{class:"text-sm font-medium text-gray-500"},"Temple Details",-1)),e("div",Yx,[e("div",null,[u[1]||(u[1]=e("span",{class:"text-sm text-gray-500"},"Location:",-1)),e("span",Kx,h(l.value.city||"N/A")+", "+h(l.value.state||"N/A"),1)]),e("div",null,[u[2]||(u[2]=e("span",{class:"text-sm text-gray-500"},"Established:",-1)),e("span",Xx,h(l.value.established_year??l.value.establishedYear??"Not mentioned"),1)]),e("div",null,[u[3]||(u[3]=e("span",{class:"text-sm text-gray-500"},"Main Deity:",-1)),e("span",Zx,h(d.value),1)])])]),e("div",null,[u[8]||(u[8]=e("h3",{class:"text-sm font-medium text-gray-500"},"Contact Information",-1)),e("div",Qx,[e("div",null,[u[5]||(u[5]=e("span",{class:"text-sm text-gray-500"},"Email:",-1)),e("span",eb,h(l.value.email||"N/A"),1)]),e("div",null,[u[6]||(u[6]=e("span",{class:"text-sm text-gray-500"},"Phone:",-1)),e("span",tb,h(l.value.phone||"N/A"),1)]),e("div",null,[u[7]||(u[7]=e("span",{class:"text-sm text-gray-500"},"Address:",-1)),e("span",ob,[l.value.address&&typeof l.value.address=="object"?(m(),g(be,{key:0},[te(h(l.value.address.street||"")+h(l.value.address.street?", ":"")+" "+h(l.value.address.city||"")+h(l.value.address.city?", ":"")+" "+h(l.value.address.district||"")+h(l.value.address.district?", ":"")+" "+h(l.value.address.state||"")+h(l.value.address.state?", ":"")+" "+h(l.value.address.pincode||"")+h(l.value.address.pincode?", ":"")+" "+h(l.value.address.country||""),1)],64)):(m(),g(be,{key:1},[te(h(l.value.address||"N/A"),1)],64))])])])])]),e("div",sb,[u[9]||(u[9]=e("h3",{class:"text-sm font-medium text-gray-500 mb-2"},"Description",-1)),e("p",nb,h(l.value.description||"No description available."),1)]),u[10]||(u[10]=e("div",{class:"flex flex-wrap gap-3"},null,-1))])])])):(m(),g("div",rb,[u[11]||(u[11]=e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-20 w-20 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})],-1)),u[12]||(u[12]=e("h3",{class:"mt-4 text-lg font-medium text-gray-900"},"No Temple Found",-1)),u[13]||(u[13]=e("p",{class:"mt-1 text-gray-500"},"The temple you're looking for doesn't exist or has been removed.",-1)),e("button",{onClick:u[0]||(u[0]=p=>c.$router.push("/tenant/entities")),class:"mt-6 px-4 py-2 text-sm font-medium text-white bg-indigo-600 rounded-lg hover:bg-indigo-700"}," Back to Temples ")]))])])]))}},lb=ot(ab,[["__scopeId","data-v-695d3a31"]]),ib={class:"min-h-screen bg-gray-50"},db={class:"bg-white shadow-sm border-b border-gray-200"},ub={class:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-6"},cb={class:"flex items-center justify-between"},pb={class:"flex items-center space-x-2 text-sm text-gray-500 mb-2"},mb={class:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},gb={class:"mb-8"},fb={class:"flex items-center justify-between mb-2"},vb={class:"text-sm font-medium text-indigo-600"},hb={class:"text-sm text-gray-500"},yb={class:"w-full bg-gray-200 rounded-full h-2"},xb={key:0,class:"flex justify-center items-center py-20"},bb={key:1,class:"bg-red-50 border border-red-200 rounded-lg p-6 text-center"},wb={class:"text-red-700 mb-4"},kb={class:"p-8"},_b={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},$b={class:"md:col-span-2"},Sb=["max"],Db={class:"md:col-span-2"},Cb={class:"md:col-span-2"},Tb={class:"p-8"},Eb={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},Ab={class:"md:col-span-2"},Ib={class:"md:col-span-2"},Mb={class:"md:col-span-2"},Rb={class:"p-8"},Pb={class:"mb-6 flex items-center justify-between"},Nb={class:"space-y-6"},jb={class:"border-2 border-dashed border-gray-300 rounded-lg p-6 hover:border-indigo-400 transition-colors duration-200"},Lb={class:"text-center"},Bb={class:"flex flex-col items-center space-y-2"},Ub={class:"cursor-pointer bg-indigo-600 text-white px-6 py-2 rounded-lg hover:bg-indigo-700 transition-colors duration-200"},Fb={key:0,class:"flex items-center space-x-2 mt-2"},Vb={class:"text-sm text-green-600"},Ob={key:1,class:"flex items-center space-x-2 mt-2"},zb={class:"text-sm text-gray-600"},Hb=["disabled"],qb={key:0},Gb={key:1},Jb={class:"border-2 border-dashed border-gray-300 rounded-lg p-6 hover:border-indigo-400 transition-colors duration-200"},Wb={class:"text-center"},Yb={class:"flex flex-col items-center space-y-2"},Kb={class:"cursor-pointer bg-indigo-600 text-white px-6 py-2 rounded-lg hover:bg-indigo-700 transition-colors duration-200"},Xb={key:0,class:"flex items-center space-x-2 mt-2"},Zb={class:"text-sm text-green-600"},Qb={key:1,class:"flex items-center space-x-2 mt-2"},ew={class:"text-sm text-gray-600"},tw=["disabled"],ow={key:0},sw={key:1},nw={class:"border-2 border-dashed border-gray-300 rounded-lg p-6 hover:border-indigo-400 transition-colors duration-200"},rw={class:"text-center"},aw={class:"flex flex-col items-center space-y-2"},lw={class:"cursor-pointer bg-gray-600 text-white px-6 py-2 rounded-lg hover:bg-gray-700 transition-colors duration-200"},iw={key:0,class:"flex items-center space-x-2 mt-2"},dw={class:"text-sm text-green-600"},uw={key:1,class:"flex items-center space-x-2 mt-2"},cw={class:"text-sm text-gray-600"},pw=["disabled"],mw={key:0},gw={key:1},fw={class:"border-2 border-dashed border-gray-300 rounded-lg p-6 hover:border-indigo-400 transition-colors duration-200"},vw={class:"text-center"},hw={class:"flex flex-col items-center"},yw={class:"cursor-pointer bg-gray-600 text-white px-6 py-2 rounded-lg hover:bg-gray-700 transition-colors duration-200"},xw={key:0,class:"mt-2 w-full"},bw=["onClick"],ww=["onClick"],kw={key:1,class:"mt-2 w-full"},_w={class:"text-sm text-gray-600"},$w=["onClick"],Sw=["disabled","onClick"],Dw={key:0},Cw={key:1},Tw={class:"mt-8 p-4 bg-gray-50 rounded-lg"},Ew={class:"flex items-start"},Aw={class:"text-sm font-medium text-gray-900 mb-1"},Iw={key:0,class:"text-sm text-red-600 mt-1"},Mw={key:1,class:"text-sm text-gray-700 mt-1"},Rw={class:"px-8 py-6 bg-gray-50 border-t border-gray-200 flex justify-between"},Pw={key:1},Nw={class:"flex space-x-3"},jw=["disabled"],Lw={key:0,class:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",fill:"none",viewBox:"0 0 24 24"},Bw={key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4"},Uw={class:"bg-white rounded-lg max-w-4xl w-full max-h-[90vh] overflow-hidden"},Fw={class:"p-6 overflow-y-auto max-h-[70vh]"},Vw={class:"space-y-6"},Ow={key:0,class:"border border-gray-200 rounded-lg p-4"},zw={class:"flex items-center justify-between mb-3"},Hw={class:"flex space-x-2"},qw=["disabled"],Gw={key:0},Jw={key:1},Ww={class:"text-sm text-gray-600"},Yw={key:1,class:"border border-gray-200 rounded-lg p-4"},Kw={class:"flex items-center justify-between mb-3"},Xw={class:"flex space-x-2"},Zw=["disabled"],Qw={key:0},e4={key:1},t4={class:"text-sm text-gray-600"},o4={key:2,class:"border border-gray-200 rounded-lg p-4"},s4={class:"flex items-center justify-between mb-3"},n4={class:"flex space-x-2"},r4=["disabled"],a4={key:0},l4={key:1},i4={class:"text-sm text-gray-600"},d4={key:3},u4={class:"space-y-3"},c4={class:"flex items-center justify-between mb-2"},p4={class:"text-sm font-medium text-gray-800"},m4={class:"flex space-x-2"},g4=["onClick"],f4=["onClick","disabled"],v4={key:0},h4={key:1},y4={class:"text-xs text-gray-600"},x4={key:4,class:"text-center py-8"},b4={key:1,class:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50 p-4"},w4={class:"bg-white rounded-lg max-w-6xl w-full max-h-[95vh] overflow-hidden"},k4={class:"flex items-center justify-between p-4 border-b border-gray-200"},_4={class:"text-lg font-semibold text-gray-900"},$4={class:"flex items-center space-x-2"},S4=["disabled"],D4={key:0},C4={key:1},T4={class:"p-4 overflow-auto max-h-[85vh]"},E4=["src"],A4=["src","alt"],I4={__name:"EditTemple",setup(t){const o=et(),s=tt(),n=Ue(),r=B(1),l=B(!1),a=B(!0),d=B(null),i=B(!1),c=B(!1),u=B(""),p=B(""),w=Je({registration:!1,trustDeed:!1,property:!1,viewer:!1}),f=Je({registration:"",trustDeed:"",property:"",additional:[]}),v=Je({name:"",mainDeity:"",templeType:"",establishedYear:"",phone:"",email:"",description:"",streetAddress:"",city:"",state:"",district:"",pincode:"",landmark:"",mapLink:"",documents:{registration:null,trustDeed:null,property:null,additional:[]},status:"PENDING",rejectionReason:"",adminNotes:""}),N=Je({registration:"",trustDeed:"",property:"",additional:[]}),A=Je({registration:"",trustDeed:"",property:"",additional:[]}),F=(D,x="success")=>{try{x==="success"&&n.success?n.success(D):x==="error"&&n.error?n.error(D):n.addToast?n.addToast({content:D,type:x}):console.log(x.toUpperCase(),D)}catch(S){console.error("Toast error",S),x==="error"&&alert(D)}},I=oe(()=>s.params.id),C=oe(()=>{switch((v.status||"").toUpperCase()){case"APPROVED":return"text-green-600 font-medium";case"PENDING":return"text-yellow-600 font-medium";case"REJECTED":return"text-red-600 font-medium";default:return"text-gray-600"}}),j=oe(()=>!!(A.registration||A.trustDeed||A.property||A.additional&&A.additional.length>0)),$=oe(()=>{const D=(u.value||"").toLowerCase();return D.includes(".pdf")||D.includes("application/pdf")||D.startsWith("blob:")&&p.value.toLowerCase().includes("pdf")}),y=D=>((D||"").trim()||"document").replace(/[\\/:*?"<>|\u0000-\u001F]/g,"_").slice(0,200),b=D=>{if(!D)return"";const x=/filename\*\s*=\s*([^;]+)/i.exec(D);if(x){let P=x[1].trim().replace(/^"+|"+$/g,"");P.toLowerCase().startsWith("utf-8''")&&(P=P.substring(7));try{return y(decodeURIComponent(P))}catch{return y(P)}}const S=/filename\s*=\s*("?)([^";]+)\1/i.exec(D);return S&&S[2]?y(S[2]):""},E=D=>{try{const S=new URL(D,window.location.origin).pathname.split("/").filter(Boolean).pop()||"";return y(decodeURIComponent(S))}catch{const S=(D||"").split("?")[0].split("#")[0].split("/").filter(Boolean).pop()||"";try{return y(decodeURIComponent(S))}catch{return y(S)}}},R=(D,x,S)=>y(b(S)||D||E(x)||"document"),M=D=>{if(!D)return"";let x=String(D);if(x.includes("/files/")&&(x=x.replace(/\/files\//g,"/")),x.startsWith("http://")||x.startsWith("https://")){if(x.includes("://localhost:8080/")&&!/\/(uploads|api|public)\//.test(x)){const P=x.split("://localhost:8080/");if(P.length===2){const T=P[1];T.startsWith("uploads/")||(x=`${P[0]}://localhost:8080/uploads/${T}`)}}return x}let S;return x.startsWith("/uploads/")?S=x:x.startsWith("uploads/")?S=`/${x}`:x.startsWith("/")?S=`/uploads${x}`:S=`/uploads/${x}`,`http://localhost:8080${S}`},G=(D,x)=>{const S=M(D);if(!S){F("Document URL not available","error");return}u.value=S,p.value=x||"Document",c.value=!0},U=(D,x,S)=>{if(!D){F("No file selected","error");return}f[S]||(f[S]=URL.createObjectURL(D)),u.value=f[S],p.value=x||D.name,c.value=!0},_=D=>{var S;const x=(S=v.documents.additional)==null?void 0:S[D];x&&(f.additional[D]||(f.additional[D]=URL.createObjectURL(x)),u.value=f.additional[D],p.value=`Additional Document ${D+1}`,c.value=!0)},k=async()=>{try{w.viewer=!0;const D=u.value,x=y((p.value||"document").replace(/\s+/g,"-"));if(D.startsWith("blob:")){const S=document.createElement("a");S.href=D,S.download=x,document.body.appendChild(S),S.click(),S.remove(),F("Document download started");return}await z(D,x,"viewer")}catch{F("Failed to download from viewer","error")}finally{w.viewer=!1}},L=(D,x="document")=>{if(!D)return;const S=URL.createObjectURL(D),P=document.createElement("a");P.href=S,P.download=y(D.name||`${x}`),document.body.appendChild(P),P.click(),P.remove(),setTimeout(()=>URL.revokeObjectURL(S),0),F("Document download started")},z=async(D,x,S)=>{const P=M(D);if(!P){F("Document URL not available","error");return}try{w[S]=!0}catch{}try{const T=localStorage.getItem("auth_token")||localStorage.getItem("authToken")||"",V=await fetch(P,{method:"GET",headers:{...T?{Authorization:`Bearer ${T}`}:{},Accept:"*/*"},credentials:"include"});if(!V.ok)throw new Error(`HTTP ${V.status}`);const Z=V.headers.get("Content-Disposition")||V.headers.get("content-disposition")||"",X=await V.blob(),W=R(`${x}`,P,Z),re=URL.createObjectURL(X),ne=document.createElement("a");ne.href=re,ne.download=W,document.body.appendChild(ne),ne.click(),ne.remove(),setTimeout(()=>URL.revokeObjectURL(re),0),F("Document downloaded successfully!"),w[S]=!1;return}catch(T){console.log("Blob download failed, falling back",T)}try{const T=document.createElement("a");T.href=P,T.download=y(`${x}`),T.target="_blank",document.body.appendChild(T),T.click(),T.remove(),F("Document download initiated"),w[S]=!1;return}catch(T){console.log("Direct link failed, trying iframe",T)}try{const T=document.createElement("iframe");T.style.display="none",T.src=P,document.body.appendChild(T),setTimeout(()=>{document.body.contains(T)&&document.body.removeChild(T)},5e3),F("Download attempted via alternative method")}catch(T){console.log("Iframe fallback failed, opening new tab",T),window.open(P,"_blank","noopener,noreferrer"),F("Opened in a new tab; use Save As")}finally{try{w[S]=!1}catch{}}},q=D=>{if(D)try{URL.revokeObjectURL(D)}catch{}},K=(D,x)=>{const S=Array.from(D.target.files||[]);x==="additional"?(v.documents.additional=S,f.additional.forEach(P=>q(P)),f.additional=S.map(P=>URL.createObjectURL(P))):(v.documents[x]=S[0]||null,f[x]&&q(f[x]),f[x]=v.documents[x]?URL.createObjectURL(v.documents[x]):"")},H=()=>{ee()&&r.value++},O=()=>{r.value--},ee=()=>{if(r.value===1){if(["name","mainDeity","templeType","phone"].filter(S=>!(v[S]||"").toString().trim()).length)return F("Please fill in all required fields","error"),!1}else if(r.value===2){if(["streetAddress","city","state","district","pincode"].filter(S=>!(v[S]||"").toString().trim()).length)return F("Please fill in all required address fields","error"),!1;if(!/^\d{6}$/.test(v.pincode||""))return F("PIN Code must be a 6-digit number","error"),!1}return!0},ge=async()=>{var D;if(ee())try{l.value=!0;let x=null;v.establishedYear&&!isNaN(parseInt(v.establishedYear))&&(x=parseInt(v.establishedYear));const S={id:parseInt(I.value),name:(v.name||"").trim(),maindeity:(v.mainDeity||"").trim(),templetype:(v.templeType||"").trim(),establishedyear:x,phone:(v.phone||"").trim(),email:(v.email||"").trim(),description:(v.description||"").trim(),streetaddress:(v.streetAddress||"").trim(),city:(v.city||"").trim(),state:(v.state||"").trim(),district:(v.district||"").trim(),pincode:(v.pincode||"").trim(),landmark:(v.landmark||"").trim(),maplink:(v.mapLink||"").trim()};console.log(" Submitting update with payload:",S),await lt.updateTemple(I.value,S),F("Temple information updated successfully!"),o.push("/tenant/dashboard")}catch(x){console.error("Failed to update temple",x);const S=(D=x==null?void 0:x.response)==null?void 0:D.data;let P="Failed to update temple information. Please try again.";S!=null&&S.error?P=S.error:S!=null&&S.message?P=S.message:x!=null&&x.message&&(P=x.message),F(P,"error")}finally{l.value=!1}},de=(D,x)=>{for(const S of x)if(D&&typeof D[S]=="string"&&D[S])return D[S];return""},ie=async()=>{a.value=!0,d.value=null;try{const D=await lt.getTempleById(I.value),x=(D==null?void 0:D.data)||D||{};v.name=x.name||x.Name||"",v.mainDeity=x.maindeity||x.mainDeity||x.MainDeity||"",v.templeType=x.templetype||x.templeType||x.TempleType||"",v.establishedYear=x.establishedyear||x.establishedYear||x.EstablishedYear||"",v.phone=x.phone||x.Phone||"",v.email=x.email||x.Email||"",v.description=x.description||x.Description||"",v.streetAddress=x.streetaddress||x.streetAddress||x.Address||"",v.city=x.city||x.City||"",v.state=x.state||x.State||"",v.district=x.district||x.District||"",v.pincode=x.pincode||x.Pincode||"",v.landmark=x.landmark||x.Landmark||"",v.mapLink=x.maplink||x.mapLink||"",v.status=(x.status||x.Status||"PENDING").toString().toUpperCase(),v.rejectionReason=x.rejectionReason||x.RejectionReason||"",v.adminNotes=x.adminNotes||x.AdminNotes||"",N.registration=x.registrationCertName||x.registration_cert_name||x.registration_certificate_name||"",N.trustDeed=x.trustDeedName||x.trust_deed_name||"",N.property=x.propertyDocsName||x.property_docs_name||"",N.additional=Array.isArray(x.additionalDocsNames||x.additional_docs_names)?x.additionalDocsNames||x.additional_docs_names:[];const S=(T,V)=>{const Z=de(T,V);return M(Z)};A.registration=S(x,["registrationCertUrl","registration_cert_url","registrationUrl","registration_url","registrationCert","registration_cert"]),A.trustDeed=S(x,["trustDeedUrl","trust_deed_url","trustDeed","trust_deed"]),A.property=S(x,["propertyDocsUrl","property_docs_url","propertyUrl","property_url","propertyDocs","property_docs"]);const P=x.additionalDocuments||x.additional_documents||x.additionalDocs||x.additional_docs||[];A.additional=Array.isArray(P)?P.map(T=>{if(typeof T=="string")return M(T);if(T&&typeof T=="object"){const V=T.url||T.fileUrl||T.downloadUrl||T.path||"";return M(V)}return""}).filter(Boolean):[],!N.registration&&A.registration&&(N.registration=E(A.registration)),!N.trustDeed&&A.trustDeed&&(N.trustDeed=E(A.trustDeed)),!N.property&&A.property&&(N.property=E(A.property)),N.additional.length===0&&A.additional.length>0&&(N.additional=A.additional.map(T=>E(T))),a.value=!1}catch(D){console.error("Failed to load temple data",D),d.value=D&&D.message?D.message:"Unable to load details",a.value=!1}},me=()=>{i.value=!1},ke=()=>{c.value=!1,u.value="",p.value=""},Q=()=>{try{["registration","trustDeed","property"].forEach(D=>q(f[D])),Array.isArray(f.additional)&&f.additional.forEach(D=>q(D))}catch{}};return Me(async()=>{await ie()}),ya(()=>{Q()}),(D,x)=>{const S=Ze("router-link");return m(),g("div",ib,[e("div",db,[e("div",ub,[e("div",cb,[e("div",null,[e("nav",pb,[le(S,{to:"/tenant/dashboard",class:"hover:text-indigo-600"},{default:ye(()=>[...x[37]||(x[37]=[te("Dashboard",-1)])]),_:1}),x[39]||(x[39]=e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1)),le(S,{to:"/tenant/entities",class:"hover:text-indigo-600"},{default:ye(()=>[...x[38]||(x[38]=[te("Manage Temples",-1)])]),_:1}),x[40]||(x[40]=e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1)),x[41]||(x[41]=e("span",{class:"text-gray-900"},"Edit Temple",-1))]),x[42]||(x[42]=e("h1",{class:"text-2xl font-bold text-gray-900"},"Edit Temple",-1)),x[43]||(x[43]=e("p",{class:"text-gray-600 mt-1"},"Update temple information",-1))])])])]),e("div",mb,[e("div",gb,[e("div",fb,[e("span",vb,"Step "+h(r.value)+" of 3",1),e("span",hb,h(Math.round(r.value/3*100))+"% Complete",1)]),e("div",yb,[e("div",{class:"bg-indigo-600 h-2 rounded-full transition-all duration-300",style:Vt({width:`${r.value/3*100}%`})},null,4)])]),a.value?(m(),g("div",xb,[...x[44]||(x[44]=[e("div",{class:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-indigo-600"},null,-1),e("span",{class:"ml-3 text-gray-600"},"Loading temple data...",-1)])])):d.value?(m(),g("div",bb,[x[45]||(x[45]=e("svg",{class:"w-12 h-12 text-red-500 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})],-1)),x[46]||(x[46]=e("h3",{class:"text-lg font-medium text-red-800 mb-2"},"Failed to load temple data",-1)),e("p",wb,h(d.value),1),e("button",{onClick:ie,class:"inline-flex items-center px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700"}," Try Again ")])):(m(),g("form",{key:2,class:"bg-white rounded-2xl shadow-sm border border-gray-200 overflow-hidden",onSubmit:qe(ge,["prevent"])},[ce(e("div",kb,[x[55]||(x[55]=e("div",{class:"mb-6"},[e("h2",{class:"text-xl font-bold text-gray-900 mb-2"},"Temple Basic Information"),e("p",{class:"text-gray-600"},"Update the essential details about the temple")],-1)),e("div",_b,[e("div",$b,[x[47]||(x[47]=e("label",{for:"templeName",class:"block text-sm font-medium text-gray-700 mb-2"},"Temple Name",-1)),ce(e("input",{id:"templeName","onUpdate:modelValue":x[0]||(x[0]=P=>v.name=P),type:"text",required:"",class:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-colors duration-200",placeholder:"Enter temple name"},null,512),[[_e,v.name]])]),e("div",null,[x[48]||(x[48]=e("label",{for:"deity",class:"block text-sm font-medium text-gray-700 mb-2"},"Main Deity",-1)),ce(e("input",{id:"deity","onUpdate:modelValue":x[1]||(x[1]=P=>v.mainDeity=P),type:"text",required:"",class:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-colors duration-200",placeholder:"e.g., Lord Vishnu, Goddess Lakshmi"},null,512),[[_e,v.mainDeity]])]),e("div",null,[x[50]||(x[50]=e("label",{for:"templeType",class:"block text-sm font-medium text-gray-700 mb-2"},"Temple Type",-1)),ce(e("select",{id:"templeType","onUpdate:modelValue":x[2]||(x[2]=P=>v.templeType=P),required:"",class:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-colors duration-200"},[...x[49]||(x[49]=[Ce('<option value="">Select temple type</option><option value="traditional">Traditional</option><option value="modern">Modern</option><option value="heritage">Heritage</option><option value="community">Community</option>',5)])],512),[[Re,v.templeType]])]),e("div",null,[x[51]||(x[51]=e("label",{for:"establishedYear",class:"block text-sm font-medium text-gray-700 mb-2"},"Established Year",-1)),ce(e("input",{id:"establishedYear","onUpdate:modelValue":x[3]||(x[3]=P=>v.establishedYear=P),type:"number",min:1800,max:new Date().getFullYear(),class:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-colors duration-200",placeholder:"YYYY"},null,8,Sb),[[_e,v.establishedYear]])]),e("div",null,[x[52]||(x[52]=e("label",{for:"phone",class:"block text-sm font-medium text-gray-700 mb-2"},"Contact Phone",-1)),ce(e("input",{id:"phone","onUpdate:modelValue":x[4]||(x[4]=P=>v.phone=P),type:"tel",required:"",class:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-colors duration-200",placeholder:"+91 XXXXX XXXXX"},null,512),[[_e,v.phone]])]),e("div",Db,[x[53]||(x[53]=e("label",{for:"email",class:"block text-sm font-medium text-gray-700 mb-2"},"Temple Email",-1)),ce(e("input",{id:"email","onUpdate:modelValue":x[5]||(x[5]=P=>v.email=P),type:"email",class:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-colors duration-200",placeholder:"temple@example.com"},null,512),[[_e,v.email]])]),e("div",Cb,[x[54]||(x[54]=e("label",{for:"description",class:"block text-sm font-medium text-gray-700 mb-2"},"Temple Description",-1)),ce(e("textarea",{id:"description","onUpdate:modelValue":x[6]||(x[6]=P=>v.description=P),rows:"4",class:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-colors duration-200",placeholder:"Brief description of the temple, its history, and significance..."},null,512),[[_e,v.description]])])])],512),[[us,r.value===1]]),ce(e("div",Tb,[x[64]||(x[64]=e("div",{class:"mb-6"},[e("h2",{class:"text-xl font-bold text-gray-900 mb-2"},"Temple Address"),e("p",{class:"text-gray-600"},"Update the complete address details")],-1)),e("div",Eb,[e("div",Ab,[x[56]||(x[56]=e("label",{for:"address",class:"block text-sm font-medium text-gray-700 mb-2"},"Street Address",-1)),ce(e("input",{id:"address","onUpdate:modelValue":x[7]||(x[7]=P=>v.streetAddress=P),type:"text",required:"",class:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-colors duration-200",placeholder:"Enter complete street address"},null,512),[[_e,v.streetAddress]])]),e("div",null,[x[57]||(x[57]=e("label",{for:"city",class:"block text-sm font-medium text-gray-700 mb-2"},"City",-1)),ce(e("input",{id:"city","onUpdate:modelValue":x[8]||(x[8]=P=>v.city=P),type:"text",required:"",class:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-colors duration-200",placeholder:"Enter city name"},null,512),[[_e,v.city]])]),e("div",null,[x[59]||(x[59]=e("label",{for:"state",class:"block text-sm font-medium text-gray-700 mb-2"},"State",-1)),ce(e("select",{id:"state","onUpdate:modelValue":x[9]||(x[9]=P=>v.state=P),required:"",class:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-colors duration-200"},[...x[58]||(x[58]=[Ce('<option value="">Select state</option><option value="Karnataka">Karnataka</option><option value="Tamil Nadu">Tamil Nadu</option><option value="Andhra Pradesh">Andhra Pradesh</option><option value="Kerala">Kerala</option><option value="Maharashtra">Maharashtra</option><option value="Gujarat">Gujarat</option><option value="Rajasthan">Rajasthan</option><option value="Uttar Pradesh">Uttar Pradesh</option><option value="West Bengal">West Bengal</option><option value="Odisha">Odisha</option>',11)])],512),[[Re,v.state]])]),e("div",null,[x[60]||(x[60]=e("label",{for:"district",class:"block text-sm font-medium text-gray-700 mb-2"},"District",-1)),ce(e("input",{id:"district","onUpdate:modelValue":x[10]||(x[10]=P=>v.district=P),type:"text",required:"",class:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-colors duration-200",placeholder:"Enter district name"},null,512),[[_e,v.district]])]),e("div",null,[x[61]||(x[61]=e("label",{for:"pinCode",class:"block text-sm font-medium text-gray-700 mb-2"},"PIN Code",-1)),ce(e("input",{id:"pinCode","onUpdate:modelValue":x[11]||(x[11]=P=>v.pincode=P),type:"text",pattern:"[0-9]{6}",required:"",class:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-colors duration-200",placeholder:"Enter 6-digit PIN code"},null,512),[[_e,v.pincode]])]),e("div",Ib,[x[62]||(x[62]=e("label",{for:"landmark",class:"block text-sm font-medium text-gray-700 mb-2"},"Landmark (Optional)",-1)),ce(e("input",{id:"landmark","onUpdate:modelValue":x[12]||(x[12]=P=>v.landmark=P),type:"text",class:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-colors duration-200",placeholder:"Nearby landmark for easy identification"},null,512),[[_e,v.landmark]])]),e("div",Mb,[x[63]||(x[63]=e("label",{for:"googleMapsLink",class:"block text-sm font-medium text-gray-700 mb-2"},"Google Maps Link (Optional)",-1)),ce(e("input",{id:"googleMapsLink","onUpdate:modelValue":x[13]||(x[13]=P=>v.mapLink=P),type:"url",class:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-colors duration-200",placeholder:"https://maps.google.com/..."},null,512),[[_e,v.mapLink]])])])],512),[[us,r.value===2]]),ce(e("div",Rb,[e("div",Pb,[x[66]||(x[66]=e("div",null,[e("h2",{class:"text-xl font-bold text-gray-900 mb-2"},"Update Documents"),e("p",{class:"text-gray-600"},"Upload or update temple verification documents")],-1)),j.value?(m(),g("button",{key:0,type:"button",onClick:x[14]||(x[14]=P=>i.value=!0),class:"inline-flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors duration-200"},[...x[65]||(x[65]=[e("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})],-1),te(" View Stored Documents ",-1)])])):J("",!0)]),e("div",Nb,[e("div",jb,[e("div",Lb,[x[67]||(x[67]=e("svg",{class:"w-12 h-12 text-gray-400 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1)),x[68]||(x[68]=e("h3",{class:"text-lg font-medium text-gray-900 mb-2"},"Registration Certificate",-1)),x[69]||(x[69]=e("p",{class:"text-gray-600 mb-4"},"Upload temple registration certificate",-1)),e("div",Bb,[e("label",Ub,[e("span",null,h(N.registration?"Replace File":"Choose File"),1),e("input",{type:"file",class:"hidden",accept:".pdf,.jpg,.jpeg,.png",onChange:x[15]||(x[15]=P=>K(P,"registration"))},null,32)]),v.documents.registration?(m(),g("div",Fb,[e("p",Vb,h(v.documents.registration.name),1),e("button",{type:"button",onClick:x[16]||(x[16]=P=>U(v.documents.registration,"Registration Certificate","registration")),class:"text-xs bg-blue-100 text-blue-700 px-2 py-1 rounded hover:bg-blue-200"}," View "),e("button",{type:"button",onClick:x[17]||(x[17]=P=>L(v.documents.registration,"registration-certificate")),class:"text-xs bg-green-100 text-green-700 px-2 py-1 rounded hover:bg-green-200"}," Download ")])):N.registration?(m(),g("div",Ob,[e("p",zb,"Current: "+h(N.registration),1),A.registration?(m(),g("button",{key:0,type:"button",onClick:x[18]||(x[18]=P=>G(A.registration,"Registration Certificate")),class:"text-xs bg-blue-100 text-blue-700 px-2 py-1 rounded hover:bg-blue-200"}," View ")):J("",!0),A.registration?(m(),g("button",{key:1,type:"button",disabled:w.registration,onClick:x[19]||(x[19]=P=>z(A.registration,"registration-certificate","registration")),class:"text-xs bg-green-100 text-green-700 px-2 py-1 rounded hover:bg-green-200 disabled:opacity-50 disabled:cursor-not-allowed"},[w.registration?(m(),g("span",qb,"Downloading...")):(m(),g("span",Gb,"Download"))],8,Hb)):J("",!0)])):J("",!0)])])]),e("div",Jb,[e("div",Wb,[x[70]||(x[70]=e("svg",{class:"w-12 h-12 text-gray-400 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1)),x[71]||(x[71]=e("h3",{class:"text-lg font-medium text-gray-900 mb-2"},"Trust Deed",-1)),x[72]||(x[72]=e("p",{class:"text-gray-600 mb-4"},"Upload temple trust deed document",-1)),e("div",Yb,[e("label",Kb,[e("span",null,h(N.trustDeed?"Replace File":"Choose File"),1),e("input",{type:"file",class:"hidden",accept:".pdf,.jpg,.jpeg,.png",onChange:x[20]||(x[20]=P=>K(P,"trustDeed"))},null,32)]),v.documents.trustDeed?(m(),g("div",Xb,[e("p",Zb,h(v.documents.trustDeed.name),1),e("button",{type:"button",onClick:x[21]||(x[21]=P=>U(v.documents.trustDeed,"Trust Deed","trustDeed")),class:"text-xs bg-blue-100 text-blue-700 px-2 py-1 rounded hover:bg-blue-200"}," View "),e("button",{type:"button",onClick:x[22]||(x[22]=P=>L(v.documents.trustDeed,"trust-deed")),class:"text-xs bg-green-100 text-green-700 px-2 py-1 rounded hover:bg-green-200"}," Download ")])):N.trustDeed?(m(),g("div",Qb,[e("p",ew,"Current: "+h(N.trustDeed),1),A.trustDeed?(m(),g("button",{key:0,type:"button",onClick:x[23]||(x[23]=P=>G(A.trustDeed,"Trust Deed")),class:"text-xs bg-blue-100 text-blue-700 px-2 py-1 rounded hover:bg-blue-200"}," View ")):J("",!0),A.trustDeed?(m(),g("button",{key:1,type:"button",disabled:w.trustDeed,onClick:x[24]||(x[24]=P=>z(A.trustDeed,"trust-deed","trustDeed")),class:"text-xs bg-green-100 text-green-700 px-2 py-1 rounded hover:bg-green-200 disabled:opacity-50 disabled:cursor-not-allowed"},[w.trustDeed?(m(),g("span",ow,"Downloading...")):(m(),g("span",sw,"Download"))],8,tw)):J("",!0)])):J("",!0)])])]),e("div",nw,[e("div",rw,[x[73]||(x[73]=Ce('<svg class="w-12 h-12 text-gray-400 mx-auto mb-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2H5a2 2 0 01-2-2z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 5a2 2 0 012-2h4a2 2 0 012 2v2H8V5z"></path></svg><h3 class="text-lg font-medium text-gray-900 mb-2">Property Documents</h3><p class="text-gray-600 mb-4">Upload property ownership documents (Optional)</p>',3)),e("div",aw,[e("label",lw,[e("span",null,h(N.property?"Replace File":"Choose File"),1),e("input",{type:"file",class:"hidden",accept:".pdf,.jpg,.jpeg,.png",onChange:x[25]||(x[25]=P=>K(P,"property"))},null,32)]),v.documents.property?(m(),g("div",iw,[e("p",dw,h(v.documents.property.name),1),e("button",{type:"button",onClick:x[26]||(x[26]=P=>U(v.documents.property,"Property Documents","property")),class:"text-xs bg-blue-100 text-blue-700 px-2 py-1 rounded hover:bg-blue-200"}," View "),e("button",{type:"button",onClick:x[27]||(x[27]=P=>L(v.documents.property,"property-documents")),class:"text-xs bg-green-100 text-green-700 px-2 py-1 rounded hover:bg-green-200"}," Download ")])):N.property?(m(),g("div",uw,[e("p",cw,"Current: "+h(N.property),1),A.property?(m(),g("button",{key:0,type:"button",onClick:x[28]||(x[28]=P=>G(A.property,"Property Documents")),class:"text-xs bg-blue-100 text-blue-700 px-2 py-1 rounded hover:bg-blue-200"}," View ")):J("",!0),A.property?(m(),g("button",{key:1,type:"button",disabled:w.property,onClick:x[29]||(x[29]=P=>z(A.property,"property-documents","property")),class:"text-xs bg-green-100 text-green-700 px-2 py-1 rounded hover:bg-green-200 disabled:opacity-50 disabled:cursor-not-allowed"},[w.property?(m(),g("span",mw,"Downloading...")):(m(),g("span",gw,"Download"))],8,pw)):J("",!0)])):J("",!0)])])]),e("div",fw,[e("div",vw,[x[74]||(x[74]=e("svg",{class:"w-12 h-12 text-gray-400 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15.172 7l-6.586 6.586a2 2 0 102.828 2.828l6.414-6.586a4 4 0 00-5.656-5.656l-6.415 6.585a6 6 0 108.486 8.486L20.5 13"})],-1)),x[75]||(x[75]=e("h3",{class:"text-lg font-medium text-gray-900 mb-2"},"Additional Documents",-1)),x[76]||(x[76]=e("p",{class:"text-gray-600 mb-4"},"Upload any additional supporting documents (Optional)",-1)),e("div",hw,[e("label",yw,[e("span",null,h(N.additional&&N.additional.length>0?"Add More Files":"Choose Files"),1),e("input",{type:"file",class:"hidden",accept:".pdf,.jpg,.jpeg,.png",multiple:"",onChange:x[30]||(x[30]=P=>K(P,"additional"))},null,32)]),v.documents.additional&&v.documents.additional.length>0?(m(),g("div",xw,[(m(!0),g(be,null,$e(v.documents.additional,(P,T)=>(m(),g("p",{key:`new-${T}`,class:"text-sm text-green-600 flex items-center justify-center space-x-2 mt-1"},[e("span",null,h(P.name),1),e("button",{type:"button",onClick:V=>_(T),class:"text-xs bg-blue-100 text-blue-700 px-2 py-1 rounded hover:bg-blue-200"}," View ",8,bw),e("button",{type:"button",onClick:V=>L(P,`additional-document-${T+1}`),class:"text-xs bg-green-100 text-green-700 px-2 py-1 rounded hover:bg-green-200"}," Download ",8,ww)]))),128))])):J("",!0),N.additional&&N.additional.length>0?(m(),g("div",kw,[(m(!0),g(be,null,$e(N.additional,(P,T)=>(m(),g("div",{key:`existing-${T}`,class:"flex items-center justify-center space-x-2 mt-1"},[e("p",_w,"Current: "+h(P),1),A.additional&&A.additional[T]?(m(),g("button",{key:0,type:"button",onClick:V=>G(A.additional[T],`Additional Document ${T+1}`),class:"text-xs bg-blue-100 text-blue-700 px-2 py-1 rounded hover:bg-blue-200"}," View ",8,$w)):J("",!0),A.additional&&A.additional[T]?(m(),g("button",{key:1,type:"button",disabled:w[`additional-${T}`],onClick:V=>z(A.additional[T],`additional-document-${T+1}`,`additional-${T}`),class:"text-xs bg-green-100 text-green-700 px-2 py-1 rounded hover:bg-green-200 disabled:opacity-50 disabled:cursor-not-allowed"},[w[`additional-${T}`]?(m(),g("span",Dw,"Downloading...")):(m(),g("span",Cw,"Download"))],8,Sw)):J("",!0)]))),128))])):J("",!0)])])]),e("div",Tw,[e("div",Ew,[x[80]||(x[80]=e("svg",{class:"w-5 h-5 text-gray-600 mt-0.5 mr-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),e("div",null,[e("h3",Aw,[x[77]||(x[77]=te("Current Status: ",-1)),e("span",{class:se(C.value)},h(v.status||"PENDING"),3)]),v.rejectionReason?(m(),g("p",Iw,[x[78]||(x[78]=e("strong",null,"Rejection Reason",-1)),te(": "+h(v.rejectionReason),1)])):J("",!0),v.adminNotes?(m(),g("p",Mw,[x[79]||(x[79]=e("strong",null,"Admin Notes",-1)),te(": "+h(v.adminNotes),1)])):J("",!0)])])])])],512),[[us,r.value===3]]),e("div",Rw,[r.value>1?(m(),g("button",{key:0,type:"button",onClick:O,class:"inline-flex items-center px-6 py-3 border border-gray-300 rounded-lg text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 transition-colors duration-200"},[...x[81]||(x[81]=[e("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1),te(" Previous ",-1)])])):(m(),g("div",Pw)),e("div",Nw,[le(S,{to:"/tenant/entities",class:"inline-flex items-center px-6 py-3 border border-gray-300 rounded-lg text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 transition-colors duration-200"},{default:ye(()=>[...x[82]||(x[82]=[te(" Cancel ",-1)])]),_:1}),r.value<3?(m(),g("button",{key:0,type:"button",onClick:H,class:"inline-flex items-center px-6 py-3 bg-indigo-600 text-white rounded-lg text-sm font-medium hover:bg-indigo-700 transition-colors duration-200"},[...x[83]||(x[83]=[te(" Next ",-1),e("svg",{class:"w-4 h-4 ml-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1)])])):(m(),g("button",{key:1,type:"submit",disabled:l.value,class:"inline-flex items-center px-6 py-3 bg-indigo-600 text-white rounded-lg text-sm font-medium hover:bg-indigo-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200"},[l.value?(m(),g("svg",Lw,[...x[84]||(x[84]=[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)])])):J("",!0),te(" "+h(l.value?"Saving Changes...":"Update Temple"),1)],8,jw))])])],32)),x[85]||(x[85]=Ce('<div class="mt-8 bg-blue-50 border border-blue-200 rounded-lg p-6"><div class="flex items-start"><svg class="w-6 h-6 text-blue-600 mt-0.5 mr-3 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg><div><h3 class="text-sm font-medium text-blue-800 mb-1">Need Help?</h3><p class="text-sm text-blue-700"> For assistance with updating temple information, contact support. </p></div></div></div>',1))]),i.value?(m(),g("div",Bw,[e("div",Uw,[e("div",{class:"flex items-center justify-between p-6 border-b border-gray-200"},[x[87]||(x[87]=e("h3",{class:"text-lg font-semibold text-gray-900"},"Temple Documents",-1)),e("button",{onClick:me,class:"text-gray-400 hover:text-gray-600 transition-colors"},[...x[86]||(x[86]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),e("div",Fw,[e("div",Vw,[A.registration?(m(),g("div",Ow,[e("div",zw,[x[88]||(x[88]=e("h4",{class:"text-md font-medium text-gray-900"},"Registration Certificate",-1)),e("div",Hw,[e("button",{onClick:x[31]||(x[31]=P=>G(A.registration,"Registration Certificate")),class:"text-sm bg-blue-100 text-blue-700 px-3 py-1 rounded hover:bg-blue-200 transition-colors"}," View "),e("button",{onClick:x[32]||(x[32]=P=>z(A.registration,"registration-certificate","registration")),disabled:w.registration,class:"text-sm bg-green-100 text-green-700 px-3 py-1 rounded hover:bg-green-200 transition-colors disabled:opacity-50 disabled:cursor-not-allowed"},[w.registration?(m(),g("span",Gw,"Downloading...")):(m(),g("span",Jw,"Download"))],8,qw)])]),e("p",Ww,h(N.registration),1)])):J("",!0),A.trustDeed?(m(),g("div",Yw,[e("div",Kw,[x[89]||(x[89]=e("h4",{class:"text-md font-medium text-gray-900"},"Trust Deed",-1)),e("div",Xw,[e("button",{onClick:x[33]||(x[33]=P=>G(A.trustDeed,"Trust Deed")),class:"text-sm bg-blue-100 text-blue-700 px-3 py-1 rounded hover:bg-blue-200 transition-colors"}," View "),e("button",{onClick:x[34]||(x[34]=P=>z(A.trustDeed,"trust-deed","trustDeed")),disabled:w.trustDeed,class:"text-sm bg-green-100 text-green-700 px-3 py-1 rounded hover:bg-green-200 transition-colors disabled:opacity-50 disabled:cursor-not-allowed"},[w.trustDeed?(m(),g("span",Qw,"Downloading...")):(m(),g("span",e4,"Download"))],8,Zw)])]),e("p",t4,h(N.trustDeed),1)])):J("",!0),A.property?(m(),g("div",o4,[e("div",s4,[x[90]||(x[90]=e("h4",{class:"text-md font-medium text-gray-900"},"Property Documents",-1)),e("div",n4,[e("button",{onClick:x[35]||(x[35]=P=>G(A.property,"Property Documents")),class:"text-sm bg-blue-100 text-blue-700 px-3 py-1 rounded hover:bg-blue-200 transition-colors"}," View "),e("button",{onClick:x[36]||(x[36]=P=>z(A.property,"property-documents","property")),disabled:w.property,class:"text-sm bg-green-100 text-green-700 px-3 py-1 rounded hover:bg-green-200 transition-colors disabled:opacity-50 disabled:cursor-not-allowed"},[w.property?(m(),g("span",a4,"Downloading...")):(m(),g("span",l4,"Download"))],8,r4)])]),e("p",i4,h(N.property),1)])):J("",!0),A.additional&&A.additional.length>0?(m(),g("div",d4,[x[91]||(x[91]=e("h4",{class:"text-md font-medium text-gray-900 mb-3"},"Additional Documents",-1)),e("div",u4,[(m(!0),g(be,null,$e(A.additional,(P,T)=>(m(),g("div",{key:`additional-doc-${T}`,class:"border border-gray-200 rounded-lg p-4"},[e("div",c4,[e("h5",p4,"Additional Document "+h(T+1),1),e("div",m4,[e("button",{onClick:V=>G(P,`Additional Document ${T+1}`),class:"text-xs bg-blue-100 text-blue-700 px-2 py-1 rounded hover:bg-blue-200 transition-colors"}," View ",8,g4),e("button",{onClick:V=>z(P,`additional-document-${T+1}`,`additional-${T}`),disabled:w[`additional-${T}`],class:"text-xs bg-green-100 text-green-700 px-2 py-1 rounded hover:bg-green-200 transition-colors disabled:opacity-50 disabled:cursor-not-allowed"},[w[`additional-${T}`]?(m(),g("span",v4,"Downloading...")):(m(),g("span",h4,"Download"))],8,f4)])]),e("p",y4,h(N.additional[T]),1)]))),128))])])):J("",!0),j.value?J("",!0):(m(),g("div",x4,[...x[92]||(x[92]=[e("svg",{class:"w-16 h-16 text-gray-300 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1),e("h3",{class:"text-lg font-medium text-gray-900 mb-2"},"No Documents Found",-1),e("p",{class:"text-gray-600"},"No documents have been uploaded for this temple yet.",-1)])]))])]),e("div",{class:"border-t border-gray-200 px-6 py-4"},[e("div",{class:"flex justify-end"},[e("button",{onClick:me,class:"px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors"}," Close ")])])])])):J("",!0),c.value?(m(),g("div",b4,[e("div",w4,[e("div",k4,[e("h3",_4,h(p.value),1),e("div",$4,[e("button",{onClick:k,disabled:w.viewer,class:"text-sm bg-green-100 text-green-700 px-3 py-2 rounded hover:bg-green-200 transition-colors disabled:opacity-50 disabled:cursor-not-allowed"},[w.viewer?(m(),g("span",D4,"Downloading...")):(m(),g("span",C4,"Download"))],8,S4),e("button",{onClick:ke,class:"text-gray-400 hover:text-gray-600 transition-colors"},[...x[93]||(x[93]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])])]),e("div",T4,[$.value?(m(),g("iframe",{key:0,src:u.value,class:"w-full h-[75vh] border border-gray-300 rounded",type:"application/pdf"},null,8,E4)):(m(),g("img",{key:1,src:u.value,alt:p.value,class:"max-w-full h-auto mx-auto rounded border border-gray-300"},null,8,A4))])])])):J("",!0)])}}};class M4{async getAllTenantDetails(){try{console.log(" Fetching all tenant details...");try{const o=await pe.get("/superadmin/tenant-details");return console.log(" Tenant details fetched successfully"),o.data}catch{return console.log(" New endpoint failed, trying fallback..."),(await pe.get("/superadmin/tenants")).data}}catch(o){throw console.error(" Error fetching tenant details:",o),o}}async getTenantDetailsById(o){if(!o)throw new Error("Tenant ID is required");try{console.log(` Fetching tenant details for ID: ${o}`);try{const s=await pe.get(`/superadmin/tenant-details/${o}`);return console.log(" Specific tenant details fetched successfully"),s.data}catch{console.log(" Specific endpoint failed, trying alternative...");const n=await pe.get("/entities",{params:{tenant_id:o},headers:{"X-Tenant-ID":o}});return{id:o,entities:n.data,temples:n.data}}}catch(s){throw console.error(` Error fetching tenant details for ${o}:`,s),s}}buildQueryParams(o){const s=new URLSearchParams;return o.dateRange&&s.append("date_range",o.dateRange),o.format&&s.append("format",o.format),o.status&&s.append("status",o.status),o.role&&["Tenant","Temple"].includes(o.role)&&s.append("role",o.role),o.dateRange==="custom"&&o.startDate&&o.endDate&&(s.append("start_date",o.startDate),s.append("end_date",o.endDate)),s}buildReportURL({isSuperAdmin:o,entityId:s,entityIds:n,endpoint:r,queryParams:l}){return r==="approval-status"?`/superadmin/reports/${r}?${l}`:r==="user-details"?`/superadmin/reports/${r}?${l}`:o?n&&n.length>1?`/superadmin/reports/${r}?${l}&entities=${n.join(",")}`:`/superadmin/entities/${s}/reports/${r}?${l}`:`/entities/${s}/reports/${r}?${l}`}async getApprovalStatusReport(o){const{entityId:s,entityIds:n,isSuperAdmin:r}=o;if(!s&&!n)throw new Error("Entity ID or Entity IDs are required");const l=this.buildQueryParams(o),a=this.buildReportURL({...o,endpoint:"approval-status",queryParams:l});return console.log(" Approval Status API request:",a),pe.get(a)}async downloadApprovalStatusReport(o){try{const{entityId:s,entityIds:n,format:r}=o;if(!s&&!n||!r)throw new Error("Entity ID (or IDs) and format are required");const l=this.buildQueryParams(o),a=this.buildReportURL({...o,endpoint:"approval-status",queryParams:l});return this.downloadReport(a,{format:r},"approval_status_report")}catch(s){throw console.error("Error downloading approval status report:",s),s}}async getApprovalStatusPreview(o){var l;const s=await this.getApprovalStatusReport(o),n=((l=s.data)==null?void 0:l.data)||s.data||[],r=[{key:"item_name",label:"Item Name"},{key:"item_type",label:"Type"},{key:"submitted_by",label:"Submitted By"},{key:"submitted_date",label:"Submitted Date"},{key:"status",label:"Status"},{key:"approved_by",label:"Approved By"},{key:"approval_date",label:"Approval Date"},{key:"comments",label:"Comments"}];return{data:Array.isArray(n)?n.map(a=>({...a,submitted_date:a.submitted_date?this.formatDate(a.submitted_date):"-",approval_date:a.approval_date?this.formatDate(a.approval_date):"-"})):[],columns:r,totalRecords:Array.isArray(n)?n.length:0}}async getUserDetailsReport(o){const{entityId:s,entityIds:n,role:r,status:l,dateRange:a="monthly",startDate:d,endDate:i,isSuperAdmin:c}=o;if(!s&&!n)throw new Error("Entity ID or Entity IDs are required");const u=new URLSearchParams({date_range:a});r&&r!=="all"&&u.append("role",r),l&&l!=="all"&&u.append("status",l),a==="custom"&&d&&i&&(u.append("start_date",d),u.append("end_date",i));let p;return c?n&&n.length>1?p=`/superadmin/reports/user-details?${u}&tenants=${n.join(",")}`:p=`/superadmin/reports/user-details?${u}&tenant_id=${s}`:p=`/superadmin/reports/user-details?${u}&tenant_id=${s}`,console.log(" User Details API request:",p),pe.get(p)}async getUserDetailsPreview(o){try{const s=await this.getUserDetailsReport(o);console.log("User Details preview response:",s);let n=s.data;n&&n.data&&(n=n.data);const r=[{key:"name",label:"User Name"},{key:"email",label:"Email"},{key:"entity_name",label:"Entity/Tenant"},{key:"role",label:"Role"},{key:"status",label:"Status"},{key:"created_at",label:"Created At"}];let l=[];return Array.isArray(n)?l=n:n&&n.user_details?l=n.user_details:n&&Array.isArray(n.data)?l=n.data:(console.warn(" No valid user details data found in response:",n),l=[]),l=l.map(a=>({...a,created_at:a.created_at?this.formatDate(a.created_at):"-"})),console.log(" Final preview data:",l),{data:l,columns:r,totalRecords:l.length||0}}catch(s){throw console.error(" Error getting user details preview:",s),s}}async downloadUserDetailsReport(o){const{entityId:s,entityIds:n,role:r,status:l,dateRange:a="monthly",startDate:d,endDate:i,format:c,isSuperAdmin:u}=o;if(!s&&!n||!c)throw new Error("Entity ID (or IDs) and format are required");const p=new URLSearchParams({date_range:a,format:c});if(r&&r!=="all"){const f=r==="tenant"?"templeadmin":r;p.append("role",f)}l&&l!=="all"&&p.append("status",l),a==="custom"&&d&&i&&(p.append("start_date",d),p.append("end_date",i));let w;u?n&&n.length>1?w=`/superadmin/reports/user-details?${p}&tenants=${n.join(",")}`:w=`/superadmin/reports/user-details?${p}&tenant_id=${s}`:w=`/superadmin/reports/user-details?${p}&tenant_id=${s}`;try{return console.log(" Downloading user details report:",w),await this.downloadReport(w,{format:c},"user_details_report",async()=>u?[n&&n.length>1?`/superadmin/user-details/report?${p}&tenants=${n.join(",")}`:`/superadmin/user-details/report?${p}&tenant_id=${s}`,n&&n.length>1?`/superadmin/entities/reports/user-details?${p}&tenants=${n.join(",")}`:`/entities/${s}/reports/user-details?${p}`]:null)}catch(f){throw console.error("Error downloading user details report:",f),f}}async getActivitiesReport(o){const{entityId:s,entityIds:n,type:r,dateRange:l="weekly",startDate:a,endDate:d,isSuperAdmin:i,tenantId:c,singleTemple:u}=o;if(!s&&!n||!r)throw new Error("Entity ID (or IDs) and type are required");const p=new URLSearchParams({type:r,date_range:l});l==="custom"&&a&&d&&(p.append("start_date",a),p.append("end_date",d));let w,f;if(i)try{u&&s?(w=`/entities/${s}/reports/activities?${p}`,console.log(" Single temple API call (direct entity endpoint):",{url:w,templeId:s,type:r,note:"Using /entities/{id} for single temple"})):n&&n.length>1?(w=`/superadmin/reports/activities?${p}&tenants=${n.join(",")}`,console.log(" Multi-tenant API call:",{url:w,tenantCount:n.length})):c?(w=`/superadmin/tenants/${c}/reports/activities?${p}`,console.log(" All temples for tenant:",{url:w,tenantId:c})):(w=`/superadmin/tenants/${s}/reports/activities?${p}`,console.log(" All temples fallback:",{url:w,entityId:s})),console.log(" Making primary activities API request:",w),f=await pe.get(w)}catch(v){console.log("Primary API endpoint failed, trying fallback:",v.message);try{u&&s?(w=`/superadmin/activities/report?${p}&entity_id=${s}`,c&&(w+=`&tenant_id=${c}`),console.log(" Fallback 1 (single temple):",w)):n&&n.length>1?(w=`/superadmin/activities/report?${p}&tenants=${n.join(",")}`,console.log(" Fallback 1 (multi-tenant):",w)):(w=`/superadmin/activities/report?${p}&tenant_id=${c||s}`,console.log(" Fallback 1 (all temples):",w)),f=await pe.get(w)}catch(N){console.log("Second fallback failed, trying third pattern:",N.message),u&&s&&c?w=`/superadmin/tenants/${c}/reports/activities?${p}&entity_id=${s}`:n&&n.length>1?w=`/superadmin/entities/reports/activities?${p}&tenants=${n.join(",")}`:w=`/entities/${s}/reports/activities?${p}`,console.log(" Fallback 2:",w),f=await pe.get(w)}}else w=`/entities/${s}/reports/activities?${p}`,console.log(" Making activities API request:",w),f=await pe.get(w);return console.log(" Activities API Response received:",f),f}async downloadActivitiesReport(o){const{entityId:s,entityIds:n,type:r,format:l,dateRange:a="weekly",startDate:d,endDate:i,isSuperAdmin:c,tenantId:u,singleTemple:p}=o;if(!s&&!n||!r||!l)throw new Error("Entity ID (or IDs), type, and format are required");const w=new URLSearchParams({type:r,date_range:a,format:l});a==="custom"&&d&&i&&(w.append("start_date",d),w.append("end_date",i));let f;c?p&&s?(f=`/entities/${s}/reports/activities?${w}`,console.log(" Single temple download (direct entity endpoint):",{url:f,templeId:s,type:r})):n&&n.length>1?f=`/superadmin/reports/activities?${w}&tenants=${n.join(",")}`:u?f=`/superadmin/tenants/${u}/reports/activities?${w}`:f=`/superadmin/tenants/${s}/reports/activities?${w}`:f=`/entities/${s}/reports/activities?${w}`;try{return await this.downloadReport(f,{format:l},`${r}_report`,async()=>{if(c){const v=[];return p&&s?v.push(`/superadmin/activities/report?${w}&entity_id=${s}${u?`&tenant_id=${u}`:""}`,`/superadmin/tenants/${u||s}/reports/activities?${w}&entity_id=${s}`):n&&n.length>1?v.push(`/superadmin/activities/report?${w}&tenants=${n.join(",")}`,`/superadmin/entities/reports/activities?${w}&tenants=${n.join(",")}`):v.push(`/superadmin/activities/report?${w}&tenant_id=${u||s}`,`/entities/${s}/reports/activities?${w}`),v}return null})}catch(v){throw console.error("Error downloading activities report:",v),v}}async getReportPreview(o){try{const s=await this.getActivitiesReport(o);console.log(" API Response Structure:",s),console.log(" Response Data:",s.data);let n=s.data;n&&n.data&&(n=n.data),n||(console.warn(" No data found in response"),n={});let r=[],l=[];switch(o.type){case"events":l=[{key:"title",label:"Event Title"},{key:"event_type",label:"Type"},{key:"event_date",label:"Date"},{key:"location",label:"Location"},{key:"created_by",label:"Created By"}],r=n.events||n.Events||[];break;case"sevas":l=[{key:"name",label:"Seva Name"},{key:"seva_type",label:"Type"},{key:"price",label:"Price"},{key:"date",label:"Date"},{key:"status",label:"Status"}],r=n.sevas||n.Sevas||[];break;case"bookings":l=[{key:"seva_name",label:"Seva"},{key:"devotee_name",label:"Devotee"},{key:"devotee_phone",label:"Phone"},{key:"booking_time",label:"Booking Time"},{key:"status",label:"Status"}],r=n.bookings||n.Bookings||[];break;case"donations":l=[{key:"donor_name",label:"Donor Name"},{key:"amount",label:"Amount"},{key:"donation_type",label:"Type"},{key:"payment_method",label:"Payment Method"},{key:"status",label:"Status"},{key:"donation_date",label:"Donation Date"}],r=n.donations||n.Donations||[];break}return console.log(" Extracted preview data:",r),console.log(" Columns:",l),{data:r,columns:l,totalRecords:r.length}}catch(s){throw console.error(" Error getting report preview:",s),s}}validateReportParams(o){const s=[];if(!o.entityId&&!o.entityIds&&s.push("Entity ID or Entity IDs are required"),(!o.type||!["events","sevas","bookings","donations","temple-registered","devotee-birthdays"].includes(o.type))&&s.push("Valid report type is required (events, sevas, bookings, donations, temple-registered, devotee-birthdays)"),o.type==="temple-registered"){const n=["approved","rejected","pending"];o.status&&!n.includes(o.status)&&s.push(`Invalid status filter. Allowed values: ${n.join(", ")}`)}return o.dateRange==="custom"&&(!o.startDate||!o.endDate?s.push("Start date and end date are required for custom date range"):new Date(o.startDate)>new Date(o.endDate)&&s.push("Start date must be before end date")),o.format&&!["pdf","csv","excel"].includes(o.format)&&s.push("Invalid format specified"),{isValid:s.length===0,errors:s}}async getTempleRegisteredReport(o){const{entityId:s,entityIds:n,status:r,dateRange:l="weekly",startDate:a,endDate:d,isSuperAdmin:i}=o;if(!s&&!n)throw new Error("Entity ID or Entity IDs are required");const c=new URLSearchParams({date_range:l});r&&c.append("status",r),l==="custom"&&a&&d&&(c.append("start_date",a),c.append("end_date",d));let u,p;if(i)try{n&&n.length>1?u=`/superadmin/reports/temple-registered?${c}&tenants=${n.join(",")}`:u=`/superadmin/tenants/${s}/reports/temple-registered?${c}`,console.log("Making primary API request:",u),p=await pe.get(u)}catch(w){console.log("Primary API endpoint failed, trying fallback:",w.message);try{n&&n.length>1?u=`/superadmin/temple-registered/report?${c}&tenants=${n.join(",")}`:u=`/superadmin/temple-registered/report?${c}&tenant_id=${s}`,console.log("Making fallback API request:",u),p=await pe.get(u)}catch(f){console.log("Second fallback failed, trying third pattern:",f.message),n&&n.length>1?u=`/superadmin/entities/reports/temple-registered?${c}&tenants=${n.join(",")}`:u=`/entities/${s}/reports/temple-registered?${c}`,console.log("Making third fallback API request:",u),p=await pe.get(u)}}else u=`/entities/${s}/reports/temple-registered?${c}`,console.log("Making API request:",u),p=await pe.get(u);return p}async downloadTempleRegisteredReport(o){const{entityId:s,entityIds:n,templeId:r,status:l,dateRange:a="weekly",startDate:d,endDate:i,format:c,isSuperAdmin:u}=o;if(!s&&!n||!c)throw new Error("Entity ID (or IDs) and format are required");console.log(" Temple Register Report Params:",{entityId:s,entityIds:n,templeId:r,isSuperAdmin:u,format:c});const p=new URLSearchParams({date_range:a,format:c});l&&p.append("status",l),a==="custom"&&d&&i&&(p.append("start_date",d),p.append("end_date",i));const w={Accept:this.getAcceptHeader(c),"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("auth_token")}`,"Cache-Control":"no-cache"};!u&&s&&(w["X-Tenant-ID"]=s.toString()),u&&n&&n.length>0?w["X-Tenant-ID"]=n[0].toString():u&&s&&(w["X-Tenant-ID"]=s.toString()),console.log(" Using headers:",JSON.stringify(w));const f=[];if(!u)r==="all"?f.push(`/entities/all/reports/temple-registered?${p}`):f.push(`/entities/${r}/reports/temple-registered?${p}`);else if(n&&n.length>0&&r==="all"){const $=n.join(",");f.push(`/superadmin/reports/all-temples?${p}&tenants=${$}`,`/superadmin/reports/temple-registered/all?${p}&tenants=${$}`),f.push(`/superadmin/reports/temple-registered?${p}&tenants=${$}&all_temples=true`,`/superadmin/reports/temple-registered?${p}&tenants=${$}&temple_id=all`),f.push(`/superadmin/temple-registered?${p}&tenant_ids=${$}&all=true`),f.push(`/superadmin/reports/temple-registered?${p}&tenants=${$}`);for(const y of n)f.push(`/superadmin/tenants/${y}/reports/temple-registered?${p}&include_all=true`)}else r==="all"?f.push(`/superadmin/tenants/${s}/reports/temple-registered?${p}&all=true`,`/superadmin/tenants/${s}/reports/temple-registered?${p}&temple_id=all`,`/superadmin/tenants/${s}/reports/temple-registered?${p}`):f.push(`/superadmin/tenants/${s}/reports/temple-registered?${p}&temple_id=${r}`,`/superadmin/tenants/${s}/temples/${r}/reports?${p}`);f.push(`/reports/temple-registered?${p}`,`/reports/temples?${p}`,`/entities/all/reports/temple-registered?${p}`),console.log(" URLs to try:",f);let v=null,N="";for(let $=0;$<f.length;$++){const y=f[$];console.log(` Attempt ${$+1}/${f.length}: ${y}`);try{if(v=await fetch("/api/v1"+y,{method:"GET",headers:w}),v.ok){console.log(` Success with URL: ${y}`),N=y;break}else{const b=await v.text().catch(()=>"Unable to get error text");console.log(` URL failed with status ${v.status}: ${b}`)}}catch(b){console.log(` Error with URL: ${b.message}`)}}if(!v||!v.ok)throw new Error("All download attempts failed. Please check your permissions or contact support.");const A=await v.blob();if(A.size===0)throw console.error(" Success but empty file (0 bytes) from URL:",N),new Error("No data available for the selected criteria. The server returned an empty file.");console.log(` Successfully downloaded ${A.size} bytes of data from URL: ${N}`);const I=`temple_register_report_${new Date().toISOString().split("T")[0]}.${c}`,C=window.URL.createObjectURL(A),j=document.createElement("a");return j.href=C,j.setAttribute("download",I),document.body.appendChild(j),j.click(),document.body.removeChild(j),setTimeout(()=>window.URL.revokeObjectURL(C),1e3),{success:!0,filename:I,size:A.size}}async getTempleRegisteredPreview(o){try{let n=(await this.getTempleRegisteredReport(o)).data;n&&n.data&&(n=n.data);const r=[{key:"temple_name",label:"Temple Name"},{key:"registration_date",label:"Registration Date"},{key:"location",label:"Location"},{key:"status",label:"Status"}],l=n.temples||n||[];return{data:l,columns:r,totalRecords:l.length||0}}catch(s){throw console.error("Error getting temple-registered preview:",s),s}}async getDevoteeBirthdaysReport(o){const{entityId:s,entityIds:n,dateRange:r="monthly",startDate:l,endDate:a,isSuperAdmin:d,tenantId:i,singleTemple:c}=o;if(!s&&!n)throw new Error("Entity ID or Entity IDs are required");const u=new URLSearchParams({date_range:r});if(r==="custom"&&l&&a)u.append("start_date",l),u.append("end_date",a);else{const f=new Date;let v,N;switch(r){case"weekly":v=new Date,N=new Date,N.setDate(N.getDate()+7);break;case"monthly":v=new Date,N=new Date,N.setDate(N.getDate()+30);break;case"yearly":v=new Date(f.getFullYear(),0,1),N=new Date(f.getFullYear(),11,31);break;default:v=new Date,N=new Date,N.setDate(N.getDate()+30)}u.append("start_date",v.toISOString().split("T")[0]),u.append("end_date",N.toISOString().split("T")[0])}let p,w;if(d)try{c&&s?(p=`/entities/${s}/reports/devotee-birthdays?${u}`,console.log(" Single temple API call (direct entity endpoint):",{url:p,templeId:s,note:"Using /entities/{id} for single temple"})):n&&n.length>1?(p=`/superadmin/reports/devotee-birthdays?${u}&tenants=${n.join(",")}`,console.log(" Multi-tenant API call:",{url:p,tenantCount:n.length})):i?(p=`/superadmin/tenants/${i}/reports/devotee-birthdays?${u}`,console.log(" All temples for tenant:",{url:p,tenantId:i})):(p=`/superadmin/tenants/${s}/reports/devotee-birthdays?${u}`,console.log(" All temples fallback:",{url:p,entityId:s})),console.log(" Making primary devotee birthdays API request:",p),w=await pe.get(p)}catch(f){console.log("Primary API endpoint failed, trying fallback:",f.message);try{c&&s?(p=`/superadmin/devotee-birthdays/report?${u}&entity_id=${s}`,i&&(p+=`&tenant_id=${i}`),console.log(" Fallback 1 (single temple):",p)):n&&n.length>1?(p=`/superadmin/devotee-birthdays/report?${u}&tenants=${n.join(",")}`,console.log(" Fallback 1 (multi-tenant):",p)):(p=`/superadmin/devotee-birthdays/report?${u}&tenant_id=${i||s}`,console.log(" Fallback 1 (all temples):",p)),w=await pe.get(p)}catch(v){console.log("Second fallback failed, trying third pattern:",v.message),c&&s&&i?p=`/superadmin/tenants/${i}/reports/devotee-birthdays?${u}&entity_id=${s}`:n&&n.length>1?p=`/superadmin/entities/reports/devotee-birthdays?${u}&tenants=${n.join(",")}`:p=`/entities/${s}/reports/devotee-birthdays?${u}`,console.log(" Fallback 2:",p),w=await pe.get(p)}}else if(console.log("----------->ENTITYID",s),s==="all"){if(!o.tenantId)throw new Error('Tenant ID is required when entityId is "all"');if(o.templeIds&&o.templeIds.length>0){console.log(" Fetching birthdays for multiple temples:",o.templeIds);const v=[];for(const N of o.templeIds)try{const A=`/entities/${N}/reports/devotee-birthdays?${u}`;console.log(" Fetching for temple:",N,A);let I=(await pe.get(A)).data;I&&I.data&&(I=I.data);let C=[];Array.isArray(I)?C=I:I.devotees?C=I.devotees:I.birthdays?C=I.birthdays:I.devotee_birthdays&&(C=I.devotee_birthdays),v.push(...C)}catch(A){console.warn(`Failed to fetch birthdays for temple ${N}:`,A.message)}w={data:{data:v,devotees:v,total:v.length}}}else console.warn('No templeIds provided for "all" selection, trying /entities/all endpoint'),p=`/entities/all/reports/devotee-birthdays?${u}`,console.log(" Making devotee birthdays API request:",p),w=await pe.get(p)}else p=`/entities/${s}/reports/devotee-birthdays?${u}`,console.log(" Making devotee birthdays API request:",p),w=await pe.get(p);return console.log(" Devotee birthdays API Response received:",w),w}async downloadDevoteeBirthdaysReport(o){const{entityId:s,entityIds:n,format:r,dateRange:l="monthly",startDate:a,endDate:d,isSuperAdmin:i,tenantId:c,singleTemple:u}=o;if(!s&&!n||!r)throw new Error("Entity ID (or IDs) and format are required");const p=new URLSearchParams({date_range:l,format:r});if(l==="custom"&&a&&d)p.append("start_date",a),p.append("end_date",d);else{const f=new Date;let v,N;switch(l){case"weekly":v=new Date,N=new Date,N.setDate(N.getDate()+7);break;case"monthly":v=new Date,N=new Date,N.setDate(N.getDate()+30);break;case"yearly":v=new Date(f.getFullYear(),0,1),N=new Date(f.getFullYear(),11,31);break;default:v=new Date,N=new Date,N.setDate(N.getDate()+30)}p.append("start_date",v.toISOString().split("T")[0]),p.append("end_date",N.toISOString().split("T")[0])}let w;if(i)u&&s?(w=`/entities/${s}/reports/devotee-birthdays?${p}`,console.log(" Single temple download (direct entity endpoint):",{url:w,templeId:s})):n&&n.length>1?w=`/superadmin/reports/devotee-birthdays?${p}&tenants=${n.join(",")}`:c?w=`/superadmin/tenants/${c}/reports/devotee-birthdays?${p}`:w=`/superadmin/tenants/${s}/reports/devotee-birthdays?${p}`;else if(s!=="all")w=`/entities/${s}/reports/devotee-birthdays?${p}`;else if(o.templeIds&&o.templeIds.length>0){const f=o.templeIds[0];console.log(` Using first temple (${f}) for 'all' download`),w=`/entities/${f}/reports/devotee-birthdays?${p}`}else console.warn('No templeIds provided for "all" download, trying /entities/all'),w=`/entities/all/reports/devotee-birthdays?${p}`;try{return await this.downloadReport(w,{format:r},"devotee_birthdays_report",async()=>{if(i){const f=[];return u&&s?f.push(`/superadmin/devotee-birthdays/report?${p}&entity_id=${s}${c?`&tenant_id=${c}`:""}`,`/superadmin/tenants/${c||s}/reports/devotee-birthdays?${p}&entity_id=${s}`):n&&n.length>1?f.push(`/superadmin/devotee-birthdays/report?${p}&tenants=${n.join(",")}`,`/superadmin/entities/reports/devotee-birthdays?${p}&tenants=${n.join(",")}`):f.push(`/superadmin/devotee-birthdays/report?${p}&tenant_id=${c||s}`,`/entities/${s}/reports/devotee-birthdays?${p}`),f}return null})}catch(f){throw console.error("Error downloading devotee-birthdays report:",f),f}}async getDevoteeBirthdaysPreview(o){try{const s=await this.getDevoteeBirthdaysReport(o);console.log(" Devotee birthdays preview response:",s);let n=s.data;n&&n.data&&(n=n.data),console.log(" Processed response data:",n);const r=[{key:"full_name",label:"Full Name"},{key:"date_of_birth",label:"Date of Birth"},{key:"age",label:"Age"},{key:"gender",label:"Gender"},{key:"phone",label:"Phone"},{key:"email",label:"Email"},{key:"temple_name",label:"Temple"},{key:"upcoming_birthday",label:"Upcoming Birthday"}];let l=[];return Array.isArray(n)?l=n:n&&n.devotees?l=n.devotees:n&&n.birthdays?l=n.birthdays:n&&n.devotee_birthdays?l=n.devotee_birthdays:n&&Array.isArray(n.data)?l=n.data:(console.warn(" No valid devotee birthdays data found in response:",n),l=[]),l=l.map(a=>({...a,date_of_birth:a.date_of_birth?this.formatDate(a.date_of_birth):"-",upcoming_birthday:a.upcoming_birthday?this.formatDate(a.upcoming_birthday):"-"})),console.log(" Final preview data:",l),{data:l,columns:r,totalRecords:l.length||0}}catch(s){throw console.error(" Error getting devotee-birthdays preview:",s),s}}async getDevoteeList(o){console.trace(),console.log("getDevoteeList called with params:",o);const{entityId:s,entityIds:n,status:r="all",isSuperAdmin:l,tenantId:a,singleTemple:d}=o;if(!s&&!n)throw new Error("Entity ID or Entity IDs are required");const i=["all","active","inactive"];if(!i.includes(r))throw new Error(`Invalid status. Allowed values: ${i.join(", ")}`);const c=new URLSearchParams;r!=="all"&&c.append("status",r);let u,p;if(console.log("Role:isSuperAdmin",l),l)try{d&&s?(u=`/entities/${s}/reports/devotee-list?${c}`,console.log(" Single temple API call (direct entity endpoint):",{url:u,templeId:s,note:"Using /entities/{id} for single temple"})):n&&n.length>1?(u=`/superadmin/reports/devotee-list?${c}&tenants=${n.join(",")}`,console.log(" Multi-tenant API call:",{url:u,tenantCount:n.length})):a?(u=`/superadmin/tenants/${a}/reports/devotee-list?${c}`,console.log(" All temples for tenant:",{url:u,tenantId:a})):(u=`/superadmin/tenants/${s}/reports/devotee-list?${c}`,console.log(" All temples fallback:",{url:u,entityId:s})),console.log(" Making primary devotee list API request:",u),p=await pe.get(u)}catch(w){console.log("Primary API endpoint failed, trying fallback:",w.message);try{d&&s?(u=`/superadmin/devotee-list/report?${c}&entity_id=${s}`,a&&(u+=`&tenant_id=${a}`),console.log(" Fallback 1 (single temple):",u)):n&&n.length>1?(u=`/superadmin/devotee-list/report?${c}&tenants=${n.join(",")}`,console.log(" Fallback 1 (multi-tenant):",u)):(u=`/superadmin/devotee-list/report?${c}&tenant_id=${a||s}`,console.log(" Fallback 1 (all temples):",u)),p=await pe.get(u)}catch(f){console.log("Second fallback failed, trying third pattern:",f.message),d&&s&&a?u=`/superadmin/tenants/${a}/reports/devotee-list?${c}&entity_id=${s}`:n&&n.length>1?u=`/superadmin/entities/reports/devotees?${c}&tenants=${n.join(",")}`:u=`/entities/${s}/reports/devotees?${c}`,console.log(" Fallback 2:",u),p=await pe.get(u)}}else console.log("----------->ENTITYID",s),s!=="all"?u=`/entities/${s}/reports/devotee-list?${c}`:u=`/entities/all/reports/devotee-list?${c}`,console.log(" Making devotee list API request:",u),p=await pe.get(u);return console.log(" Devotee list API Response received:",p),p}async downloadDevoteeListReport(o){const{entityId:s,entityIds:n,status:r="all",format:l,isSuperAdmin:a,tenantId:d,singleTemple:i}=o;if(!s&&!n||!l)throw new Error("Entity ID (or IDs) and format are required");const c=new URLSearchParams({format:l});r!=="all"&&c.append("status",r);let u;a?i&&s?(u=`/entities/${s}/reports/devotee-list?${c}`,console.log(" Single temple download (direct entity endpoint):",{url:u,templeId:s})):n&&n.length>1?u=`/superadmin/reports/devotee-list?${c}&tenants=${n.join(",")}`:d?u=`/superadmin/tenants/${d}/reports/devotee-list?${c}`:u=`/superadmin/tenants/${s}/reports/devotee-list?${c}`:s!=="all"?(console.log("-->entityId1",s),u=`/entities/${s}/reports/devotee-list?${c}`):(console.log("-->>entityId2",s),u=`/entities/all/reports/devotee-list?${c}`);try{return await this.downloadReport(u,{format:l},`devotee_list_${r}_report`,async()=>{if(a){const p=[];return i&&s?p.push(`/superadmin/devotee-list/report?${c}&entity_id=${s}${d?`&tenant_id=${d}`:""}`,`/superadmin/tenants/${d||s}/reports/devotee-list?${c}&entity_id=${s}`):n&&n.length>1?p.push(`/superadmin/devotee-list/report?${c}&tenants=${n.join(",")}`,`/superadmin/entities/reports/devotees?${c}&tenants=${n.join(",")}`):p.push(`/superadmin/devotee-list/report?${c}&tenant_id=${d||s}`,`/entities/${s}/reports/devotees?${c}`),p}return null})}catch(p){throw console.error("Error downloading devotee list report:",p),p}}async getDevoteeListPreview(o){try{let n=(await this.getDevoteeList(o)).data;n&&n.data&&(n=n.data);const r=n.devotees||n||[];return{data:r,columns:[{key:"full_name",label:"Full Name"},{key:"phone",label:"Phone"},{key:"email",label:"Email"},{key:"status",label:"Status"},{key:"registration_date",label:"Registration Date"},{key:"last_login",label:"Last Login"}],totalRecords:r.length||0}}catch(s){throw console.error("Error getting devotee list preview:",s),s}}async getDevoteeProfile(o){const{entityId:s,entityIds:n,isSuperAdmin:r,tenantId:l,singleTemple:a}=o;if(!s&&!n)throw new Error("Entity ID or Entity IDs are required");let d,i;if(r)try{a&&s?(d=`/entities/${s}/reports/devotee-profile`,console.log(" Single temple API call (direct entity endpoint):",{url:d,templeId:s})):n&&n.length>1?d=`/superadmin/reports/devotee-profile?tenants=${n.join(",")}`:l?d=`/superadmin/tenants/${l}/reports/devotee-profile`:d=`/superadmin/tenants/${s}/reports/devotee-profile`,console.log(" Making primary devotee profile API request:",d),i=await pe.get(d)}catch(c){console.log("Primary API endpoint failed, trying fallback:",c.message);try{a&&s?(d=`/superadmin/devotee-profile/report?entity_id=${s}`,l&&(d+=`&tenant_id=${l}`)):n&&n.length>1?d=`/superadmin/devotee-profile/report?tenants=${n.join(",")}`:d=`/superadmin/devotee-profile/report?tenant_id=${l||s}`,console.log(" Making fallback devotee profile API request:",d),i=await pe.get(d)}catch(u){console.log("Second fallback failed, trying third pattern:",u.message),a&&s&&l?d=`/superadmin/tenants/${l}/reports/devotee-profile?entity_id=${s}`:n&&n.length>1?d=`/superadmin/entities/reports/devotee-profile?tenants=${n.join(",")}`:d=`/entities/${s}/reports/devotee-profile`,console.log(" Making third fallback devotee profile API request:",d),i=await pe.get(d)}}else d=`/entities/${s}/reports/devotee-profile`,console.log(" Making devotee profile API request:",d),i=await pe.get(d);return console.log(" Devotee profile API Response received:",i),i}async downloadDevoteeProfileReport(o){const{entityId:s,entityIds:n,format:r,isSuperAdmin:l,tenantId:a,singleTemple:d}=o;if(!s&&!n||!r)throw new Error("Entity ID (or IDs) and format are required");const i=new URLSearchParams({format:r});let c;l?d&&s?(c=`/entities/${s}/reports/devotee-profile?${i}`,console.log(" Single temple download (direct entity endpoint):",{url:c,templeId:s})):n&&n.length>1?c=`/superadmin/reports/devotee-profile?${i}&tenants=${n.join(",")}`:a?c=`/superadmin/tenants/${a}/reports/devotee-profile?${i}`:c=`/superadmin/tenants/${s}/reports/devotee-profile?${i}`:c=`/entities/${s}/reports/devotee-profile?${i}`;try{return await this.downloadReport(c,{format:r},"devotee_profile_report",async()=>{if(l){const u=[];return d&&s?u.push(`/superadmin/devotee-profile/report?${i}&entity_id=${s}${a?`&tenant_id=${a}`:""}`,`/superadmin/tenants/${a||s}/reports/devotee-profile?${i}&entity_id=${s}`):n&&n.length>1?u.push(`/superadmin/devotee-profile/report?${i}&tenants=${n.join(",")}`,`/superadmin/entities/reports/devotee-profile?${i}&tenants=${n.join(",")}`):u.push(`/superadmin/devotee-profile/report?${i}&tenant_id=${a||s}`,`/entities/${s}/reports/devotee-profile?${i}`),u}return null})}catch(u){throw console.error("Error downloading devotee profile report:",u),u}}async getDevoteeProfilePreview(o){try{let n=(await this.getDevoteeProfile(o)).data;return n&&n.data&&(n=n.data),n.profile||n||{}}catch(s){throw console.error("Error getting devotee profile preview:",s),s}}formatDate(o){if(!o)return"-";try{const s=new Date(o);return isNaN(s.getTime())?"-":s.toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})}catch{return"-"}}async getAuditLogsReport(o){const{entityId:s,entityIds:n,dateRange:r="weekly",startDate:l,endDate:a,userId:d,actionType:i,isSuperAdmin:c}=o;if(!s&&!n)throw new Error("Entity ID or Entity IDs are required");const u=new URLSearchParams({date_range:r});let p,w;const f=new Date;if(r==="custom"&&l&&a)p=l,w=a;else{w=f.toISOString().split("T")[0];const A=new Date(f);switch(r){case"daily":break;case"weekly":A.setDate(f.getDate()-7);break;case"monthly":A.setMonth(f.getMonth()-1);break;default:A.setDate(f.getDate()-7)}p=A.toISOString().split("T")[0]}u.set("start_date",p),u.set("end_date",w),d&&u.set("user_id",d),i&&u.set("action_type",i);let v,N;if(c)try{n&&n.length>1?v=`/superadmin/reports/audit-logs?${u}&tenants=${n.join(",")}`:v=`/superadmin/tenants/${s}/reports/audit-logs?${u}`,console.log(" Making primary audit logs API request:",v),N=await pe.get(v)}catch(A){console.log("Primary API endpoint failed, trying fallback:",A.message);try{n&&n.length>1?v=`/superadmin/audit-logs/report?${u}&tenants=${n.join(",")}`:v=`/superadmin/audit-logs/report?${u}&tenant_id=${s}`,console.log(" Making fallback audit logs API request:",v),N=await pe.get(v)}catch(F){console.log("Second fallback failed, trying third pattern:",F.message),n&&n.length>1?v=`/superadmin/entities/reports/audit-logs?${u}&tenants=${n.join(",")}`:v=`/entities/${s}/reports/audit-logs?${u}`,console.log(" Making third fallback audit logs API request:",v),N=await pe.get(v)}}else v=`/entities/${s}/reports/audit-logs?${u}`,console.log(" Making audit logs API request:",v),N=await pe.get(v);return console.log(" Audit logs API Response received:",N),N}async downloadAuditLogsReport(o){const{entityId:s,entityIds:n,format:r="csv",dateRange:l="weekly",startDate:a,endDate:d,userId:i,actionType:c,isSuperAdmin:u}=o;if(!s&&!n||!r)throw new Error("Entity ID (or IDs) and format are required");const p=new URLSearchParams({date_range:l,format:r});let w,f;const v=new Date;if(l==="custom"&&a&&d)w=a,f=d;else{f=v.toISOString().split("T")[0];const A=new Date(v);switch(l){case"daily":break;case"weekly":A.setDate(v.getDate()-7);break;case"monthly":A.setMonth(v.getMonth()-1);break;default:A.setDate(v.getDate()-7)}w=A.toISOString().split("T")[0]}p.set("start_date",w),p.set("end_date",f),i&&p.set("user_id",i),c&&p.set("action_type",c);let N;u?n&&n.length>1?N=`/superadmin/reports/audit-logs?${p}&tenants=${n.join(",")}`:N=`/superadmin/tenants/${s}/reports/audit-logs?${p}`:N=`/entities/${s}/reports/audit-logs?${p}`;try{return await this.downloadReport(N,{format:r},"audit_logs_report",async()=>u?[n&&n.length>1?`/superadmin/audit-logs/report?${p}&tenants=${n.join(",")}`:`/superadmin/audit-logs/report?${p}&tenant_id=${s}`,n&&n.length>1?`/superadmin/entities/reports/audit-logs?${p}&tenants=${n.join(",")}`:`/entities/${s}/reports/audit-logs?${p}`]:null)}catch(A){throw console.error(" Error downloading audit logs report:",A),A}}async getAuditLogsPreview(o){try{const s=await this.getAuditLogsReport(o);console.log(" Audit logs preview response:",s);let n=s.data;n&&n.data&&(n=n.data),console.log(" Processed audit logs data:",n);const r=[{key:"timestamp",label:"Timestamp"},{key:"user_name",label:"User"},{key:"action_type",label:"Action"},{key:"resource_type",label:"Resource Type"},{key:"resource_id",label:"Resource ID"},{key:"description",label:"Description"},{key:"ip_address",label:"IP Address"},{key:"user_agent",label:"User Agent"}];let l=[];return Array.isArray(n)?l=n:n&&n.audit_logs?l=n.audit_logs:n&&n.logs?l=n.logs:n&&Array.isArray(n.data)?l=n.data:(console.warn(" No valid audit logs data found in response:",n),l=[]),l=l.map(a=>({...a,timestamp:a.timestamp?this.formatDateTime(a.timestamp):"-",description:a.description||a.details||"-",user_agent:a.user_agent?this.truncateText(a.user_agent,50):"-"})),console.log(" Final audit logs preview data:",l),{data:l,columns:r,totalRecords:l.length||0}}catch(s){throw console.error(" Error getting audit logs preview:",s),s}}formatDateTime(o){if(!o)return"-";try{return new Date(o).toLocaleString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit"})}catch{return console.warn("Invalid datetime format:",o),o}}truncateText(o,s){return!o||o.length<=s?o:o.substring(0,s)+"..."}async downloadReport(o,s,n,r=null){try{console.log(" Making download request:",o),console.log(" Request parameters:",s);try{const l=await pe.get(o,{responseType:"blob",headers:{Accept:this.getAcceptHeader(s.format),"Cache-Control":"no-cache"}});if(console.log(" Download response received:",{status:l.status,contentType:l.headers["content-type"],contentLength:l.headers["content-length"],contentDisposition:l.headers["content-disposition"]}),!l.data||l.data.size===0)throw new Error("Empty file received from server");const a=l.headers["content-type"];if(a!=null&&a.includes("text/html")||a!=null&&a.includes("application/json")){const w=await l.data.text();throw console.error(" Server returned error response:",w),new Error(`Server error: ${w.substring(0,200)}`)}let d=`${n}.${s.format}`;const i=l.headers["content-disposition"];if(i){const w=[/filename[^;=\n]*=\s*"([^"]+)"/i,/filename[^;=\n]*=\s*'([^']+)'/i,/filename[^;=\n]*=\s*([^;\n]+)/i,/filename\*=UTF-8''([^;\n]+)/i];for(const f of w){const v=i.match(f);if(v){d=decodeURIComponent(v[1].trim());break}}}const c=new Blob([l.data],{type:this.getBlobType(s.format)}),u=window.URL.createObjectURL(c),p=document.createElement("a");return p.href=u,p.setAttribute("download",d),p.style.display="none",document.body.appendChild(p),p.click(),document.body.removeChild(p),setTimeout(()=>{window.URL.revokeObjectURL(u)},1e3),console.log(" Download completed successfully"),{success:!0,filename:d,size:c.size,contentType:a}}catch(l){if(r){const a=await r();if(a&&a.length>0){console.log("Trying fallback URLs:",a);for(const d of a)try{console.log("Trying fallback URL:",d);const i=await pe.get(d,{responseType:"blob",headers:{Accept:this.getAcceptHeader(s.format),"Cache-Control":"no-cache"}});let c=`${n}.${s.format}`;const u=i.headers["content-disposition"];if(u){const v=[/filename[^;=\n]*=\s*"([^"]+)"/i,/filename[^;=\n]*=\s*'([^']+)'/i,/filename[^;=\n]*=\s*([^;\n]+)/i,/filename\*=UTF-8''([^;\n]+)/i];for(const N of v){const A=u.match(N);if(A){c=decodeURIComponent(A[1].trim());break}}}const p=new Blob([i.data],{type:this.getBlobType(s.format)}),w=window.URL.createObjectURL(p),f=document.createElement("a");return f.href=w,f.setAttribute("download",c),f.style.display="none",document.body.appendChild(f),f.click(),document.body.removeChild(f),setTimeout(()=>{window.URL.revokeObjectURL(w)},1e3),console.log(" Download completed successfully with fallback URL"),{success:!0,filename:c,size:p.size,contentType:i.headers["content-type"]}}catch(i){console.error(" Fallback URL failed:",d,i)}}}throw l}}catch(l){if(console.error(" Error in download:",l),l.response){if(console.error("Error response details:",{status:l.response.status,statusText:l.response.statusText,contentType:l.response.headers["content-type"]}),l.response.data instanceof Blob)try{const a=await l.response.data.text();throw new Error(`Server error (${l.response.status}): ${a}`)}catch(a){console.error("Failed to read error response:",a)}throw new Error(`Server returned ${l.response.status}: ${l.response.statusText}`)}throw l}}formatDate(o){if(!o)return"-";try{return new Date(o).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})}catch{return console.warn("Invalid date format:",o),o}}getAcceptHeader(o){switch(o==null?void 0:o.toLowerCase()){case"pdf":return"application/pdf";case"excel":case"xlsx":return"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet";case"csv":return"text/csv";default:return"application/octet-stream"}}getBlobType(o){switch(o==null?void 0:o.toLowerCase()){case"pdf":return"application/pdf";case"excel":case"xlsx":return"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet";case"csv":return"text/csv";default:return"application/octet-stream"}}}const Ve=new M4,R4={class:"min-h-screen bg-gray-50"},P4={key:0,class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 pt-4"},N4={class:"bg-white shadow-sm border-b border-gray-200 rounded-2xl"},j4={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6"},L4={class:"flex items-center justify-between"},B4={class:"text-gray-600 mt-1"},U4={key:0,class:"text-indigo-600 font-medium"},F4={key:1,class:"text-indigo-600 font-medium"},V4={class:"flex items-center space-x-4"},O4={class:"bg-indigo-50 px-4 py-2 rounded-lg border border-indigo-200"},z4={class:"text-indigo-800 font-medium"},H4={class:"text-indigo-600 text-sm ml-2"},q4={key:1,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},G4={class:"bg-white rounded-lg p-6 flex items-center space-x-3"},J4={class:"text-gray-900 font-medium"},W4={key:2,class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 pt-4"},Y4={class:"bg-red-50 border border-red-200 rounded-md p-4"},K4={class:"flex"},X4={class:"ml-3"},Z4={class:"mt-1 text-sm text-red-700"},Q4={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},e5={class:"bg-white rounded-2xl shadow-sm border border-gray-200 overflow-hidden mb-8"},t5={class:"p-6"},o5={class:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6"},s5={class:"flex flex-wrap gap-2"},n5=["onClick","disabled"],r5={class:"flex flex-wrap gap-2"},a5=["onClick","disabled"],l5={key:0,class:"mb-6 p-4 bg-gray-50 border border-gray-200 rounded-lg"},i5={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},d5=["disabled","max"],u5=["disabled","min","max"],c5={class:"border-t border-gray-200 pt-6"},p5={class:"flex flex-col md:flex-row md:items-center md:justify-between"},m5={class:"flex items-center space-x-3"},g5={class:"relative"},f5=["disabled"],v5=["value"],h5=["disabled"],y5={key:0,class:"animate-spin -ml-1 mr-2 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},x5={key:1,class:"mr-2 h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},b5={class:"bg-white rounded-2xl shadow-sm border border-gray-200 overflow-hidden"},w5={class:"p-6"},k5={class:"flex flex-wrap gap-2"},_5={key:0,class:"inline-flex items-center px-3 py-1.5 rounded-full text-sm bg-indigo-100 text-indigo-800"},$5={class:"inline-flex items-center px-3 py-1.5 rounded-full text-sm bg-indigo-100 text-indigo-800"},S5={class:"inline-flex items-center px-3 py-1.5 rounded-full text-sm bg-indigo-100 text-indigo-800"},D5={key:0},C5={class:"inline-flex items-center px-3 py-1.5 rounded-full text-sm bg-indigo-100 text-indigo-800"},T5={class:"inline-flex items-center px-3 py-1.5 rounded-full text-sm bg-indigo-100 text-indigo-800"},E5={class:"inline-flex items-center px-3 py-1.5 rounded-full text-sm bg-green-100 text-green-800"},A5={__name:"TempleRegisterReport",setup(t){const o=tt();et();const s=Ot(),n=We(),{showToast:r}=Ue(),l=B("all"),a=B("weekly"),d=B("all"),i=B("pdf"),c=B(""),u=B(""),p=B(!1),w=B(""),f=B(!1),v=()=>{const H=new Date,O=new Date;O.setDate(H.getDate()-7),u.value=H.toISOString().split("T")[0],c.value=O.toISOString().split("T")[0]},N=[{label:"Weekly",value:"weekly"},{label:"Monthly",value:"monthly"},{label:"Yearly",value:"yearly"},{label:"Custom Range",value:"custom"}],A=[{label:"All Status",value:"all"},{label:"Approved",value:"approved"},{label:"Pending",value:"pending"},{label:"Rejected",value:"rejected"}],F=[{label:"PDF",value:"pdf"},{label:"CSV",value:"csv"},{label:"Excel",value:"excel"}],I=oe(()=>o.query.from==="superadmin"),C=oe(()=>o.query.tenants?o.query.tenants.split(",").filter(H=>H&&H.trim()):[]),j=oe(()=>{var O,ee;if(I.value&&C.value.length===1)return C.value[0];if(o.params.tenantId)return o.params.tenantId;if((O=n.user)!=null&&O.assignedTenantId)return n.user.assignedTenantId.toString();const H=localStorage.getItem("current_tenant_id");return H||(pe.defaults.headers.common["X-Tenant-ID"]?pe.defaults.headers.common["X-Tenant-ID"].toString():(ee=n.user)!=null&&ee.id?n.user.id.toString():(console.warn("No tenant ID found, using fallback"),null))}),$=oe(()=>new Date().toISOString().split("T")[0]),y=oe(()=>a.value==="custom"?c.value&&u.value&&new Date(c.value)<=new Date(u.value):!0);oe(()=>!s.temples||!Array.isArray(s.temples)?[]:s.temples.filter(H=>{if(!H)return!1;const O=(H.status||"").toLowerCase();return O==="approved"||O==="active"}));const b=H=>{a.value=H,R();const O=new Date,ee=new Date;H==="weekly"?ee.setDate(O.getDate()-7):H==="monthly"?ee.setDate(O.getDate()-30):H==="yearly"&&ee.setDate(O.getDate()-365),H!=="custom"&&(c.value=ee.toISOString().split("T")[0],u.value=O.toISOString().split("T")[0])},E=H=>{d.value=H,R()},R=()=>{w.value=""},M=H=>{if(H==="all")return"All Temples";const O=s.temples.find(ee=>{var ge;return((ge=ee==null?void 0:ee.id)==null?void 0:ge.toString())===(H==null?void 0:H.toString())});return O?O.name:"Unknown Temple"},G=H=>{const O=N.find(ee=>ee.value===H);return O?O.label:"Unknown"},U=H=>{const O=A.find(ee=>ee.value===H);return O?O.label:"Unknown"},_=H=>{const O=F.find(ee=>ee.value===H);return O?O.label:"Unknown"},k=H=>{if(!H)return"";try{return new Date(H).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})}catch{return H||""}},L=()=>{try{if(!j.value)throw new Error("No valid tenant ID available for report generation");const H={dateRange:a.value||"weekly",format:i.value||"pdf",startDate:c.value,endDate:u.value,isSuperAdmin:I.value,tenantId:j.value};return I.value&&C.value.length>1?(H.entityIds=C.value,H.entityId=C.value[0]):H.entityId=j.value,l.value==="all"?H.templeId="all":H.templeId=l.value.toString(),d.value!=="all"&&(H.status=d.value),console.log("Built temple register report params:",H),H}catch(H){throw console.error("Error building report params:",H),H}},z=async()=>{f.value=!0,w.value="";try{if(!j.value)throw new Error("No tenant ID available to fetch temples");if(console.log("Fetching temples for tenant ID:",j.value),s.clearTempleData(),I.value&&C.value.length>1){console.log(`Fetching temples for ${C.value.length} tenants:`,C.value);const H=[];for(const O of C.value)try{const ee=await q(O);H.push(...ee)}catch(ee){console.warn(`Failed to fetch temples for tenant ${O}:`,ee)}s.temples=H,console.log(`Set ${s.temples.length} total temples for ${C.value.length} tenants`)}else{const H=j.value;console.log(`Fetching temples for single tenant ${H}`);try{const O=await pe.get("/entities");let ee=[];O.data&&Array.isArray(O.data)?ee=O.data:O.data&&Array.isArray(O.data.data)&&(ee=O.data.data);const ge=ee.filter(de=>String(de.created_by)===String(H)||String(de.tenant_id)===String(H));console.log(`Filtered ${ge.length} temples from ${ee.length} total entities for tenant ${H}`),s.temples=ge.map(de=>lt.normalizeTempleData(de)),s.temples.length===0&&(console.warn(`No temples found for tenant ID ${H}`),w.value=`No temples found for tenant ID ${H}. Please verify tenant access.`)}catch(O){console.error("Error fetching entities directly:",O),console.log("Using store method as fallback");try{I.value?await s.fetchTemplesForSuperAdmin(H):await s.fetchTemples(H)}catch(ee){console.error("Fallback method also failed:",ee),w.value=`Failed to load temples: ${ee.message}`}}}console.log(`Successfully loaded ${s.temples.length} temples for tenant ${j.value}`)}catch(H){console.error("Error in fetchTemples:",H),w.value=`Failed to load temples: ${H.message}`,r(`Failed to load temple data: ${H.message}`,"error")}finally{f.value=!1}},q=async H=>{try{console.log(`Fetching temples for tenant ${H}`);const O=await pe.get("/entities");let ee=[];O.data&&Array.isArray(O.data)?ee=O.data:O.data&&Array.isArray(O.data.data)&&(ee=O.data.data);const ge=ee.filter(de=>String(de.created_by)===String(H)||String(de.tenant_id)===String(H));return console.log(`Found ${ge.length} temples for tenant ${H}`),ge.map(de=>lt.normalizeTempleData(de))}catch(O){return console.error(`Error fetching temples for tenant ${H}:`,O),[]}},K=async()=>{var H,O,ee,ge;if(!(p.value||!y.value)){R(),p.value=!0;try{if(!j.value)throw new Error("No valid tenant ID available for download");const de=L(),ie=Ve.validateReportParams({...de,type:"temple-registered"});if(!ie.isValid)throw new Error(ie.errors.join(", "));console.log("Downloading temple register report with params:",de);const me=await Ve.downloadTempleRegisteredReport(de);r(`Temple Register Report downloaded successfully: ${me.filename||"report.pdf"}`,"success")}catch(de){console.error("Download failed:",de);let ie="Failed to download report. Please try again.";(H=de.message)!=null&&H.toLowerCase().includes("network error")?ie="Network error. Please check your connection and try again.":((O=de.response)==null?void 0:O.status)===404?ie="Report endpoint not found. The report may not be available for this configuration.":((ee=de.response)==null?void 0:ee.status)===403?ie="You do not have permission to download this report.":((ge=de.response)==null?void 0:ge.status)===400?ie="Invalid report parameters. Please check your selections.":de.message&&(ie=de.message),w.value=ie,r(`Download failed: ${ie}`,"error")}finally{p.value=!1}}};return Me(async()=>{if(console.log("Temple Register Report mounted"),console.log("fromSuperadmin:",I.value),console.log("Tenant IDs from URL:",C.value),console.log("Effective tenant ID:",j.value),console.log("Route params:",o.params),console.log("User store:",n.user),console.log("Current X-Tenant-ID header:",pe.defaults.headers.common["X-Tenant-ID"]),v(),!j.value){w.value="No valid tenant ID found. Please check your access permissions.";return}s.clearTempleData(),await z()}),Oe(j,async(H,O)=>{H!==O&&H&&(console.log("Tenant ID changed, refetching temples:",H),s.clearTempleData(),await z())}),Oe(()=>o.params.tenantId,async(H,O)=>{H!==O&&H&&(console.log("Route tenant ID changed:",H),s.clearTempleData(),await z())}),Oe(()=>o.query.tenants,async(H,O)=>{H!==O&&H&&(console.log("Query tenants changed:",H),s.clearTempleData(),await z(),l.value="all")}),(H,O)=>{var ge;const ee=Ze("router-link");return m(),g("div",R4,[I.value?(m(),g("div",P4,[le(ee,{to:"/superadmin/reports",class:"inline-flex items-center px-4 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition-colors"},{default:ye(()=>[...O[3]||(O[3]=[e("svg",{class:"mr-2 h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 19l-7-7m0 0l7-7m-7 7h18"})],-1),te(" Back to SuperAdmin Reports ",-1)])]),_:1})])):J("",!0),e("div",N4,[e("div",j4,[e("div",L4,[e("div",null,[O[5]||(O[5]=e("h1",{class:"text-2xl font-bold text-gray-900"},"Temple Register Report",-1)),e("p",B4,[O[4]||(O[4]=te(" Download registration data for your temples ",-1)),I.value&&C.value.length>1?(m(),g("span",U4," (Multiple Tenants Selected: "+h(C.value.length)+") ",1)):j.value?(m(),g("span",F4," (Tenant ID: "+h(j.value)+") ",1)):J("",!0)])]),e("div",V4,[e("div",O4,[e("span",z4,h(((ge=Te(n).user)==null?void 0:ge.name)||"Tenant User"),1),e("span",H4,h(I.value?"(Super Admin)":"(Tenant)"),1)])])])])]),f.value||p.value?(m(),g("div",q4,[e("div",G4,[O[6]||(O[6]=e("div",{class:"animate-spin rounded-full h-6 w-6 border-b-2 border-indigo-600"},null,-1)),e("span",J4,h(p.value?"Downloading...":"Loading data..."),1)])])):J("",!0),w.value?(m(),g("div",W4,[e("div",Y4,[e("div",K4,[O[9]||(O[9]=e("svg",{class:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor"},[e("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"})],-1)),e("div",X4,[O[7]||(O[7]=e("h3",{class:"text-sm font-medium text-red-800"},"Error",-1)),e("p",Z4,h(w.value),1)]),e("div",{class:"ml-auto pl-3"},[e("button",{onClick:R,class:"text-red-400 hover:text-red-500"},[...O[8]||(O[8]=[e("span",{class:"sr-only"},"Dismiss",-1),e("svg",{class:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor"},[e("path",{"fill-rule":"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z","clip-rule":"evenodd"})],-1)])])])])])])):J("",!0),e("div",Q4,[e("div",e5,[O[17]||(O[17]=e("div",{class:"p-6 border-b border-gray-200"},[e("h3",{class:"text-xl font-bold text-gray-900"},"Temple Register"),e("p",{class:"text-gray-600 mt-1"},"Configure filters and download your temple registration data")],-1)),e("div",t5,[e("div",o5,[e("div",null,[O[10]||(O[10]=e("label",{class:"block text-gray-700 font-medium mb-2"},"Registration Date",-1)),e("div",s5,[(m(),g(be,null,$e(N,de=>e("button",{key:de.value,onClick:ie=>b(de.value),disabled:f.value,class:se(["px-4 py-2 rounded-md text-sm font-medium transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed",a.value===de.value?"bg-indigo-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"])},h(de.label),11,n5)),64))])]),e("div",null,[O[11]||(O[11]=e("label",{class:"block text-gray-700 font-medium mb-2"},"Temple Status",-1)),e("div",r5,[(m(),g(be,null,$e(A,de=>e("button",{key:de.value,onClick:ie=>E(de.value),disabled:f.value,class:se(["px-4 py-2 rounded-md text-sm font-medium transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed",d.value===de.value?"bg-indigo-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"])},h(de.label),11,a5)),64))])])]),a.value==="custom"?(m(),g("div",l5,[e("div",i5,[e("div",null,[O[12]||(O[12]=e("label",{class:"block text-gray-700 text-sm font-medium mb-2"},"Start Date",-1)),ce(e("input",{type:"date","onUpdate:modelValue":O[0]||(O[0]=de=>c.value=de),disabled:f.value,max:u.value,class:"w-full py-2 px-3 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 disabled:opacity-50 disabled:cursor-not-allowed"},null,8,d5),[[_e,c.value]])]),e("div",null,[O[13]||(O[13]=e("label",{class:"block text-gray-700 text-sm font-medium mb-2"},"End Date",-1)),ce(e("input",{type:"date","onUpdate:modelValue":O[1]||(O[1]=de=>u.value=de),disabled:f.value,min:c.value,max:$.value,class:"w-full py-2 px-3 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 disabled:opacity-50 disabled:cursor-not-allowed"},null,8,u5),[[_e,u.value]])])])])):J("",!0),e("div",c5,[e("div",p5,[O[16]||(O[16]=e("div",{class:"mb-4 md:mb-0"},[e("h4",{class:"text-lg font-medium text-gray-900"},"Download Report"),e("p",{class:"text-sm text-gray-600"},"Select a format and click download")],-1)),e("div",m5,[e("div",g5,[ce(e("select",{"onUpdate:modelValue":O[2]||(O[2]=de=>i.value=de),disabled:f.value,class:"block w-full py-2 px-3 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 disabled:opacity-50 disabled:cursor-not-allowed"},[(m(),g(be,null,$e(F,de=>e("option",{key:de.value,value:de.value},h(de.label),9,v5)),64))],8,f5),[[Re,i.value]])]),e("button",{onClick:K,disabled:f.value||!y.value,class:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200"},[p.value?(m(),g("svg",y5,[...O[14]||(O[14]=[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)])])):(m(),g("svg",x5,[...O[15]||(O[15]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"},null,-1)])])),te(" "+h(p.value?"Downloading...":"Download"),1)],8,h5)])])])])]),e("div",b5,[e("div",w5,[O[24]||(O[24]=e("h3",{class:"text-lg font-medium text-gray-900 mb-4"},"Applied Filters",-1)),e("div",k5,[I.value&&C.value.length>1?(m(),g("div",_5,[O[18]||(O[18]=e("span",{class:"font-medium mr-1"},"Tenants:",-1)),te(" "+h(C.value.length)+" selected ",1)])):J("",!0),e("div",$5,[O[19]||(O[19]=e("span",{class:"font-medium mr-1"},"Temple:",-1)),te(" "+h(l.value==="all"?"All Temples":M(l.value)),1)]),e("div",S5,[O[20]||(O[20]=e("span",{class:"font-medium mr-1"},"Period:",-1)),te(" "+h(G(a.value))+" ",1),a.value==="custom"&&c.value&&u.value?(m(),g("span",D5," ("+h(k(c.value))+" - "+h(k(u.value))+") ",1)):J("",!0)]),e("div",C5,[O[21]||(O[21]=e("span",{class:"font-medium mr-1"},"Status:",-1)),te(" "+h(U(d.value)),1)]),e("div",T5,[O[22]||(O[22]=e("span",{class:"font-medium mr-1"},"Format:",-1)),te(" "+h(_(i.value)),1)]),e("div",E5,[O[23]||(O[23]=e("span",{class:"font-medium mr-1"},"Tenant ID:",-1)),te(" "+h(j.value),1)])]),O[25]||(O[25]=e("p",{class:"mt-4 text-sm text-gray-600"}," Your report will include data based on the filters above. Click Download to generate and download the report. ",-1))])])])])}}},rp=Uo("reports",()=>{const t=B(!1),o=B(!1),s=B(null),n=B(null),r=B(null),l=B(null),a=B([]),d=B(null),i=B("all"),c=oe(()=>r.value&&r.value.data&&r.value.data.length>0),u=oe(()=>{var S,P,T;return r.value?{totalRecords:r.value.totalRecords||0,type:((S=l.value)==null?void 0:S.type)||"Unknown",dateRange:((P=l.value)==null?void 0:P.dateRange)||"Unknown",entityId:((T=l.value)==null?void 0:T.entityId)||"Unknown"}:null}),p=oe(()=>!a.value||!Array.isArray(a.value)?[]:i.value==="all"?a.value:a.value.filter(S=>{if(!S)return!1;if(i.value==="active")return S.status==="active"||S.is_active===!0;if(i.value==="inactive")return S.status==="inactive"||S.is_active===!1;if(i.value==="new"){const P=new Date;return P.setDate(P.getDate()-30),new Date(S.created_at||S.join_date)>=P}return!0})),w=()=>{s.value=null},f=()=>{n.value=null,r.value=null,l.value=null,s.value=null,a.value=[],d.value=null,i.value="all"},v=async S=>{try{t.value=!0,s.value=null;const P=Ve.validateReportParams(S);if(!P.isValid)throw new Error(P.errors.join(", "));l.value={...S};const T=await Ve.getActivitiesReport(S);n.value=T;const V=await Ve.getReportPreview(S);return r.value=V,T}catch(P){throw s.value=P.message||"Failed to fetch activities report",console.error("Error in fetchActivitiesReport:",P),P}finally{t.value=!1}},N=async S=>{try{o.value=!0,s.value=null;const P=Ve.validateReportParams(S);if(!P.isValid)throw new Error(P.errors.join(", "));const T=await Ve.downloadActivitiesReport(S);return l.value={...S},T}catch(P){throw s.value=P.message||"Failed to download activities report",console.error("Error in downloadActivitiesReport:",P),P}finally{o.value=!1}},A=async S=>{try{t.value=!0,s.value=null;const P=await Ve.getReportPreview(S);return r.value=P,l.value={...S},P}catch(P){throw s.value=P.message||"Failed to get report preview",console.error("Error in getReportPreview:",P),P}finally{t.value=!1}},F=async S=>{try{t.value=!0,s.value=null,l.value={...S,type:"audit-logs"};const P=await Ve.getAuditLogsReport(S);n.value=P;const T=await Ve.getAuditLogsPreview(S);return r.value=T,P}catch(P){throw s.value=P.message||"Failed to fetch audit logs report",console.error("Error in fetchAuditLogsReport:",P),P}finally{t.value=!1}},I=async S=>{try{o.value=!0,s.value=null;const P=await Ve.downloadAuditLogsReport(S);return l.value={...S,type:"audit-logs"},P}catch(P){throw s.value=P.message||"Failed to download audit logs report",console.error("Error in downloadAuditLogsReport:",P),P}finally{o.value=!1}},C=async S=>{try{t.value=!0,s.value=null,console.log("Fetching approval status with params:",S),l.value={...S,type:"approval-status"},S.entityIds&&Array.isArray(S.entityIds)&&(S.isSuperAdmin=!0);const P=await Ve.getApprovalStatusReport(S);console.log("Approval status API response:",P),console.log("Response data structure:",P.data),n.value=P;const T=await Ve.getApprovalStatusPreview(S);return r.value=T,P}catch(P){throw s.value=P.message||"Failed to fetch approval status report",console.error("Error in fetchApprovalStatusReport:",P),P}finally{t.value=!1}},j=async S=>{try{o.value=!0,s.value=null,S.entityIds&&Array.isArray(S.entityIds)&&(S.isSuperAdmin=!0);const P=await Ve.downloadApprovalStatusReport(S);return l.value={...S,type:"approval-status"},P}catch(P){throw s.value=P.message||"Failed to download approval status report",console.error("Error in downloadApprovalStatusReport:",P),P}finally{o.value=!1}},$=async S=>{try{t.value=!0,s.value=null,S.entityIds&&Array.isArray(S.entityIds)&&(S.isSuperAdmin=!0);const P=await Ve.getApprovalStatusPreview(S);return r.value=P,l.value={...S,type:"approval-status"},P}catch(P){throw s.value=P.message||"Failed to get approval status preview",console.error("Error in getApprovalStatusPreview:",P),P}finally{t.value=!1}},y=async S=>{try{t.value=!0,s.value=null,l.value={...S,type:"user-details"},S.entityIds&&Array.isArray(S.entityIds)&&(S.isSuperAdmin=!0);const P=await Ve.getUserDetailsReport(S);n.value=P;const T=await Ve.getUserDetailsPreview(S);return r.value=T,P}catch(P){throw s.value=P.message||"Failed to fetch user details report",console.error("Error in fetchUserDetailsReport:",P),P}finally{t.value=!1}},b=async S=>{try{o.value=!0,s.value=null,S.entityIds&&Array.isArray(S.entityIds)&&(S.isSuperAdmin=!0);const P=await Ve.downloadUserDetailsReport(S);return l.value={...S,type:"user-details"},P}catch(P){throw s.value=P.message||"Failed to download user details report",console.error("Error in downloadUserDetailsReport:",P),P}finally{o.value=!1}},E=async S=>{try{t.value=!0,s.value=null,S.entityIds&&Array.isArray(S.entityIds)&&(S.isSuperAdmin=!0);const P=await Ve.getUserDetailsPreview(S);return r.value=P,l.value={...S,type:"user-details"},P}catch(P){throw s.value=P.message||"Failed to get user details preview",console.error("Error in getUserDetailsPreview:",P),P}finally{t.value=!1}},R=S=>{const{selectedTemple:P,selectedFormat:T,status:V,activeFilter:Z,startDate:X,endDate:W}=S;let re={startDate:X,endDate:W};return(Z!=="custom"||!X||!W)&&(re=ie(Z)),{entityId:P==="all"?"all":P.toString(),status:V,dateRange:Z,format:T,startDate:re.startDate,endDate:re.endDate}},M=S=>{const{selectedTemple:P,selectedFormat:T,role:V,status:Z,activeFilter:X,startDate:W,endDate:re}=S;let ne={startDate:W,endDate:re};return(X!=="custom"||!W||!re)&&(ne=ie(X)),{entityId:P==="all"?"all":P.toString(),role:V,status:Z,dateRange:X,format:T,startDate:ne.startDate,endDate:ne.endDate}},G=S=>{const P=[];!S.entityId&&!S.entityIds&&P.push("Entity ID or Entity IDs are required");const T=["events","sevas","bookings","donations","temple-registered","devotee-birthdays","devotee-list","devotee-profile","audit-logs","approval-status","user-details"];if((!S.type||!T.includes(S.type))&&P.push(`Valid report type is required (${T.join(", ")})`),S.type==="approval-status"){const V=["pending","approved","rejected","all"];S.status&&!V.includes(S.status)&&P.push(`Invalid status filter for approval-status. Allowed values: ${V.join(", ")}`)}if(S.type==="user-details"){const V=["admin","manager","devotee","priest","all"],Z=["active","inactive","pending","all"];S.role&&!V.includes(S.role)&&P.push(`Invalid role filter for user-details. Allowed values: ${V.join(", ")}`),S.status&&!Z.includes(S.status)&&P.push(`Invalid status filter for user-details. Allowed values: ${Z.join(", ")}`)}return S.dateRange==="custom"&&(!S.startDate||!S.endDate?P.push("Start date and end date are required for custom date range"):new Date(S.startDate)>new Date(S.endDate)&&P.push("Start date must be before end date")),S.format&&!["pdf","csv","excel"].includes(S.format)&&P.push("Invalid format specified"),{isValid:P.length===0,errors:P}},U=async S=>{try{t.value=!0,s.value=null,l.value={...S,type:"temple-registered"};const P=await Ve.getTempleRegisteredReport(S);n.value=P;const T=await Ve.getTempleRegisteredPreview(S);return r.value=T,P}catch(P){throw s.value=P.message||"Failed to fetch temple registered report",console.error("Error in fetchTempleRegisteredReport:",P),P}finally{t.value=!1}},_=async S=>{try{o.value=!0,s.value=null;const P=await Ve.downloadTempleRegisteredReport(S);return l.value={...S,type:"temple-registered"},P}catch(P){throw s.value=P.message||"Failed to download temple registered report",console.error("Error in downloadTempleRegisteredReport:",P),P}finally{o.value=!1}},k=async S=>{try{t.value=!0,s.value=null,l.value={...S,type:"devotee-birthdays"};const P=await Ve.getDevoteeBirthdaysReport(S);n.value=P;const T=await Ve.getDevoteeBirthdaysPreview(S);return r.value=T,P}catch(P){throw s.value=P.message||"Failed to fetch devotee birthdays report",console.error("Error in fetchDevoteeBirthdaysReport:",P),P}finally{t.value=!1}},L=async S=>{try{o.value=!0,s.value=null,S.entityIds&&Array.isArray(S.entityIds)&&(S.isSuperAdmin=!0);const P=await Ve.downloadDevoteeBirthdaysReport(S);return l.value={...S,type:"devotee-birthdays"},P}catch(P){throw s.value=P.message||"Failed to download devotee birthdays report",console.error("Error in downloadDevoteeBirthdaysReport:",P),P}finally{o.value=!1}},z=async S=>{try{t.value=!0,s.value=null,S.entityIds&&Array.isArray(S.entityIds)&&(S.isSuperAdmin=!0);const P=await Ve.getDevoteeBirthdaysPreview(S);return r.value=P,l.value={...S,type:"devotee-birthdays"},P}catch(P){throw s.value=P.message||"Failed to get devotee birthdays preview",console.error("Error in getDevoteeBirthdaysPreview:",P),P}finally{t.value=!1}},q=async S=>{try{t.value=!0,s.value=null;const{entityId:P,entityIds:T,status:V="all"}=S;l.value={...S,type:"devotee-list"},T&&Array.isArray(T)&&(S.isSuperAdmin=!0);const Z=await Ve.getDevoteeList(S);n.value=Z;let X=null;Z&&Z.data&&(X=Z.data,X&&X.data&&(X=X.data)),Array.isArray(X)?a.value=X:X&&Array.isArray(X.devotees)?a.value=X.devotees:X&&Array.isArray(X.data)?a.value=X.data:Z&&Z.devotees&&Array.isArray(Z.devotees)?a.value=Z.devotees:(console.warn("No valid devotee data found in response:",Z),a.value=[]),i.value=V;const W=await Ve.getDevoteeListPreview(S);return r.value=W,Z}catch(P){throw s.value=P.message||"Failed to fetch devotee list report",console.error("Error in fetchDevoteeListReport:",P),a.value=[],P}finally{t.value=!1}},K=async S=>{try{o.value=!0,s.value=null;const{format:P}=S;if(!P)throw new Error("Format is required for download");S.entityIds&&Array.isArray(S.entityIds)&&(S.isSuperAdmin=!0);const T=await Ve.downloadDevoteeListReport(S);return l.value={...S,type:"devotee-list"},T}catch(P){throw s.value=P.message||"Failed to download devotee list report",console.error("Error in downloadDevoteeListReport:",P),P}finally{o.value=!1}},H=async(S,P)=>{try{console.log("setDevoteeListStatus entityId",S,P),t.value=!0,s.value=null,i.value=P,await q({entityId:S,status:P})}catch(T){throw s.value=T.message||"Failed to filter devotee list",console.error("Error in setDevoteeListStatus:",T),T}finally{t.value=!1}},O=async S=>{try{t.value=!0,s.value=null;const{entityId:P}=S;l.value={...S,type:"devotee-profile"},S.entityIds&&Array.isArray(S.entityIds)&&(S.isSuperAdmin=!0);const T=await Ve.getDevoteeProfile(S);n.value=T;const V=await Ve.getDevoteeProfilePreview(S);return d.value=V,T}catch(P){throw s.value=P.message||"Failed to fetch devotee profile",console.error("Error in fetchDevoteeProfile:",P),P}finally{t.value=!1}},ee=async S=>{try{o.value=!0,s.value=null;const{format:P}=S;if(!P)throw new Error("Format is required for download");S.entityIds&&Array.isArray(S.entityIds)&&(S.isSuperAdmin=!0);const T=await Ve.downloadDevoteeProfileReport(S);return l.value={...S,type:"devotee-profile"},T}catch(P){throw s.value=P.message||"Failed to download devotee profile report",console.error("Error in downloadDevoteeProfileReport:",P),P}finally{o.value=!1}},ge=async S=>{try{t.value=!0,s.value=null,S.entityIds&&Array.isArray(S.entityIds)&&(S.isSuperAdmin=!0);const P=await Ve.getDevoteeListPreview(S);return r.value=P,l.value={...S,type:"devotee-list"},P}catch(P){throw s.value=P.message||"Failed to get devotee list preview",console.error("Error in getDevoteeListPreview:",P),P}finally{t.value=!1}},de=async S=>{try{t.value=!0,s.value=null,S.entityIds&&Array.isArray(S.entityIds)&&(S.isSuperAdmin=!0);const P=await Ve.getDevoteeProfilePreview(S);return r.value=P,l.value={...S,type:"devotee-profile"},P}catch(P){throw s.value=P.message||"Failed to get devotee profile preview",console.error("Error in getDevoteeProfilePreview:",P),P}finally{t.value=!1}},ie=S=>{const P=new Date,T=new Date;switch(S){case"daily":T.setDate(P.getDate());break;case"weekly":T.setDate(P.getDate()-7);break;case"monthly":T.setDate(P.getDate()-30);break;case"yearly":T.setDate(P.getDate()-365);break;default:T.setDate(P.getDate()-7)}return{startDate:T.toISOString().split("T")[0],endDate:P.toISOString().split("T")[0]}};return{loading:t,downloadLoading:o,error:s,currentReport:n,reportPreview:r,lastReportParams:l,devoteeList:a,devoteeProfile:d,devoteeListStatus:i,hasReportData:c,reportSummary:u,filteredDevoteeList:p,fetchAuditLogsReport:F,downloadAuditLogsReport:I,clearError:w,clearReportData:f,fetchActivitiesReport:v,downloadActivitiesReport:N,getReportPreview:A,fetchTempleRegisteredReport:U,downloadTempleRegisteredReport:_,fetchDevoteeBirthdaysReport:k,downloadDevoteeBirthdaysReport:L,getDevoteeBirthdaysPreview:z,fetchDevoteeListReport:q,downloadDevoteeListReport:K,getDevoteeListPreview:ge,setDevoteeListStatus:H,fetchDevoteeProfile:O,downloadDevoteeProfileReport:ee,getDevoteeProfilePreview:de,fetchApprovalStatusReport:C,downloadApprovalStatusReport:j,getApprovalStatusPreview:$,fetchUserDetailsReport:y,downloadUserDetailsReport:b,getUserDetailsPreview:E,buildApprovalStatusParams:R,buildUserDetailsParams:M,validateReportParams:G,getDefaultDateRange:ie,buildReportParams:S=>{const{selectedTemple:P,activityType:T,activeFilter:V,selectedFormat:Z,startDate:X,endDate:W}=S;let re={startDate:X,endDate:W};return(V!=="custom"||!X||!W)&&(re=ie(V)),{entityId:P==="all"?"all":P.toString(),type:T,dateRange:V,format:Z,startDate:re.startDate,endDate:re.endDate}},buildDevoteeBirthdaysParams:S=>{const{selectedTemple:P,activeFilter:T,selectedFormat:V,startDate:Z,endDate:X}=S;let W={startDate:Z,endDate:X};return(T!=="custom"||!Z||!X)&&(W=ie(T)),{entityId:P==="all"?"all":P.toString(),dateRange:T,format:V,startDate:W.startDate,endDate:W.endDate}},formatReportData:(S,P)=>!S||!Array.isArray(S)?[]:S.map(T=>{const V={...T};switch(T.created_at&&(V.created_at=new Date(T.created_at).toLocaleDateString()),T.updated_at&&(V.updated_at=new Date(T.updated_at).toLocaleDateString()),P){case"events":T.event_date&&(V.event_date=new Date(T.event_date).toLocaleDateString());break;case"sevas":T.date&&(V.date=new Date(T.date).toLocaleDateString()),T.price&&(V.price=`${T.price.toFixed(2)}`);break;case"bookings":T.booking_time&&(V.booking_time=new Date(T.booking_time).toLocaleString());break;case"devotee-birthdays":T.date_of_birth&&(V.date_of_birth=new Date(T.date_of_birth).toLocaleDateString()),T.member_since&&(V.member_since=new Date(T.member_since).toLocaleDateString());break}return V}),buildDevoteeListParams:S=>{const{selectedTemple:P,selectedFormat:T,status:V="all"}=S;return{entityId:P==="all"?"all":P.toString(),status:V,format:T}},buildDevoteeProfileParams:S=>{const{selectedTemple:P,selectedFormat:T}=S;return{entityId:P==="all"?"all":P.toString(),format:T}}}}),I5={class:"min-h-screen bg-gray-50"},M5={key:0,class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 pt-4"},R5={class:"bg-white shadow-sm border-b border-gray-200 rounded-2xl"},P5={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6"},N5={class:"flex items-center justify-between"},j5={class:"text-gray-600 mt-1"},L5={key:0,class:"text-indigo-600 font-medium"},B5={key:1,class:"text-indigo-600 font-medium"},U5={class:"flex items-center space-x-4"},F5={class:"bg-indigo-50 px-4 py-2 rounded-lg border border-indigo-200"},V5={class:"text-indigo-800 font-medium"},O5={class:"text-indigo-600 text-sm ml-2"},z5={key:1,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},H5={key:2,class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 pt-4"},q5={class:"bg-red-50 border border-red-200 rounded-md p-4"},G5={class:"flex"},J5={class:"ml-3"},W5={class:"mt-1 text-sm text-red-700"},Y5={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},K5={class:"bg-white rounded-2xl shadow-sm border border-gray-200 overflow-hidden mb-8"},X5={class:"p-6"},Z5={class:"mb-6"},Q5={class:"relative"},e3=["value"],t3={key:0,class:"mt-2 text-sm text-amber-600"},o3={key:1,class:"mt-2 text-sm text-gray-500"},s3={key:0,class:"text-indigo-600 font-medium ml-2"},n3={class:"mb-6"},r3={class:"flex flex-wrap gap-2"},a3=["onClick"],l3={class:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6"},i3={class:"flex flex-wrap gap-2"},d3=["onClick"],u3={key:0,class:"mb-6 p-4 bg-gray-50 border border-gray-200 rounded-lg"},c3={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},p3={class:"border-t border-gray-200 pt-6"},m3={class:"flex flex-col md:flex-row md:items-center md:justify-between"},g3={class:"flex items-center space-x-3"},f3={class:"relative"},v3=["value"],h3=["disabled"],y3={key:0,class:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",fill:"none",viewBox:"0 0 24 24"},x3={key:1,class:"mr-2 h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},b3={class:"bg-white rounded-2xl shadow-sm border border-gray-200 overflow-hidden mb-8"},w3={class:"p-6"},k3={class:"flex flex-wrap gap-2"},_3={key:0,class:"inline-flex items-center px-3 py-1.5 rounded-full text-sm bg-indigo-100 text-indigo-800"},$3={key:1,class:"inline-flex items-center px-3 py-1.5 rounded-full text-sm bg-indigo-100 text-indigo-800"},S3={key:0,class:"ml-1 text-xs bg-indigo-200 px-2 py-0.5 rounded"},D3={class:"inline-flex items-center px-3 py-1.5 rounded-full text-sm bg-indigo-100 text-indigo-800"},C3={class:"inline-flex items-center px-3 py-1.5 rounded-full text-sm bg-indigo-100 text-indigo-800"},T3={key:0},E3={class:"inline-flex items-center px-3 py-1.5 rounded-full text-sm bg-indigo-100 text-indigo-800"},A3={class:"inline-flex items-center px-3 py-1.5 rounded-full text-sm bg-green-100 text-green-800"},I3={class:"mt-4 text-sm text-gray-600"},M3={key:0,class:"text-indigo-600 font-medium"},R3={key:0,class:"bg-white rounded-2xl shadow-sm border border-gray-200 overflow-hidden"},P3={class:"p-6 border-b border-gray-200"},N3={class:"text-gray-600 mt-1"},j3={key:0,class:"text-indigo-600 font-medium ml-2"},L3={class:"overflow-x-auto"},B3={key:0,class:"min-w-full divide-y divide-gray-200"},U3={class:"bg-gray-50"},F3={class:"bg-white divide-y divide-gray-200"},V3={key:0},O3=["colspan"],z3={key:1,class:"p-6 text-center text-gray-500"},H3={key:0,class:"p-4 border-t border-gray-200 bg-gray-50 text-center"},q3={class:"text-sm text-gray-600"},G3={__name:"TempleActivitiesReport",setup(t){const o=tt();et();const s=Ot(),n=We(),r=rp(),{showToast:l}=Ue(),a=B("all"),d=B("events"),i=B("monthly"),c=B("pdf"),u=B(new Date(new Date().setDate(new Date().getDate()-30)).toISOString().split("T")[0]),p=B(new Date().toISOString().split("T")[0]),w=B(!1),f=B(null),v=[{label:"Events Report",value:"events"},{label:"Seva Reports",value:"sevas"},{label:"Seva Bookings",value:"bookings"},{label:"Donations Reports",value:"donations"}],N=[{label:"Weekly",value:"weekly"},{label:"Monthly",value:"monthly"},{label:"Yearly",value:"yearly"},{label:"Custom Range",value:"custom"}],A=[{label:"PDF",value:"pdf"},{label:"CSV",value:"csv"},{label:"Excel",value:"excel"}],F={events:[{key:"title",label:"Title"},{key:"temple_name",label:"Temple"},{key:"event_type",label:"Type"},{key:"event_date",label:"Date"},{key:"location",label:"Location"},{key:"is_active",label:"Status"}],sevas:[{key:"name",label:"Seva Name"},{key:"temple_name",label:"Temple"},{key:"seva_type",label:"Type"},{key:"price",label:"Price"},{key:"start_time",label:"Start Time"},{key:"status",label:"Status"}],bookings:[{key:"seva_name",label:"Seva"},{key:"temple_name",label:"Temple"},{key:"devotee_name",label:"Devotee"},{key:"booking_time",label:"Booking Time"},{key:"status",label:"Status"}],donations:[{key:"donor_name",label:"Donor"},{key:"temple_name",label:"Temple"},{key:"amount",label:"Amount"},{key:"donation_type",label:"Type"},{key:"donation_date",label:"Date"},{key:"status",label:"Status"}]},I=oe(()=>{var D,x;const Q=((D=n.user)==null?void 0:D.role)||((x=n.user)==null?void 0:x.roleName);return Q==="super_admin"||Q==="superadmin"}),C=oe(()=>o.query.from==="superadmin"||I.value),j=oe(()=>o.query.tenants?o.query.tenants.split(","):[]),$=oe(()=>{var D;if(C.value&&j.value.length===1)return j.value[0];if(o.params.tenantId)return o.params.tenantId;if((D=n.user)!=null&&D.assignedTenantId)return n.user.assignedTenantId.toString();const Q=localStorage.getItem("current_tenant_id");return Q||(pe.defaults.headers.common["X-Tenant-ID"]?pe.defaults.headers.common["X-Tenant-ID"].toString():null)}),y=oe(()=>a.value==="all"||C.value&&j.value.length>1),b=oe(()=>{var Q,D;if(F[d.value]){let x=[...F[d.value]];return y.value||(x=x.filter(S=>S.key!=="temple_name")),x}return(D=(Q=r.reportPreview)==null?void 0:Q.columns)!=null&&D.length?r.reportPreview.columns:[]}),E=oe(()=>{var D;return(D=r.reportPreview)!=null&&D.data?r.reportPreview.data.slice(0,5).map(x=>{const S={...x};if(x.temple_id&&!x.temple_name){const P=s.temples.find(T=>T.id.toString()===x.temple_id.toString());S.temple_name=P?P.name:`Temple ${x.temple_id}`}return x.event_date&&(S.event_date=M(x.event_date,"date")),x.donation_date&&(S.donation_date=M(x.donation_date,"date")),x.start_time&&(S.start_time=M(x.start_time,"time")),x.booking_time&&(S.booking_time=M(x.booking_time,"datetime")),x.price&&(S.price=G(x.price)),x.amount&&(S.amount=G(x.amount)),x.is_active!==void 0&&(S.is_active=x.is_active?"Active":"Inactive"),x.status&&(S.status=U(x.status)),S}):[]}),R=(Q,D)=>{const x=Q[D]||Q[D.replace("_","")];return x==null?"-":D.includes("date")&&!D.includes("time")?M(x,"date"):D.includes("time")?D==="booking_time"||D.includes("datetime")?M(x,"datetime"):M(x,"time"):D==="price"||D==="amount"?G(x):D==="is_active"?x?"Active":"Inactive":D==="status"?U(x):x},M=(Q,D="datetime")=>{if(!Q)return"-";try{const x=new Date(Q);return isNaN(x.getTime())?Q:D==="date"?x.toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):D==="time"?x.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!0}):D==="datetime"?x.toLocaleString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit",hour12:!0}):Q}catch(x){return console.error("Error formatting date/time:",x),Q}},G=Q=>{if(!Q&&Q!==0)return"-";try{const D=parseFloat(Q);return isNaN(D)?Q:new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",minimumFractionDigits:2}).format(D)}catch{return`${Q}`}},U=Q=>Q?Q.charAt(0).toUpperCase()+Q.slice(1).toLowerCase():"",_=async Q=>{d.value=Q,await de()},k=Q=>{if(i.value=Q,Q!=="custom"){const D=r.getDefaultDateRange(Q);u.value=D.startDate,p.value=D.endDate}de()},L=()=>{console.log("Temple changed to:",a.value),de()},z=()=>{i.value==="custom"&&de()},q=Q=>{if(Q==="all")return"All Temples";const D=s.temples.find(x=>x.id.toString()===Q.toString());return D?D.name:"Unknown Temple"},K=Q=>{const D=v.find(x=>x.value===Q);return D?D.label:"Unknown"},H=Q=>{const D=N.find(x=>x.value===Q);return D?D.label:"Unknown"},O=Q=>{const D=A.find(x=>x.value===Q);return D?D.label:"Unknown"},ee=Q=>Q?new Date(Q).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):"",ge=()=>{f.value=null,r.clearError()},de=async()=>{var Q,D,x,S;try{if(!$.value&&!C.value)throw new Error("No valid tenant ID available");console.log("User type - fromSuperadmin:",C.value),console.log("User role:",((Q=n.user)==null?void 0:Q.role)||((D=n.user)==null?void 0:D.roleName));let P={type:d.value,dateRange:i.value,startDate:u.value,endDate:p.value,includeTempleName:y.value};C.value||I.value?(console.log("SuperAdmin mode - fetching all reports"),j.value.length>1?(P.entityIds=j.value,P.entityId="multiple",P.isSuperAdmin=!0):j.value.length===1?(P.tenantId=j.value[0],P.entityId=a.value==="all"?"all":a.value,P.isSuperAdmin=!0):(P.entityId=a.value==="all"?"all":a.value,P.isSuperAdmin=!0)):(console.log("Standard/Monitoring user - Single temple mode:",a.value),a.value==="all"?(console.log("Standard/Monitoring user - All temples mode"),P.entityId="all",P.tenantId=$.value):(console.log("Standard/Monitoring user - Single temple mode:",a.value),P.entityId=a.value,P.tenantId=$.value,P.temple_Id=a.value)),console.log("Loading report preview with params:",P),await r.getReportPreview(P),console.log("Report preview loaded successfully:",((S=(x=r.reportPreview)==null?void 0:x.data)==null?void 0:S.length)||0,"records")}catch(P){console.error("Error loading report preview:",P),l(`Failed to load report preview: ${P.message}`,"error")}},ie=async()=>{var Q,D;w.value=!0,f.value=null;try{if(console.log("Fetching temples for tenant ID:",$.value),console.log("User type - fromSuperadmin:",C.value),console.log("User role:",((Q=n.user)==null?void 0:Q.role)||((D=n.user)==null?void 0:D.roleName)),s.clearTempleData(),C.value||I.value)if(console.log("SuperAdmin - Fetching all temples"),j.value.length>1){console.log(`Fetching temples for ${j.value.length} tenants:`,j.value);const x=[];for(const S of j.value)try{const P=await me(S);x.push(...P)}catch(P){console.warn(`Failed to fetch temples for tenant ${S}:`,P)}s.temples=x,console.log(`Set ${s.temples.length} total temples for ${j.value.length} tenants`)}else try{const x=await pe.get("/superadmin/entities");let S=[];x.data&&Array.isArray(x.data)?S=x.data:x.data&&Array.isArray(x.data.data)&&(S=x.data.data),console.log(`SuperAdmin: Fetched ${S.length} total temples`),s.temples=S.map(P=>lt.normalizeTempleData(P))}catch(x){console.error("Error fetching superadmin entities:",x);const S=await pe.get("/entities");let P=[];S.data&&Array.isArray(S.data)?P=S.data:S.data&&Array.isArray(S.data.data)&&(P=S.data.data),console.log(`SuperAdmin fallback: Fetched ${P.length} temples`),s.temples=P.map(T=>lt.normalizeTempleData(T))}else{if(!$.value)throw new Error("No tenant ID available to fetch temples");const x=$.value;console.log(`Fetching temples for single tenant ${x}`);try{const S=await pe.get("/entities");let P=[];S.data&&Array.isArray(S.data)?P=S.data:S.data&&Array.isArray(S.data.data)&&(P=S.data.data),console.log(`Fetched ${P.length} total entities from API`);const T=P.filter(V=>String(V.created_by)===String(x)||String(V.tenant_id)===String(x)||String(V.id)===String(x));console.log(`Filtered ${T.length} temples for tenant ${x}`),s.temples=T.map(V=>lt.normalizeTempleData(V))}catch(S){console.error("Error fetching entities directly:",S),console.log("Using store method as fallback"),await s.fetchTemples(x)}}console.log(`Successfully loaded ${s.temples.length} temples`),s.temples.length===0&&(console.warn("No temples found"),!C.value&&!I.value&&(f.value=`No temples found for tenant ID ${$.value}. Please verify tenant access.`))}catch(x){console.error("Error in fetchTemples:",x),f.value=`Failed to load temples: ${x.message}`,l(`Failed to load temple data: ${x.message}`,"error")}finally{w.value=!1}},me=async Q=>{try{console.log(`Fetching temples for tenant ${Q}`);let D=[];try{const x=await pe.get("/entities");let S=[];if(x.data&&Array.isArray(x.data)?S=x.data:x.data&&Array.isArray(x.data.data)&&(S=x.data.data),D=S.filter(P=>String(P.created_by)===String(Q)||String(P.tenant_id)===String(Q)),console.log(`Method 1: Found ${D.length} temples for tenant ${Q}`),D.length>0)return D.map(P=>lt.normalizeTempleData(P))}catch(x){console.warn(`Method 1 failed for tenant ${Q}:`,x)}try{const x=await pe.get(`/entities?tenant_id=${Q}`);let S=[];if(x.data&&Array.isArray(x.data)?S=x.data:x.data&&Array.isArray(x.data.data)&&(S=x.data.data),console.log(`Method 2: Found ${S.length} temples for tenant ${Q}`),S.length>0)return S.map(P=>lt.normalizeTempleData(P))}catch(x){console.warn(`Method 2 failed for tenant ${Q}:`,x)}return console.warn(`No temples found for tenant ${Q} using any method`),[]}catch(D){return console.error(`Error fetching temples for tenant ${Q}:`,D),[]}},ke=async()=>{try{if(!$.value&&!C.value&&!I.value)throw new Error("No valid tenant ID available for download");let Q={type:d.value,dateRange:i.value,format:c.value,startDate:u.value,endDate:p.value,includeTempleName:y.value};C.value||I.value?(console.log("SuperAdmin download"),j.value.length>1?(Q.entityIds=j.value,Q.entityId="multiple",Q.isSuperAdmin=!0):j.value.length===1?(Q.tenantId=j.value[0],Q.entityId=a.value==="all"?"all":a.value,Q.isSuperAdmin=!0):(Q.entityId=a.value==="all"?"all":a.value,Q.isSuperAdmin=!0)):a.value==="all"?(Q.entityId="all",Q.tenantId=$.value):(Q.entityId=a.value,Q.tenantId=$.value,Q.temple_Id=a.value),console.log("Downloading report with params:",Q);const D=await r.downloadActivitiesReport(Q);if(D&&D.success)l(`${K(d.value)} downloaded successfully as ${O(c.value)}`,"success");else throw new Error((D==null?void 0:D.message)||"Failed to download report")}catch(Q){console.error("Error downloading report:",Q),l(`Failed to download report: ${Q.message}`,"error")}};return Me(async()=>{if(console.log("TempleActivitiesReport mounted"),console.log("fromSuperadmin:",C.value),console.log("Tenant IDs from URL:",j.value),console.log("Effective tenant ID:",$.value),console.log("Route params:",o.params),console.log("User store:",n.user),console.log("Current X-Tenant-ID header:",pe.defaults.headers.common["X-Tenant-ID"]),!$.value&&!C.value&&!I.value){f.value="No valid tenant ID found. Please check your access permissions.";return}s.clearTempleData(),await ie(),await de()}),Oe($,async(Q,D)=>{Q!==D&&Q&&(console.log("Tenant ID changed, refetching temples:",Q),s.clearTempleData(),await ie(),await de())}),Oe(()=>o.params.tenantId,async(Q,D)=>{Q!==D&&Q&&(console.log("Route tenant ID changed:",Q),s.clearTempleData(),await ie(),await de())}),(Q,D)=>{var S,P,T,V;const x=Ze("router-link");return m(),g("div",I5,[C.value?(m(),g("div",M5,[le(x,{to:"/superadmin/reports",class:"inline-flex items-center px-4 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition-colors"},{default:ye(()=>[...D[4]||(D[4]=[e("svg",{class:"mr-2 h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 19l-7-7m0 0l7-7m-7 7h18"})],-1),te(" Back to SuperAdmin Reports ",-1)])]),_:1})])):J("",!0),e("div",R5,[e("div",P5,[e("div",N5,[e("div",null,[D[6]||(D[6]=e("h1",{class:"text-2xl font-bold text-gray-900"},"Temple Activities Report",-1)),e("p",j5,[D[5]||(D[5]=te(" Download event, seva, and booking activity data for your temples ",-1)),C.value&&j.value.length>1?(m(),g("span",L5," (Multiple Tenants Selected) ")):$.value?(m(),g("span",B5," (Tenant ID: "+h($.value)+") ",1)):J("",!0)])]),e("div",U5,[e("div",F5,[e("span",V5,h(((S=Te(n).user)==null?void 0:S.name)||"Tenant User"),1),e("span",O5,h(C.value?"(Super Admin)":"(Tenant)"),1)])])])])]),w.value||Te(r).loading?(m(),g("div",z5,[...D[7]||(D[7]=[e("div",{class:"bg-white rounded-lg p-6 flex items-center space-x-3"},[e("div",{class:"animate-spin rounded-full h-6 w-6 border-b-2 border-indigo-600"}),e("span",{class:"text-gray-900 font-medium"},"Loading data...")],-1)])])):J("",!0),f.value||Te(r).error?(m(),g("div",H5,[e("div",q5,[e("div",G5,[D[10]||(D[10]=e("svg",{class:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor"},[e("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"})],-1)),e("div",J5,[D[8]||(D[8]=e("h3",{class:"text-sm font-medium text-red-800"},"Error",-1)),e("p",W5,h(f.value||Te(r).error),1)]),e("div",{class:"ml-auto pl-3"},[e("button",{onClick:ge,class:"text-red-400 hover:text-red-500"},[...D[9]||(D[9]=[e("span",{class:"sr-only"},"Dismiss",-1),e("svg",{class:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor"},[e("path",{"fill-rule":"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z","clip-rule":"evenodd"})],-1)])])])])])])):J("",!0),e("div",Y5,[e("div",K5,[D[20]||(D[20]=e("div",{class:"p-6 border-b border-gray-200"},[e("h3",{class:"text-xl font-bold text-gray-900"},"Temple Activities"),e("p",{class:"text-gray-600 mt-1"},"Configure filters and download your temple activity data")],-1)),e("div",X5,[e("div",Z5,[D[12]||(D[12]=e("label",{class:"block text-gray-700 font-medium mb-2"},"Select Temple",-1)),e("div",Q5,[ce(e("select",{"onUpdate:modelValue":D[0]||(D[0]=Z=>a.value=Z),class:"block w-full py-2 px-3 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500",onChange:L},[D[11]||(D[11]=e("option",{value:"all"},"All Temples",-1)),(m(!0),g(be,null,$e(Te(s).temples,Z=>(m(),g("option",{key:Z.id,value:Z.id},h(Z.name),9,e3))),128))],544),[[Re,a.value]])]),Te(s).temples.length===0&&!w.value?(m(),g("div",t3," No temples found for tenant ID "+h($.value)+". Please verify tenant access. ",1)):(m(),g("div",o3,[te(" Found "+h(Te(s).temples.length)+" temples for tenant "+h($.value)+" ",1),a.value==="all"?(m(),g("span",s3," (Temple names will be included in the report) ")):J("",!0)]))]),e("div",n3,[D[13]||(D[13]=e("label",{class:"block text-gray-700 font-medium mb-2"},"Activity Type",-1)),e("div",r3,[(m(),g(be,null,$e(v,Z=>e("button",{key:Z.value,onClick:X=>_(Z.value),class:se(["px-4 py-2 rounded-md text-sm font-medium transition-colors duration-200",d.value===Z.value?"bg-indigo-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"])},h(Z.label),11,a3)),64))])]),e("div",l3,[e("div",null,[D[14]||(D[14]=e("label",{class:"block text-gray-700 font-medium mb-2"},"Date Range",-1)),e("div",i3,[(m(),g(be,null,$e(N,Z=>e("button",{key:Z.value,onClick:X=>k(Z.value),class:se(["px-4 py-2 rounded-md text-sm font-medium transition-colors duration-200",i.value===Z.value?"bg-indigo-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"])},h(Z.label),11,d3)),64))])])]),i.value==="custom"?(m(),g("div",u3,[e("div",c3,[e("div",null,[D[15]||(D[15]=e("label",{class:"block text-gray-700 text-sm font-medium mb-2"},"Start Date",-1)),ce(e("input",{type:"date","onUpdate:modelValue":D[1]||(D[1]=Z=>u.value=Z),class:"w-full py-2 px-3 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500",onChange:z},null,544),[[_e,u.value]])]),e("div",null,[D[16]||(D[16]=e("label",{class:"block text-gray-700 text-sm font-medium mb-2"},"End Date",-1)),ce(e("input",{type:"date","onUpdate:modelValue":D[2]||(D[2]=Z=>p.value=Z),class:"w-full py-2 px-3 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500",onChange:z},null,544),[[_e,p.value]])])])])):J("",!0),e("div",p3,[e("div",m3,[D[19]||(D[19]=e("div",{class:"mb-4 md:mb-0"},[e("h4",{class:"text-lg font-medium text-gray-900"},"Download Report"),e("p",{class:"text-sm text-gray-600"},"Select a format and click download")],-1)),e("div",g3,[e("div",f3,[ce(e("select",{"onUpdate:modelValue":D[3]||(D[3]=Z=>c.value=Z),class:"block w-full py-2 px-3 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500"},[(m(),g(be,null,$e(A,Z=>e("option",{key:Z.value,value:Z.value},h(Z.label),9,v3)),64))],512),[[Re,c.value]])]),e("button",{onClick:ke,disabled:Te(r).downloadLoading,class:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50 disabled:cursor-not-allowed"},[Te(r).downloadLoading?(m(),g("svg",y3,[...D[17]||(D[17]=[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)])])):(m(),g("svg",x3,[...D[18]||(D[18]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"},null,-1)])])),te(" "+h(Te(r).downloadLoading?"Downloading...":"Download"),1)],8,h3)])])])])]),e("div",b3,[e("div",w3,[D[29]||(D[29]=e("h3",{class:"text-lg font-medium text-gray-900 mb-4"},"Applied Filters",-1)),e("div",k3,[C.value&&j.value.length>1?(m(),g("div",_3,[D[21]||(D[21]=e("span",{class:"font-medium mr-1"},"Tenants:",-1)),te(" "+h(j.value.length)+" selected ",1)])):(m(),g("div",$3,[D[22]||(D[22]=e("span",{class:"font-medium mr-1"},"Temple:",-1)),te(" "+h(a.value==="all"?"All Temples":q(a.value))+" ",1),a.value==="all"?(m(),g("span",S3," +Temple Names ")):J("",!0)])),e("div",D3,[D[23]||(D[23]=e("span",{class:"font-medium mr-1"},"Activity:",-1)),te(" "+h(K(d.value)),1)]),e("div",C3,[D[24]||(D[24]=e("span",{class:"font-medium mr-1"},"Period:",-1)),te(" "+h(H(i.value))+" ",1),i.value==="custom"?(m(),g("span",T3," ("+h(ee(u.value))+" - "+h(ee(p.value))+") ",1)):J("",!0)]),e("div",E3,[D[25]||(D[25]=e("span",{class:"font-medium mr-1"},"Format:",-1)),te(" "+h(O(c.value)),1)]),e("div",A3,[D[26]||(D[26]=e("span",{class:"font-medium mr-1"},"Tenant ID:",-1)),te(" "+h($.value),1)])]),e("p",I3,[D[27]||(D[27]=te(" Your report will include data based on the filters above. ",-1)),y.value?(m(),g("span",M3," Temple names will be included in all report formats. ")):J("",!0),D[28]||(D[28]=te(" Click Download to generate and download the report. ",-1))])])]),Te(r).hasReportData?(m(),g("div",R3,[e("div",P3,[D[30]||(D[30]=e("h3",{class:"text-xl font-bold text-gray-900"},"Report Preview",-1)),e("p",N3,[te(" Showing "+h(E.value.length)+" of "+h(((P=Te(r).reportPreview)==null?void 0:P.totalRecords)||0)+" records ",1),y.value?(m(),g("span",j3," (Including temple names) ")):J("",!0)])]),e("div",L3,[b.value.length?(m(),g("table",B3,[e("thead",U3,[e("tr",null,[(m(!0),g(be,null,$e(b.value,Z=>(m(),g("th",{key:Z.key,class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},h(Z.label),1))),128))])]),e("tbody",F3,[(m(!0),g(be,null,$e(E.value,(Z,X)=>(m(),g("tr",{key:X},[(m(!0),g(be,null,$e(b.value,W=>(m(),g("td",{key:W.key,class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},h(R(Z,W.key)),1))),128))]))),128)),E.value.length===0?(m(),g("tr",V3,[e("td",{colspan:b.value.length,class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 text-center"}," No data available for the selected filters ",8,O3)])):J("",!0)])])):(m(),g("div",z3," No data available for preview "))]),((V=(T=Te(r).reportPreview)==null?void 0:T.data)==null?void 0:V.length)>5?(m(),g("div",H3,[e("p",q3," Showing 5 of "+h(Te(r).reportPreview.totalRecords)+" records. Download the full report to see all data. ",1)])):J("",!0)])):J("",!0)])])}}},J3={class:"min-h-screen bg-gray-50"},W3={key:0,class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 pt-4"},Y3={class:"bg-white shadow-sm border-b border-gray-200 rounded-2xl"},K3={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6"},X3={class:"flex items-center justify-between"},Z3={class:"text-gray-600 mt-1"},Q3={key:0,class:"text-indigo-600 font-medium"},ek={key:1,class:"text-indigo-600 font-medium"},tk={class:"flex items-center space-x-4"},ok={class:"bg-indigo-50 px-4 py-2 rounded-lg border border-indigo-200"},sk={class:"text-indigo-800 font-medium"},nk={class:"text-indigo-600 text-sm ml-2"},rk={key:1,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},ak={class:"bg-white rounded-lg p-6 flex items-center space-x-3"},lk={class:"text-gray-900 font-medium"},ik={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},dk={class:"bg-white rounded-2xl shadow-sm border border-gray-200 overflow-hidden mb-8"},uk={class:"p-6"},ck={class:"flex space-x-4 flex-wrap"},pk={class:"bg-white rounded-2xl shadow-sm border border-gray-200 overflow-hidden mb-8"},mk={class:"p-6 border-b border-gray-200"},gk={class:"text-xl font-bold text-gray-900"},fk={class:"text-gray-600 mt-1"},vk={class:"p-6"},hk={class:"mb-6"},yk={class:"relative"},xk=["disabled"],bk=["value"],wk={key:0,class:"mt-2 text-sm text-amber-600"},kk={key:1,class:"mt-2 text-sm text-gray-500"},_k={key:0},$k={class:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6"},Sk={class:"flex flex-wrap gap-2"},Dk=["onClick","disabled"],Ck={key:1},Tk={class:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6"},Ek={class:"flex flex-wrap gap-2"},Ak=["onClick","disabled"],Ik={key:0},Mk={class:"relative"},Rk=["disabled"],Pk={key:1},Nk={class:"bg-gray-50 border border-gray-200 rounded-md px-3 py-2"},jk={class:"text-gray-700"},Lk={key:2},Bk={key:3,class:"mb-6 p-4 bg-gray-50 border border-gray-200 rounded-lg"},Uk={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Fk=["disabled"],Vk=["disabled"],Ok={class:"border-t border-gray-200 pt-6"},zk={class:"flex flex-col md:flex-row md:items-center md:justify-between"},Hk={class:"flex items-center space-x-3"},qk={class:"relative"},Gk=["disabled"],Jk=["value"],Wk=["disabled"],Yk={key:0,class:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",fill:"none",viewBox:"0 0 24 24"},Kk={key:1,class:"mr-2 h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},Xk={class:"bg-white rounded-2xl shadow-sm border border-gray-200 overflow-hidden mb-8"},Zk={class:"p-6"},Qk={class:"flex flex-wrap gap-2"},e_={class:"inline-flex items-center px-3 py-1.5 rounded-full text-sm bg-indigo-100 text-indigo-800"},t_={class:"inline-flex items-center px-3 py-1.5 rounded-full text-sm bg-purple-100 text-purple-800"},o_={class:"font-medium mr-1"},s_={key:0},n_={key:1},r_={key:2},a_={class:"inline-flex items-center px-3 py-1.5 rounded-full text-sm bg-indigo-100 text-indigo-800"},l_={class:"inline-flex items-center px-3 py-1.5 rounded-full text-sm bg-indigo-100 text-indigo-800"},i_={class:"font-medium mr-1"},d_={key:0},u_={class:"inline-flex items-center px-3 py-1.5 rounded-full text-sm bg-indigo-100 text-indigo-800"},c_={class:"inline-flex items-center px-3 py-1.5 rounded-full text-sm bg-indigo-100 text-indigo-800"},p_={class:"inline-flex items-center px-3 py-1.5 rounded-full text-sm bg-green-100 text-green-800"},m_={key:0,class:"bg-white rounded-2xl shadow-sm border border-gray-200 overflow-hidden"},g_={class:"p-6 border-b border-gray-200"},f_={class:"text-sm text-gray-600 mt-1"},v_={class:"overflow-x-auto"},h_={class:"min-w-full divide-y divide-gray-200"},y_={class:"bg-gray-50"},x_={class:"bg-white divide-y divide-gray-200"},b_={key:0,class:"p-4 border-t border-gray-200 text-center text-sm text-gray-600"},w_={__name:"BirthdaysReport",setup(t){const o=tt();et();const s=Ot(),n=We(),r=rp(),{showToast:l}=Ue(),a=B("birthdays"),d=B("all"),i=B("monthly"),c=B("pdf"),u=B(new Date().toISOString().split("T")[0]),p=B(new Date(new Date().setDate(new Date().getDate()+30)).toISOString().split("T")[0]),w=B("all"),f=[{label:"Weekly",value:"weekly"},{label:"Monthly",value:"monthly"},{label:"Yearly",value:"yearly"},{label:"Custom Range",value:"custom"}],v=[{label:"PDF",value:"pdf"},{label:"CSV",value:"csv"},{label:"Excel",value:"excel"}],N=[{label:"All Statuses",value:"all"},{label:"Active",value:"active"},{label:"Inactive",value:"inactive"},{label:"New Members",value:"new"}],A=oe(()=>o.query.from==="superadmin"),F=oe(()=>o.query.tenants?o.query.tenants.split(",").filter(D=>D&&D.trim()):[]),I=oe(()=>{var x,S;if(A.value&&F.value.length===1)return F.value[0];if(o.params.tenantId)return o.params.tenantId;if((x=n.user)!=null&&x.assignedTenantId)return n.user.assignedTenantId.toString();const D=localStorage.getItem("current_tenant_id");return D||(pe.defaults.headers.common["X-Tenant-ID"]?pe.defaults.headers.common["X-Tenant-ID"].toString():(S=n.user)!=null&&S.id?n.user.id.toString():(console.warn("No tenant ID found, using fallback"),null))});oe(()=>{try{return(r==null?void 0:r.error)||null}catch(D){return console.error("Error getting safe error:",D),null}});const C=oe(()=>{try{return!(s!=null&&s.temples)||!Array.isArray(s.temples)?[]:s.temples.filter(D=>{if(!D)return!1;const x=(D.status||"").toLowerCase();return x==="approved"||x==="active"})}catch(D){return console.error("Error getting safe temples:",D),[]}}),j=oe(()=>{try{return(r==null?void 0:r.loading)||!1}catch(D){return console.error("Error getting loading state:",D),!1}}),$=oe(()=>{try{return(r==null?void 0:r.downloadLoading)||!1}catch(D){return console.error("Error getting download loading state:",D),!1}}),y=oe(()=>j.value||$.value),b=oe(()=>{try{return(r==null?void 0:r.reportPreview)||{}}catch(D){return console.error("Error getting safe report preview:",D),{}}}),E=oe(()=>{try{const D=b.value;return D&&D.data&&Array.isArray(D.data)&&D.data.length>0}catch(D){return console.error("Error checking valid report data:",D),!1}}),R=oe(()=>{var D;try{return((D=b.value)==null?void 0:D.columns)||[]}catch(x){return console.error("Error getting report preview columns:",x),[]}}),M=oe(()=>{var D;try{return((D=b.value)==null?void 0:D.data)||[]}catch(x){return console.error("Error getting report preview data:",x),[]}}),G=()=>{try{r&&typeof r.clearError=="function"&&r.clearError()}catch(D){console.error("Error clearing error:",D)}},U=async D=>{try{a.value=D,r&&typeof r.clearReportData=="function"&&r.clearReportData(),(D==="statusActive"||D==="statusInactive")&&(w.value="all"),await ke()}catch(x){console.error("Error setting report type:",x),l("Failed to switch report type. Please try again.","error")}},_=async()=>{try{G(),await ke()}catch(D){console.error("Error handling temple change:",D)}},k=()=>{try{switch(a.value){case"birthdays":return"Devotee Birthdays";case"devotees":return"Devotee List";case"statusActive":return"Active Devotees";case"statusInactive":return"Inactive Devotees";case"profile":return"Devotee Profile";default:return"Report"}}catch(D){return console.error("Error getting report type title:",D),"Report"}},L=()=>{try{switch(a.value){case"birthdays":return"devotee birthday data";case"devotees":return"devotee list data";case"statusActive":return"active devotee data";case"statusInactive":return"inactive devotee data";case"profile":return"devotee profile data";default:return"report data"}}catch(D){return console.error("Error getting report type description:",D),"report data"}},z=()=>{try{switch(a.value){case"statusActive":return"Active Only";case"statusInactive":return"Inactive Only";case"devotees":return ee(w.value);default:return"All"}}catch(D){return console.error("Error getting active devotee status label:",D),"All"}},q=async D=>{try{i.value=D;const x=new Date;if(D==="weekly"){u.value=new Date().toISOString().split("T")[0];const S=new Date;S.setDate(S.getDate()+7),p.value=S.toISOString().split("T")[0]}else if(D==="monthly"){u.value=new Date().toISOString().split("T")[0];const S=new Date;S.setDate(S.getDate()+30),p.value=S.toISOString().split("T")[0]}else if(D==="yearly"){const S=x.getFullYear();u.value=new Date(S,0,1).toISOString().split("T")[0],p.value=new Date(S,11,31).toISOString().split("T")[0]}await ke()}catch(x){console.error("Error setting active filter:",x),l("Failed to set filter. Please try again.","error")}},K=D=>{try{if(D==="all")return"All Temples";if(!C.value||!Array.isArray(C.value))return"Unknown Temple";const x=C.value.find(S=>{var P;return((P=S==null?void 0:S.id)==null?void 0:P.toString())===(D==null?void 0:D.toString())});return(x==null?void 0:x.name)||"Unknown Temple"}catch(x){return console.error("Error getting temple name:",x),"Unknown Temple"}},H=D=>{try{const x=f.find(S=>S.value===D);return x?x.label:"Unknown"}catch(x){return console.error("Error getting time filter label:",x),"Unknown"}},O=D=>{try{const x=v.find(S=>S.value===D);return x?x.label:"Unknown"}catch(x){return console.error("Error getting format label:",x),"Unknown"}},ee=D=>{try{const x=N.find(S=>S.value===D);return x?x.label:"Unknown"}catch(x){return console.error("Error getting devotee status label:",x),"Unknown"}},ge=D=>{if(!D)return"";try{return new Date(D).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})}catch(x){return console.error("Error formatting date:",x),D||""}},de=()=>{try{if(!I.value)throw new Error("No valid tenant ID available for report generation");const D={dateRange:i.value||"monthly",startDate:u.value,endDate:p.value,format:c.value||"pdf",isSuperAdmin:A.value,tenantId:I.value};return A.value?F.value.length>1?(D.entityIds=F.value,D.entityId="multiple",D.templeId=d.value==="all"?"all":d.value.toString()):d.value==="all"?(D.entityId=I.value,D.templeId="all"):(D.entityId=d.value,D.templeId=d.value.toString()):d.value==="all"?(D.entityId="all",D.templeId="all",D.tenantId=I.value,C.value.length>0&&(D.templeIds=C.value.map(x=>x.id.toString()))):(D.entityId=d.value,D.templeId=d.value.toString()),a.value==="statusActive"?D.status="active":a.value==="statusInactive"?D.status="inactive":a.value==="devotees"&&w.value&&w.value!=="all"&&(D.status=w.value),console.log(" Built devotee report params:",D),console.log("Selected temple:",d.value),console.log("Available temples:",C.value.length),D}catch(D){throw console.error("Error building report params:",D),D}},ie=async()=>{var D,x,S,P,T,V,Z,X;try{if(!I.value)throw new Error("No tenant ID available to fetch temples");if(console.log("Fetching temples for tenant ID:",I.value),console.log("User role:",(D=n.user)==null?void 0:D.role),console.log("User assigned tenant:",(x=n.user)==null?void 0:x.assignedTenantId),s.clearTempleData(),A.value&&F.value.length>1){console.log(`Fetching temples for ${F.value.length} tenants:`,F.value);const W=[];for(const re of F.value)try{const ne=await me(re);W.push(...ne)}catch(ne){console.warn(`Failed to fetch temples for tenant ${re}:`,ne)}s.temples=W,console.log(`Set ${s.temples.length} total temples for ${F.value.length} tenants`)}else{const W=I.value;console.log(`Fetching temples for single tenant ${W}`);try{const re=await pe.get("/entities");let ne=[];re.data&&Array.isArray(re.data)?ne=re.data:re.data&&Array.isArray(re.data.data)&&(ne=re.data.data);const fe=(P=(S=n.user)==null?void 0:S.assignedTenantId)==null?void 0:P.toString(),we=((T=n.user)==null?void 0:T.role)==="standard_user";let ve;we&&fe?(console.log(` Standard user detected - filtering for assigned tenant: ${fe}`),ve=ne.filter(De=>{const he=String(De.created_by),Se=String(De.tenant_id),Ee=he===fe||Se===fe;return Ee||console.log(` Filtered out temple ${De.id} (${De.name}) - not in assigned tenant`),Ee}),console.log(` Standard user can access ${ve.length} temples from their assigned tenant`)):ve=ne.filter(De=>String(De.created_by)===String(W)||String(De.tenant_id)===String(W)),console.log(`Filtered ${ve.length} temples from ${ne.length} total entities for tenant ${W}`),s.temples=ve.map(De=>lt.normalizeTempleData(De)),we&&ve.length>0&&d.value==="all"&&(d.value=ve[0].id.toString(),console.log(` Auto-selected first accessible temple for standard user: ${ve[0].name}`))}catch(re){console.error("Error fetching entities directly:",re),console.log("Using store method as fallback"),A.value?await s.fetchTemplesForSuperAdmin(W):await s.fetchTemples(W);const ne=((V=n.user)==null?void 0:V.role)==="standard_user",fe=(X=(Z=n.user)==null?void 0:Z.assignedTenantId)==null?void 0:X.toString();ne&&fe&&(s.temples=s.temples.filter(we=>{const ve=String(we.created_by),De=String(we.tenant_id);return ve===fe||De===fe}),s.temples.length>0&&d.value==="all"&&(d.value=s.temples[0].id.toString()))}}console.log(` Successfully loaded ${s.temples.length} temples for tenant ${I.value}`)}catch(W){console.error("Error in fetchTemples:",W),l(`Failed to load temple data: ${W.message}`,"error")}},me=async D=>{try{console.log(`Fetching temples for tenant ${D}`);const x=await pe.get("/entities");let S=[];x.data&&Array.isArray(x.data)?S=x.data:x.data&&Array.isArray(x.data.data)&&(S=x.data.data);const P=S.filter(T=>String(T.created_by)===String(D)||String(T.tenant_id)===String(D));return console.log(`Found ${P.length} temples for tenant ${D}`),P.map(T=>lt.normalizeTempleData(T))}catch(x){return console.error(`Error fetching temples for tenant ${D}:`,x),[]}},ke=async()=>{try{if(!I.value){console.warn("No tenant ID available for preview"),l("Tenant information is missing. Please refresh the page.","error");return}if(A.value&&(!F.value||F.value.length===0)){console.warn("No tenant IDs available for superadmin preview"),l("No tenants selected. Please go back and select tenants.","error");return}let D;try{D={...de()},delete D.format}catch(S){console.error("Error building preview params:",S),l((S==null?void 0:S.message)||"Error building parameters","error");return}if(!r){l("Reports store is not available","error");return}let x=null;switch(a.value){case"birthdays":typeof r.getDevoteeBirthdaysPreview=="function"?x=await r.getDevoteeBirthdaysPreview(D):(console.error("getDevoteeBirthdaysPreview method not found in reports store"),l("Birthday reports preview is not available","error"));break;case"devotees":case"statusActive":case"statusInactive":typeof r.getDevoteeListPreview=="function"?x=await r.getDevoteeListPreview(D):(console.error("getDevoteeListPreview method not found in reports store"),l("Devotee list preview is not available","error"));break;case"profile":typeof r.getDevoteeProfilePreview=="function"?x=await r.getDevoteeProfilePreview(D):(console.warn("getDevoteeProfilePreview method not available in reports store"),l("Devotee profile preview is not available yet","warning"));break;default:console.warn("Unknown report type:",a.value),l("Unknown report type selected","error");break}}catch(D){console.error("Error fetching preview:",D);const x=(D==null?void 0:D.message)||"Unknown error";l(`Failed to fetch report preview: ${x}`,"error")}},Q=async()=>{try{if(G(),!I.value){l("Tenant information is missing. Please refresh the page.","error");return}if(A.value&&(!F.value||F.value.length===0)){l("Tenant selection is required. Please go back and select tenants.","error");return}if(i.value==="custom"&&(!u.value||!p.value)){l("Please select both start and end dates for custom range","error");return}if(new Date(u.value)>new Date(p.value)){l("Start date must be before end date","error");return}if(!c.value){l("Please select a format for the report","error");return}let D;try{D=de()}catch(P){l((P==null?void 0:P.message)||"Error building parameters","error");return}if(!D.entityId&&!D.entityIds){l("Entity ID is required for report generation","error");return}if(!D.format){l("Format is required for report generation","error");return}if(!r){l("Reports store is not available","error");return}let x;try{switch(a.value){case"birthdays":if(typeof r.downloadDevoteeBirthdaysReport=="function")x=await r.downloadDevoteeBirthdaysReport(D);else throw new Error("Birthday report download functionality is not available");break;case"devotees":case"statusActive":case"statusInactive":if(typeof r.downloadDevoteeListReport=="function")x=await r.downloadDevoteeListReport(D);else throw new Error("Devotee list report download functionality is not available");break;case"profile":if(typeof r.downloadDevoteeProfileReport=="function")x=await r.downloadDevoteeProfileReport(D);else throw new Error("Devotee profile download is not available yet");break;default:throw new Error("Unknown report type selected")}}catch(P){throw console.error("Download error details:",P),P}const S=k();l(`${S} Report downloaded successfully in ${O(c.value)} format`,"success"),console.log("Download completed successfully:",x)}catch(D){console.error("Error downloading report:",D);const x=(D==null?void 0:D.message)||"Unknown error";l(`Failed to download report: ${x}`,"error")}};return Oe(a,()=>{console.log("Report type changed to:",a.value),r&&typeof r.clearReportData=="function"&&r.clearReportData(),ke()}),Oe([d,w],()=>{console.log("Filters changed - Temple:",d.value,"Status:",w.value),ke()}),Oe(I,async(D,x)=>{D!==x&&D&&(console.log("Tenant ID changed, refetching temples:",D),s.clearTempleData(),await ie(),await ke())}),Oe(()=>o.params.tenantId,async(D,x)=>{D!==x&&D&&(console.log("Route tenant ID changed:",D),s.clearTempleData(),await ie(),await ke())}),Oe(()=>o.query.tenants,async(D,x)=>{D!==x&&D&&(console.log("Query tenants changed:",D),s.clearTempleData(),await ie(),d.value="all",await ke())}),Me(async()=>{if(console.log("Devotee Reports mounted"),console.log("fromSuperadmin:",A.value),console.log("Tenant ID:",I.value),console.log("Tenant IDs:",F.value),console.log("Route params:",o.params),console.log("Route query:",o.query),!r){l("Reports store is not available. Please refresh the page.","error");return}if(!s){l("Temple store is not available. Please refresh the page.","error");return}if(!n){l("User store is not available. Please refresh the page.","error");return}if(typeof r.clearReportData=="function"&&r.clearReportData(),!I.value){l("No valid tenant ID found. Please check your access permissions.","error");return}try{await ie(),A.value&&F.value&&F.value.length>0||!A.value&&I.value?(console.log("Fetching initial preview..."),await ke()):(console.warn("Skipping initial preview - no valid tenant information"),l("Tenant information is missing. Please refresh the page or go back and select tenants.","warning"))}catch(D){console.error("Error in component initialization:",D),l("Failed to initialize reports page. Please refresh and try again.","error")}}),(D,x)=>{var P;const S=Ze("router-link");return m(),g("div",J3,[A.value?(m(),g("div",W3,[le(S,{to:"/superadmin/reports",class:"inline-flex items-center px-4 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition-colors"},{default:ye(()=>[...x[10]||(x[10]=[e("svg",{class:"mr-2 h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 19l-7-7m0 0l7-7m-7 7h18"})],-1),te(" Back to SuperAdmin Reports ",-1)])]),_:1})])):J("",!0),e("div",Y3,[e("div",K3,[e("div",X3,[e("div",null,[x[12]||(x[12]=e("h1",{class:"text-2xl font-bold text-gray-900"},"Devotee Reports",-1)),e("p",Z3,[x[11]||(x[11]=te(" Download devotee data for your temples ",-1)),A.value&&F.value.length>1?(m(),g("span",Q3," (Multiple Tenants Selected: "+h(F.value.length)+") ",1)):I.value?(m(),g("span",ek," (Tenant ID: "+h(I.value)+") ",1)):J("",!0)])]),e("div",tk,[e("div",ok,[e("span",sk,h(((P=Te(n).user)==null?void 0:P.name)||"Tenant User"),1),e("span",nk,h(A.value?"(Super Admin)":"(Tenant)"),1)])])])])]),j.value||$.value?(m(),g("div",rk,[e("div",ak,[x[13]||(x[13]=e("div",{class:"animate-spin rounded-full h-6 w-6 border-b-2 border-indigo-600"},null,-1)),e("span",lk,h($.value?"Downloading...":"Loading data..."),1)])])):J("",!0),e("div",ik,[e("div",dk,[e("div",uk,[x[14]||(x[14]=e("h3",{class:"text-lg font-medium text-gray-900 mb-4"},"Select Report Type",-1)),e("div",ck,[e("button",{onClick:x[0]||(x[0]=T=>U("birthdays")),class:se(["px-4 py-2 rounded-md text-sm font-medium transition-colors duration-200",a.value==="birthdays"?"bg-indigo-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"])}," Devotee Birthdays ",2),e("button",{onClick:x[1]||(x[1]=T=>U("devotees")),class:se(["px-4 py-2 rounded-md text-sm font-medium transition-colors duration-200",a.value==="devotees"?"bg-indigo-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"])}," Devotee List ",2),e("button",{onClick:x[2]||(x[2]=T=>U("statusActive")),class:se(["px-4 py-2 rounded-md text-sm font-medium transition-colors duration-200",a.value==="statusActive"?"bg-indigo-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"])}," Active Devotees ",2),e("button",{onClick:x[3]||(x[3]=T=>U("statusInactive")),class:se(["px-4 py-2 rounded-md text-sm font-medium transition-colors duration-200",a.value==="statusInactive"?"bg-indigo-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"])}," Inactive Devotees ",2),e("button",{onClick:x[4]||(x[4]=T=>U("profile")),class:se(["px-4 py-2 rounded-md text-sm font-medium transition-colors duration-200",a.value==="profile"?"bg-indigo-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"])}," Devotee Profile ",2)])])]),e("div",pk,[e("div",mk,[e("h3",gk,h(k()),1),e("p",fk," Configure filters and download "+h(L()),1)]),e("div",vk,[e("div",hk,[x[16]||(x[16]=e("label",{class:"block text-gray-700 font-medium mb-2"},"Select Temple",-1)),e("div",yk,[ce(e("select",{"onUpdate:modelValue":x[5]||(x[5]=T=>d.value=T),disabled:y.value,class:"block w-full py-2 px-3 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 disabled:bg-gray-100 disabled:cursor-not-allowed",onChange:_},[x[15]||(x[15]=e("option",{value:"all"},"All Temples",-1)),(m(!0),g(be,null,$e(C.value,T=>(m(),g("option",{key:T.id,value:T.id},h(T.name),9,bk))),128))],40,xk),[[Re,d.value]])]),C.value.length===0&&!y.value?(m(),g("div",wk," No temples found for tenant ID "+h(I.value)+". Please verify tenant access. ",1)):(m(),g("div",kk," Found "+h(C.value.length)+" temples for tenant "+h(I.value),1))]),a.value==="birthdays"?(m(),g("div",_k,[e("div",$k,[e("div",null,[x[17]||(x[17]=e("label",{class:"block text-gray-700 font-medium mb-2"},"Birthday Period",-1)),e("div",Sk,[(m(),g(be,null,$e(f,T=>e("button",{key:T.value,onClick:V=>q(T.value),disabled:y.value,class:se(["px-4 py-2 rounded-md text-sm font-medium transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed",i.value===T.value?"bg-indigo-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"])},h(T.label),11,Dk)),64))])])])])):["devotees","statusActive","statusInactive"].includes(a.value)?(m(),g("div",Ck,[e("div",Tk,[e("div",null,[x[18]||(x[18]=e("label",{class:"block text-gray-700 font-medium mb-2"},"Join Date Period",-1)),e("div",Ek,[(m(),g(be,null,$e(f,T=>e("button",{key:T.value,onClick:V=>q(T.value),disabled:y.value,class:se(["px-4 py-2 rounded-md text-sm font-medium transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed",i.value===T.value?"bg-indigo-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"])},h(T.label),11,Ak)),64))])]),a.value==="devotees"?(m(),g("div",Ik,[x[20]||(x[20]=e("label",{class:"block text-gray-700 font-medium mb-2"},"Devotee Status",-1)),e("div",Mk,[ce(e("select",{"onUpdate:modelValue":x[6]||(x[6]=T=>w.value=T),disabled:y.value,class:"block w-full py-2 px-3 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 disabled:bg-gray-100 disabled:cursor-not-allowed"},[...x[19]||(x[19]=[e("option",{value:"all"},"All Statuses",-1),e("option",{value:"active"},"Active",-1),e("option",{value:"inactive"},"Inactive",-1),e("option",{value:"new"},"New Members",-1)])],8,Rk),[[Re,w.value]])])])):a.value==="statusActive"||a.value==="statusInactive"?(m(),g("div",Pk,[x[21]||(x[21]=e("label",{class:"block text-gray-700 font-medium mb-2"},"Status Filter",-1)),e("div",Nk,[e("span",jk,h(a.value==="statusActive"?"Active Devotees Only":"Inactive Devotees Only"),1)])])):J("",!0)])])):a.value==="profile"?(m(),g("div",Lk,[...x[22]||(x[22]=[e("p",{class:"text-gray-600 mb-6"},"This report includes detailed profile information for devotees.",-1)])])):J("",!0),i.value==="custom"?(m(),g("div",Bk,[e("div",Uk,[e("div",null,[x[23]||(x[23]=e("label",{class:"block text-gray-700 text-sm font-medium mb-2"},"Start Date",-1)),ce(e("input",{type:"date","onUpdate:modelValue":x[7]||(x[7]=T=>u.value=T),disabled:y.value,class:"w-full py-2 px-3 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 disabled:bg-gray-100 disabled:cursor-not-allowed"},null,8,Fk),[[_e,u.value]])]),e("div",null,[x[24]||(x[24]=e("label",{class:"block text-gray-700 text-sm font-medium mb-2"},"End Date",-1)),ce(e("input",{type:"date","onUpdate:modelValue":x[8]||(x[8]=T=>p.value=T),disabled:y.value,class:"w-full py-2 px-3 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 disabled:bg-gray-100 disabled:cursor-not-allowed"},null,8,Vk),[[_e,p.value]])])])])):J("",!0),e("div",Ok,[e("div",zk,[x[27]||(x[27]=e("div",{class:"mb-4 md:mb-0"},[e("h4",{class:"text-lg font-medium text-gray-900"},"Download Report"),e("p",{class:"text-sm text-gray-600"},"Select a format and click download")],-1)),e("div",Hk,[e("div",qk,[ce(e("select",{"onUpdate:modelValue":x[9]||(x[9]=T=>c.value=T),disabled:y.value,class:"block w-full py-2 px-3 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 disabled:bg-gray-100 disabled:cursor-not-allowed"},[(m(),g(be,null,$e(v,T=>e("option",{key:T.value,value:T.value},h(T.label),9,Jk)),64))],8,Gk),[[Re,c.value]])]),e("button",{onClick:Q,disabled:y.value,class:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50 disabled:cursor-not-allowed"},[$.value?(m(),g("svg",Yk,[...x[25]||(x[25]=[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)])])):(m(),g("svg",Kk,[...x[26]||(x[26]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"},null,-1)])])),te(" "+h($.value?"Downloading...":"Download"),1)],8,Wk)])])])])]),e("div",Xk,[e("div",Zk,[x[33]||(x[33]=e("h3",{class:"text-lg font-medium text-gray-900 mb-4"},"Applied Filters",-1)),e("div",Qk,[e("div",e_,[x[28]||(x[28]=e("span",{class:"font-medium mr-1"},"Report Type:",-1)),te(" "+h(k()),1)]),e("div",t_,[e("span",o_,h(A.value?"Tenant(s):":"Tenant:"),1),A.value&&F.value.length>1?(m(),g("span",s_,h(F.value.length)+" selected ",1)):A.value&&F.value.length===1?(m(),g("span",n_,h(F.value[0]),1)):(m(),g("span",r_,h(I.value),1))]),e("div",a_,[x[29]||(x[29]=e("span",{class:"font-medium mr-1"},"Temple:",-1)),te(" "+h(d.value==="all"?"All Temples":K(d.value)),1)]),e("div",l_,[e("span",i_,h(["birthdays","profile"].includes(a.value)?"Birthday":"Join Date")+" Period:",1),te(" "+h(H(i.value))+" ",1),i.value==="custom"?(m(),g("span",d_," ("+h(ge(u.value))+" - "+h(ge(p.value))+") ",1)):J("",!0)]),e("div",u_,[x[30]||(x[30]=e("span",{class:"font-medium mr-1"},"Status:",-1)),te(" "+h(z()),1)]),e("div",c_,[x[31]||(x[31]=e("span",{class:"font-medium mr-1"},"Format:",-1)),te(" "+h(O(c.value)),1)]),e("div",p_,[x[32]||(x[32]=e("span",{class:"font-medium mr-1"},"Tenant ID:",-1)),te(" "+h(I.value),1)])]),x[34]||(x[34]=e("p",{class:"mt-4 text-sm text-gray-600"}," Your report will include data based on the filters above. Click Download to generate and download the report. ",-1))])]),E.value?(m(),g("div",m_,[e("div",g_,[x[35]||(x[35]=e("h3",{class:"text-lg font-medium text-gray-900"},"Report Preview",-1)),e("p",f_," Showing "+h(b.value.totalRecords||M.value.length)+" records ",1)]),e("div",v_,[e("table",h_,[e("thead",y_,[e("tr",null,[(m(!0),g(be,null,$e(R.value,T=>(m(),g("th",{key:T.key,class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},h(T.label),1))),128))])]),e("tbody",x_,[(m(!0),g(be,null,$e(M.value.slice(0,10),(T,V)=>(m(),g("tr",{key:V},[(m(!0),g(be,null,$e(R.value,Z=>(m(),g("td",{key:Z.key,class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},h((T==null?void 0:T[Z.key])||"-"),1))),128))]))),128))])])]),M.value.length>10?(m(),g("div",b_," Showing first 10 records. Download the full report to see all "+h(b.value.totalRecords||M.value.length)+" records. ",1)):J("",!0)])):J("",!0)])])}}},k_=async()=>{var t,o;try{console.log(" Fetching tenants for selection");const s=await pe.get("/tenants/selection");return console.log(" Tenants fetched:",s.data),Array.isArray(s.data)?s.data:(t=s.data)!=null&&t.data&&Array.isArray(s.data.data)?s.data.data:(console.warn(" Unexpected tenants response format:",s.data),[])}catch(s){return console.error(" Error fetching tenants for selection:",s),console.error("Error response:",(o=s.response)==null?void 0:o.data),[]}},__=async t=>{var o;try{console.log(" Making API call to fetch available temples"),console.log(" Search params:",{tenantId:t,headers:pe.defaults.headers.common});const s=window.location.pathname;console.log(" Current path:",s),t&&(pe.defaults.headers.common["X-Tenant-ID"]=t);const r=(We().userRole||"").toLowerCase(),l=r.includes("monitoring")||r.includes("monitoringuser"),a=r.includes("standard")||r.includes("standarduser");let d="/entities";(l||a)&&t?(console.log(" Standard/Monitoring user accessing temples for tenant ID:",t),d="/entities"):t?(console.log(" Using admin endpoint: /entities"),d="/entities"):(console.log(" Using user endpoint: /entities/available"),d="/entities/available"),console.log(` Making GET request to: ${d}`);const i=await pe.get(d);let c=i.data;return i.data&&i.data.data&&Array.isArray(i.data.data)?c=i.data.data:Array.isArray(c)||(console.warn(" Unexpected response format:",i.data),c=[]),console.log(` Received ${c.length} temples:`,c),c}catch(s){return console.error(" Error fetching temples:",s),console.error("Error response:",(o=s.response)==null?void 0:o.data),[]}},$_=async t=>{var o;try{console.log(` Fetching temple with ID: ${t}`);const s=await pe.get(`/entities/${t}`);return console.log(" Temple details response:",s.data),s.data}catch(s){throw console.error(` Error fetching temple ID ${t}:`,s),console.error("Error response:",(o=s.response)==null?void 0:o.data),s}},S_=async t=>{try{return(await pe.post("/entities",t)).data}catch(o){throw console.error("Error creating temple:",o),o}},D_=async(t,o)=>{try{return(await pe.put(`/entities/${t}`,o)).data}catch(s){throw console.error("Error updating temple:",s),s}},C_=async t=>{try{return(await pe.delete(`/entities/${t}`)).data}catch(o){throw console.error("Error deleting temple:",o),o}},T_=async(t,o={})=>{var s;try{console.log(" Fetching tenant users");const n=new URLSearchParams;o.role&&n.append("role",o.role),o.name&&n.append("name",o.name);const r=n.toString(),l=`/tenants/${t}/user/management${r?`?${r}`:""}`;console.log(` Making GET request to: ${l}`);const a=await pe.get(l);let d=a.data;a.data&&a.data.data&&Array.isArray(a.data.data)&&(d=a.data.data);const i=d.map(Ma);return console.log(` Received ${i.length} users:`,i),i}catch(n){return console.error(" Error fetching tenant users:",n),console.error("Error response:",(s=n.response)==null?void 0:s.data),[]}},E_=async(t,o)=>{var s;try{console.log(` Creating/updating user for tenant ${t}:`,o),pe.defaults.headers.common["X-Tenant-ID"]=t;const n={Name:o.name,Email:o.email,Phone:o.phone,Password:o.password,Role:o.role,Status:o.status||"active"},r=await pe.post(`/tenants/${t}/user`,n);console.log(" User creation response:",r.data);const l=r.data.user||r.data;return Ma(l)}catch(n){throw console.error(" Error creating/updating tenant user:",n),console.error("Error response:",(s=n.response)==null?void 0:s.data),n}},A_=async(t,o)=>{var s;try{console.log(` Updating user ${o.id} for tenant ${t}:`,o),pe.defaults.headers.common["X-Tenant-ID"]=t;const n=o.hasOwnProperty("status")&&Object.keys(o).filter(l=>l!=="id"&&l!=="status").length===0;let r;if(n)console.log(` Sending status update (${o.status}) for user ${o.id}`),r=await pe.put(`/tenants/${t}/user/${o.id}`,{Status:o.status});else{const l={Name:o.name,Email:o.email,Phone:o.phone,Role:o.role,Password:o.password||"password123",Status:o.status};console.log(` Sending full update for user ${o.id}:`,l),r=await pe.put(`/tenants/${t}/user/${o.id}`,l)}return console.log(" User update response:",r.data),r.data.user||r.data}catch(n){throw console.error(" Error updating tenant user:",n),console.error("Error response:",(s=n.response)==null?void 0:s.data),n}},I_=async(t,o,s)=>{var n;try{console.log(` Updating status to ${s} for user ${o} in tenant ${t}`),pe.defaults.headers.common["X-Tenant-ID"]=t;const r=await pe.put(`/tenants/${t}/user/${o}`,{Status:s});return console.log(" Status update response:",r.data),r.data.user||r.data}catch(r){throw console.error(" Error updating status:",r),console.error("Error response:",(n=r.response)==null?void 0:n.data),r}},Ma=t=>{if(!t)return t;const o={...t};return typeof o.role=="string"&&(o.role.toLowerCase()==="monitoringuser"?o.role="MonitoringUser":o.role.toLowerCase()==="standarduser"&&(o.role="StandardUser")),o},M_={getTenantsForSelection:k_,getTemples:__,getTempleById:$_,createTemple:S_,updateTemple:D_,deleteTemple:C_,getTenantUsers:T_,createOrUpdateTenantUser:E_,updateTenantUser:A_,updateUserStatus:I_,standardizeUserData:Ma},R_={class:"tenant-selection-page"},P_={class:"bg-indigo-50 rounded-2xl shadow-md p-6 mb-6"},N_={class:"flex flex-col md:flex-row md:items-center justify-between"},j_={class:"text-2xl font-bold text-indigo-800 mb-2"},L_={class:"flex flex-wrap gap-3 items-center"},B_={class:"bg-indigo-600 text-white text-sm px-3 py-1 rounded-xl"},U_={class:"text-indigo-700"},F_={key:0,class:"mt-4 md:mt-0"},V_={class:"bg-white rounded-2xl shadow-md p-6"},O_={class:"text-xl font-bold text-indigo-700 mb-4"},z_={class:"text-gray-600 mb-6"},H_={key:0,class:"flex justify-center"},q_={key:1},G_={class:"mb-6"},J_={class:"relative"},W_={key:0,class:"flex justify-center py-12"},Y_={key:1,class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4"},K_=["onClick"],X_={class:"relative h-36 bg-indigo-100 overflow-hidden"},Z_=["src","alt"],Q_={key:1,class:"w-full h-full flex items-center justify-center"},e6={class:"absolute top-2 right-2"},t6={class:"p-4"},o6={class:"font-bold text-lg text-indigo-900 mb-1"},s6={class:"text-gray-600 text-sm mb-3"},n6={class:"flex items-center text-gray-500 text-sm mb-3"},r6=["onClick"],a6={key:2,class:"text-center py-8"},l6={key:3,class:"mt-8 flex justify-center"},i6={__name:"TenantSelectionView",setup(t){var F,I,C,j,$;const o=We(),s=et(),{showToast:n}=Ue(),r=B({id:((F=o.user)==null?void 0:F.id)||1,name:((I=o.user)==null?void 0:I.fullName)||((C=o.user)==null?void 0:C.name)||"User",email:((j=o.user)==null?void 0:j.email)||"user@example.com",role:o.userRole||(($=o.user)==null?void 0:$.role)||"standard_user"}),l=B(!1),a=B([]),d=B(null),i=B(""),c=oe(()=>{var b;const y=((b=r.value.role)==null?void 0:b.toLowerCase())||"";return y==="superadmin"||y==="super_admin"}),u=oe(()=>{var b;const y=((b=r.value.role)==null?void 0:b.toLowerCase())||"";return y==="monitoringuser"||y==="monitoring_user"}),p=B(!c.value),w=oe(()=>c.value?"As a Super Admin, you can access and manage all tenant dashboards.":u.value?"Select a tenant to view their dashboard. As a Monitoring User, you have limited access to view data.":"Select a tenant to access their dashboard and management features."),f=oe(()=>{if(!i.value)return a.value;const y=i.value.toLowerCase();return a.value.filter(b=>{var E,R,M;return((E=b.name)==null?void 0:E.toLowerCase().includes(y))||((R=b.location)==null?void 0:R.toLowerCase().includes(y))||((M=b.email)==null?void 0:M.toLowerCase().includes(y))})}),v=async()=>{l.value=!0,p.value=!0;try{const y=await M_.getTenantsForSelection();Array.isArray(y)&&y.length>0?a.value=y:(a.value=[],n("No tenants available for selection","warning"))}catch(y){console.error("Failed to load tenants:",y),n("Using development data while API is being set up","info")}finally{l.value=!1}},N=y=>{d.value=Number(y)},A=async()=>{if(!d.value){n("Please select a tenant to proceed","warning");return}try{localStorage.setItem("selected_tenant_id",d.value),localStorage.setItem("current_tenant_id",d.value),localStorage.setItem("current_entity_id",d.value);const y=localStorage.getItem("auth_token");y&&(Ie.defaults.headers.common.Authorization=`Bearer ${y}`,Ie.defaults.headers.common["X-Tenant-ID"]=d.value);const b=a.value.find(E=>Number(E.id)===Number(d.value));b&&localStorage.setItem("selected_tenant_name",b.name),o.setSelectedTenant&&o.setSelectedTenant(d.value),await s.push(`/tenant/${d.value}/dashboard`),n(`Accessing ${(b==null?void 0:b.name)||"tenant"} dashboard`,"success")}catch(y){console.error("Navigation error:",y),n("Failed to navigate to dashboard. Please try again.","error")}};return Me(()=>{c.value||v();const y=localStorage.getItem("selected_tenant_id");y&&(d.value=Number(y));const b=localStorage.getItem("auth_token");b&&(Ie.defaults.headers.common.Authorization=`Bearer ${b}`)}),(y,b)=>(m(),g("div",R_,[e("div",P_,[e("div",N_,[e("div",null,[e("h1",j_,"Welcome, "+h(r.value.name),1),e("div",L_,[e("span",B_,h(r.value.role),1),e("span",U_,h(r.value.email),1)])]),c.value?(m(),g("div",F_,[...b[1]||(b[1]=[e("p",{class:"text-indigo-600 font-semibold"}," Super Admin Access ",-1)])])):J("",!0)])]),e("div",V_,[e("h2",O_,h(c.value?"Tenant Management":"Select a Tenant"),1),e("p",z_,h(w.value),1),c.value&&!p.value?(m(),g("div",H_,[e("button",{onClick:v,class:"bg-indigo-600 hover:bg-indigo-700 text-white font-semibold py-3 px-6 rounded-xl shadow-md transition-all duration-200 flex items-center"},[...b[2]||(b[2]=[e("span",null,"Show Tenants",-1),e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 ml-2",viewBox:"0 0 20 20",fill:"currentColor"},[e("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm1-11a1 1 0 10-2 0v3.586L7.707 9.293a1 1 0 00-1.414 1.414l3 3a1 1 0 001.414 0l3-3a1 1 0 00-1.414-1.414L11 10.586V7z","clip-rule":"evenodd"})],-1)])])])):J("",!0),p.value?(m(),g("div",q_,[e("div",G_,[e("div",J_,[ce(e("input",{"onUpdate:modelValue":b[0]||(b[0]=E=>i.value=E),type:"text",placeholder:"Search tenants...",class:"w-full pl-10 pr-4 py-2 border border-indigo-200 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-all duration-200"},null,512),[[_e,i.value]]),b[3]||(b[3]=e("div",{class:"absolute left-3 top-2.5 text-indigo-400"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor"},[e("path",{"fill-rule":"evenodd",d:"M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z","clip-rule":"evenodd"})])],-1))])]),l.value?(m(),g("div",W_,[...b[4]||(b[4]=[e("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600"},null,-1)])])):f.value.length>0?(m(),g("div",Y_,[(m(!0),g(be,null,$e(f.value,E=>(m(),g("div",{key:E.id,onClick:R=>N(E.id),class:se(["bg-white border rounded-xl overflow-hidden shadow-md hover:shadow-lg transition-all duration-200 cursor-pointer",{"border-indigo-500 ring-2 ring-indigo-500":d.value===E.id,"border-gray-200":d.value!==E.id}])},[e("div",X_,[E.imageUrl?(m(),g("img",{key:0,src:E.imageUrl,alt:E.name,class:"w-full h-full object-cover"},null,8,Z_)):(m(),g("div",Q_,[...b[5]||(b[5]=[e("span",{class:"text-indigo-800 text-5xl opacity-30"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-16 w-16",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1",d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})])],-1)])])),e("div",e6,[e("span",{class:se(["px-2 py-1 text-xs font-semibold rounded-lg",{"bg-green-100 text-green-800":E.status==="active"||E.status==="approved","bg-yellow-100 text-yellow-800":E.status==="pending","bg-red-100 text-red-800":E.status==="inactive"}])},h(E.status),3)])]),e("div",t6,[e("h3",o6,h(E.name),1),e("p",s6,h(E.location||E.email),1),e("div",n6,[b[6]||(b[6]=e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})],-1)),e("span",null,h(E.templesCount||0)+" temples",1)]),e("button",{onClick:qe(R=>N(E.id),["stop"]),class:se(["w-full py-2 px-4 flex justify-center items-center rounded-lg text-sm font-medium transition-all duration-200",d.value===E.id?"bg-indigo-600 text-white hover:bg-indigo-700":"border border-indigo-500 text-indigo-600 hover:bg-indigo-50"])},h(d.value===E.id?"Selected":"Select"),11,r6)])],10,K_))),128))])):(m(),g("div",a6,[...b[7]||(b[7]=[Ce('<div class="text-indigo-300 mb-4" data-v-a1ccdec2><svg xmlns="http://www.w3.org/2000/svg" class="h-16 w-16 mx-auto" fill="none" viewBox="0 0 24 24" stroke="currentColor" data-v-a1ccdec2><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1" d="M8 16l2.879-2.879m0 0a3 3 0 104.243-4.242 3 3 0 00-4.243 4.242zM21 12a9 9 0 11-18 0 9 9 0 0118 0z" data-v-a1ccdec2></path></svg></div><h3 class="text-lg font-medium text-gray-800 mb-1" data-v-a1ccdec2>No tenants found</h3><p class="text-gray-500" data-v-a1ccdec2>Try adjusting your search or filters</p>',3)])])),d.value&&f.value.length>0?(m(),g("div",l6,[e("button",{onClick:A,class:"bg-indigo-600 hover:bg-indigo-700 text-white font-semibold py-3 px-8 rounded-xl shadow-md transition-all duration-200 flex items-center",id:"proceed-button"},[...b[8]||(b[8]=[e("span",null,"Proceed to Dashboard",-1),e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 ml-2",viewBox:"0 0 20 20",fill:"currentColor"},[e("path",{"fill-rule":"evenodd",d:"M10.293 5.293a1 1 0 011.414 0l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414-1.414L12.586 11H5a1 1 0 110-2h7.586l-2.293-2.293a1 1 0 010-1.414z","clip-rule":"evenodd"})],-1)])])])):J("",!0)])):J("",!0)])]))}},d6=ot(i6,[["__scopeId","data-v-a1ccdec2"]]),u6={class:"min-h-screen bg-gradient-to-br from-indigo-50 via-white to-indigo-100"},c6={class:"flex-1"},ap={__name:"PublicLayout",setup(t){return B(!1),(o,s)=>{const n=Ze("router-view");return m(),g("div",u6,[e("main",c6,[le(n)])])}}},p6={class:"min-h-screen bg-gradient-to-br from-indigo-50 via-white to-indigo-100 flex flex-col"},m6={class:"bg-white/80 backdrop-blur-sm border-b border-indigo-100"},g6={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},f6={class:"flex justify-between items-center h-16"},v6={class:"flex-1 flex items-center justify-center px-4 sm:px-6 lg:px-8 py-12"},h6={class:"w-full max-w-md"},y6={class:"bg-white/90 backdrop-blur-sm rounded-2xl shadow-xl border border-white/20 p-8"},x6={class:"bg-white/80 backdrop-blur-sm border-t border-indigo-100"},b6={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4"},w6={class:"flex flex-col sm:flex-row justify-between items-center space-y-2 sm:space-y-0"},k6={class:"flex items-center space-x-6"},_6={__name:"AuthLayout",setup(t){return(o,s)=>{const n=Ze("router-link"),r=Ze("router-view");return m(),g("div",p6,[e("header",m6,[e("div",g6,[e("div",f6,[le(n,{to:"/",class:"flex items-center space-x-3"},{default:ye(()=>[...s[0]||(s[0]=[e("div",{class:"flex items-center space-x-3"},[e("div",{class:"w-10 h-10 bg-gradient-to-br from-indigo-600 to-indigo-800 rounded-xl flex items-center justify-center"},[e("svg",{class:"w-6 h-6 text-white",fill:"currentColor",viewBox:"0 0 24 24"},[e("path",{d:"M12 2L2 7v10c0 5.55 3.84 9.739 9 11 5.16-1.261 9-5.45 9-11V7l-10-5z"})])]),e("span",{class:"text-xl font-bold text-gray-900"},"TempleSaaS")],-1)])]),_:1}),le(n,{to:"/",class:"text-gray-600 hover:text-indigo-600 transition-colors font-medium flex items-center space-x-2"},{default:ye(()=>[...s[1]||(s[1]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 19l-7-7m0 0l7-7m-7 7h18"})],-1),e("span",null,"Back to Home",-1)])]),_:1})])])]),e("main",v6,[e("div",h6,[e("div",y6,[le(r)]),s[2]||(s[2]=e("div",{class:"mt-6 text-center"},[e("p",{class:"text-sm text-gray-600"},[te(" Need help? "),e("a",{href:"mailto:support@templesync.com",class:"text-indigo-600 hover:text-indigo-700 font-medium transition-colors"}," Contact Support ")])],-1))])]),e("footer",x6,[e("div",b6,[e("div",w6,[s[5]||(s[5]=e("p",{class:"text-sm text-gray-600"},"  2025 TempleSync. All rights reserved. ",-1)),e("div",k6,[le(n,{to:"/terms",class:"text-sm text-gray-600 hover:text-indigo-600 transition-colors"},{default:ye(()=>[...s[3]||(s[3]=[te(" Terms ",-1)])]),_:1}),le(n,{to:"/privacy",class:"text-sm text-gray-600 hover:text-indigo-600 transition-colors"},{default:ye(()=>[...s[4]||(s[4]=[te(" Privacy ",-1)])]),_:1})])])])]),s[6]||(s[6]=e("div",{class:"fixed inset-0 -z-10 overflow-hidden pointer-events-none"},[e("div",{class:"absolute -top-40 -right-40 w-80 h-80 bg-indigo-300 rounded-full mix-blend-multiply filter blur-xl opacity-20 animate-pulse"}),e("div",{class:"absolute -bottom-40 -left-40 w-80 h-80 bg-purple-300 rounded-full mix-blend-multiply filter blur-xl opacity-20 animate-pulse",style:{"animation-delay":"2s"}}),e("div",{class:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-80 h-80 bg-pink-300 rounded-full mix-blend-multiply filter blur-xl opacity-10 animate-pulse",style:{"animation-delay":"4s"}})],-1))])}}},lp=Uo("notification",()=>{const t=B([]),o=B(0),s=B(!1),n=B(null);let r=null,l=null,a=0;const d=5,i=3e3,c=B(!1),u=B(null),p={TEMPLE_APPROVED:"temple_approved",TEMPLE_REJECTED:"temple_rejected",TEMPLE_PENDING:"temple_pending",NEW_DEVOTEE_REGISTRATION:"new_devotee_registration",NEW_SEVA_BOOKING:"new_seva_booking",NEW_DONATION:"new_donation",EVENT_RSVP:"event_rsvp",PROFILE_INCOMPLETE:"profile_incomplete",SEVA_CONFIRMATION:"seva_confirmation",SEVA_REMINDER:"seva_reminder",DONATION_RECEIPT:"donation_receipt",EVENT_INVITATION:"event_invitation",EVENT_REMINDER:"event_reminder",TEMPLE_ANNOUNCEMENT:"temple_announcement",ASSIGNMENT_CREATED:"assignment_created",ASSIGNMENT_UPDATED:"assignment_updated",SCHEDULE_CHANGED:"schedule_changed",NEW_TENANT_REGISTRATION:"new_tenant_registration",TEMPLE_APPROVAL_REQUIRED:"temple_approval_required",SYSTEM_MAINTENANCE:"system_maintenance",SYSTEM_UPDATE:"system_update",WELCOME:"welcome",SUCCESS:"success",ERROR:"error",WARNING:"warning",INFO:"info"},w={LOW:"low",MEDIUM:"medium",HIGH:"high",URGENT:"urgent"},f={TEMPLE:"temple",SEVA:"seva",DONATION:"donation",EVENT:"event",PROFILE:"profile",SYSTEM:"system",APPROVAL:"approval",COMMUNICATION:"communication"},v=oe(()=>t.value.filter(D=>!D.isRead)),N=oe(()=>t.value.filter(D=>!D.isRead).sort((D,x)=>new Date(x.createdAt)-new Date(D.createdAt)).slice(0,5)),A=oe(()=>{const D={};return t.value.forEach(x=>{const S=x.category||"general";D[S]||(D[S]=[]),D[S].push(x)}),D}),F=oe(()=>t.value.filter(D=>D.priority===w.HIGH||D.priority===w.URGENT)),I=D=>{const x={id:D.id||Date.now()+Math.random(),title:D.title||"Notification",message:D.message||"",type:D.type||p.INFO,category:D.category||f.SYSTEM,priority:D.priority||w.MEDIUM,isRead:D.isRead||!1,isPersistent:D.isPersistent||!1,autoClose:D.autoClose!==!1,duration:D.duration||5e3,createdAt:D.createdAt||new Date().toISOString(),readAt:D.readAt||null,userId:D.userId||null,entityId:D.entityId||null,actionUrl:D.actionUrl||null,actionText:D.actionText||null,metadata:D.metadata||{},icon:D.icon||K(D.type),color:D.color||H(D.type)};return t.value.findIndex(P=>P.id===x.id)===-1&&(t.value.unshift(x),x.isRead||o.value++),x.id},C=D=>{const x=t.value.find(S=>S.id===D);x&&!x.isRead&&(x.isRead=!0,x.readAt=new Date().toISOString(),o.value=Math.max(0,o.value-1))},j=()=>{t.value.forEach(D=>{D.isRead||(D.isRead=!0,D.readAt=new Date().toISOString())}),o.value=0},$=D=>{const x=t.value.findIndex(S=>S.id===D);x>-1&&(t.value[x].isRead||(o.value=Math.max(0,o.value-1)),t.value.splice(x,1))},y=()=>{t.value=[],o.value=0},b=()=>{t.value=t.value.filter(D=>!D.isRead)},E=(D,x="info",S={})=>I({title:S.title||O(x),message:D,type:x,category:f.SYSTEM,priority:S.priority||w.MEDIUM,autoClose:S.autoClose!==!1,duration:S.duration||ee(x),isPersistent:!1,...S}),R=(D,x={})=>E(D,p.SUCCESS,x),M=(D,x={})=>E(D,p.ERROR,{duration:8e3,priority:w.HIGH,...x}),G=(D,x={})=>E(D,p.WARNING,x),U=(D,x={})=>E(D,p.INFO,x),_=(D,x)=>I({title:x?"Temple Approved!":"Temple Rejected",message:x?`Your temple "${D.name}" has been approved. You can now start managing your temple.`:`Your temple "${D.name}" was rejected. Please check the notes and resubmit.`,type:x?p.TEMPLE_APPROVED:p.TEMPLE_REJECTED,category:f.TEMPLE,priority:w.HIGH,isPersistent:!0,autoClose:!1,actionUrl:x?"/tenant/dashboard":"/tenant/entities/create",actionText:x?"View Dashboard":"Resubmit Temple",metadata:{templeId:D.id}}),k=(D,x)=>I({title:"New Seva Booking",message:`${x.name} has booked ${D.name} seva.`,type:p.NEW_SEVA_BOOKING,category:f.SEVA,priority:w.MEDIUM,isPersistent:!0,actionUrl:`/entity/${D.entityId}/sevas`,actionText:"View Seva",metadata:{sevaId:D.id,devoteeId:x.id}}),L=D=>I({title:"Donation Received",message:`New donation of ${D.amount} received from ${D.donorName}.`,type:p.NEW_DONATION,category:f.DONATION,priority:w.MEDIUM,isPersistent:!0,actionUrl:`/entity/${D.entityId}/donations`,actionText:"View Donation",metadata:{donationId:D.id}}),z=D=>I({title:"Complete Your Profile",message:"Please complete your profile to enjoy full temple services.",type:p.PROFILE_INCOMPLETE,category:f.PROFILE,priority:w.MEDIUM,isPersistent:!0,actionUrl:"/profile/complete",actionText:"Complete Profile",metadata:{devoteeId:D.id}}),q=D=>I({title:"Event Invitation",message:`You're invited to ${D.name} on ${new Date(D.date).toLocaleDateString()}.`,type:p.EVENT_INVITATION,category:f.EVENT,priority:w.MEDIUM,isPersistent:!0,actionUrl:`/entity/${D.entityId}/events/${D.id}`,actionText:"View Event",metadata:{eventId:D.id}}),K=D=>({[p.SUCCESS]:"CheckCircle",[p.ERROR]:"XCircle",[p.WARNING]:"AlertTriangle",[p.INFO]:"Info",[p.TEMPLE_APPROVED]:"CheckCircle",[p.TEMPLE_REJECTED]:"XCircle",[p.NEW_SEVA_BOOKING]:"Calendar",[p.NEW_DONATION]:"CreditCard",[p.EVENT_INVITATION]:"Calendar",[p.PROFILE_INCOMPLETE]:"User",[p.ASSIGNMENT_CREATED]:"UserCheck",[p.SYSTEM_MAINTENANCE]:"Settings"})[D]||"Bell",H=D=>({[p.SUCCESS]:"text-green-600 bg-green-50",[p.ERROR]:"text-red-600 bg-red-50",[p.WARNING]:"text-yellow-600 bg-yellow-50",[p.INFO]:"text-indigo-600 bg-indigo-50",[p.TEMPLE_APPROVED]:"text-green-600 bg-green-50",[p.TEMPLE_REJECTED]:"text-red-600 bg-red-50",[p.NEW_SEVA_BOOKING]:"text-indigo-600 bg-indigo-50",[p.NEW_DONATION]:"text-purple-600 bg-purple-50",[p.EVENT_INVITATION]:"text-blue-600 bg-blue-50"})[D]||"text-indigo-600 bg-indigo-50",O=D=>({[p.SUCCESS]:"Success",[p.ERROR]:"Error",[p.WARNING]:"Warning",[p.INFO]:"Information"})[D]||"Notification",ee=D=>({[p.SUCCESS]:4e3,[p.ERROR]:8e3,[p.WARNING]:6e3,[p.INFO]:5e3})[D]||5e3,ge=async(D=20)=>{s.value=!0;try{const{data:x}=await Fe.inapp.listInApp(D);t.value=(x||[]).map(S=>({id:S.id,title:S.title,message:S.message,category:S.category,isRead:S.is_read,createdAt:S.created_at,type:S.type||p.INFO,priority:S.priority||w.MEDIUM,actionUrl:S.action_url||null,actionText:S.action_text||null,metadata:S.metadata||{}})),o.value=t.value.filter(S=>!S.isRead).length,n.value=new Date().toISOString()}catch(x){console.error("Failed to fetch notifications:",x),n.value&&M("Failed to load notifications")}finally{s.value=!1}},de=async D=>{try{await Fe.inapp.markInAppRead(D);const x=t.value.find(S=>S.id===D);x&&!x.isRead&&(x.isRead=!0,x.readAt=new Date().toISOString(),o.value=Math.max(0,o.value-1))}catch(x){console.error("Failed to mark notification as read:",x)}},ie=()=>{if(r){console.log("SSE already connected");return}if(a>=d){console.error("Max SSE reconnection attempts reached"),u.value="Unable to establish real-time connection";return}try{const D="http://localhost:8080/api/v1",x=localStorage.getItem("auth_token");if(!x){console.warn("No auth token available for SSE connection");return}console.log("SSE Connection baseURL:",D);const S=`${D}/v1/notifications/stream-token?token=${x}`;console.log("Connecting to SSE:",S),r=new EventSource(S,{withCredentials:!0}),r.addEventListener("open",()=>{console.log(" SSE connection established"),c.value=!0,u.value=null,a=0}),r.addEventListener("ping",()=>{console.log("SSE heartbeat received")}),r.addEventListener("inapp",P=>{try{const T=JSON.parse(P.data);console.log(" Received SSE notification:",T);const V={id:T.id,title:T.title,message:T.message,category:T.category,isRead:T.is_read||!1,createdAt:T.created_at,type:T.type||p.INFO,priority:T.priority||w.MEDIUM,actionUrl:T.action_url||null,actionText:T.action_text||null,metadata:T.metadata||{}};t.value.findIndex(X=>X.id===V.id)===-1&&(t.value.unshift(V),V.isRead||(o.value++,V.category!==f.SYSTEM&&E(V.message,V.type,{title:V.title,duration:6e3})))}catch(T){console.error("Failed to parse SSE notification:",T)}}),r.onerror=P=>{console.error("SSE connection error:",P),c.value=!1,u.value="Connection lost",me(),a++;const T=Math.min(i*Math.pow(2,a-1),3e4);console.log(`Attempting to reconnect SSE... (attempt ${a}/${d}) in ${T}ms`),l=setTimeout(()=>{ie()},T)}}catch(D){console.error("Failed to create SSE connection:",D),c.value=!1,u.value="Failed to connect"}},me=()=>{l&&(clearTimeout(l),l=null),r&&(console.log("Disconnecting SSE stream"),r.close(),r=null,c.value=!1)};return{notifications:t,unreadCount:o,isLoading:s,lastFetch:n,isConnected:c,connectionError:u,NOTIFICATION_TYPES:p,PRIORITY_LEVELS:w,CATEGORIES:f,unreadNotifications:v,recentNotifications:N,notificationsByCategory:A,highPriorityNotifications:F,addNotification:I,markAsRead:C,markAllAsRead:j,removeNotification:$,clearAll:y,clearRead:b,showToast:E,showSuccess:R,showError:M,showWarning:G,showInfo:U,showTempleApprovalNotification:_,showSevaBookingNotification:k,showDonationNotification:L,showProfileIncompleteReminder:z,showEventInvitation:q,fetchNotifications:ge,markInAppAsRead:de,cleanupOldNotifications:(D=30)=>{const x=new Date;x.setDate(x.getDate()-D);const S=t.value.length;t.value=t.value.filter(T=>new Date(T.createdAt)>x||T.isPersistent),o.value=t.value.filter(T=>!T.isRead).length;const P=S-t.value.length;P>0&&console.log(`Cleaned up ${P} old notifications`)},connectStream:ie,disconnectStream:me,reconnectStream:()=>{me(),a=0,ie()}}}),$6={class:"relative"},S6={class:"relative"},D6=["src","alt"],C6={key:1,class:"w-8 h-8 rounded-full bg-gradient-to-br from-indigo-500 to-indigo-700 flex items-center justify-center shadow-sm"},T6={class:"text-white text-sm font-semibold"},E6={class:"hidden sm:block text-left"},A6={class:"text-gray-900 font-medium"},I6={class:"text-gray-500 text-xs capitalize"},M6={key:0,class:"absolute right-0 mt-2 w-72 bg-white rounded-xl shadow-2xl border border-gray-200 z-50 overflow-hidden"},R6={class:"p-4 bg-gradient-to-r from-indigo-50 to-purple-50 border-b border-gray-200"},P6={class:"flex items-center space-x-3"},N6={class:"relative"},j6=["src","alt"],L6={key:1,class:"w-12 h-12 rounded-full bg-gradient-to-br from-indigo-500 to-indigo-700 flex items-center justify-center shadow-lg"},B6={class:"text-white text-lg font-semibold"},U6={class:"flex-1 min-w-0"},F6={class:"text-lg font-semibold text-gray-900 truncate"},V6={class:"text-sm text-gray-600"},O6={class:"flex items-center mt-1"},z6={class:"inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-indigo-100 text-indigo-800 capitalize"},H6={class:"py-2"},q6={class:"flex items-center space-x-2"},G6={class:"relative"},J6=["checked"],W6={__name:"AppProfileDropdown",props:{user:{type:Object,default:()=>({})},role:{type:String,default:"user"}},emits:["logout"],setup(t,{emit:o}){const s=t,n=o,r=tt(),l=We(),a=oe(()=>l.user||s.user),d=oe(()=>l.userRole||s.role),i=B(!1),c=B(!0);B(!1);const u=()=>{i.value=!i.value},p=()=>{i.value=!1},w=C=>C?C.split(" ").map(j=>j.charAt(0)).join("").toUpperCase().slice(0,2):"U",f=()=>{const C=d.value;console.log(" Profile dropdown - current role:",C);const $={standard_user:"Standard User",standarduser:"Standard User",monitoring_user:"Monitoring User",monitoringuser:"Monitoring User",superadmin:"Super Admin",super_admin:"Super Admin",templeadmin:"Tenant",tenant:"Temple Admin",devotee:"Devotee",volunteer:"Volunteer",entity_admin:"Temple Manager",1:"Super Admin",2:"Temple Admin",3:"Devotee",4:"Volunteer",5:"Standard User",6:"Monitoring User"}[C]||"User";return console.log(" Profile dropdown - display name:",$),$},v=()=>{var $,y;const C=r.params.entityId||r.params.id,j=d.value;switch(console.log(" Profile link - role:",j,"entityId:",C),j){case"superadmin":case"super_admin":return"/superadmin/profile";case"tenant":case"templeadmin":return"/tenant/profile";case"entity_admin":return C?`/entity/${C}/profile`:"/profile";case"devotee":const b=(($=a.value)==null?void 0:$.id)||((y=a.value)==null?void 0:y.userId)||l.userId;return console.log(" Devotee profile - userId:",b),b?`/profiles/user/${b}`:"/profile";case"volunteer":return C?`/entity/${C}/volunteer/profile`:"/profile";case"standard_user":case"standarduser":case"monitoring_user":case"monitoringuser":const E=localStorage.getItem("current_tenant_id")||localStorage.getItem("selected_tenant_id");return E?`/entity/${E}/profile`:"/profile";default:return"/profile"}},N=()=>{const C=r.params.entityId||r.params.id,j=d.value;switch(console.log(" Settings link - role:",j,"entityId:",C),j){case"superadmin":case"super_admin":return"/superadmin/settings";case"tenant":case"templeadmin":return"/tenant/settings";case"entity_admin":return C?`/entity/${C}/settings`:"/settings";case"devotee":return C?`/entity/${C}/devotee/settings`:"/settings";case"volunteer":return C?`/entity/${C}/volunteer/settings`:"/settings";case"standard_user":case"standarduser":case"monitoring_user":case"monitoringuser":const $=localStorage.getItem("current_tenant_id")||localStorage.getItem("selected_tenant_id");return $?`/entity/${$}/settings`:"/settings";default:return"/settings"}},A=()=>{c.value=!c.value},F=()=>{p(),l.logout?l.logout():n("logout")},I=C=>{i.value&&!C.target.closest(".relative")&&p()};return Me(()=>{document.addEventListener("click",I)}),Pt(()=>{document.removeEventListener("click",I)}),(C,j)=>{var y,b,E,R,M,G,U,_,k,L,z;const $=Ze("router-link");return m(),g("div",$6,[e("button",{onClick:u,class:se(["flex items-center space-x-3 p-2 text-sm rounded-xl hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 transition-all duration-200",{"bg-gray-50":i.value}])},[e("div",S6,[(y=a.value)!=null&&y.avatar?(m(),g("img",{key:0,src:a.value.avatar,alt:a.value.name||a.value.fullName,class:"w-8 h-8 rounded-full object-cover ring-2 ring-white shadow-sm"},null,8,D6)):(m(),g("div",C6,[e("span",T6,h(w(((b=a.value)==null?void 0:b.name)||((E=a.value)==null?void 0:E.fullName))),1)])),j[0]||(j[0]=e("div",{class:"absolute -bottom-0.5 -right-0.5 w-3 h-3 bg-green-400 rounded-full ring-2 ring-white"},null,-1))]),e("div",E6,[e("p",A6,h(((R=a.value)==null?void 0:R.name)||((M=a.value)==null?void 0:M.fullName)||"User"),1),e("p",I6,h(f()),1)]),(m(),g("svg",{class:se(["w-4 h-4 text-gray-400 transition-transform duration-200",{"rotate-180":i.value}]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[...j[1]||(j[1]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"},null,-1)])],2))],2),i.value?(m(),g("div",M6,[e("div",R6,[e("div",P6,[e("div",N6,[(G=a.value)!=null&&G.avatar?(m(),g("img",{key:0,src:a.value.avatar,alt:a.value.name||a.value.fullName,class:"w-12 h-12 rounded-full object-cover ring-3 ring-white shadow-lg"},null,8,j6)):(m(),g("div",L6,[e("span",B6,h(w(((U=a.value)==null?void 0:U.name)||((_=a.value)==null?void 0:_.fullName))),1)])),j[2]||(j[2]=e("div",{class:"absolute -bottom-1 -right-1 w-4 h-4 bg-green-400 rounded-full ring-2 ring-white"},null,-1))]),e("div",U6,[e("h3",F6,h(((k=a.value)==null?void 0:k.name)||((L=a.value)==null?void 0:L.fullName)||"User"),1),e("p",V6,h(((z=a.value)==null?void 0:z.email)||"user@example.com"),1),e("div",O6,[e("span",z6,h(f()),1)])])])]),e("div",H6,[le($,{to:v(),onClick:p,class:"flex items-center px-4 py-3 text-sm text-gray-700 hover:bg-gray-50 hover:text-indigo-600 transition-colors duration-200"},{default:ye(()=>[...j[3]||(j[3]=[e("svg",{class:"mr-3 h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})],-1),te(" My Profile ",-1)])]),_:1},8,["to"]),le($,{to:N(),onClick:p,class:"flex items-center px-4 py-3 text-sm text-gray-700 hover:bg-gray-50 hover:text-indigo-600 transition-colors duration-200"},{default:ye(()=>[...j[4]||(j[4]=[e("svg",{class:"mr-3 h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})],-1),te(" Account Settings ",-1)])]),_:1},8,["to"]),e("button",{onClick:A,class:"w-full flex items-center justify-between px-4 py-3 text-sm text-gray-700 hover:bg-gray-50 hover:text-indigo-600 transition-colors duration-200"},[j[6]||(j[6]=e("div",{class:"flex items-center"},[e("svg",{class:"mr-3 h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 17h5l-5 5v-5z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 19l9 2-9-18-9 18 9-2z"})]),te(" Notifications ")],-1)),e("div",q6,[j[5]||(j[5]=e("span",{class:"text-xs text-gray-500"},"3 new",-1)),e("div",G6,[e("input",{type:"checkbox",checked:c.value,onChange:A,class:"sr-only"},null,40,J6),e("div",{class:se(["w-9 h-5 bg-gray-200 rounded-full shadow-inner transition-colors duration-200",c.value?"bg-indigo-600":"bg-gray-200"])},[e("div",{class:se(["w-4 h-4 bg-white rounded-full shadow transform transition-transform duration-200",c.value?"translate-x-4":"translate-x-0.5"]),style:{"margin-top":"2px"}},null,2)],2)])])]),j[9]||(j[9]=e("div",{class:"border-t border-gray-200 my-2"},null,-1)),le($,{to:"/support",onClick:p,class:"flex items-center px-4 py-3 text-sm text-gray-700 hover:bg-gray-50 hover:text-indigo-600 transition-colors duration-200"},{default:ye(()=>[...j[7]||(j[7]=[e("svg",{class:"mr-3 h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.575-3.006 2.907-.542.104-.994.54-.994 1.093m0 3h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1),te(" Help & Support ",-1)])]),_:1}),j[10]||(j[10]=e("div",{class:"border-t border-gray-200 my-2"},null,-1)),e("button",{onClick:F,class:"w-full flex items-center px-4 py-3 text-sm text-red-600 hover:bg-red-50 hover:text-red-700 transition-colors duration-200"},[...j[8]||(j[8]=[e("svg",{class:"mr-3 h-5 w-5 text-red-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})],-1),te(" Sign Out ",-1)])])])])):J("",!0),i.value?(m(),g("div",{key:1,onClick:p,class:"fixed inset-0 z-40"})):J("",!0)])}}},Y6={class:"bg-white shadow-lg border-b border-gray-200 sticky top-0 z-50"},K6={class:"px-2 sm:px-4 lg:px-6 xl:px-8"},X6={class:"flex justify-between items-center h-14 sm:h-16"},Z6={class:"flex items-center space-x-2"},Q6={key:0,class:"w-5 h-5 sm:w-6 sm:h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},e$={key:1,class:"w-5 h-5 sm:w-6 sm:h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},t$={class:"flex-shrink-0 flex items-center ml-1 sm:ml-2"},o$={class:"ml-2 sm:ml-3 hidden sm:block"},s$={class:"text-base sm:text-lg lg:text-xl font-bold text-gray-900 hover:text-indigo-600 transition-colors"},n$={key:0,class:"text-xs sm:text-sm text-gray-500 truncate max-w-24 sm:max-w-32 lg:max-w-48"},r$={class:"flex items-center space-x-1 sm:space-x-2 lg:space-x-4"},a$={key:0,class:"absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full h-5 w-5 flex items-center justify-center font-medium shadow-lg animate-pulse"},l$={class:"lg:hidden border-t border-gray-200 px-4 py-2 bg-gray-50"},i$={key:0,class:"notifications-container absolute top-14 sm:top-16 right-2 sm:right-4 w-80 sm:w-96 bg-white rounded-xl shadow-2xl border border-gray-200 z-50 max-h-96 overflow-hidden"},d$={class:"p-4 border-b border-gray-200 bg-gradient-to-r from-indigo-50 to-white"},u$={class:"flex items-center justify-between"},c$={class:"flex items-center space-x-2"},p$={key:0,class:"px-2 py-0.5 bg-indigo-100 text-indigo-700 text-xs font-medium rounded-full"},m$={class:"max-h-80 overflow-y-auto"},g$={key:0,class:"p-6 text-center"},f$={key:1,class:"p-6 text-center"},v$={key:2},h$=["onClick"],y$={class:"flex items-start space-x-3"},x$={class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},b$=["d"],w$={class:"flex-1 min-w-0"},k$={class:"text-sm font-semibold text-gray-900 truncate"},_$={class:"text-sm text-gray-600 mt-1 line-clamp-2"},$$={class:"flex items-center justify-between mt-2"},S$={class:"text-xs text-gray-400"},D$={key:0,class:"p-3 border-t border-gray-200 bg-gray-50"},C$={__name:"AppHeader",props:{showSidebar:{type:Boolean,default:!0}},emits:["toggle-menu","toggle-sidebar"],setup(t,{emit:o}){const s=o,n=We(),r=lp(),l=et(),a=tt(),d=Nt("sidebarOpen"),i=B(!1),c=B(!1),u=B(!1),p=oe(()=>n.user),w=oe(()=>{var L;return(L=n.user)==null?void 0:L.role}),f=oe(()=>r.unreadCount),v=oe(()=>r.notifications.slice(0,10)),N=oe(()=>{switch(w.value){case"tenant":return"Temple Admin";case"entity_admin":return"Devotee Connect";case"devotee":return"Devotee Dashboard";case"volunteer":return"Volunteer Portal";case"superadmin":return"Devotee Connect";default:return"Devotee Connect"}}),A=oe(()=>w.value==="entity_admin"||w.value==="devotee"||w.value==="volunteer"?"Sri Venkateshwara Temple, Bangalore":null),F=oe(()=>window.history.length>1);Oe(f,(L,z)=>{L>z&&z!==void 0&&(u.value=!0,setTimeout(()=>{u.value=!1},3e3))});const I=()=>{const L=a.params.entityId;switch(w.value){case"tenant":return"/tenant/dashboard";case"entity_admin":return`/entity/${L}/dashboard`;case"devotee":return`/entity/${L}/devotee/dashboard`;case"volunteer":return`/entity/${L}/volunteer/dashboard`;case"superadmin":return"/superadmin/dashboard";default:return"/"}},C=()=>{l.back()},j=()=>{const L=a.params.entityId;w.value==="entity_admin"?l.push(`/entity/${L}/devotees`):w.value==="volunteer"&&l.push(`/entity/${L}/volunteer/devotees`)},$=L=>{L.stopPropagation(),i.value=!i.value},y=async L=>{await r.markInAppAsRead(L),i.value=!1;const z=v.value.find(K=>K.id===L);if(!z)return;const q=a.params.entityId;switch(z.category){case"event":l.push(`/entity/${q}/devotee/events`);break;case"seva":l.push(`/entity/${q}/devotee/seva-booking`);break;case"donation":l.push(`/entity/${q}/devotee/donations`);break;case"announcement":l.push(`/entity/${q}/devotee/dashboard`);break;default:z.link&&l.push(z.link)}},b=async()=>{const L=v.value.filter(z=>!z.isRead).map(z=>z.id);for(const z of L)await r.markInAppAsRead(z);i.value=!1},E=()=>{i.value=!1;const L=a.params.entityId;l.push(`/entity/${L}/notifications`)},R=L=>({seva:"bg-purple-100 text-purple-600",donation:"bg-green-100 text-green-600",event:"bg-blue-100 text-blue-600",system:"bg-gray-100 text-gray-600",announcement:"bg-yellow-100 text-yellow-600"})[L]||"bg-gray-100 text-gray-600",M=L=>({seva:"bg-purple-100 text-purple-700",donation:"bg-green-100 text-green-700",event:"bg-blue-100 text-blue-700",system:"bg-gray-100 text-gray-700",announcement:"bg-yellow-100 text-yellow-700"})[L]||"bg-gray-100 text-gray-700",G=L=>{const z={seva:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z",donation:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z",event:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z",system:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z",announcement:"M11 5.882V19.24a1.76 1.76 0 01-3.417.592l-2.147-6.15M18 13a3 3 0 100-6M5.436 13.683A4.001 4.001 0 017 6h1.832c4.1 0 7.625-1.234 9.168-3v14c-1.543-1.766-5.067-3-9.168-3H7a3.988 3.988 0 01-1.564-.317z"};return z[L]||z.system},U=L=>{if(!L)return"";const z=new Date,q=new Date(L),K=z-q;return K<60*1e3?"Just now":K<3600*1e3?`${Math.floor(K/6e4)}m ago`:K<1440*60*1e3?`${Math.floor(K/36e5)}h ago`:K<10080*60*1e3?`${Math.floor(K/864e5)}d ago`:q.toLocaleDateString("en-IN",{day:"numeric",month:"short"})},_=()=>{n.logout(),l.push("/login")},k=L=>{const z=L.target.closest(".notifications-bell"),q=L.target.closest(".notifications-container");i.value&&!q&&!z&&(i.value=!1)};return Me(async()=>{document.addEventListener("click",k),console.log("AppHeader mounted. Sidebar state:",d==null?void 0:d.value),c.value=!0;try{await r.fetchNotifications(20)}catch(L){console.error("Failed to load notifications:",L)}finally{c.value=!1}r.connectStream()}),Pt(()=>{r.disconnectStream(),document.removeEventListener("click",k)}),(L,z)=>{const q=Ze("router-link");return m(),g("header",Y6,[e("div",K6,[e("div",X6,[e("div",Z6,[F.value?(m(),g("button",{key:0,onClick:C,class:"p-2 text-gray-500 hover:text-indigo-600 hover:bg-indigo-50 rounded-lg transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2",title:"Go back"},[...z[2]||(z[2]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1)])])):J("",!0),e("button",{onClick:z[0]||(z[0]=K=>s("toggle-sidebar")),class:"p-1.5 sm:p-2 text-gray-500 hover:text-indigo-600 hover:bg-indigo-50 rounded-lg transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 touch-target",title:"Toggle menu"},[Te(d)?(m(),g("svg",e$,[...z[4]||(z[4]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"},null,-1)])])):(m(),g("svg",Q6,[...z[3]||(z[3]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 6h16M4 12h16M4 18h16"},null,-1)])]))]),w.value==="entity_admin"||w.value==="volunteer"?(m(),g("button",{key:1,onClick:j,class:"hidden lg:flex items-center px-3 py-2 text-sm font-medium text-gray-700 hover:text-indigo-600 hover:bg-indigo-50 rounded-lg transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2",title:"Devotees"},[...z[5]||(z[5]=[e("svg",{class:"w-5 h-5 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"})],-1),e("span",null,"Devotees",-1)])])):J("",!0),e("div",t$,[le(q,{to:I(),class:"flex items-center"},{default:ye(()=>[z[6]||(z[6]=e("div",{class:"w-8 h-8 sm:w-10 sm:h-10 bg-gradient-to-br from-indigo-500 to-indigo-700 rounded-xl flex items-center justify-center shadow-lg"},[e("svg",{class:"w-4 h-4 sm:w-6 sm:h-6 text-white",fill:"currentColor",viewBox:"0 0 24 24"},[e("path",{d:"M12 2L2 7v10c0 5.55 3.84 9.74 9 11 5.16-1.26 9-5.45 9-11V7l-10-5z"})])],-1)),e("div",o$,[e("h1",s$,h(N.value),1),A.value?(m(),g("p",n$,h(A.value),1)):J("",!0)])]),_:1},8,["to"])])]),e("div",r$,[e("button",{onClick:$,class:"relative p-1.5 sm:p-2 text-gray-500 hover:text-indigo-600 hover:bg-indigo-50 rounded-lg transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 notifications-bell"},[z[7]||(z[7]=e("svg",{class:"w-5 h-5 sm:w-6 sm:h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11c0-3.07-1.64-5.64-4.5-6.32V4a1.5 1.5 0 00-3 0v.68C7.64 5.36 6 7.929 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"})],-1)),f.value>0?(m(),g("span",a$,h(f.value>9?"9+":f.value),1)):J("",!0)]),le(W6,{user:p.value,role:w.value,onLogout:_},null,8,["user","role"])])])]),e("div",l$,[le(np)]),le(mt,{name:"slide-fade"},{default:ye(()=>[i.value?(m(),g("div",i$,[e("div",d$,[e("div",u$,[e("div",c$,[z[8]||(z[8]=e("h3",{class:"text-lg font-semibold text-gray-900"},"Notifications",-1)),f.value>0?(m(),g("span",p$,h(f.value),1)):J("",!0)]),v.value.length>0&&v.value.some(K=>!K.isRead)?(m(),g("button",{key:0,onClick:b,class:"text-sm text-indigo-600 hover:text-indigo-800 font-medium transition-colors"}," Mark all read ")):J("",!0)])]),e("div",m$,[c.value?(m(),g("div",g$,[...z[9]||(z[9]=[e("div",{class:"animate-spin rounded-full h-10 w-10 border-b-2 border-indigo-600 mx-auto mb-3"},null,-1),e("p",{class:"text-gray-500 text-sm"},"Loading notifications...",-1)])])):v.value.length===0?(m(),g("div",f$,[...z[10]||(z[10]=[e("svg",{class:"w-16 h-16 text-gray-300 mx-auto mb-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2-2v-5m16 0h-2M4 13h2m13-8V4a1 1 0 00-1-1H7a1 1 0 00-1 1v1m8 0V4.5"})],-1),e("p",{class:"text-gray-500 font-medium"},"No notifications yet",-1),e("p",{class:"text-gray-400 text-sm mt-1"},"We'll notify you when something new arrives",-1)])])):(m(),g("div",v$,[(m(!0),g(be,null,$e(v.value,K=>(m(),g("div",{key:K.id,class:se(["p-4 border-b border-gray-100 hover:bg-indigo-50 cursor-pointer transition-all duration-200",{"bg-indigo-25":!K.isRead}]),onClick:H=>y(K.id)},[e("div",y$,[e("div",{class:se(["flex-shrink-0 w-2 h-2 mt-2 rounded-full transition-colors",K.isRead?"bg-gray-300":"bg-indigo-500"])},null,2),e("div",{class:se(["flex-shrink-0 w-10 h-10 rounded-lg flex items-center justify-center",R(K.category)])},[(m(),g("svg",x$,[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:G(K.category)},null,8,b$)]))],2),e("div",w$,[e("p",k$,h(K.title),1),e("p",_$,h(K.message),1),e("div",$$,[e("p",S$,h(U(K.createdAt)),1),K.category?(m(),g("span",{key:0,class:se(["text-xs px-2 py-0.5 rounded-full",M(K.category)])},h(K.category),3)):J("",!0)])])])],10,h$))),128))]))]),v.value.length>0?(m(),g("div",D$,[e("button",{onClick:E,class:"w-full text-center text-sm text-indigo-600 hover:text-indigo-800 font-medium transition-colors"}," View all notifications ")])):J("",!0)])):J("",!0)]),_:1}),le(mt,{name:"fade"},{default:ye(()=>[i.value?(m(),g("div",{key:0,onClick:z[1]||(z[1]=K=>i.value=!1),class:"fixed inset-0 bg-black bg-opacity-10 z-40"})):J("",!0)]),_:1})])}}},T$=ot(C$,[["__scopeId","data-v-70ea613b"]]),E$={key:0,class:"fixed top-20 left-1/2 transform -translate-x-1/2 z-50 w-11/12 max-w-md"},A$={class:"bg-red-50 border-l-4 border-red-500 p-4 rounded-lg shadow-lg"},I$={class:"flex items-start"},M$={class:"p-3 sm:p-4 pt-4 sm:pt-6 lg:pt-8 border-b border-gray-200"},R$={class:"flex items-center justify-between"},P$={key:0,class:"text-xs sm:text-sm text-gray-500"},N$={class:"px-3 sm:px-4 py-3 sm:py-4 space-y-1"},j$={key:0,class:"space-y-1"},L$={key:1,class:"my-3 border-t border-gray-200"},B$={class:"mt-3"},U$={class:"text-xs font-bold text-indigo-600"},F$={key:0,class:"mt-1 ml-5 space-y-1 bg-indigo-50 p-2 rounded-md"},V$={key:1,class:"space-y-1"},O$={key:2,class:"space-y-1"},z$={key:3,class:"space-y-1"},H$={key:4,class:"space-y-1"},q$={class:"mt-3"},G$={class:"text-xs font-bold text-indigo-600"},J$={key:0,class:"mt-1 ml-6 space-y-1 bg-indigo-50 p-2 rounded-md"},W$={key:5,class:"text-center py-6"},Y$={class:"text-xs text-gray-400 mt-2"},K$={key:0,class:"text-xs text-gray-400 mt-1"},X$={class:"mt-6 px-4 py-4 border-t border-gray-200"},Z$={__name:"AppSidebar",props:{isOpen:{type:Boolean,default:!0},user:{type:Object,default:null}},setup(t){const o=t,s=tt(),n=We(),r=Nt("sidebarOpen",B(!1)),l=B(!1),a=B(window.innerWidth<1024),d=oe(()=>s.params.id||s.params.entityId||"1"),i=oe(()=>{var y,b;const j=(n.userRole||"").toLowerCase(),$=((y=n.user)==null?void 0:y.roleId)||((b=n.user)==null?void 0:b.role_id);return j==="monitoring_user"||j==="monitoringuser"||$===6||$==="6"}),c=oe(()=>{var b,E,R,M;const $=(((E=(b=n.user)==null?void 0:b.role)==null?void 0:E.toLowerCase())||((M=(R=o.user)==null?void 0:R.role)==null?void 0:M.toLowerCase()))==="superadmin",y=s.path.includes("/tenant/");return $&&y}),u=oe(()=>{if(n.user&&n.user.role)return n.user.role.toLowerCase();if(o.user&&o.user.role)return o.user.role.toLowerCase();const j=s.path;return j.includes("/tenant/")?"tenant":j.includes("/devotee/")?"devotee":j.includes("/volunteer/")?"volunteer":j.includes("/entity/")&&!j.includes("/devotee/")&&!j.includes("/volunteer/")?"entity_admin":j.includes("/superadmin/")?"superadmin":""}),p=B(!1),w=B(!1),f=j=>s.path.startsWith(j),v=()=>{p.value=!p.value},N=()=>{w.value=!w.value},A=()=>{a.value&&(r.value=!1)},F=()=>{l.value=!0,setTimeout(()=>{l.value=!1},5e3)},I=j=>j?j==="entity_admin"?"Entity Admin":j==="monitoring_user"?"Monitoring User":j.charAt(0).toUpperCase()+j.slice(1):"",C=()=>{a.value=window.innerWidth<1024};return Me(()=>{window.addEventListener("resize",C)}),Pt(()=>{window.removeEventListener("resize",C)}),(j,$)=>{const y=Ze("router-link");return m(),g(be,null,[le(mt,{name:"fade"},{default:ye(()=>[l.value?(m(),g("div",E$,[e("div",A$,[e("div",I$,[$[2]||($[2]=e("div",{class:"flex-shrink-0"},[e("svg",{class:"h-5 w-5 text-red-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})])],-1)),$[3]||($[3]=e("div",{class:"ml-3 flex-1"},[e("h3",{class:"text-sm font-semibold text-red-800"},"Access Restricted"),e("p",{class:"mt-1 text-xs text-red-700"}," Monitoring users have view-only access. Contact your administrator for additional permissions. ")],-1)),e("button",{onClick:$[0]||($[0]=b=>l.value=!1),class:"flex-shrink-0 ml-2 text-red-500 hover:text-red-700"},[...$[1]||($[1]=[e("svg",{class:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])])])])):J("",!0)]),_:1}),le(mt,{name:"fade"},{default:ye(()=>[Te(r)&&a.value?(m(),g("div",{key:0,onClick:A,class:"fixed inset-0 bg-black bg-opacity-50 z-30 lg:hidden",style:{"margin-top":"56px"}})):J("",!0)]),_:1}),e("aside",{class:se(["fixed left-0 top-0 bottom-0 w-80 sm:w-72 bg-white border-r border-gray-200 overflow-y-auto shadow-lg transition-transform duration-300 ease-in-out z-40",[Te(r)?"translate-x-0":"-translate-x-full","lg:translate-x-0"]]),style:{"margin-top":"56px"}},[e("div",M$,[e("div",R$,[e("div",null,[$[4]||($[4]=e("h3",{class:"text-sm sm:text-base lg:text-lg font-semibold text-indigo-600"},"Temple Management",-1)),u.value?(m(),g("p",P$,h(I(u.value)),1)):J("",!0)]),e("button",{onClick:A,class:"lg:hidden p-1 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-md transition-colors",title:"Close menu"},[...$[5]||($[5]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])])]),e("nav",N$,[u.value==="tenant"?(m(),g("div",j$,[c.value?(m(),Ne(y,{key:0,to:"/tenant-selection",class:se(["flex items-center justify-center px-3 py-3 text-sm font-medium rounded-lg bg-gradient-to-r from-purple-50 to-indigo-50 border-2 border-indigo-200 shadow-sm transition-all duration-200 hover:shadow-md active:scale-95",f("/tenant-selection")?"bg-indigo-100 text-indigo-700 border-indigo-400":"text-indigo-700 hover:from-purple-100 hover:to-indigo-100 hover:border-indigo-300"]),onClick:A},{default:ye(()=>[...$[6]||($[6]=[e("svg",{class:"mr-2 h-5 w-5 text-indigo-600 flex-shrink-0",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7h12m0 0l-4-4m4 4l-4 4m0 6H4m0 0l4 4m-4-4l4-4"})],-1),e("span",{class:"font-semibold whitespace-nowrap"},"Switch Tenant",-1)])]),_:1},8,["class"])):J("",!0),c.value?(m(),g("div",L$)):J("",!0),le(y,{to:"/tenant/dashboard",class:se(["flex items-center px-3 py-3 text-sm font-medium rounded-md touch-target",f("/tenant/dashboard")?"bg-indigo-100 text-indigo-700":"text-gray-700 hover:bg-gray-50"]),onClick:A},{default:ye(()=>[(m(),g("svg",{class:se(["mr-3 h-5 w-5",f("/tenant/dashboard")?"text-indigo-500":"text-gray-400"]),fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[...$[7]||($[7]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"},null,-1)])],2)),$[8]||($[8]=te(" Dashboard ",-1))]),_:1},8,["class"]),i.value?(m(),g("button",{key:2,onClick:F,class:"w-full flex items-center px-3 py-2 text-sm font-medium rounded-md text-gray-400 cursor-not-allowed bg-gray-50",title:"Monitoring users are not allowed to create temples"},[...$[9]||($[9]=[e("svg",{class:"mr-3 h-5 w-5 text-gray-300",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})],-1),te(" Create Temple ",-1)])])):(m(),Ne(y,{key:3,to:"/tenant/entities/create",class:se(["flex items-center px-3 py-2 text-sm font-medium rounded-md",f("/tenant/entities/create")?"bg-indigo-100 text-indigo-700":"text-gray-700 hover:bg-gray-50"]),onClick:A},{default:ye(()=>[(m(),g("svg",{class:se(["mr-3 h-5 w-5",f("/tenant/entities/create")?"text-indigo-500":"text-gray-400"]),fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[...$[10]||($[10]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"},null,-1)])],2)),$[11]||($[11]=te(" Create Temple ",-1))]),_:1},8,["class"])),i.value?(m(),g("button",{key:4,onClick:F,class:"w-full flex items-center px-3 py-2 text-sm font-medium rounded-md text-gray-400 cursor-not-allowed bg-gray-50",title:"Monitoring users are not allowed to manage users"},[...$[12]||($[12]=[e("svg",{class:"mr-3 h-5 w-5 text-gray-300",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"})],-1),te(" Tenant User Management ",-1)])])):(m(),Ne(y,{key:5,to:"/tenant/user-management",class:se(["flex items-center px-3 py-2 text-sm font-medium rounded-md",f("/tenant/user-management")?"bg-indigo-100 text-indigo-700":"text-gray-700 hover:bg-gray-50"]),onClick:A},{default:ye(()=>[(m(),g("svg",{class:se(["mr-3 h-5 w-5",f("/tenant/user-management")?"text-indigo-500":"text-gray-400"]),fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[...$[13]||($[13]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"},null,-1)])],2)),$[14]||($[14]=te(" Tenant User Management ",-1))]),_:1},8,["class"])),e("div",B$,[e("div",{class:"flex items-center justify-between px-3 py-2 text-sm font-medium rounded-md bg-indigo-50 text-indigo-700 cursor-pointer",onClick:v},[$[15]||($[15]=e("div",{class:"flex items-center"},[e("svg",{class:"mr-3 h-5 w-5 text-indigo-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 17v-2m3 2v-4m3 4v-6m2 10H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})]),e("span",null,"Reports Dashboard")],-1)),e("span",U$,h(p.value?"":"+"),1)]),le(mt,{name:"slide-down"},{default:ye(()=>[p.value?(m(),g("div",F$,[le(y,{to:"/tenant/reports/temple-register",class:se(["px-3 py-2 text-sm rounded-md cursor-pointer flex items-center",f("/tenant/reports/temple-register")?"text-indigo-700 font-medium":"text-gray-700 hover:bg-indigo-100"]),onClick:A},{default:ye(()=>[(m(),g("svg",{class:se(["mr-2 h-4 w-4",f("/tenant/reports/temple-register")?"text-indigo-600":"text-gray-500"]),fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[...$[16]||($[16]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"},null,-1)])],2)),$[17]||($[17]=e("span",null,"Temple Register Report",-1))]),_:1},8,["class"]),le(y,{to:"/tenant/reports/temple-activities",class:se(["px-3 py-2 text-sm rounded-md cursor-pointer flex items-center",f("/tenant/reports/temple-activities")?"text-indigo-700 font-medium":"text-gray-700 hover:bg-indigo-100"]),onClick:A},{default:ye(()=>[(m(),g("svg",{class:se(["mr-2 h-4 w-4",f("/tenant/reports/temple-activities")?"text-indigo-600":"text-gray-500"]),fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[...$[18]||($[18]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"},null,-1)])],2)),$[19]||($[19]=e("span",null,"Temple Activities Report",-1))]),_:1},8,["class"]),le(y,{to:"/tenant/reports/birthdays",class:se(["px-3 py-2 text-sm rounded-md cursor-pointer flex items-center",f("/tenant/reports/birthdays")?"text-indigo-700 font-medium":"text-gray-700 hover:bg-indigo-100"]),onClick:A},{default:ye(()=>[(m(),g("svg",{class:se(["mr-2 h-4 w-4",f("/tenant/reports/birthdays")?"text-indigo-600":"text-gray-500"]),fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[...$[20]||($[20]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 15.546c-.523 0-1.046.151-1.5.454a2.704 2.704 0 01-3 0 2.704 2.704 0 00-3 0 2.704 2.704 0 01-3 0 2.704 2.704 0 00-3 0 2.704 2.704 0 01-3 0 2.701 2.701 0 00-1.5-.454M9 6v2m3-2v2m3-2v2M9 3h.01M12 3h.01M15 3h.01M21 21v-7a2 2 0 00-2-2H5a2 2 0 00-2 2v7h18zm-3-9v-2a2 2 0 00-2-2H8a2 2 0 00-2 2v2h12z"},null,-1)])],2)),$[21]||($[21]=e("span",null,"Devotee Reports",-1))]),_:1},8,["class"]),le(y,{to:"/tenant/reports/audit-logs",class:se(["px-3 py-2 text-sm rounded-md cursor-pointer flex items-center",f("/tenant/reports/audit-logs")?"text-indigo-700 font-medium":"text-gray-700 hover:bg-indigo-100"]),onClick:A},{default:ye(()=>[(m(),g("svg",{class:se(["mr-2 h-4 w-4",f("/tenant/reports/audit-logs")?"text-indigo-600":"text-gray-500"]),fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[...$[22]||($[22]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"},null,-1)])],2)),$[23]||($[23]=e("span",null,"Audit Logs Report",-1))]),_:1},8,["class"])])):J("",!0)]),_:1})])])):u.value==="entity_admin"?(m(),g("div",V$,[le(y,{to:`/entity/${d.value}/dashboard`,class:se(["flex items-center px-3 py-2 text-sm font-medium rounded-md",f(`/entity/${d.value}/dashboard`)?"bg-indigo-100 text-indigo-700":"text-gray-700 hover:bg-gray-50"]),onClick:A},{default:ye(()=>[(m(),g("svg",{class:se(["mr-3 h-5 w-5",f(`/entity/${d.value}/dashboard`)?"text-indigo-500":"text-gray-400"]),fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[...$[24]||($[24]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"},null,-1)])],2)),$[25]||($[25]=te(" Dashboard ",-1))]),_:1},8,["to","class"]),le(y,{to:`/entity/${d.value}/devotees`,class:se(["flex items-center px-3 py-2 text-sm font-medium rounded-md",f(`/entity/${d.value}/devotees`)?"bg-indigo-100 text-indigo-700":"text-gray-700 hover:bg-gray-50"]),onClick:A},{default:ye(()=>[(m(),g("svg",{class:se(["mr-3 h-5 w-5",f(`/entity/${d.value}/devotees`)?"text-indigo-500":"text-gray-400"]),fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[...$[26]||($[26]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"},null,-1)])],2)),$[27]||($[27]=te(" Devotees ",-1))]),_:1},8,["to","class"]),le(y,{to:`/entity/${d.value}/sevas`,class:se(["flex items-center px-3 py-2 text-sm font-medium rounded-md",f(`/entity/${d.value}/sevas`)?"bg-indigo-100 text-indigo-700":"text-gray-700 hover:bg-gray-50"]),onClick:A},{default:ye(()=>[(m(),g("svg",{class:se(["mr-3 h-5 w-5",f(`/entity/${d.value}/sevas`)?"text-indigo-500":"text-gray-400"]),fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[...$[28]||($[28]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"},null,-1)])],2)),$[29]||($[29]=te(" Seva Management ",-1))]),_:1},8,["to","class"]),le(y,{to:`/entity/${d.value}/donations`,class:se(["flex items-center px-3 py-2 text-sm font-medium rounded-md",f(`/entity/${d.value}/donations`)?"bg-indigo-100 text-indigo-700":"text-gray-700 hover:bg-gray-50"]),onClick:A},{default:ye(()=>[(m(),g("svg",{class:se(["mr-3 h-5 w-5",f(`/entity/${d.value}/donations`)?"text-indigo-500":"text-gray-400"]),fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[...$[30]||($[30]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"},null,-1)])],2)),$[31]||($[31]=te(" Donations ",-1))]),_:1},8,["to","class"]),le(y,{to:`/entity/${d.value}/events`,class:se(["flex items-center px-3 py-2 text-sm font-medium rounded-md",f(`/entity/${d.value}/events`)?"bg-indigo-100 text-indigo-700":"text-gray-700 hover:bg-gray-50"]),onClick:A},{default:ye(()=>[(m(),g("svg",{class:se(["mr-3 h-5 w-5",f(`/entity/${d.value}/events`)?"text-indigo-500":"text-gray-400"]),fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[...$[32]||($[32]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"},null,-1)])],2)),$[33]||($[33]=te(" Events & Festivals ",-1))]),_:1},8,["to","class"]),i.value?(m(),g("button",{key:0,onClick:F,class:"w-full flex items-center px-3 py-2 text-sm font-medium rounded-md text-gray-400 cursor-not-allowed bg-gray-50",title:"Monitoring users are not allowed to access communication"},[...$[34]||($[34]=[e("svg",{class:"mr-3 h-5 w-5 text-gray-300",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 10h.01M12 10h.01M16 10h.01M9 16H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-5l-5 5v-5z"})],-1),te(" Communication ",-1)])])):(m(),Ne(y,{key:1,to:`/entity/${d.value}/communication`,class:se(["flex items-center px-3 py-2 text-sm font-medium rounded-md",f(`/entity/${d.value}/communication`)?"bg-indigo-100 text-indigo-700":"text-gray-700 hover:bg-gray-50"]),onClick:A},{default:ye(()=>[(m(),g("svg",{class:se(["mr-3 h-5 w-5",f(`/entity/${d.value}/communication`)?"text-indigo-500":"text-gray-400"]),fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[...$[35]||($[35]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 10h.01M12 10h.01M16 10h.01M9 16H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-5l-5 5v-5z"},null,-1)])],2)),$[36]||($[36]=te(" Communication ",-1))]),_:1},8,["to","class"]))])):u.value==="devotee"?(m(),g("div",O$,[f("/devotee/temple-selection")?J("",!0):(m(),Ne(y,{key:0,to:`/entity/${d.value}/devotee/dashboard`,class:se(["flex items-center px-3 py-2 text-sm font-medium rounded-md",f(`/entity/${d.value}/devotee/dashboard`)?"bg-indigo-100 text-indigo-700":"text-gray-700 hover:bg-gray-50"]),onClick:A},{default:ye(()=>[(m(),g("svg",{class:se(["mr-3 h-5 w-5",f(`/entity/${d.value}/devotee/dashboard`)?"text-indigo-500":"text-gray-400"]),fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[...$[37]||($[37]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"},null,-1)])],2)),$[38]||($[38]=te(" Dashboard ",-1))]),_:1},8,["to","class"])),f("/devotee/temple-selection")?J("",!0):(m(),g(be,{key:1},[le(y,{to:"/devotee/temple-selection",class:se(["flex items-center px-3 py-2 text-sm font-medium rounded-md",f("/devotee/temple-selection")?"bg-indigo-100 text-indigo-700":"text-gray-700 hover:bg-gray-50"]),onClick:A},{default:ye(()=>[(m(),g("svg",{class:se(["mr-3 h-5 w-5",f("/devotee/temple-selection")?"text-indigo-500":"text-gray-400"]),fill:"currentColor",viewBox:"0 0 24 24",stroke:"none"},[...$[39]||($[39]=[e("path",{d:"M12 2L2 7h3v13h6V14h2v6h6V7h3L12 2zM12 4.5L18 8v10h-4v-4H10v4H6V8l6-3.5z"},null,-1)])],2)),$[40]||($[40]=te(" Temple Selection ",-1))]),_:1},8,["class"]),le(y,{to:"/devotee/profile/create",class:se(["flex items-center px-3 py-2 text-sm font-medium rounded-md",f("/devotee/profile/create")?"bg-indigo-100 text-indigo-700":"text-gray-700 hover:bg-gray-50"]),onClick:A},{default:ye(()=>[(m(),g("svg",{class:se(["mr-3 h-5 w-5",f("/devotee/profile/create")?"text-indigo-500":"text-gray-400"]),fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[...$[41]||($[41]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"},null,-1)])],2)),$[42]||($[42]=te(" My Profile ",-1))]),_:1},8,["class"]),le(y,{to:`/entity/${d.value}/devotee/seva-booking`,class:se(["flex items-center px-3 py-2 text-sm font-medium rounded-md",f(`/entity/${d.value}/devotee/seva-booking`)?"bg-indigo-100 text-indigo-700":"text-gray-700 hover:bg-gray-50"]),onClick:A},{default:ye(()=>[(m(),g("svg",{class:se(["mr-3 h-5 w-5",f(`/entity/${d.value}/devotee/seva-booking`)?"text-indigo-500":"text-gray-400"]),fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[...$[43]||($[43]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"},null,-1)])],2)),$[44]||($[44]=te(" Book Seva ",-1))]),_:1},8,["to","class"]),le(y,{to:`/entity/${d.value}/devotee/donations`,class:se(["flex items-center px-3 py-2 text-sm font-medium rounded-md",f(`/entity/${d.value}/devotee/donations`)?"bg-indigo-100 text-indigo-700":"text-gray-700 hover:bg-gray-50"]),onClick:A},{default:ye(()=>[(m(),g("svg",{class:se(["mr-3 h-5 w-5",f(`/entity/${d.value}/devotee/donations`)?"text-indigo-500":"text-gray-400"]),fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[...$[45]||($[45]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"},null,-1)])],2)),$[46]||($[46]=te(" My Donations ",-1))]),_:1},8,["to","class"]),le(y,{to:`/entity/${d.value}/devotee/events`,class:se(["flex items-center px-3 py-2 text-sm font-medium rounded-md",f(`/entity/${d.value}/devotee/events`)?"bg-indigo-100 text-indigo-700":"text-gray-700 hover:bg-gray-50"]),onClick:A},{default:ye(()=>[(m(),g("svg",{class:se(["mr-3 h-5 w-5",f(`/entity/${d.value}/devotee/events`)?"text-indigo-500":"text-gray-400"]),fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[...$[47]||($[47]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"},null,-1)])],2)),$[48]||($[48]=te(" Temple Events ",-1))]),_:1},8,["to","class"])],64)),f("/devotee/temple-selection")?(m(),Ne(y,{key:2,to:"/devotee/profile/create",class:se(["flex items-center px-3 py-2 text-sm font-medium rounded-md",f("/devotee/profile/create")?"bg-indigo-100 text-indigo-700":"text-gray-700 hover:bg-gray-50"]),onClick:A},{default:ye(()=>[(m(),g("svg",{class:se(["mr-3 h-5 w-5",f("/devotee/profile/create")?"text-indigo-500":"text-gray-400"]),fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[...$[49]||($[49]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"},null,-1)])],2)),$[50]||($[50]=te(" Temple Profile ",-1))]),_:1},8,["class"])):J("",!0)])):u.value==="volunteer"?(m(),g("div",z$,[le(y,{to:`/entity/${d.value}/volunteer/dashboard`,class:se(["flex items-center px-3 py-2 text-sm font-medium rounded-md",f(`/entity/${d.value}/volunteer/dashboard`)?"bg-indigo-100 text-indigo-700":"text-gray-700 hover:bg-gray-50"]),onClick:A},{default:ye(()=>[(m(),g("svg",{class:se(["mr-3 h-5 w-5",f(`/entity/${d.value}/volunteer/dashboard`)?"text-indigo-500":"text-gray-400"]),fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[...$[51]||($[51]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"},null,-1)])],2)),$[52]||($[52]=te(" Dashboard ",-1))]),_:1},8,["to","class"]),le(y,{to:`/entity/${d.value}/volunteer/assignments`,class:se(["flex items-center px-3 py-2 text-sm font-medium rounded-md",f(`/entity/${d.value}/volunteer/assignments`)?"bg-indigo-100 text-indigo-700":"text-gray-700 hover:bg-gray-50"]),onClick:A},{default:ye(()=>[(m(),g("svg",{class:se(["mr-3 h-5 w-5",f(`/entity/${d.value}/volunteer/assignments`)?"text-indigo-500":"text-gray-400"]),fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[...$[53]||($[53]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"},null,-1)])],2)),$[54]||($[54]=te(" My Assignments ",-1))]),_:1},8,["to","class"]),le(y,{to:`/entity/${d.value}/volunteer/schedule`,class:se(["flex items-center px-3 py-2 text-sm font-medium rounded-md",f(`/entity/${d.value}/volunteer/schedule`)?"bg-indigo-100 text-indigo-700":"text-gray-700 hover:bg-gray-50"]),onClick:A},{default:ye(()=>[(m(),g("svg",{class:se(["mr-3 h-5 w-5",f(`/entity/${d.value}/volunteer/schedule`)?"text-indigo-500":"text-gray-400"]),fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[...$[55]||($[55]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"},null,-1)])],2)),$[56]||($[56]=te(" My Schedule ",-1))]),_:1},8,["to","class"]),le(y,{to:`/entity/${d.value}/volunteer/events`,class:se(["flex items-center px-3 py-2 text-sm font-medium rounded-md",f(`/entity/${d.value}/volunteer/events`)?"bg-indigo-100 text-indigo-700":"text-gray-700 hover:bg-gray-50"]),onClick:A},{default:ye(()=>[(m(),g("svg",{class:se(["mr-3 h-5 w-5",f(`/entity/${d.value}/volunteer/events`)?"text-indigo-500":"text-gray-400"]),fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[...$[57]||($[57]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"},null,-1)])],2)),$[58]||($[58]=te(" Temple Events ",-1))]),_:1},8,["to","class"])])):u.value==="superadmin"?(m(),g("div",H$,[le(y,{to:"/superadmin/dashboard",class:se(["flex items-center px-3 py-2 text-sm font-medium rounded-md",f("/superadmin/dashboard")?"bg-indigo-100 text-indigo-700":"text-gray-700 hover:bg-gray-50"]),onClick:A},{default:ye(()=>[(m(),g("svg",{class:se(["mr-3 h-5 w-5",f("/superadmin/dashboard")?"text-indigo-500":"text-gray-400"]),fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[...$[59]||($[59]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"},null,-1)])],2)),$[60]||($[60]=te(" Super Admin Dashboard ",-1))]),_:1},8,["class"]),le(y,{to:"/superadmin/tenant-approvals",class:se(["flex items-center px-3 py-2 text-sm font-medium rounded-md",f("/superadmin/tenant-approvals")?"bg-indigo-100 text-indigo-700":"text-gray-700 hover:bg-gray-50"]),onClick:A},{default:ye(()=>[(m(),g("svg",{class:se(["mr-3 h-5 w-5",f("/superadmin/tenant-approvals")?"text-indigo-500":"text-gray-400"]),fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[...$[61]||($[61]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"},null,-1)])],2)),$[62]||($[62]=te(" Tenant Approvals ",-1))]),_:1},8,["class"]),le(y,{to:"/superadmin/dashboard",class:se(["flex items-center px-3 py-2 text-sm font-medium rounded-md",f("/superadmin/temples")?"bg-indigo-100 text-indigo-700":"text-gray-700 hover:bg-gray-50"]),onClick:A},{default:ye(()=>[(m(),g("svg",{class:se(["mr-3 h-5 w-5",f("/superadmin/dashboard")?"text-indigo-500":"text-gray-400"]),fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[...$[63]||($[63]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"},null,-1)])],2)),$[64]||($[64]=te(" Temple Approvals ",-1))]),_:1},8,["class"]),le(y,{to:"/superadmin/user-management",class:se(["flex items-center px-3 py-2 text-sm font-medium rounded-md",f("/superadmin/user-management")?"bg-indigo-100 text-indigo-700":"text-gray-700 hover:bg-gray-50"]),onClick:A},{default:ye(()=>[(m(),g("svg",{class:se(["mr-3 h-5 w-5",f("/superadmin/user-management")?"text-indigo-500":"text-gray-400"]),fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[...$[65]||($[65]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"},null,-1)])],2)),$[66]||($[66]=te(" Tenant & User Management ",-1))]),_:1},8,["class"]),le(y,{to:"/superadmin/role-management",class:se(["flex items-center px-3 py-2 text-sm font-medium rounded-md",f("/superadmin/role-management")?"bg-indigo-100 text-indigo-700":"text-gray-700 hover:bg-gray-50"]),onClick:A},{default:ye(()=>[(m(),g("svg",{class:se(["mr-3 h-5 w-5",f("/superadmin/role-management")?"text-indigo-500":"text-gray-400"]),fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[...$[67]||($[67]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"},null,-1)])],2)),$[68]||($[68]=te(" User Role Management ",-1))]),_:1},8,["class"]),le(y,{to:"/superadmin/reset-password",class:se(["flex items-center px-3 py-2 text-sm font-medium rounded-md",f("/superadmin/reset-password")?"bg-indigo-100 text-indigo-700":"text-gray-700 hover:bg-gray-50"]),onClick:A},{default:ye(()=>[(m(),g("svg",{class:se(["mr-3 h-5 w-5",f("/superadmin/reset-password")?"text-indigo-500":"text-gray-400"]),fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[...$[69]||($[69]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 7a2 2 0 012 2m4 0a6 6 0 01-7.743 5.743L11 17H9v2H7v2H4a1 1 0 01-1-1v-2.586a1 1 0 01.293-.707l5.964-5.964A6 6 0 1121 9z"},null,-1)])],2)),$[70]||($[70]=te(" Reset Password ",-1))]),_:1},8,["class"]),e("div",q$,[e("div",{class:"flex items-center justify-between px-3 py-2 text-sm font-medium rounded-md bg-indigo-50 text-indigo-700 cursor-pointer",onClick:N},[$[71]||($[71]=e("div",{class:"flex items-center"},[e("svg",{class:"mr-3 h-5 w-5 text-indigo-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 17v-2m3 2v-4m3 4v-6m2 10H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})]),e("span",null,"Reports Management")],-1)),e("span",G$,h(w.value?"":"+"),1)]),le(mt,{name:"slide-down"},{default:ye(()=>[w.value?(m(),g("div",J$,[le(y,{to:"/superadmin/reports",class:se(["px-3 py-2 text-sm rounded-md cursor-pointer flex items-center",f("/superadmin/reports")?"text-indigo-700 font-medium":"text-gray-700 hover:bg-indigo-100"]),onClick:A},{default:ye(()=>[(m(),g("svg",{class:se(["mr-2 h-4 w-4",f("/superadmin/reports")?"text-indigo-600":"text-gray-500"]),fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[...$[72]||($[72]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"},null,-1)])],2)),$[73]||($[73]=e("span",null,"Tenant Reports",-1))]),_:1},8,["class"]),le(y,{to:"/superadmin/reports/approval-status",class:se(["px-3 py-2 text-sm rounded-md cursor-pointer flex items-center",f("/superadmin/reports/approval-status")?"text-indigo-700 font-medium":"text-gray-700 hover:bg-indigo-100"]),onClick:A},{default:ye(()=>[(m(),g("svg",{class:se(["mr-2 h-4 w-4",f("/superadmin/reports/approval-status")?"text-indigo-600":"text-gray-500"]),fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[...$[74]||($[74]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l6 3-6 3 9-3V9l-9-3z"},null,-1),e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 20l14-8"},null,-1)])],2)),$[75]||($[75]=e("span",null,"Approval Status Report",-1))]),_:1},8,["class"]),le(y,{to:"/superadmin/reports/user-details",class:se(["px-3 py-2 text-sm rounded-md cursor-pointer flex items-center",f("/superadmin/reports/user-details")?"text-indigo-700 font-medium":"text-gray-700 hover:bg-indigo-100"]),onClick:A},{default:ye(()=>[(m(),g("svg",{class:se(["mr-2 h-4 w-4",f("/superadmin/reports/user-details")?"text-indigo-600":"text-gray-500"]),fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[...$[76]||($[76]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"},null,-1)])],2)),$[77]||($[77]=e("span",null,"User Details Report",-1))]),_:1},8,["class"])])):J("",!0)]),_:1})]),le(y,{to:"/superadmin/audit-logs",class:se(["flex items-center px-3 py-2 text-sm font-medium rounded-md",f("/superadmin/audit-logs")?"bg-indigo-100 text-indigo-700":"text-gray-700 hover:bg-gray-50"]),onClick:A},{default:ye(()=>[(m(),g("svg",{class:se(["mr-3 h-5 w-5",f("/superadmin/audit-logs")?"text-indigo-500":"text-gray-400"]),fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[...$[78]||($[78]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"},null,-1)])],2)),$[79]||($[79]=te(" Audit Logs ",-1))]),_:1},8,["class"]),le(y,{to:"/tenant-selection",class:se(["flex items-center px-3 py-2 text-sm font-medium rounded-md",f("/tenant-selection")?"bg-indigo-100 text-indigo-700":"text-gray-700 hover:bg-gray-50"]),onClick:A},{default:ye(()=>[(m(),g("svg",{class:se(["mr-3 h-5 w-5",f("/tenant-selection")?"text-indigo-500":"text-gray-400"]),fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[...$[80]||($[80]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"},null,-1)])],2)),$[81]||($[81]=te(" Tenant Dashboard ",-1))]),_:1},8,["class"])])):(m(),g("div",W$,[$[82]||($[82]=e("div",{class:"mx-auto w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mb-4"},[e("svg",{class:"w-8 h-8 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})])],-1)),$[83]||($[83]=e("p",{class:"text-sm text-gray-500"},"Menu will appear once your role is assigned.",-1)),e("p",Y$,"Current path: "+h(Te(s).path),1),t.user?(m(),g("p",K$,"User role: "+h(t.user.role),1)):J("",!0)]))]),e("div",X$,[le(y,{to:"/support",class:"flex items-center px-3 py-2 text-sm font-medium text-gray-700 rounded-md hover:bg-gray-50",onClick:A},{default:ye(()=>[...$[84]||($[84]=[e("svg",{class:"mr-3 h-5 w-5 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1),te(" Help & Support ",-1)])]),_:1})])],2)],64)}}},Q$=ot(Z$,[["__scopeId","data-v-e50b0870"]]);function e8(t,o){return m(),g("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"fill-rule":"evenodd",d:"M2.25 12c0-5.385 4.365-9.75 9.75-9.75s9.75 4.365 9.75 9.75-4.365 9.75-9.75 9.75S2.25 17.385 2.25 12Zm13.36-1.814a.75.75 0 1 0-1.22-.872l-3.236 4.53L9.53 12.22a.75.75 0 0 0-1.06 1.06l2.25 2.25a.75.75 0 0 0 1.14-.094l3.75-5.25Z","clip-rule":"evenodd"})])}function t8(t,o){return m(),g("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"fill-rule":"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003ZM12 8.25a.75.75 0 0 1 .75.75v3.75a.75.75 0 0 1-1.5 0V9a.75.75 0 0 1 .75-.75Zm0 8.25a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5Z","clip-rule":"evenodd"})])}function o8(t,o){return m(),g("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"fill-rule":"evenodd",d:"M2.25 12c0-5.385 4.365-9.75 9.75-9.75s9.75 4.365 9.75 9.75-4.365 9.75-9.75 9.75S2.25 17.385 2.25 12Zm8.706-1.442c1.146-.573 2.437.463 2.126 1.706l-.709 2.836.042-.02a.75.75 0 0 1 .67 1.34l-.04.022c-1.147.573-2.438-.463-2.127-1.706l.71-2.836-.042.02a.75.75 0 1 1-.671-1.34l.041-.022ZM12 9a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5Z","clip-rule":"evenodd"})])}function s8(t,o){return m(),g("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"fill-rule":"evenodd",d:"M12 2.25c-5.385 0-9.75 4.365-9.75 9.75s4.365 9.75 9.75 9.75 9.75-4.365 9.75-9.75S17.385 2.25 12 2.25Zm-1.72 6.97a.75.75 0 1 0-1.06 1.06L10.94 12l-1.72 1.72a.75.75 0 1 0 1.06 1.06L12 13.06l1.72 1.72a.75.75 0 1 0 1.06-1.06L13.06 12l1.72-1.72a.75.75 0 1 0-1.06-1.06L12 10.94l-1.72-1.72Z","clip-rule":"evenodd"})])}function n8(t,o){return m(),g("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"fill-rule":"evenodd",d:"M5.47 5.47a.75.75 0 0 1 1.06 0L12 10.94l5.47-5.47a.75.75 0 1 1 1.06 1.06L13.06 12l5.47 5.47a.75.75 0 1 1-1.06 1.06L12 13.06l-5.47 5.47a.75.75 0 0 1-1.06-1.06L10.94 12 5.47 6.53a.75.75 0 0 1 0-1.06Z","clip-rule":"evenodd"})])}const r8={class:"fixed top-4 right-4 z-50 space-y-2"},a8={class:"p-4"},l8={class:"flex items-center"},i8={class:"flex-shrink-0"},d8={class:"ml-3 flex-1"},u8={class:"ml-4 flex-shrink-0 flex"},c8=["onClick"],p8={key:0,class:"mt-3 flex space-x-2"},m8=["onClick"],g8={__name:"BaseToast",setup(t,{expose:o}){const s=B([]);let n=0;const r=y=>{const b=++n,E={id:b,type:"success",autoHide:!0,duration:5e3,startTime:Date.now(),...y};return s.value.push(E),E.autoHide&&setTimeout(()=>{l(b)},E.duration),b},l=y=>{const b=s.value.findIndex(E=>E.id===y);b>-1&&s.value.splice(b,1)},a=()=>{s.value=[]},d=y=>{const b={success:"bg-green-50 border-green-400",error:"bg-red-50 border-red-400",warning:"bg-yellow-50 border-yellow-400",info:"bg-blue-50 border-blue-400"};return b[y]||b.info},i=y=>{const b={success:e8,error:s8,warning:t8,info:o8};return b[y]||b.info},c=y=>{const b={success:"text-green-600",error:"text-red-600",warning:"text-yellow-600",info:"text-blue-600"};return b[y]||b.info},u=y=>{const b={success:"text-green-900",error:"text-red-900",warning:"text-yellow-900",info:"text-blue-900"};return b[y]||b.info},p=y=>{const b={success:"text-green-700",error:"text-red-700",warning:"text-yellow-700",info:"text-blue-700"};return b[y]||b.info},w=y=>{const b={success:"text-green-400 hover:text-green-600 focus:ring-green-500",error:"text-red-400 hover:text-red-600 focus:ring-red-500",warning:"text-yellow-400 hover:text-yellow-600 focus:ring-yellow-500",info:"text-blue-400 hover:text-blue-600 focus:ring-blue-500"};return b[y]||b.info},f=y=>{const b={success:"bg-green-100 text-green-800 hover:bg-green-200",error:"bg-red-100 text-red-800 hover:bg-red-200",warning:"bg-yellow-100 text-yellow-800 hover:bg-yellow-200",info:"bg-blue-100 text-blue-800 hover:bg-blue-200"};return b[y]||b.info},v=y=>{const b={success:"bg-green-400",error:"bg-red-400",warning:"bg-yellow-400",info:"bg-blue-400"};return b[y]||b.info},N=y=>{if(!y.autoHide||!y.duration)return 100;const b=Date.now()-y.startTime;return Math.max(0,100-b/y.duration*100)},A=(y,b)=>{y.handler&&y.handler(),y.closeOnClick!==!1&&l(b.id)},F=(y,b,E={})=>r({type:"success",title:y,message:b,...E}),I=(y,b,E={})=>r({type:"error",title:y,message:b,...E}),C=(y,b,E={})=>r({type:"warning",title:y,message:b,...E}),j=(y,b,E={})=>r({type:"info",title:y,message:b,...E});o({addToast:r,removeToast:l,clearAll:a,success:F,error:I,warning:C,info:j});let $=null;return Me(()=>{$={success:F,error:I,warning:C,info:j,addToast:r,removeToast:l,clearAll:a},window.$toast=$}),Pt(()=>{window.$toast===$&&delete window.$toast}),(y,b)=>(m(),Ne(Nn,{to:"body"},[e("div",r8,[(m(!0),g(be,null,$e(s.value,E=>(m(),Ne(mt,{key:E.id,"enter-active-class":"transform transition-all duration-300 ease-out","enter-from-class":"translate-x-full opacity-0","enter-to-class":"translate-x-0 opacity-100","leave-active-class":"transform transition-all duration-200 ease-in","leave-from-class":"translate-x-0 opacity-100","leave-to-class":"translate-x-full opacity-0"},{default:ye(()=>[e("div",{class:se(["max-w-sm w-full shadow-lg rounded-xl pointer-events-auto overflow-hidden border-l-4",d(E.type)])},[e("div",a8,[e("div",l8,[e("div",i8,[(m(),Ne(wt(i(E.type)),{class:se([c(E.type),"h-5 w-5"])},null,8,["class"]))]),e("div",d8,[e("p",{class:se(["text-sm font-semibold",u(E.type)])},h(E.title),3),E.message?(m(),g("p",{key:0,class:se(["mt-1 text-sm",p(E.type)])},h(E.message),3)):J("",!0)]),e("div",u8,[e("button",{onClick:R=>l(E.id),class:se(["inline-flex rounded-md focus:outline-none focus:ring-2 focus:ring-offset-2 transition-colors duration-200",w(E.type)])},[b[0]||(b[0]=e("span",{class:"sr-only"},"Close",-1)),le(Te(n8),{class:"h-4 w-4"})],10,c8)])]),E.actions&&E.actions.length?(m(),g("div",p8,[(m(!0),g(be,null,$e(E.actions,R=>(m(),g("button",{key:R.label,onClick:M=>A(R,E),class:se(["text-xs font-medium px-3 py-1 rounded-md transition-colors duration-200",f(E.type)])},h(R.label),11,m8))),128))])):J("",!0)]),E.autoHide&&E.duration?(m(),g("div",{key:0,class:se(["h-1 transition-all duration-100 ease-linear",v(E.type)]),style:Vt({width:`${N(E)}%`})},null,6)):J("",!0)],2)]),_:2},1024))),128))])]))}},f8=ot(g8,[["__scopeId","data-v-255a3f3a"]]),v8={class:"min-h-screen bg-gray-50 flex flex-col font-sans"},h8={class:"flex flex-1 pt-0"},y8={class:"flex-1 p-2 sm:p-4 lg:p-6 xl:p-8 pt-4 relative"},x8={class:"transition-all duration-200 ease-in-out max-w-full overflow-hidden"},Ao={__name:"DashboardLayout",setup(t){const o=et(),s=We(),n=B(window.innerWidth>=1024);Bs("sidebarOpen",n);const r=oe(()=>s.user),l=async()=>{try{await s.logout(),o.push("/login")}catch(d){console.error("Logout failed:",d)}},a=()=>{window.innerWidth>=1024?n.value=!0:n.value=!1};return Me(()=>{window.addEventListener("resize",a),console.log("DashboardLayout mounted. Initial sidebar state:",n.value)}),Pt(()=>{window.removeEventListener("resize",a)}),(d,i)=>{const c=Ze("router-view");return m(),g("div",v8,[le(T$,{user:r.value,onToggleSidebar:i[0]||(i[0]=u=>n.value=!n.value),onLogout:l,class:"z-30 transition-all duration-300 ease-in-out"},null,8,["user"]),e("div",h8,[le(Q$,{isOpen:n.value,user:r.value},null,8,["isOpen","user"]),e("div",{class:se(["flex-1 flex flex-col min-w-0 transition-all duration-300 ease-in-out",n.value?"lg:ml-72":"ml-0"])},[e("main",y8,[e("div",x8,[le(c,null,{default:ye(({Component:u})=>[le(mt,{name:"fade",mode:"out-in",appear:""},{default:ye(()=>[(m(),Ne(wt(u)))]),_:2},1024)]),_:1})])])],2)]),le(f8),le(Aa)])}}},b8={class:"min-h-screen bg-gradient-to-br from-indigo-50 via-white to-indigo-100"},w8={class:"bg-white/80 backdrop-blur-md border-b border-indigo-100 sticky top-0 z-50"},k8={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},_8={class:"flex justify-between items-center h-16"},$8={class:"hidden md:flex items-center space-x-4"},S8={key:0,class:"md:hidden mt-4 bg-white shadow-lg rounded-xl border border-indigo-100 px-6 py-6 space-y-4 transition-all duration-300"},D8={class:"pt-4 border-t border-gray-200"},C8={class:"relative py-20 px-4 sm:px-6 lg:px-8"},T8={class:"max-w-7xl mx-auto"},E8={class:"text-center"},A8={class:"flex flex-col sm:flex-row gap-4 justify-center items-center"},I8={id:"features",class:"py-20 bg-white"},M8={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},R8={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8"},P8={class:"w-14 h-14 bg-indigo-600 rounded-xl flex items-center justify-center mb-6"},N8={class:"w-7 h-7 text-white",fill:"currentColor",viewBox:"0 0 24 24"},j8=["d"],L8={class:"text-xl font-bold text-gray-900 mb-3"},B8={class:"text-gray-600 leading-relaxed"},U8={class:"py-20 bg-indigo-600"},F8={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},V8={class:"grid grid-cols-2 md:grid-cols-4 gap-8 text-center"},O8={class:"text-3xl md:text-4xl font-bold mb-2"},z8={class:"text-indigo-200"},H8={class:"bg-gray-900 text-white py-12"},q8={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},G8={class:"grid grid-cols-1 md:grid-cols-4 gap-8"},J8={class:"space-y-2 text-gray-400"},W8={__name:"LandingPage",setup(t){const o=B(!1),s=[{id:1,title:"Devotee Management",description:"Comprehensive devotee profiles with family lineage, spiritual information, and preferences management.",icon:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197m13.5-9a2.5 2.5 0 11-5 0 2.5 2.5 0 015 0z"},{id:2,title:"Seva Bookings",description:"Easy online seva booking system with calendar integration and automated confirmations.",icon:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"},{id:3,title:"Donation Tracking",description:"Secure donation processing with automated receipts and comprehensive financial reporting.",icon:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"},{id:4,title:"Event Management",description:"Organize festivals and events with RSVP tracking and automated devotee notifications.",icon:"M11 3.055A9.001 9.001 0 1020.945 13H11V3.055z M20.488 9H15V3.512A9.025 9.025 0 0120.488 9z"},{id:5,title:"Communication Hub",description:"Bulk messaging system with SMS, WhatsApp, and email integration for devotee outreach.",icon:"M7 8h10M7 12h4m1 8l-4-4H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-3l-4 4z"},{id:6,title:"Multi-Role Access",description:"Role-based permissions for temple admins, volunteers, and devotees with secure access control.",icon:"M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"}],n=[{value:"500+",label:"Active Temples"},{value:"50K+",label:"Devotees Managed"},{value:"1M+",label:"Sevas Booked"},{value:"99.9%",label:"Uptime"}],r=()=>{o.value=!1};Me(()=>{console.log("onMounted:"),document.addEventListener("click",l)}),Pt(()=>{console.log("onUnmounted:"),document.removeEventListener("click",l)});const l=a=>{console.log("handleClickOutside:"),o.value&&!a.target.closest("nav")&&r()};return(a,d)=>{const i=Ze("router-link");return m(),g("div",b8,[e("nav",w8,[e("div",k8,[e("div",_8,[d[4]||(d[4]=Ce('<div class="flex items-center space-x-3" data-v-f83a2314><div class="w-10 h-10 bg-gradient-to-br from-indigo-600 to-indigo-800 rounded-xl flex items-center justify-center" data-v-f83a2314><svg class="w-6 h-6 text-white" fill="currentColor" viewBox="0 0 24 24" data-v-f83a2314><path d="M12 2L2 7v10c0 5.55 3.84 9.739 9 11 5.16-1.261 9-5.45 9-11V7l-10-5z" data-v-f83a2314></path></svg></div><span class="text-xl font-bold text-gray-900" data-v-f83a2314>Devotee Connect</span></div><div class="hidden md:flex items-center space-x-8" data-v-f83a2314><a href="#features" class="text-gray-600 hover:text-indigo-600 transition-colors duration-200" data-v-f83a2314>Features</a><a href="#about" class="text-gray-600 hover:text-indigo-600 transition-colors duration-200" data-v-f83a2314>About</a><a href="#contact" class="text-gray-600 hover:text-indigo-600 transition-colors duration-200" data-v-f83a2314>Contact</a></div>',2)),e("div",$8,[le(i,{to:"/login",class:"text-indigo-600 hover:text-indigo-700 font-medium transition-colors duration-200"},{default:ye(()=>[...d[1]||(d[1]=[te(" Login ",-1)])]),_:1}),le(i,{to:"/register",class:"bg-indigo-600 hover:bg-indigo-700 text-white px-6 py-2 rounded-xl font-medium transition-all duration-200 hover:shadow-lg hover:shadow-indigo-500/25"},{default:ye(()=>[...d[2]||(d[2]=[te(" Register ",-1)])]),_:1})]),e("button",{onClick:d[0]||(d[0]=c=>o.value=!o.value),class:"md:hidden p-2 rounded-lg hover:bg-gray-100 transition-colors duration-200"},[...d[3]||(d[3]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 6h16M4 12h16M4 18h16"})],-1)])])]),le(mt,{name:"fade"},{default:ye(()=>[o.value?(m(),g("div",S8,[d[7]||(d[7]=e("a",{href:"#features",class:"block text-gray-700 font-medium hover:text-indigo-600 transition-colors duration-200"},"Features",-1)),d[8]||(d[8]=e("a",{href:"#about",class:"block text-gray-700 font-medium hover:text-indigo-600 transition-colors duration-200"},"About",-1)),d[9]||(d[9]=e("a",{href:"#contact",class:"block text-gray-700 font-medium hover:text-indigo-600 transition-colors duration-200"},"Contact",-1)),e("div",D8,[le(i,{to:"/login",class:"block text-indigo-600 hover:text-indigo-700 font-medium transition duration-200 mb-2"},{default:ye(()=>[...d[5]||(d[5]=[te(" Login ",-1)])]),_:1}),le(i,{to:"/register",class:"block bg-indigo-600 hover:bg-indigo-700 text-white px-4 py-2 rounded-xl font-medium transition-all duration-200 text-center"},{default:ye(()=>[...d[6]||(d[6]=[te(" Register ",-1)])]),_:1})])])):J("",!0)]),_:1})])]),e("section",C8,[e("div",T8,[e("div",E8,[d[12]||(d[12]=Ce('<div class="inline-flex items-center px-4 py-2 bg-indigo-100 rounded-full text-indigo-800 text-sm font-medium mb-8" data-v-f83a2314><svg class="w-4 h-4 mr-2" fill="currentColor" viewBox="0 0 24 24" data-v-f83a2314><path d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" data-v-f83a2314></path></svg> Trusted by 500+ Temples Worldwide </div><h1 class="text-4xl md:text-6xl font-bold text-gray-900 mb-6 leading-tight" data-v-f83a2314> Manage your temple, <span class="text-indigo-600" data-v-f83a2314>devotees, sevas</span><br class="hidden sm:block" data-v-f83a2314> &amp; donations with ease </h1><p class="text-xl text-gray-600 mb-10 max-w-3xl mx-auto leading-relaxed" data-v-f83a2314> Streamline your temple operations with our comprehensive SaaS platform. From devotee management to seva bookings, donations, and events - all in one place. </p>',3)),e("div",A8,[le(i,{to:"/register",class:"bg-indigo-600 hover:bg-indigo-700 text-white px-8 py-4 rounded-xl text-lg font-semibold transition-all duration-200 hover:shadow-xl hover:shadow-indigo-500/25 hover:-translate-y-1"},{default:ye(()=>[...d[10]||(d[10]=[te(" Get Started ",-1)])]),_:1}),le(i,{to:"/login",class:"border-2 border-indigo-600 text-indigo-600 hover:bg-indigo-600 hover:text-white px-8 py-4 rounded-xl text-lg font-semibold transition-all duration-200 hover:shadow-lg"},{default:ye(()=>[...d[11]||(d[11]=[te(" Already User? ",-1)])]),_:1})])])]),d[13]||(d[13]=e("div",{class:"absolute top-20 left-10 w-20 h-20 bg-indigo-200 rounded-full opacity-50 animate-pulse"},null,-1)),d[14]||(d[14]=e("div",{class:"absolute bottom-20 right-10 w-16 h-16 bg-indigo-300 rounded-full opacity-60 animate-pulse delay-1000"},null,-1))]),e("section",I8,[e("div",M8,[d[15]||(d[15]=e("div",{class:"text-center mb-16"},[e("h2",{class:"text-3xl md:text-4xl font-bold text-gray-900 mb-4"}," Everything you need to manage your temple "),e("p",{class:"text-xl text-gray-600 max-w-2xl mx-auto"}," Comprehensive tools designed specifically for temple administration and devotee engagement ")],-1)),e("div",R8,[(m(),g(be,null,$e(s,c=>e("div",{key:c.id,class:"bg-gradient-to-br from-white to-indigo-50 p-8 rounded-2xl border border-indigo-100 hover:shadow-xl hover:shadow-indigo-500/10 transition-all duration-300 hover:-translate-y-2"},[e("div",P8,[(m(),g("svg",N8,[e("path",{d:c.icon},null,8,j8)]))]),e("h3",L8,h(c.title),1),e("p",B8,h(c.description),1)])),64))])])]),e("section",U8,[e("div",F8,[e("div",V8,[(m(),g(be,null,$e(n,c=>e("div",{key:c.label,class:"text-white"},[e("div",O8,h(c.value),1),e("div",z8,h(c.label),1)])),64))])])]),e("footer",H8,[e("div",q8,[e("div",G8,[d[19]||(d[19]=Ce('<div class="md:col-span-2" data-v-f83a2314><div class="flex items-center space-x-3 mb-4" data-v-f83a2314><div class="w-10 h-10 bg-indigo-600 rounded-xl flex items-center justify-center" data-v-f83a2314><svg class="w-6 h-6 text-white" fill="currentColor" viewBox="0 0 24 24" data-v-f83a2314><path d="M12 2L2 7v10c0 5.55 3.84 9.739 9 11 5.16-1.261 9-5.45 9-11V7l-10-5z" data-v-f83a2314></path></svg></div><span class="text-xl font-bold" data-v-f83a2314>Devotee Connect</span></div><p class="text-gray-400 mb-4 max-w-md" data-v-f83a2314> Empowering temples worldwide with modern technology for better devotee management and spiritual community building. </p></div><div data-v-f83a2314><h4 class="font-semibold mb-4" data-v-f83a2314>Quick Links</h4><ul class="space-y-2 text-gray-400" data-v-f83a2314><li data-v-f83a2314><a href="#features" class="hover:text-white transition-colors duration-200" data-v-f83a2314>Features</a></li><li data-v-f83a2314><a href="#about" class="hover:text-white transition-colors duration-200" data-v-f83a2314>About</a></li><li data-v-f83a2314><a href="#contact" class="hover:text-white transition-colors duration-200" data-v-f83a2314>Contact</a></li></ul></div>',2)),e("div",null,[d[18]||(d[18]=e("h4",{class:"font-semibold mb-4"},"Legal",-1)),e("ul",J8,[e("li",null,[le(i,{to:"/terms",class:"hover:text-white transition-colors duration-200"},{default:ye(()=>[...d[16]||(d[16]=[te("Terms of Service",-1)])]),_:1})]),e("li",null,[le(i,{to:"/privacy",class:"hover:text-white transition-colors duration-200"},{default:ye(()=>[...d[17]||(d[17]=[te("Privacy Policy",-1)])]),_:1})])])])]),d[20]||(d[20]=e("div",{class:"border-t border-gray-800 mt-8 pt-8 text-center text-gray-400"},[e("p",null," 2025 Devotee Connect. All rights reserved.")],-1))])])])}}},Y8=ot(W8,[["__scopeId","data-v-f83a2314"]]),K8={class:"min-h-screen bg-gray-50"},X8={class:"bg-white shadow-sm border-b border-gray-200"},Z8={class:"max-w-4xl mx-auto px-4 py-3"},Q8={class:"flex items-center justify-between"},e7={class:"max-w-4xl mx-auto px-4 py-12"},t7={class:"bg-white rounded-2xl shadow-lg border border-gray-200 p-8 lg:p-12"},o7={class:"mb-8"},s7={class:"text-gray-600"},n7={class:"bg-white border-t border-gray-200 mt-12"},r7={class:"max-w-4xl mx-auto px-4 py-8"},a7={class:"flex items-center justify-between"},l7={class:"flex space-x-6"},i7={__name:"TermsPage",setup(t){const o=B("January 15, 2025");return(s,n)=>{const r=Ze("router-link");return m(),g("div",K8,[e("header",X8,[e("div",Z8,[e("div",Q8,[le(r,{to:"/",class:"inline-flex items-center"},{default:ye(()=>[...n[0]||(n[0]=[e("div",{class:"flex items-center space-x-3"},[e("div",{class:"w-10 h-10 bg-gradient-to-br from-indigo-600 to-indigo-800 rounded-xl flex items-center justify-center"},[e("svg",{class:"w-6 h-6 text-white",fill:"currentColor",viewBox:"0 0 24 24"},[e("path",{d:"M12 2L2 7v10c0 5.55 3.84 9.739 9 11 5.16-1.261 9-5.45 9-11V7l-10-5z"})])]),e("span",{class:"text-xl font-bold text-gray-900"},"TempleSaaS")],-1)])]),_:1}),le(r,{to:"/",class:"text-sm font-medium text-indigo-600 hover:text-indigo-500 transition-colors duration-200"},{default:ye(()=>[...n[1]||(n[1]=[te(" Back to Home ",-1)])]),_:1})])])]),e("main",e7,[e("div",t7,[e("div",o7,[n[2]||(n[2]=e("h1",{class:"text-3xl font-bold text-gray-900 mb-4"},"Terms of Service",-1)),e("p",s7,"Last updated: "+h(o.value),1)]),n[3]||(n[3]=Ce('<div class="prose prose-indigo max-w-none"><section class="mb-8"><h2 class="text-xl font-semibold text-gray-900 mb-4">1. Acceptance of Terms</h2><p class="text-gray-700 mb-4"> By accessing and using TempleSaaS (&quot;Service&quot;), you accept and agree to be bound by the terms and provision of this agreement. </p></section><section class="mb-8"><h2 class="text-xl font-semibold text-gray-900 mb-4">2. Description of Service</h2><p class="text-gray-700 mb-4"> TempleSaaS is a multi-tenant SaaS platform designed to help temples manage their activities including: </p><ul class="list-disc pl-6 text-gray-700 mb-4 space-y-2"><li>Devotee management and profile creation</li><li>Seva bookings and scheduling</li><li>Donation tracking and receipt generation</li><li>Event management and communication</li><li>Volunteer coordination</li></ul></section><section class="mb-8"><h2 class="text-xl font-semibold text-gray-900 mb-4">3. User Accounts and Registration</h2><p class="text-gray-700 mb-4"> To access certain features of the Service, you may be required to register for an account. You agree to: </p><ul class="list-disc pl-6 text-gray-700 mb-4 space-y-2"><li>Provide accurate, current, and complete information during registration</li><li>Maintain and promptly update your account information</li><li>Maintain the security of your password and account</li><li>Accept responsibility for all activities under your account</li></ul></section><section class="mb-8"><h2 class="text-xl font-semibold text-gray-900 mb-4">4. User Roles and Responsibilities</h2><div class="space-y-4"><div class="bg-indigo-50 rounded-lg p-4"><h3 class="font-medium text-indigo-900 mb-2">Temple Administrators (Tenants)</h3><p class="text-indigo-800 text-sm"> Responsible for temple registration, approval process, and managing temple operations including devotees, sevas, and events. </p></div><div class="bg-green-50 rounded-lg p-4"><h3 class="font-medium text-green-900 mb-2">Devotees</h3><p class="text-green-800 text-sm"> Can join approved temples, complete profiles, book sevas, make donations, and participate in temple events. </p></div><div class="bg-purple-50 rounded-lg p-4"><h3 class="font-medium text-purple-900 mb-2">Volunteers</h3><p class="text-purple-800 text-sm"> Can join approved temples, receive assignments, and support temple operations under admin guidance. </p></div></div></section><section class="mb-8"><h2 class="text-xl font-semibold text-gray-900 mb-4">5. Temple Approval Process</h2><p class="text-gray-700 mb-4"> Temple registrations are subject to administrative approval. We reserve the right to: </p><ul class="list-disc pl-6 text-gray-700 mb-4 space-y-2"><li>Review and verify temple documentation</li><li>Approve or reject temple applications</li><li>Request additional documentation as needed</li><li>Suspend or deactivate temple accounts for policy violations</li></ul></section><section class="mb-8"><h2 class="text-xl font-semibold text-gray-900 mb-4">6. Privacy and Data Protection</h2><p class="text-gray-700 mb-4"> Your privacy is important to us. Please review our Privacy Policy to understand how we collect, use, and protect your information. </p></section><section class="mb-8"><h2 class="text-xl font-semibold text-gray-900 mb-4">7. Prohibited Uses</h2><p class="text-gray-700 mb-4">You may not use our Service:</p><ul class="list-disc pl-6 text-gray-700 mb-4 space-y-2"><li>For any unlawful purpose or to solicit others to perform unlawful acts</li><li>To violate any international, federal, provincial, or state regulations, rules, laws, or local ordinances</li><li>To infringe upon or violate our intellectual property rights or the intellectual property rights of others</li><li>To harass, abuse, insult, harm, defame, slander, disparage, intimidate, or discriminate</li><li>To submit false or misleading information</li></ul></section><section class="mb-8"><h2 class="text-xl font-semibold text-gray-900 mb-4">8. Limitation of Liability</h2><p class="text-gray-700 mb-4"> In no event shall TempleSaaS, nor its directors, employees, partners, agents, suppliers, or affiliates, be liable for any indirect, incidental, special, consequential, or punitive damages, including without limitation, loss of profits, data, use, goodwill, or other intangible losses, resulting from your use of the Service. </p></section><section class="mb-8"><h2 class="text-xl font-semibold text-gray-900 mb-4">9. Termination</h2><p class="text-gray-700 mb-4"> We may terminate or suspend your account and bar access to the Service immediately, without prior notice or liability, under our sole discretion, for any reason whatsoever and without limitation, including but not limited to a breach of the Terms. </p></section><section class="mb-8"><h2 class="text-xl font-semibold text-gray-900 mb-4">10. Changes to Terms</h2><p class="text-gray-700 mb-4"> We reserve the right, at our sole discretion, to modify or replace these Terms at any time. If a revision is material, we will try to provide at least 30 days notice prior to any new terms taking effect. </p></section><section><h2 class="text-xl font-semibold text-gray-900 mb-4">11. Contact Information</h2><p class="text-gray-700 mb-4"> If you have any questions about these Terms of Service, please contact us at: </p><div class="bg-gray-50 rounded-lg p-4"><p class="text-gray-700"><strong>Email:</strong> support@TempleSaaS.com<br><strong>Address:</strong> Temple Management Solutions<br> 123 Spiritual Avenue, Sacred City, SC 12345 </p></div></section></div>',1))])]),e("footer",n7,[e("div",r7,[e("div",a7,[n[6]||(n[6]=e("p",{class:"text-sm text-gray-500"},"  2025 TempleSaaS. All rights reserved. ",-1)),e("div",l7,[le(r,{to:"/privacy",class:"text-sm text-gray-500 hover:text-indigo-600 transition-colors duration-200"},{default:ye(()=>[...n[4]||(n[4]=[te(" Privacy Policy ",-1)])]),_:1}),le(r,{to:"/",class:"text-sm text-gray-500 hover:text-indigo-600 transition-colors duration-200"},{default:ye(()=>[...n[5]||(n[5]=[te(" Home ",-1)])]),_:1})])])])])])}}},d7={class:"min-h-screen bg-gradient-to-br from-indigo-50 via-white to-indigo-100"},u7={class:"bg-white shadow-md border-b border-indigo-100"},c7={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},p7={class:"flex justify-between items-center h-16"},m7={class:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-12"},g7={class:"bg-white rounded-2xl shadow-lg border border-indigo-100 overflow-hidden"},f7={class:"bg-gradient-to-r from-indigo-600 to-indigo-800 px-8 py-12 text-center"},v7={class:"mt-6 text-indigo-200 text-sm"},h7={class:"px-8 py-12"},y7={class:"mb-12"},x7={class:"flex flex-wrap gap-2"},b7=["onClick"],w7={class:"space-y-12"},k7=["id"],_7=["id"],$7=["id"],S7=["id"],D7=["id"],C7={__name:"PrivacyPage",setup(t){const o=B("December 15, 2024"),s=B("information-collection"),n=[{id:"information-collection",title:"Information We Collect"},{id:"how-we-use",title:"How We Use Data"},{id:"data-security",title:"Data Security"},{id:"your-rights",title:"Your Rights"},{id:"contact-info",title:"Contact Us"}],r=a=>{const d=document.getElementById(a);d&&d.scrollIntoView({behavior:"smooth",block:"start"})},l=()=>{const a=window.scrollY+200;for(const d of n){const i=document.getElementById(d.id);if(i){const{offsetTop:c,offsetHeight:u}=i;if(a>=c&&a<c+u){s.value=d.id;break}}}};return Me(()=>{window.addEventListener("scroll",l)}),Pt(()=>{window.removeEventListener("scroll",l)}),(a,d)=>{const i=Ze("router-link");return m(),g("div",d7,[e("header",u7,[e("div",c7,[e("div",p7,[d[1]||(d[1]=Ce('<div class="flex items-center space-x-3"><div class="w-10 h-10 bg-gradient-to-br from-indigo-600 to-indigo-800 rounded-xl flex items-center justify-center"><svg class="w-6 h-6 text-white" fill="currentColor" viewBox="0 0 24 24"><path d="M12 2L2 7v10c0 5.55 3.84 9.739 9 11 5.16-1.261 9-5.45 9-11V7l-10-5z"></path></svg></div><span class="text-xl font-bold text-gray-900">TempleSaaS</span></div>',1)),le(i,{to:"/",class:"inline-flex items-center px-4 py-2 border border-indigo-200 rounded-xl text-sm font-medium text-indigo-700 bg-indigo-50 hover:bg-indigo-100 hover:border-indigo-300 transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2"},{default:ye(()=>[...d[0]||(d[0]=[e("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 19l-7-7m0 0l7-7m-7 7h18"})],-1),te(" Back to Home ",-1)])]),_:1})])])]),e("main",m7,[e("div",g7,[e("div",f7,[d[2]||(d[2]=Ce('<div class="w-16 h-16 bg-white bg-opacity-20 rounded-2xl flex items-center justify-center mx-auto mb-4"><svg class="w-8 h-8" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.031 9-11.622 0-1.042-.13-2.052-.382-3.016z"></path></svg></div><h1 class="text-3xl sm:text-4xl font-bold text-white mb-3">Privacy Policy</h1><p class="text-indigo-100 text-lg max-w-2xl mx-auto"> Your privacy and spiritual data security are sacred to us </p>',3)),e("div",v7," Last updated: "+h(o.value),1)]),e("div",h7,[e("nav",y7,[e("div",x7,[(m(),g(be,null,$e(n,c=>e("button",{key:c.id,onClick:u=>r(c.id),class:se(["px-4 py-2 text-sm font-medium rounded-xl border transition-all duration-200",s.value===c.id?"bg-indigo-600 text-white border-indigo-600":"text-indigo-600 border-indigo-200 hover:bg-indigo-50"])},h(c.title),11,b7)),64))])]),e("div",w7,[e("section",{id:n[0].id,class:"scroll-mt-8"},[...d[3]||(d[3]=[Ce('<div class="flex items-start space-x-4 mb-6"><div class="w-12 h-12 bg-indigo-100 rounded-xl flex items-center justify-center flex-shrink-0"><svg class="w-6 h-6 text-indigo-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg></div><div class="flex-1"><h2 class="text-2xl font-bold text-gray-900 mb-4">Information We Collect</h2><div class="prose prose-indigo max-w-none"><p class="text-gray-700 mb-4">We collect information to provide better spiritual services and temple management:</p><div class="grid md:grid-cols-2 gap-6 mb-6"><div class="bg-indigo-50 rounded-xl p-6 border borwhom:der-indigo-100"><h3 class="font-semibold text-indigo-900 mb-3">Personal Information</h3><ul class="text-sm text-indigo-800 space-y-2"><li> Full name and contact details</li><li> Spiritual information (Gotra, Nakshatra, Rashi)</li><li> Family lineage and relationships</li><li> Seva preferences and donations</li></ul></div><div class="bg-green-50 rounded-xl p-6 border border-green-100"><h3 class="font-semibold text-green-900 mb-3">Usage Information</h3><ul class="text-sm text-green-800 space-y-2"><li> Temple visits and seva bookings</li><li> Event participation and RSVPs</li><li> Communication preferences</li><li> Device and browser information</li></ul></div></div></div></div></div>',1)])],8,k7),e("section",{id:n[1].id,class:"scroll-mt-8"},[...d[4]||(d[4]=[Ce('<div class="flex items-start space-x-4 mb-6"><div class="w-12 h-12 bg-green-100 rounded-xl flex items-center justify-center flex-shrink-0"><svg class="w-6 h-6 text-green-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"></path></svg></div><div class="flex-1"><h2 class="text-2xl font-bold text-gray-900 mb-4">How We Use Your Information</h2><div class="grid gap-4"><div class="bg-gradient-to-r from-indigo-50 to-purple-50 rounded-xl p-6 border border-indigo-100"><h3 class="font-semibold text-indigo-900 mb-2"> Spiritual Services</h3><p class="text-indigo-800 text-sm">Facilitate seva bookings, manage donations, and coordinate temple events according to your spiritual preferences.</p></div><div class="bg-gradient-to-r from-blue-50 to-indigo-50 rounded-xl p-6 border border-blue-100"><h3 class="font-semibold text-blue-900 mb-2"> Communications</h3><p class="text-blue-800 text-sm">Send you important temple announcements, event notifications, and seva reminders via your preferred communication channels.</p></div><div class="bg-gradient-to-r from-green-50 to-teal-50 rounded-xl p-6 border border-green-100"><h3 class="font-semibold text-green-900 mb-2"> Account Security</h3><p class="text-green-800 text-sm">Protect your account, prevent fraud, and ensure the security of your spiritual and financial data.</p></div></div></div></div>',1)])],8,_7),e("section",{id:n[2].id,class:"scroll-mt-8"},[...d[5]||(d[5]=[Ce('<div class="flex items-start space-x-4 mb-6"><div class="w-12 h-12 bg-red-100 rounded-xl flex items-center justify-center flex-shrink-0"><svg class="w-6 h-6 text-red-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"></path></svg></div><div class="flex-1"><h2 class="text-2xl font-bold text-gray-900 mb-4">Data Security &amp; Storage</h2><div class="bg-red-50 rounded-xl p-6 border border-red-100 mb-6"><h3 class="font-semibold text-red-900 mb-3"> Security Measures</h3><div class="grid md:grid-cols-2 gap-4 text-sm text-red-800"><div> End-to-end encryption for all data</div><div> Secure cloud storage with backups</div><div> Multi-factor authentication</div><div> Regular security audits</div><div> Role-based access controls</div><div> GDPR compliance measures</div></div></div><div class="bg-yellow-50 rounded-xl p-6 border border-yellow-100"><h3 class="font-semibold text-yellow-900 mb-2"> Important Note</h3><p class="text-yellow-800 text-sm">Your spiritual data is treated with the utmost respect and confidentiality. We never share personal spiritual information with third parties without explicit consent.</p></div></div></div>',1)])],8,$7),e("section",{id:n[3].id,class:"scroll-mt-8"},[...d[6]||(d[6]=[Ce('<div class="flex items-start space-x-4 mb-6"><div class="w-12 h-12 bg-purple-100 rounded-xl flex items-center justify-center flex-shrink-0"><svg class="w-6 h-6 text-purple-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"></path></svg></div><div class="flex-1"><h2 class="text-2xl font-bold text-gray-900 mb-4">Your Privacy Rights</h2><div class="grid gap-4"><div class="flex items-start space-x-4 p-4 bg-gray-50 rounded-xl border border-gray-200"><div class="w-8 h-8 bg-indigo-100 rounded-lg flex items-center justify-center flex-shrink-0"><span class="text-indigo-600 font-bold">1</span></div><div><h3 class="font-semibold text-gray-900 mb-1">Access &amp; Download</h3><p class="text-gray-700 text-sm">Request a copy of all your personal and spiritual data stored in our system.</p></div></div><div class="flex items-start space-x-4 p-4 bg-gray-50 rounded-xl border border-gray-200"><div class="w-8 h-8 bg-indigo-100 rounded-lg flex items-center justify-center flex-shrink-0"><span class="text-indigo-600 font-bold">2</span></div><div><h3 class="font-semibold text-gray-900 mb-1">Correction &amp; Updates</h3><p class="text-gray-700 text-sm">Update or correct any inaccurate information in your profile at any time.</p></div></div><div class="flex items-start space-x-4 p-4 bg-gray-50 rounded-xl border border-gray-200"><div class="w-8 h-8 bg-indigo-100 rounded-lg flex items-center justify-center flex-shrink-0"><span class="text-indigo-600 font-bold">3</span></div><div><h3 class="font-semibold text-gray-900 mb-1">Account Deletion</h3><p class="text-gray-700 text-sm">Request complete deletion of your account and associated data from our platform.</p></div></div></div></div></div>',1)])],8,S7),e("section",{id:n[4].id,class:"scroll-mt-8"},[...d[7]||(d[7]=[Ce('<div class="bg-gradient-to-r from-indigo-600 to-purple-600 rounded-2xl p-8 text-white"><div class="text-center mb-8"><div class="w-16 h-16 bg-opacity-20 rounded-2xl flex items-center justify-center mx-auto mb-4"><svg class="w-8 h-8 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"></path></svg></div><h2 class="text-2xl font-bold mb-2">Questions About Privacy?</h2><p class="text-indigo-100">We&#39;re here to help with any privacy concerns</p></div><div class="grid md:grid-cols-2 gap-6"><div class="bg-opacity-10 rounded-xl p-6 backdrop-blur-sm"><h3 class="font-semibold mb-3 flex items-center"><svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"></path></svg> Email Support </h3><p class="text-indigo-100 text-sm">privacy@TempleSaaS.com</p></div><div class="bg-opacity-10 rounded-xl p-6 backdrop-blur-sm"><h3 class="font-semibold mb-3 flex items-center"><svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg> Response Time </h3><p class="text-indigo-100 text-sm">Within 48 hours</p></div></div></div>',1)])],8,D7)])])])]),d[8]||(d[8]=e("footer",{class:"bg-white border-t border-indigo-100 mt-12"},[e("div",{class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},[e("div",{class:"text-center text-gray-600 text-sm"},[e("p",null," 2024 TempleSaaS. All rights reserved. | Built with devotion for spiritual communities.")])])],-1))])}}},T7={class:"login-form"},E7={key:0,class:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative mb-4"},A7={class:"block sm:inline"},I7={class:"mt-1"},M7=["disabled"],R7={class:"mt-1"},P7=["disabled"],N7={class:"flex items-center justify-between"},j7={class:"flex items-center"},L7=["disabled"],B7={class:"text-sm"},U7={key:1,class:"font-medium text-gray-400 cursor-not-allowed",title:"Complete CAPTCHA verification first"},F7=["disabled"],V7={class:"text-center"},O7={__name:"LoginForm",setup(t){const o=et(),s=tt(),n=We(),r=B({email:"",password:""}),l=B(!1),a=B(!1),d=B(null),i=B(""),c=B(!1);oe(()=>s.query.redirect||"");const u=async()=>{var w,f;if(!r.value.email||!r.value.password){d.value="Please enter your email and password";return}if(!c.value){d.value="Please complete the CAPTCHA verification";return}a.value=!0,d.value=null;try{console.log(" Starting login process...");const v=await n.login({email:r.value.email,password:r.value.password,captchaToken:i.value});if(v.success){console.log(" Login successful!"),console.log(" User role:",n.userRole),console.log(" Redirect path from auth store:",v.redirectPath);const N=v.redirectPath;console.log(" Navigating to:",N),await o.push(N),console.log(" Navigation completed successfully")}else console.log(" Login failed:",v.error),d.value=v.error||"Login failed",p()}catch(v){console.error(" Login error:",v),v.response?v.response.status===401?d.value="Invalid email or password":v.response.status===403?d.value="Your account is locked or inactive":v.response.status>=500?d.value="Server error. Please try again later":d.value=((w=v.response.data)==null?void 0:w.message)||((f=v.response.data)==null?void 0:f.error)||"Login failed":v.request?d.value="Cannot connect to the server. Please check your internet connection":d.value=v.message||"An unexpected error occurred",p()}finally{a.value=!1}},p=()=>{c.value=!1,i.value="",window.turnstile&&window.turnstile.reset()};return Me(()=>{window.turnstile&&window.turnstile.render("#turnstile",{sitekey:"0x4AAAAAAB5PF2XfNfEgAul2",callback:function(w){i.value=w,c.value=!0,console.log(" CAPTCHA verification successful")},"error-callback":function(){i.value="",c.value=!1,d.value="CAPTCHA verification failed. Please try again.",console.log(" CAPTCHA verification failed")},"expired-callback":function(){i.value="",c.value=!1,d.value="CAPTCHA expired. Please verify again.",console.log(" CAPTCHA expired")}})}),(w,f)=>{const v=Ze("router-link");return m(),g("div",T7,[d.value?(m(),g("div",E7,[e("span",A7,h(d.value),1),e("button",{onClick:f[0]||(f[0]=N=>d.value=null),class:"absolute top-0 right-0 p-2",type:"button"},[...f[4]||(f[4]=[e("span",{class:"text-red-700"},"",-1)])])])):J("",!0),e("form",{onSubmit:qe(u,["prevent"]),class:"space-y-6"},[e("div",null,[f[5]||(f[5]=e("label",{for:"email",class:"block text-sm font-medium text-gray-700"},"Email",-1)),e("div",I7,[ce(e("input",{id:"email","onUpdate:modelValue":f[1]||(f[1]=N=>r.value.email=N),type:"email",required:"",autocomplete:"email",class:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500",placeholder:"Enter your email",disabled:a.value},null,8,M7),[[_e,r.value.email]])])]),e("div",null,[f[6]||(f[6]=e("label",{for:"password",class:"block text-sm font-medium text-gray-700"},"Password",-1)),e("div",R7,[ce(e("input",{id:"password","onUpdate:modelValue":f[2]||(f[2]=N=>r.value.password=N),type:"password",required:"",autocomplete:"current-password",class:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500",placeholder:"Enter your password",disabled:a.value},null,8,P7),[[_e,r.value.password]])])]),e("div",N7,[e("div",j7,[ce(e("input",{id:"remember_me","onUpdate:modelValue":f[3]||(f[3]=N=>l.value=N),type:"checkbox",class:"h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded",disabled:a.value},null,8,L7),[[ct,l.value]]),f[7]||(f[7]=e("label",{for:"remember_me",class:"ml-2 block text-sm text-gray-900"},"Remember me",-1))]),e("div",B7,[c.value?(m(),Ne(v,{key:0,to:"/forgot-password",class:"font-medium text-indigo-600 hover:text-indigo-500"},{default:ye(()=>[...f[8]||(f[8]=[te(" Forgot your password? ",-1)])]),_:1})):(m(),g("span",U7," Forgot your password? "))])]),f[12]||(f[12]=e("div",{id:"turnstile"},null,-1)),e("div",null,[e("button",{type:"submit",disabled:a.value||!c.value,class:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50 disabled:cursor-not-allowed"},[a.value?(m(),g(be,{key:0},[f[9]||(f[9]=e("svg",{class:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1)),f[10]||(f[10]=te(" Signing in... ",-1))],64)):c.value?(m(),g(be,{key:2},[te(" Sign in ")],64)):(m(),g(be,{key:1},[te(" Complete CAPTCHA to Sign in ")],64))],8,F7)]),e("div",V7,[le(v,{to:"/register",class:"font-medium text-indigo-600 hover:text-indigo-500"},{default:ye(()=>[...f[11]||(f[11]=[te(" Don't have an account? Register ",-1)])]),_:1})])],32)])}}},z7=ot(O7,[["__scopeId","data-v-a5c38237"]]),H7={class:"min-h-screen bg-gradient-to-br from-indigo-50 via-white to-indigo-100 flex items-center justify-center px-2 sm:px-4 lg:px-0"},q7={class:"relative w-full max-w-md z-10"},G7={class:"bg-white/80 backdrop-blur-sm rounded-2xl shadow-xl border border-white/20 p-8"},J7={__name:"LoginView",setup(t){document.title="Login - Temple SaaS";const o=et(),s=n=>{console.log("Login successful. User role:",n.role);const r=(n.role||"").toLowerCase();if(r==="standard_user"||r==="standarduser"||r==="monitoring_user"||r==="monitoringuser"){console.log("EMERGENCY REDIRECT: Forcing immediate redirect to tenant selection"),window.location.href=window.location.origin+"/tenant-selection";return}if(r==="superadmin"||r==="super_admin")o.push("/superadmin/dashboard");else if(r==="tenant"||r==="templeadmin"){const l=n.id||localStorage.getItem("current_tenant_id");o.push(l?`/tenant/${l}/dashboard`:"/tenant/dashboard")}else r==="devotee"?o.push("/devotee/temple-selection"):r==="volunteer"?o.push("/volunteer/temple-selection"):o.push("/")};return Me(()=>{try{const n=JSON.parse(localStorage.getItem("user_data"));if(n&&n.role){const r=n.role.toLowerCase();console.log("LOGIN VIEW - Checking role on mount:",r),(r==="standard_user"||r==="standarduser"||r==="monitoring_user"||r==="monitoringuser")&&(console.log("LOGIN VIEW - Detected special role, force redirecting"),setTimeout(()=>{window.location.href=window.location.origin+"/tenant-selection"},100))}}catch(n){console.error("Error checking user role on mount:",n)}}),(n,r)=>(m(),g("div",H7,[r[2]||(r[2]=e("div",{class:"absolute inset-0 bg-white/50 backdrop-blur-sm"},[e("div",{class:"absolute inset-0 bg-[radial-gradient(circle_at_2px_2px,rgba(79,70,229,0.1)_1px,transparent_0)] [background-size:24px_24px]"})],-1)),e("div",q7,[r[0]||(r[0]=Ce('<div class="text-center mb-8"><div class="inline-flex items-center justify-center w-16 h-16 bg-indigo-600 rounded-2xl shadow-lg mb-4"><svg class="w-8 h-8 text-white" fill="currentColor" viewBox="0 0 24 24"><path d="M12 2L2 7L12 12L22 7L12 2Z"></path><path d="M2 17L12 22L22 17"></path><path d="M2 12L12 17L22 12"></path></svg></div><h1 class="text-2xl font-bold text-indigo-900 mb-2">Temple SaaS</h1><p class="text-indigo-600 text-sm">Manage your temple with ease</p></div>',1)),e("div",G7,[le(z7,{onLoginSuccess:s})]),r[1]||(r[1]=e("div",{class:"text-center mt-8"},[e("p",{class:"text-sm text-indigo-600/80"},"  2025 Temple SaaS. All rights reserved. ")],-1))]),r[3]||(r[3]=e("div",{class:"absolute top-10 left-10 w-20 h-20 bg-indigo-200/30 rounded-full blur-xl"},null,-1)),r[4]||(r[4]=e("div",{class:"absolute bottom-10 right-10 w-32 h-32 bg-indigo-300/20 rounded-full blur-2xl"},null,-1)),r[5]||(r[5]=e("div",{class:"absolute top-1/2 left-1/4 w-4 h-4 bg-indigo-400/40 rounded-full"},null,-1)),r[6]||(r[6]=e("div",{class:"absolute top-1/3 right-1/3 w-6 h-6 bg-indigo-500/30 rounded-full"},null,-1))]))}},W7={key:0,class:"border-b border-gray-100 pb-4 mb-4"},Y7={key:0,class:"flex items-center justify-between"},K7={class:"text-lg font-semibold text-gray-900"},X7={key:1,class:"border-t border-gray-100 pt-4 mt-4"},Z7="bg-white rounded-xl shadow-md border border-gray-200 transition-all duration-200",Rt={__name:"BaseCard",props:{title:{type:String,default:""},elevated:{type:Boolean,default:!1},hoverable:{type:Boolean,default:!1},clickable:{type:Boolean,default:!1},padding:{type:String,default:"default",validator:t=>["none","sm","default","lg"].includes(t)},contentClass:{type:String,default:""},customClass:{type:String,default:""}},emits:["click"],setup(t,{emit:o}){const s=t,n=o,r=hm(),l=oe(()=>!!(r.header||s.title)),a=oe(()=>!!r.footer),d={none:"",sm:"p-3 sm:p-4",default:"p-4 sm:p-6",lg:"p-6 sm:p-8"},i=oe(()=>{let u=Z7;const p=d[s.padding]||d.default;return u+=` ${p}`,s.hoverable&&(u+=" hover:shadow-lg hover:border-indigo-200"),s.elevated&&(u+=" shadow-lg border-indigo-200"),s.clickable&&(u+=" cursor-pointer"),s.customClass&&(u+=` ${s.customClass}`),u}),c=u=>{s.clickable&&n("click",u)};return(u,p)=>(m(),g("div",{class:se(i.value),onClick:c},[l.value?(m(),g("div",W7,[Tt(u.$slots,"header",{},()=>[t.title?(m(),g("div",Y7,[e("h3",K7,h(t.title),1),Tt(u.$slots,"headerActions")])):J("",!0)])])):J("",!0),e("div",{class:se(t.contentClass)},[Tt(u.$slots,"default")],2),a.value?(m(),g("div",X7,[Tt(u.$slots,"footer")])):J("",!0)],2))}},Q7={class:"space-y-1"},eS=["for"],tS={key:0,class:"text-red-500 ml-1"},oS={class:"relative"},sS={key:0,class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},nS=["id","type","value","placeholder","disabled","readonly","required","autocomplete"],rS={key:1,class:"absolute inset-y-0 right-0 pr-3 flex items-center"},aS={key:1,class:"text-sm text-gray-500"},lS={key:2,class:"text-sm text-red-600"},at={__name:"BaseInput",props:{modelValue:{type:[String,Number],default:""},type:{type:String,default:"text",validator:t=>["text","email","password","number","tel","url","search"].includes(t)},label:{type:String,default:""},placeholder:{type:String,default:""},helpText:{type:String,default:""},error:{type:String,default:""},required:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},readonly:{type:Boolean,default:!1},iconLeft:{type:[String,Object],default:null},iconRight:{type:[String,Object],default:null},autocomplete:{type:String,default:"off"},size:{type:String,default:"md",validator:t=>["sm","md","lg"].includes(t)}},emits:["update:modelValue","blur","focus","keydown"],setup(t,{emit:o}){const s=t,n=o,r=B(`input-${Math.random().toString(36).substr(2,9)}`),l=B(!1),a=oe(()=>!!s.error),d=oe(()=>s.type==="password"),i=oe(()=>d.value?l.value?"text":"password":s.type),c=oe(()=>{const N=["block w-full border rounded-md shadow-sm","placeholder-gray-400","focus:outline-none focus:ring-2 focus:ring-offset-2","transition-colors duration-200"],A={sm:"px-2.5 py-1.5 sm:px-3 sm:py-2 text-xs sm:text-sm",md:"px-3 py-2 sm:px-4 sm:py-2.5 text-sm",lg:"px-3 py-2.5 sm:px-4 sm:py-3 text-sm sm:text-base"};return N.push(A[s.size]||A.md),s.iconLeft&&N.push("pl-10"),(s.iconRight||d.value)&&N.push("pr-10"),a.value?N.push("border-red-300 text-red-900","focus:ring-red-500 focus:border-red-500"):N.push("border-gray-300 text-gray-900","focus:ring-indigo-500 focus:border-indigo-500"),s.disabled?N.push("bg-gray-50 text-gray-500 cursor-not-allowed"):s.readonly?N.push("bg-gray-50"):N.push("bg-white"),N.join(" ")}),u=N=>{n("update:modelValue",N.target.value)},p=N=>{n("blur",N)},w=N=>{n("focus",N)},f=N=>{n("keydown",N)},v=()=>{l.value=!l.value};return Me(()=>{r.value.startsWith("input-")||(r.value=`input-${Math.random().toString(36).substr(2,9)}`)}),(N,A)=>(m(),g("div",Q7,[t.label?(m(),g("label",{key:0,for:r.value,class:se(["block text-sm font-medium text-gray-700",{"text-red-700":a.value}])},[te(h(t.label)+" ",1),t.required?(m(),g("span",tS,"*")):J("",!0)],10,eS)):J("",!0),e("div",oS,[t.iconLeft?(m(),g("div",sS,[(m(),Ne(wt(t.iconLeft),{class:se(["h-5 w-5 text-gray-400",{"text-red-400":a.value}])},null,8,["class"]))])):J("",!0),e("input",{id:r.value,type:i.value,value:t.modelValue,placeholder:t.placeholder,disabled:t.disabled,readonly:t.readonly,required:t.required,autocomplete:t.autocomplete,class:se(c.value),onInput:u,onBlur:p,onFocus:w,onKeydown:f},null,42,nS),t.iconRight||d.value?(m(),g("div",rS,[d.value?(m(),g("button",{key:0,type:"button",class:"text-gray-400 hover:text-gray-600 focus:outline-none",onClick:v},[l.value?(m(),Ne(Te(ox),{key:0,class:"h-5 w-5"})):(m(),Ne(Te(tx),{key:1,class:"h-5 w-5"}))])):t.iconRight?(m(),Ne(wt(t.iconRight),{key:1,class:se(["h-5 w-5 text-gray-400",{"text-red-400":a.value}])},null,8,["class"])):J("",!0)])):J("",!0)]),t.helpText&&!a.value?(m(),g("p",aS,h(t.helpText),1)):J("",!0),a.value?(m(),g("p",lS,h(t.error),1)):J("",!0)]))}},iS=["type","disabled"],dS={key:0,class:"animate-spin -ml-1 mr-2 h-4 w-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},uS={key:2},gt={__name:"BaseButton",props:{variant:{type:String,default:"primary",validator:t=>["primary","secondary","outline","ghost","danger","success","warning"].includes(t)},size:{type:String,default:"md",validator:t=>["xs","sm","md","lg","xl"].includes(t)},type:{type:String,default:"button",validator:t=>["button","submit","reset"].includes(t)},text:{type:String,default:""},disabled:{type:Boolean,default:!1},loading:{type:Boolean,default:!1},iconLeft:{type:[String,Object],default:null},iconRight:{type:[String,Object],default:null},fullWidth:{type:Boolean,default:!1},rounded:{type:String,default:"md",validator:t=>["none","sm","md","lg","xl","full"].includes(t)}},emits:["click"],setup(t,{emit:o}){const s=t,n=o,r=oe(()=>{const u={primary:"bg-indigo-600 text-white hover:bg-indigo-700 focus:ring-indigo-500 border-transparent",secondary:"bg-indigo-100 text-indigo-700 hover:bg-indigo-200 focus:ring-indigo-500 border-transparent",outline:"bg-transparent text-indigo-600 border-indigo-300 hover:bg-indigo-50 focus:ring-indigo-500",ghost:"bg-transparent text-gray-700 hover:bg-gray-100 focus:ring-gray-500 border-transparent",danger:"bg-red-600 text-white hover:bg-red-700 focus:ring-red-500 border-transparent",success:"bg-green-600 text-white hover:bg-green-700 focus:ring-green-500 border-transparent",warning:"bg-yellow-500 text-white hover:bg-yellow-600 focus:ring-yellow-400 border-transparent"};return u[s.variant]||u.primary}),l=oe(()=>{const u={xs:"px-2 py-1 sm:px-2.5 sm:py-1.5 text-xs",sm:"px-2.5 py-1.5 sm:px-3 sm:py-2 text-xs sm:text-sm",md:"px-3 py-2 sm:px-4 sm:py-2.5 text-sm",lg:"px-4 py-2.5 sm:px-6 sm:py-3 text-sm sm:text-base",xl:"px-6 py-3 sm:px-8 sm:py-4 text-base sm:text-lg"};return u[s.size]||u.md}),a=oe(()=>{const u={xs:"w-3 h-3",sm:"w-4 h-4",md:"w-4 h-4",lg:"w-5 h-5",xl:"w-6 h-6"};return u[s.size]||u.md}),d=oe(()=>{const u={none:"rounded-none",sm:"rounded-sm",md:"rounded-md",lg:"rounded-lg",xl:"rounded-xl",full:"rounded-full"};return u[s.rounded]||u.md}),i=oe(()=>{const u=["inline-flex items-center justify-center","font-medium","border","transition-all duration-200","focus:outline-none focus:ring-2 focus:ring-offset-2",d.value,r.value,l.value];return s.fullWidth&&u.push("w-full"),(s.disabled||s.loading)&&u.push("opacity-50 cursor-not-allowed"),s.iconLeft&&(s.text||s.$slots.default)&&u.push("space-x-2"),s.iconRight&&(s.text||s.$slots.default)&&u.push("space-x-2"),u.join(" ")}),c=u=>{!s.disabled&&!s.loading&&n("click",u)};return(u,p)=>(m(),g("button",{type:t.type,disabled:t.disabled||t.loading,class:se(i.value),onClick:c},[t.loading?(m(),g("svg",dS,[...p[0]||(p[0]=[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)])])):J("",!0),t.iconLeft&&!t.loading?(m(),Ne(wt(t.iconLeft),{key:1,class:se(a.value)},null,8,["class"])):J("",!0),u.$slots.default||t.text?(m(),g("span",uS,[Tt(u.$slots,"default",{},()=>[te(h(t.text),1)])])):J("",!0),t.iconRight&&!t.loading?(m(),Ne(wt(t.iconRight),{key:3,class:se(a.value)},null,8,["class"])):J("",!0)],10,iS))}},cS={key:0,class:"mt-2 space-y-2"},pS={class:"flex space-x-1"},mS={class:"flex items-center justify-between"},gS={class:"text-xs text-gray-500"},fS={class:"space-y-1"},vS={key:0,"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"},hS={key:1,cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"2"},yS={key:0,class:"bg-yellow-50 border border-yellow-200 rounded-lg p-3 mt-3"},xS={__name:"PasswordStrengthMeter",props:{password:{type:String,default:""}},setup(t,{expose:o}){const s=t,n=oe(()=>{if(!s.password)return 0;let i=0;return s.password.length>=8&&(i+=1),s.password.length>=12&&(i+=1),/[a-z]/.test(s.password)&&(i+=1),/[A-Z]/.test(s.password)&&(i+=1),/\d/.test(s.password)&&(i+=1),/[^a-zA-Z\d]/.test(s.password)&&(i+=1),s.password.length>=16&&(i+=1),Math.min(i,4)}),r=oe(()=>[{key:"length",text:"At least 8 characters",met:s.password.length>=8},{key:"lowercase",text:"One lowercase letter",met:/[a-z]/.test(s.password)},{key:"uppercase",text:"One uppercase letter",met:/[A-Z]/.test(s.password)},{key:"number",text:"One number",met:/\d/.test(s.password)},{key:"special",text:"One special character",met:/[^a-zA-Z\d]/.test(s.password)}]),l=oe(()=>["Very Weak","Weak","Fair","Good","Strong"][n.value]||"Very Weak"),a=i=>{if(i<=n.value)switch(n.value){case 1:return"bg-red-500";case 2:return"bg-orange-500";case 3:return"bg-yellow-500";case 4:return"bg-green-500";default:return"bg-gray-200"}return"bg-gray-200"},d=()=>{switch(n.value){case 1:return"text-red-600";case 2:return"text-orange-600";case 3:return"text-yellow-600";case 4:return"text-green-600";default:return"text-gray-500"}};return o({strength:n,isValid:oe(()=>n.value>=3)}),(i,c)=>t.password?(m(),g("div",cS,[e("div",pS,[(m(),g(be,null,$e(4,u=>e("div",{key:u,class:se(["h-2 flex-1 rounded-full transition-all duration-300",a(u)])},null,2)),64))]),e("div",mS,[e("span",{class:se(["text-sm font-medium",d()])},h(l.value),3),e("span",gS,h(t.password.length)+"/8+ characters ",1)]),e("div",fS,[(m(!0),g(be,null,$e(r.value,u=>(m(),g("div",{key:u.key,class:se(["flex items-center text-xs transition-colors duration-200",u.met?"text-green-600":"text-gray-500"])},[(m(),g("svg",{class:se(["w-3 h-3 mr-2 transition-colors duration-200",u.met?"text-green-500":"text-gray-400"]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[u.met?(m(),g("path",vS)):(m(),g("circle",hS))],2)),te(" "+h(u.text),1)],2))),128))]),n.value<3?(m(),g("div",yS,[...c[0]||(c[0]=[Ce('<div class="flex items-start"><svg class="w-4 h-4 text-yellow-600 mt-0.5 mr-2 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L5.082 16.5c-.77.833.192 2.5 1.732 2.5z"></path></svg><div><p class="text-sm text-yellow-800 font-medium">Security Tip</p><p class="text-xs text-yellow-700 mt-1"> Use a mix of uppercase, lowercase, numbers, and symbols for better security </p></div></div>',1)])])):J("",!0)])):J("",!0)}},bS={key:0,class:"mb-6 bg-green-50 border border-green-200 rounded-lg p-4"},wS={class:"flex items-center"},kS={class:"ml-3"},_S={class:"mt-1 text-sm text-green-700"},$S={key:0},SS={key:1},DS={class:"mt-3"},CS={class:"grid grid-cols-3 gap-4"},TS=["onClick"],ES={class:"flex flex-col items-center text-center"},AS={class:"w-7 h-7 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},IS={key:0,"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-2 8h2V9h-2v8z"},MS={key:1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"},RS={key:2,"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"},PS={class:"font-medium text-gray-900"},NS={key:0,class:"absolute top-3 right-3 w-6 h-6 bg-indigo-600 rounded-full flex items-center justify-center"},jS={key:0,class:"mt-2 text-sm text-red-600"},LS={key:0,class:"mt-6 overflow-hidden bg-white rounded-lg border border-gray-200"},BS={class:"px-6 py-5 space-y-6"},US={key:0,class:"mt-1 text-xs text-red-600"},FS={key:0,class:"mt-1 text-xs text-red-600"},VS={key:0,class:"mt-1 text-xs text-red-600"},OS={key:0,class:"mt-1 text-xs text-red-600"},zS={key:0,class:"mt-1 text-xs text-red-600"},HS={class:"flex items-start mt-6"},qS={for:"terms",class:"ml-3 text-sm text-gray-700"},GS={key:1,class:"text-red-600 text-sm -mt-4"},JS={class:"text-center pt-4 border-t border-gray-200"},WS={class:"text-sm text-gray-600"},YS={class:"py-4"},KS={key:0,class:"text-gray-600"},XS={key:1,class:"text-gray-600"},ZS={__name:"RegisterView",setup(t){const o=et(),s=We(),{success:n,error:r}=Ue(),l=B(!1),a=B(!1),d=B(!1),i=B(!1),c=B({}),u=B(""),p=B(!1),w=[{value:"tenant",label:"Temple Admin"},{value:"devotee",label:"Devotee"},{value:"volunteer",label:"Volunteer"}],f=B({fullName:"",email:"",password:"",phone:"",role:"",acceptTerms:!1,templeDetails:null}),v=B({name:"",place:"",address:"",phoneNumber:"",description:""});Oe(()=>f.value.role,(b,E)=>{E==="tenant"&&b!=="tenant"&&["templeName","templePlace","templeAddress","templePhoneNo","templeDescription"].forEach(M=>{delete c.value[M]})});const N=oe(()=>{const b=f.value.fullName&&f.value.email&&f.value.password&&f.value.phone&&f.value.role&&f.value.acceptTerms,E=f.value.role!=="tenant"||v.value.name&&v.value.place&&v.value.address&&v.value.phoneNumber&&v.value.description;return b&&E&&Object.keys(c.value).length===0}),A=b=>{c.value[b]&&(delete c.value[b],c.value={...c.value})},F=b=>{console.log("Role selected:",b),f.value.role=b,A("role"),b!=="tenant"&&(["templeName","templePlace","templeAddress","templePhoneNo","templeDescription"].forEach(R=>delete c.value[R]),c.value={...c.value})},I=()=>{const b={},E=/^[A-Za-z\s]+$/;return f.value.fullName.trim()?f.value.fullName.trim().length<2?b.fullName="Full name must be at least 2 characters":E.test(f.value.fullName.trim())||(b.fullName="Full name cannot contain numbers or special characters"):b.fullName="Full name is required",f.value.email?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(f.value.email)?f.value.email.endsWith("@gmail.com")||(b.email="Only @gmail.com email addresses are allowed"):b.email="Please enter a valid email address":b.email="Email is required",f.value.password?f.value.password.length<8&&(b.password="Password must be at least 8 characters"):b.password="Password is required",f.value.phone?/^[\+]?[1-9][\d]{0,15}$/.test(f.value.phone.replace(/\s/g,""))||(b.phone="Please enter a valid phone number"):b.phone="Phone number is required",f.value.role||(b.role="Please select your role"),f.value.role==="tenant"&&(v.value.name||(b.templeName="Temple name is required"),v.value.place||(b.templePlace="Temple place is required"),v.value.address||(b.templeAddress="Temple address is required"),v.value.phoneNumber||(b.templePhoneNo="Temple phone number is required"),v.value.description||(b.templeDescription="Temple description is required"),v.value.name&&v.value.place&&v.value.address&&v.value.phoneNumber&&v.value.description&&(f.value.templeDetails={...v.value})),f.value.acceptTerms||(b.acceptTerms="You must accept the terms and privacy policy"),c.value=b,Object.keys(b).length===0},C=()=>{p.value=!1,u.value="",window.turnstile&&window.turnstile.reset()},j=async()=>{var b,E,R,M;if(!p.value){r("Please complete the CAPTCHA verification");return}if(c.value={},!I()){Qo(()=>{const G=document.querySelector(".text-red-600");G&&G.scrollIntoView({behavior:"smooth",block:"center"})});return}l.value=!0;try{const G={tenant:"templeadmin",devotee:"devotee",volunteer:"volunteer"},U={fullName:f.value.fullName,email:f.value.email,password:f.value.password,phone:f.value.phone,role:G[f.value.role]||f.value.role,captchaToken:u.value};f.value.role==="tenant"&&(U.templeName=v.value.name,U.templePlace=v.value.place,U.templeAddress=v.value.address,U.templePhoneNo=v.value.phoneNumber,U.templeDescription=v.value.description||"");try{const _=await Fe.auth.register(U);d.value=f.value.role==="tenant",a.value=!0,i.value=!0,n(d.value?"Your temple admin account has been created! You'll be notified after approval.":"Your account has been created successfully!"),s&&typeof s.setRegistrationResult=="function"&&s.setRegistrationResult({success:!0,needsApproval:d.value,message:d.value?"Your temple admin account has been created. You'll be notified after approval.":"Your account has been created successfully."}),$(),setTimeout(()=>y(),3e3)}catch(_){if(console.error("API Error during registration:",_),(E=(b=_.response)==null?void 0:b.data)!=null&&E.error){const k=_.response.data.error;k==="Email is already registered"?(c.value.email="This email is already registered. Please login or use another email.",r(c.value.email)):r(k)}if((M=(R=_.response)==null?void 0:R.data)!=null&&M.errors){const k=_.response.data.errors;Object.keys(k).forEach(L=>{c.value[L]=k[L]})}c.value={...c.value},C()}}catch(G){console.error("Registration error:",G),r("An error occurred during registration. Please try again."),C()}finally{l.value=!1}},$=()=>{f.value={fullName:"",email:"",password:"",phone:"",role:"",acceptTerms:!1,templeDetails:null},v.value={name:"",place:"",address:"",phoneNumber:"",description:""},c.value={}},y=()=>{a.value=!1,Qo(()=>o.push("/login"))};return Me(()=>{window.turnstile&&window.turnstile.render("#turnstile",{sitekey:"0x4AAAAAAB5PF2XfNfEgAul2",callback:function(b){u.value=b,p.value=!0,console.log(" CAPTCHA verification successful")},"error-callback":function(){u.value="",p.value=!1,r("CAPTCHA verification failed. Please try again."),console.log(" CAPTCHA verification failed")},"expired-callback":function(){u.value="",p.value=!1,r("CAPTCHA expired. Please verify again."),console.log(" CAPTCHA expired")}})}),(b,E)=>{const R=Ze("router-link");return m(),Ne(Rt,{class:"w-full max-w-md mx-auto"},{default:ye(()=>[E[45]||(E[45]=e("div",{class:"text-center mb-8"},[e("h2",{class:"text-3xl font-bold text-gray-900 mb-2"},"Create Account"),e("p",{class:"text-gray-600"},"Join our temple management platform")],-1)),i.value?(m(),g("div",bS,[e("div",wS,[E[22]||(E[22]=e("div",{class:"flex-shrink-0"},[e("svg",{class:"h-5 w-5 text-green-500",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[e("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z","clip-rule":"evenodd"})])],-1)),e("div",kS,[E[21]||(E[21]=e("h3",{class:"text-sm font-medium text-green-800"},"Registration Successful!",-1)),e("div",_S,[d.value?(m(),g("p",$S," Your temple admin account has been created. You'll receive an email once your account is approved by our team. ")):(m(),g("p",SS," Your account has been created successfully. You can now login to access your dashboard. "))]),e("div",DS,[le(gt,{onClick:y,variant:"success",size:"sm"},{default:ye(()=>[...E[20]||(E[20]=[te(" Go to Login ",-1)])]),_:1})])])])])):J("",!0),i.value?J("",!0):(m(),g("form",{key:1,onSubmit:qe(j,["prevent"]),class:"space-y-6"},[e("div",null,[E[23]||(E[23]=e("label",{for:"fullName",class:"block text-sm font-medium text-gray-700 mb-2"},[te(" Full Name "),e("span",{class:"text-red-500"},"*")],-1)),le(at,{id:"fullName",modelValue:f.value.fullName,"onUpdate:modelValue":E[0]||(E[0]=M=>f.value.fullName=M),type:"text",placeholder:"Enter your full name",error:c.value.fullName,required:"",autocomplete:"name",onInput:E[1]||(E[1]=M=>A("fullName"))},null,8,["modelValue","error"])]),e("div",null,[E[24]||(E[24]=e("label",{for:"email",class:"block text-sm font-medium text-gray-700 mb-2"},[te(" Email Address "),e("span",{class:"text-red-500"},"*")],-1)),le(at,{id:"email",modelValue:f.value.email,"onUpdate:modelValue":E[2]||(E[2]=M=>f.value.email=M),type:"email",placeholder:"Enter your email",error:c.value.email,required:"",autocomplete:"email",onInput:E[3]||(E[3]=M=>A("email"))},null,8,["modelValue","error"])]),e("div",null,[E[25]||(E[25]=e("label",{for:"password",class:"block text-sm font-medium text-gray-700 mb-2"},[te(" Password "),e("span",{class:"text-red-500"},"*")],-1)),le(at,{id:"password",modelValue:f.value.password,"onUpdate:modelValue":E[4]||(E[4]=M=>f.value.password=M),type:"password",placeholder:"Create a strong password",error:c.value.password,required:"",autocomplete:"new-password",onInput:E[5]||(E[5]=M=>A("password"))},null,8,["modelValue","error"]),le(xS,{password:f.value.password,class:"mt-2"},null,8,["password"])]),e("div",null,[E[26]||(E[26]=e("label",{for:"phone",class:"block text-sm font-medium text-gray-700 mb-2"},[te(" Phone Number "),e("span",{class:"text-red-500"},"*")],-1)),le(at,{id:"phone",modelValue:f.value.phone,"onUpdate:modelValue":E[6]||(E[6]=M=>f.value.phone=M),type:"tel",placeholder:"Enter your phone number",error:c.value.phone,required:"",autocomplete:"tel",onInput:E[7]||(E[7]=M=>A("phone"))},null,8,["modelValue","error"])]),e("div",null,[E[28]||(E[28]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},[te(" I want to join as "),e("span",{class:"text-red-500"},"*")],-1)),e("div",CS,[(m(),g(be,null,$e(w,M=>e("div",{key:M.value,class:se(["relative border-2 rounded-lg cursor-pointer transition-all duration-200 p-4",f.value.role===M.value?"border-indigo-600 bg-indigo-50 shadow-md":"border-gray-200 hover:border-indigo-300 hover:bg-gray-50"]),onClick:G=>F(M.value)},[e("div",ES,[e("div",{class:se(["w-14 h-14 rounded-full flex items-center justify-center mb-2 transition-colors duration-200",f.value.role===M.value?"bg-indigo-100":"bg-gray-200"])},[(m(),g("svg",AS,[M.value==="tenant"?(m(),g("path",IS)):M.value==="devotee"?(m(),g("path",MS)):M.value==="volunteer"?(m(),g("path",RS)):J("",!0)]))],2),e("h3",PS,h(M.label),1)]),f.value.role===M.value?(m(),g("div",NS,[...E[27]||(E[27]=[e("svg",{class:"w-4 h-4 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})],-1)])])):J("",!0)],10,TS)),64))]),c.value.role?(m(),g("div",jS,h(c.value.role),1)):J("",!0)]),f.value.role==="tenant"?(m(),g("div",LS,[E[34]||(E[34]=e("div",{class:"px-6 py-4 bg-indigo-600"},[e("div",{class:"flex items-center"},[e("h3",{class:"text-lg font-medium leading-6 text-white"},"Temple Details")]),e("p",{class:"mt-1 text-sm text-indigo-100"}," Please provide the following details about your temple ")],-1)),e("div",BS,[e("div",null,[E[29]||(E[29]=e("label",{for:"templeName",class:"block text-sm font-medium text-gray-700 mb-1"},[te(" Temple Name "),e("span",{class:"text-red-500"},"*")],-1)),ce(e("input",{id:"templeName","onUpdate:modelValue":E[8]||(E[8]=M=>v.value.name=M),type:"text",class:"block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",placeholder:"Enter temple name",required:"",onInput:E[9]||(E[9]=M=>A("templeName"))},null,544),[[_e,v.value.name]]),c.value.templeName?(m(),g("div",US,h(c.value.templeName),1)):J("",!0)]),e("div",null,[E[30]||(E[30]=e("label",{for:"templePlace",class:"block text-sm font-medium text-gray-700 mb-1"},[te(" Temple Place "),e("span",{class:"text-red-500"},"*")],-1)),ce(e("input",{id:"templePlace","onUpdate:modelValue":E[10]||(E[10]=M=>v.value.place=M),type:"text",class:"block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",placeholder:"Enter temple location",required:"",onInput:E[11]||(E[11]=M=>A("templePlace"))},null,544),[[_e,v.value.place]]),c.value.templePlace?(m(),g("div",FS,h(c.value.templePlace),1)):J("",!0)]),e("div",null,[E[31]||(E[31]=e("label",{for:"templeAddress",class:"block text-sm font-medium text-gray-700 mb-1"},[te(" Temple Address "),e("span",{class:"text-red-500"},"*")],-1)),ce(e("textarea",{id:"templeAddress","onUpdate:modelValue":E[12]||(E[12]=M=>v.value.address=M),rows:"3",class:"block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",placeholder:"Enter complete temple address",required:"",onInput:E[13]||(E[13]=M=>A("templeAddress"))},null,544),[[_e,v.value.address]]),c.value.templeAddress?(m(),g("div",VS,h(c.value.templeAddress),1)):J("",!0)]),e("div",null,[E[32]||(E[32]=e("label",{for:"templePhone",class:"block text-sm font-medium text-gray-700 mb-1"},[te(" Temple Phone Number "),e("span",{class:"text-red-500"},"*")],-1)),ce(e("input",{id:"templePhone","onUpdate:modelValue":E[14]||(E[14]=M=>v.value.phoneNumber=M),type:"tel",class:"block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",placeholder:"Enter temple contact number",required:"",onInput:E[15]||(E[15]=M=>A("templePhoneNo"))},null,544),[[_e,v.value.phoneNumber]]),c.value.templePhoneNo?(m(),g("div",OS,h(c.value.templePhoneNo),1)):J("",!0)]),e("div",null,[E[33]||(E[33]=e("label",{for:"templeDescription",class:"block text-sm font-medium text-gray-700 mb-1"},[te(" Description "),e("span",{class:"text-red-500"},"*")],-1)),ce(e("textarea",{id:"templeDescription","onUpdate:modelValue":E[16]||(E[16]=M=>v.value.description=M),rows:"4",class:"block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",placeholder:"Provide additional details about your temple (history, services, etc.)",required:"",onInput:E[17]||(E[17]=M=>A("templeDescription"))},null,544),[[_e,v.value.description]]),c.value.templeDescription?(m(),g("div",zS,h(c.value.templeDescription),1)):J("",!0)])])])):J("",!0),e("div",HS,[ce(e("input",{id:"terms","onUpdate:modelValue":E[18]||(E[18]=M=>f.value.acceptTerms=M),type:"checkbox",required:"",class:"mt-1 h-4 w-4 text-indigo-600 border-gray-300 rounded focus:ring-indigo-500 focus:ring-2",onChange:E[19]||(E[19]=M=>A("acceptTerms"))},null,544),[[ct,f.value.acceptTerms]]),e("label",qS,[E[37]||(E[37]=te(" I agree to the ",-1)),le(R,{to:"/terms",class:"text-indigo-600 hover:text-indigo-800 font-medium"},{default:ye(()=>[...E[35]||(E[35]=[te(" Terms of Service ",-1)])]),_:1}),E[38]||(E[38]=te(" and ",-1)),le(R,{to:"/privacy",class:"text-indigo-600 hover:text-indigo-800 font-medium"},{default:ye(()=>[...E[36]||(E[36]=[te(" Privacy Policy ",-1)])]),_:1}),E[39]||(E[39]=e("span",{class:"text-red-500"},"*",-1))])]),c.value.acceptTerms?(m(),g("div",GS,h(c.value.acceptTerms),1)):J("",!0),E[42]||(E[42]=e("div",{id:"turnstile"},null,-1)),le(gt,{type:"submit",variant:"primary",size:"lg",loading:l.value,disabled:!N.value||!p.value,class:"w-full mt-6"},{default:ye(()=>[p.value?(m(),g(be,{key:1},[te(" Create Account ")],64)):(m(),g(be,{key:0},[te(" Complete CAPTCHA to Register ")],64))]),_:1},8,["loading","disabled"]),e("div",JS,[e("p",WS,[E[41]||(E[41]=te(" Already have an account? ",-1)),le(R,{to:"/login",class:"text-indigo-600 hover:text-indigo-800 font-medium transition-colors duration-200"},{default:ye(()=>[...E[40]||(E[40]=[te(" Sign In ",-1)])]),_:1})])])],32)),a.value?(m(),Ne(Aa,{key:2,onClose:y},{header:ye(()=>[...E[43]||(E[43]=[e("h3",{class:"text-lg font-medium text-gray-900"},"Registration Successful!",-1)])]),default:ye(()=>[e("div",YS,[d.value?(m(),g("p",KS," Your temple admin account has been created. You'll receive an email once your account is approved by our team. ")):(m(),g("p",XS," Your account has been created successfully. You can now login to access your dashboard. "))])]),footer:ye(()=>[le(gt,{onClick:y,variant:"primary",class:"w-full"},{default:ye(()=>[...E[44]||(E[44]=[te(" Go to Login ",-1)])]),_:1})]),_:1})):J("",!0)]),_:1})}}},QS={class:"text-center mb-8"},e9={class:"text-gray-600"},t9={key:0,class:"text-center space-y-6"},o9={class:"bg-green-50 border border-green-200 rounded-xl p-6"},s9={class:"text-green-700 text-sm mb-4"},n9={class:"space-y-3"},r9={class:"text-center pt-4 border-t border-gray-200"},a9={class:"text-sm text-gray-600"},l9={__name:"ForgotPasswordView",setup(t){const o=et(),s=We(),{showToast:n}=Ue(),r=B(!1),l=B(!1),a=B({email:""}),d=B({email:""}),i=oe(()=>a.value.email&&!d.value.email),c=()=>(d.value={},a.value.email?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(a.value.email)||(d.value.email="Please enter a valid email address"):d.value.email="Email is required",Object.keys(d.value).length===0),u=async()=>{if(c()){r.value=!0;try{const w=await s.forgotPassword(a.value.email);w.success?(l.value=!0,n("Password reset instructions sent to your email","success")):n(w.message||"Failed to send reset instructions. Please try again.","error")}catch(w){console.error("Forgot password error:",w),n("An error occurred. Please try again later.","error")}finally{r.value=!1}}},p=()=>{l.value=!1,a.value.email="",d.value={}};return(w,f)=>{const v=Ze("router-link");return m(),Ne(Rt,{class:"w-full max-w-md mx-auto"},{default:ye(()=>[e("div",QS,[f[2]||(f[2]=e("h2",{class:"text-3xl font-bold text-gray-900 mb-2"},"Reset Password",-1)),e("p",e9,h(l.value?"Check your email for reset instructions":"Enter your email to receive reset instructions"),1)]),l.value?(m(),g("div",t9,[e("div",o9,[f[4]||(f[4]=e("div",{class:"flex items-center justify-center w-12 h-12 mx-auto mb-4 bg-green-100 rounded-full"},[e("svg",{class:"w-6 h-6 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})])],-1)),f[5]||(f[5]=e("h3",{class:"text-lg font-semibold text-green-900 mb-2"},"Email Sent!",-1)),e("p",s9,[f[3]||(f[3]=te(" We've sent password reset instructions to ",-1)),e("strong",null,h(a.value.email),1)]),f[6]||(f[6]=e("p",{class:"text-green-600 text-xs"}," Didn't receive the email? Check your spam folder or try again in a few minutes. ",-1))]),e("div",n9,[le(gt,{onClick:p,variant:"outline",size:"md",class:"w-full"},{default:ye(()=>[...f[7]||(f[7]=[te(" Try Different Email ",-1)])]),_:1}),le(gt,{onClick:f[0]||(f[0]=N=>Te(o).push("/login")),variant:"primary",size:"md",class:"w-full"},{default:ye(()=>[...f[8]||(f[8]=[te(" Back to Login ",-1)])]),_:1})])])):(m(),g("form",{key:1,onSubmit:qe(u,["prevent"]),class:"space-y-6"},[e("div",null,[f[9]||(f[9]=e("label",{for:"email",class:"block text-sm font-medium text-gray-700 mb-2"}," Email Address ",-1)),le(at,{id:"email",modelValue:a.value.email,"onUpdate:modelValue":f[1]||(f[1]=N=>a.value.email=N),type:"email",placeholder:"Enter your registered email",error:d.value.email,required:"",autocomplete:"email"},null,8,["modelValue","error"]),f[10]||(f[10]=e("p",{class:"text-sm text-gray-500 mt-2"}," Enter the email address associated with your account ",-1))]),le(gt,{type:"submit",variant:"primary",size:"lg",loading:r.value,disabled:!i.value,class:"w-full"},{default:ye(()=>[...f[11]||(f[11]=[te(" Send Reset Instructions ",-1)])]),_:1},8,["loading","disabled"]),e("div",r9,[e("p",a9,[f[13]||(f[13]=te(" Remember your password? ",-1)),le(v,{to:"/login",class:"text-indigo-600 hover:text-indigo-800 font-medium transition-colors duration-200"},{default:ye(()=>[...f[12]||(f[12]=[te(" Back to Login ",-1)])]),_:1})])])],32)),f[14]||(f[14]=e("div",{class:"mt-8 p-4 bg-gray-50 rounded-xl"},[e("h4",{class:"text-sm font-medium text-gray-900 mb-2"},"Need Help?"),e("p",{class:"text-xs text-gray-600 leading-relaxed"}," If you're having trouble accessing your account, please contact our support team. We're here to help you get back to managing your temple activities. ")],-1))]),_:1})}}},i9={class:"min-h-screen bg-gray-50 flex flex-col justify-center py-12 sm:px-6 lg:px-8"},d9={class:"mt-8 sm:mx-auto sm:w-full sm:max-w-md"},u9={key:0,class:"text-center py-4"},c9={key:1,class:"text-center py-4"},p9={class:"mt-2 text-sm text-gray-600"},m9={key:0},g9={class:"mt-2"},f9={class:"h-2 bg-gray-200 rounded-full overflow-hidden"},v9={class:"mt-2 grid grid-cols-1 gap-y-1 text-xs"},h9={key:3,class:"text-center space-y-6"},Cu={__name:"ResetPasswordView",setup(t){const o=tt(),s=et(),n=We(),{showToast:r}=Ue(),l=B(o.query.token||""),a=B(!0),d=B(""),i=B(!1),c=B(!1),u=B({password:"",confirmPassword:""}),p=B({password:"",confirmPassword:""}),w=oe(()=>{const A=u.value.password,F={minLength:A.length>=8,hasUppercase:/[A-Z]/.test(A),hasLowercase:/[a-z]/.test(A),hasNumber:/\d/.test(A),hasSpecialChar:/[!@#$%^&*(),.?":{}|<>]/.test(A)},I=Object.values(F).filter(Boolean).length;return{criteria:F,score:I,strength:I<3?"weak":I<5?"medium":"strong"}}),f=oe(()=>u.value.password&&u.value.confirmPassword&&u.value.password===u.value.confirmPassword&&w.value.score>=3);Oe(()=>o.query.token,A=>{l.value=A||"",v()});const v=async()=>{console.log("Validating token:",l.value),console.log("Current route path:",o.path),a.value=!0;try{return l.value?(setTimeout(()=>{a.value=!1},1e3),!0):(d.value="No reset token provided. Please check your email link.",console.error("No token provided in URL"),!1)}catch(A){return console.error("Token validation error:",A),d.value="Error validating token",!1}finally{}},N=async()=>{if(p.value={},u.value.password?u.value.password.length<8&&(p.value.password="Password must be at least 8 characters"):p.value.password="Password is required",u.value.confirmPassword?u.value.password!==u.value.confirmPassword&&(p.value.confirmPassword="Passwords do not match"):p.value.confirmPassword="Please confirm your password",!(Object.keys(p.value).length>0)){c.value=!0;try{console.log("Submitting reset password with token:",l.value);const A=await n.resetPassword(l.value,u.value.password);console.log("Password reset result:",A),A!=null&&A.success?(i.value=!0,r("Password has been reset successfully","success")):(d.value=(A==null?void 0:A.error)||"Failed to reset password",r(d.value,"error"))}catch(A){console.error("Password reset error:",A),d.value="An error occurred. Please try again later.",r(d.value,"error")}finally{c.value=!1}}};return Me(()=>{console.log("ResetPasswordView mounted!"),console.log("Current route:",o.path),console.log("Route query params:",o.query),console.log("Token from query:",l.value),setTimeout(()=>{v()},100)}),(A,F)=>(m(),g("div",i9,[F[13]||(F[13]=e("div",{class:"sm:mx-auto sm:w-full sm:max-w-md"},[e("h2",{class:"mt-6 text-center text-3xl font-extrabold text-gray-900"},"Reset Your Password"),e("p",{class:"mt-2 text-center text-sm text-gray-600"},"Set a new password for your account")],-1)),e("div",d9,[le(Rt,{class:"w-full max-w-md mx-auto"},{default:ye(()=>[a.value?(m(),g("div",u9,[...F[4]||(F[4]=[e("div",{class:"animate-spin rounded-full h-10 w-10 border-b-2 border-indigo-600 mx-auto"},null,-1),e("p",{class:"mt-2 text-gray-600"},"Validating your reset token...",-1)])])):d.value?(m(),g("div",c9,[F[6]||(F[6]=e("div",{class:"rounded-full bg-red-100 p-2 mx-auto w-12 h-12 flex items-center justify-center mb-4"},[e("svg",{class:"w-6 h-6 text-red-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})])],-1)),F[7]||(F[7]=e("h3",{class:"text-lg font-medium text-red-800"},"Invalid or Expired Link",-1)),e("p",p9,h(d.value||"The password reset link is invalid or has expired. Please request a new password reset link."),1),le(gt,{onClick:F[0]||(F[0]=I=>Te(s).push("/forgot-password")),variant:"primary",size:"lg",class:"mt-4 w-full"},{default:ye(()=>[...F[5]||(F[5]=[te(" Request New Link ",-1)])]),_:1})])):i.value?(m(),g("div",h9,[F[12]||(F[12]=e("div",{class:"bg-green-50 border border-green-200 rounded-xl p-6"},[e("div",{class:"flex items-center justify-center w-12 h-12 mx-auto mb-4 bg-green-100 rounded-full"},[e("svg",{class:"w-6 h-6 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})])]),e("h3",{class:"text-lg font-semibold text-green-900 mb-2"},"Password Reset Successful!"),e("p",{class:"text-green-700 text-sm mb-4"}," Your password has been reset successfully. You can now log in with your new password. ")],-1)),le(gt,{onClick:F[3]||(F[3]=I=>Te(s).push("/login")),variant:"primary",size:"lg",class:"w-full"},{default:ye(()=>[...F[11]||(F[11]=[te(" Go to Login ",-1)])]),_:1})])):(m(),g("form",{key:2,onSubmit:qe(N,["prevent"]),class:"space-y-6"},[e("div",null,[F[8]||(F[8]=e("label",{for:"password",class:"block text-sm font-medium text-gray-700 mb-2"}," New Password ",-1)),le(at,{id:"password",modelValue:u.value.password,"onUpdate:modelValue":F[1]||(F[1]=I=>u.value.password=I),type:"password",placeholder:"Enter your new password",error:p.value.password,required:""},null,8,["modelValue","error"])]),e("div",null,[F[9]||(F[9]=e("label",{for:"confirmPassword",class:"block text-sm font-medium text-gray-700 mb-2"}," Confirm New Password ",-1)),le(at,{id:"confirmPassword",modelValue:u.value.confirmPassword,"onUpdate:modelValue":F[2]||(F[2]=I=>u.value.confirmPassword=I),type:"password",placeholder:"Confirm your new password",error:p.value.confirmPassword,required:""},null,8,["modelValue","error"])]),u.value.password?(m(),g("div",m9,[e("div",g9,[e("div",f9,[e("div",{class:se(["h-full rounded-full transition-all duration-300",{"bg-red-500":w.value.score<3,"bg-yellow-500":w.value.score===3,"bg-green-500":w.value.score>3}]),style:Vt({width:`${w.value.score*20}%`})},null,6)]),e("div",v9,[e("div",{class:se(w.value.criteria.minLength?"text-green-600":"text-gray-500")},"  At least 8 characters ",2),e("div",{class:se(w.value.criteria.hasUppercase?"text-green-600":"text-gray-500")},"  At least 1 uppercase letter ",2),e("div",{class:se(w.value.criteria.hasLowercase?"text-green-600":"text-gray-500")},"  At least 1 lowercase letter ",2),e("div",{class:se(w.value.criteria.hasNumber?"text-green-600":"text-gray-500")},"  At least 1 number ",2),e("div",{class:se(w.value.criteria.hasSpecialChar?"text-green-600":"text-gray-500")},"  At least 1 special character ",2)])])])):J("",!0),le(gt,{type:"submit",variant:"primary",size:"lg",loading:c.value,disabled:!f.value,class:"w-full"},{default:ye(()=>[...F[10]||(F[10]=[te(" Reset Password ",-1)])]),_:1},8,["loading","disabled"])],32))]),_:1})])]))}},y9={class:"min-h-screen bg-gray-50"},x9={class:"bg-white shadow-sm border-b border-gray-200 rounded-2xl"},b9={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6 flex justify-between items-center"},w9={class:"text-gray-600 mt-1"},k9={key:0,class:"text-indigo-600 font-medium"},_9={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 bg-white rounded-2xl shadow-sm border border-gray-200 mt-6"},$9={class:"mb-4"},S9={class:"relative"},D9=["disabled"],C9=["value"],T9={key:0,class:"absolute right-3 top-3"},E9={class:"mb-4"},A9=["disabled"],I9={class:"mb-4"},M9={class:"flex space-x-2"},R9=["onClick","disabled"],P9={class:"mb-4"},N9={class:"flex space-x-2"},j9=["onClick","disabled"],L9={key:0,class:"mb-4 grid grid-cols-1 md:grid-cols-2 gap-4"},B9=["disabled"],U9=["disabled"],F9={class:"flex flex-wrap items-center justify-between pt-4 border-t border-gray-200"},V9={class:"w-40"},O9=["disabled"],z9=["value"],H9=["disabled"],q9={key:0,class:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},G9={key:1,class:"mr-2 h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},J9={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 mt-6 bg-white rounded-2xl shadow-sm border border-gray-200 p-6"},W9={class:"flex flex-wrap gap-3"},Y9={class:"inline-flex items-center bg-indigo-100 text-indigo-800 rounded-full px-3 py-1 text-sm font-semibold"},K9={class:"inline-flex items-center bg-indigo-100 text-indigo-800 rounded-full px-3 py-1 text-sm font-semibold"},X9={class:"inline-flex items-center bg-indigo-100 text-indigo-800 rounded-full px-3 py-1 text-sm font-semibold"},Z9={key:0},Q9={class:"inline-flex items-center bg-indigo-100 text-indigo-800 rounded-full px-3 py-1 text-sm font-semibold"},eD={class:"inline-flex items-center bg-indigo-100 text-indigo-800 rounded-full px-3 py-1 text-sm font-semibold"},tD={key:0,class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 mt-6 bg-white rounded-lg shadow-sm border border-gray-200 overflow-auto"},oD={class:"p-4 border-b border-gray-200"},sD={class:"text-lg font-medium"},nD={class:"overflow-x-auto"},rD={class:"min-w-full divide-y divide-gray-200"},aD={class:"bg-gray-50"},lD={class:"bg-white divide-y divide-gray-200"},iD={key:0,class:"p-4 border-t border-gray-200 bg-gray-50"},dD={class:"text-sm text-gray-600 text-center"},uD={key:1,class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 mt-6 bg-white rounded-lg shadow-sm border border-gray-200 p-12 text-center"},cD={key:2,class:"fixed inset-0 bg-black bg-opacity-30 flex items-center justify-center z-50"},pD="Tenant",mD="Administrator",gD={__name:"AuditLogsView",setup(t){const o=B([]),s=B(!1),n=B("all"),r=B({action:"",status:"",startDate:"",endDate:""}),l=B("weekly"),a=B(!1),d=B(!1),i=B("pdf"),c=B([]),u=B([]),{showToast:p}=Ue(),w=[{value:"REGISTRATION_SUCCESS",label:"Registration Success",group:"Authentication"},{value:"REGISTRATION_FAILED",label:"Registration Failed",group:"Authentication"},{value:"TEMPLEADMIN_REGISTRATION_SUCCESS",label:"Temple Admin Registration",group:"Authentication"},{value:"REGISTRATION_BLOCKED",label:"Registration Blocked",group:"Authentication"},{value:"LOGIN_SUCCESS",label:"Login Success",group:"Authentication"},{value:"LOGIN_FAILED",label:"Login Failed",group:"Authentication"},{value:"LOGOUT",label:"Logout",group:"Authentication"},{value:"PASSWORD_RESET_REQUESTED",label:"Password Reset Requested",group:"Authentication"},{value:"PASSWORD_RESET_SUCCESS",label:"Password Reset Success",group:"Authentication"},{value:"PASSWORD_RESET_FAILED",label:"Password Reset Failed",group:"Authentication"},{value:"TEMPLE_CREATED",label:"Temple Created",group:"Entity"},{value:"TEMPLE_UPDATED",label:"Temple Updated",group:"Entity"},{value:"TEMPLE_CREATE_FAILED",label:"Temple Create Failed",group:"Entity"},{value:"TEMPLE_UPDATE_FAILED",label:"Temple Update Failed",group:"Entity"},{value:"EVENT_CREATED",label:"Event Created",group:"Events"},{value:"EVENT_UPDATED",label:"Event Updated",group:"Events"},{value:"EVENT_DELETED",label:"Event Deleted",group:"Events"},{value:"SEVA_CREATED",label:"Seva Created",group:"Seva"},{value:"SEVA_UPDATED",label:"Seva Updated",group:"Seva"},{value:"SEVA_BOOKED",label:"Seva Booked",group:"Seva"},{value:"SEVA_BOOKING_APPROVED",label:"Seva Booking Approved",group:"Seva"},{value:"SEVA_BOOKING_REJECTED",label:"Seva Booking Rejected",group:"Seva"},{value:"DONATION_INITIATED",label:"Donation Initiated",group:"Donations"},{value:"DONATION_SUCCESS",label:"Donation Success",group:"Donations"},{value:"DONATION_FAILED",label:"Donation Failed",group:"Donations"},{value:"DONATION_VERIFICATION_FAILED",label:"Donation Verification Failed",group:"Donations"},{value:"TEMPLATE_CREATED",label:"Template Created",group:"Notifications"},{value:"TEMPLATE_UPDATED",label:"Template Updated",group:"Notifications"},{value:"TEMPLATE_DELETED",label:"Template Deleted",group:"Notifications"},{value:"EMAIL_SENT",label:"Email Sent",group:"Notifications"},{value:"SMS_SENT",label:"SMS Sent",group:"Notifications"},{value:"WHATSAPP_SENT",label:"WhatsApp Sent",group:"Notifications"},{value:"PROFILE_CREATED",label:"Profile Created",group:"User Profile"},{value:"PROFILE_UPDATED",label:"Profile Updated",group:"User Profile"},{value:"DEVOTEE_JOINED_TEMPLE",label:"Devotee Joined Temple",group:"User Profile"},{value:"VOLUNTEER_JOINED_TEMPLE",label:"Volunteer Joined Temple",group:"User Profile"},{value:"DEVOTEE_BIRTHDAYS_REPORT_VIEWED",label:"Birthday Report Viewed",group:"Reports"},{value:"DEVOTEE_BIRTHDAYS_REPORT_DOWNLOADED",label:"Birthday Report Downloaded",group:"Reports"},{value:"TEMPLE_REGISTER_REPORT_VIEWED",label:"Temple Register Report Viewed",group:"Reports"},{value:"TEMPLE_REGISTER_REPORT_DOWNLOADED",label:"Temple Register Report Downloaded",group:"Reports"},{value:"TEMPLE_ACTIVITIES_REPORT_VIEWED",label:"Activities Report Viewed",group:"Reports"},{value:"TEMPLE_ACTIVITIES_REPORT_DOWNLOADED",label:"Activities Report Downloaded",group:"Reports"}],f=[{value:"",label:"All"},{value:"success",label:"Success"},{value:"failure",label:"Failure"}],v=[{value:"daily",label:"Daily"},{value:"weekly",label:"Weekly"},{value:"monthly",label:"Monthly"},{value:"custom",label:"Custom Range"}],N=[{value:"pdf",label:"PDF"},{value:"csv",label:"CSV"},{value:"excel",label:"Excel"}];async function A(){s.value=!0;try{console.log("Fetching temples for audit logs dropdown...");const R=await lt.getTemples();console.log("Received temples:",R),Array.isArray(R)&&R.length>0?(o.value=R.map(M=>({id:M.id,name:M.name})),console.log(`Mapped ${o.value.length} temples:`,o.value),p(`${o.value.length} temples loaded successfully`,"success")):(console.warn("No temples found in response"),o.value=[],p("No temples found","warning"))}catch(R){console.error("Error fetching temples:",R),console.error("Error details:",R.message),p("Failed to load temples: "+R.message,"error"),o.value=[]}finally{s.value=!1}}function F(R){l.value=R;const M=new Date;let G,U;R==="daily"?G=U=M:R==="weekly"?(G=new Date(M),G.setDate(G.getDate()-7),U=M):R==="monthly"&&(G=new Date(M),G.setMonth(G.getMonth()-1),U=M),R!=="custom"&&(r.value.startDate=G.toISOString().split("T")[0],r.value.endDate=U.toISOString().split("T")[0]),b()}const I=oe(()=>{if(n.value==="all")return"All Entities";const R=o.value.find(M=>M.id===n.value);return R?R.name:"Unknown Entity"}),C=oe(()=>{const R=v.find(M=>M.value===l.value);return R?R.label:l.value}),j=oe(()=>{const R=N.find(M=>M.value===i.value);return R?R.label:i.value});function $(R){if(!R)return null;const M=w.find(G=>G.value===R);return M?M.label:R}function y(R){return R==null?"-":typeof R=="boolean"?R?"Yes":"No":typeof R=="object"?JSON.stringify(R):typeof R=="string"&&/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}/.test(R)?new Date(R).toLocaleString():String(R)}async function b(){var R;a.value=!0;try{const M={entityId:n.value,actionType:r.value.action||void 0,dateRange:l.value,startDate:l.value==="custom"?r.value.startDate:void 0,endDate:l.value==="custom"?r.value.endDate:void 0,status:r.value.status||void 0},G=await Ve.getAuditLogsReport(M);let U=((R=G.data)==null?void 0:R.data)||G.data||[];U.audit_logs&&(U=U.audit_logs),c.value=U,U.length>0?u.value=Object.keys(U[0]).map(_=>({key:_,label:_.replace(/_/g," ").toUpperCase()})):u.value=[]}catch(M){console.error("Error fetching audit logs:",M),p("Failed to load audit logs preview","error"),c.value=[],u.value=[]}finally{a.value=!1}}async function E(){d.value=!0;try{const R={entityId:n.value,dateRange:l.value,startDate:l.value==="custom"?r.value.startDate:void 0,endDate:l.value==="custom"?r.value.endDate:void 0,format:i.value,actionType:r.value.action||void 0,status:r.value.status||void 0};await Ve.downloadAuditLogsReport(R),p("Audit logs report downloaded successfully","success")}catch(R){console.error("Error downloading report:",R),p("Failed to download report","error")}finally{d.value=!1}}return Me(async()=>{await A(),F("weekly")}),Oe([()=>r.value.action,()=>r.value.status,()=>n.value],()=>{b()}),(R,M)=>(m(),g("div",y9,[e("div",x9,[e("div",b9,[e("div",null,[M[6]||(M[6]=e("h1",{class:"text-2xl font-bold text-gray-900"},"Audit Logs Report",-1)),e("p",w9,[M[5]||(M[5]=te(" Monitor audit activities within your temple system ",-1)),n.value&&n.value!=="all"?(m(),g("span",k9," (Entity ID: "+h(n.value)+") ",1)):J("",!0)])]),e("div",{class:"bg-indigo-50 px-4 py-2 rounded-lg border border-indigo-200 flex items-center space-x-4"},[e("span",{class:"text-indigo-800 font-medium"},h(pD)),e("span",{class:"text-indigo-600 text-sm"},"("+h(mD)+")")])])]),e("div",_9,[M[19]||(M[19]=e("h3",{class:"text-xl font-bold mb-4"},"Filter Audit Logs",-1)),e("div",$9,[M[9]||(M[9]=e("label",{class:"block text-gray-700 font-medium mb-2"},"Select Temple",-1)),e("div",S9,[ce(e("select",{"onUpdate:modelValue":M[0]||(M[0]=G=>n.value=G),disabled:a.value||d.value||s.value,class:"w-full px-3 py-2 border border-gray-300 rounded-md"},[M[7]||(M[7]=e("option",{value:"all"},"All Temples",-1)),(m(!0),g(be,null,$e(o.value,G=>(m(),g("option",{key:G.id,value:G.id},h(G.name),9,C9))),128))],8,D9),[[Re,n.value]]),s.value?(m(),g("div",T9,[...M[8]||(M[8]=[e("svg",{class:"animate-spin h-4 w-4 text-gray-500",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v8z"})],-1)])])):J("",!0)])]),e("div",E9,[M[11]||(M[11]=e("label",{class:"block text-gray-700 font-medium mb-2"},"Action Type",-1)),ce(e("select",{"onUpdate:modelValue":M[1]||(M[1]=G=>r.value.action=G),onChange:b,disabled:a.value||d.value,class:"w-full px-3 py-2 border border-gray-300 rounded-md"},[...M[10]||(M[10]=[Ce('<option value="">All Actions</option> Auth Module Actions <optgroup label="Authentication"><option value="REGISTRATION_SUCCESS">Registration Success</option><option value="REGISTRATION_FAILED">Registration Failed</option><option value="TENANT_REGISTRATION_SUCCESS">Temple Admin Registration</option><option value="REGISTRATION_BLOCKED">Registration Blocked</option><option value="LOGIN_SUCCESS">Login Success</option><option value="LOGIN_FAILED">Login Failed</option><option value="LOGOUT">Logout</option><option value="PASSWORD_RESET_REQUESTED">Password Reset Requested</option><option value="PASSWORD_RESET_SUCCESS">Password Reset Success</option><option value="PASSWORD_RESET_FAILED">Password Reset Failed</option></optgroup> Entity Module Actions <optgroup label="Entity"><option value="TEMPLE_CREATED">Temple Created</option><option value="TEMPLE_UPDATED">Temple Updated</option><option value="TEMPLE_CREATE_FAILED">Temple Create Failed</option><option value="TEMPLE_UPDATE_FAILED">Temple Update Failed</option></optgroup> Events Module Actions <optgroup label="Events"><option value="EVENT_CREATED">Event Created</option><option value="EVENT_UPDATED">Event Updated</option><option value="EVENT_DELETED">Event Deleted</option></optgroup><optgroup label="Seva"><option value="SEVA_CREATED">Seva Created</option><option value="SEVA_UPDATED">Seva Updated</option><option value="SEVA_BOOKED">Seva Booked</option><option value="SEVA_BOOKING_APPROVED">Seva Booking Approved</option><option value="SEVA_BOOKING_REJECTED">Seva Booking Rejected</option></optgroup> Donations Module Actions <optgroup label="Donations"><option value="DONATION_INITIATED">Donation Initiated</option><option value="DONATION_SUCCESS">Donation Success</option><option value="DONATION_FAILED">Donation Failed</option><option value="DONATION_VERIFICATION_FAILED">Donation Verification Failed</option></optgroup> Notification Module Actions - <optgroup label="Notifications"><option value="TEMPLATE_CREATED">Template Created</option><option value="TEMPLATE_UPDATED">Template Updated</option><option value="TEMPLATE_DELETED">Template Deleted</option><option value="EMAIL_SENT">Email Sent</option><option value="SMS_SENT">SMS Sent</option><option value="WHATSAPP_SENT">WhatsApp Sent</option></optgroup> User Profile Module Actions -- <optgroup label="User Profile"><option value="PROFILE_CREATED">Profile Created</option><option value="PROFILE_UPDATED">Profile Updated</option><option value="DEVOTEE_JOINED_TEMPLE">Devotee Joined Temple</option><option value="VOLUNTEER_JOINED_TEMPLE">Volunteer Joined Temple</option></optgroup> Reports Module Actions -- <optgroup label="Reports"><option value="DEVOTEE_BIRTHDAYS_REPORT_VIEWED">Birthday Report Viewed</option><option value="DEVOTEE_BIRTHDAYS_REPORT_DOWNLOADED">Birthday Report Downloaded</option><option value="TEMPLE_REGISTER_REPORT_VIEWED">Temple Register Report Viewed</option><option value="TEMPLE_REGISTER_REPORT_DOWNLOADED">Temple Register Report Downloaded</option><option value="TEMPLE_ACTIVITIES_REPORT_VIEWED">Activities Report Viewed</option><option value="TEMPLE_ACTIVITIES_REPORT_DOWNLOADED">Activities Report Downloaded</option></optgroup>',16)])],40,A9),[[Re,r.value.action]])]),M[20]||(M[20]=te(" Status Filter -- ",-1)),e("div",I9,[M[12]||(M[12]=e("label",{class:"block text-gray-700 font-medium mb-2"},"Status",-1)),e("div",M9,[(m(),g(be,null,$e(f,G=>e("button",{key:G.value,onClick:U=>{r.value.status=G.value,b()},class:se(["px-4 py-2 rounded-md text-sm font-medium",r.value.status===G.value?"bg-indigo-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"]),disabled:a.value||d.value},h(G.label),11,R9)),64))])]),e("div",P9,[M[13]||(M[13]=e("label",{class:"block text-gray-700 font-medium mb-2"},"Date Range",-1)),e("div",N9,[(m(),g(be,null,$e(v,G=>e("button",{key:G.value,onClick:U=>F(G.value),class:se(["px-4 py-2 rounded-md text-sm font-medium",l.value===G.value?"bg-indigo-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"]),disabled:a.value||d.value},h(G.label),11,j9)),64))])]),l.value==="custom"?(m(),g("div",L9,[e("div",null,[M[14]||(M[14]=e("label",{class:"block text-gray-700 font-medium mb-2"},"Start Date",-1)),ce(e("input",{type:"date","onUpdate:modelValue":M[2]||(M[2]=G=>r.value.startDate=G),onChange:b,disabled:a.value||d.value,class:"w-full px-3 py-2 border border-gray-300 rounded-md"},null,40,B9),[[_e,r.value.startDate]])]),e("div",null,[M[15]||(M[15]=e("label",{class:"block text-gray-700 font-medium mb-2"},"End Date",-1)),ce(e("input",{type:"date","onUpdate:modelValue":M[3]||(M[3]=G=>r.value.endDate=G),onChange:b,disabled:a.value||d.value,class:"w-full px-3 py-2 border border-gray-300 rounded-md"},null,40,U9),[[_e,r.value.endDate]])])])):J("",!0),e("div",F9,[e("div",V9,[M[16]||(M[16]=e("label",{class:"block text-gray-700 font-medium mb-2"},"Export Format",-1)),ce(e("select",{"onUpdate:modelValue":M[4]||(M[4]=G=>i.value=G),disabled:a.value||d.value,class:"w-full px-3 py-2 border border-gray-300 rounded-md"},[(m(),g(be,null,$e(N,G=>e("option",{key:G.value,value:G.value},h(G.label),9,z9)),64))],8,O9),[[Re,i.value]])]),e("button",{onClick:E,disabled:a.value||d.value,class:"mt-4 md:mt-0 inline-flex items-center px-5 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700 disabled:opacity-50 disabled:cursor-not-allowed"},[d.value?(m(),g("svg",q9,[...M[17]||(M[17]=[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)])])):(m(),g("svg",G9,[...M[18]||(M[18]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"},null,-1)])])),te(" "+h(d.value?"Downloading...":"Download Report"),1)],8,H9)])]),e("div",J9,[M[21]||(M[21]=e("h3",{class:"text-lg font-medium mb-4"},"Applied Filters",-1)),e("div",W9,[e("span",Y9," Action: "+h($(r.value.action)||"All"),1),e("span",K9," Status: "+h(r.value.status||"All"),1),e("span",X9,[te(" Date Range: "+h(C.value)+" ",1),l.value==="custom"?(m(),g("span",Z9," ("+h(r.value.startDate)+" - "+h(r.value.endDate)+") ",1)):J("",!0)]),e("span",Q9," Entity: "+h(I.value),1),e("span",eD," Format: "+h(j.value),1)])]),c.value.length?(m(),g("div",tD,[e("div",oD,[e("h3",sD,"Audit Logs Preview ("+h(c.value.length)+" records)",1)]),e("div",nD,[e("table",rD,[e("thead",aD,[e("tr",null,[(m(!0),g(be,null,$e(u.value,G=>(m(),g("th",{key:G.key,class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},h(G.label),1))),128))])]),e("tbody",lD,[(m(!0),g(be,null,$e(c.value.slice(0,100),(G,U)=>(m(),g("tr",{key:U,class:"hover:bg-gray-50"},[(m(!0),g(be,null,$e(u.value,_=>(m(),g("td",{key:_.key,class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},h(y(G[_.key])),1))),128))]))),128))])])]),c.value.length>100?(m(),g("div",iD,[e("p",dD," Showing first 100 records out of "+h(c.value.length)+". Download the full report to see all records. ",1)])):J("",!0)])):!a.value&&u.value.length===0?(m(),g("div",uD,[...M[22]||(M[22]=[Ce('<div class="mx-auto w-24 h-24 bg-gray-100 rounded-full flex items-center justify-center mb-4"><svg class="w-12 h-12 text-gray-400" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path></svg></div><h3 class="text-lg font-medium text-gray-900 mb-2">No Audit Logs Found</h3><p class="text-gray-600">No audit logs match the selected filters. Try adjusting your filter criteria.</p>',3)])])):J("",!0),a.value?(m(),g("div",cD,[...M[23]||(M[23]=[Ce('<div class="bg-white p-6 rounded-lg shadow-lg flex items-center space-x-3"><svg class="animate-spin h-6 w-6 text-indigo-600" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8v8z"></path></svg><span class="font-medium text-gray-900">Loading audit logs...</span></div>',1)])])):J("",!0)]))}},fD={class:"min-h-screen bg-gray-50"},vD={class:"bg-white shadow-sm border-b border-gray-200"},hD={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},yD={class:"flex items-center justify-between h-16"},xD={class:"flex items-center space-x-4"},bD={class:"text-xl font-semibold text-gray-900"},wD={class:"text-sm text-gray-500"},kD={class:"flex items-center space-x-3"},_D={class:"relative p-2 text-gray-400 hover:text-gray-500 transition-colors duration-200"},$D={key:0,class:"absolute -top-1 -right-1 h-4 w-4 bg-red-500 rounded-full flex items-center justify-center text-xs text-white"},SD={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},DD={class:"bg-gradient-to-r from-indigo-500 to-indigo-600 rounded-2xl p-6 mb-8"},CD={class:"flex items-center justify-between"},TD={class:"text-2xl font-bold text-white mb-2"},ED={key:0,class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8"},AD={key:1,class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8"},ID={class:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 h-32 hover:shadow-md transition-shadow duration-200 cursor-pointer"},MD={class:"flex items-center"},RD={class:"ml-4"},PD={class:"text-2xl font-bold text-gray-900"},ND={class:"text-xs text-green-600"},jD={class:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 h-32 hover:shadow-md transition-shadow duration-200 cursor-pointer"},LD={class:"flex items-center"},BD={class:"ml-4"},UD={class:"flex items-baseline"},FD={class:"text-2xl font-bold text-gray-900"},VD={class:"text-xs text-blue-600"},OD={class:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 h-32 hover:shadow-md transition-shadow duration-200 cursor-pointer"},zD={class:"flex items-center h-full"},HD={class:"ml-4 flex flex-col"},qD={class:"text-2xl font-bold text-gray-900"},GD={class:"text-xs text-green-600 mb-4"},JD={class:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 h-32 hover:shadow-md transition-shadow duration-200 cursor-pointer"},WD={class:"flex items-center"},YD={class:"ml-4"},KD={class:"text-2xl font-bold text-gray-900"},XD={class:"text-xs text-purple-600"},ZD={class:"grid grid-cols-1 lg:grid-cols-3 gap-8"},QD={class:"lg:col-span-2"},eC={class:"bg-white rounded-xl shadow-sm border border-gray-200"},tC={class:"p-6"},oC={class:"grid grid-cols-1 sm:grid-cols-2 gap-4"},sC=["title"],nC={class:"bg-white rounded-xl shadow-sm border border-gray-200"},rC={class:"p-6 border-b border-gray-200"},aC={class:"flex items-center justify-between"},lC={class:"p-6"},iC={key:0,class:"text-center py-4"},dC={key:1,class:"space-y-4"},uC={class:"flex-shrink-0"},cC={class:"h-10 w-10 bg-purple-100 rounded-lg flex items-center justify-center"},pC={class:"text-xs font-semibold text-purple-600"},mC={class:"flex-1 min-w-0"},gC={class:"text-sm font-medium text-gray-900"},fC={class:"text-xs text-gray-500"},vC={class:"mt-8 bg-white rounded-xl shadow-sm border border-gray-200"},hC={class:"p-6 border-b border-gray-200"},yC={class:"flex items-center justify-between"},xC={class:"p-6"},bC={key:0,class:"text-center py-4"},wC={key:1,class:"space-y-4"},kC={class:"flex-shrink-0"},_C={class:"h-8 w-8 bg-gradient-to-br from-green-400 to-green-600 rounded-full flex items-center justify-center"},$C={class:"text-xs font-bold text-white"},SC={class:"flex-1 min-w-0"},DC={class:"text-sm font-medium text-gray-900"},CC={class:"text-xs text-gray-500"},TC={class:"text-sm font-semibold text-green-600"},ip={__name:"EntityDashboard",setup(t){const o=tt(),s=oe(()=>o.params.id),n=We(),r=Ot(),l=Ue(),a=oe(()=>n.user),d=B(null),i=B(!0),c=B({devotees:{total:0,newThisMonth:0},sevas:{today:0,thisMonth:0},donations:{thisMonth:0,growth:0},events:{upcoming:0,thisWeek:0}}),u=B([]),p=B([]),w=B([]),f=oe(()=>{var j,$;const I=(n.userRole||"").toLowerCase(),C=((j=n.user)==null?void 0:j.roleId)||(($=n.user)==null?void 0:$.role_id);return I==="monitoring_user"||I==="monitoringuser"||C===6||C==="6"}),v=async()=>{var I;try{i.value=!0,console.log("Loading entity data for ID:",s.value);const C=r.getTempleById(s.value);if(C)console.log("Found temple in store:",C),d.value=C;else{console.log("Temple not in store, fetching from API");try{const j=await pe.get(`/entities/${s.value}`);j.data&&(d.value=j.data)}catch(j){console.error("Failed to fetch temple details:",j),l.error("Failed to load temple details")}}try{const j=await pe.get(`/entities/dashboard-summary?entity_id=${s.value}`);j&&j.data&&(c.value={devotees:{total:j.data.registered_devotees.total||0,newThisMonth:j.data.registered_devotees.this_month||0},sevas:{today:j.data.seva_bookings.today||0,thisMonth:j.data.seva_bookings.this_month||0},donations:{thisMonth:j.data.month_donations.amount||0,growth:j.data.month_donations.percent_change||0},events:{upcoming:j.data.upcoming_events.total||0,thisWeek:j.data.upcoming_events.this_week||0}},console.log("Dashboard data loaded successfully:",c.value))}catch(j){console.error("Failed to fetch dashboard data:",j),l.error("Failed to load dashboard statistics")}try{const j=await pe.get(`/events/upcoming?entity_id=${s.value}&limit=3`);j&&j.data&&(p.value=j.data.map($=>({...$,date:new Date($.event_date||$.date||Date.now())})))}catch(j){console.error("Failed to fetch upcoming events:",j),p.value=[]}try{console.log("Fetching top donors...");const j=await ht.getTopDonors(5);console.log("Top donors response:",j),j&&j.success&&Array.isArray(j.data)?w.value=j.data.map($=>({id:$.email||Math.random(),name:$.name||"Unknown Donor",email:$.email||"",amount:$.total_amount||$.totalAmount||0,totalDonations:$.donation_count||$.donationCount||0})):Array.isArray(j.data)?w.value=j.data.map($=>({id:$.email||Math.random(),name:$.name||"Unknown Donor",email:$.email||"",amount:$.total_amount||$.totalAmount||0,totalDonations:$.donation_count||$.donationCount||0})):Array.isArray(j)?w.value=j.map($=>({id:$.email||Math.random(),name:$.name||"Unknown Donor",email:$.email||"",amount:$.total_amount||$.totalAmount||0,totalDonations:$.donation_count||$.donationCount||0})):(console.warn("Unexpected top donors response format:",j),w.value=[]),console.log("Final top donors data:",w.value)}catch(j){console.error("Failed to fetch top donors:",j),w.value=[],((I=j.response)==null?void 0:I.status)!==404&&l.error("Failed to load top donors")}}catch(C){console.error("Error loading entity data:",C),l.error("Failed to load entity data")}finally{i.value=!1}},N=I=>new Intl.NumberFormat("en-IN").format(I),A=I=>I?I.getDate().toString():"",F=I=>I?I.toLocaleDateString("en-IN",{weekday:"short",month:"short",day:"numeric"}):"";return Me(()=>{console.log("EntityDashboard mounted for entity:",s.value),v()}),(I,C)=>{const j=Ze("router-link");return m(),g("div",fD,[e("div",vD,[e("div",hD,[e("div",yD,[e("div",xD,[C[0]||(C[0]=e("div",{class:"h-10 w-10 rounded-full bg-indigo-100 flex items-center justify-center"},[e("svg",{class:"h-6 w-6 text-indigo-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-4m-2 0H3m2-16l9-9 9 9"})])],-1)),e("div",null,[e("h1",bD,h(d.value?d.value.name:"Loading..."),1),e("p",wD,h(d.value?`${d.value.city}, ${d.value.state}`:"Loading location..."),1)])]),e("div",kD,[C[2]||(C[2]=e("span",{class:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800"}," Active ",-1)),e("button",_D,[C[1]||(C[1]=e("svg",{class:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 17h5l-5 5v-5z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 19H3m6 0V5l-6 5m0 9h6"})],-1)),u.value.length>0?(m(),g("span",$D,h(u.value.length),1)):J("",!0)])])])])]),e("div",SD,[e("div",DD,[e("div",CD,[e("div",null,[e("h2",TD,"Welcome back, "+h(a.value?a.value.fullName:"Admin")+"!",1),C[3]||(C[3]=e("p",{class:"text-indigo-100"},"Here's what's happening at your temple today",-1))]),C[4]||(C[4]=e("div",{class:"hidden md:block"},[e("svg",{class:"h-16 w-16 text-indigo-200",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1",d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-4m-2 0H3m2-16l9-9 9 9"})])],-1))])]),i.value?(m(),g("div",ED,[(m(),g(be,null,$e(4,$=>e("div",{key:$,class:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 h-32 hover:shadow-md transition-shadow duration-200"},[...C[5]||(C[5]=[Ce('<div class="animate-pulse flex items-center"><div class="h-12 w-12 bg-gray-200 rounded-lg mr-4"></div><div class="space-y-2 flex-1"><div class="h-4 bg-gray-200 rounded w-1/3"></div><div class="h-6 bg-gray-200 rounded w-1/4"></div><div class="h-3 bg-gray-200 rounded w-1/2"></div></div></div>',1)])])),64))])):(m(),g("div",AD,[le(j,{to:{name:"DevoteeManagement",params:{id:I.$route.params.id}},class:"block"},{default:ye(()=>{var $,y;return[e("div",ID,[e("div",MD,[C[7]||(C[7]=e("div",{class:"flex-shrink-0"},[e("div",{class:"h-12 w-12 bg-blue-100 rounded-lg flex items-center justify-center"},[e("svg",{class:"h-6 w-6 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197m13.5-9a2.25 2.25 0 11-4.5 0 2.25 2.25 0 014.5 0z"})])])],-1)),e("div",RD,[C[6]||(C[6]=e("p",{class:"text-sm font-medium text-gray-600"},"Registered Devotees",-1)),e("p",PD,h((($=c.value.devotees)==null?void 0:$.total)||0),1),e("p",ND,"+"+h(((y=c.value.devotees)==null?void 0:y.newThisMonth)||0)+" this month",1)])])])]}),_:1},8,["to"]),le(j,{to:{name:"SevaManagement",params:{id:I.$route.params.id}},class:"block"},{default:ye(()=>{var $,y;return[e("div",jD,[e("div",LD,[C[10]||(C[10]=e("div",{class:"flex-shrink-0"},[e("div",{class:"h-12 w-12 bg-orange-100 rounded-lg flex items-center justify-center"},[e("svg",{class:"h-6 w-6 text-orange-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})])])],-1)),e("div",BD,[C[9]||(C[9]=e("p",{class:"text-sm font-medium text-gray-600"},"Seva Bookings",-1)),e("div",UD,[e("p",FD,h((($=c.value.sevas)==null?void 0:$.today)||0),1),C[8]||(C[8]=e("span",{class:"text-sm text-gray-500 ml-1"},"today",-1))]),e("p",VD,h(((y=c.value.sevas)==null?void 0:y.thisMonth)||0)+" this month",1)])])])]}),_:1},8,["to"]),le(j,{to:{name:"DonationManagement",params:{id:I.$route.params.id}},class:"block"},{default:ye(()=>{var $,y;return[e("div",OD,[e("div",zD,[C[12]||(C[12]=e("div",{class:"flex-shrink-0"},[e("div",{class:"h-12 w-12 bg-green-100 rounded-lg flex items-center justify-center"},[e("svg",{class:"h-6 w-6 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"})])])],-1)),e("div",HD,[C[11]||(C[11]=e("p",{class:"text-sm font-medium text-gray-600 whitespace-nowrap"},"Month Donations",-1)),e("p",qD,""+h(N((($=c.value.donations)==null?void 0:$.thisMonth)||0)),1),e("p",GD,"+"+h(((y=c.value.donations)==null?void 0:y.growth)||0)+"% from last month",1)])])])]}),_:1},8,["to"]),le(j,{to:{name:"EventManagement",params:{id:I.$route.params.id}},class:"block"},{default:ye(()=>{var $,y;return[e("div",JD,[e("div",WD,[C[14]||(C[14]=e("div",{class:"flex-shrink-0"},[e("div",{class:"h-12 w-12 bg-purple-100 rounded-lg flex items-center justify-center"},[e("svg",{class:"h-6 w-6 text-purple-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})])])],-1)),e("div",YD,[C[13]||(C[13]=e("p",{class:"text-sm font-medium text-gray-600"},"Upcoming Events",-1)),e("p",KD,h((($=c.value.events)==null?void 0:$.upcoming)||0),1),e("p",XD,h(((y=c.value.events)==null?void 0:y.thisWeek)||0)+" this week",1)])])])]}),_:1},8,["to"])])),e("div",ZD,[e("div",QD,[e("div",eC,[C[20]||(C[20]=e("div",{class:"p-6 border-b border-gray-200"},[e("h3",{class:"text-lg font-semibold text-gray-900"},"Quick Actions")],-1)),e("div",tC,[e("div",oC,[le(j,{to:`/entity/${s.value}/sevas`,class:"flex items-center p-4 border border-gray-200 rounded-xl hover:border-indigo-300 hover:shadow-md transition-all duration-200 group"},{default:ye(()=>[...C[15]||(C[15]=[e("div",{class:"h-10 w-10 bg-orange-100 rounded-lg flex items-center justify-center group-hover:bg-orange-200 transition-colors duration-200"},[e("svg",{class:"h-5 w-5 text-orange-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})])],-1),e("div",{class:"ml-3"},[e("p",{class:"text-sm font-medium text-gray-900"},"Manage Sevas"),e("p",{class:"text-xs text-gray-500"},"Create and approve sevas")],-1)])]),_:1},8,["to"]),le(j,{to:`/entity/${s.value}/events`,class:"flex items-center p-4 border border-gray-200 rounded-xl hover:border-indigo-300 hover:shadow-md transition-all duration-200 group"},{default:ye(()=>[...C[16]||(C[16]=[e("div",{class:"h-10 w-10 bg-purple-100 rounded-lg flex items-center justify-center group-hover:bg-purple-200 transition-colors duration-200"},[e("svg",{class:"h-5 w-5 text-purple-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})])],-1),e("div",{class:"ml-3"},[e("p",{class:"text-sm font-medium text-gray-900"},"Create Event"),e("p",{class:"text-xs text-gray-500"},"Schedule temple events")],-1)])]),_:1},8,["to"]),le(j,{to:`/entity/${s.value}/devotees`,class:"flex items-center p-4 border border-gray-200 rounded-xl hover:border-indigo-300 hover:shadow-md transition-all duration-200 group"},{default:ye(()=>[...C[17]||(C[17]=[e("div",{class:"h-10 w-10 bg-blue-100 rounded-lg flex items-center justify-center group-hover:bg-blue-200 transition-colors duration-200"},[e("svg",{class:"h-5 w-5 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197m13.5-9a2.25 2.25 0 11-4.5 0 2.25 2.25 0 014.5 0z"})])],-1),e("div",{class:"ml-3"},[e("p",{class:"text-sm font-medium text-gray-900"},"View Devotees"),e("p",{class:"text-xs text-gray-500"},"Manage devotee profiles")],-1)])]),_:1},8,["to"]),f.value?(m(),g("div",{key:0,class:"flex items-center p-4 border border-gray-200 rounded-xl bg-gray-50 cursor-not-allowed opacity-60 relative group",title:f.value?"Monitoring users are not allowed to send messages":""},[...C[18]||(C[18]=[Ce('<div class="h-10 w-10 bg-gray-100 rounded-lg flex items-center justify-center"><svg class="h-5 w-5 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"></path></svg></div><div class="ml-3"><p class="text-sm font-medium text-gray-600">Send Message</p><p class="text-xs text-gray-400">Communicate with devotees</p></div><div class="absolute -top-8 left-0 bg-red-600 text-white text-xs px-2 py-1 rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap"> Restricted for monitoring users </div>',3)])],8,sC)):(m(),Ne(j,{key:1,to:`/entity/${s.value}/communication`,class:"flex items-center p-4 border border-gray-200 rounded-xl hover:border-indigo-300 hover:shadow-md transition-all duration-200 group"},{default:ye(()=>[...C[19]||(C[19]=[e("div",{class:"h-10 w-10 bg-green-100 rounded-lg flex items-center justify-center group-hover:bg-green-200 transition-colors duration-200"},[e("svg",{class:"h-5 w-5 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})])],-1),e("div",{class:"ml-3"},[e("p",{class:"text-sm font-medium text-gray-900"},"Send Message"),e("p",{class:"text-xs text-gray-500"},"Communicate with devotees")],-1)])]),_:1},8,["to"]))])])])]),e("div",null,[e("div",nC,[e("div",rC,[e("div",aC,[C[22]||(C[22]=e("h3",{class:"text-lg font-semibold text-gray-900"},"Upcoming Events",-1)),le(j,{to:`/entity/${s.value}/events`,class:"text-sm text-indigo-600 hover:text-indigo-700 font-medium transition-colors duration-200"},{default:ye(()=>[...C[21]||(C[21]=[te(" View All ",-1)])]),_:1},8,["to"])])]),e("div",lC,[p.value.length===0?(m(),g("div",iC,[C[24]||(C[24]=e("svg",{class:"mx-auto h-12 w-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})],-1)),C[25]||(C[25]=e("p",{class:"mt-2 text-sm text-gray-500"},"No upcoming events",-1)),le(j,{to:`/entity/${s.value}/events`,class:"mt-1 inline-flex items-center text-sm text-indigo-600 hover:text-indigo-700 font-medium"},{default:ye(()=>[...C[23]||(C[23]=[te(" Create Event ",-1)])]),_:1},8,["to"])])):(m(),g("div",dC,[(m(!0),g(be,null,$e(p.value.slice(0,3),$=>(m(),g("div",{key:$.id,class:"flex items-start space-x-3 p-3 rounded-lg hover:bg-gray-50 transition-colors duration-200"},[e("div",uC,[e("div",cC,[e("span",pC,h(A($.date)),1)])]),e("div",mC,[e("p",gC,h($.title),1),e("p",fC,h(F($.date)),1)])]))),128))]))])])])]),e("div",vC,[e("div",hC,[e("div",yC,[C[27]||(C[27]=e("h3",{class:"text-lg font-semibold text-gray-900"},"Top Donors",-1)),le(j,{to:`/entity/${s.value}/donations`,class:"text-sm text-indigo-600 hover:text-indigo-700 font-medium transition-colors duration-200"},{default:ye(()=>[...C[26]||(C[26]=[te(" View All ",-1)])]),_:1},8,["to"])])]),e("div",xC,[w.value.length===0?(m(),g("div",bC,[...C[28]||(C[28]=[e("svg",{class:"mx-auto h-12 w-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"})],-1),e("p",{class:"mt-2 text-sm text-gray-500"},"No donations yet",-1)])])):(m(),g("div",wC,[(m(!0),g(be,null,$e(w.value.slice(0,5),($,y)=>(m(),g("div",{key:$.id||$.email||y,class:"flex items-center space-x-3"},[e("div",kC,[e("div",_C,[e("span",$C,h(y+1),1)])]),e("div",SC,[e("p",DC,h($.name||"Unknown Donor"),1),e("p",CC,h($.totalDonations||$.donation_count||0)+" donations",1)]),e("div",TC," "+h(N($.amount||$.total_amount||0)),1)]))),128))]))])])])])}}},EC=Object.freeze(Object.defineProperty({__proto__:null,default:ip},Symbol.toStringTag,{value:"Module"})),AC={name:"DevoteeStats",props:{stats:{type:Object,default:()=>({})},loading:{type:Boolean,default:!1}}},IC={class:"grid grid-cols-3 gap-4 p-4 bg-white rounded shadow"},MC={class:"stat-item"},RC={class:"text-2xl font-bold text-gray-900"},PC={class:"stat-item"},NC={class:"text-2xl font-bold text-green-600"},jC={class:"stat-item"},LC={class:"text-2xl font-bold text-indigo-600"};function BC(t,o,s,n,r,l){return m(),g("div",IC,[e("div",MC,[o[0]||(o[0]=e("h3",{class:"text-sm font-semibold text-gray-500"},"Total Devotees",-1)),e("p",RC,h(s.stats.total_devotees||0),1)]),e("div",PC,[o[1]||(o[1]=e("h3",{class:"text-sm font-semibold text-gray-500"},"Active Devotees",-1)),e("p",NC,h(s.stats.active_devotees||0),1)]),e("div",jC,[o[2]||(o[2]=e("h3",{class:"text-sm font-semibold text-gray-500"},"New This Month",-1)),e("p",LC,h(s.stats.new_this_month||0),1)])])}const UC=ot(AC,[["render",BC],["__scopeId","data-v-e2ef163e"]]),FC={name:"DevoteeManagement",components:{DevoteeStats:UC,BaseLoader:Ia},setup(){const t=tt(),o=et(),s=Ue(),n=dn(),r=Ot(),{devotees:l}=Yg(n),a=B(null),d=B(!1),i=B(null),c=B(""),u=B(""),p=B({nakshatra:"",rashi:"",lagna:"",vedaShaka:""}),w=B(1),f=B(25),v=B(["Ashwini","Bharani","Krittika","Rohini","Mrigashira","Ardra","Punarvasu","Pushya","Ashlesha","Magha","Purva Phalguni","Uttara Phalguni","Hasta","Chitra","Swati","Vishakha","Anuradha","Jyeshtha","Mula","Purva Ashadha","Uttara Ashadha","Shravana","Dhanishta","Shatabhisha","Purva Bhadrapada","Uttara Bhadrapada","Revati"]),N=B(["Mesha (Aries)","Vrishabha (Taurus)","Mithuna (Gemini)","Karka (Cancer)","Simha (Leo)","Kanya (Virgo)","Tula (Libra)","Vrishchika (Scorpio)","Dhanu (Sagittarius)","Makara (Capricorn)","Kumbha (Aquarius)","Meena (Pisces)"]),A=B(["Mesha","Vrishabha","Mithuna","Karka","Simha","Kanya","Tula","Vrishchika","Dhanu","Makara","Kumbha","Meena"]),F=B(["Rigveda - Shakala","Yajurveda - Krishna","Yajurveda - Shukla","Samaveda - Kauthuma","Samaveda - Jaiminiya","Atharvaveda - Shaunaka"]),I=oe(()=>{const ie=t.params.id||t.params.templeId||t.query.templeId||localStorage.getItem("current_entity_id");return ie?parseInt(ie,10):null}),C=oe(()=>p.value.nakshatra||p.value.rashi||p.value.lagna||p.value.vedaShaka),j=oe(()=>{let ie=n.devotees||[];if(c.value){const me=c.value.toLowerCase();ie=ie.filter(ke=>{var Q,D,x;return((Q=M(ke))==null?void 0:Q.toLowerCase().includes(me))||((D=ke.email)==null?void 0:D.toLowerCase().includes(me))||((x=ke.phone)==null?void 0:x.toLowerCase().includes(me))})}return u.value&&(ie=ie.filter(me=>(me.status||"active")===u.value)),p.value.nakshatra&&(ie=ie.filter(me=>me.nakshatra===p.value.nakshatra)),p.value.rashi&&(ie=ie.filter(me=>me.rashi===p.value.rashi)),p.value.lagna&&(ie=ie.filter(me=>me.lagna===p.value.lagna)),p.value.vedaShaka&&(ie=ie.filter(me=>me.veda_shaka===p.value.vedaShaka)),ie}),$=oe(()=>Math.ceil(j.value.length/f.value)),y=oe(()=>{const ie=(w.value-1)*f.value,me=ie+f.value;return j.value.slice(ie,me)}),b=oe(()=>{const ie=j.value.length===0?0:(w.value-1)*f.value+1,me=Math.min(w.value*f.value,j.value.length),ke=j.value.length;return{start:ie,end:me,total:ke}}),E=oe(()=>{const ie=$.value,me=w.value,ke=2;if(ie<=7)return Array.from({length:ie},(S,P)=>P+1);const Q=[];Q.push(1),me-ke>2&&Q.push("...");const D=Math.max(2,me-ke),x=Math.min(ie-1,me+ke);for(let S=D;S<=x;S++)Q.push(S);return me+ke<ie-1&&Q.push("..."),ie>1&&Q.push(ie),Q});Oe([c,u,p],()=>{w.value=1},{deep:!0});const R=ie=>ie.user_id||ie.id||"unknown",M=ie=>ie.full_name||ie.fullName||"Unknown",G=ie=>{switch(ie||"active"){case"active":return"bg-green-100 text-green-800";case"inactive":return"bg-red-100 text-red-800";case"pending":return"bg-yellow-100 text-yellow-800";default:return"bg-gray-100 text-gray-800"}},U=ie=>(ie||"active")==="active"?"text-red-600 hover:text-red-900 hover:bg-red-50 border border-red-300":"text-green-600 hover:text-green-900 hover:bg-green-50 border border-green-300",_=ie=>(ie||"active")==="active"?"Deactivate":"Activate",k=ie=>{const me=R(ie);if(!me||me==="unknown"){s.error("Invalid devotee ID");return}console.log(" Navigating to profile:",{entityId:I.value,userId:me}),o.push({name:"devotee-profile",params:{id:I.value,devoteeId:me}})},L=()=>{p.value={nakshatra:"",rashi:"",lagna:"",vedaShaka:""},c.value="",u.value="",w.value=1},z=()=>{w.value=1},q=ie=>{ie>=1&&ie<=$.value&&(w.value=ie)},K=()=>{w.value=1},H=async()=>{try{const ie=r.getTempleById(I.value);if(ie)a.value=ie;else try{const me=await pe.get(`/entities/${I.value}`);me.data&&(a.value=me.data)}catch(me){console.error("Failed to fetch temple details:",me)}}catch(ie){console.error("Error loading temple data:",ie)}},O=async()=>{if(I.value)try{await n.fetchDevoteesByEntity(I.value)}catch(ie){console.error("Error loading devotees:",ie),s.error("Failed to load devotees")}},ee=async()=>{if(I.value)try{await n.fetchDevoteeStats(I.value)}catch(ie){console.error("Error loading devotee stats:",ie),s.error("Failed to load devotee statistics")}},ge=async()=>{d.value=!0;try{await Promise.all([O(),ee()])}catch(ie){console.error("Error refreshing data:",ie)}finally{d.value=!1}},de=async ie=>{var D,x,S,P;if(!I.value)return;const me=R(ie),Q=(ie.status||"active")==="active"?"inactive":"active";if(!me||me==="unknown"){s.error("Invalid devotee ID");return}i.value=me;try{await n.updateDevoteeStatus(I.value,me,Q),await O(),await ee(),s.success(`Devotee ${Q==="active"?"activated":"deactivated"} successfully`)}catch(T){console.error("Error updating status:",T);const V=((x=(D=T.response)==null?void 0:D.data)==null?void 0:x.error)||((P=(S=T.response)==null?void 0:S.data)==null?void 0:P.message)||T.message||"Failed to update devotee status";s.error(V)}finally{i.value=null}};return Me(async()=>{if(!I.value){s.error("Invalid temple ID"),o.push("/dashboard");return}d.value=!0;try{await Promise.all([H(),O(),ee()])}catch(ie){console.error("Error loading data:",ie),s.error("Failed to load data")}finally{d.value=!1}}),{temple:a,devoteeStore:n,loading:d,statusUpdateLoading:i,searchQuery:c,statusFilter:u,spiritualFilters:p,currentPage:w,itemsPerPage:f,totalPages:$,paginatedDevotees:y,paginationInfo:b,visiblePages:E,filteredDevotees:j,hasActiveFilters:C,nakshatraList:v,rashiList:N,lagnaList:A,vedaShakaList:F,getDevoteeId:R,getDevoteeName:M,getStatusClass:G,getToggleButtonClass:U,getStatusToggleText:_,viewDevoteeProfile:k,clearFilters:L,applyFilters:z,handleToggleStatus:de,refreshData:ge,goToPage:q,resetPagination:K}}},VC={class:"min-h-screen bg-gray-50/90"},OC={class:"bg-white shadow-sm border-b border-gray-200"},zC={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},HC={class:"flex items-center justify-between h-16"},qC={class:"flex items-center space-x-4"},GC={class:"text-xl font-semibold text-gray-900"},JC={class:"text-sm text-gray-500"},WC={class:"bg-white shadow-sm border-b border-gray-200"},YC={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},KC={class:"py-3"},XC={class:"flex items-center justify-between"},ZC={class:"flex items-center space-x-2"},QC=["disabled"],eT={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4"},tT={class:"mb-4"},oT={class:"bg-white rounded-xl shadow-sm border border-gray-100 mb-4"},sT={class:"p-3"},nT={class:"space-y-3"},rT={class:"flex items-center space-x-3"},aT={class:"flex-1"},lT={class:"relative"},iT={class:"flex items-center space-x-2"},dT={key:0,class:"flex items-center space-x-2 flex-wrap gap-2"},uT={key:0,class:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-purple-100 text-purple-800"},cT={key:1,class:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800"},pT={key:2,class:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800"},mT={key:3,class:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-orange-100 text-orange-800"},gT={class:"bg-white rounded-xl shadow-sm border border-gray-200"},fT={class:"p-3"},vT={class:"flex items-center justify-between mb-3"},hT={class:"text-sm text-gray-600"},yT={class:"overflow-x-auto"},xT={class:"min-w-full divide-y divide-gray-200"},bT={class:"bg-white divide-y divide-gray-200"},wT={class:"px-3 py-2 whitespace-nowrap text-sm font-medium text-gray-900"},kT={class:"px-3 py-2 whitespace-nowrap"},_T={class:"flex items-center"},$T={class:"flex-shrink-0 h-7 w-7"},ST={class:"h-7 w-7 rounded-full bg-indigo-100 flex items-center justify-center"},DT={class:"text-xs font-medium text-indigo-600"},CT={class:"ml-2"},TT={class:"text-sm font-medium text-gray-900"},ET={class:"px-3 py-2 whitespace-nowrap text-sm text-gray-500"},AT={class:"px-3 py-2 whitespace-nowrap text-sm text-gray-500"},IT={class:"px-3 py-2 whitespace-nowrap"},MT={class:"px-3 py-2 whitespace-nowrap text-center text-sm font-medium"},RT={class:"flex items-center justify-center space-x-2"},PT=["onClick"],NT=["onClick","disabled","title"],jT={key:0,class:"flex items-center"},LT={key:1},BT={key:0,class:"flex items-center justify-between border-t border-gray-200 bg-white px-3 py-2 mt-3"},UT={class:"flex flex-1 justify-between sm:hidden"},FT=["disabled"],VT=["disabled"],OT={class:"hidden sm:flex sm:flex-1 sm:items-center sm:justify-between"},zT={class:"text-sm text-gray-700"},HT={class:"font-medium"},qT={class:"font-medium"},GT={class:"font-medium"},JT={class:"isolate inline-flex -space-x-px rounded-md shadow-sm","aria-label":"Pagination"},WT=["disabled"],YT=["onClick"],KT={key:1,class:"relative inline-flex items-center px-3 py-1.5 text-sm font-semibold text-gray-700 ring-1 ring-inset ring-gray-300"},XT=["disabled"],ZT={key:1,class:"text-center py-6"},QT={class:"mt-1 text-sm text-gray-500"},eE={key:0,class:"fixed inset-0 bg-black bg-opacity-25 flex items-center justify-center z-50"},tE={class:"bg-white rounded-lg p-4 flex items-center space-x-3"};function oE(t,o,s,n,r,l){const a=Ze("DevoteeStats"),d=Ze("BaseLoader");return m(),g("div",VC,[e("div",OC,[e("div",zC,[e("div",HC,[e("div",qC,[o[13]||(o[13]=e("div",{class:"h-10 w-10 rounded-full bg-indigo-100 flex items-center justify-center"},[e("svg",{class:"h-6 w-6 text-indigo-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-4m-2 0H3m2-16l9-9 9 9"})])],-1)),e("div",null,[e("h1",GC,h(n.temple?n.temple.name:"Loading..."),1),e("p",JC,h(n.temple?`${n.temple.city}, ${n.temple.state}`:"Loading location..."),1)])]),o[14]||(o[14]=e("div",{class:"flex items-center space-x-3"},[e("span",{class:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800"}," Active ")],-1))])])]),e("div",WC,[e("div",YC,[e("div",KC,[e("div",XC,[o[16]||(o[16]=e("div",null,[e("h1",{class:"text-xl font-bold text-gray-900"},"Devotee Management"),e("p",{class:"mt-1 text-sm text-gray-600"},"Manage your temple's registered devotees")],-1)),e("div",ZC,[e("button",{onClick:o[0]||(o[0]=(...i)=>n.refreshData&&n.refreshData(...i)),disabled:n.loading,class:"inline-flex items-center px-3 py-1.5 border border-gray-300 rounded-lg text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 transition-all duration-200 disabled:opacity-50"},[...o[15]||(o[15]=[e("svg",{class:"w-4 h-4 mr-1.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})],-1),te(" Refresh ",-1)])],8,QC)])])])])]),e("div",eT,[e("div",tT,[le(a,{stats:n.devoteeStore.devoteeStats,loading:n.loading},null,8,["stats","loading"])]),e("div",oT,[e("div",sT,[e("div",nT,[e("div",rT,[e("div",aT,[e("div",lT,[o[17]||(o[17]=e("div",{class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},[e("svg",{class:"h-4 w-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})])],-1)),ce(e("input",{"onUpdate:modelValue":o[1]||(o[1]=i=>n.searchQuery=i),type:"text",placeholder:"Search devotees by name, email, or phone...",class:"block w-full pl-9 pr-3 py-2 border border-gray-300 rounded-lg focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"},null,512),[[_e,n.searchQuery]])])]),e("div",iT,[ce(e("select",{"onUpdate:modelValue":o[2]||(o[2]=i=>n.statusFilter=i),class:"block w-32 px-3 py-2 border border-gray-300 rounded-lg focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"},[...o[18]||(o[18]=[e("option",{value:""},"All Status",-1),e("option",{value:"active"},"Active",-1),e("option",{value:"inactive"},"Inactive",-1)])],512),[[Re,n.statusFilter]]),ce(e("select",{"onUpdate:modelValue":o[3]||(o[3]=i=>n.itemsPerPage=i),onChange:o[4]||(o[4]=(...i)=>n.resetPagination&&n.resetPagination(...i)),class:"block w-20 px-3 py-2 border border-gray-300 rounded-lg focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"},[...o[19]||(o[19]=[e("option",{value:10},"10",-1),e("option",{value:25},"25",-1),e("option",{value:50},"50",-1),e("option",{value:100},"100",-1)])],544),[[Re,n.itemsPerPage]])])]),n.hasActiveFilters?(m(),g("div",dT,[o[20]||(o[20]=e("span",{class:"text-xs text-gray-500 font-medium"},"Active Filters:",-1)),n.spiritualFilters.nakshatra?(m(),g("span",uT,[te(" Nakshatra: "+h(n.spiritualFilters.nakshatra)+" ",1),e("button",{onClick:o[5]||(o[5]=i=>{n.spiritualFilters.nakshatra="",n.applyFilters()}),class:"ml-1 hover:text-purple-900"},"")])):J("",!0),n.spiritualFilters.rashi?(m(),g("span",cT,[te(" Rashi: "+h(n.spiritualFilters.rashi)+" ",1),e("button",{onClick:o[6]||(o[6]=i=>{n.spiritualFilters.rashi="",n.applyFilters()}),class:"ml-1 hover:text-blue-900"},"")])):J("",!0),n.spiritualFilters.lagna?(m(),g("span",pT,[te(" Lagna: "+h(n.spiritualFilters.lagna)+" ",1),e("button",{onClick:o[7]||(o[7]=i=>{n.spiritualFilters.lagna="",n.applyFilters()}),class:"ml-1 hover:text-green-900"},"")])):J("",!0),n.spiritualFilters.vedaShaka?(m(),g("span",mT,[te(" Veda: "+h(n.spiritualFilters.vedaShaka)+" ",1),e("button",{onClick:o[8]||(o[8]=i=>{n.spiritualFilters.vedaShaka="",n.applyFilters()}),class:"ml-1 hover:text-orange-900"},"")])):J("",!0)])):J("",!0)])])]),e("div",gT,[e("div",fT,[e("div",vT,[e("div",null,[o[21]||(o[21]=e("h2",{class:"text-lg font-semibold text-gray-900"},"All Devotees",-1)),e("p",hT," Showing "+h(n.paginationInfo.start)+"-"+h(n.paginationInfo.end)+" of "+h(n.paginationInfo.total)+" devotees ",1)])]),e("div",yT,[e("table",xT,[o[23]||(o[23]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{scope:"col",class:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"User ID"),e("th",{scope:"col",class:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Full Name"),e("th",{scope:"col",class:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Email"),e("th",{scope:"col",class:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Phone"),e("th",{scope:"col",class:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Status"),e("th",{scope:"col",class:"px-3 py-2 text-center text-xs font-medium text-gray-500 uppercase tracking-wider"},"Actions")])],-1)),e("tbody",bT,[(m(!0),g(be,null,$e(n.paginatedDevotees,i=>(m(),g("tr",{key:n.getDevoteeId(i),class:"hover:bg-gray-50"},[e("td",wT,"#"+h(n.getDevoteeId(i)),1),e("td",kT,[e("div",_T,[e("div",$T,[e("div",ST,[e("span",DT,h(n.getDevoteeName(i).charAt(0).toUpperCase()),1)])]),e("div",CT,[e("div",TT,h(n.getDevoteeName(i)),1)])])]),e("td",ET,h(i.email||"Not provided"),1),e("td",AT,h(i.phone||"Not provided"),1),e("td",IT,[e("span",{class:se([n.getStatusClass(i.status),"inline-flex px-2 py-0.5 text-xs font-semibold rounded-full"])},h(i.status||"active"),3)]),e("td",MT,[e("div",RT,[e("button",{onClick:c=>n.viewDevoteeProfile(i),class:"px-2 py-0.5 rounded text-xs text-blue-600 hover:text-blue-900 hover:bg-blue-50 border border-blue-300 transition-colors",title:"View Profile"}," View Profile ",8,PT),e("button",{onClick:c=>n.handleToggleStatus(i),disabled:n.statusUpdateLoading===n.getDevoteeId(i),class:se([n.getToggleButtonClass(i.status),"px-2 py-0.5 rounded text-xs transition-colors disabled:opacity-50 disabled:cursor-not-allowed"]),title:n.getStatusToggleText(i.status)},[n.statusUpdateLoading===n.getDevoteeId(i)?(m(),g("span",jT,[...o[22]||(o[22]=[e("svg",{class:"animate-spin -ml-1 mr-1 h-3 w-3 text-current",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),te(" Updating... ",-1)])])):(m(),g("span",LT,h(n.getStatusToggleText(i.status)),1))],10,NT)])])]))),128))])])]),n.totalPages>1?(m(),g("div",BT,[e("div",UT,[e("button",{onClick:o[9]||(o[9]=i=>n.goToPage(n.currentPage-1)),disabled:n.currentPage===1,class:"relative inline-flex items-center rounded-md border border-gray-300 bg-white px-3 py-1.5 text-sm font-medium text-gray-700 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed"}," Previous ",8,FT),e("button",{onClick:o[10]||(o[10]=i=>n.goToPage(n.currentPage+1)),disabled:n.currentPage===n.totalPages,class:"relative ml-3 inline-flex items-center rounded-md border border-gray-300 bg-white px-3 py-1.5 text-sm font-medium text-gray-700 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed"}," Next ",8,VT)]),e("div",OT,[e("div",null,[e("p",zT,[o[24]||(o[24]=te(" Showing ",-1)),e("span",HT,h(n.paginationInfo.start),1),o[25]||(o[25]=te(" to ",-1)),e("span",qT,h(n.paginationInfo.end),1),o[26]||(o[26]=te(" of ",-1)),e("span",GT,h(n.paginationInfo.total),1),o[27]||(o[27]=te(" results ",-1))])]),e("div",null,[e("nav",JT,[e("button",{onClick:o[11]||(o[11]=i=>n.goToPage(n.currentPage-1)),disabled:n.currentPage===1,class:"relative inline-flex items-center rounded-l-md px-2 py-1.5 text-gray-400 ring-1 ring-inset ring-gray-300 hover:bg-gray-50 focus:z-20 focus:outline-offset-0 disabled:opacity-50 disabled:cursor-not-allowed"},[...o[28]||(o[28]=[e("span",{class:"sr-only"},"Previous",-1),e("svg",{class:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},[e("path",{"fill-rule":"evenodd",d:"M12.79 5.23a.75.75 0 01-.02 1.06L8.832 10l3.938 3.71a.75.75 0 11-1.04 1.08l-4.5-4.25a.75.75 0 010-1.08l4.5-4.25a.75.75 0 011.06.02z","clip-rule":"evenodd"})],-1)])],8,WT),(m(!0),g(be,null,$e(n.visiblePages,i=>(m(),g(be,{key:i},[i!=="..."?(m(),g("button",{key:0,onClick:c=>n.goToPage(i),class:se(["relative inline-flex items-center px-3 py-1.5 text-sm font-semibold focus:z-20 focus:outline-offset-0",i===n.currentPage?"z-10 bg-indigo-600 text-white focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600":"text-gray-900 ring-1 ring-inset ring-gray-300 hover:bg-gray-50"])},h(i),11,YT)):(m(),g("span",KT,"..."))],64))),128)),e("button",{onClick:o[12]||(o[12]=i=>n.goToPage(n.currentPage+1)),disabled:n.currentPage===n.totalPages,class:"relative inline-flex items-center rounded-r-md px-2 py-1.5 text-gray-400 ring-1 ring-inset ring-gray-300 hover:bg-gray-50 focus:z-20 focus:outline-offset-0 disabled:opacity-50 disabled:cursor-not-allowed"},[...o[29]||(o[29]=[e("span",{class:"sr-only"},"Next",-1),e("svg",{class:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},[e("path",{"fill-rule":"evenodd",d:"M7.21 14.77a.75.75 0 01.02-1.06L11.168 10 7.23 6.29a.75.75 0 111.04-1.08l4.5 4.25a.75.75 0 010 1.08l-4.5 4.25a.75.75 0 01-1.06-.02z","clip-rule":"evenodd"})],-1)])],8,XT)])])])])):J("",!0),n.paginatedDevotees.length===0&&!n.loading?(m(),g("div",ZT,[o[30]||(o[30]=e("svg",{class:"mx-auto h-10 w-10 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})],-1)),o[31]||(o[31]=e("h3",{class:"mt-2 text-sm font-medium text-gray-900"},"No devotees found",-1)),e("p",QT,h(n.searchQuery||n.statusFilter||n.hasActiveFilters?"Try adjusting your search criteria or filters.":"No devotees have joined this temple yet."),1)])):J("",!0)])])]),n.loading?(m(),g("div",eE,[e("div",tE,[le(d,{size:"sm"}),o[32]||(o[32]=e("span",{class:"text-gray-700"},"Loading devotees...",-1))])])):J("",!0)])}const sE=ot(FC,[["render",oE]]);class nE{async getSevas(o={}){var s,n,r,l,a,d;try{const i=this.getCurrentEntityId(),c=localStorage.getItem("current_tenant_id");console.log(`Fetching sevas for entity ID: ${i}, tenant ID: ${c}`),i&&localStorage.setItem("current_entity_id",i);const u=i?`/sevas/entity-sevas?entity_id=${i}`:"/sevas/entity-sevas",p={headers:{Authorization:`Bearer ${localStorage.getItem("auth_token")}`,"Content-Type":"application/json","X-Tenant-ID":c,"X-Entity-ID":i}};console.log(`Requesting sevas from: ${u} with headers:`,p),console.log("Requesting sevas with params:",o);const w={...o,entity_id:i},f=await Ie.get(u,{...p,params:w});return console.log("Seva response:",f.data),{success:!0,data:((s=f.data)==null?void 0:s.sevas)||[],total:((n=f.data)==null?void 0:n.total)||0,pagination:((r=f.data)==null?void 0:r.pagination)||{}}}catch(i){return console.error("Error fetching sevas:",i),console.error("Error details:",((l=i.response)==null?void 0:l.data)||"No response data"),{success:!1,error:((d=(a=i.response)==null?void 0:a.data)==null?void 0:d.error)||"Failed to fetch sevas",data:[]}}}async getDevoteeSevas(o={}){var s,n,r,l;try{const a=this.getCurrentEntityId(),d=localStorage.getItem("current_tenant_id");console.log("Requesting devotee sevas with params:",o),console.log(`Devotee sevas for entity ID: ${a}, tenant ID: ${d}`);const i=a?`/sevas?entity_id=${a}`:"/sevas",c={headers:{Authorization:`Bearer ${localStorage.getItem("auth_token")}`,"Content-Type":"application/json","X-Tenant-ID":d,"X-Entity-ID":a}},u={...o,entity_id:a},p=await Ie.get(i,{...c,params:u});return console.log("Devotee seva response:",p.data),{success:!0,data:((s=p.data)==null?void 0:s.sevas)||[],pagination:((n=p.data)==null?void 0:n.pagination)||{}}}catch(a){return console.error("Error fetching devotee sevas:",a),{success:!1,error:((l=(r=a.response)==null?void 0:r.data)==null?void 0:l.error)||"Failed to fetch sevas",data:[]}}}async getSevaById(o){var s,n;try{const r=this.getCurrentEntityId(),l=localStorage.getItem("current_tenant_id"),a={headers:{Authorization:`Bearer ${localStorage.getItem("auth_token")}`,"Content-Type":"application/json","X-Tenant-ID":l,"X-Entity-ID":r}};return console.log(`Fetching seva ${o} for entity ID: ${r}`),{success:!0,data:(await Ie.get(`v1/sevas/${o}`,a)).data||null}}catch(r){return console.error("Error fetching seva:",r),{success:!1,error:((n=(s=r.response)==null?void 0:s.data)==null?void 0:n.error)||"Failed to fetch seva details",data:null}}}async getBookingCounts(){var o,s;try{const n=this.getCurrentEntityId(),r=localStorage.getItem("current_tenant_id");console.log(`Fetching booking counts for entity ID: ${n}, tenant ID: ${r}`);const l=n?`/sevas/booking-counts?entity_id=${n}`:"/sevas/booking-counts",a={headers:{Authorization:`Bearer ${localStorage.getItem("auth_token")}`,"Content-Type":"application/json","X-Tenant-ID":r,"X-Entity-ID":n}},d=await Ie.get(l,a);return console.log("Booking counts response:",d.data),{success:!0,data:d.data||{}}}catch(n){return console.error("Error fetching booking counts:",n),{success:!1,error:((s=(o=n.response)==null?void 0:o.data)==null?void 0:s.error)||"Failed to fetch booking counts",data:{total:0,approved:0,pending:0,rejected:0}}}}async createSeva(o){var s,n,r,l;try{const a=this.getCurrentEntityId(),d=localStorage.getItem("current_tenant_id");if(!a)throw new Error("No entity ID available for seva creation");const i={name:o.name,seva_type:o.seva_type||o.sevaType,description:o.description||"",price:o.price||0,date:o.date||o.seva_date,start_time:o.start_time||o.startTime,end_time:o.end_time||o.endTime,duration:o.duration||30,max_bookings_per_day:o.max_bookings_per_day||o.maxBookingsPerDay||10,entity_id:parseInt(a)};console.log("Creating seva with data:",i),console.log("Entity ID being used:",a);const c={headers:{Authorization:`Bearer ${localStorage.getItem("auth_token")}`,"Content-Type":"application/json","X-Entity-ID":a,"X-Tenant-ID":d}},u=await Ie.post("/sevas",i,c);return console.log("Seva created successfully:",u.data),{success:!0,data:u.data,message:"Seva created successfully"}}catch(a){return console.error("Error creating seva:",a),{success:!1,error:((n=(s=a.response)==null?void 0:s.data)==null?void 0:n.error)||"Failed to create seva",errors:((l=(r=a.response)==null?void 0:r.data)==null?void 0:l.errors)||{}}}}async updateSeva(o,s){var n,r,l,a;try{const d=this.getCurrentEntityId(),i=localStorage.getItem("current_tenant_id"),c={name:s.name,seva_type:s.seva_type||s.sevaType,description:s.description||"",price:s.price||0,date:s.date||s.seva_date,start_time:s.start_time||s.startTime,end_time:s.end_time||s.endTime,duration:s.duration||30,max_bookings_per_day:s.max_bookings_per_day||s.maxBookingsPerDay||10,status:s.status},u={headers:{Authorization:`Bearer ${localStorage.getItem("auth_token")}`,"Content-Type":"application/json","X-Entity-ID":d,"X-Tenant-ID":i}};return console.log("Updating seva with ID:",o,"Data:",c),console.log("Entity ID context:",d),{success:!0,data:(await Ie.put(`/sevas/${o}`,c,u)).data,message:"Seva updated successfully",wasUpdate:!0,id:o}}catch(d){return console.error("Error updating seva:",d),{success:!1,error:((r=(n=d.response)==null?void 0:n.data)==null?void 0:r.error)||"Failed to update seva",errors:((a=(l=d.response)==null?void 0:l.data)==null?void 0:a.errors)||{}}}}async deleteSeva(o){var s,n,r,l,a,d,i;try{const c=this.getCurrentEntityId(),u=localStorage.getItem("current_tenant_id");console.log("Permanently deleting seva with ID:",o),console.log("Entity context:",c);const p={headers:{Authorization:`Bearer ${localStorage.getItem("auth_token")}`,"Content-Type":"application/json","X-Entity-ID":c,"X-Tenant-ID":u,"X-Force-Delete":"true"}},w=await Ie.delete(`/sevas/${o}`,{...p,params:{force:!0,permanent:!0}});return console.log("Delete response:",w.data),{success:!0,message:"Seva permanently deleted successfully",id:o}}catch(c){return console.error("Error deleting seva:",c),console.error("Delete error details:",(s=c.response)==null?void 0:s.data),((n=c.response)==null?void 0:n.status)===404?{success:!1,error:"Seva not found or already deleted"}:((r=c.response)==null?void 0:r.status)===409?{success:!1,error:"Cannot delete seva - it has existing bookings. Please contact administrator."}:{success:!1,error:((a=(l=c.response)==null?void 0:l.data)==null?void 0:a.error)||((i=(d=c.response)==null?void 0:d.data)==null?void 0:i.message)||"Failed to permanently delete seva"}}}async deactivateSeva(o){var s,n;try{const r=this.getCurrentEntityId(),l=localStorage.getItem("current_tenant_id");console.log("Deactivating seva with ID:",o);const a={headers:{Authorization:`Bearer ${localStorage.getItem("auth_token")}`,"Content-Type":"application/json","X-Entity-ID":r,"X-Tenant-ID":l}};return{success:!0,data:(await Ie.patch(`/sevas/${o}/deactivate`,{},a)).data,message:"Seva deactivated successfully"}}catch(r){return console.error("Error deactivating seva:",r),{success:!1,error:((n=(s=r.response)==null?void 0:s.data)==null?void 0:n.error)||"Failed to deactivate seva"}}}async bookSeva(o){var n,r,l;const s={seva_id:o};try{const a=this.getCurrentEntityId(),d=localStorage.getItem("current_tenant_id"),i={headers:{Authorization:`Bearer ${localStorage.getItem("auth_token")}`,"Content-Type":"application/json","X-Entity-ID":a,"X-Tenant-ID":d}};return console.log(`Booking seva ${o} for entity ${a}`),{success:!0,data:(await Ie.post("/sevas/bookings",s,i)).data,message:"Seva booked successfully"}}catch(a){return console.error("Error booking seva:",((n=a.response)==null?void 0:n.data)||a),{success:!1,error:((l=(r=a.response)==null?void 0:r.data)==null?void 0:l.error)||"Failed to book seva"}}}async getMyBookings(o=null){var s,n,r,l;try{const a=o||this.getCurrentEntityId(),d=localStorage.getItem("current_tenant_id");console.log(`Fetching my bookings for entity ${a}`);const i=a?`/sevas/my-bookings?entity_id=${a}`:"/sevas/my-bookings",c={headers:{Authorization:`Bearer ${localStorage.getItem("auth_token")}`,"Content-Type":"application/json","X-Entity-ID":a,"X-Tenant-ID":d}};let p=((s=(await Ie.get(i,c)).data)==null?void 0:s.bookings)||[];return a&&(p=p.filter(w=>{const f=w.entity_id||w.EntityID||w.entityId;return f&&parseInt(f)===parseInt(a)}),console.log(` Filtered ${p.length} bookings for entity ${a}`)),{success:!0,data:p}}catch(a){return console.error("Error fetching my bookings:",((n=a.response)==null?void 0:n.data)||a),{success:!1,error:((l=(r=a.response)==null?void 0:r.data)==null?void 0:l.error)||"Failed to fetch booking history",data:[]}}}async getEntityBookings(o){var s,n;try{const r=o||this.getCurrentEntityId(),l=localStorage.getItem("current_tenant_id");console.log(`Fetching entity bookings for entity ID: ${r}, tenant ID: ${l}`);const a=r?`/sevas/entity-bookings?entity_id=${r}`:"/sevas/entity-bookings",d={headers:{Authorization:`Bearer ${localStorage.getItem("auth_token")}`,"Content-Type":"application/json","X-Entity-ID":r,"X-Tenant-ID":l}};console.log(`Requesting entity bookings from: ${a} with headers:`,d);const i=await Ie.get(a,d);return console.log("Entity bookings response:",i.data),{success:!0,data:i.data.bookings||[],pagination:i.data.pagination||{},total:i.data.total||0}}catch(r){return console.error("Error fetching entity bookings:",r),{success:!1,error:((n=(s=r.response)==null?void 0:s.data)==null?void 0:n.error)||"Failed to fetch bookings",data:[]}}}async getBookingById(o){var s,n;try{const r=this.getCurrentEntityId(),l=localStorage.getItem("current_tenant_id"),a={headers:{Authorization:`Bearer ${localStorage.getItem("auth_token")}`,"Content-Type":"application/json","X-Entity-ID":r,"X-Tenant-ID":l}};return console.log(`Fetching booking ${o} for entity ${r}`),{success:!0,data:(await Ie.get(`/sevas/bookings/${o}`,a)).data||null}}catch(r){return console.error("Error fetching booking:",r),{success:!1,error:((n=(s=r.response)==null?void 0:s.data)==null?void 0:n.error)||"Failed to fetch booking details",data:null}}}async updateBookingStatus(o,s){var n,r;try{const l=this.getCurrentEntityId(),a=localStorage.getItem("current_tenant_id"),d={headers:{Authorization:`Bearer ${localStorage.getItem("auth_token")}`,"Content-Type":"application/json","X-Entity-ID":l,"X-Tenant-ID":a}};return console.log(`Updating booking ${o} status to ${s} for entity ${l}`),{success:!0,data:(await Ie.patch(`/sevas/bookings/${o}/status`,{status:s},d)).data,message:`Booking ${s} successfully`}}catch(l){return console.error("Error updating booking status:",l),{success:!1,error:((r=(n=l.response)==null?void 0:n.data)==null?void 0:r.error)||"Failed to update booking status"}}}getCurrentEntityId(){const s=window.location.pathname.match(/\/entity\/(\d+)/);if(s){const l=s[1];return console.log(`Entity ID from URL path: ${l}`),l}const n=localStorage.getItem("current_entity_id");if(n&&n!=="null"&&n!=="undefined")return console.log(`Entity ID from localStorage: ${n}`),n;const r=this.getUserInfo();if(r)switch(r.role){case"templeadmin":if(r.entityId)return console.log(`TempleAdmin entity ID: ${r.entityId}`),r.entityId.toString();break;case"standarduser":case"monitoringuser":if(r.assignedTenantId)return console.log(`StandardUser/MonitoringUser assigned tenant ID: ${r.assignedTenantId}`),r.assignedTenantId.toString();break}return console.warn("Could not resolve entity ID for seva service"),null}getUserInfo(){try{const o=localStorage.getItem("auth_token");if(o){const s=JSON.parse(atob(o.split(".")[1]));return{userId:s.user_id,role:s.role||s.role_name,entityId:s.entity_id,assignedTenantId:s.assigned_tenant_id}}}catch(o){console.warn("Error parsing user info from token:",o)}return null}handleError(o){var s,n,r,l;return(n=(s=o.response)==null?void 0:s.data)!=null&&n.message?new Error(o.response.data.message):(l=(r=o.response)==null?void 0:r.data)!=null&&l.error?new Error(o.response.data.error):o.message?new Error(o.message):new Error("An unexpected error occurred")}_saveBookingToLocalStorage(o){try{const s=JSON.parse(localStorage.getItem("user_bookings")||"[]");s.some(n=>n.seva_id===o)||(s.push({id:Math.floor(Math.random()*1e3),seva_id:o,status:"pending",created_at:new Date().toISOString()}),localStorage.setItem("user_bookings",JSON.stringify(s)))}catch(s){console.error("Error saving booking to localStorage:",s)}}}const it=new nE,Ra=Uo("seva",()=>{const t=B([]),o=B([]),s=B(!1),n=B(null),r=B(""),l=B({status:"all",type:"all",dateRange:"all"}),a=B(null),d=B([]),i=B(!1),c=B({}),u=B(!1),p=B([]),w=B(!1),f=oe(()=>{let q=t.value;if(r.value){const K=r.value.toLowerCase();q=q.filter(H=>{var O,ee;return((O=H.name)==null?void 0:O.toLowerCase().includes(K))||((ee=H.description)==null?void 0:ee.toLowerCase().includes(K))})}return l.value.status!=="all"&&(q=q.filter(K=>K.status===l.value.status)),l.value.type!=="all"&&(q=q.filter(K=>K.type===l.value.type)),q}),v=oe(()=>({total:t.value.length,active:t.value.filter(q=>q.is_active).length,pending:t.value.filter(q=>q.status==="pending").length})),N=async(q={})=>{s.value=!0,n.value=null;try{const K=await it.getSevas({page:q.page||1,limit:q.limit||10,seva_type:q.seva_type||"",search:q.search||""});return K.success?(t.value=K.data||[],t.value):(n.value=K.error,[])}catch(K){return console.error("Error fetching sevas:",K),n.value=K.message||"Failed to fetch sevas",[]}finally{s.value=!1}},A=async(q={})=>{s.value=!0,n.value=null;try{const K=await it.getDevoteeSevas({page:q.page||1,limit:q.limit||10,seva_type:q.seva_type||"",search:q.search||""});return K.success?(t.value=K.data||[],t.value):(n.value=K.error,[])}catch(K){return console.error("Error fetching devotee sevas:",K),n.value=K.message||"Failed to fetch sevas",[]}finally{s.value=!1}},F=async()=>{u.value=!0;try{const q=await it.getBookingCounts();return q.success?(c.value=q.data||{},c.value):(console.error("Failed to fetch booking counts:",q.error),c.value={},{})}catch(q){return console.error("Error fetching booking counts:",q),c.value={},{}}finally{u.value=!1}},I=async()=>{w.value=!0;try{const q=await it.getSevas({page:1,limit:1e3,search:""});return q.success?(p.value=q.data||[],console.log("Seva catalog loaded:",p.value),p.value):(console.error("Failed to fetch seva catalog:",q.error),p.value=[],[])}catch(q){return console.error("Error fetching seva catalog:",q),p.value=[],[]}finally{w.value=!1}};return{sevas:t,sevaBookings:o,loading:s,error:n,searchQuery:r,filters:l,selectedSeva:a,recentSevas:d,loadingRecentSevas:i,sevaCatalog:p,loadingCatalog:w,bookingCounts:c,loadingBookingCounts:u,filteredSevas:f,sevaStats:v,fetchSevas:N,fetchDevoteeSevas:A,fetchBookingCounts:F,fetchSevaCatalog:I,fetchEntityBookings:async(q=null)=>{var K,H;s.value=!0,n.value=null;try{const O=await it.getEntityBookings(q);return O.success?(o.value=O.data||[],o.value):(n.value=O.error,o.value=[],[])}catch(O){return console.error("Error fetching seva bookings:",O),n.value=((H=(K=O.response)==null?void 0:K.data)==null?void 0:H.error)||"Failed to fetch bookings",o.value=[],[]}finally{s.value=!1}},fetchBookingById:async q=>{var K,H;s.value=!0,n.value=null;try{const O=await it.getBookingById(q);return O.success?O.data:(n.value=O.error,null)}catch(O){return console.error("Error fetching booking:",O),n.value=((H=(K=O.response)==null?void 0:K.data)==null?void 0:H.error)||"Failed to fetch booking",null}finally{s.value=!1}},fetchRecentSevas:async(q=null)=>{i.value=!0;try{await I();const K=await it.getMyBookings(q);if(K.success){let H=K.data||[];q&&(H=H.filter(ee=>{const ge=ee.entity_id||ee.EntityID||ee.entityId;return ge&&parseInt(ge)===parseInt(q)}),console.log(`Filtered ${H.length} bookings for entity ${q}`)),H=H.map(ee=>{const ge=ee.seva_id||ee.SevaID,de=p.value.find(ie=>ie.id===ge||ie.ID===ge);return{...ee,seva_name:(de==null?void 0:de.name)||(de==null?void 0:de.Name)||`Seva ${ge}`,seva_type:(de==null?void 0:de.type)||(de==null?void 0:de.Type)||(de==null?void 0:de.seva_type)||"",seva_description:(de==null?void 0:de.description)||(de==null?void 0:de.Description)||"",seva:de?{id:de.id||de.ID,name:de.name||de.Name,type:de.type||de.Type||de.seva_type,description:de.description||de.Description}:null}}),console.log(`Bookings with seva names for entity ${q}:`,H.length);const O=[...H].sort((ee,ge)=>{const de=new Date(ee.booking_time||ee.BookingTime||ee.created_at||Date.now());return new Date(ge.booking_time||ge.BookingTime||ge.created_at||Date.now())-de});return d.value=O,d.value}else return d.value=[],[]}catch(K){return console.error("Failed to fetch recent sevas:",K),d.value=[],[]}finally{i.value=!1}},createSeva:async q=>{var K,H;s.value=!0,n.value=null;try{console.log("Creating seva with data:",q);const O=await it.createSeva(q);return O.success&&O.data&&(t.value.push(O.data),p.value.push(O.data)),{success:O.success,message:O.message||"Seva created successfully",data:O.data}}catch(O){return console.error("Error creating seva:",O),n.value=((H=(K=O.response)==null?void 0:K.data)==null?void 0:H.error)||"Failed to create seva",{success:!1,message:n.value}}finally{s.value=!1}},updateSeva:async(q,K)=>{var H,O;s.value=!0,n.value=null;try{const ee=await it.updateSeva(q,K);if(ee.success&&ee.data){const ge=t.value.findIndex(ie=>ie.id===q);ge!==-1&&(t.value[ge]=ee.data);const de=p.value.findIndex(ie=>ie.id===q);de!==-1&&(p.value[de]=ee.data)}return{success:ee.success,message:ee.message||"Seva updated successfully",data:ee.data}}catch(ee){return console.error("Error updating seva:",ee),n.value=((O=(H=ee.response)==null?void 0:H.data)==null?void 0:O.error)||"Failed to update seva",{success:!1,message:n.value}}finally{s.value=!1}},deleteSeva:async q=>{var K,H;s.value=!0,n.value=null;try{console.log("Permanently deleting seva with ID:",q);const O=await it.deleteSeva(q);return O.success&&(t.value=t.value.filter(ee=>(ee.id||ee.ID)!==q),p.value=p.value.filter(ee=>(ee.id||ee.ID)!==q),o.value=o.value.filter(ee=>(ee.seva_id||ee.SevaID)!==q),d.value=d.value.filter(ee=>(ee.seva_id||ee.SevaID)!==q),console.log("Seva permanently removed from all local state")),{success:O.success,message:O.message||"Seva permanently deleted successfully"}}catch(O){return console.error("Error permanently deleting seva:",O),n.value=((H=(K=O.response)==null?void 0:K.data)==null?void 0:H.error)||"Failed to permanently delete seva",{success:!1,message:n.value}}finally{s.value=!1}},deactivateSeva:async q=>{var K,H;s.value=!0,n.value=null;try{console.log("Deactivating seva with ID:",q);const O=await it.deactivateSeva(q);if(O.success){const ee=t.value.findIndex(de=>(de.id||de.ID)===q);ee!==-1&&(t.value[ee].is_active=!1,t.value[ee].status="inactive");const ge=p.value.findIndex(de=>(de.id||de.ID)===q);ge!==-1&&(p.value[ge].is_active=!1,p.value[ge].status="inactive")}return{success:O.success,message:O.message||"Seva deactivated successfully"}}catch(O){return console.error("Error deactivating seva:",O),n.value=((H=(K=O.response)==null?void 0:K.data)==null?void 0:H.error)||"Failed to deactivate seva",{success:!1,message:n.value}}finally{s.value=!1}},bookSeva:async q=>{var K,H;s.value=!0,n.value=null;try{const O=await it.bookSeva(q);return{success:O.success,message:O.message||"Seva booked successfully",data:O.data}}catch(O){return console.error("Error booking seva:",O),n.value=((H=(K=O.response)==null?void 0:K.data)==null?void 0:H.error)||"Failed to book seva",{success:!1,message:n.value}}finally{s.value=!1}},updateBookingStatus:async(q,K)=>{var H,O;s.value=!0,n.value=null;try{const ee=await it.updateBookingStatus(q,K);if(ee.success){const ge=o.value.findIndex(de=>(de.id||de.ID)===q);ge!==-1&&(o.value[ge].status=K,o.value[ge].Status=K)}return{success:ee.success,message:ee.message||`Booking ${K} successfully`}}catch(ee){return console.error("Error updating booking status:",ee),n.value=((O=(H=ee.response)==null?void 0:H.data)==null?void 0:O.error)||"Failed to update booking status",{success:!1,message:n.value}}finally{s.value=!1}},getSevaById:async q=>{var K,H;s.value=!0,n.value=null;try{const O=await it.getSevaById(q);return O.success?O.data:(n.value=O.error,null)}catch(O){return console.error("Error fetching seva:",O),n.value=((H=(K=O.response)==null?void 0:K.data)==null?void 0:H.error)||"Failed to fetch seva",null}finally{s.value=!1}},setSearchQuery:q=>{r.value=q},setFilters:q=>{l.value={...l.value,...q}},clearFilters:()=>{r.value="",l.value={status:"all",type:"all",dateRange:"all"}},setSelectedSeva:q=>{a.value=q}}}),rE={class:"min-h-screen bg-gray-50/90"},aE={class:"bg-white shadow-sm border-b border-gray-200"},lE={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},iE={class:"flex items-center justify-between h-16"},dE={class:"flex items-center space-x-4"},uE={class:"text-xl font-semibold text-gray-900"},cE={class:"text-sm text-gray-500"},pE={class:"bg-white border-b border-gray-200"},mE={class:"px-6 py-6"},gE={class:"flex items-center justify-between"},fE={class:"flex gap-3"},vE={class:"flex bg-gray-100 rounded-lg p-1"},hE=["disabled","title"],yE={key:0,class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 pt-8"},xE={class:"bg-red-50 border-l-4 border-red-500 p-6 rounded-lg shadow-sm"},bE={class:"flex items-start"},wE={key:1,class:"px-6 py-6"},kE={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8"},_E={class:"bg-white p-6 rounded-xl shadow-sm border border-gray-200 hover:shadow-md transition-all duration-200"},$E={class:"flex items-center"},SE={class:"ml-4"},DE={class:"text-2xl font-bold text-gray-900"},CE={class:"bg-white p-6 rounded-xl shadow-sm border border-gray-200 hover:shadow-md transition-all duration-200"},TE={class:"flex items-center"},EE={class:"ml-4"},AE={class:"text-2xl font-bold text-gray-900"},IE={class:"bg-white p-6 rounded-xl shadow-sm border border-gray-200 hover:shadow-md transition-all duration-200"},ME={class:"flex items-center"},RE={class:"ml-4"},PE={class:"text-2xl font-bold text-gray-900"},NE={class:"bg-white p-6 rounded-xl shadow-sm border border-gray-200 hover:shadow-md transition-all duration-200"},jE={class:"flex items-center"},LE={class:"ml-4"},BE={class:"text-2xl font-bold text-gray-900"},UE={class:"bg-white p-6 rounded-xl shadow-sm border border-gray-200 mb-6 hover:shadow-md transition-all duration-200"},FE={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4"},VE={class:"relative"},OE={class:"flex justify-between items-center mt-4"},zE={class:"text-sm text-gray-500"},HE={key:0,class:"flex justify-center items-center py-12"},qE={key:1,class:"bg-white rounded-xl shadow-sm border border-gray-200 hover:shadow-md transition-all duration-200"},GE={key:0,class:"overflow-x-auto"},JE={class:"w-full"},WE={class:"bg-white divide-y divide-gray-200"},YE={class:"px-6 py-4"},KE={class:"text-sm font-medium text-gray-900"},XE={class:"text-sm text-gray-500"},ZE={key:0,class:"text-xs text-gray-400 mt-1"},QE={class:"px-6 py-4"},eA={class:"text-sm font-medium text-gray-900"},tA={class:"text-xs text-gray-500"},oA={class:"px-6 py-4 whitespace-nowrap"},sA={class:"text-sm text-gray-900"},nA={class:"text-sm text-gray-500"},rA={class:"px-6 py-4 whitespace-nowrap"},aA={class:"px-6 py-4 whitespace-nowrap text-sm font-medium"},lA={class:"flex items-center gap-2"},iA=["onClick"],dA=["onClick"],uA=["onClick"],cA={key:1,class:"text-center py-12"},pA={key:0,class:"mt-6"},mA={key:2,class:"px-6 py-6"},gA={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8"},fA={class:"bg-white p-6 rounded-xl shadow-sm border border-gray-200 hover:shadow-md transition-all duration-200"},vA={class:"flex items-center"},hA={class:"ml-4"},yA={class:"text-2xl font-bold text-gray-900"},xA={class:"bg-white p-6 rounded-xl shadow-sm border border-gray-200 hover:shadow-md transition-all duration-200"},bA={class:"flex items-center"},wA={class:"ml-4"},kA={class:"text-2xl font-bold text-gray-900"},_A={class:"bg-white p-6 rounded-xl shadow-sm border border-gray-200 hover:shadow-md transition-all duration-200"},$A={class:"flex items-center"},SA={class:"ml-4"},DA={class:"text-2xl font-bold text-gray-900"},CA={class:"bg-white p-6 rounded-xl shadow-sm border border-gray-200 hover:shadow-md transition-all duration-200"},TA={class:"flex items-center"},EA={class:"ml-4"},AA={class:"text-2xl font-bold text-gray-900"},IA={class:"bg-white p-6 rounded-xl shadow-sm border border-gray-200 mb-6 hover:shadow-md transition-all duration-200"},MA={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},RA={class:"relative"},PA={class:"flex justify-between items-center mt-4"},NA={class:"text-sm text-gray-500"},jA={key:0,class:"flex justify-center items-center py-12"},LA={key:1,class:"bg-white rounded-xl shadow-sm border border-gray-200 hover:shadow-md transition-all duration-200"},BA={key:0,class:"overflow-x-auto"},UA={class:"w-full"},FA={class:"bg-white divide-y divide-gray-200"},VA={class:"px-6 py-4"},OA={class:"text-sm font-medium text-gray-900"},zA={class:"text-sm text-gray-500 mt-1"},HA={class:"px-6 py-4"},qA={class:"text-sm text-gray-900"},GA={class:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800"},JA={class:"text-sm text-gray-500 mt-1"},WA={class:"px-6 py-4 whitespace-nowrap"},YA={class:"text-sm text-gray-900"},KA={class:"text-sm text-gray-500"},XA={key:0,class:"text-xs text-gray-400"},ZA={class:"px-6 py-4 whitespace-nowrap"},QA={class:"px-6 py-4 whitespace-nowrap text-sm font-medium"},eI={class:"flex items-center gap-2"},tI=["onClick"],oI=["onClick"],sI={key:1,class:"text-center py-12"},nI={key:3,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50 backdrop-blur-sm"},rI={class:"bg-white rounded-xl shadow-xl max-w-md w-full"},aI={class:"p-6"},lI={class:"text-sm text-gray-500 text-center mb-6"},iI={class:"flex space-x-3"},dI=["disabled"],uI={key:0,class:"flex items-center justify-center"},cI={key:1},pI={key:4,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50 backdrop-blur-sm"},mI={class:"bg-white rounded-xl shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto"},gI={class:"flex items-center justify-between p-6 border-b border-gray-200"},fI={class:"text-xl font-bold text-gray-900"},vI={class:"p-6"},hI={class:"space-y-5"},yI={class:"pb-3 mb-3 border-b border-gray-200"},xI={class:"space-y-4"},bI={class:"pb-3 mb-3 border-b border-gray-200"},wI={class:"space-y-4"},kI={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},_I={class:"mt-6 flex justify-end space-x-3"},$I=["disabled"],SI={key:0,class:"flex items-center"},DI={key:1},CI={key:5,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50 backdrop-blur-sm"},TI={class:"bg-white rounded-xl shadow-xl max-w-3xl w-full max-h-[90vh] overflow-y-auto"},EI={class:"flex items-center justify-between p-6 border-b border-gray-200"},AI={class:"p-6"},II={class:"bg-gray-50 rounded-lg p-6 mb-6 border border-gray-100"},MI={class:"flex items-center justify-between mb-4"},RI={class:"text-lg font-semibold text-gray-900"},PI={class:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4"},NI={class:"text-base text-gray-900"},jI={class:"text-base text-gray-900"},LI={class:"text-base text-gray-900"},BI={class:"text-base text-gray-900"},UI={class:"text-base text-gray-900"},FI={class:"text-base text-gray-900"},VI={class:"text-base text-gray-900"},OI={key:0,class:"mb-4"},zI={class:"text-base text-gray-900"},HI={key:0,class:"flex justify-end space-x-3"},qI={key:1,class:"bg-yellow-50 border border-yellow-200 rounded-lg p-4"},GI={class:"flex items-center"},JI={class:"flex-shrink-0"},WI={key:0,class:"w-5 h-5 text-green-400",fill:"currentColor",viewBox:"0 0 20 20"},YI={key:1,class:"w-5 h-5 text-red-400",fill:"currentColor",viewBox:"0 0 20 20"},KI={class:"ml-3"},XI={class:"text-sm font-medium"},ZI={__name:"SevaManagement",setup(t){const s=tt().params.id;Ra();const n=Ot(),r=We(),l=oe(()=>{var ue,Ae;const ae=(r.userRole||"").toLowerCase(),Y=((ue=r.user)==null?void 0:ue.roleId)||((Ae=r.user)==null?void 0:Ae.role_id);return ae==="monitoring_user"||ae==="monitoringuser"||Y===6||Y==="6"}),a=B(null),d=B(!1),i=B(!1),c=B(!1),u=B(null),p=B(null),w=B([]),f=B(1),v=B([]);B({});const N=B(!1),A=B("sevas"),F=B(!1),I=B([]),C=B(null),j=B(""),$=B(""),y=B(""),b=B(""),E=B(""),R=B(""),M=B(""),G={1:{name:"Archana Seva",type:"daily"},2:{name:"Anadhana Seva",type:"daily"},3:{name:"Archana Seva",type:"daily"}},U=ae=>(ae==null?void 0:ae.ID)||(ae==null?void 0:ae.id)||0,_=ae=>(ae==null?void 0:ae.SevaID)||(ae==null?void 0:ae.seva_id)||1,k=ae=>(ae==null?void 0:ae.Status)||(ae==null?void 0:ae.status)||"pending",L=ae=>(ae==null?void 0:ae.SpecialRequests)||(ae==null?void 0:ae.special_requests)||"",z=ae=>(ae==null?void 0:ae.BookingTime)||(ae==null?void 0:ae.booking_time)||null,q=ae=>(ae==null?void 0:ae.CreatedAt)||(ae==null?void 0:ae.created_at)||null,K=ae=>(ae==null?void 0:ae.DevoteeName)||(ae==null?void 0:ae.devotee_name)||"Dileep",H=ae=>(ae==null?void 0:ae.DevoteePhone)||(ae==null?void 0:ae.devotee_phone)||"8765453434",O=ae=>{if(!ae)return"Unknown Seva";if(ae.SevaName||ae.seva_name)return ae.SevaName||ae.seva_name;const Y=_(ae);return G[Y]?G[Y].name:"Archana Seva"},ee=ae=>{if(!ae)return"Not Categorized";if(ae.SevaType||ae.seva_type)return ae.SevaType||ae.seva_type;const Y=_(ae);return G[Y]?G[Y].type:"daily"},ge=ae=>{const Y=z(ae);if(!Y)return"No Date";try{return new Date(Y).toLocaleDateString("en-IN",{day:"2-digit",month:"short",year:"numeric"})}catch(ue){return console.error("Error formatting booking date:",ue,Y),"No Date"}},de=ae=>{const Y=z(ae);if(!Y)return"";try{return new Date(Y).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!0})}catch(ue){return console.error("Error formatting booking time:",ue,Y),""}},ie=oe(()=>{let ae=[...v.value];if(j.value){const Y=j.value.toLowerCase();ae=ae.filter(ue=>{const Ae=O(ue).toLowerCase(),Le=ee(ue).toLowerCase();return Ae.includes(Y)||(L(ue)||"").toLowerCase().includes(Y)||(K(ue)||"").toLowerCase().includes(Y)||Le.includes(Y)})}if($.value&&(ae=ae.filter(Y=>k(Y)===$.value)),y.value&&(ae=ae.filter(Y=>ee(Y).toLowerCase()===y.value.toLowerCase())),b.value){const Y=new Date;Y.setHours(0,0,0,0);const ue=Ae=>{const Le=z(Ae);if(Le)return new Date(Le);const He=q(Ae);return He?new Date(He):null};if(b.value==="today")ae=ae.filter(Ae=>{const Le=ue(Ae);if(!Le)return!1;const He=new Date(Le);return He.setHours(0,0,0,0),He.getTime()===Y.getTime()});else if(b.value==="week"){const Ae=new Date(Y);Ae.setDate(Y.getDate()-Y.getDay());const Le=new Date(Ae);Le.setDate(Ae.getDate()+6),ae=ae.filter(He=>{const st=ue(He);return st?st>=Ae&&st<=Le:!1})}else if(b.value==="month"){const Ae=new Date(Y.getFullYear(),Y.getMonth(),1),Le=new Date(Y.getFullYear(),Y.getMonth()+1,0);ae=ae.filter(He=>{const st=ue(He);return st?st>=Ae&&st<=Le:!1})}}return ae}),me=oe(()=>{let ae=[...I.value];if(E.value){const Y=E.value.toLowerCase();ae=ae.filter(ue=>{const Ae=(ue.name||ue.Name||"").toLowerCase(),Le=(ue.description||ue.Description||"").toLowerCase();return Ae.includes(Y)||Le.includes(Y)})}return R.value&&(ae=ae.filter(Y=>(Y.seva_type||Y.type||"").toLowerCase()===R.value.toLowerCase())),M.value&&(ae=ae.filter(Y=>{const ue=Y.is_active||Y.status==="active";return M.value==="active"?ue:!ue})),ae}),ke=B({name:"",type:"",description:"",price:0,duration:30,date:"",startTime:"",endTime:"",max_bookings_per_day:10,is_active:!0}),Q=(ae,Y="info")=>{const ue=f.value++,Ae={id:ue,message:ae,type:Y,show:!0};return w.value.push(Ae),setTimeout(()=>{const Le=w.value.findIndex(He=>He.id===ue);Le!==-1&&(w.value[Le].show=!1,setTimeout(()=>{w.value=w.value.filter(He=>He.id!==ue)},300))},3e3),ue},D=()=>{if(l.value){N.value=!0,Q("You are not allowed to create sevas. Monitoring users have view-only access.","error"),setTimeout(()=>{N.value=!1},5e3);return}c.value=!0},x=async()=>{try{const ae=n.getTempleById(s);if(ae)a.value=ae;else try{const Y=await pe.get(`/entities/${s}`);Y.data&&(a.value=Y.data)}catch(Y){console.error("Failed to fetch temple details:",Y)}}catch(ae){console.error("Error loading temple data:",ae)}},S=ae=>{if(!ae||ae==="")return"No Date Set";try{const Y=new Date(ae);return isNaN(Y.getTime())?"Invalid Date":Y.toLocaleDateString("en-IN",{day:"2-digit",month:"short",year:"numeric"})}catch(Y){return console.error("Error formatting date:",Y,ae),"Invalid Date"}},P=ae=>{if(!ae)return"";try{if(ae.includes(" ")){const Y=ae.split(" ");if(Y.length>1){const ue=Y[1].split(".")[0],[Ae,Le,He]=ue.split(":"),st=parseInt(Ae,10),to=st===0?12:st>12?st-12:st,Fo=st>=12?"PM":"AM";return`${to}:${Le} ${Fo}`}}if(ae.includes("T"))return new Date(ae).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!0});if(ae.includes(":")){const[Y,ue]=ae.split(":"),Ae=parseInt(Y,10),Le=Ae>=12?"PM":"AM";return`${Ae%12||12}:${ue} ${Le}`}return ae}catch(Y){return console.error("Error formatting time:",Y,ae),ae}},T=ae=>({pending:"bg-yellow-100 text-yellow-800",approved:"bg-green-100 text-green-800",rejected:"bg-red-100 text-red-800",completed:"bg-blue-100 text-blue-800",success:"bg-green-100 text-green-800"})[ae]||"bg-gray-100 text-gray-800",V=ae=>({pending:"bg-yellow-400",approved:"bg-green-400",rejected:"bg-red-400",completed:"bg-blue-400",success:"bg-green-400"})[ae]||"bg-gray-400",Z=async()=>{console.log("Loading seva bookings for entity ID:",s);try{d.value=!0;const ae=await it.getEntityBookings(s),Y=ae==null?void 0:ae.data;v.value=Array.isArray(Y)?Y:[],console.log("First booking object fields:",v.value.length>0?Object.keys(v.value[0]):"No bookings"),console.log("Sample booking data:",v.value.length>0?v.value[0]:"No bookings")}catch(ae){console.error("Error loading seva bookings:",ae),Q("Failed to load seva bookings. Please try again.","error")}finally{d.value=!1}},X=async()=>{console.log("Loading seva catalog");try{F.value=!0;const ae=await it.getSevas({limit:1e3});ae.success?(I.value=ae.data||[],console.log("Seva catalog loaded:",I.value)):(console.error("Failed to load seva catalog:",ae.error),Q("Failed to load seva catalog","error"))}catch(ae){console.error("Error loading seva catalog:",ae),Q("Failed to load seva catalog. Please try again.","error")}finally{F.value=!1}},W=async ae=>{if(l.value){N.value=!0,Q("You are not allowed to approve bookings. Monitoring users have view-only access.","error");return}const Y=U(ae);console.log("Approving booking:",Y);try{const ue=await it.updateBookingStatus(Y,"approved");ue.success?(await Z(),Q("Booking approved successfully","success"),p.value&&U(p.value)===Y&&(p.value=null)):Q(ue.message||"Failed to approve booking","error")}catch(ue){console.error("Error approving booking:",ue),Q("Failed to approve booking. Please try again.","error")}},re=async ae=>{if(l.value){N.value=!0,Q("You are not allowed to reject bookings. Monitoring users have view-only access.","error");return}const Y=U(ae);console.log("Rejecting booking:",Y);try{const ue=await it.updateBookingStatus(Y,"rejected");ue.success?(await Z(),Q("Booking rejected","warning"),p.value&&U(p.value)===Y&&(p.value=null)):Q(ue.message||"Failed to reject booking","error")}catch(ue){console.error("Error rejecting booking:",ue),Q("Failed to reject booking. Please try again.","error")}},ne=ae=>{if(l.value){N.value=!0,Q("You are not allowed to edit sevas. Monitoring users have view-only access.","error");return}console.log("Editing seva:",ae),ke.value={name:ae.name||ae.Name||"",type:ae.seva_type||ae.type||ae.SevaType||"",description:ae.description||ae.Description||"",price:ae.price||ae.Price||0,duration:ae.duration||ae.Duration||30,date:ae.date||ae.Date||"",startTime:ae.start_time||ae.StartTime||"",endTime:ae.end_time||ae.EndTime||"",max_bookings_per_day:ae.max_bookings_per_day||ae.MaxBookingsPerDay||10,is_active:ae.is_active!==void 0?ae.is_active:ae.status==="active"||!0},u.value=ae},fe=ae=>{if(l.value){N.value=!0,Q("You are not allowed to delete sevas. Monitoring users have view-only access.","error");return}C.value=ae},we=async()=>{var ae;if(C.value){i.value=!0;try{const Y=C.value.id||C.value.ID;console.log("Deleting seva ID:",Y);const ue=await it.deleteSeva(Y);ue&&ue.success?(await X(),Q(`Seva "${C.value.name||C.value.Name}" deleted successfully`,"success"),C.value=null):(console.error("Delete failed:",ue),Q((ue==null?void 0:ue.message)||(ue==null?void 0:ue.error)||"Failed to delete seva","error"))}catch(Y){console.error("Error deleting seva:",Y),Y!=null&&Y.response?Q(`Error (${Y.response.status}): ${((ae=Y.response.data)==null?void 0:ae.message)||"Failed to delete seva"}`,"error"):Q("Failed to delete seva. Please try again.","error")}finally{i.value=!1}}},ve=async()=>{if(!ke.value.name||!ke.value.type||!ke.value.description){Q("Please fill in all required fields","error");return}if(!u.value&&!s){Q("Missing entity ID. Please try again.","error");return}i.value=!0;try{const ae={name:ke.value.name.trim(),seva_type:ke.value.type,description:ke.value.description.trim(),price:parseFloat(ke.value.price)||0,duration:parseInt(ke.value.duration)||30,max_bookings_per_day:parseInt(ke.value.max_bookings_per_day)||10,status:"upcoming",is_active:!0};if(ke.value.date&&ke.value.date.trim()&&(ae.date=ke.value.date),ke.value.startTime&&ke.value.startTime.trim()&&(ae.start_time=ke.value.startTime),ke.value.endTime&&ke.value.endTime.trim()&&(ae.end_time=ke.value.endTime),console.log("Base payload:",ae),u.value){const Y=u.value.id||u.value.ID;console.log("Updating seva ID:",Y);const ue=Object.fromEntries(Object.entries(ae).filter(([Le,He])=>He!=null&&He!==""));console.log("Final update payload:",ue);const Ae=await it.updateSeva(Y,ue);if(Ae&&Ae.success)await Promise.all([Z(),X()]),Q(`Seva "${ke.value.name}" updated successfully`,"success"),he();else{console.error("Update failed:",Ae);const Le=(Ae==null?void 0:Ae.message)||(Ae==null?void 0:Ae.error)||"Failed to update seva";Q(Le,"error")}}else{console.log("Creating new seva"),ae.entity_id=parseInt(s),console.log("Final create payload:",ae);const Y=await it.createSeva(ae);if(Y&&Y.success)await Promise.all([Z(),X()]),Q(`Seva "${ke.value.name}" created successfully`,"success"),A.value="sevas",he();else if(console.error("Create failed:",Y),Y!=null&&Y.errors&&Object.keys(Y.errors).length>0){const ue=Object.keys(Y.errors)[0],Ae=Y.errors[ue];Q(`Validation error: ${ue} - ${Ae}`,"error")}else{const ue=(Y==null?void 0:Y.message)||(Y==null?void 0:Y.error)||"Failed to create seva";Q(ue,"error")}}}catch(ae){if(console.error("Error saving seva:",ae),ae!=null&&ae.response){const Y=ae.response.status,ue=ae.response.data;console.error("API Error Response:",ue);let Ae=`Error (${Y})`;ue!=null&&ue.message?Ae+=`: ${ue.message}`:ue!=null&&ue.error?Ae+=`: ${ue.error}`:Ae+=": Failed to save seva",Q(Ae,"error")}else ae!=null&&ae.message?Q(`Error: ${ae.message}`,"error"):Q("Failed to save seva. Please try again.","error")}finally{i.value=!1}},De=ae=>{console.log("Viewing booking details:",ae),p.value=ae},he=()=>{c.value=!1,u.value=null,ke.value={name:"",type:"",description:"",price:0,duration:30,date:"",startTime:"",endTime:"",max_bookings_per_day:10,is_active:!0}},Se=()=>{j.value="",$.value="",y.value="",b.value=""},Ee=()=>{E.value="",R.value="",M.value=""};return Me(async()=>{console.log("SevaManagement component mounted for entity:",s),await x(),Z(),X()}),(ae,Y)=>(m(),g("div",rE,[e("div",aE,[e("div",lE,[e("div",iE,[e("div",dE,[Y[27]||(Y[27]=e("div",{class:"h-10 w-10 rounded-full bg-indigo-100 flex items-center justify-center"},[e("svg",{class:"h-6 w-6 text-indigo-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-4m-2 0H3m2-16l9-9 9 9"})])],-1)),e("div",null,[e("h1",uE,h(a.value?a.value.name:"Loading..."),1),e("p",cE,h(a.value?`${a.value.city}, ${a.value.state}`:"Loading location..."),1)])]),Y[28]||(Y[28]=e("div",{class:"flex items-center space-x-3"},[e("span",{class:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800"}," Active ")],-1))])])]),e("div",pE,[e("div",mE,[e("div",gE,[Y[30]||(Y[30]=e("div",null,[e("h1",{class:"text-2xl font-bold text-gray-900"},"Seva Management"),e("p",{class:"mt-1 text-sm text-gray-500"}," Manage seva bookings, approvals, and scheduling ")],-1)),e("div",fE,[e("div",vE,[e("button",{onClick:Y[0]||(Y[0]=ue=>A.value="sevas"),class:se([A.value==="sevas"?"bg-white text-indigo-600 shadow-sm":"text-gray-500 hover:text-gray-700","px-4 py-2 text-sm font-medium rounded-md transition-all duration-200"])}," View Sevas ",2),e("button",{onClick:Y[1]||(Y[1]=ue=>A.value="bookings"),class:se([A.value==="bookings"?"bg-white text-indigo-600 shadow-sm":"text-gray-500 hover:text-gray-700","px-4 py-2 text-sm font-medium rounded-md transition-all duration-200"])}," Bookings ",2)]),e("button",{onClick:D,disabled:l.value,class:se(["inline-flex items-center px-4 py-2.5 text-white text-sm font-medium rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 transition-all duration-200 shadow-sm",l.value?"bg-gray-400 text-gray-200 cursor-not-allowed":"bg-indigo-600 hover:bg-indigo-700"]),title:l.value?"Monitoring users are not allowed to create sevas":"Create a new seva"},[...Y[29]||(Y[29]=[e("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),te(" Create Seva ",-1)])],10,hE)])])])]),N.value?(m(),g("div",yE,[e("div",xE,[e("div",bE,[Y[32]||(Y[32]=Ce('<div class="flex-shrink-0" data-v-428be7eb><svg class="h-6 w-6 text-red-500" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-428be7eb><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z" data-v-428be7eb></path></svg></div><div class="ml-3 flex-1" data-v-428be7eb><h3 class="text-lg font-semibold text-red-800" data-v-428be7eb>Access Restricted</h3><p class="mt-2 text-sm text-red-700" data-v-428be7eb> You are not allowed to create or modify sevas. Monitoring users have view-only access. Please contact your administrator if you need additional permissions. </p></div>',2)),e("button",{onClick:Y[2]||(Y[2]=ue=>N.value=!1),class:"flex-shrink-0 ml-4 text-red-500 hover:text-red-700"},[...Y[31]||(Y[31]=[e("svg",{class:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])])])])):J("",!0),A.value==="bookings"?(m(),g("div",wE,[e("div",kE,[e("div",_E,[e("div",$E,[Y[34]||(Y[34]=e("div",{class:"p-3 bg-indigo-100 rounded-lg"},[e("svg",{class:"w-6 h-6 text-indigo-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})])],-1)),e("div",SE,[Y[33]||(Y[33]=e("p",{class:"text-sm font-medium text-gray-500"},"Total Bookings",-1)),e("p",DE,h(v.value.length),1)])])]),e("div",CE,[e("div",TE,[Y[36]||(Y[36]=e("div",{class:"p-3 bg-green-100 rounded-lg"},[e("svg",{class:"w-6 h-6 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1)),e("div",EE,[Y[35]||(Y[35]=e("p",{class:"text-sm font-medium text-gray-500"},"Approved",-1)),e("p",AE,h(v.value.filter(ue=>k(ue)==="approved").length),1)])])]),e("div",IE,[e("div",ME,[Y[38]||(Y[38]=e("div",{class:"p-3 bg-yellow-100 rounded-lg"},[e("svg",{class:"w-6 h-6 text-yellow-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1)),e("div",RE,[Y[37]||(Y[37]=e("p",{class:"text-sm font-medium text-gray-500"},"Pending",-1)),e("p",PE,h(v.value.filter(ue=>k(ue)==="pending").length),1)])])]),e("div",NE,[e("div",jE,[Y[40]||(Y[40]=e("div",{class:"p-3 bg-red-100 rounded-lg"},[e("svg",{class:"w-6 h-6 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1)),e("div",LE,[Y[39]||(Y[39]=e("p",{class:"text-sm font-medium text-gray-500"},"Rejected",-1)),e("p",BE,h(v.value.filter(ue=>k(ue)==="rejected").length),1)])])])]),e("div",UE,[e("div",FE,[e("div",null,[Y[42]||(Y[42]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Search Bookings",-1)),e("div",VE,[ce(e("input",{"onUpdate:modelValue":Y[3]||(Y[3]=ue=>j.value=ue),type:"text",placeholder:"Search by name, devotee, or type...",class:"w-full pl-10 pr-4 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-all duration-200"},null,512),[[_e,j.value]]),Y[41]||(Y[41]=e("div",{class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},[e("svg",{class:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})])],-1))])]),e("div",null,[Y[44]||(Y[44]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Status",-1)),ce(e("select",{"onUpdate:modelValue":Y[4]||(Y[4]=ue=>$.value=ue),class:"w-full px-3 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-all duration-200"},[...Y[43]||(Y[43]=[e("option",{value:""},"All Status",-1),e("option",{value:"pending"},"Pending",-1),e("option",{value:"approved"},"Approved",-1),e("option",{value:"rejected"},"Rejected",-1)])],512),[[Re,$.value]])]),e("div",null,[Y[46]||(Y[46]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Date Range",-1)),ce(e("select",{"onUpdate:modelValue":Y[5]||(Y[5]=ue=>b.value=ue),class:"w-full px-3 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-all duration-200"},[...Y[45]||(Y[45]=[e("option",{value:""},"All Dates",-1),e("option",{value:"today"},"Today",-1),e("option",{value:"week"},"This Week",-1),e("option",{value:"month"},"This Month",-1)])],512),[[Re,b.value]])]),e("div",null,[Y[48]||(Y[48]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Seva Type",-1)),ce(e("select",{"onUpdate:modelValue":Y[6]||(Y[6]=ue=>y.value=ue),class:"w-full px-3 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-all duration-200"},[...Y[47]||(Y[47]=[Ce('<option value="" data-v-428be7eb>All Types</option><option value="daily" data-v-428be7eb>Daily Sevas</option><option value="special" data-v-428be7eb>Special Sevas</option><option value="festival" data-v-428be7eb>Festival Sevas</option><option value="personal" data-v-428be7eb>Personal Sevas</option>',5)])],512),[[Re,y.value]])])]),e("div",OE,[e("div",zE," Showing "+h(ie.value.length)+" of "+h(v.value.length)+" bookings ",1),e("button",{onClick:Se,class:"text-sm text-indigo-600 hover:text-indigo-700 font-medium transition-colors duration-200"}," Clear Filters ")])]),d.value?(m(),g("div",HE,[...Y[49]||(Y[49]=[e("svg",{class:"animate-spin h-8 w-8 text-indigo-600",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1)])])):(m(),g("div",qE,[ie.value.length>0?(m(),g("div",GE,[e("table",JE,[Y[55]||(Y[55]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Booking Details "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Devotee "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Date & Time "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Status "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Actions ")])],-1)),e("tbody",WE,[(m(!0),g(be,null,$e(ie.value,ue=>(m(),g("tr",{key:U(ue),class:"hover:bg-gray-50 transition-colors duration-150"},[e("td",YE,[e("div",KE,h(O(ue)),1),e("div",XE,h(ee(ue)),1),L(ue)?(m(),g("div",ZE,h(L(ue)),1)):J("",!0)]),e("td",QE,[e("div",eA,h(K(ue)),1),e("div",tA,h(H(ue)),1)]),e("td",oA,[e("div",sA,h(ge(ue)),1),e("div",nA,h(de(ue)),1)]),e("td",rA,[e("span",{class:se([T(k(ue)),"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium"])},[e("span",{class:se([V(k(ue)),"w-1.5 h-1.5 rounded-full mr-1.5"])},null,2),te(" "+h(k(ue).charAt(0).toUpperCase()+k(ue).slice(1)),1)],2)]),e("td",aA,[e("div",lA,[e("button",{onClick:Ae=>De(ue),class:"text-indigo-600 hover:text-indigo-900 transition-colors duration-150",title:"View Details"},[...Y[50]||(Y[50]=[e("svg",{class:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})],-1)])],8,iA),k(ue)==="pending"?(m(),g(be,{key:0},[l.value?(m(),g("button",{key:1,onClick:Y[7]||(Y[7]=Ae=>N.value=!0),class:"text-gray-400 cursor-not-allowed",title:"Monitoring users cannot approve bookings"},[...Y[52]||(Y[52]=[e("svg",{class:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})],-1)])])):(m(),g("button",{key:0,onClick:Ae=>W(ue),class:"text-green-600 hover:text-green-900 transition-colors duration-150",title:"Approve"},[...Y[51]||(Y[51]=[e("svg",{class:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})],-1)])],8,dA)),l.value?(m(),g("button",{key:3,onClick:Y[8]||(Y[8]=Ae=>N.value=!0),class:"text-gray-400 cursor-not-allowed",title:"Monitoring users cannot reject bookings"},[...Y[54]||(Y[54]=[e("svg",{class:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])):(m(),g("button",{key:2,onClick:Ae=>re(ue),class:"text-red-600 hover:text-red-900 transition-colors duration-150",title:"Reject"},[...Y[53]||(Y[53]=[e("svg",{class:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])],8,uA))],64)):J("",!0)])])]))),128))])])])):J("",!0),ie.value.length===0?(m(),g("div",cA,[Y[57]||(Y[57]=e("svg",{class:"mx-auto h-12 w-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})],-1)),Y[58]||(Y[58]=e("h3",{class:"mt-2 text-sm font-medium text-gray-900"},"No bookings found",-1)),Y[59]||(Y[59]=e("p",{class:"mt-1 text-sm text-gray-500"},"Get started by creating a new seva.",-1)),l.value?J("",!0):(m(),g("div",pA,[e("button",{onClick:D,class:"inline-flex items-center px-4 py-2.5 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 transition-all duration-200 shadow-sm"},[...Y[56]||(Y[56]=[e("svg",{class:"h-4 w-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),te(" Add New Seva ",-1)])])]))])):J("",!0)]))])):J("",!0),A.value==="sevas"?(m(),g("div",mA,[e("div",gA,[e("div",fA,[e("div",vA,[Y[61]||(Y[61]=e("div",{class:"p-3 bg-purple-100 rounded-lg"},[e("svg",{class:"w-6 h-6 text-purple-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 11H5m14-5a2 2 0 00-2-2H7a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2V6z"})])],-1)),e("div",hA,[Y[60]||(Y[60]=e("p",{class:"text-sm font-medium text-gray-500"},"Total Sevas",-1)),e("p",yA,h(I.value.length),1)])])]),e("div",xA,[e("div",bA,[Y[63]||(Y[63]=e("div",{class:"p-3 bg-green-100 rounded-lg"},[e("svg",{class:"w-6 h-6 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1)),e("div",wA,[Y[62]||(Y[62]=e("p",{class:"text-sm font-medium text-gray-500"},"Active Sevas",-1)),e("p",kA,h(I.value.filter(ue=>ue.is_active||ue.status==="active").length),1)])])]),e("div",_A,[e("div",$A,[Y[65]||(Y[65]=e("div",{class:"p-3 bg-blue-100 rounded-lg"},[e("svg",{class:"w-6 h-6 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"})])],-1)),e("div",SA,[Y[64]||(Y[64]=e("p",{class:"text-sm font-medium text-gray-500"},"Daily Sevas",-1)),e("p",DA,h(I.value.filter(ue=>(ue.seva_type||ue.type)==="daily").length),1)])])]),e("div",CA,[e("div",TA,[Y[67]||(Y[67]=e("div",{class:"p-3 bg-yellow-100 rounded-lg"},[e("svg",{class:"w-6 h-6 text-yellow-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11.049 2.927c.3-.921 1.603-.921 1.902 0l1.519 4.674a1 1 0 00.95.69h4.915c.969 0 1.371 1.24.588 1.81l-3.976 2.888a1 1 0 00-.363 1.118l1.518 4.674c.3.922-.755 1.688-1.538 1.118l-3.976-2.888a1 1 0 00-1.176 0l-3.976 2.888c-.783.57-1.838-.197-1.538-1.118l1.518-4.674a1 1 0 00-.363-1.118l-3.976-2.888c-.784-.57-.38-1.81.588-1.81h4.914a1 1 0 00.951-.69l1.519-4.674z"})])],-1)),e("div",EA,[Y[66]||(Y[66]=e("p",{class:"text-sm font-medium text-gray-500"},"Special Sevas",-1)),e("p",AA,h(I.value.filter(ue=>(ue.seva_type||ue.type)==="special").length),1)])])])]),e("div",IA,[e("div",MA,[e("div",null,[Y[69]||(Y[69]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Search Sevas",-1)),e("div",RA,[ce(e("input",{"onUpdate:modelValue":Y[9]||(Y[9]=ue=>E.value=ue),type:"text",placeholder:"Search by name or description...",class:"w-full pl-10 pr-4 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-all duration-200"},null,512),[[_e,E.value]]),Y[68]||(Y[68]=e("div",{class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},[e("svg",{class:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})])],-1))])]),e("div",null,[Y[71]||(Y[71]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Seva Type",-1)),ce(e("select",{"onUpdate:modelValue":Y[10]||(Y[10]=ue=>R.value=ue),class:"w-full px-3 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-all duration-200"},[...Y[70]||(Y[70]=[Ce('<option value="" data-v-428be7eb>All Types</option><option value="daily" data-v-428be7eb>Daily</option><option value="special" data-v-428be7eb>Special</option><option value="festival" data-v-428be7eb>Festival</option><option value="personal" data-v-428be7eb>Personal</option>',5)])],512),[[Re,R.value]])]),e("div",null,[Y[73]||(Y[73]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Status",-1)),ce(e("select",{"onUpdate:modelValue":Y[11]||(Y[11]=ue=>M.value=ue),class:"w-full px-3 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-all duration-200"},[...Y[72]||(Y[72]=[e("option",{value:""},"All Status",-1),e("option",{value:"active"},"Active",-1),e("option",{value:"inactive"},"Inactive",-1)])],512),[[Re,M.value]])])]),e("div",PA,[e("div",NA,"Showing "+h(me.value.length)+" of "+h(I.value.length)+" sevas",1),e("button",{onClick:Ee,class:"text-sm text-indigo-600 hover:text-indigo-700 font-medium transition-colors duration-200"},"Clear Filters")])]),F.value?(m(),g("div",jA,[...Y[74]||(Y[74]=[e("svg",{class:"animate-spin h-8 w-8 text-indigo-600",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1)])])):(m(),g("div",LA,[me.value.length>0?(m(),g("div",BA,[e("table",UA,[Y[79]||(Y[79]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Seva Details"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Type & Price"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Schedule"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Status"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Actions")])],-1)),e("tbody",FA,[(m(!0),g(be,null,$e(me.value,ue=>(m(),g("tr",{key:ue.id||ue.ID,class:"hover:bg-gray-50 transition-colors duration-150"},[e("td",VA,[e("div",OA,h(ue.name||ue.Name),1),e("div",zA,h(ue.description||ue.Description||"No description"),1)]),e("td",HA,[e("div",qA,[e("span",GA,h((ue.seva_type||ue.type||"Unknown").charAt(0).toUpperCase()+(ue.seva_type||ue.type||"Unknown").slice(1)),1)]),e("div",JA,""+h(ue.price||"0"),1)]),e("td",WA,[e("div",YA,h(S(ue.date)),1),e("div",KA,h(ue.start_time&&ue.end_time?`${P(ue.start_time)} - ${P(ue.end_time)}`:"No time set"),1),ue.duration?(m(),g("div",XA,"Duration: "+h(ue.duration)+"min",1)):J("",!0)]),e("td",ZA,[e("span",{class:se([ue.is_active||ue.status==="active"?"bg-green-100 text-green-800":"bg-red-100 text-red-800","inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium"])},[e("span",{class:se([ue.is_active||ue.status==="active"?"bg-green-400":"bg-red-400","w-1.5 h-1.5 rounded-full mr-1.5"])},null,2),te(" "+h(ue.is_active||ue.status==="active"?"Active":"Inactive"),1)],2)]),e("td",QA,[e("div",eI,[l.value?(m(),g("button",{key:1,onClick:Y[12]||(Y[12]=Ae=>N.value=!0),class:"text-gray-400 cursor-not-allowed",title:"Monitoring users cannot edit sevas"},[...Y[76]||(Y[76]=[e("svg",{class:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})],-1)])])):(m(),g("button",{key:0,onClick:Ae=>ne(ue),class:"text-blue-600 hover:text-blue-900 transition-colors duration-150",title:"Edit Seva"},[...Y[75]||(Y[75]=[e("svg",{class:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})],-1)])],8,tI)),l.value?(m(),g("button",{key:3,onClick:Y[13]||(Y[13]=Ae=>N.value=!0),class:"text-gray-400 cursor-not-allowed",title:"Monitoring users cannot delete sevas"},[...Y[78]||(Y[78]=[e("svg",{class:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)])])):(m(),g("button",{key:2,onClick:Ae=>fe(ue),class:"text-red-600 hover:text-red-900 transition-colors duration-150",title:"Delete Seva"},[...Y[77]||(Y[77]=[e("svg",{class:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)])],8,oI))])])]))),128))])])])):(m(),g("div",sI,[...Y[80]||(Y[80]=[e("svg",{class:"mx-auto h-12 w-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 11H5m14-5a2 2 0 00-2-2H7a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2V6z"})],-1),e("h3",{class:"mt-2 text-sm font-medium text-gray-900"},"No sevas found",-1),e("p",{class:"mt-1 text-sm text-gray-500"},"Get started by creating a new seva.",-1)])]))]))])):J("",!0),C.value?(m(),g("div",nI,[e("div",rI,[e("div",aI,[Y[82]||(Y[82]=e("div",{class:"flex items-center justify-center w-12 h-12 mx-auto mb-4 bg-red-100 rounded-full"},[e("svg",{class:"w-6 h-6 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.082 16.5c-.77.833.192 2.5 1.732 2.5z"})])],-1)),Y[83]||(Y[83]=e("h3",{class:"text-lg font-medium text-gray-900 text-center mb-2"},"Delete Seva",-1)),e("p",lI,' Are you sure you want to delete "'+h(C.value.name||C.value.Name)+'"? This action cannot be undone. ',1),e("div",iI,[e("button",{onClick:Y[14]||(Y[14]=ue=>C.value=null),class:"flex-1 px-4 py-2.5 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-all duration-200"},"Cancel"),e("button",{onClick:we,disabled:i.value,class:"flex-1 px-4 py-2.5 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-all duration-200 shadow-sm"},[i.value?(m(),g("span",uI,[...Y[81]||(Y[81]=[e("svg",{class:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),te(" Deleting... ",-1)])])):(m(),g("span",cI,"Delete"))],8,dI)])])])])):J("",!0),c.value||u.value?(m(),g("div",pI,[e("div",mI,[e("div",gI,[e("h2",fI,h(u.value?"Edit Seva":"Create New Seva"),1),e("button",{onClick:he,class:"p-2 hover:bg-gray-100 rounded-lg transition-colors duration-200"},[...Y[84]||(Y[84]=[e("svg",{class:"w-5 h-5 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),e("div",vI,[e("div",hI,[e("div",yI,[Y[90]||(Y[90]=e("h3",{class:"text-md font-semibold text-gray-700 mb-3"},"Basic Details",-1)),e("div",xI,[e("div",null,[Y[85]||(Y[85]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Seva Name*",-1)),ce(e("input",{"onUpdate:modelValue":Y[15]||(Y[15]=ue=>ke.value.name=ue),type:"text",class:"w-full px-3 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-all duration-200",placeholder:"Enter seva name"},null,512),[[_e,ke.value.name]])]),e("div",null,[Y[87]||(Y[87]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Seva Type*",-1)),ce(e("select",{"onUpdate:modelValue":Y[16]||(Y[16]=ue=>ke.value.type=ue),class:"w-full px-3 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-all duration-200"},[...Y[86]||(Y[86]=[Ce('<option value="" disabled data-v-428be7eb>Select Seva Type</option><option value="daily" data-v-428be7eb>Daily Seva</option><option value="special" data-v-428be7eb>Special Seva</option><option value="festival" data-v-428be7eb>Festival Seva</option><option value="personal" data-v-428be7eb>Personal Seva</option>',5)])],512),[[Re,ke.value.type]])]),e("div",null,[Y[88]||(Y[88]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Description*",-1)),ce(e("textarea",{"onUpdate:modelValue":Y[17]||(Y[17]=ue=>ke.value.description=ue),rows:"3",class:"w-full px-3 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-all duration-200",placeholder:"Add any additional details about this seva"},null,512),[[_e,ke.value.description]])]),e("div",null,[Y[89]||(Y[89]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Price ()*",-1)),ce(e("input",{"onUpdate:modelValue":Y[18]||(Y[18]=ue=>ke.value.price=ue),type:"number",min:"0",class:"w-full px-3 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-all duration-200",placeholder:"Enter amount in "},null,512),[[_e,ke.value.price]])])])]),e("div",bI,[Y[96]||(Y[96]=e("h3",{class:"text-md font-semibold text-gray-700 mb-3"},"Scheduling",-1)),e("div",wI,[e("div",null,[Y[91]||(Y[91]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Seva Date*",-1)),ce(e("input",{"onUpdate:modelValue":Y[19]||(Y[19]=ue=>ke.value.date=ue),type:"date",class:"w-full px-3 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-all duration-200"},null,512),[[_e,ke.value.date]])]),e("div",kI,[e("div",null,[Y[92]||(Y[92]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Start Time",-1)),ce(e("input",{"onUpdate:modelValue":Y[20]||(Y[20]=ue=>ke.value.startTime=ue),type:"time",class:"w-full px-3 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-all duration-200"},null,512),[[_e,ke.value.startTime]])]),e("div",null,[Y[93]||(Y[93]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"End Time",-1)),ce(e("input",{"onUpdate:modelValue":Y[21]||(Y[21]=ue=>ke.value.endTime=ue),type:"time",class:"w-full px-3 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-all duration-200"},null,512),[[_e,ke.value.endTime]])])]),e("div",null,[Y[94]||(Y[94]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Duration (minutes)",-1)),ce(e("input",{"onUpdate:modelValue":Y[22]||(Y[22]=ue=>ke.value.duration=ue),type:"number",min:"1",class:"w-full px-3 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-all duration-200",placeholder:"e.g. 30, 60, 120"},null,512),[[_e,ke.value.duration]])]),e("div",null,[Y[95]||(Y[95]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Maximum Bookings Per Day",-1)),ce(e("input",{"onUpdate:modelValue":Y[23]||(Y[23]=ue=>ke.value.max_bookings_per_day=ue),type:"number",min:"1",class:"w-full px-3 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-all duration-200",placeholder:"Enter maximum slots available per day"},null,512),[[_e,ke.value.max_bookings_per_day]])])])])]),e("div",_I,[e("button",{type:"button",onClick:he,class:"px-4 py-2.5 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-all duration-200"}," Cancel "),e("button",{type:"button",onClick:ve,disabled:i.value,class:"px-4 py-2.5 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-all duration-200 shadow-sm"},[i.value?(m(),g("span",SI,[...Y[97]||(Y[97]=[e("svg",{class:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),te(" Processing... ",-1)])])):(m(),g("span",DI,h(u.value?"Update Seva":"Create Seva"),1))],8,$I)])])])])):J("",!0),p.value?(m(),g("div",CI,[e("div",TI,[e("div",EI,[Y[99]||(Y[99]=e("h2",{class:"text-xl font-bold text-gray-900"},"Booking Details",-1)),e("button",{onClick:Y[24]||(Y[24]=ue=>p.value=null),class:"p-2 hover:bg-gray-100 rounded-lg transition-colors duration-200"},[...Y[98]||(Y[98]=[e("svg",{class:"w-5 h-5 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),e("div",AI,[e("div",II,[e("div",MI,[e("h3",RI,h(O(p.value)),1),e("span",{class:se([T(k(p.value)),"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium"])},[e("span",{class:se([V(k(p.value)),"w-1.5 h-1.5 rounded-full mr-1.5"])},null,2),te(" "+h(k(p.value).charAt(0).toUpperCase()+k(p.value).slice(1)),1)],2)]),e("div",PI,[e("div",null,[Y[100]||(Y[100]=e("p",{class:"text-sm font-medium text-gray-500"},"Seva Type",-1)),e("p",NI,h(ee(p.value)),1)]),e("div",null,[Y[101]||(Y[101]=e("p",{class:"text-sm font-medium text-gray-500"},"Devotee",-1)),e("p",jI,h(K(p.value)),1)]),e("div",null,[Y[102]||(Y[102]=e("p",{class:"text-sm font-medium text-gray-500"},"Contact",-1)),e("p",LI,h(H(p.value)),1)]),e("div",null,[Y[103]||(Y[103]=e("p",{class:"text-sm font-medium text-gray-500"},"Date",-1)),e("p",BI,h(ge(p.value)),1)]),e("div",null,[Y[104]||(Y[104]=e("p",{class:"text-sm font-medium text-gray-500"},"Time",-1)),e("p",UI,h(de(p.value)),1)]),e("div",null,[Y[105]||(Y[105]=e("p",{class:"text-sm font-medium text-gray-500"},"Booking ID",-1)),e("p",FI,h(U(p.value)||"Not available"),1)]),e("div",null,[Y[106]||(Y[106]=e("p",{class:"text-sm font-medium text-gray-500"},"Booking Date",-1)),e("p",VI,h(S(q(p.value))),1)])]),L(p.value)?(m(),g("div",OI,[Y[107]||(Y[107]=e("p",{class:"text-sm font-medium text-gray-500"},"Special Requests",-1)),e("p",zI,h(L(p.value)),1)])):J("",!0)]),k(p.value)==="pending"&&!l.value?(m(),g("div",HI,[e("button",{onClick:Y[25]||(Y[25]=ue=>re(p.value)),class:"px-4 py-2.5 bg-white border border-red-300 text-red-700 rounded-lg hover:bg-red-50 transition-all duration-200"}," Reject Booking "),e("button",{onClick:Y[26]||(Y[26]=ue=>W(p.value)),class:"px-4 py-2.5 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-all duration-200 shadow-sm"}," Approve Booking ")])):J("",!0),k(p.value)==="pending"&&l.value?(m(),g("div",qI,[...Y[108]||(Y[108]=[e("div",{class:"flex items-center"},[e("svg",{class:"h-5 w-5 text-yellow-600 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})]),e("p",{class:"text-sm text-yellow-800"},"You have view-only access. Contact an administrator to approve or reject this booking.")],-1)])])):J("",!0)])])])):J("",!0),(m(!0),g(be,null,$e(w.value,ue=>(m(),g("div",{key:ue.id,class:se(["fixed top-4 right-4 z-50 transform transition-all duration-300",ue.show?"translate-x-0 opacity-100":"translate-x-full opacity-0"])},[e("div",{class:se(["px-4 py-3 rounded-lg shadow-lg border-l-4 max-w-sm",{"bg-green-50 border-green-400 text-green-800":ue.type==="success","bg-red-50 border-red-400 text-red-800":ue.type==="error","bg-yellow-50 border-yellow-400 text-yellow-800":ue.type==="warning","bg-blue-50 border-blue-400 text-blue-800":ue.type==="info"}])},[e("div",GI,[e("div",JI,[ue.type==="success"?(m(),g("svg",WI,[...Y[109]||(Y[109]=[e("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z","clip-rule":"evenodd"},null,-1)])])):ue.type==="error"?(m(),g("svg",YI,[...Y[110]||(Y[110]=[e("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"},null,-1)])])):J("",!0)]),e("div",KI,[e("p",XI,h(ue.message),1)])])],2)],2))),128))]))}},QI=ot(ZI,[["__scopeId","data-v-428be7eb"]]),dr=Uo("donation",()=>{const t=B([]),o=B([]),s=B(!1),n=B(!1),r=B(null),l=B(null),a=B({currentPage:1,totalPages:1,totalItems:0,itemsPerPage:10,hasNext:!1,hasPrevious:!1}),d=B({dateRange:"all",minAmount:null,maxAmount:null,donationType:"all",paymentMethod:"all",devoteeId:null,status:"all",search:"",startDate:null,endDate:null}),i=B({totalAmount:0,averageAmount:0,thisMonth:0,totalDonors:0,completed:0,pending:0,failed:0,totalCount:0}),c=B([]),u=B({trends:[],byType:[],byMethod:[]}),p=_=>({id:_.id||_.ID||Math.random(),amount:_.amount||_.Amount||0,donation_type:_.donation_type||_.DonationType||_.type,donationType:_.donation_type||_.DonationType||_.type,type:_.donation_type||_.DonationType||_.type,method:_.method||_.Method||"online",paymentMethod:_.paymentMethod||_.method||_.Method||"online",status:_.status||_.Status||"pending",date:_.donated_at||_.DonatedAt||_.date||_.donation_date,donation_date:_.donated_at||_.DonatedAt||_.donation_date,donated_at:_.donated_at||_.DonatedAt,created_at:_.created_at||_.CreatedAt,updated_at:_.updated_at||_.UpdatedAt,note:_.note||_.Note||_.purpose||"",purpose:_.note||_.Note||_.purpose||"",userName:_.userName||_.UserName||_.username||"",userEmail:_.userEmail||_.UserEmail||_.email||"",donorName:_.donorName||_.DonorName||"",donorEmail:_.donorEmail||_.DonorEmail||"",entityName:_.entityName||_.EntityName||"",devotee_name:_.devotee_name||_.DevoteeName,payment_id:_.payment_id||_.PaymentID||_.paymentId,order_id:_.order_id||_.OrderID||_.transactionId,transactionId:_.transactionId||_.TransactionId||_.txn_id}),w=oe(()=>({total:i.value.totalCount||0,completed:i.value.completed||0,pending:i.value.pending||0,failed:i.value.failed||0,totalAmount:i.value.totalAmount||0,averageAmount:i.value.averageAmount||0,thisMonth:i.value.thisMonth||0,totalDonors:i.value.totalDonors||0})),f=oe(()=>o.value&&o.value.length>0?o.value.slice(0,5):t.value.filter(_=>["success","completed","SUCCESS","COMPLETED"].includes((_.status||"").toUpperCase())).sort((_,k)=>{const L=new Date(_.donated_at||_.date||_.donation_date||0);return new Date(k.donated_at||k.date||k.donation_date||0)-L}).slice(0,5));async function v(){var _;n.value=!0,r.value=null;try{const k=await ht.getMyRecentDonations();return Array.isArray(k)?o.value=k.map(p):o.value=[],o.value}catch(k){if(r.value=k.message||"Error fetching recent donations",o.value=[],((_=k.response)==null?void 0:_.status)!==404)throw k;return[]}finally{n.value=!1}}async function N(){var _;s.value=!0,r.value=null;try{const k=await ht.getMyDonations();let L=[];return Array.isArray(k)?L=k:k&&k.data&&Array.isArray(k.data)?(L=k.data,k.pagination?a.value={...a.value,...k.pagination}:k.total!==void 0&&(a.value.totalItems=k.total)):k&&k.success&&Array.isArray(k.data)?(L=k.data,a.value.totalItems=k.total||k.data.length):L=[],t.value=L.map(p),a.value.totalItems||(a.value.totalItems=t.value.length),t.value}catch(k){if(r.value=k.message||"Error fetching donations",t.value=[],((_=k.response)==null?void 0:_.status)!==404)throw k;return[]}finally{s.value=!1}}async function A(){s.value=!0,r.value=null;try{const _={page:a.value.currentPage,limit:a.value.itemsPerPage,...d.value.status!=="all"&&{status:d.value.status},...d.value.donationType!=="all"&&{type:d.value.donationType},...d.value.paymentMethod!=="all"&&{method:d.value.paymentMethod},...d.value.search&&{search:d.value.search.trim()},...d.value.minAmount!=null&&d.value.minAmount!==""&&{min:d.value.minAmount},...d.value.maxAmount!=null&&d.value.maxAmount!==""&&{max:d.value.maxAmount},...d.value.dateRange!=="all"&&{dateRange:d.value.dateRange},...d.value.startDate&&{from:d.value.startDate},...d.value.endDate&&{to:d.value.endDate},...d.value.devoteeId&&{devoteeId:d.value.devoteeId}},k=await ht.getDonations(_);if(k&&typeof k=="object"){const L=k.data||k.donations||[];t.value=L.map(p),a.value={currentPage:k.currentPage||k.page||a.value.currentPage,totalPages:k.totalPages||Math.ceil((k.total||0)/a.value.itemsPerPage),totalItems:k.total||k.totalItems||0,itemsPerPage:k.limit||k.perPage||a.value.itemsPerPage,hasNext:k.hasNext||a.value.currentPage<a.value.totalPages,hasPrevious:k.hasPrevious||a.value.currentPage>1},k.stats&&(i.value={...i.value,...k.stats})}return k}catch(_){throw r.value=_.message||"Error fetching donations",t.value=[],_}finally{s.value=!1}}async function F(){s.value=!0,r.value=null;try{const _=await ht.getDashboard(),k=_.data||_;return i.value={totalAmount:k.totalAmount||k.TotalAmount||0,averageAmount:k.averageAmount||k.AverageAmount||0,thisMonth:k.thisMonth||k.ThisMonth||0,totalDonors:k.totalDonors||k.TotalDonors||k.uniqueDonors||0,completed:k.completed||k.Completed||k.success||0,pending:k.pending||k.Pending||0,failed:k.failed||k.Failed||0,totalCount:k.totalCount||k.TotalCount||k.total||0},_}catch(_){throw r.value=_.message||"Error fetching dashboard",i.value={totalAmount:0,averageAmount:0,thisMonth:0,totalDonors:0,completed:0,pending:0,failed:0,totalCount:0},_}finally{s.value=!1}}async function I(_=5){try{const k=await ht.getTopDonors(_);return c.value=k.data||k||[],k}catch(k){throw r.value=k.message||"Error fetching top donors",c.value=[],k}}async function C(_=30){try{const k=await ht.getAnalytics(_);return u.value=k.data||k||{trends:[],byType:[],byMethod:[]},k}catch(k){throw r.value=k.message||"Error fetching analytics",u.value={trends:[],byType:[],byMethod:[]},k}}async function j(_){s.value=!0,r.value=null;try{return await ht.createDonation(_)}catch(k){throw r.value=k.message||"Error creating donation",k}finally{s.value=!1}}async function $(_){s.value=!0,r.value=null;try{const k=await ht.verifyDonation(_);return await Promise.all([N(),v()]),k}catch(k){throw r.value=k.message||"Error verifying donation",k}finally{s.value=!1}}async function y(_={},k="csv"){s.value=!0,r.value=null;try{return await ht.exportDonations(_,k)}catch(L){throw r.value=L.message||"Error exporting donations",L}finally{s.value=!1}}function b(_){d.value={...d.value,..._},_.page||(a.value.currentPage=1)}function E(_){a.value.currentPage=_}function R(_){a.value.itemsPerPage=_,a.value.currentPage=1}function M(){d.value={dateRange:"all",minAmount:null,maxAmount:null,donationType:"all",paymentMethod:"all",devoteeId:null,status:"all",search:"",startDate:null,endDate:null},a.value.currentPage=1}function G(_){l.value=_}function U(){t.value=[],o.value=[],s.value=!1,n.value=!1,r.value=null,l.value=null,M(),a.value={currentPage:1,totalPages:1,totalItems:0,itemsPerPage:10,hasNext:!1,hasPrevious:!1},i.value={totalAmount:0,averageAmount:0,thisMonth:0,totalDonors:0,completed:0,pending:0,failed:0,totalCount:0},c.value=[],u.value={trends:[],byType:[],byMethod:[]}}return{donations:t,recentDonationsData:o,loading:s,loadingRecent:n,error:r,selectedDonation:l,filters:d,pagination:a,dashboardData:i,topDonors:c,analytics:u,donationStats:w,recentDonations:f,fetchRecentDonations:v,fetchMyDonations:N,fetchDonations:A,fetchDashboard:F,fetchTopDonors:I,fetchAnalytics:C,createDonation:j,verifyDonation:$,exportDonations:y,setFilters:b,setPage:E,setItemsPerPage:R,resetFilters:M,setSelectedDonation:G,resetStore:U}}),eM={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-6"},tM={class:"bg-gradient-to-r from-blue-500 to-blue-600 rounded-xl p-6 text-white"},oM={class:"flex items-center justify-between"},sM={class:"text-3xl font-bold"},nM={class:"text-blue-200 text-xs mt-1"},rM={class:"bg-gradient-to-r from-green-500 to-green-600 rounded-xl p-6 text-white"},aM={class:"flex items-center justify-between"},lM={class:"text-3xl font-bold"},iM={class:"bg-gradient-to-r from-purple-500 to-purple-600 rounded-xl p-6 text-white"},dM={class:"flex items-center justify-between"},uM={class:"text-3xl font-bold"},cM={class:"bg-gradient-to-r from-orange-500 to-orange-600 rounded-xl p-6 text-white"},pM={class:"flex items-center justify-between"},mM={class:"text-3xl font-bold"},gM={class:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6"},fM={class:"bg-white rounded-lg shadow-sm border border-gray-200 p-4"},vM={class:"flex items-center"},hM={class:"ml-4"},yM={class:"text-2xl font-bold text-gray-900"},xM={class:"bg-white rounded-lg shadow-sm border border-gray-200 p-4"},bM={class:"flex items-center"},wM={class:"ml-4"},kM={class:"text-2xl font-bold text-gray-900"},_M={class:"bg-white rounded-lg shadow-sm border border-gray-200 p-4"},$M={class:"flex items-center"},SM={class:"ml-4"},DM={class:"text-2xl font-bold text-gray-900"},CM={__name:"DonationStats",setup(t){const o=dr(),s=oe(()=>o.donationStats),n=r=>new Intl.NumberFormat("en-IN").format(r||0);return(r,l)=>(m(),g(be,null,[e("div",eM,[e("div",tM,[e("div",oM,[e("div",null,[l[0]||(l[0]=e("p",{class:"text-blue-200 text-sm font-medium"},"Total Amount",-1)),e("p",sM,""+h(n(s.value.totalAmount||0)),1),e("p",nM,h(s.value.totalCount||0)+" donations",1)]),l[1]||(l[1]=e("div",{class:"bg-white bg-opacity-20 rounded-lg p-3"},[e("svg",{class:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3-.895 3-2-1.343-2-3-2z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 14v8"})])],-1))])]),e("div",rM,[e("div",aM,[e("div",null,[l[2]||(l[2]=e("p",{class:"text-green-200 text-sm font-medium"},"Average Donation",-1)),e("p",lM,""+h(n(s.value.averageAmount||0)),1),l[3]||(l[3]=e("p",{class:"text-green-200 text-xs mt-1"},"per transaction",-1))]),l[4]||(l[4]=e("div",{class:"bg-white bg-opacity-20 rounded-lg p-3"},[e("svg",{class:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2-2V7a2 2 0 012-2h2a2 2 0 002 2v2a2 2 0 002 2h2a2 2 0 002-2V7a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 00-2 2h-2a2 2 0 00-2 2v6"})])],-1))])]),e("div",iM,[e("div",dM,[e("div",null,[l[5]||(l[5]=e("p",{class:"text-purple-200 text-sm font-medium"},"This Month",-1)),e("p",uM,""+h(n(s.value.thisMonth||0)),1),l[6]||(l[6]=e("p",{class:"text-purple-200 text-xs mt-1"},"current month",-1))]),l[7]||(l[7]=e("div",{class:"bg-white bg-opacity-20 rounded-lg p-3"},[e("svg",{class:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2-2z"})])],-1))])]),e("div",cM,[e("div",pM,[e("div",null,[l[8]||(l[8]=e("p",{class:"text-orange-200 text-sm font-medium"},"Total Donors",-1)),e("p",mM,h(s.value.totalDonors||0),1),l[9]||(l[9]=e("p",{class:"text-orange-200 text-xs mt-1"},"unique devotees",-1))]),l[10]||(l[10]=e("div",{class:"bg-white bg-opacity-20 rounded-lg p-3"},[e("svg",{class:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-1.657-1.343-3-3-3H9c-1.657 0-3 1.343-3 3v2m4-10a3 3 0 11-6 0 3 3 0 016 0z"})])],-1))])])]),e("div",gM,[e("div",fM,[e("div",vM,[l[12]||(l[12]=e("div",{class:"flex-shrink-0"},[e("div",{class:"w-10 h-10 bg-green-100 rounded-full flex items-center justify-center"},[e("svg",{class:"w-6 h-6 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})])])],-1)),e("div",hM,[l[11]||(l[11]=e("p",{class:"text-sm font-medium text-gray-600"},"Successful",-1)),e("p",yM,h(s.value.completedCount||0),1)])])]),e("div",xM,[e("div",bM,[l[14]||(l[14]=e("div",{class:"flex-shrink-0"},[e("div",{class:"w-10 h-10 bg-yellow-100 rounded-full flex items-center justify-center"},[e("svg",{class:"w-6 h-6 text-yellow-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})])])],-1)),e("div",wM,[l[13]||(l[13]=e("p",{class:"text-sm font-medium text-gray-600"},"Pending",-1)),e("p",kM,h(s.value.pendingCount||0),1)])])]),e("div",_M,[e("div",$M,[l[16]||(l[16]=e("div",{class:"flex-shrink-0"},[e("div",{class:"w-10 h-10 bg-red-100 rounded-full flex items-center justify-center"},[e("svg",{class:"w-6 h-6 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})])])],-1)),e("div",SM,[l[15]||(l[15]=e("p",{class:"text-sm font-medium text-gray-600"},"Failed",-1)),e("p",DM,h(s.value.failedCount||0),1)])])])])],64))}},TM={class:"bg-white rounded-xl shadow-lg p-6"},EM={class:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-6"},AM={class:"flex flex-col sm:flex-row gap-3"},IM=["disabled"],MM={key:0,class:"animate-spin -ml-1 mr-3 h-5 w-5 text-white inline",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},RM={class:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6 p-4 bg-gray-50 rounded-lg"},PM={key:0,class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 mb-6"},NM={class:"bg-gradient-to-r from-indigo-500 to-indigo-600 rounded-xl p-4 text-white"},jM={class:"flex items-center justify-between"},LM={class:"text-2xl font-bold text-white"},BM={class:"bg-gradient-to-r from-green-500 to-green-600 rounded-xl p-4 text-white"},UM={class:"flex items-center justify-between"},FM={class:"text-2xl font-bold text-white"},VM={class:"bg-gradient-to-r from-amber-500 to-amber-600 rounded-xl p-4 text-white"},OM={class:"flex items-center justify-between"},zM={class:"text-2xl font-bold text-white"},HM={key:1,class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 mb-6"},qM={class:"mb-6"},GM={class:"relative"},JM={key:0,class:"absolute inset-y-0 right-0 flex items-center pr-3"},WM={class:"overflow-x-auto bg-white border border-gray-200 rounded-lg"},YM={class:"min-w-full divide-y divide-gray-200"},KM={key:0,class:"bg-white divide-y divide-gray-200"},XM={class:"px-6 py-4 whitespace-nowrap"},ZM={class:"text-sm font-medium text-gray-900"},QM={class:"text-sm text-gray-500 font-mono"},eR={class:"px-6 py-4"},tR={class:"flex items-center"},oR={class:"flex-shrink-0"},sR={class:"flex items-center justify-center w-10 h-10 rounded-full bg-gradient-to-r from-indigo-400 to-indigo-600 text-white"},nR={class:"text-sm font-medium"},rR={class:"ml-4"},aR={class:"text-sm font-medium text-gray-900"},lR={class:"text-sm text-gray-500"},iR={class:"px-6 py-4 whitespace-nowrap"},dR={class:"px-6 py-4 whitespace-nowrap"},uR={class:"text-sm text-gray-900 capitalize"},cR={class:"px-6 py-4 whitespace-nowrap"},pR={class:"text-lg font-bold text-gray-900"},mR={class:"px-6 py-4 whitespace-nowrap"},gR={key:1,class:"bg-white divide-y divide-gray-200"},fR={key:2},vR={class:"flex items-center justify-between mt-6 px-4 py-3 bg-gray-50 rounded-lg"},hR={class:"text-sm text-gray-700"},yR={class:"flex items-center space-x-2"},xR=["disabled"],bR={class:"flex space-x-1"},wR=["onClick"],kR=["disabled"],_R={__name:"DonationLedger",setup(t){const o=dr(),s=oe(()=>o.loading),n=oe(()=>o.donationStats),r=oe(()=>o.donations||[]),l=oe(()=>o.totalItems||0),a=oe(()=>o.totalPages||1),d=B(""),i=B(1),c=B(20),u=B({dateRange:"all",donationType:"all",status:"all",amountRange:"all"});function p(K,H=""){return typeof K=="string"&&K.trim()!==""?K.trim():H}function w(K){return p(K.fullName)||K.donor&&p(K.donor.name)||p(K.userName)||p(K.donorName)||p(K.user_name)||p(K.name)||"Anonymous"}function f(K){return p(K.emailAddress)||K.donor&&p(K.donor.email)||p(K.userEmail)||p(K.donorEmail)||p(K.user_email)||p(K.email)||"N/A"}function v(K){return p(K.transactionId)||p(K.order_id)||p(K.payment_id)||p(K.paymentId)||`DON-${K.id}`||"N/A"}function N(K){return K==="Anonymous"||K==="N/A"?"AN":K.trim().split(/\s+/).map(H=>H[0]).join("").toUpperCase().substring(0,2)}function A(K){return new Intl.NumberFormat("en-IN").format(Math.floor(K||0))}function F(K){if(!K)return"N/A";try{return new Date(K).toLocaleDateString("en-IN",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}catch{return"Invalid Date"}}function I(K){return K?K.charAt(0).toUpperCase()+K.slice(1).toLowerCase():"General"}function C(K){return K?{upi:"UPI",card:"Card",netbanking:"Net Banking",wallet:"Wallet",pending:"Pending"}[K.toLowerCase()]||K:"Online"}function j(K){if(!K)return"Pending";const H=K.toUpperCase();return{SUCCESS:"Success",PENDING:"Pending",FAILED:"Failed",CANCELLED:"Cancelled"}[H]||K.charAt(0).toUpperCase()+K.slice(1).toLowerCase()}function $(K){const H={general:"bg-gray-100 text-gray-800",seva:"bg-green-100 text-green-800",festival:"bg-yellow-100 text-yellow-800",construction:"bg-blue-100 text-blue-800",annadanam:"bg-orange-100 text-orange-800",education:"bg-purple-100 text-purple-800",maintenance:"bg-red-100 text-red-800",event:"bg-pink-100 text-pink-800"};return H[(K||"general").toLowerCase()]||H.general}function y(K){if(!K)return"bg-yellow-100 text-yellow-800";const H=K.toLowerCase(),O={success:"bg-green-100 text-green-800",pending:"bg-yellow-100 text-yellow-800",failed:"bg-red-100 text-red-800",cancelled:"bg-gray-100 text-gray-600"};return O[H]||O.pending}function b(K){if(!K)return"bg-yellow-400";const H=K.toLowerCase(),O={success:"bg-green-400",pending:"bg-yellow-400",failed:"bg-red-400",cancelled:"bg-gray-400"};return O[H]||O.pending}function E(){if(!r.value.length)return"0-0";const K=(i.value-1)*c.value+1,H=Math.min(i.value*c.value,l.value);return`${K}-${H}`}function R(){d.value=""}const M=oe(()=>r.value),G=oe(()=>{const K=[];let O=Math.max(1,i.value-Math.floor(2.5)),ee=Math.min(a.value,O+5-1);ee-O+1<5&&(O=Math.max(1,ee-5+1));for(let ge=O;ge<=ee;ge++)K.push(ge);return K}),U=K=>{K<1||K>a.value||K===i.value||(i.value=K,L())},_=()=>{const K={page:i.value,limit:c.value,search:d.value.trim()};if(u.value.dateRange!=="all"&&(K.dateRange=u.value.dateRange),u.value.donationType!=="all"&&(K.type=u.value.donationType),u.value.status!=="all"&&(K.status=u.value.status),u.value.amountRange!=="all"){const[H,O]=u.value.amountRange.split("-").map(ee=>ee.replace(/[+,]/g,""));H&&(K.min=parseInt(H)),O&&O!==""&&(K.max=parseInt(O))}return K};let k;Oe([u,d],()=>{clearTimeout(k),k=setTimeout(()=>{i.value=1,L()},300)},{deep:!0});const L=async()=>{try{const K=_();o.setFilters(K),await o.fetchDonations()}catch(K){console.error("Error fetching donations:",K)}},z=async()=>{try{await o.fetchDashboard()}catch(K){console.error("Error fetching donation dashboard:",K)}},q=async()=>{await Promise.all([z(),L()])};return Me(async()=>{await q()}),(K,H)=>{var O,ee,ge;return m(),g("div",TM,[e("div",EM,[H[8]||(H[8]=e("div",null,[e("h2",{class:"text-2xl font-bold text-gray-900 mb-2"},"Donation Ledger"),e("p",{class:"text-gray-600"},"Complete financial record")],-1)),e("div",AM,[e("button",{onClick:q,disabled:s.value,class:"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 disabled:opacity-50 transition-colors duration-200"},[s.value?(m(),g("svg",MM,[...H[7]||(H[7]=[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)])])):J("",!0),te(" "+h(s.value?"Refreshing...":"Refresh"),1)],8,IM)])]),e("div",RM,[e("div",null,[H[10]||(H[10]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Date Range",-1)),ce(e("select",{"onUpdate:modelValue":H[0]||(H[0]=de=>u.value.dateRange=de),class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"},[...H[9]||(H[9]=[Ce('<option value="all">All Time</option><option value="today">Today</option><option value="week">This Week</option><option value="month">This Month</option><option value="year">This Year</option><option value="custom">Custom Range</option>',6)])],512),[[Re,u.value.dateRange]])]),e("div",null,[H[12]||(H[12]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Donation Type",-1)),ce(e("select",{"onUpdate:modelValue":H[1]||(H[1]=de=>u.value.donationType=de),class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"},[...H[11]||(H[11]=[Ce('<option value="all">All Types</option><option value="general">General</option><option value="seva">Seva</option><option value="festival">Festival</option><option value="construction">Construction</option><option value="annadanam">Annadanam</option><option value="education">Education</option><option value="maintenance">Maintenance</option><option value="event">Event</option>',9)])],512),[[Re,u.value.donationType]])]),e("div",null,[H[14]||(H[14]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Payment Status",-1)),ce(e("select",{"onUpdate:modelValue":H[2]||(H[2]=de=>u.value.status=de),class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"},[...H[13]||(H[13]=[e("option",{value:"all"},"All Status",-1),e("option",{value:"success"},"Success",-1),e("option",{value:"pending"},"Pending",-1),e("option",{value:"failed"},"Failed",-1)])],512),[[Re,u.value.status]])]),e("div",null,[H[16]||(H[16]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Amount Range",-1)),ce(e("select",{"onUpdate:modelValue":H[3]||(H[3]=de=>u.value.amountRange=de),class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"},[...H[15]||(H[15]=[Ce('<option value="all">All Amounts</option><option value="0-500">0 - 500</option><option value="500-1000">500 - 1,000</option><option value="1000-5000">1,000 - 5,000</option><option value="5000+">5,000+</option>',5)])],512),[[Re,u.value.amountRange]])])]),s.value?(m(),g("div",HM,[(m(),g(be,null,$e(3,de=>e("div",{key:de,class:"animate-pulse bg-gray-200 h-20 rounded-xl"})),64))])):(m(),g("div",PM,[e("div",NM,[e("div",jM,[e("div",null,[H[17]||(H[17]=e("p",{class:"text-indigo-200 text-sm"},"Total Amount",-1)),e("p",LM,""+h(A(((O=n.value)==null?void 0:O.totalAmount)||0)),1)]),H[18]||(H[18]=e("div",{class:"bg-white bg-opacity-20 rounded-lg p-2"},[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3-.895 3-2-1.343-2-3-2z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8V7m0 1v8m0-8c1.657 0 3 .895 3 2s-1.343 2-3 2-3-.895-3-2 1.343-2 3-2z"})])],-1))])]),e("div",BM,[e("div",UM,[e("div",null,[H[19]||(H[19]=e("p",{class:"text-green-200 text-sm"},"Total Donors",-1)),e("p",FM,h(((ee=n.value)==null?void 0:ee.totalDonors)||0),1)]),H[20]||(H[20]=e("div",{class:"bg-white bg-opacity-20 rounded-lg p-2"},[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-3.313-2.687-6-6-6s-6 2.687-6 6v2m2-10a4 4 0 118 0 4 4 0 01-8 0z"})])],-1))])]),e("div",VM,[e("div",OM,[e("div",null,[H[21]||(H[21]=e("p",{class:"text-amber-200 text-sm"},"This Month",-1)),e("p",zM,""+h(A(((ge=n.value)==null?void 0:ge.thisMonth)||0)),1)]),H[22]||(H[22]=e("div",{class:"bg-white bg-opacity-20 rounded-lg p-2"},[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 002 2z"})])],-1))])])])),e("div",qM,[e("div",GM,[H[24]||(H[24]=e("div",{class:"absolute inset-y-0 left-0 flex items-center pl-3 pointer-events-none"},[e("svg",{class:"w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})])],-1)),ce(e("input",{"onUpdate:modelValue":H[4]||(H[4]=de=>d.value=de),type:"text",placeholder:"Search by donor name, email, transaction ID...",class:"w-full px-4 py-3 pl-10 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"},null,512),[[_e,d.value]]),d.value?(m(),g("div",JM,[e("button",{onClick:R,class:"text-gray-400 hover:text-gray-600"},[...H[23]||(H[23]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])])):J("",!0)])]),e("div",WM,[e("table",YM,[H[27]||(H[27]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Date & ID"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Donor Info"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Type"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Method"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Amount"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Status")])],-1)),!s.value&&M.value.length?(m(),g("tbody",KM,[(m(!0),g(be,null,$e(M.value,de=>(m(),g("tr",{key:de.id,class:"hover:bg-gray-50 transition-colors duration-200"},[e("td",XM,[e("div",ZM,h(F(de.donatedAt||de.created_at)),1),e("div",QM,"#"+h(v(de)),1)]),e("td",eR,[e("div",tR,[e("div",oR,[e("div",sR,[e("span",nR,h(N(w(de))),1)])]),e("div",rR,[e("div",aR,h(w(de)),1),e("div",lR,h(f(de)),1)])])]),e("td",iR,[e("span",{class:se([$(de.donationType||de.type),"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium capitalize"])},h(I(de.donationType||de.type)),3)]),e("td",dR,[e("div",uR,h(C(de.method||de.paymentMethod)),1)]),e("td",cR,[e("div",pR,""+h(A(de.amount||0)),1)]),e("td",mR,[e("span",{class:se([y(de.status),"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium capitalize"])},[e("span",{class:se(["w-1.5 h-1.5 rounded-full mr-1.5",b(de.status)])},null,2),te(" "+h(j(de.status)),1)],2)])]))),128))])):s.value?(m(),g("tbody",gR,[(m(),g(be,null,$e(5,de=>e("tr",{key:de,class:"animate-pulse"},[...H[25]||(H[25]=[e("td",{colspan:"6",class:"px-6 py-4"},[e("div",{class:"h-16 bg-gray-200 rounded"})],-1)])])),64))])):(m(),g("tbody",fR,[...H[26]||(H[26]=[e("tr",null,[e("td",{colspan:"6",class:"px-6 py-10 text-center"},[e("div",{class:"text-gray-400 text-lg mb-2"},[e("svg",{class:"mx-auto h-12 w-12",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})])]),e("p",{class:"text-gray-500 font-medium"},"No donations found"),e("p",{class:"text-gray-400 text-sm"},"Try adjusting your filters or search terms")])],-1)])]))])]),e("div",vR,[e("div",hR," Showing "+h(E())+" of "+h(l.value)+" donations ",1),e("div",yR,[e("button",{disabled:i.value===1||s.value,onClick:H[5]||(H[5]=de=>U(i.value-1)),class:"px-3 py-1 border border-gray-300 rounded-md text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors"}," Previous ",8,xR),e("div",bR,[(m(!0),g(be,null,$e(G.value,de=>(m(),g("button",{key:de,class:se([de===i.value?"bg-indigo-600 text-white":"bg-white text-gray-700 hover:bg-gray-50","px-3 py-1 border border-gray-300 rounded-md text-sm font-medium transition-colors"]),onClick:ie=>U(de)},h(de),11,wR))),128))]),e("button",{disabled:i.value===a.value||s.value,onClick:H[6]||(H[6]=de=>U(i.value+1)),class:"px-3 py-1 border border-gray-300 rounded-md text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors"}," Next ",8,kR)])])])}}},$R={name:"DonationForm",emits:["donation-submitted"],setup(t,{emit:o}){const s=B(!1),n=Je({donationType:"",amount:"",donorName:"",phone:"",email:"",address:"",paymentMethod:"online",purpose:"",needReceipt:!0,anonymous:!1}),r=Je({}),l=[100,500,1e3,2500,5e3,1e4],a=[{value:"online",label:"Online Payment",icon:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"},{value:"cash",label:"Cash",icon:"M17 9V7a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2m2 4h10a2 2 0 002-2v-6a2 2 0 00-2-2H9a2 2 0 00-2 2v6a2 2 0 002 2zm7-5a2 2 0 11-4 0 2 2 0 014 0z"},{value:"cheque",label:"Cheque",icon:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"}],d=()=>(Object.keys(r).forEach(u=>delete r[u]),n.donationType||(r.donationType="Please select a donation type"),(!n.amount||n.amount<=0)&&(r.amount="Please enter a valid amount"),n.donorName.trim()||(r.donorName="Please enter donor name"),Object.keys(r).length===0);return{form:n,errors:r,isSubmitting:s,quickAmounts:l,paymentMethods:a,submitDonation:async()=>{if(d()){s.value=!0;try{await new Promise(p=>setTimeout(p,2e3));const u={...n,id:Date.now(),date:new Date().toISOString(),status:"pending"};o("donation-submitted",u),console.log("Donation submitted:",u)}catch(u){console.error("Error submitting donation:",u)}finally{s.value=!1}}},resetForm:()=>{Object.keys(n).forEach(u=>{typeof n[u]=="boolean"?n[u]=u==="needReceipt":n[u]=""}),n.paymentMethod="online",Object.keys(r).forEach(u=>delete r[u])}}}},SR={class:"max-w-2xl mx-auto p-6"},DR={class:"bg-white rounded-2xl shadow-lg border border-gray-100 overflow-hidden"},CR={class:"space-y-2"},TR={key:0,class:"text-red-600 text-sm"},ER={class:"space-y-2"},AR={class:"relative"},IR={key:0,class:"text-red-600 text-sm"},MR={class:"flex flex-wrap gap-2 mt-3"},RR=["onClick"],PR={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},NR={class:"space-y-2"},jR={key:0,class:"text-red-600 text-sm"},LR={class:"space-y-2"},BR={class:"space-y-2"},UR={class:"space-y-2"},FR={class:"space-y-2"},VR={class:"grid grid-cols-1 md:grid-cols-3 gap-3"},OR=["onClick"],zR={class:"flex items-center justify-center mb-2"},HR={class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},qR=["d"],GR={class:"text-sm font-medium"},JR={class:"space-y-2"},WR={class:"space-y-3"},YR={class:"flex items-center space-x-3"},KR={class:"flex items-center space-x-3"},XR={class:"flex flex-col sm:flex-row gap-3 pt-4"},ZR=["disabled"],QR={key:0,class:"animate-spin w-5 h-5",fill:"none",viewBox:"0 0 24 24"};function eP(t,o,s,n,r,l){return m(),g("div",SR,[e("div",DR,[o[24]||(o[24]=Ce('<div class="bg-gradient-to-r from-indigo-600 to-indigo-800 px-6 py-4"><h2 class="text-xl font-semibold text-white flex items-center gap-2"><svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"></path></svg> Make a Donation </h2><p class="text-indigo-100 text-sm mt-1">Support the temple with your generous contribution</p></div>',1)),e("form",{onSubmit:o[10]||(o[10]=qe((...a)=>n.submitDonation&&n.submitDonation(...a),["prevent"])),class:"p-6 space-y-6"},[e("div",CR,[o[12]||(o[12]=e("label",{class:"block text-sm font-medium text-gray-900"},[te(" Donation Type "),e("span",{class:"text-red-500"},"*")],-1)),ce(e("select",{"onUpdate:modelValue":o[0]||(o[0]=a=>n.form.donationType=a),class:se(["w-full px-4 py-3 rounded-xl border transition-all duration-200","focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",n.errors.donationType?"border-red-300 bg-red-50":"border-gray-300 hover:border-gray-400"]),required:""},[...o[11]||(o[11]=[Ce('<option value="">Select donation type</option><option value="general">General Donation</option><option value="seva">Seva Donation</option><option value="festival">Festival Donation</option><option value="construction">Construction Fund</option><option value="annadanam">Annadanam</option><option value="education">Education Fund</option><option value="maintenance">Maintenance</option>',8)])],2),[[Re,n.form.donationType]]),n.errors.donationType?(m(),g("p",TR,h(n.errors.donationType),1)):J("",!0)]),e("div",ER,[o[14]||(o[14]=e("label",{class:"block text-sm font-medium text-gray-900"},[te(" Donation Amount "),e("span",{class:"text-red-500"},"*")],-1)),e("div",AR,[o[13]||(o[13]=e("span",{class:"absolute left-4 top-1/2 transform -translate-y-1/2 text-gray-500 font-medium"},"",-1)),ce(e("input",{"onUpdate:modelValue":o[1]||(o[1]=a=>n.form.amount=a),type:"number",min:"1",step:"0.01",placeholder:"Enter amount",class:se(["w-full pl-8 pr-4 py-3 rounded-xl border transition-all duration-200","focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",n.errors.amount?"border-red-300 bg-red-50":"border-gray-300 hover:border-gray-400"]),required:""},null,2),[[_e,n.form.amount]])]),n.errors.amount?(m(),g("p",IR,h(n.errors.amount),1)):J("",!0),e("div",MR,[(m(!0),g(be,null,$e(n.quickAmounts,a=>(m(),g("button",{key:a,type:"button",onClick:d=>n.form.amount=a,class:"px-4 py-2 text-sm rounded-lg border border-indigo-200 text-indigo-700 hover:bg-indigo-50 hover:border-indigo-300 transition-all duration-200"}," "+h(a),9,RR))),128))])]),e("div",PR,[e("div",NR,[o[15]||(o[15]=e("label",{class:"block text-sm font-medium text-gray-900"},[te(" Donor Name "),e("span",{class:"text-red-500"},"*")],-1)),ce(e("input",{"onUpdate:modelValue":o[2]||(o[2]=a=>n.form.donorName=a),type:"text",placeholder:"Enter donor name",class:se(["w-full px-4 py-3 rounded-xl border transition-all duration-200","focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",n.errors.donorName?"border-red-300 bg-red-50":"border-gray-300 hover:border-gray-400"]),required:""},null,2),[[_e,n.form.donorName]]),n.errors.donorName?(m(),g("p",jR,h(n.errors.donorName),1)):J("",!0)]),e("div",LR,[o[16]||(o[16]=e("label",{class:"block text-sm font-medium text-gray-900"}," Phone Number ",-1)),ce(e("input",{"onUpdate:modelValue":o[3]||(o[3]=a=>n.form.phone=a),type:"tel",placeholder:"Enter phone number",class:"w-full px-4 py-3 rounded-xl border border-gray-300 hover:border-gray-400 focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-all duration-200"},null,512),[[_e,n.form.phone]])])]),e("div",BR,[o[17]||(o[17]=e("label",{class:"block text-sm font-medium text-gray-900"}," Email Address ",-1)),ce(e("input",{"onUpdate:modelValue":o[4]||(o[4]=a=>n.form.email=a),type:"email",placeholder:"Enter email address",class:"w-full px-4 py-3 rounded-xl border border-gray-300 hover:border-gray-400 focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-all duration-200"},null,512),[[_e,n.form.email]])]),e("div",UR,[o[18]||(o[18]=e("label",{class:"block text-sm font-medium text-gray-900"}," Address ",-1)),ce(e("textarea",{"onUpdate:modelValue":o[5]||(o[5]=a=>n.form.address=a),rows:"3",placeholder:"Enter donor address",class:"w-full px-4 py-3 rounded-xl border border-gray-300 hover:border-gray-400 focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-all duration-200 resize-none"},null,512),[[_e,n.form.address]])]),e("div",FR,[o[19]||(o[19]=e("label",{class:"block text-sm font-medium text-gray-900"},[te(" Payment Method "),e("span",{class:"text-red-500"},"*")],-1)),e("div",VR,[(m(!0),g(be,null,$e(n.paymentMethods,a=>(m(),g("button",{key:a.value,type:"button",onClick:d=>n.form.paymentMethod=a.value,class:se(["p-4 rounded-xl border-2 transition-all duration-200 text-center",n.form.paymentMethod===a.value?"border-indigo-500 bg-indigo-50 text-indigo-700":"border-gray-200 hover:border-gray-300 text-gray-700"])},[e("div",zR,[(m(),g("svg",HR,[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:a.icon},null,8,qR)]))]),e("span",GR,h(a.label),1)],10,OR))),128))])]),e("div",JR,[o[20]||(o[20]=e("label",{class:"block text-sm font-medium text-gray-900"}," Purpose/Notes ",-1)),ce(e("textarea",{"onUpdate:modelValue":o[6]||(o[6]=a=>n.form.purpose=a),rows:"3",placeholder:"Enter purpose or special notes for this donation",class:"w-full px-4 py-3 rounded-xl border border-gray-300 hover:border-gray-400 focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-all duration-200 resize-none"},null,512),[[_e,n.form.purpose]])]),e("div",WR,[e("div",YR,[ce(e("input",{id:"needReceipt","onUpdate:modelValue":o[7]||(o[7]=a=>n.form.needReceipt=a),type:"checkbox",class:"w-4 h-4 text-indigo-600 border-gray-300 rounded focus:ring-indigo-500"},null,512),[[ct,n.form.needReceipt]]),o[21]||(o[21]=e("label",{for:"needReceipt",class:"text-sm text-gray-700"}," I need a donation receipt ",-1))]),e("div",KR,[ce(e("input",{id:"anonymous","onUpdate:modelValue":o[8]||(o[8]=a=>n.form.anonymous=a),type:"checkbox",class:"w-4 h-4 text-indigo-600 border-gray-300 rounded focus:ring-indigo-500"},null,512),[[ct,n.form.anonymous]]),o[22]||(o[22]=e("label",{for:"anonymous",class:"text-sm text-gray-700"}," Make this donation anonymous ",-1))])]),e("div",XR,[e("button",{type:"button",onClick:o[9]||(o[9]=(...a)=>n.resetForm&&n.resetForm(...a)),class:"flex-1 px-6 py-3 text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-xl font-medium transition-all duration-200"}," Reset Form "),e("button",{type:"submit",disabled:n.isSubmitting,class:se(["flex-1 px-6 py-3 rounded-xl font-medium transition-all duration-200","flex items-center justify-center gap-2",n.isSubmitting?"bg-gray-400 cursor-not-allowed text-white":"bg-gradient-to-r from-indigo-600 to-indigo-700 hover:from-indigo-700 hover:to-indigo-800 text-white shadow-lg hover:shadow-xl"])},[n.isSubmitting?(m(),g("svg",QR,[...o[23]||(o[23]=[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)])])):J("",!0),e("span",null,h(n.isSubmitting?"Processing...":"Proceed to Payment"),1)],10,ZR)])],32)])])}const tP=ot($R,[["render",eP]]),oP={class:"bg-white"},sP={class:"flex items-center justify-between mb-8"},nP={class:"flex space-x-3"},rP=["disabled"],aP={class:"bg-gradient-to-r from-indigo-600 to-indigo-800 px-8 py-6 text-white"},lP={class:"flex items-center justify-between"},iP={class:"text-2xl font-bold"},dP={class:"text-indigo-100 mt-1"},uP={class:"text-indigo-100"},cP={class:"text-right"},pP={class:"bg-white/20 rounded-lg px-4 py-2"},mP={class:"text-xl font-bold"},gP={class:"px-8 py-6"},fP={class:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-8"},vP={class:"space-y-4"},hP={class:"space-y-2"},yP={class:"font-medium text-gray-900"},xP={class:"font-medium text-gray-900"},bP={class:"font-medium text-gray-900"},wP={class:"font-medium text-gray-900"},kP={key:0},_P={class:"font-medium text-gray-900"},$P={class:"space-y-4"},SP={class:"space-y-2"},DP={class:"font-medium text-gray-900"},CP={class:"font-medium text-gray-900"},TP={key:0},EP={class:"font-medium text-gray-900"},AP={class:"font-medium text-gray-900"},IP={key:1},MP={class:"font-medium text-gray-900"},RP={class:"bg-gray-50 rounded-xl p-6 mb-8"},PP={class:"space-y-3"},NP={class:"flex justify-between items-center py-2 border-b border-gray-200"},jP={class:"font-medium text-gray-900"},LP={key:0,class:"flex justify-between items-center py-2 border-b border-gray-200"},BP={class:"font-medium text-gray-900"},UP={class:"flex justify-between items-center py-3 bg-indigo-50 rounded-lg px-4"},FP={class:"text-2xl font-bold text-indigo-900"},VP={class:"mt-4 pt-4 border-t border-gray-200"},OP={class:"font-medium text-gray-900 capitalize"},zP={class:"bg-green-50 border border-green-200 rounded-xl p-6 mb-8"},HP={class:"flex items-start space-x-3"},qP={class:"flex-1"},GP={class:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm"},JP={class:"text-green-900"},WP={class:"text-green-900"},YP={class:"text-center space-y-4 pt-6 border-t border-gray-200"},KP={class:"flex items-center justify-center space-x-2 text-xs text-gray-500"},XP={__name:"DonationReceipt",props:{donation:{type:Object,required:!0}},setup(t){const o=t,s=B(null),n=B(!1),r=B({receiptNumber:"RCT-2024-001234",templeName:"Sri Venkateswara Temple",templeAddress:"123 Temple Street, Bengaluru, Karnataka 560001",templePhone:"+91 80 1234 5678",templeEmail:"info@srivenkateswaratemple.org",donorName:"Rajesh Kumar",donorAddress:"456 MG Road, Bengaluru, Karnataka 560025",donorPhone:"+91 98765 43210",donorEmail:"rajesh.kumar@email.com",panNumber:"ABCDE1234F",donationDate:"2024-01-15",paymentMethod:"Online Transfer",transactionId:"TXN123456789",purpose:"General Donation",sevaName:"Abhishekam",amount:5e3,processingFee:50,totalAmount:5050,taxRegistrationNumber:"12A-0001234-56789",taxExemptionPercentage:50}),l=oe(()=>r.value.totalAmount===5050?"Five Thousand Fifty Only":"Amount in words conversion needed"),a=u=>new Date(u).toLocaleDateString("en-IN",{year:"numeric",month:"long",day:"numeric"}),d=u=>new Intl.NumberFormat("en-IN").format(u),i=async()=>{n.value=!0;try{await new Promise(p=>setTimeout(p,2e3));const u=document.createElement("a");u.href="#",u.download=`donation-receipt-${r.value.receiptNumber}.pdf`,u.click(),console.log("PDF download initiated")}catch(u){console.error("Error generating PDF:",u)}finally{n.value=!1}},c=()=>{window.print()};return Me(()=>{o.donation&&(r.value={...r.value,...o.donation})}),(u,p)=>(m(),g("div",oP,[e("div",sP,[p[2]||(p[2]=Ce('<div class="flex items-center space-x-4" data-v-14d10140><div class="w-16 h-16 bg-indigo-100 rounded-xl flex items-center justify-center" data-v-14d10140><svg class="w-8 h-8 text-indigo-600" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-14d10140><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" data-v-14d10140></path></svg></div><div data-v-14d10140><h2 class="text-2xl font-bold text-gray-900" data-v-14d10140>Donation Receipt</h2><p class="text-sm text-gray-600" data-v-14d10140>Tax-deductible donation receipt</p></div></div>',1)),e("div",nP,[e("button",{onClick:i,disabled:n.value,class:"inline-flex items-center px-4 py-2 border border-gray-300 rounded-lg text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200"},[p[0]||(p[0]=e("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1)),te(" "+h(n.value?"Generating...":"Download PDF"),1)],8,rP),e("button",{onClick:c,class:"inline-flex items-center px-4 py-2 bg-indigo-600 border border-transparent rounded-lg text-sm font-medium text-white hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 transition-all duration-200"},[...p[1]||(p[1]=[e("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 17h2a2 2 0 002-2v-4a2 2 0 00-2-2H5a2 2 0 00-2 2v4a2 2 0 002 2h2m2 4h6a2 2 0 002-2v-4a2 2 0 00-2-2H9a2 2 0 00-2 2v4a2 2 0 002 2zm8-12V5a2 2 0 00-2-2H9a2 2 0 00-2 2v4h10z"})],-1),te(" Print Receipt ",-1)])])])]),e("div",{ref_key:"receiptContent",ref:s,class:"max-w-2xl mx-auto bg-white border border-gray-200 rounded-2xl shadow-lg overflow-hidden"},[e("div",aP,[e("div",lP,[e("div",null,[e("h1",iP,h(r.value.templeName),1),e("p",dP,h(r.value.templeAddress),1),e("p",uP,"Phone: "+h(r.value.templePhone)+" | Email: "+h(r.value.templeEmail),1)]),e("div",cP,[e("div",pP,[p[3]||(p[3]=e("p",{class:"text-sm font-medium"},"Receipt #",-1)),e("p",mP,h(r.value.receiptNumber),1)])])])]),e("div",gP,[e("div",fP,[e("div",vP,[p[9]||(p[9]=e("h3",{class:"text-lg font-semibold text-gray-900 border-b border-gray-200 pb-2"},"Donor Information",-1)),e("div",hP,[e("div",null,[p[4]||(p[4]=e("p",{class:"text-sm text-gray-600"},"Full Name",-1)),e("p",yP,h(r.value.donorName),1)]),e("div",null,[p[5]||(p[5]=e("p",{class:"text-sm text-gray-600"},"Address",-1)),e("p",xP,h(r.value.donorAddress),1)]),e("div",null,[p[6]||(p[6]=e("p",{class:"text-sm text-gray-600"},"Phone",-1)),e("p",bP,h(r.value.donorPhone),1)]),e("div",null,[p[7]||(p[7]=e("p",{class:"text-sm text-gray-600"},"Email",-1)),e("p",wP,h(r.value.donorEmail),1)]),r.value.panNumber?(m(),g("div",kP,[p[8]||(p[8]=e("p",{class:"text-sm text-gray-600"},"PAN Number",-1)),e("p",_P,h(r.value.panNumber),1)])):J("",!0)])]),e("div",$P,[p[15]||(p[15]=e("h3",{class:"text-lg font-semibold text-gray-900 border-b border-gray-200 pb-2"},"Donation Details",-1)),e("div",SP,[e("div",null,[p[10]||(p[10]=e("p",{class:"text-sm text-gray-600"},"Date of Donation",-1)),e("p",DP,h(a(r.value.donationDate)),1)]),e("div",null,[p[11]||(p[11]=e("p",{class:"text-sm text-gray-600"},"Payment Method",-1)),e("p",CP,h(r.value.paymentMethod),1)]),r.value.transactionId?(m(),g("div",TP,[p[12]||(p[12]=e("p",{class:"text-sm text-gray-600"},"Transaction ID",-1)),e("p",EP,h(r.value.transactionId),1)])):J("",!0),e("div",null,[p[13]||(p[13]=e("p",{class:"text-sm text-gray-600"},"Purpose",-1)),e("p",AP,h(r.value.purpose),1)]),r.value.sevaName?(m(),g("div",IP,[p[14]||(p[14]=e("p",{class:"text-sm text-gray-600"},"Seva Name",-1)),e("p",MP,h(r.value.sevaName),1)])):J("",!0)])])]),e("div",RP,[p[20]||(p[20]=e("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Amount Details",-1)),e("div",PP,[e("div",NP,[p[16]||(p[16]=e("span",{class:"text-gray-600"},"Donation Amount",-1)),e("span",jP,""+h(d(r.value.amount)),1)]),r.value.processingFee?(m(),g("div",LP,[p[17]||(p[17]=e("span",{class:"text-gray-600"},"Processing Fee",-1)),e("span",BP,""+h(d(r.value.processingFee)),1)])):J("",!0),e("div",UP,[p[18]||(p[18]=e("span",{class:"text-lg font-semibold text-indigo-900"},"Total Amount",-1)),e("span",FP,""+h(d(r.value.totalAmount)),1)])]),e("div",VP,[p[19]||(p[19]=e("p",{class:"text-sm text-gray-600"},"Amount in Words:",-1)),e("p",OP,h(l.value),1)])]),e("div",zP,[e("div",HP,[p[25]||(p[25]=e("div",{class:"flex-shrink-0"},[e("svg",{class:"w-6 h-6 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1)),e("div",qP,[p[23]||(p[23]=e("h4",{class:"text-lg font-semibold text-green-900 mb-2"},"Tax Deduction Information",-1)),p[24]||(p[24]=e("p",{class:"text-sm text-green-800 mb-2"}," This donation is eligible for tax deduction under Section 80G of Income Tax Act, 1961. ",-1)),e("div",GP,[e("div",null,[p[21]||(p[21]=e("p",{class:"text-green-700 font-medium"},"80G Registration Number:",-1)),e("p",JP,h(r.value.taxRegistrationNumber),1)]),e("div",null,[p[22]||(p[22]=e("p",{class:"text-green-700 font-medium"},"Exemption Percentage:",-1)),e("p",WP,h(r.value.taxExemptionPercentage)+"% deduction available",1)])])])])]),e("div",YP,[p[28]||(p[28]=e("p",{class:"text-sm text-gray-600"}," This is a computer-generated receipt and does not require a signature. ",-1)),e("div",KP,[e("span",null,"Generated on "+h(a(new Date)),1),p[26]||(p[26]=e("span",null,"",-1)),p[27]||(p[27]=e("span",null,"Valid for tax purposes",-1))]),p[29]||(p[29]=Ce('<div class="flex justify-center mt-6" data-v-14d10140><div class="w-20 h-20 bg-gray-200 rounded-lg flex items-center justify-center" data-v-14d10140><svg class="w-8 h-8 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-14d10140><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v1m6 11h2m-6 0h-2v4m0-11v3m0 0h.01M12 12h4.01M16 20h4M4 12h4m12 0h.01M5 8h2a1 1 0 001-1V5a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1zm12 0h2a1 1 0 001-1V5a1 1 0 00-1-1h-2a1 1 0 00-1 1v2a1 1 0 001 1zM5 20h2a1 1 0 001-1v-2a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1z" data-v-14d10140></path></svg></div></div><p class="text-xs text-gray-500" data-v-14d10140>Scan for receipt verification</p>',2))])])],512)]))}},ZP=ot(XP,[["__scopeId","data-v-14d10140"]]),QP={name:"DonationManagement",components:{DonationStats:CM,DonationLedger:_R,DonationForm:tP,DonationReceipt:ZP},setup(){const t=tt(),{showToast:o}=Ue(),s=dr(),n=Ot(),r=B(null),l=B(!1),a=B(!1),d=B(!1),i=B("month"),c=B(""),u=B(null);oe(()=>t.params.id);const p=oe(()=>t.params.id||t.params.templeId||t.query.templeId||localStorage.getItem("current_entity_id")),w=async()=>{try{const C=n.getTempleById(p.value);if(C)r.value=C;else try{const j=await pe.get(`/entities/${p.value}`);j.data&&(r.value=j.data)}catch(j){console.error("Failed to fetch temple details:",j)}}catch(C){console.error("Error loading temple data:",C)}},f=C=>{a.value=!1,o("Donation added successfully","success"),I()},v=async()=>{try{l.value=!0,console.log("Starting donation fetch..."),await s.fetchDonations();const C=s.donations||[];console.log("Original store donations:",C),C.length>0&&s.$patch({donations:C})}catch(C){console.error("Error loading donations:",C),o("Failed to load donations","error")}finally{l.value=!1}},N=async()=>{try{await s.fetchDashboard()}catch(C){console.error("Error loading donation stats:",C)}},A=async C=>{try{l.value=!0,u.value=C,await ht.generateReceipt(C.id),d.value=!0}catch{o("Failed to generate receipt","error")}finally{l.value=!1}},F=async()=>{l.value=!0;try{await new Promise(C=>setTimeout(C,1500)),o("Report exported successfully","success")}catch{o("Failed to export report","error")}finally{l.value=!1}},I=()=>{v(),N()};return Me(async()=>{await Promise.all([w(),I()])}),{temple:r,loading:l,showAddDonationModal:a,showReceiptModal:d,selectedDateRange:i,searchQuery:c,selectedDonation:u,donations:oe(()=>s.donations),handleDonationSubmitted:f,handleReceiptDownload:A,exportReport:F,refreshData:I}}},eN={class:"min-h-screen bg-gray-50"},tN={class:"bg-white shadow-sm border-b border-gray-200"},oN={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},sN={class:"flex items-center justify-between h-16"},nN={class:"flex items-center space-x-4"},rN={class:"text-xl font-semibold text-gray-900"},aN={class:"text-sm text-gray-500"},lN={class:"px-6 pb-10"},iN={class:"bg-white rounded-2xl shadow-md border border-gray-200"},dN={class:"bg-white rounded-xl shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto"},uN={class:"flex items-center justify-between p-6 border-b border-gray-200"},cN={class:"p-6"},pN={class:"bg-white rounded-xl shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto"},mN={class:"flex items-center justify-between p-6 border-b border-gray-200"},gN={class:"p-6"},fN={key:2,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50","aria-live":"assertive","aria-busy":"true"};function vN(t,o,s,n,r,l){const a=Ze("DonationLedger"),d=Ze("DonationForm"),i=Ze("DonationReceipt");return m(),g("div",eN,[e("div",tN,[e("div",oN,[e("div",sN,[e("div",nN,[o[5]||(o[5]=e("div",{class:"h-10 w-10 rounded-full bg-indigo-100 flex items-center justify-center"},[e("svg",{class:"h-6 w-6 text-indigo-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-4m-2 0H3m2-16l9-9 9 9"})])],-1)),e("div",null,[e("h1",rN,h(n.temple?n.temple.name:"Loading..."),1),e("p",aN,h(n.temple?`${n.temple.city}, ${n.temple.state}`:"Loading location..."),1)])]),o[6]||(o[6]=e("div",{class:"flex items-center space-x-3"},[e("span",{class:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800"}," Active ")],-1))])])]),o[12]||(o[12]=Ce('<div class="bg-white border-b border-gray-200 px-6 py-4"><div class="flex items-center justify-between flex-wrap gap-y-2"><div><h1 class="text-2xl font-bold text-indigo-700">Donation Management</h1><p class="text-gray-600 mt-1">Track donations, generate receipts, and view financial reports</p></div><div class="flex flex-wrap items-center gap-3"></div></div></div>',1)),e("div",lN,[e("div",iN,[le(a,{donations:n.donations,"date-range":n.selectedDateRange,"search-query":n.searchQuery,onReceiptDownload:n.handleReceiptDownload},null,8,["donations","date-range","search-query","onReceiptDownload"])])]),n.showAddDonationModal?(m(),g("div",{key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",onClick:o[2]||(o[2]=qe(c=>n.showAddDonationModal=!1,["self"]))},[e("div",dN,[e("div",uN,[o[8]||(o[8]=e("h3",{class:"text-xl font-semibold text-gray-900"},"Add New Donation",-1)),e("button",{onClick:o[0]||(o[0]=c=>n.showAddDonationModal=!1),class:"text-gray-400 hover:text-gray-600 transition-colors duration-200","aria-label":"Close Add Donation Modal"},[...o[7]||(o[7]=[e("svg",{class:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),e("div",cN,[le(d,{onSubmitted:n.handleDonationSubmitted,onCancelled:o[1]||(o[1]=c=>n.showAddDonationModal=!1)},null,8,["onSubmitted"])])])])):J("",!0),n.showReceiptModal?(m(),g("div",{key:1,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",onClick:o[4]||(o[4]=qe(c=>n.showReceiptModal=!1,["self"]))},[e("div",pN,[e("div",mN,[o[10]||(o[10]=e("h3",{class:"text-xl font-semibold text-gray-900"},"Donation Receipt",-1)),e("button",{onClick:o[3]||(o[3]=c=>n.showReceiptModal=!1),class:"text-gray-400 hover:text-gray-600 transition-colors duration-200","aria-label":"Close Receipt Modal"},[...o[9]||(o[9]=[e("svg",{class:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),e("div",gN,[le(i,{donation:n.selectedDonation},null,8,["donation"])])])])):J("",!0),n.loading?(m(),g("div",fN,[...o[11]||(o[11]=[e("div",{class:"bg-white rounded-lg p-6 flex items-center space-x-3"},[e("div",{class:"animate-spin rounded-full h-6 w-6 border-2 border-indigo-600 border-t-transparent"}),e("span",{class:"text-gray-700"},"Processing...")],-1)])])):J("",!0)])}const hN=ot(QP,[["render",vN]]),ao={async getEvents(){try{const t=this.getCurrentEntityId(),o=localStorage.getItem("current_tenant_id");console.log(`Fetching events for entity ID: ${t}, tenant ID: ${o}`),t&&localStorage.setItem("current_entity_id",t);const s=t?`/events?entity_id=${t}`:"/events",n={Authorization:`Bearer ${localStorage.getItem("auth_token")}`,"Content-Type":"application/json"};console.log(`Requesting events from: ${s} with headers:`,n);const r=await Ie.get(s,{headers:n});return console.log("Events API response:",r.data),r.data||[]}catch(t){throw this.handleError(t)}},async getUpcomingEvents(){try{const t=this.getCurrentEntityId(),o=localStorage.getItem("current_tenant_id");console.log(`Fetching upcoming events for entity ID: ${t}, tenant ID: ${o}`);const s={Authorization:`Bearer ${localStorage.getItem("auth_token")}`,"Content-Type":"application/json"};o&&(s["X-Tenant-ID"]=o),t&&(s["X-Entity-ID"]=t);const n={headers:s},r=t?`/events/upcoming?entity_id=${t}`:"/events/upcoming";console.log(`Requesting upcoming events from: ${r} with headers:`,n);const l=await Ie.get(r,n);return console.log("Upcoming events API response:",l.data),l.data||[]}catch(t){throw console.error("Error fetching upcoming events:",t),this.handleError(t)}},async getEventById(t){try{return(await Fe.event.getById(t)).data}catch(o){throw this.handleError(o)}},async getEventStats(){try{const t=this.getCurrentEntityId(),o={};t&&(o["X-Entity-ID"]=t);const s=Object.keys(o).length>0?{headers:o}:{};return(await Fe.event.getStats(s)).data}catch(t){return console.error("Error fetching event stats:",t),{total_events:0,upcoming_events:0,this_month_events:0,total_rsvps:0}}},async createEvent(t){try{const o=this.getCurrentEntityId();if(!o)throw new Error("No entity ID available for event creation");const s={title:t.title,description:t.description||"",event_type:t.event_type||t.type||t.eventType,event_date:t.event_date||t.date,event_time:t.event_time||t.time,location:t.location||"Temple Premises",is_active:t.isActive!==void 0?t.isActive:!0,entity_id:parseInt(o)};console.log("Creating event with data:",s),console.log("Entity ID being used:",o);const n={};o&&(n["X-Entity-ID"]=o);const r=localStorage.getItem("current_tenant_id");r&&(n["X-Tenant-ID"]=r);const l=Object.keys(n).length>0?{headers:n}:{},a=await Fe.event.create(s,l);return console.log("Event created successfully:",a.data),a.data}catch(o){throw console.error("Error creating event:",o),this.handleError(o)}},async updateEvent(t,o){try{const s=this.getCurrentEntityId(),n={title:o.title,description:o.description||"",event_type:o.event_type||o.type||o.eventType,event_date:o.event_date||o.date,event_time:o.event_time||o.time,location:o.location||"Temple Premises",is_active:o.isActive!==void 0?o.isActive:!0},r={};s&&(r["X-Entity-ID"]=s);const l=Object.keys(r).length>0?{headers:r}:{};return console.log("Updating event with data:",n),{...(await Fe.event.update(t,n,l)).data,message:"Event updated successfully",wasUpdate:!0,id:t}}catch(s){throw this.handleError(s)}},async deleteEvent(t){try{const o=await Fe.event.delete(t);return{message:"Event deleted successfully",id:t}}catch(o){throw this.handleError(o)}},async registerForEvent(t){try{return(await Fe.event.createRSVP(t)).data}catch(o){throw this.handleError(o)}},async cancelRegistration(t){try{throw console.warn("CANCEL RSVP: No endpoint exists."),new Error("RSVP cancellation not supported by backend API")}catch(o){throw this.handleError(o)}},async getEventRSVPs(t){try{return(await Fe.event.getRSVPs(t)).data}catch(o){throw this.handleError(o)}},getCurrentEntityId(){const o=window.location.pathname.match(/\/entity\/(\d+)/);if(o){const r=o[1];return console.log(`Entity ID from URL path: ${r}`),r}const s=localStorage.getItem("current_entity_id");if(s&&s!=="null"&&s!=="undefined")return console.log(`Entity ID from localStorage: ${s}`),s;const n=this.getUserInfo();if(n)switch(n.role){case"templeadmin":if(n.entityId)return console.log(`TempleAdmin entity ID: ${n.entityId}`),n.entityId.toString();break;case"standarduser":case"monitoringuser":if(n.assignedTenantId)return console.log(`StandardUser/MonitoringUser assigned tenant ID: ${n.assignedTenantId}`),n.assignedTenantId.toString();break}return console.warn("Could not resolve entity ID"),null},getUserInfo(){try{const t=localStorage.getItem("auth_token");if(t){const o=JSON.parse(atob(t.split(".")[1]));return{userId:o.user_id,role:o.role||o.role_name,entityId:o.entity_id,assignedTenantId:o.assigned_tenant_id}}}catch(t){console.warn("Error parsing user info from token:",t)}return null},handleError(t){var o,s,n,r;return(s=(o=t.response)==null?void 0:o.data)!=null&&s.message?new Error(t.response.data.message):(r=(n=t.response)==null?void 0:n.data)!=null&&r.error?new Error(t.response.data.error):t.message?new Error(t.message):new Error("An unexpected error occurred")}},dp=Uo("event",()=>{const t=B([]),o=B(!1),s=B(null),n=B(null),r=B({category:"all",status:"all",dateRange:"upcoming",rsvpStatus:"all"}),l=B({total:0,upcoming:0,thisMonth:0,totalRSVPs:0}),a=Ue(),d=oe(()=>{const b=new Date().toISOString().split("T")[0];return t.value.filter(E=>new Date(E.event_date||E.eventDate)>=new Date(b)&&E.is_active!==!1).sort((E,R)=>{const M=new Date(E.event_date||E.eventDate),G=new Date(R.event_date||R.eventDate);return M-G})}),i=oe(()=>{const b=new Date().toISOString().split("T")[0];return t.value.filter(E=>new Date(E.event_date||E.eventDate)<new Date(b)).sort((E,R)=>{const M=new Date(E.event_date||E.eventDate);return new Date(R.event_date||R.eventDate)-M})}),c=oe(()=>{let b=t.value;return r.value.category!=="all"&&(b=b.filter(E=>(E.event_type||E.type||"").toLowerCase()===r.value.category.toLowerCase())),r.value.status!=="all"&&(b=b.filter(E=>{const R=new Date(E.event_date||E.eventDate),M=new Date;return r.value.status==="upcoming"?R>=M:r.value.status==="ongoing"?R.toDateString()===M.toDateString():r.value.status==="completed"?R<M:!0})),b.sort((E,R)=>{const M=new Date(E.event_date||E.eventDate),G=new Date(R.event_date||R.eventDate);return M-G})}),u=async()=>{o.value=!0,s.value=null;try{const b=await ao.getEvents();return t.value=$(b),await p(),t.value}catch(b){throw s.value=b.message||"Failed to fetch events",a.error(s.value),console.error("Error fetching events:",b),b}finally{o.value=!1}},p=async()=>{try{const b=await ao.getEventStats();return l.value={total:b.total_events||0,upcoming:b.upcoming_events||0,thisMonth:b.this_month_events||0,totalRSVPs:b.total_rsvps||0},l.value}catch(b){return console.error("Error fetching event stats:",b),l.value}},w=async()=>{o.value=!0,s.value=null;try{const b=await ao.getUpcomingEvents();return $(b)}catch(b){throw s.value=b.message||"Failed to fetch upcoming events",console.error("Error fetching upcoming events:",b),b}finally{o.value=!1}},f=async b=>{o.value=!0,s.value=null;try{const E=await ao.getEventById(b);return n.value=j(E),n.value}catch(E){throw s.value=E.message||`Failed to fetch event with ID: ${b}`,a.error(s.value),console.error("Error fetching event:",E),E}finally{o.value=!1}},v=async b=>{o.value=!0,s.value=null;try{const E=await ao.createEvent(b);return await u(),a.success("Event created successfully"),E}catch(E){throw s.value=E.message||"Failed to create event",a.error(s.value),console.error("Error creating event:",E),E}finally{o.value=!1}},N=async(b,E)=>{o.value=!0,s.value=null;try{const R=await ao.updateEvent(b,E),M=j(R),G=t.value.findIndex(U=>U.id===Number(b));return G!==-1&&(t.value[G]=M),a.success("Event updated successfully"),R}catch(R){throw s.value=R.message||`Failed to update event with ID: ${b}`,a.error(s.value),console.error("Error updating event:",R),R}finally{o.value=!1}},A=async b=>{o.value=!0,s.value=null;try{const E=await ao.deleteEvent(b);return t.value=t.value.filter(R=>R.id!==Number(b)),a.success("Event deleted successfully"),E}catch(E){throw s.value=E.message||`Failed to delete event with ID: ${b}`,a.error(s.value),console.error("Error deleting event:",E),E}finally{o.value=!1}},F=b=>{r.value={...r.value,...b}},I=()=>{r.value={category:"all",status:"all",dateRange:"upcoming",rsvpStatus:"all"}},C=b=>{n.value=b},j=b=>{if(!b)return null;let E="00:00";if(b.event_time)try{const _=b.event_time.toString().match(/(\d{1,2}):(\d{2}):(\d{2})/);if(_){const k=String(_[1]).padStart(2,"0"),L=String(_[2]).padStart(2,"0");E=`${k}:${L}`}else{const k=new Date(b.event_time);if(!isNaN(k.getTime())){const L=String(k.getHours()).padStart(2,"0"),z=String(k.getMinutes()).padStart(2,"0");E=`${L}:${z}`}}}catch(U){console.warn("Error parsing event_time:",b.event_time,U),E="00:00"}let R=b.event_date||b.eventDate||"",M="";R?M=`${R.toString().split("T")[0]}T${E}:00`:M=new Date().toISOString();let G="";try{const U=new Date(M);if(isNaN(U.getTime()))throw new Error("Invalid Date");G=U.toISOString()}catch(U){console.warn("Invalid date-time during normalizeEvent:",M,U),G=new Date().toISOString()}return{id:b.id,title:b.title,description:b.description,type:b.event_type||b.eventType||b.type,eventDate:G,eventTime:E,location:b.location,isActive:b.is_active!==!1,createdBy:b.created_by||b.createdBy,createdAt:b.created_at||b.createdAt,entityId:b.entity_id||b.entityId,currentAttendees:b.rsvp_count||b.RSVPCount||0,status:y(G)}},$=b=>!b||!Array.isArray(b)?[]:b.map(E=>j(E)),y=b=>{const E=new Date(b),R=new Date,M=new Date(R.getFullYear(),R.getMonth(),R.getDate()),G=new Date(E.getFullYear(),E.getMonth(),E.getDate());return G>M?"upcoming":G.getTime()===M.getTime()?"ongoing":"completed"};return{events:t,loading:o,error:s,selectedEvent:n,filters:r,eventStats:l,upcomingEvents:d,pastEvents:i,filteredEvents:c,fetchEvents:u,fetchUpcomingEvents:w,fetchEventById:f,fetchEventStats:p,createEvent:v,updateEvent:N,deleteEvent:A,setFilters:F,clearFilters:I,setSelectedEvent:C}}),yN={class:"bg-white rounded-xl shadow-lg"},xN={class:"px-6 py-4 border-b border-gray-200"},bN={class:"flex items-center justify-between"},wN={class:"text-xl font-bold text-gray-900"},kN={class:"text-sm text-gray-600 mt-1"},_N={key:0,class:"flex items-center space-x-2"},$N={class:"grid grid-cols-1 lg:grid-cols-2 gap-6"},SN={class:"lg:col-span-2"},DN={key:0,class:"mt-1 text-sm text-red-600"},CN={key:0,class:"mt-1 text-sm text-red-600"},TN={key:0},EN={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},AN={key:0,class:"mt-1 text-sm text-red-600"},IN={key:0,class:"mt-1 text-sm text-red-600"},MN={key:0,class:"mt-1 text-sm text-red-600"},RN={class:"flex items-center justify-end space-x-4 pt-6 border-t border-gray-200"},PN=["disabled"],NN={key:0,xmlns:"http://www.w3.org/2000/svg",class:"animate-spin h-4 w-4 mr-2",viewBox:"0 0 24 24"},jN={__name:"EventForm",props:{event:{type:Object,default:null},isEdit:{type:Boolean,default:!1}},emits:["submit","cancel"],setup(t,{emit:o}){const s=t,n=o,r=dp(),l=Ue(),a=B(!1),d=Je({}),i=Je({title:"",type:"",status:"upcoming",date:"",time:"",location:"",description:"",isActive:!0}),c=oe(()=>{var v;switch((v=i.status)==null?void 0:v.toLowerCase()){case"upcoming":return"bg-blue-100 text-blue-800";case"ongoing":return"bg-green-100 text-green-800";case"completed":return"bg-gray-100 text-gray-700";case"cancelled":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-700"}});Me(()=>{if(s.event){let f="",v="",N="";if(s.event.event_type?N=s.event.event_type:s.event.type?N=s.event.type:s.event.eventType&&(N=s.event.eventType),["festival","ceremony","spiritual","cultural","community","special"].includes(N.toLowerCase())||(N=""),s.event.eventDate)try{const C=new Date(s.event.eventDate);if(!isNaN(C.getTime())){f=C.toISOString().split("T")[0];const j=String(C.getHours()).padStart(2,"0"),$=String(C.getMinutes()).padStart(2,"0");v=`${j}:${$}`}}catch(C){console.warn("Invalid eventDate format:",s.event.eventDate,C)}if(!f&&s.event.event_date&&(f=s.event.event_date),!v&&s.event.event_time)if(typeof s.event.event_time=="string")if(/^\d{2}:\d{2}$/.test(s.event.event_time))v=s.event.event_time;else try{const C=new Date(s.event.event_time);if(!isNaN(C.getTime())){const j=String(C.getHours()).padStart(2,"0"),$=String(C.getMinutes()).padStart(2,"0");v=`${j}:${$}`}}catch{console.warn("Could not parse event_time as date:",s.event.event_time)}else try{const C=new Date(s.event.event_time);if(!isNaN(C.getTime())){const j=String(C.getHours()).padStart(2,"0"),$=String(C.getMinutes()).padStart(2,"0");v=`${j}:${$}`}}catch{console.warn("Invalid event_time object:",s.event.event_time)}v||(v="18:00");const F=s.event.isActive!==void 0?s.event.isActive:s.event.is_active!==void 0?s.event.is_active:!0;let I=s.event.status||"upcoming";I==="cancelled"&&(I="upcoming"),Object.assign(i,{title:s.event.title||"",type:N.toLowerCase(),status:I,date:f,time:v,location:s.event.location||"",description:s.event.description||"",isActive:F})}else{const f=new Date;f.setDate(f.getDate()+1),i.date=f.toISOString().split("T")[0],i.time="18:00"}});const u=()=>{Object.keys(d).forEach(v=>delete d[v]);let f=!0;if(i.title.trim()||(d.title="Event title is required",f=!1),i.type||(d.type="Event type is required",f=!1),!i.date)d.date="Event date is required",f=!1;else{const v=new Date(i.date),N=new Date;N.setHours(0,0,0,0),v<N&&!s.isEdit&&(d.date="Event date cannot be in the past",f=!1)}return i.time||(d.time="Event time is required",f=!1),i.description.trim()?i.description.length<10&&(d.description="Description is too short (minimum 10 characters)",f=!1):(d.description="Event description is required",f=!1),f},p=async()=>{var f;if(!u()){l.error("Please fix the form errors before submitting");return}a.value=!0;try{const v={title:i.title.trim(),description:i.description.trim(),event_type:i.type,event_date:i.date,event_time:i.time,location:i.location||"Temple Premises",is_active:i.status!=="cancelled"&&i.isActive};let N;s.isEdit&&((f=s.event)!=null&&f.id)?N=await r.updateEvent(s.event.id,v):N=await r.createEvent(v),n("submit",N)}catch(v){console.error("Error submitting form:",v),l.error("Failed to save event. Please try again.")}finally{a.value=!1}},w=()=>{n("cancel")};return(f,v)=>(m(),g("div",yN,[e("div",xN,[e("div",bN,[e("div",null,[e("h2",wN,h(t.isEdit?"Edit Event":"Create New Event"),1),e("p",kN,h(t.isEdit?"Update event details and notify devotees":"Plan a new temple event or festival"),1)]),t.isEdit?(m(),g("div",_N,[e("span",{class:se([c.value,"px-3 py-1 rounded-full text-xs font-medium"])},h(i.status),3)])):J("",!0)])]),e("form",{onSubmit:qe(p,["prevent"]),class:"p-6 space-y-6"},[e("div",$N,[e("div",SN,[v[6]||(v[6]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},[te(" Event Title "),e("span",{class:"text-red-500"},"*")],-1)),ce(e("input",{"onUpdate:modelValue":v[0]||(v[0]=N=>i.title=N),type:"text",placeholder:"e.g., Maha Shivaratri Celebration",class:se(["w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-colors",{"border-red-300 focus:ring-red-500 focus:border-red-500":d.title}])},null,2),[[_e,i.title]]),d.title?(m(),g("p",DN,h(d.title),1)):J("",!0)]),e("div",null,[v[8]||(v[8]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},[te(" Event Type "),e("span",{class:"text-red-500"},"*")],-1)),ce(e("select",{"onUpdate:modelValue":v[1]||(v[1]=N=>i.type=N),class:se(["w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-colors",{"border-red-300 focus:ring-red-500 focus:border-red-500":d.type}])},[...v[7]||(v[7]=[Ce('<option value="">Select Event Type</option><option value="festival">Festival</option><option value="ceremony">Ceremony</option><option value="spiritual">Spiritual Discourse</option><option value="cultural">Cultural Program</option><option value="community">Community Gathering</option><option value="special">Special Occasion</option>',7)])],2),[[Re,i.type]]),d.type?(m(),g("p",CN,h(d.type),1)):J("",!0)]),t.isEdit?(m(),g("div",TN)):J("",!0)]),e("div",EN,[e("div",null,[v[9]||(v[9]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},[te(" Event Date "),e("span",{class:"text-red-500"},"*")],-1)),ce(e("input",{"onUpdate:modelValue":v[2]||(v[2]=N=>i.date=N),type:"date",class:se(["w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-colors",{"border-red-300 focus:ring-red-500 focus:border-red-500":d.date}])},null,2),[[_e,i.date]]),d.date?(m(),g("p",AN,h(d.date),1)):J("",!0)]),e("div",null,[v[10]||(v[10]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},[te(" Event Time "),e("span",{class:"text-red-500"},"*")],-1)),ce(e("input",{"onUpdate:modelValue":v[3]||(v[3]=N=>i.time=N),type:"time",class:se(["w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-colors",{"border-red-300 focus:ring-red-500 focus:border-red-500":d.time}])},null,2),[[_e,i.time]]),d.time?(m(),g("p",IN,h(d.time),1)):J("",!0)])]),e("div",null,[v[11]||(v[11]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Location ",-1)),ce(e("input",{"onUpdate:modelValue":v[4]||(v[4]=N=>i.location=N),type:"text",placeholder:"e.g., Main Temple Hall, Garden Area",class:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-colors"},null,512),[[_e,i.location]]),v[12]||(v[12]=e("p",{class:"mt-1 text-sm text-gray-500"},'Leave empty to default to "Temple Premises"',-1))]),e("div",null,[v[13]||(v[13]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},[te(" Event Description "),e("span",{class:"text-red-500"},"*")],-1)),ce(e("textarea",{"onUpdate:modelValue":v[5]||(v[5]=N=>i.description=N),rows:"4",placeholder:"Describe the event, its significance, schedule, and what devotees can expect...",class:se(["w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-colors resize-none",{"border-red-300 focus:ring-red-500 focus:border-red-500":d.description}])},null,2),[[_e,i.description]]),d.description?(m(),g("p",MN,h(d.description),1)):J("",!0)]),e("div",RN,[e("button",{type:"button",onClick:w,class:"px-6 py-3 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors font-medium"}," Cancel "),e("button",{type:"submit",disabled:a.value,class:"px-6 py-3 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors font-medium flex items-center"},[a.value?(m(),g("svg",NN,[...v[14]||(v[14]=[e("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 22c5.523 0 10-4.477 10-10h-2c0 4.418-3.582 8-8 8s-8-3.582-8-8 3.582-8 8-8v2M18.59 13.51l2.12-2.12-2.12-2.12M5.41 8.59l-2.12 2.12 2.12 2.12"},null,-1)])])):J("",!0),te(" "+h(t.isEdit?"Update Event":"Create Event"),1)],8,PN)])],32)]))}},LN={class:"min-h-screen bg-gray-50"},BN={class:"bg-white shadow-sm border-b border-gray-200"},UN={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},FN={class:"flex items-center justify-between h-16"},VN={class:"flex items-center space-x-4"},ON={class:"text-xl font-semibold text-gray-900"},zN={class:"text-sm text-gray-500"},HN={class:"bg-white border-b border-gray-200"},qN={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},GN={class:"flex justify-between items-center py-6"},JN=["disabled","title"],WN={key:0,class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 pt-8"},YN={class:"bg-red-50 border-l-4 border-red-500 p-6 rounded-lg shadow-sm"},KN={class:"flex items-start"},XN={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},ZN={class:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8"},QN={class:"bg-white rounded-xl shadow-sm p-6 border border-gray-100"},ej={class:"flex items-center"},tj={class:"ml-4"},oj={class:"text-2xl font-bold text-gray-900"},sj={class:"bg-white rounded-xl shadow-sm p-6 border border-gray-100"},nj={class:"flex items-center"},rj={class:"ml-4"},aj={class:"text-2xl font-bold text-gray-900"},lj={class:"bg-white rounded-xl shadow-sm p-6 border border-gray-100"},ij={class:"flex items-center"},dj={class:"ml-4"},uj={class:"text-2xl font-bold text-gray-900"},cj={class:"bg-white rounded-xl shadow-sm p-6 border border-gray-100"},pj={class:"flex items-center"},mj={class:"ml-4"},gj={class:"text-2xl font-bold text-gray-900"},fj={class:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 mb-6"},vj={class:"flex bg-gray-100 rounded-lg p-1"},hj={class:"flex flex-wrap gap-3"},yj={class:"relative"},xj={key:0,class:"bg-white rounded-xl shadow-sm border border-gray-100 p-8 text-center"},bj={key:1,class:"bg-white rounded-xl shadow-sm border border-gray-100 p-12 text-center"},wj={class:"mt-1 text-gray-500"},kj={key:2,class:"bg-white rounded-xl shadow-sm border border-gray-100"},_j={key:0,class:"overflow-x-auto"},$j={class:"min-w-full divide-y divide-gray-200"},Sj={class:"bg-white divide-y divide-gray-200"},Dj={class:"px-6 py-4 whitespace-nowrap"},Cj={class:"flex items-center"},Tj={class:"flex-shrink-0 h-10 w-10 rounded-full bg-gray-200 overflow-hidden"},Ej=["src"],Aj={key:1,class:"h-full w-full flex items-center justify-center bg-indigo-100 text-indigo-700"},Ij={class:"ml-4"},Mj={class:"text-sm font-medium text-gray-900"},Rj={class:"text-sm text-gray-500"},Pj={class:"px-6 py-4 whitespace-nowrap"},Nj={class:"text-sm text-gray-900"},jj={class:"text-sm text-gray-500"},Lj={class:"px-6 py-4 whitespace-nowrap"},Bj={class:"px-6 py-4 whitespace-nowrap"},Uj={class:"px-6 py-4 whitespace-nowrap text-sm font-medium"},Fj={class:"flex space-x-3"},Vj=["onClick"],Oj=["onClick"],zj={class:"p-6"},Hj={class:"text-gray-600 mb-6"},qj={class:"flex justify-end space-x-3"},Gj=["disabled"],Jj={key:0,class:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",fill:"none",viewBox:"0 0 24 24"},Wj={__name:"EventManagement",setup(t){const o=tt(),s=dp(),n=Ot(),r=We(),l=Ue(),a=oe(()=>o.params.id||o.params.templeId||o.query.templeId||localStorage.getItem("current_entity_id")),d=B(null),i=B(!1),c=B("list"),u=B(!1),p=B(!1),w=B(!1),f=B(!1),v=B(null),N=B(null),A=B(""),F=B(!1),I=B({status:"all",category:"all"}),C=oe(()=>{var ke,Q;const ie=(r.userRole||"").toLowerCase(),me=((ke=r.user)==null?void 0:ke.roleId)||((Q=r.user)==null?void 0:Q.role_id);return ie==="monitoring_user"||ie==="monitoringuser"||me===6||me==="6"}),j=oe(()=>s.eventStats),$=oe(()=>s.events),y=oe(()=>{let ie=$.value;if(A.value.trim()){const me=A.value.toLowerCase();ie=ie.filter(ke=>{var Q,D,x;return((Q=ke.title)==null?void 0:Q.toLowerCase().includes(me))||((D=ke.description)==null?void 0:D.toLowerCase().includes(me))||((x=ke.location)==null?void 0:x.toLowerCase().includes(me))})}return I.value.status!=="all"&&(ie=ie.filter(me=>H(me).toLowerCase()===I.value.status)),I.value.category!=="all"&&(ie=ie.filter(me=>{var ke;return((ke=me.type||me.eventType)==null?void 0:ke.toLowerCase())===I.value.category.toLowerCase()})),ie}),b=()=>{if(C.value){F.value=!0,l.error("You are not allowed to create events. Monitoring users have view-only access."),setTimeout(()=>{F.value=!1},5e3);return}u.value=!0},E=async()=>{try{const ie=n.getTempleById(a.value);if(ie)d.value=ie;else try{const me=await pe.get(`/entities/${a.value}`);me.data&&(d.value=me.data)}catch(me){console.error("Failed to fetch temple details:",me)}}catch(ie){console.error("Error loading temple data:",ie)}};Me(async()=>{try{i.value=!0,await Promise.all([E(),s.fetchEvents(a.value)])}catch(ie){console.error("Error loading events:",ie),l.error("Failed to load events")}finally{i.value=!1}});const R=()=>{s.setFilters(I.value)},M=()=>{R()},G=ie=>{if(C.value){F.value=!0,l.error("You are not allowed to edit events. Monitoring users have view-only access.");return}v.value={...ie},p.value=!0},U=ie=>{if(C.value){F.value=!0,l.error("You are not allowed to delete events. Monitoring users have view-only access.");return}N.value=ie,w.value=!0},_=async()=>{if(N.value){f.value=!0;try{await s.deleteEvent(N.value.id),await s.fetchEvents(a.value),l.success("Event deleted successfully"),w.value=!1,N.value=null}catch{l.error("Failed to delete event")}finally{f.value=!1}}},k=async ie=>{L(),setTimeout(async()=>{try{await s.fetchEvents(a.value)}catch(me){console.error("Error refreshing events:",me)}},500)},L=()=>{u.value=!1,p.value=!1,v.value=null},z=ie=>ie?new Date(ie).toLocaleDateString("en-IN",{year:"numeric",month:"short",day:"numeric"}):"",q=ie=>ie?ie.replace(/_/g," ").replace(/-/g," ").replace(/\w\S*/g,me=>me.charAt(0).toUpperCase()+me.substr(1).toLowerCase()):"Other",K=ie=>({festival:"bg-purple-100 text-purple-800",ceremony:"bg-blue-100 text-blue-800",spiritual:"bg-yellow-100 text-yellow-800",cultural:"bg-pink-100 text-pink-800",community:"bg-green-100 text-green-800",special:"bg-red-100 text-red-800"})[ie==null?void 0:ie.toLowerCase()]||"bg-gray-100 text-gray-800",H=ie=>{if(!ie||!ie.eventDate)return"Unknown";const me=new Date,ke=new Date(ie.eventDate),Q=ie.endDate?new Date(ie.endDate):new Date(ke);return Q.setHours(23,59,59),me<ke?"Upcoming":me>=ke&&me<=Q?"Ongoing":"Completed"},O=ie=>{const me=H(ie);return{Upcoming:"bg-blue-100 text-blue-800",Ongoing:"bg-green-100 text-green-800",Completed:"bg-gray-100 text-gray-700"}[me]||"bg-gray-100 text-gray-800"},ee=ie=>{if(ie.eventTime&&ie.eventTime!=="00:00"){const[me,ke]=ie.eventTime.split(":"),Q=parseInt(me),D=Q===0?12:Q>12?Q-12:Q,x=Q>=12?"PM":"AM";return`${D}:${ke} ${x}`}return ge(ie.eventDate)},ge=ie=>ie?new Date(ie).toLocaleTimeString("en-IN",{hour:"2-digit",minute:"2-digit",hour12:!0}):"",de=(ie,me)=>ie?ie.length>me?ie.slice(0,me)+"...":ie:"";return(ie,me)=>{var ke;return m(),g("div",LN,[e("div",BN,[e("div",UN,[e("div",FN,[e("div",VN,[me[11]||(me[11]=e("div",{class:"h-10 w-10 rounded-full bg-indigo-100 flex items-center justify-center"},[e("svg",{class:"h-6 w-6 text-indigo-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-4m-2 0H3m2-16l9-9 9 9"})])],-1)),e("div",null,[e("h1",ON,h(d.value?d.value.name:"Loading..."),1),e("p",zN,h(d.value?`${d.value.city}, ${d.value.state}`:"Loading location..."),1)])]),me[12]||(me[12]=e("div",{class:"flex items-center space-x-3"},[e("span",{class:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800"}," Active ")],-1))])])]),e("div",HN,[e("div",qN,[e("div",GN,[me[14]||(me[14]=e("div",null,[e("h2",{class:"text-2xl font-bold text-gray-900"},"Events & Festivals"),e("p",{class:"mt-1 text-sm text-gray-600"}," Create and manage temple events, festivals, and special occasions ")],-1)),e("button",{onClick:b,disabled:C.value,class:se(["inline-flex items-center px-4 py-2 border border-transparent rounded-lg shadow-sm text-sm font-medium transition-colors duration-200",C.value?"bg-gray-400 text-gray-200 cursor-not-allowed":"text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500"]),title:C.value?"Monitoring users are not allowed to create events":"Create a new event"},[...me[13]||(me[13]=[e("svg",{class:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})],-1),te(" Create Event ",-1)])],10,JN)])])]),F.value?(m(),g("div",WN,[e("div",YN,[e("div",KN,[me[16]||(me[16]=Ce('<div class="flex-shrink-0"><svg class="h-6 w-6 text-red-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"></path></svg></div><div class="ml-3 flex-1"><h3 class="text-lg font-semibold text-red-800">Access Restricted</h3><p class="mt-2 text-sm text-red-700"> You are not allowed to create or modify events. Monitoring users have view-only access. Please contact your administrator if you need additional permissions. </p></div>',2)),e("button",{onClick:me[0]||(me[0]=Q=>F.value=!1),class:"flex-shrink-0 ml-4 text-red-500 hover:text-red-700"},[...me[15]||(me[15]=[e("svg",{class:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])])])])):J("",!0),e("div",XN,[e("div",ZN,[e("div",QN,[e("div",ej,[me[18]||(me[18]=e("div",{class:"flex-shrink-0"},[e("div",{class:"w-8 h-8 bg-indigo-100 rounded-lg flex items-center justify-center"},[e("svg",{class:"w-5 h-5 text-indigo-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})])])],-1)),e("div",tj,[me[17]||(me[17]=e("p",{class:"text-sm font-medium text-gray-600"},"Total Events",-1)),e("p",oj,h(j.value.total||0),1)])])]),e("div",sj,[e("div",nj,[me[20]||(me[20]=e("div",{class:"flex-shrink-0"},[e("div",{class:"w-8 h-8 bg-green-100 rounded-lg flex items-center justify-center"},[e("svg",{class:"w-5 h-5 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})])])],-1)),e("div",rj,[me[19]||(me[19]=e("p",{class:"text-sm font-medium text-gray-600"},"This Month",-1)),e("p",aj,h(j.value.thisMonth||0),1)])])]),e("div",lj,[e("div",ij,[me[22]||(me[22]=e("div",{class:"flex-shrink-0"},[e("div",{class:"w-8 h-8 bg-purple-100 rounded-lg flex items-center justify-center"},[e("svg",{class:"w-5 h-5 text-purple-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})])])],-1)),e("div",dj,[me[21]||(me[21]=e("p",{class:"text-sm font-medium text-gray-600"},"Upcoming",-1)),e("p",uj,h(j.value.upcoming||0),1)])])]),e("div",cj,[e("div",pj,[me[24]||(me[24]=e("div",{class:"flex-shrink-0"},[e("div",{class:"w-8 h-8 bg-orange-100 rounded-lg flex items-center justify-center"},[e("svg",{class:"w-5 h-5 text-orange-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})])])],-1)),e("div",mj,[me[23]||(me[23]=e("p",{class:"text-sm font-medium text-gray-600"},"Completed",-1)),e("p",gj,h(j.value.completed||0),1)])])])]),e("div",fj,[e("div",vj,[e("button",{onClick:me[1]||(me[1]=Q=>c.value="list"),class:se(["px-4 py-2 text-sm font-medium rounded-md transition-all duration-200",c.value==="list"?"bg-white text-indigo-600 shadow-sm":"text-gray-600 hover:text-gray-900"])},[...me[25]||(me[25]=[e("svg",{class:"w-4 h-4 mr-2 inline",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 6h16M4 10h16M4 14h16M4 18h16"})],-1),te(" List View ",-1)])],2)]),e("div",hj,[ce(e("select",{"onUpdate:modelValue":me[2]||(me[2]=Q=>I.value.status=Q),class:"px-3 py-2 border border-gray-300 rounded-lg text-sm bg-white focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",onChange:R},[...me[26]||(me[26]=[e("option",{value:"all"},"All Status",-1),e("option",{value:"upcoming"},"Upcoming",-1),e("option",{value:"ongoing"},"Ongoing",-1),e("option",{value:"completed"},"Completed",-1)])],544),[[Re,I.value.status]]),ce(e("select",{"onUpdate:modelValue":me[3]||(me[3]=Q=>I.value.category=Q),class:"px-3 py-2 border border-gray-300 rounded-lg text-sm bg-white focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",onChange:R},[...me[27]||(me[27]=[Ce('<option value="all">All Categories</option><option value="festival">Festival</option><option value="ceremony">Ceremony</option><option value="spiritual">Spiritual Discourse</option><option value="cultural">Cultural Program</option><option value="community">Community Gathering</option>',6)])],544),[[Re,I.value.category]]),e("div",yj,[ce(e("input",{"onUpdate:modelValue":me[4]||(me[4]=Q=>A.value=Q),type:"text",placeholder:"Search events...",class:"pl-10 pr-4 py-2 border border-gray-300 rounded-lg text-sm bg-white focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 w-64",onInput:M},null,544),[[_e,A.value]]),me[28]||(me[28]=e("svg",{class:"w-4 h-4 text-gray-400 absolute left-3 top-1/2 transform -translate-y-1/2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})],-1))])])]),i.value?(m(),g("div",xj,[...me[29]||(me[29]=[e("svg",{class:"animate-spin h-10 w-10 mx-auto text-indigo-500",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),e("p",{class:"mt-4 text-gray-600"},"Loading events...",-1)])])):!i.value&&y.value.length===0?(m(),g("div",bj,[me[31]||(me[31]=e("svg",{class:"w-16 h-16 mx-auto text-gray-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})],-1)),me[32]||(me[32]=e("h3",{class:"mt-4 text-lg font-medium text-gray-900"},"No events found",-1)),e("p",wj,h(A.value||I.value.status!=="all"||I.value.category!=="all"?"Try adjusting your filters or search terms":"Create your first event to get started"),1),C.value?J("",!0):(m(),g("button",{key:0,onClick:b,class:"mt-6 inline-flex items-center px-4 py-2 border border-transparent rounded-lg shadow-sm text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700"},[...me[30]||(me[30]=[e("svg",{class:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})],-1),te(" Create Event ",-1)])]))])):(m(),g("div",kj,[c.value==="list"?(m(),g("div",_j,[e("table",$j,[me[34]||(me[34]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Event"),e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Date & Time"),e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Type"),e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Status"),e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Actions")])],-1)),e("tbody",Sj,[(m(!0),g(be,null,$e(y.value,Q=>(m(),g("tr",{key:Q.id},[e("td",Dj,[e("div",Cj,[e("div",Tj,[Q.imageURL?(m(),g("img",{key:0,src:Q.imageURL,class:"h-full w-full object-cover",alt:"Event"},null,8,Ej)):(m(),g("div",Aj,[...me[33]||(me[33]=[e("svg",{class:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})],-1)])]))]),e("div",Ij,[e("div",Mj,h(Q.title),1),e("div",Rj,h(de(Q.description,40)),1)])])]),e("td",Pj,[e("div",Nj,h(z(Q.eventDate)),1),e("div",jj,h(ee(Q)),1)]),e("td",Lj,[e("span",{class:se(["px-2 inline-flex text-xs leading-5 font-semibold rounded-full",K(Q.type)])},h(q(Q.type)),3)]),e("td",Bj,[e("span",{class:se(["px-2 inline-flex text-xs leading-5 font-semibold rounded-full",O(Q)])},h(H(Q)),3)]),e("td",Uj,[e("div",Fj,[C.value?(m(),g("button",{key:1,onClick:me[5]||(me[5]=D=>F.value=!0),class:"text-gray-400 cursor-not-allowed",title:"Monitoring users cannot edit events"}," Edit ")):(m(),g("button",{key:0,onClick:D=>G(Q),class:"text-indigo-600 hover:text-indigo-900 transition-colors"}," Edit ",8,Vj)),C.value?(m(),g("button",{key:3,onClick:me[6]||(me[6]=D=>F.value=!0),class:"text-gray-400 cursor-not-allowed",title:"Monitoring users cannot delete events"}," Delete ")):(m(),g("button",{key:2,onClick:D=>U(Q),class:"text-red-600 hover:text-red-900 transition-colors"}," Delete ",8,Oj))])])]))),128))])])])):J("",!0)]))]),u.value||p.value?(m(),g("div",{key:1,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",onClick:L},[e("div",{class:"bg-white rounded-xl shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",onClick:me[7]||(me[7]=qe(()=>{},["stop"]))},[le(jN,{event:v.value,"is-edit":p.value,onSubmit:k,onCancel:L},null,8,["event","is-edit"])])])):J("",!0),w.value?(m(),g("div",{key:2,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",onClick:me[10]||(me[10]=Q=>w.value=!1)},[e("div",{class:"bg-white rounded-xl shadow-xl max-w-lg w-full",onClick:me[9]||(me[9]=qe(()=>{},["stop"]))},[e("div",zj,[me[37]||(me[37]=e("h3",{class:"text-lg font-medium text-gray-900 mb-4"},"Confirm Delete",-1)),e("p",Hj,'Are you sure you want to delete the event "'+h((ke=N.value)==null?void 0:ke.title)+'"? This action cannot be undone.',1),e("div",qj,[e("button",{onClick:me[8]||(me[8]=Q=>w.value=!1),class:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200"}," Cancel "),e("button",{onClick:_,disabled:f.value,class:"px-4 py-2 text-sm font-medium text-white bg-red-600 rounded-lg hover:bg-red-700 disabled:opacity-50 flex items-center"},[f.value?(m(),g("svg",Jj,[...me[35]||(me[35]=[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)])])):J("",!0),me[36]||(me[36]=te(" Delete ",-1))],8,Gj)])])])])):J("",!0)])}}};/**
 * @license lucide-vue-next v0.516.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tu=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Yj=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(o,s,n)=>n?n.toUpperCase():s.toLowerCase()),Kj=t=>{const o=Yj(t);return o.charAt(0).toUpperCase()+o.slice(1)},Xj=(...t)=>t.filter((o,s,n)=>!!o&&o.trim()!==""&&n.indexOf(o)===s).join(" ").trim();/**
 * @license lucide-vue-next v0.516.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var xn={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":2,"stroke-linecap":"round","stroke-linejoin":"round"};/**
 * @license lucide-vue-next v0.516.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zj=({size:t,strokeWidth:o=2,absoluteStrokeWidth:s,color:n,iconNode:r,name:l,class:a,...d},{slots:i})=>qt("svg",{...xn,width:t||xn.width,height:t||xn.height,stroke:n||xn.stroke,"stroke-width":s?Number(o)*24/Number(t):o,class:Xj("lucide",...l?[`lucide-${Tu(Kj(l))}-icon`,`lucide-${Tu(l)}`]:["lucide-icon"]),...d},[...r.map(c=>qt(...c)),...i.default?[i.default()]:[]]);/**
 * @license lucide-vue-next v0.516.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yt=(t,o)=>(s,{slots:n})=>qt(Zj,{...s,iconNode:o,name:t},n);/**
 * @license lucide-vue-next v0.516.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ar=Yt("bell",[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]]);/**
 * @license lucide-vue-next v0.516.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ir=Yt("calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-vue-next v0.516.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qj=Yt("check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-vue-next v0.516.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eL=Yt("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-vue-next v0.516.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sa=Yt("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-vue-next v0.516.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Eu=Yt("clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-vue-next v0.516.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tL=Yt("file-text",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-vue-next v0.516.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Au=Yt("mail",[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]]);/**
 * @license lucide-vue-next v0.516.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Iu=Yt("map-pin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-vue-next v0.516.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oL=Yt("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]]);/**
 * @license lucide-vue-next v0.516.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sL=Yt("trash-2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-vue-next v0.516.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nL=Yt("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),rL={class:"bg-white rounded-xl shadow-lg p-6"},aL={class:"flex items-center justify-between mb-6"},lL={class:"flex flex-col md:flex-row gap-4 mb-6"},iL={class:"flex-1"},dL={class:"relative"},uL={key:0,class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},cL={class:"flex items-start justify-between mb-3"},pL={class:"flex-1"},mL={class:"font-semibold text-gray-900 mb-1"},gL={class:"flex items-center gap-2"},fL=["onClick"],vL=["onClick"],hL={class:"mb-3"},yL={class:"text-sm text-gray-600 line-clamp-3"},xL={class:"flex items-center justify-between text-xs text-gray-500"},bL={class:"flex gap-2 mt-3"},wL=["onClick"],kL=["onClick"],_L={key:1,class:"text-center py-12"},$L={class:"mt-6"},SL={key:2,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50"},DL={class:"bg-white rounded-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto"},CL={class:"p-6"},TL={class:"flex items-center justify-between mb-6"},EL={class:"text-lg font-semibold text-gray-900"},AL={class:"flex justify-end gap-3 pt-4"},IL={type:"submit",class:"px-4 py-2 bg-indigo-600 hover:bg-indigo-700 text-white rounded-lg transition-colors"},ML={key:3,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50"},RL={class:"bg-white rounded-xl max-w-lg w-full"},PL={class:"p-6"},NL={class:"flex items-center justify-between mb-4"},jL={class:"space-y-4"},LL={class:"text-gray-900"},BL={class:"bg-gray-50 rounded-lg p-4"},UL={class:"text-gray-900 whitespace-pre-wrap"},FL={class:"flex justify-end gap-3 mt-6"},VL={__name:"MessageTemplates",setup(t){var C;const o=B([]),s=B(""),n=B(""),r=B(!1),l=B(null),a=B(null),d=We();(C=d.user)==null||C.entityId;const i=et(),c=B({name:"",category:"",subject:"",content:""});B(["{devotee_name}","{temple_name}","{seva_name}","{event_name}","{date}","{time}","{amount}","{receipt_number}"]);const u=oe(()=>{let j=o.value||[];if(s.value){const $=s.value.toLowerCase();j=j.filter(y=>{var R,M;const b=((R=y.name)==null?void 0:R.toLowerCase())||"",E=((M=y.content)==null?void 0:M.toLowerCase())||"";return b.includes($)||E.includes($)})}return n.value&&(j=j.filter($=>$.category===n.value)),j}),p=j=>({seva:"bg-blue-100 text-blue-800",event:"bg-green-100 text-green-800",donation:"bg-yellow-100 text-yellow-800",general:"bg-gray-100 text-gray-800",festival:"bg-purple-100 text-purple-800"})[j]||"bg-gray-100 text-gray-800",w=j=>j?new Date(j).toLocaleDateString():"Never used",f=j=>{l.value=j,c.value={...j},r.value=!1},v=j=>{confirm("Are you sure you want to delete this template?")&&(o.value=o.value.filter($=>$.id!==j))},N=j=>{a.value={...j,content:j.content||j.body}},A=j=>{i.push({name:"MessageComposer",query:{subject:j.subject,content:j.content||j.body}}),a.value=null,r.value=!1,l.value=null},F=async()=>{var $,y;const j={name:c.value.name,subject:c.value.subject,body:c.value.content,category:c.value.category,userId:($=d.user)==null?void 0:$.id,entityId:(y=d.user)==null?void 0:y.entity_id};try{let b;l.value?console.warn("Edit functionality is not wired to backend yet"):b=await ta.createTemplate(j),b!=null&&b.success?(o.value.push(b.data),I()):alert((b==null?void 0:b.error)||"Something went wrong while saving the template.")}catch(b){console.error("Error saving template:",b),alert("Unexpected error occurred.")}},I=()=>{r.value=!1,l.value=null,c.value={name:"",category:"",subject:"",content:""}};return Me(async()=>{const j=await ta.getTemplates();j.success?o.value=j.data:console.error("Failed to load templates:",j.error)}),(j,$)=>(m(),g("div",rL,[e("div",aL,[$[12]||($[12]=e("div",null,[e("h2",{class:"text-2xl font-bold text-gray-900"},"Message Templates"),e("p",{class:"text-gray-600 mt-1"},"Create and manage reusable message templates")],-1)),e("button",{onClick:$[0]||($[0]=y=>r.value=!0),class:"bg-indigo-600 hover:bg-indigo-700 text-white px-4 py-2 rounded-lg font-medium transition-all duration-200 flex items-center gap-2"},[...$[11]||($[11]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),te(" Create Template ",-1)])])]),e("div",lL,[e("div",iL,[e("div",dL,[$[13]||($[13]=e("svg",{class:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})],-1)),ce(e("input",{"onUpdate:modelValue":$[1]||($[1]=y=>s.value=y),type:"text",placeholder:"Search templates...",class:"pl-10 pr-4 py-2 w-full border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-colors"},null,512),[[_e,s.value]])])]),ce(e("select",{"onUpdate:modelValue":$[2]||($[2]=y=>n.value=y),class:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-colors"},[...$[14]||($[14]=[Ce('<option value="">All Categories</option><option value="seva">Seva Notifications</option><option value="event">Event Announcements</option><option value="donation">Donation Receipts</option><option value="general">General Messages</option><option value="festival">Festival Greetings</option>',6)])],512),[[Re,n.value]])]),u.value.length>0?(m(),g("div",uL,[(m(!0),g(be,null,$e(u.value,y=>(m(),g("div",{key:y.id,class:"bg-gray-50 rounded-lg p-4 hover:shadow-md transition-all duration-200 border border-gray-200"},[e("div",cL,[e("div",pL,[e("h3",mL,h(y.name),1),e("span",{class:se([p(y.category),"px-2 py-1 rounded-full text-xs font-medium"])},h(y.category),3)]),e("div",gL,[e("button",{onClick:b=>f(y),class:"text-gray-400 hover:text-indigo-600 transition-colors",title:"Edit Template"},[...$[15]||($[15]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})],-1)])],8,fL),e("button",{onClick:b=>v(y.id),class:"text-gray-400 hover:text-red-600 transition-colors",title:"Delete Template"},[...$[16]||($[16]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)])],8,vL)])]),e("div",hL,[e("p",yL,h(y.content),1)]),e("div",xL,[e("span",null,h(y.usageCount)+" times used",1),e("span",null,h(w(y.lastUsed)),1)]),e("div",bL,[e("button",{onClick:b=>N(y),class:"flex-1 bg-white hover:bg-gray-50 text-gray-700 border border-gray-300 px-3 py-2 rounded-lg text-sm font-medium transition-colors"}," Preview ",8,wL),e("button",{onClick:b=>A(y),class:"flex-1 bg-indigo-600 hover:bg-indigo-700 text-white px-3 py-2 rounded-lg text-sm font-medium transition-colors"}," Use Template ",8,kL)])]))),128))])):(m(),g("div",_L,[$[17]||($[17]=e("svg",{class:"mx-auto h-12 w-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1)),$[18]||($[18]=e("h3",{class:"mt-2 text-sm font-medium text-gray-900"},"No templates found",-1)),$[19]||($[19]=e("p",{class:"mt-1 text-sm text-gray-500"},"Get started by creating your first message template.",-1)),e("div",$L,[e("button",{onClick:$[3]||($[3]=y=>r.value=!0),class:"bg-indigo-600 hover:bg-indigo-700 text-white px-4 py-2 rounded-lg font-medium transition-colors"}," Create Template ")])])),r.value||l.value?(m(),g("div",SL,[e("div",DL,[e("div",CL,[e("div",TL,[e("h3",EL,h(l.value?"Edit Template":"Create New Template"),1),e("button",{onClick:I,class:"text-gray-400 hover:text-gray-600 transition-colors"},[...$[20]||($[20]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),e("form",{onSubmit:qe(F,["prevent"]),class:"space-y-4"},[e("div",null,[$[21]||($[21]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Template Name",-1)),ce(e("input",{"onUpdate:modelValue":$[4]||($[4]=y=>c.value.name=y),type:"text",required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-colors",placeholder:"Enter template name"},null,512),[[_e,c.value.name]])]),e("div",null,[$[23]||($[23]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Category",-1)),ce(e("select",{"onUpdate:modelValue":$[5]||($[5]=y=>c.value.category=y),required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-colors"},[...$[22]||($[22]=[Ce('<option value="">Select Category</option><option value="seva">Seva Notifications</option><option value="event">Event Announcements</option><option value="donation">Donation Receipts</option><option value="general">General Messages</option><option value="festival">Festival Greetings</option>',6)])],512),[[Re,c.value.category]])]),e("div",null,[$[24]||($[24]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Subject",-1)),ce(e("input",{"onUpdate:modelValue":$[6]||($[6]=y=>c.value.subject=y),type:"text",required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-colors",placeholder:"Enter message subject"},null,512),[[_e,c.value.subject]])]),e("div",null,[$[25]||($[25]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Message Content",-1)),ce(e("textarea",{"onUpdate:modelValue":$[7]||($[7]=y=>c.value.content=y),rows:"6",required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-colors resize-none",placeholder:"Enter your message content..."},null,512),[[_e,c.value.content]])]),e("div",AL,[e("button",{type:"button",onClick:I,class:"px-4 py-2 text-gray-700 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors"}," Cancel "),e("button",IL,h(l.value?"Update Template":"Create Template"),1)])],32)])])])):J("",!0),a.value?(m(),g("div",ML,[e("div",RL,[e("div",PL,[e("div",NL,[$[27]||($[27]=e("h3",{class:"text-lg font-semibold text-gray-900"},"Template Preview",-1)),e("button",{onClick:$[8]||($[8]=y=>a.value=null),class:"text-gray-400 hover:text-gray-600 transition-colors"},[...$[26]||($[26]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),e("div",jL,[e("div",null,[$[28]||($[28]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Subject:",-1)),e("p",LL,h(a.value.subject),1)]),e("div",null,[$[29]||($[29]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Content:",-1)),e("div",BL,[e("p",UL,h(a.value.content),1)])])]),e("div",FL,[e("button",{onClick:$[9]||($[9]=y=>a.value=null),class:"px-4 py-2 text-gray-700 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors"}," Close "),e("button",{onClick:$[10]||($[10]=y=>A(a.value)),class:"px-4 py-2 bg-indigo-600 hover:bg-indigo-700 text-white rounded-lg transition-colors"}," Use This Template ")])])])])):J("",!0)]))}},OL={name:"BulkMessage",setup(){const t=B(""),o=B(""),s=B(""),n=B([]),r=B(!1),l=B("sms"),a=B(""),d=B(""),i=B(""),c=B(!1),u=B(""),p=B(""),w=B([{id:1,name:"Rajesh Kumar",phone:"+91 98765 43210",location:"Bangalore",status:"active",group:"active",ageGroup:"adult"},{id:2,name:"Priya Sharma",phone:"+91 98765 43211",location:"Mumbai",status:"active",group:"volunteers",ageGroup:"youth"},{id:3,name:"Amit Patel",phone:"+91 98765 43212",location:"Delhi",status:"inactive",group:"donors",ageGroup:"senior"},{id:4,name:"Sunita Devi",phone:"+91 98765 43213",location:"Chennai",status:"active",group:"seva_participants",ageGroup:"adult"},{id:5,name:"Vikram Singh",phone:"+91 98765 43214",location:"Pune",status:"active",group:"active",ageGroup:"youth"}]),f=B({festival_greeting:{subject:"Festival Greetings from {temple}",content:`Dear {name},

Warm festival greetings from {temple}! May this auspicious occasion bring joy, peace, and prosperity to you and your family.

With divine blessings,
{temple} Team`},seva_reminder:{subject:"Seva Reminder - {temple}",content:`Dear {name},

This is a gentle reminder about your upcoming seva at {temple}. Please arrive 15 minutes early for preparation.

Thank you for your devotion.

With regards,
{temple} Team`},donation_thank_you:{subject:"Thank You for Your Donation - {temple}",content:`Dear {name},

Thank you for your generous donation to {temple}. Your contribution helps us serve the community better.

May the divine bless you abundantly.

With gratitude,
{temple} Team`}}),v=oe(()=>w.value.filter(U=>{const _=!t.value||U.group===t.value,k=!o.value||U.location.toLowerCase().includes(o.value.toLowerCase()),L=!s.value||U.ageGroup===s.value;return _&&k&&L})),N=oe(()=>n.value.length),A=oe(()=>l.value==="sms"?160:l.value==="whatsapp"?4096:1e4),F=oe(()=>i.value.replace(/{name}/g,"Devotee Name").replace(/{temple}/g,"Temple Name")),I=oe(()=>n.value.length>0&&i.value.trim()!==""&&(!c.value||u.value&&p.value)),C=()=>{n.value=v.value.map(U=>U.id),r.value=!0},j=()=>{n.value=[],r.value=!1};return{selectedGroup:t,selectedLocation:o,selectedAgeGroup:s,selectedDevotees:n,selectAllChecked:r,messageType:l,selectedTemplate:a,messageSubject:d,messageContent:i,scheduleMessage:c,scheduleDate:u,scheduleTime:p,filteredDevotees:v,selectedCount:N,maxLength:A,previewMessage:F,canSendMessage:I,selectAll:C,clearSelection:j,selectActiveOnly:()=>{n.value=v.value.filter(U=>U.status==="active").map(U=>U.id)},toggleSelectAll:()=>{r.value?C():j()},loadTemplate:()=>{if(a.value&&f.value[a.value]){const U=f.value[a.value];l.value==="email"&&(d.value=U.subject),i.value=U.content}},insertVariable:U=>{const _=document.querySelector("textarea"),k=_.selectionStart,L=_.selectionEnd,z=i.value;i.value=z.substring(0,k)+`{${U}}`+z.substring(L)},saveDraft:()=>{console.log("Saving draft...")},sendPreview:()=>{console.log("Sending preview...")},sendMessage:()=>{console.log("Sending message to:",n.value),console.log("Message:",i.value),console.log("Type:",l.value),c.value&&console.log("Scheduled for:",u.value,p.value)}}}},zL={class:"bg-white rounded-2xl shadow-lg p-6"},HL={class:"flex items-center justify-between mb-6"},qL={class:"flex items-center space-x-2"},GL={class:"text-sm text-gray-500"},JL={class:"mb-6"},WL={class:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4"},YL={class:"flex flex-wrap gap-2 mb-4"},KL={class:"border border-gray-200 rounded-lg max-h-64 overflow-y-auto"},XL={class:"p-3 bg-gray-50 border-b border-gray-200 flex items-center space-x-3"},ZL={class:"text-sm font-medium text-gray-700"},QL={class:"divide-y divide-gray-200"},eB={class:"flex items-center space-x-3 cursor-pointer"},tB=["value"],oB={class:"flex items-center space-x-3 flex-1"},sB={class:"w-8 h-8 bg-indigo-100 rounded-full flex items-center justify-center"},nB={class:"text-sm font-medium text-indigo-600"},rB={class:"flex-1"},aB={class:"text-sm font-medium text-gray-900"},lB={class:"text-xs text-gray-500"},iB={class:"flex items-center space-x-2"},dB={class:"mb-6"},uB={class:"flex space-x-4 mb-4"},cB={class:"flex items-center space-x-2 cursor-pointer"},pB={class:"flex items-center space-x-2 cursor-pointer"},mB={class:"flex items-center space-x-2 cursor-pointer"},gB={class:"mb-4"},fB={key:0,class:"mb-4"},vB={class:"mb-4"},hB={class:"flex justify-between items-center mt-2"},yB={class:"text-xs text-gray-500"},xB={class:"mb-4"},bB={key:0,class:"grid grid-cols-1 md:grid-cols-2 gap-4"},wB={key:0,class:"mb-6"},kB={class:"bg-gray-50 border border-gray-200 rounded-lg p-4"},_B={class:"flex items-center space-x-2 mb-3"},$B={class:"text-sm font-medium text-gray-700"},SB={key:0,class:"mb-2"},DB={class:"text-sm font-medium text-gray-900"},CB={class:"text-sm text-gray-800 whitespace-pre-wrap"},TB={class:"flex flex-col sm:flex-row gap-3 sm:justify-end"},EB=["disabled"];function AB(t,o,s,n,r,l){return m(),g("div",zL,[e("div",HL,[o[18]||(o[18]=Ce('<div class="flex items-center space-x-3"><div class="p-2 bg-indigo-100 rounded-lg"><svg class="w-6 h-6 text-indigo-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"></path></svg></div><div><h2 class="text-xl font-semibold text-gray-900">Bulk Message</h2><p class="text-sm text-gray-600">Send messages to multiple devotees at once</p></div></div>',1)),e("div",qL,[e("span",GL,"Selected: "+h(n.selectedCount),1),o[17]||(o[17]=e("div",{class:"w-2 h-2 bg-indigo-500 rounded-full"},null,-1))])]),e("div",JL,[o[21]||(o[21]=e("h3",{class:"text-lg font-medium text-gray-900 mb-4"},"Select Recipients",-1)),e("div",WL,[e("div",null,[o[20]||(o[20]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Filter by Group",-1)),ce(e("select",{"onUpdate:modelValue":o[0]||(o[0]=a=>n.selectedGroup=a),class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-all duration-200"},[...o[19]||(o[19]=[e("option",{value:""},"All Devotees",-1),e("option",{value:"active"},"Active Devotees",-1),e("option",{value:"volunteers"},"Volunteers",-1)])],512),[[Re,n.selectedGroup]])])]),e("div",YL,[e("button",{onClick:o[1]||(o[1]=(...a)=>n.selectAll&&n.selectAll(...a)),class:"px-4 py-2 bg-indigo-100 text-indigo-700 rounded-lg hover:bg-indigo-200 transition-all duration-200 text-sm font-medium"}," Select All "),e("button",{onClick:o[2]||(o[2]=(...a)=>n.clearSelection&&n.clearSelection(...a)),class:"px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-all duration-200 text-sm font-medium"}," Clear Selection "),e("button",{onClick:o[3]||(o[3]=(...a)=>n.selectActiveOnly&&n.selectActiveOnly(...a)),class:"px-4 py-2 bg-green-100 text-green-700 rounded-lg hover:bg-green-200 transition-all duration-200 text-sm font-medium"}," Active Only ")]),e("div",KL,[e("div",XL,[ce(e("input",{type:"checkbox","onUpdate:modelValue":o[4]||(o[4]=a=>n.selectAllChecked=a),onChange:o[5]||(o[5]=(...a)=>n.toggleSelectAll&&n.toggleSelectAll(...a)),class:"w-4 h-4 text-indigo-600 border-gray-300 rounded focus:ring-indigo-500"},null,544),[[ct,n.selectAllChecked]]),e("span",ZL,"Select All ("+h(n.filteredDevotees.length)+")",1)]),e("div",QL,[(m(!0),g(be,null,$e(n.filteredDevotees,a=>(m(),g("div",{key:a.id,class:"p-3 hover:bg-gray-50 transition-colors duration-150"},[e("label",eB,[ce(e("input",{type:"checkbox","onUpdate:modelValue":o[6]||(o[6]=d=>n.selectedDevotees=d),value:a.id,class:"w-4 h-4 text-indigo-600 border-gray-300 rounded focus:ring-indigo-500"},null,8,tB),[[ct,n.selectedDevotees]]),e("div",oB,[e("div",sB,[e("span",nB,h(a.name.charAt(0)),1)]),e("div",rB,[e("p",aB,h(a.name),1),e("p",lB,h(a.phone)+"  "+h(a.location),1)]),e("div",iB,[e("span",{class:se(["px-2 py-1 rounded-full text-xs font-medium",a.status==="active"?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"])},h(a.status),3)])])])]))),128))])])]),e("div",dB,[o[32]||(o[32]=e("h3",{class:"text-lg font-medium text-gray-900 mb-4"},"Compose Message",-1)),e("div",uB,[e("label",cB,[ce(e("input",{type:"radio","onUpdate:modelValue":o[7]||(o[7]=a=>n.messageType=a),value:"sms",class:"w-4 h-4 text-indigo-600 border-gray-300 focus:ring-indigo-500"},null,512),[[cs,n.messageType]]),o[22]||(o[22]=e("span",{class:"text-sm font-medium text-gray-700"},"SMS",-1))]),e("label",pB,[ce(e("input",{type:"radio","onUpdate:modelValue":o[8]||(o[8]=a=>n.messageType=a),value:"whatsapp",class:"w-4 h-4 text-indigo-600 border-gray-300 focus:ring-indigo-500"},null,512),[[cs,n.messageType]]),o[23]||(o[23]=e("span",{class:"text-sm font-medium text-gray-700"},"WhatsApp",-1))]),e("label",mB,[ce(e("input",{type:"radio","onUpdate:modelValue":o[9]||(o[9]=a=>n.messageType=a),value:"email",class:"w-4 h-4 text-indigo-600 border-gray-300 focus:ring-indigo-500"},null,512),[[cs,n.messageType]]),o[24]||(o[24]=e("span",{class:"text-sm font-medium text-gray-700"},"Email",-1))])]),e("div",gB,[o[26]||(o[26]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Use Template (Optional)",-1)),ce(e("select",{"onUpdate:modelValue":o[10]||(o[10]=a=>n.selectedTemplate=a),onChange:o[11]||(o[11]=(...a)=>n.loadTemplate&&n.loadTemplate(...a)),class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-all duration-200"},[...o[25]||(o[25]=[Ce('<option value="">Select a template...</option><option value="festival_greeting">Festival Greeting</option><option value="seva_reminder">Seva Reminder</option><option value="donation_thank_you">Donation Thank You</option><option value="event_announcement">Event Announcement</option><option value="general_announcement">General Announcement</option>',6)])],544),[[Re,n.selectedTemplate]])]),n.messageType==="email"?(m(),g("div",fB,[o[27]||(o[27]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Subject",-1)),ce(e("input",{"onUpdate:modelValue":o[12]||(o[12]=a=>n.messageSubject=a),type:"text",placeholder:"Enter email subject...",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-all duration-200"},null,512),[[_e,n.messageSubject]])])):J("",!0),e("div",vB,[o[29]||(o[29]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Message Content",-1)),ce(e("textarea",{"onUpdate:modelValue":o[13]||(o[13]=a=>n.messageContent=a),rows:"6",placeholder:"Type your message here...",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-all duration-200 resize-none"},null,512),[[_e,n.messageContent]]),e("div",hB,[e("p",yB,h(n.messageContent.length)+"/"+h(n.maxLength)+" characters",1),o[28]||(o[28]=e("div",{class:"flex space-x-2"},null,-1))])]),e("div",xB,[n.scheduleMessage?(m(),g("div",bB,[e("div",null,[o[30]||(o[30]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Date",-1)),ce(e("input",{"onUpdate:modelValue":o[14]||(o[14]=a=>n.scheduleDate=a),type:"date",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-all duration-200"},null,512),[[_e,n.scheduleDate]])]),e("div",null,[o[31]||(o[31]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Time",-1)),ce(e("input",{"onUpdate:modelValue":o[15]||(o[15]=a=>n.scheduleTime=a),type:"time",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-all duration-200"},null,512),[[_e,n.scheduleTime]])])])):J("",!0)])]),n.messageContent?(m(),g("div",wB,[o[34]||(o[34]=e("h3",{class:"text-lg font-medium text-gray-900 mb-4"},"Message Preview",-1)),e("div",kB,[e("div",_B,[o[33]||(o[33]=e("div",{class:"w-2 h-2 bg-indigo-500 rounded-full"},null,-1)),e("span",$B,h(n.messageType.toUpperCase())+" Message",1)]),n.messageType==="email"?(m(),g("div",SB,[e("p",DB,"Subject: "+h(n.messageSubject||"No Subject"),1)])):J("",!0),e("p",CB,h(n.previewMessage),1)])])):J("",!0),e("div",TB,[e("button",{onClick:o[16]||(o[16]=(...a)=>n.sendMessage&&n.sendMessage(...a)),disabled:!n.canSendMessage,class:se(["px-6 py-2 rounded-lg font-medium transition-all duration-200",n.canSendMessage?"bg-indigo-600 text-white hover:bg-indigo-700 shadow-md hover:shadow-lg":"bg-gray-300 text-gray-500 cursor-not-allowed"])},h(n.scheduleMessage?"Schedule Message":"Send Message"),11,EB)])])}const IB=ot(OL,[["render",AB]]),MB={class:"bg-white rounded-xl shadow-md"},RB={class:"px-6 py-4 border-b border-gray-200 bg-gray-50"},PB={class:"grid grid-cols-1 md:grid-cols-4 gap-4"},NB={class:"mt-4"},jB={class:"relative"},LB={class:"overflow-x-auto"},BB={class:"w-full"},UB={class:"bg-white divide-y divide-gray-200"},FB={class:"px-6 py-4"},VB={class:"max-w-xs"},OB={class:"text-sm font-medium text-gray-900 truncate"},zB={class:"text-sm text-gray-600 truncate"},HB={class:"flex items-center mt-1 space-x-2"},qB={class:"px-6 py-4"},GB={class:"text-sm text-gray-900"},JB={class:"flex items-center space-x-2"},WB={class:"font-medium"},YB={key:0,class:"text-xs text-gray-500 mt-1"},KB={class:"px-6 py-4"},XB={class:"flex items-center space-x-2"},ZB={class:"text-sm text-gray-900 capitalize"},QB={class:"px-6 py-4"},eU={class:"space-y-1"},tU={class:"text-xs text-gray-500"},oU={class:"px-6 py-4 text-sm text-gray-900"},sU={class:"text-xs text-gray-500"},nU={class:"px-6 py-4"},rU={class:"flex items-center space-x-2"},aU=["onClick"],lU=["onClick"],iU=["onClick"],dU={key:0,class:"text-center py-12"},uU={key:1,class:"px-6 py-4 border-t border-gray-200 bg-gray-50"},cU={class:"flex items-center justify-between"},pU={class:"text-sm text-gray-700"},mU={class:"flex items-center space-x-2"},gU=["disabled"],fU={class:"text-sm text-gray-700"},vU=["disabled"],hU={key:0,class:"fixed inset-0 z-50 overflow-y-auto","aria-labelledby":"modal-title",role:"dialog","aria-modal":"true"},yU={class:"flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0"},xU={class:"inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-4xl sm:w-full"},bU={class:"bg-white px-6 py-4"},wU={class:"mt-6 grid grid-cols-1 lg:grid-cols-2 gap-6"},kU={class:"space-y-3"},_U={class:"text-sm text-gray-900 font-medium"},$U={class:"text-sm text-gray-900"},SU={class:"text-sm text-gray-900 capitalize"},DU={class:"text-sm text-gray-900"},CU={class:"space-y-3"},TU={class:"text-sm text-gray-900 font-medium"},EU={class:"text-sm text-green-600 font-medium"},AU={class:"text-sm text-red-600 font-medium"},IU={class:"text-sm text-yellow-600 font-medium"},MU={class:"text-sm text-gray-900 font-medium"},RU={__name:"MessageHistory",props:{filter:String,dateFilter:String},emits:["resendMessage","viewDetails"],setup(t){const o=B([]),s=B(!1),n=B(""),r=B(null),l=B(1),a=B(10),d=B({dateRange:"all",messageType:"all",status:"all",channel:"all"}),i=oe(()=>{let E=o.value;if(n.value){const R=n.value.toLowerCase();E=E.filter(M=>{var G,U;return((G=M.subject)==null?void 0:G.toLowerCase().includes(R))||((U=M.title)==null?void 0:U.toLowerCase().includes(R))||M.content.toLowerCase().includes(R)})}return d.value.messageType!=="all"&&(E=E.filter(R=>R.type===d.value.messageType)),d.value.status!=="all"&&(E=E.filter(R=>R.deliveryStatus===d.value.status)),d.value.channel!=="all"&&(E=E.filter(R=>R.channel===d.value.channel)),E}),c=oe(()=>Math.ceil(i.value.length/a.value)),u=E=>({bulk:"bg-blue-100 text-blue-800",event:"bg-purple-100 text-purple-800",seva:"bg-orange-100 text-orange-800",donation:"bg-green-100 text-green-800",announcement:"bg-indigo-100 text-indigo-800"})[E]||"bg-gray-100 text-gray-800",p=E=>({bulk:"Bulk Message",event:"Event Notification",seva:"Seva Reminder",donation:"Donation Receipt",announcement:"Announcement"})[E]||"Message",w=E=>({email:"bg-blue-100 text-blue-600",sms:"bg-green-100 text-green-600",whatsapp:"bg-green-100 text-green-600",push:"bg-purple-100 text-purple-600"})[E]||"bg-gray-100 text-gray-600",f=E=>"svg",v=E=>({sent:"bg-blue-100 text-blue-800",delivered:"bg-green-100 text-green-800",failed:"bg-red-100 text-red-800",pending:"bg-yellow-100 text-yellow-800"})[E]||"bg-gray-100 text-gray-800",N=E=>({sent:"Sent",delivered:"Delivered",failed:"Failed",pending:"Pending"})[E]||"Unknown",A=E=>new Date(E).toLocaleDateString(),F=E=>new Date(E).toLocaleTimeString(),I=E=>new Date(E).toLocaleString(),C=E=>{r.value=E},j=()=>{r.value=null},$=E=>{console.log("Resending message:",E.id)},y=E=>{console.log("Downloading report for message:",E.id)},b=()=>{console.log("Exporting message history")};return Me(()=>{s.value=!0,o.value=[{id:1,subject:"Ganesha Chaturthi Celebration",content:"Join us for the grand Ganesha Chaturthi celebration on August 31st...",type:"event",channel:"email",deliveryStatus:"delivered",recipientCount:245,deliveredCount:242,failedCount:3,pendingCount:0,recipientGroups:["All Devotees","Volunteers"],sentAt:"2024-08-25T10:30:00Z",sentBy:"Temple Admin"},{id:2,title:"Weekly Seva Reminder",content:"This is a reminder for your upcoming seva booking...",type:"seva",channel:"sms",deliveryStatus:"delivered",recipientCount:89,deliveredCount:87,failedCount:2,pendingCount:0,recipientGroups:["Seva Participants"],sentAt:"2024-08-24T08:00:00Z",sentBy:"System"},{id:3,subject:"Donation Receipt",content:"Thank you for your generous donation of 5,000...",type:"donation",channel:"email",deliveryStatus:"delivered",recipientCount:1,deliveredCount:1,failedCount:0,pendingCount:0,recipientGroups:["Individual"],sentAt:"2024-08-23T14:15:00Z",sentBy:"System"},{id:4,title:"Temple Announcement",content:"Important announcement regarding temple timings...",type:"announcement",channel:"whatsapp",deliveryStatus:"failed",recipientCount:156,deliveredCount:0,failedCount:156,pendingCount:0,recipientGroups:["All Devotees"],sentAt:"2024-08-22T16:45:00Z",sentBy:"Temple Admin"},{id:5,subject:"Monthly Newsletter",content:"Read about this month's temple activities and upcoming events...",type:"bulk",channel:"email",deliveryStatus:"pending",recipientCount:324,deliveredCount:298,failedCount:12,pendingCount:14,recipientGroups:["All Devotees","Volunteers","Donors"],sentAt:"2024-08-21T09:00:00Z",sentBy:"Temple Admin"}],s.value=!1}),(E,R)=>(m(),g(be,null,[e("div",MB,[e("div",{class:"px-6 py-4 border-b border-gray-200"},[e("div",{class:"flex items-center justify-between"},[R[8]||(R[8]=e("div",null,[e("h3",{class:"text-lg font-semibold text-gray-900"},"Message History"),e("p",{class:"text-sm text-gray-600"},"View all sent messages and their delivery status")],-1)),e("div",{class:"flex items-center space-x-3"},[e("button",{onClick:b,class:"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors duration-200 flex items-center space-x-2"},[...R[7]||(R[7]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1),e("span",null,"Export",-1)])])])])]),e("div",RB,[e("div",PB,[e("div",null,[R[10]||(R[10]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Date Range",-1)),ce(e("select",{"onUpdate:modelValue":R[0]||(R[0]=M=>d.value.dateRange=M),class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"},[...R[9]||(R[9]=[Ce('<option value="all">All Time</option><option value="today">Today</option><option value="week">This Week</option><option value="month">This Month</option><option value="custom">Custom Range</option>',5)])],512),[[Re,d.value.dateRange]])]),e("div",null,[R[12]||(R[12]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Message Type",-1)),ce(e("select",{"onUpdate:modelValue":R[1]||(R[1]=M=>d.value.messageType=M),class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"},[...R[11]||(R[11]=[Ce('<option value="all">All Types</option><option value="bulk">Bulk Message</option><option value="event">Event Notification</option><option value="seva">Seva Reminder</option><option value="donation">Donation Receipt</option><option value="announcement">Announcement</option>',6)])],512),[[Re,d.value.messageType]])]),e("div",null,[R[14]||(R[14]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Delivery Status",-1)),ce(e("select",{"onUpdate:modelValue":R[2]||(R[2]=M=>d.value.status=M),class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"},[...R[13]||(R[13]=[Ce('<option value="all">All Status</option><option value="sent">Sent</option><option value="delivered">Delivered</option><option value="failed">Failed</option><option value="pending">Pending</option>',5)])],512),[[Re,d.value.status]])]),e("div",null,[R[16]||(R[16]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Channel",-1)),ce(e("select",{"onUpdate:modelValue":R[3]||(R[3]=M=>d.value.channel=M),class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"},[...R[15]||(R[15]=[Ce('<option value="all">All Channels</option><option value="email">Email</option><option value="sms">SMS</option><option value="whatsapp">WhatsApp</option><option value="push">Push Notification</option>',5)])],512),[[Re,d.value.channel]])])]),e("div",NB,[e("div",jB,[ce(e("input",{"onUpdate:modelValue":R[4]||(R[4]=M=>n.value=M),type:"text",placeholder:"Search by message content, recipient name, or subject...",class:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"},null,512),[[_e,n.value]]),R[17]||(R[17]=e("svg",{class:"absolute left-3 top-2.5 h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})],-1))])])]),e("div",LB,[e("table",BB,[R[22]||(R[22]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Message"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Recipients"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Channel"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Status"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Sent Date"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Actions")])],-1)),e("tbody",UB,[(m(!0),g(be,null,$e(i.value,M=>(m(),g("tr",{key:M.id,class:"hover:bg-gray-50 transition-colors duration-150"},[e("td",FB,[e("div",VB,[e("p",OB,h(M.subject||M.title),1),e("p",zB,h(M.content),1),e("div",HB,[e("span",{class:se([u(M.type),"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium"])},h(p(M.type)),3)])])]),e("td",qB,[e("div",GB,[e("div",JB,[e("span",WB,h(M.recipientCount),1),R[18]||(R[18]=e("span",{class:"text-gray-600"},"recipients",-1))]),M.recipientGroups?(m(),g("div",YB,h(M.recipientGroups.join(", ")),1)):J("",!0)])]),e("td",KB,[e("div",XB,[e("div",{class:se([w(M.channel),"w-8 h-8 rounded-full flex items-center justify-center"])},[(m(),Ne(wt(f(M.channel)),{class:"w-4 h-4"}))],2),e("span",ZB,h(M.channel),1)])]),e("td",QB,[e("div",eU,[e("span",{class:se([v(M.deliveryStatus),"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium"])},h(N(M.deliveryStatus)),3),e("div",tU,h(M.deliveredCount)+"/"+h(M.recipientCount)+" delivered ",1)])]),e("td",oU,[e("div",null,h(A(M.sentAt)),1),e("div",sU,h(F(M.sentAt)),1)]),e("td",nU,[e("div",rU,[e("button",{onClick:G=>C(M),class:"text-indigo-600 hover:text-indigo-800 transition-colors duration-200",title:"View Details"},[...R[19]||(R[19]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})],-1)])],8,aU),M.deliveryStatus==="failed"?(m(),g("button",{key:0,onClick:G=>$(M),class:"text-green-600 hover:text-green-800 transition-colors duration-200",title:"Resend Message"},[...R[20]||(R[20]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})],-1)])],8,lU)):J("",!0),e("button",{onClick:G=>y(M),class:"text-gray-600 hover:text-gray-800 transition-colors duration-200",title:"Download Report"},[...R[21]||(R[21]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1)])],8,iU)])])]))),128))])])]),i.value.length===0?(m(),g("div",dU,[...R[23]||(R[23]=[e("svg",{class:"mx-auto h-12 w-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-3.582 8-8 8a8.959 8.959 0 01-4.906-1.456A3.975 3.975 0 000 16c0-1.105.895-2 2-2h1.09a8.969 8.969 0 000-4H2c-1.105 0-2-.895-2-2 0-1.105.895-2 2-2h1.09a8.969 8.969 0 000-4H2c-1.105 0-2-.895-2-2s.895-2 2-2h1.09C5.456 2.59 8.646 0 12.01 0 17.424 0 21.818 3.582 21.818 8c0 1.105-.895 2-2 2h-1.09a8.969 8.969 0 000 4h1.09c1.105 0 2 .895 2 2z"})],-1),e("h3",{class:"mt-2 text-sm font-medium text-gray-900"},"No messages found",-1),e("p",{class:"mt-1 text-sm text-gray-500"},"No messages match your current filters.",-1)])])):J("",!0),i.value.length>0?(m(),g("div",uU,[e("div",cU,[e("div",pU," Showing "+h((l.value-1)*a.value+1)+" to "+h(Math.min(l.value*a.value,i.value.length))+" of "+h(i.value.length)+" messages ",1),e("div",mU,[e("button",{onClick:R[5]||(R[5]=M=>l.value=Math.max(1,l.value-1)),disabled:l.value===1,class:"px-3 py-1 border border-gray-300 rounded-md text-sm text-gray-700 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed"}," Previous ",8,gU),e("span",fU,h(l.value)+" of "+h(c.value),1),e("button",{onClick:R[6]||(R[6]=M=>l.value=Math.min(c.value,l.value+1)),disabled:l.value===c.value,class:"px-3 py-1 border border-gray-300 rounded-md text-sm text-gray-700 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed"}," Next ",8,vU)])])])):J("",!0)]),r.value?(m(),g("div",hU,[e("div",yU,[e("div",{class:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity",onClick:j}),e("div",xU,[e("div",bU,[e("div",{class:"flex items-center justify-between border-b border-gray-200 pb-4"},[R[25]||(R[25]=e("h3",{class:"text-lg font-semibold text-gray-900"},"Message Details",-1)),e("button",{onClick:j,class:"text-gray-400 hover:text-gray-600"},[...R[24]||(R[24]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),e("div",wU,[e("div",null,[R[31]||(R[31]=e("h4",{class:"text-sm font-medium text-gray-900 mb-3"},"Message Information",-1)),e("dl",kU,[e("div",null,[R[26]||(R[26]=e("dt",{class:"text-sm text-gray-500"},"Subject/Title",-1)),e("dd",_U,h(r.value.subject||r.value.title),1)]),e("div",null,[R[27]||(R[27]=e("dt",{class:"text-sm text-gray-500"},"Content",-1)),e("dd",$U,h(r.value.content),1)]),e("div",null,[R[28]||(R[28]=e("dt",{class:"text-sm text-gray-500"},"Type",-1)),e("dd",null,[e("span",{class:se([u(r.value.type),"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium"])},h(p(r.value.type)),3)])]),e("div",null,[R[29]||(R[29]=e("dt",{class:"text-sm text-gray-500"},"Channel",-1)),e("dd",SU,h(r.value.channel),1)]),e("div",null,[R[30]||(R[30]=e("dt",{class:"text-sm text-gray-500"},"Sent Date",-1)),e("dd",DU,h(I(r.value.sentAt)),1)])])]),e("div",null,[R[37]||(R[37]=e("h4",{class:"text-sm font-medium text-gray-900 mb-3"},"Delivery Statistics",-1)),e("dl",CU,[e("div",null,[R[32]||(R[32]=e("dt",{class:"text-sm text-gray-500"},"Total Recipients",-1)),e("dd",TU,h(r.value.recipientCount),1)]),e("div",null,[R[33]||(R[33]=e("dt",{class:"text-sm text-gray-500"},"Delivered",-1)),e("dd",EU,h(r.value.deliveredCount),1)]),e("div",null,[R[34]||(R[34]=e("dt",{class:"text-sm text-gray-500"},"Failed",-1)),e("dd",AU,h(r.value.failedCount||0),1)]),e("div",null,[R[35]||(R[35]=e("dt",{class:"text-sm text-gray-500"},"Pending",-1)),e("dd",IU,h(r.value.pendingCount||0),1)]),e("div",null,[R[36]||(R[36]=e("dt",{class:"text-sm text-gray-500"},"Delivery Rate",-1)),e("dd",MU,h((r.value.deliveredCount/r.value.recipientCount*100).toFixed(1))+"%",1)])])])])])])])])):J("",!0)],64))}},PU={class:"min-h-screen bg-gray-50"},NU={class:"flex items-center space-x-4"},jU={class:"text-lg font-semibold text-gray-900"},LU={class:"text-sm text-gray-500"},BU={class:"bg-white border-b border-gray-200"},UU={class:"flex space-x-8 px-4 sm:px-6"},FU=["onClick"],VU={class:"flex items-center space-x-2"},OU={key:0,class:"bg-gray-100 text-gray-900 py-0.5 px-2 rounded-full text-xs"},zU={class:"p-4 sm:p-6"},HU={key:0,class:"space-y-6"},qU={class:"bg-white rounded-xl shadow-sm border border-gray-200"},GU={class:"p-6"},JU={key:1,class:"space-y-6"},WU={class:"bg-white rounded-xl shadow-sm border border-gray-200"},YU={class:"p-6"},KU={key:2,class:"space-y-6"},XU={class:"bg-white rounded-xl shadow-sm border border-gray-200"},ZU={class:"p-6"},QU={key:3,class:"space-y-6"},eF={class:"bg-white rounded-xl shadow-sm border border-gray-200"},tF={class:"p-6"},oF={key:4,class:"space-y-6"},sF={class:"grid grid-cols-1 lg:grid-cols-2 gap-6"},nF={class:"bg-white rounded-xl shadow-sm border border-gray-200 p-6"},rF={class:"space-y-4"},aF={class:"flex items-center justify-between"},lF={class:"font-semibold text-gray-900"},iF={class:"flex items-center justify-between"},dF={class:"font-semibold text-gray-900"},uF={class:"flex items-center justify-between"},cF={class:"font-semibold text-gray-900"},pF={class:"flex items-center justify-between"},mF={class:"font-semibold text-green-600"},gF={class:"bg-white rounded-xl shadow-sm border border-gray-200 p-6"},fF={class:"space-y-3"},vF={class:"font-medium text-gray-900"},hF={class:"text-sm text-gray-500"},yF={class:"text-sm font-medium text-indigo-600"},xF={class:"bg-white rounded-xl shadow-sm border border-gray-200 p-6"},bF={class:"space-y-4"},wF={class:"flex-1"},kF={class:"font-medium text-gray-900"},_F={class:"text-sm text-gray-500"},$F={key:0,class:"fixed bottom-4 right-4 bg-green-500 text-white px-6 py-3 rounded-lg shadow-lg transition-all duration-300 z-50"},SF={class:"flex items-center space-x-2"},DF={__name:"CommunicationCenter",setup(t){const o=tt(),s=Ot(),n=B(null),r=oe(()=>o.params.id||o.params.templeId||o.query.templeId||localStorage.getItem("current_entity_id")),l=async()=>{const M=s.getTempleById(r.value);if(M)n.value=M;else try{const G=await pe.get(`/entities/${r.value}`);G.data&&(n.value=G.data)}catch(G){console.error("Failed to fetch temple details:",G)}},a=B("compose"),d=B("all"),i=B("");B(!1);const c=B(!1),u=B(""),p=Je({totalMessages:1247,deliveredMessages:1195,activeTemplates:12}),w=Je({today:23,week:156,month:678,deliveryRate:95.8}),f=oe(()=>[{id:"compose",name:"Compose",icon:Au,count:null},{id:"templates",name:"Templates",icon:tL,count:p.activeTemplates}]),v=B([{id:1,name:"Seva Reminder",category:"Seva",usage:89},{id:2,name:"Festival Invitation",category:"Event",usage:67},{id:3,name:"Donation Receipt",category:"Finance",usage:45},{id:4,name:"Welcome Message",category:"General",usage:34}]),N=B([{id:1,message:"Bulk message sent to 45 devotees about upcoming Diwali celebration",time:"2 hours ago",type:"sent",status:"Sent"},{id:2,message:"Seva reminder delivered to all registered volunteers",time:"4 hours ago",type:"delivered",status:"Delivered"},{id:3,message:"Welcome message sent to new devotee registrations",time:"6 hours ago",type:"delivered",status:"Delivered"},{id:4,message:"Event notification failed to deliver to 3 recipients",time:"1 day ago",type:"failed",status:"Failed"}]),A=M=>{p.totalMessages++,p.deliveredMessages++,R("Message sent successfully!")},F=M=>{p.totalMessages+=M.recipientCount,p.deliveredMessages+=M.deliveredCount,R(`Bulk message sent to ${M.recipientCount} recipients!`)},I=M=>{p.activeTemplates++,R("Template saved successfully!")},C=M=>{a.value="compose"},j=M=>{R("Template updated successfully!")},$=M=>{p.activeTemplates--,R("Template deleted successfully!")},y=M=>{console.log("Preview requested:",M)},b=M=>{R("Message resent successfully!")},E=M=>{console.log("View details for message:",M)},R=M=>{u.value=M,c.value=!0,setTimeout(()=>c.value=!1,3e3)};return Me(()=>{l(),console.log("Communication Center loaded for temple:",r.value)}),(M,G)=>(m(),g("div",PU,[e("div",NU,[G[0]||(G[0]=e("div",{class:"h-10 w-10 rounded-full bg-indigo-100 flex items-center justify-center"},[e("svg",{class:"h-6 w-6 text-indigo-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-4m-2 0H3m2-16l9-9 9 9"})])],-1)),e("div",null,[e("h2",jU,h(n.value?n.value.name:"Loading..."),1),e("p",LU,h(n.value?`${n.value.city}, ${n.value.state}`:""),1)])]),G[10]||(G[10]=e("div",{class:"bg-white border-b border-gray-200 px-4 py-6 sm:px-6"},[e("div",{class:"flex items-center justify-between"},[e("div",null,[e("h1",{class:"text-2xl font-bold text-gray-900"},"Communication Center"),e("p",{class:"mt-1 text-sm text-gray-600"}," Send messages, manage templates, and track communication history ")])])],-1)),e("div",BU,[e("nav",UU,[(m(!0),g(be,null,$e(f.value,U=>(m(),g("button",{key:U.id,onClick:_=>a.value=U.id,class:se(["py-4 px-1 border-b-2 font-medium text-sm transition-colors duration-200",a.value===U.id?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"])},[e("div",VU,[(m(),Ne(wt(U.icon),{class:"w-5 h-5"})),e("span",null,h(U.name),1),U.count?(m(),g("span",OU,h(U.count),1)):J("",!0)])],10,FU))),128))])]),e("div",zU,[a.value==="compose"?(m(),g("div",HU,[e("div",qU,[e("div",GU,[G[1]||(G[1]=e("h2",{class:"text-lg font-semibold text-gray-900 mb-4"},"Compose New Message",-1)),le(Q0,{onMessageSent:A,onSaveTemplate:I})])])])):J("",!0),a.value==="bulk"?(m(),g("div",JU,[e("div",WU,[e("div",YU,[G[2]||(G[2]=e("h2",{class:"text-lg font-semibold text-gray-900 mb-4"},"Bulk Messaging",-1)),le(IB,{onBulkSent:F,onPreviewRequested:y})])])])):J("",!0),a.value==="templates"?(m(),g("div",KU,[e("div",XU,[e("div",ZU,[le(VL,{onTemplateSelected:C,onTemplateEdited:j,onTemplateDeleted:$})])])])):J("",!0),a.value==="history"?(m(),g("div",QU,[e("div",eF,[e("div",tF,[le(RU,{filter:d.value,"date-filter":i.value,onResendMessage:b,onViewDetails:E},null,8,["filter","date-filter"])])])])):J("",!0),a.value==="analytics"?(m(),g("div",oF,[e("div",sF,[e("div",nF,[G[7]||(G[7]=e("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Message Statistics",-1)),e("div",rF,[e("div",aF,[G[3]||(G[3]=e("span",{class:"text-gray-600"},"Messages Sent Today",-1)),e("span",lF,h(w.today),1)]),e("div",iF,[G[4]||(G[4]=e("span",{class:"text-gray-600"},"This Week",-1)),e("span",dF,h(w.week),1)]),e("div",uF,[G[5]||(G[5]=e("span",{class:"text-gray-600"},"This Month",-1)),e("span",cF,h(w.month),1)]),e("div",pF,[G[6]||(G[6]=e("span",{class:"text-gray-600"},"Delivery Rate",-1)),e("span",mF,h(w.deliveryRate)+"%",1)])])]),e("div",gF,[G[8]||(G[8]=e("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Popular Templates",-1)),e("div",fF,[(m(!0),g(be,null,$e(v.value,U=>(m(),g("div",{key:U.id,class:"flex items-center justify-between p-3 bg-gray-50 rounded-lg"},[e("div",null,[e("div",vF,h(U.name),1),e("div",hF,h(U.category),1)]),e("div",yF,h(U.usage)+" uses ",1)]))),128))])])]),e("div",xF,[G[9]||(G[9]=e("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Recent Activity",-1)),e("div",bF,[(m(!0),g(be,null,$e(N.value,U=>(m(),g("div",{key:U.id,class:"flex items-center space-x-4 p-4 bg-gray-50 rounded-lg"},[e("div",{class:se(["w-10 h-10 rounded-full flex items-center justify-center",U.type==="sent"?"bg-blue-100 text-blue-600":U.type==="delivered"?"bg-green-100 text-green-600":"bg-red-100 text-red-600"])},[le(Te(Au),{class:"w-5 h-5"})],2),e("div",wF,[e("div",kF,h(U.message),1),e("div",_F,h(U.time),1)]),e("div",{class:se(["px-3 py-1 rounded-full text-xs font-medium",U.type==="sent"?"bg-blue-100 text-blue-800":U.type==="delivered"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"])},h(U.status),3)]))),128))])])])):J("",!0)]),c.value?(m(),g("div",$F,[e("div",SF,[le(Te(sa),{class:"w-5 h-5"}),e("span",null,h(u.value),1)])])):J("",!0)]))}},CF={class:"min-h-screen bg-gray-50"},TF={class:"bg-white shadow-sm border-b border-gray-200"},EF={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},AF={class:"py-6"},IF={class:"flex items-center justify-between"},MF={class:"mt-1 text-sm text-gray-600"},RF={class:"flex space-x-3"},PF={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},NF={class:"grid grid-cols-1 lg:grid-cols-4 gap-8"},jF={class:"lg:col-span-4"},LF={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8"},BF={class:"bg-white rounded-xl shadow-sm border border-gray-200 p-6"},UF={class:"flex items-center"},FF={class:"ml-4"},VF={class:"text-2xl font-bold text-gray-900"},OF={class:"bg-white rounded-xl shadow-sm border border-gray-200 p-6"},zF={class:"flex items-center"},HF={class:"ml-4"},qF={class:"text-2xl font-bold text-gray-900"},GF={class:"bg-white rounded-xl shadow-sm border border-gray-200 p-6"},JF={class:"flex items-center"},WF={class:"ml-4"},YF={class:"text-2xl font-bold text-gray-900"},KF={class:"bg-white rounded-xl shadow-sm border border-gray-200 p-6"},XF={class:"flex items-center"},ZF={class:"ml-4"},QF={class:"text-2xl font-bold text-gray-900"},eV={class:"lg:col-span-4"},tV={class:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 mb-6"},oV={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4"},sV={class:"relative"},nV={class:"lg:col-span-4"},rV={class:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden"},aV={class:"px-6 py-4 border-b border-gray-200"},lV={class:"text-lg font-medium text-gray-900"},iV={key:0,class:"p-8 text-center"},dV={key:1,class:"p-8 text-center"},uV={class:"mt-1 text-sm text-gray-500"},cV={key:2,class:"overflow-x-auto"},pV={class:"min-w-full divide-y divide-gray-200"},mV={class:"bg-white divide-y divide-gray-200"},gV={class:"px-6 py-4 whitespace-nowrap"},fV={class:"flex items-center"},vV={class:"flex-shrink-0 h-10 w-10"},hV=["src","alt"],yV={key:1,class:"h-10 w-10 rounded-full bg-indigo-100 flex items-center justify-center"},xV={class:"text-sm font-medium text-indigo-600"},bV={class:"ml-4"},wV={class:"text-sm font-medium text-gray-900"},kV={class:"text-sm text-gray-500"},_V={class:"px-6 py-4 whitespace-nowrap"},$V={class:"text-sm text-gray-900"},SV={class:"text-sm text-gray-500"},DV={class:"px-6 py-4 whitespace-nowrap"},CV={class:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800"},TV={class:"px-6 py-4 whitespace-nowrap"},EV={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},AV={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},IV={class:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium"},MV={class:"flex items-center justify-end space-x-2"},RV=["onClick"],PV=["onClick"],NV=["onClick","title"],jV={key:0,class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},LV={key:1,class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},BV={key:3,class:"bg-white px-4 py-3 border-t border-gray-200 sm:px-6"},UV={class:"flex items-center justify-between"},FV={class:"flex-1 flex justify-between sm:hidden"},VV=["disabled"],OV=["disabled"],zV={class:"hidden sm:flex-1 sm:flex sm:items-center sm:justify-between"},HV={class:"text-sm text-gray-700"},qV={class:"font-medium"},GV={class:"font-medium"},JV={class:"font-medium"},WV={class:"relative z-0 inline-flex rounded-md shadow-sm -space-x-px","aria-label":"Pagination"},YV=["disabled"],KV=["onClick"],XV=["disabled"],ZV={key:0,class:"fixed inset-0 bg-gray-600 bg-opacity-50 flex items-center justify-center p-4 z-50"},QV={class:"bg-white rounded-xl shadow-xl max-w-md w-full p-6"},eO={class:"flex items-center justify-between mb-4"},tO={class:"space-y-4"},oO={class:"flex justify-end space-x-3 mt-6"},sO={__name:"VolunteerManagement",setup(t){tt();const{showToast:o}=Ue(),s=B(!1),n=B(""),r=B(""),l=B(""),a=B(1),d=B(10),i=B(!1),c=B({department:"",type:"",description:""}),u=B([{id:1,name:"Rajesh Kumar",email:"rajesh@email.com",phone:"+91 98765 43210",role:"Senior Volunteer",department:"seva",status:"active",activeAssignments:3,totalAssignments:5,lastActive:"2024-06-17T10:30:00Z",avatar:null},{id:2,name:"Priya Sharma",email:"priya@email.com",phone:"+91 98765 43211",role:"Event Coordinator",department:"events",status:"active",activeAssignments:2,totalAssignments:3,lastActive:"2024-06-16T14:20:00Z",avatar:null},{id:3,name:"Amit Patel",email:"amit@email.com",phone:"+91 98765 43212",role:"Security Volunteer",department:"security",status:"inactive",activeAssignments:0,totalAssignments:2,lastActive:"2024-06-10T09:15:00Z",avatar:null},{id:4,name:"Sunita Devi",email:"sunita@email.com",phone:"+91 98765 43213",role:"Reception Volunteer",department:"reception",status:"on-leave",activeAssignments:1,totalAssignments:4,lastActive:"2024-06-15T16:45:00Z",avatar:null},{id:5,name:"Vikram Singh",email:"vikram@email.com",phone:"+91 98765 43214",role:"Maintenance Volunteer",department:"maintenance",status:"active",activeAssignments:2,totalAssignments:2,lastActive:"2024-06-17T08:30:00Z",avatar:null}]),p=B("Sri Lakshmi Temple"),w=oe(()=>({total:u.value.length,activeToday:u.value.filter(k=>k.status==="active").length,assignments:u.value.reduce((k,L)=>k+L.activeAssignments,0),hoursThisMonth:248})),f=oe(()=>{let k=u.value;if(n.value){const L=n.value.toLowerCase();k=k.filter(z=>z.name.toLowerCase().includes(L)||z.email.toLowerCase().includes(L)||z.phone.includes(L))}return r.value&&(k=k.filter(L=>L.status===r.value)),l.value&&(k=k.filter(L=>L.department===l.value)),k}),v=oe(()=>Math.ceil(f.value.length/d.value)),N=oe(()=>{const k=(a.value-1)*d.value,L=k+d.value;return f.value.slice(k,L)}),A=oe(()=>(a.value-1)*d.value),F=oe(()=>Math.min(A.value+d.value,f.value.length)),I=oe(()=>{const k=[],L=Math.max(1,a.value-2),z=Math.min(v.value,a.value+2);for(let q=L;q<=z;q++)k.push(q);return k}),C=k=>{switch(k){case"active":return"bg-green-100 text-green-800";case"inactive":return"bg-red-100 text-red-800";case"on-leave":return"bg-yellow-100 text-yellow-800";default:return"bg-gray-100 text-gray-800"}},j=k=>{const L=new Date(k),q=Math.abs(new Date-L),K=Math.ceil(q/(1e3*60*60*24));return K===1?"Today":K===2?"Yesterday":K<=7?`${K-1} days ago`:L.toLocaleDateString("en-IN",{day:"2-digit",month:"short",year:"numeric"})},$=()=>{n.value="",r.value="",l.value="",a.value=1},y=()=>{a.value>1&&a.value--},b=()=>{a.value<v.value&&a.value++},E=k=>{a.value=k},R=k=>{o(`Viewing details for ${k.name}`,"info")},M=k=>{o(`Editing assignments for ${k.name}`,"info")},G=k=>{const L=k.status==="active"?"inactive":"active",z=u.value.findIndex(q=>q.id===k.id);z!==-1&&(u.value[z].status=L,o(`${k.name} has been ${L==="active"?"activated":"deactivated"}`,"success"))},U=()=>{if(!c.value.department||!c.value.type){o("Please fill in all required fields","error");return}o("Bulk assignment processed successfully","success"),i.value=!1,c.value={department:"",type:"",description:""}},_=()=>{o("Exporting volunteer data...","info"),setTimeout(()=>{o("Volunteer data exported successfully","success")},2e3)};return Me(async()=>{s.value=!0;try{await new Promise(k=>setTimeout(k,1e3))}catch{o("Failed to load volunteers","error")}finally{s.value=!1}}),(k,L)=>(m(),g("div",CF,[e("div",TF,[e("div",EF,[e("div",AF,[e("div",IF,[e("div",null,[L[9]||(L[9]=e("h1",{class:"text-2xl font-bold text-gray-900"},"Volunteer Management",-1)),e("p",MF," Manage volunteers, assignments, and schedules for "+h(p.value),1)]),e("div",RF,[e("button",{onClick:L[0]||(L[0]=z=>i.value=!0),class:"inline-flex items-center px-4 py-2 border border-indigo-300 rounded-lg text-sm font-medium text-indigo-700 bg-indigo-50 hover:bg-indigo-100 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 transition-colors duration-200"},[...L[10]||(L[10]=[e("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),te(" Bulk Assignment ",-1)])]),e("button",{onClick:_,class:"inline-flex items-center px-4 py-2 border border-gray-300 rounded-lg text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 transition-colors duration-200"},[...L[11]||(L[11]=[e("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1),te(" Export ",-1)])])])])])])]),e("div",PF,[e("div",NF,[e("div",jF,[e("div",LF,[e("div",BF,[e("div",UF,[L[13]||(L[13]=e("div",{class:"flex-shrink-0"},[e("div",{class:"w-8 h-8 bg-indigo-100 rounded-lg flex items-center justify-center"},[e("svg",{class:"w-5 h-5 text-indigo-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})])])],-1)),e("div",FF,[L[12]||(L[12]=e("p",{class:"text-sm font-medium text-gray-600"},"Total Volunteers",-1)),e("p",VF,h(w.value.total),1)])])]),e("div",OF,[e("div",zF,[L[15]||(L[15]=e("div",{class:"flex-shrink-0"},[e("div",{class:"w-8 h-8 bg-green-100 rounded-lg flex items-center justify-center"},[e("svg",{class:"w-5 h-5 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})])])],-1)),e("div",HF,[L[14]||(L[14]=e("p",{class:"text-sm font-medium text-gray-600"},"Active Today",-1)),e("p",qF,h(w.value.activeToday),1)])])]),e("div",GF,[e("div",JF,[L[17]||(L[17]=e("div",{class:"flex-shrink-0"},[e("div",{class:"w-8 h-8 bg-yellow-100 rounded-lg flex items-center justify-center"},[e("svg",{class:"w-5 h-5 text-yellow-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})])])],-1)),e("div",WF,[L[16]||(L[16]=e("p",{class:"text-sm font-medium text-gray-600"},"Assignments",-1)),e("p",YF,h(w.value.assignments),1)])])]),e("div",KF,[e("div",XF,[L[19]||(L[19]=e("div",{class:"flex-shrink-0"},[e("div",{class:"w-8 h-8 bg-purple-100 rounded-lg flex items-center justify-center"},[e("svg",{class:"w-5 h-5 text-purple-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"})])])],-1)),e("div",ZF,[L[18]||(L[18]=e("p",{class:"text-sm font-medium text-gray-600"},"Hours This Month",-1)),e("p",QF,h(w.value.hoursThisMonth),1)])])])])]),e("div",eV,[e("div",tV,[e("div",oV,[e("div",sV,[L[20]||(L[20]=e("div",{class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},[e("svg",{class:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})])],-1)),ce(e("input",{"onUpdate:modelValue":L[1]||(L[1]=z=>n.value=z),type:"text",placeholder:"Search volunteers...",class:"block w-full pl-10 pr-3 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm transition-colors duration-200"},null,512),[[_e,n.value]])]),ce(e("select",{"onUpdate:modelValue":L[2]||(L[2]=z=>r.value=z),class:"block w-full px-3 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm transition-colors duration-200"},[...L[21]||(L[21]=[e("option",{value:""},"All Status",-1),e("option",{value:"active"},"Active",-1),e("option",{value:"inactive"},"Inactive",-1),e("option",{value:"on-leave"},"On Leave",-1)])],512),[[Re,r.value]]),ce(e("select",{"onUpdate:modelValue":L[3]||(L[3]=z=>l.value=z),class:"block w-full px-3 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm transition-colors duration-200"},[...L[22]||(L[22]=[Ce('<option value="">All Departments</option><option value="seva">Seva Management</option><option value="events">Events</option><option value="maintenance">Maintenance</option><option value="security">Security</option><option value="reception">Reception</option>',6)])],512),[[Re,l.value]]),e("button",{onClick:$,class:"inline-flex items-center justify-center px-4 py-2.5 border border-gray-300 rounded-lg text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 transition-colors duration-200"},[...L[23]||(L[23]=[e("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})],-1),te(" Clear ",-1)])])])])]),e("div",nV,[e("div",rV,[e("div",aV,[e("h3",lV,"Volunteers ("+h(f.value.length)+")",1)]),s.value?(m(),g("div",iV,[...L[24]||(L[24]=[e("div",{class:"inline-flex items-center px-4 py-2 font-semibold leading-6 text-sm shadow rounded-md text-indigo-500 bg-white"},[e("svg",{class:"animate-spin -ml-1 mr-3 h-5 w-5 text-indigo-500",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]),te(" Loading volunteers... ")],-1)])])):f.value.length===0?(m(),g("div",dV,[L[25]||(L[25]=e("svg",{class:"mx-auto h-12 w-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})],-1)),L[26]||(L[26]=e("h3",{class:"mt-2 text-sm font-medium text-gray-900"},"No volunteers found",-1)),e("p",uV,h(n.value||r.value||l.value?"Try adjusting your search or filters.":"No volunteers have joined this temple yet."),1)])):(m(),g("div",cV,[e("table",pV,[L[31]||(L[31]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Volunteer"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Contact"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Department"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Status"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Assignments"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Last Active"),e("th",{class:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"},"Actions")])],-1)),e("tbody",mV,[(m(!0),g(be,null,$e(N.value,z=>(m(),g("tr",{key:z.id,class:"hover:bg-gray-50 transition-colors duration-150"},[e("td",gV,[e("div",fV,[e("div",vV,[z.avatar?(m(),g("img",{key:0,src:z.avatar,alt:z.name,class:"h-10 w-10 rounded-full object-cover"},null,8,hV)):(m(),g("div",yV,[e("span",xV,h(z.name.charAt(0)),1)]))]),e("div",bV,[e("div",wV,h(z.name),1),e("div",kV,h(z.role),1)])])]),e("td",_V,[e("div",$V,h(z.email),1),e("div",SV,h(z.phone),1)]),e("td",DV,[e("span",CV,h(z.department),1)]),e("td",TV,[e("span",{class:se([C(z.status),"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium"])},h(z.status),3)]),e("td",EV,h(z.activeAssignments)+"/"+h(z.totalAssignments),1),e("td",AV,h(j(z.lastActive)),1),e("td",IV,[e("div",MV,[e("button",{onClick:q=>R(z),class:"text-indigo-600 hover:text-indigo-900 transition-colors duration-150",title:"View Details"},[...L[27]||(L[27]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})],-1)])],8,RV),e("button",{onClick:q=>M(z),class:"text-blue-600 hover:text-blue-900 transition-colors duration-150",title:"Edit Assignments"},[...L[28]||(L[28]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})],-1)])],8,PV),e("button",{onClick:q=>G(z),class:se([z.status==="active"?"text-yellow-600 hover:text-yellow-900":"text-green-600 hover:text-green-900","transition-colors duration-150"]),title:z.status==="active"?"Deactivate":"Activate"},[z.status==="active"?(m(),g("svg",jV,[...L[29]||(L[29]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 9v6m4-6v6m7-3a9 9 0 11-18 0 9 9 0 0118 0z"},null,-1)])])):(m(),g("svg",LV,[...L[30]||(L[30]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M14.828 14.828a4 4 0 01-5.656 0M9 10h1m4 0h1m-6 4h.01M19 10a9 9 0 11-18 0 9 9 0 0118 0z"},null,-1)])]))],10,NV)])])]))),128))])])])),f.value.length>d.value?(m(),g("div",BV,[e("div",UV,[e("div",FV,[e("button",{onClick:y,disabled:a.value===1,class:"relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed"}," Previous ",8,VV),e("button",{onClick:b,disabled:a.value===v.value,class:"ml-3 relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed"}," Next ",8,OV)]),e("div",zV,[e("div",null,[e("p",HV,[L[32]||(L[32]=te(" Showing ",-1)),e("span",qV,h(A.value+1),1),L[33]||(L[33]=te(" to ",-1)),e("span",GV,h(F.value),1),L[34]||(L[34]=te(" of ",-1)),e("span",JV,h(f.value.length),1),L[35]||(L[35]=te(" results ",-1))])]),e("div",null,[e("nav",WV,[e("button",{onClick:y,disabled:a.value===1,class:"relative inline-flex items-center px-2 py-2 rounded-l-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed"},[...L[36]||(L[36]=[e("svg",{class:"h-5 w-5",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z","clip-rule":"evenodd"})],-1)])],8,YV),(m(!0),g(be,null,$e(I.value,z=>(m(),g("button",{key:z,onClick:q=>E(z),class:se([z===a.value?"bg-indigo-50 border-indigo-500 text-indigo-600":"bg-white border-gray-300 text-gray-500 hover:bg-gray-50","relative inline-flex items-center px-4 py-2 border text-sm font-medium"])},h(z),11,KV))),128)),e("button",{onClick:b,disabled:a.value===v.value,class:"relative inline-flex items-center px-2 py-2 rounded-r-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed"},[...L[37]||(L[37]=[e("svg",{class:"h-5 w-5",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z","clip-rule":"evenodd"})],-1)])],8,XV)])])])])])):J("",!0)])])])]),i.value?(m(),g("div",ZV,[e("div",QV,[e("div",eO,[L[39]||(L[39]=e("h3",{class:"text-lg font-medium text-gray-900"},"Bulk Assignment",-1)),e("button",{onClick:L[4]||(L[4]=z=>i.value=!1),class:"text-gray-400 hover:text-gray-600"},[...L[38]||(L[38]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),e("div",tO,[e("div",null,[L[41]||(L[41]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Select Department",-1)),ce(e("select",{"onUpdate:modelValue":L[5]||(L[5]=z=>c.value.department=z),class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"},[...L[40]||(L[40]=[Ce('<option value="">Choose department</option><option value="seva">Seva Management</option><option value="events">Events</option><option value="maintenance">Maintenance</option><option value="security">Security</option><option value="reception">Reception</option>',6)])],512),[[Re,c.value.department]])]),e("div",null,[L[43]||(L[43]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Assignment Type",-1)),ce(e("select",{"onUpdate:modelValue":L[6]||(L[6]=z=>c.value.type=z),class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"},[...L[42]||(L[42]=[Ce('<option value="">Choose type</option><option value="daily">Daily Task</option><option value="weekly">Weekly Task</option><option value="event">Event Assignment</option><option value="special">Special Duty</option>',5)])],512),[[Re,c.value.type]])]),e("div",null,[L[44]||(L[44]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Description",-1)),ce(e("textarea",{"onUpdate:modelValue":L[7]||(L[7]=z=>c.value.description=z),rows:"3",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",placeholder:"Assignment details..."},null,512),[[_e,c.value.description]])])]),e("div",oO,[e("button",{onClick:L[8]||(L[8]=z=>i.value=!1),class:"px-4 py-2 border border-gray-300 rounded-lg text-sm font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500"}," Cancel "),e("button",{onClick:U,class:"px-4 py-2 bg-indigo-600 border border-transparent rounded-lg text-sm font-medium text-white hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500"}," Assign ")])])])):J("",!0)]))}},nO={class:"min-h-screen bg-gradient-to-b from-indigo-50 via-white to-indigo-50"},rO={class:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},aO={class:"bg-white rounded-xl shadow-lg border border-indigo-100 p-5 mb-8"},lO={class:"flex flex-col sm:flex-row gap-4"},iO={class:"flex-1"},dO={class:"relative"},uO={class:"flex flex-col sm:flex-row gap-3"},cO={key:0,class:"flex flex-col items-center justify-center py-12"},pO={key:1,class:"text-center py-12 bg-white rounded-xl shadow-lg"},mO={key:2,class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},gO={class:"p-5"},fO={class:"flex items-start justify-between mb-2"},vO={class:"text-lg font-bold text-gray-900 font-heading flex-1"},hO={class:"space-y-2 mb-4"},yO={class:"flex items-center text-sm text-gray-700 font-side"},xO={key:0,class:"flex items-center text-sm text-gray-700 font-side"},bO={class:"px-2 py-0.5 bg-gray-100 rounded-md text-gray-700 text-xs font-medium"},wO={key:0,class:"text-sm text-gray-600 mb-4 line-clamp-2 font-side"},kO={key:1,class:"w-full bg-gray-100 text-gray-600 font-medium py-2.5 px-4 rounded-lg flex items-center justify-center cursor-not-allowed"},_O=["onClick"],$O=["onClick","disabled"],SO={key:0,class:"flex items-center"},DO={key:1},CO={class:"text-center"},TO={class:"text-xl font-bold text-indigo-900 mb-2 font-heading"},EO={class:"text-indigo-700 mb-6 font-side"},AO={key:0,class:"mb-6"},IO={key:1,class:"flex flex-col sm:flex-row gap-3"},MO=["disabled"],RO={key:0,class:"flex items-center justify-center"},PO={key:1},NO={__name:"TempleSelection",setup(t){et();const{showToast:o}=Ue(),{user:s}=ln(),n=B(""),r=B(""),l=B(""),a=B(!0),d=B(null),i=B(!1),c=B(!1),u=B(null),p=B([]),w=B([]),f=B(!1),v=_=>{const k=_.is_active??_.isActive??_.active??_.Active??!0;return k===!0||k==="true"||k===1||k==="1"},N=async()=>{try{console.log("Fetching user memberships from backend...");const _=await pe.get("/memberships");console.log("Memberships response:",_);let k=_.data||_;Array.isArray(k)||(k.data&&Array.isArray(k.data)?k=k.data:k.memberships&&Array.isArray(k.memberships)?k=k.memberships:k.items&&Array.isArray(k.items)?k=k.items:k=[]);const L=k.map(z=>z.entity_id||z.entityId||z.temple_id||z.templeId).filter(z=>z!=null).map(z=>String(z));return console.log("User joined temple IDs from backend:",L),w.value=L,F(),L}catch(_){return console.error("Error fetching user memberships:",_),A(),w.value}},A=()=>{try{const _=localStorage.getItem("devoteeJoinedTemples");if(_){const L=JSON.parse(_);w.value=Array.isArray(L)?L.map(z=>String(z)):[],console.log("Loaded joined temples from localStorage:",w.value)}const k=localStorage.getItem("selectedEntityId")||localStorage.getItem("current_entity_id")||localStorage.getItem("current_tenant_id");k&&!w.value.includes(String(k))&&(w.value.push(String(k)),F())}catch(_){console.error("Error loading joined temples from localStorage:",_),w.value=[]}},F=()=>{try{const _=w.value.map(k=>String(k));localStorage.setItem("devoteeJoinedTemples",JSON.stringify(_)),console.log("Saved joined temples to localStorage:",_)}catch(_){console.error("Error saving joined temples to localStorage:",_)}},I=_=>{if(!_)return!1;const k=String(_);return w.value.includes(k)},C=_=>{try{const k=_.id||_.ID;if(!k){console.error("Cannot navigate to dashboard: No temple ID available"),o("Temple information is missing.","error");return}if(!v(_)){o("This temple is currently inactive. Access has been restricted.","error");return}console.log("Navigating to dashboard for temple ID:",k),R(k,_),window.location.href=`/entity/${k}/devotee/dashboard`}catch(k){console.error("Error navigating to dashboard:",k),o("Navigation error. Please try again.","error")}},j=oe(()=>{if(!p.value)return[];let _=p.value.filter(k=>k.status==="approved"||k.status==="APPROVED"||k.Status==="approved"||k.Status==="APPROVED"||!k.status);if(n.value.trim()){const k=n.value.toLowerCase();_=_.filter(L=>{const z=(L.name||L.Name||"").toLowerCase(),q=(L.city||L.City||"").toLowerCase(),K=(L.state||L.State||"").toLowerCase();return z.includes(k)||q.includes(k)||K.includes(k)})}return r.value&&(_=_.filter(k=>(k.state||k.State)===r.value)),l.value&&(_=_.filter(k=>(k.category||k.templeType||k.TempleType)===l.value)),_}),$=()=>{n.value="",r.value="",l.value=""},y=_=>{if(!v(_)){o("This temple is currently inactive and cannot accept new members.","error");return}u.value=_,i.value=!0,f.value=!1},b=()=>{i.value=!1,f.value=!1,u.value=null},E=async()=>{var k;if(!u.value)return;const _=u.value.id||u.value.ID;c.value=!0,d.value=_;try{console.log(`Joining temple with ID: ${_}`),await pe.post("/memberships",{entity_id:_}),console.log("Successfully joined temple via API");const L=String(_);w.value.includes(L)||(w.value.push(L),F()),R(_,u.value),f.value=!0,o("Successfully joined temple!","success")}catch(L){if(console.error("Error joining temple:",L),L.message.includes("Network Error")||((k=L.response)==null?void 0:k.status)===404){console.log("Using localStorage fallback for development");const z=String(_);w.value.includes(z)||(w.value.push(z),F()),R(_,u.value),f.value=!0,o("Successfully joined temple! (Development mode)","success")}else o("Failed to join temple. Please try again.","error"),b()}finally{c.value=!1,d.value=null}},R=(_,k=null)=>{if(!_)return;const L=k||u.value,z=(L==null?void 0:L.name)||(L==null?void 0:L.Name)||"Selected Temple",q=String(_);console.log("Saving temple ID to all localStorage keys:",q),localStorage.setItem("selectedEntityId",q),localStorage.setItem("current_entity_id",q),localStorage.setItem("current_tenant_id",q),localStorage.setItem("selectedTempleName",z);try{const K=JSON.parse(localStorage.getItem("user_data")||"{}");K.current_entity={id:_,name:z},K.entityId=_,localStorage.setItem("user_data",JSON.stringify(K))}catch(K){console.error("Error updating user data in localStorage:",K)}},M=()=>{var _,k;try{const L=((_=u.value)==null?void 0:_.id)||((k=u.value)==null?void 0:k.ID);if(!L){console.error("Cannot navigate to profile creation: No temple ID available"),o("Temple information is missing. Please try rejoining the temple.","error");return}R(L,u.value),window.location.href=`/entity/${L}/devotee/profile/create`}catch(L){console.error("Error navigating to profile creation:",L),o("Navigation error. Please try again.","error")}},G=()=>{var _,k;try{const L=((_=u.value)==null?void 0:_.id)||((k=u.value)==null?void 0:k.ID);if(!L){console.error("Cannot navigate to dashboard: No temple ID available"),o("Temple information is missing. Please try rejoining the temple.","error");return}R(L,u.value),window.location.href=`/entity/${L}/devotee/dashboard`}catch(L){console.error("Error navigating to dashboard:",L),o("Navigation error. Please try again.","error")}},U=async()=>{a.value=!0;try{console.log("Fetching temples from API");const _=await lt.getTemples();console.log("Temples fetched from API:",_),p.value=_||[],console.log(`Successfully processed ${p.value.length} temples`)}catch(_){console.error("Error fetching temple data:",_),o("Error loading temples. Please try again later.","error"),p.value=[]}finally{a.value=!1}};return Me(async()=>{console.log("Component mounted - Loading data..."),await N(),await U()}),(_,k)=>{var L,z,q,K;return m(),g("div",nO,[k[24]||(k[24]=Ce('<div class="bg-indigo-600"><div class="max-w-5xl mx-auto px-4 sm:px-6 lg:px-8 py-8 relative z-10"><div class="text-center"><h1 class="text-3xl md:text-4xl font-bold text-white mb-3 font-heading">Find Your Spiritual Home</h1><p class="text-indigo-100 text-base md:text-lg font-light font-sans"> Begin your spiritual journey by joining an approved temple. </p></div></div></div>',1)),e("div",rO,[e("div",aO,[e("div",lO,[e("div",iO,[k[5]||(k[5]=e("label",{for:"search",class:"block text-sm font-semibold text-indigo-900 mb-2 font-side"}," Find Your Temple ",-1)),e("div",dO,[k[4]||(k[4]=e("div",{class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},[e("svg",{class:"h-5 w-5 text-indigo-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})])],-1)),ce(e("input",{id:"search","onUpdate:modelValue":k[0]||(k[0]=H=>n.value=H),type:"text",placeholder:"Search by temple name, city, or state...",class:"block w-full pl-10 pr-3 py-3 border border-indigo-200 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 bg-white text-indigo-800"},null,512),[[_e,n.value]])])]),e("div",uO,[e("div",null,[k[7]||(k[7]=e("label",{class:"block text-sm font-semibold text-indigo-900 mb-2 font-side"},"State",-1)),ce(e("select",{"onUpdate:modelValue":k[1]||(k[1]=H=>r.value=H),class:"px-4 py-3 border border-indigo-200 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 bg-white text-indigo-800 min-w-[140px] appearance-none"},[...k[6]||(k[6]=[Ce('<option value="">All States</option><option value="Karnataka">Karnataka</option><option value="Tamil Nadu">Tamil Nadu</option><option value="Kerala">Kerala</option><option value="Andhra Pradesh">Andhra Pradesh</option><option value="Maharashtra">Maharashtra</option>',6)])],512),[[Re,r.value]])]),e("div",null,[k[9]||(k[9]=e("label",{class:"block text-sm font-semibold text-indigo-900 mb-2 font-side"},"Type",-1)),ce(e("select",{"onUpdate:modelValue":k[2]||(k[2]=H=>l.value=H),class:"px-4 py-3 border border-indigo-200 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 bg-white text-indigo-800 min-w-[140px] appearance-none"},[...k[8]||(k[8]=[e("option",{value:""},"All Types",-1),e("option",{value:"traditional"},"Traditional",-1),e("option",{value:"modern"},"Modern",-1),e("option",{value:"heritage"},"Heritage",-1)])],512),[[Re,l.value]])])])])]),a.value?(m(),g("div",cO,[...k[10]||(k[10]=[e("div",{class:"animate-spin rounded-full h-12 w-12 border-4 border-indigo-100 border-t-indigo-600"},null,-1),e("p",{class:"text-indigo-600 font-medium mt-4"},"Discovering sacred spaces...",-1)])])):j.value.length===0&&!a.value?(m(),g("div",pO,[e("div",{class:"max-w-md mx-auto px-6"},[k[11]||(k[11]=e("svg",{class:"h-12 w-12 text-indigo-400 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})],-1)),k[12]||(k[12]=e("h3",{class:"text-xl font-bold text-indigo-900 mb-3 font-heading"},"No Temples Found",-1)),k[13]||(k[13]=e("p",{class:"text-indigo-700 mb-6 font-side"}," We couldn't find any temples matching your criteria. Please try different search terms. ",-1)),e("button",{onClick:$,class:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-lg text-white bg-indigo-600 hover:bg-indigo-700"}," Reset Filters ")])])):(m(),g("div",mO,[(m(!0),g(be,null,$e(j.value,H=>(m(),g("div",{key:H.id||H.ID,class:"bg-white rounded-xl shadow-lg border border-gray-200 overflow-hidden"},[k[19]||(k[19]=e("div",{class:"h-28 bg-gray-50 border-b border-gray-100 flex items-center justify-center"},[e("div",{class:"bg-white rounded-full p-3 shadow-sm border border-gray-200"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-10 w-10 text-indigo-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1.5",d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})])])],-1)),e("div",gO,[e("div",fO,[e("h3",vO,h(H.name||H.Name),1),e("span",{class:se(["px-2 py-1 rounded-full text-xs font-semibold ml-2",v(H)?"bg-green-100 text-green-800":"bg-red-100 text-red-800"])},h(v(H)?"Active":"Inactive"),3)]),e("div",hO,[e("div",yO,[k[14]||(k[14]=e("svg",{class:"h-4 w-4 mr-2 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})],-1)),te(" "+h(H.city||H.City||"Unknown")+", "+h(H.state||H.State||"Unknown"),1)]),H.category||H.templeType||H.TempleType?(m(),g("div",xO,[k[15]||(k[15]=e("svg",{class:"h-4 w-4 mr-2 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 7h.01M7 3h5c.512 0 1.024.195 1.414.586l7 7a2 2 0 010 2.828l-7 7a2 2 0 01-2.828 0l-7-7A1.994 1.994 0 013 12V7a4 4 0 014-4z"})],-1)),e("span",bO,h(H.category||H.templeType||H.TempleType),1)])):J("",!0)]),H.description||H.Description?(m(),g("p",wO,h(H.description||H.Description),1)):J("",!0),v(H)?I(H.id||H.ID)?(m(),g("button",{key:2,onClick:O=>C(H),class:"w-full bg-green-600 hover:bg-green-700 text-white font-medium py-2.5 px-4 rounded-lg flex items-center justify-center transition-colors"},[...k[17]||(k[17]=[e("svg",{class:"h-5 w-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})],-1),te(" Go to Dashboard ",-1)])],8,_O)):(m(),g("button",{key:3,onClick:O=>y(H),disabled:d.value===(H.id||H.ID),class:"w-full bg-indigo-600 hover:bg-indigo-700 text-white font-medium py-2.5 px-4 rounded-lg flex items-center justify-center transition-colors disabled:opacity-50 disabled:cursor-not-allowed"},[d.value===(H.id||H.ID)?(m(),g("div",SO,[...k[18]||(k[18]=[e("div",{class:"animate-spin rounded-full h-4 w-4 border-2 border-white border-t-transparent mr-2"},null,-1),te(" Joining... ",-1)])])):(m(),g("span",DO,"Join Temple"))],8,$O)):(m(),g("div",kO,[...k[16]||(k[16]=[e("svg",{class:"h-5 w-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})],-1),te(" Temple Inactive ",-1)])]))])]))),128))]))]),i.value?(m(),g("div",{key:0,class:"fixed inset-0 bg-gray-500 bg-opacity-75 flex items-center justify-center p-4 z-50",onClick:b},[e("div",{class:"bg-white rounded-xl shadow-xl max-w-md w-full p-6",onClick:k[3]||(k[3]=qe(()=>{},["stop"]))},[e("div",CO,[k[23]||(k[23]=e("div",{class:"mx-auto flex items-center justify-center h-14 w-14 rounded-full bg-indigo-100 mb-4"},[e("svg",{class:"h-8 w-8 text-indigo-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})])],-1)),e("h3",TO," Join "+h(((L=u.value)==null?void 0:L.name)||((z=u.value)==null?void 0:z.Name))+"? ",1),e("p",EO," You're about to join "+h(((q=u.value)==null?void 0:q.name)||((K=u.value)==null?void 0:K.Name))+" as a devotee. You'll be able to book sevas, make donations, and participate in temple events. ",1),f.value?(m(),g("div",AO,[k[20]||(k[20]=e("div",{class:"bg-green-50 text-green-800 p-4 rounded-lg mb-4"},[e("svg",{class:"w-5 h-5 inline mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})]),te(" Successfully joined temple! ")],-1)),k[21]||(k[21]=e("p",{class:"text-gray-700 mb-4"},"What would you like to do next?",-1)),e("div",{class:"flex flex-col sm:flex-row gap-3"},[e("button",{onClick:M,class:"flex-1 bg-indigo-100 hover:bg-indigo-200 text-indigo-700 font-medium py-2 px-4 rounded-lg transition-colors"}," Complete Profile "),e("button",{onClick:G,class:"flex-1 bg-indigo-600 hover:bg-indigo-700 text-white font-medium py-2 px-4 rounded-lg transition-colors"}," Go to Dashboard ")])])):(m(),g("div",IO,[e("button",{onClick:b,class:"flex-1 bg-white hover:bg-gray-50 text-indigo-700 font-medium py-2 px-4 rounded-lg border border-indigo-200 transition-colors"}," Cancel "),e("button",{onClick:E,disabled:c.value,class:"flex-1 bg-indigo-600 hover:bg-indigo-700 text-white font-medium py-2 px-4 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed"},[c.value?(m(),g("span",RO,[...k[22]||(k[22]=[e("div",{class:"animate-spin rounded-full h-4 w-4 border-2 border-white border-t-transparent mr-2"},null,-1),te(" Joining... ",-1)])])):(m(),g("span",PO,"Join Temple"))],8,MO)]))])])])):J("",!0)])}}},jO={class:"bg-white rounded-2xl shadow-md p-6"},LO={key:0,class:"mt-1 text-sm text-red-600"},BO={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},UO={key:0,class:"mt-1 text-sm text-red-600"},FO={key:0,class:"mt-1 text-sm text-red-600"},VO={class:"border-t pt-6"},OO={class:"mb-6"},zO={key:0,class:"mt-1 text-sm text-red-600"},HO={class:"grid grid-cols-1 md:grid-cols-3 gap-6"},qO={key:0,class:"mt-1 text-sm text-red-600"},GO=["value"],JO={key:0,class:"mt-1 text-sm text-red-600"},WO={key:0,class:"mt-1 text-sm text-red-600"},YO={class:"mt-6"},KO={__name:"PersonalDetailsForm",props:{data:{type:Object,default:()=>({})}},emits:["update","next"],setup(t,{emit:o}){const s=t,n=o,r=Ue();dn();const l=B({fullName:"",dateOfBirth:"",gender:"",address:{street:"",city:"",state:"",pincode:"",country:"India"}}),a=B({}),d=["Andhra Pradesh","Arunachal Pradesh","Assam","Bihar","Chhattisgarh","Goa","Gujarat","Haryana","Himachal Pradesh","Jharkhand","Karnataka","Kerala","Madhya Pradesh","Maharashtra","Manipur","Meghalaya","Mizoram","Nagaland","Odisha","Punjab","Rajasthan","Sikkim","Tamil Nadu","Telangana","Tripura","Uttar Pradesh","Uttarakhand","West Bengal","Delhi","Jammu and Kashmir","Ladakh"];function i(){if(a.value={},l.value.fullName.trim()||(a.value.fullName="Full name is required"),!l.value.dateOfBirth)a.value.dateOfBirth="Date of birth is required";else{const u=new Date(l.value.dateOfBirth),w=new Date().getFullYear()-u.getFullYear();(w<5||w>120)&&(a.value.dateOfBirth="Please enter a valid date of birth")}return l.value.gender||(a.value.gender="Gender is required"),l.value.address.street.trim()||(a.value["address.street"]="Street address is required"),l.value.address.city.trim()||(a.value["address.city"]="City is required"),l.value.address.state||(a.value["address.state"]="State is required"),l.value.address.pincode&&!/^[0-9]{6}$/.test(l.value.address.pincode)&&(a.value["address.pincode"]="Pincode must be 6 digits"),Object.keys(a.value).length===0}function c(){i()?(n("update",l.value),n("next")):r.error("Please fix the errors before continuing")}return Me(()=>{var u,p,w,f,v;s.data&&(l.value={fullName:s.data.full_name||s.data.fullName||"",dateOfBirth:s.data.dob||s.data.dateOfBirth||"",gender:s.data.gender||"",address:{street:s.data.street_address||((u=s.data.address)==null?void 0:u.street)||"",city:s.data.city||((p=s.data.address)==null?void 0:p.city)||"",state:s.data.state||((w=s.data.address)==null?void 0:w.state)||"",pincode:s.data.pincode||((f=s.data.address)==null?void 0:f.pincode)||"",country:s.data.country||((v=s.data.address)==null?void 0:v.country)||"India"}})}),Oe(l,()=>{Object.keys(a.value).length>0&&i(),n("update",l.value)},{deep:!0}),(u,p)=>(m(),g("div",jO,[p[20]||(p[20]=e("div",{class:"mb-6"},[e("h2",{class:"text-xl font-semibold text-gray-900 mb-2"},"Personal Details"),e("p",{class:"text-gray-600"},"Let us know more about you to personalize your temple experience")],-1)),e("form",{onSubmit:qe(c,["prevent"]),class:"space-y-6"},[e("div",null,[p[8]||(p[8]=e("label",{for:"fullName",class:"block text-sm font-medium text-gray-700 mb-2"},[te(" Full Name "),e("span",{class:"text-red-500"},"*")],-1)),ce(e("input",{id:"fullName","onUpdate:modelValue":p[0]||(p[0]=w=>l.value.fullName=w),type:"text",required:"",class:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-colors duration-200",placeholder:"Enter your full name"},null,512),[[_e,l.value.fullName]]),a.value.fullName?(m(),g("p",LO,h(a.value.fullName),1)):J("",!0)]),e("div",BO,[e("div",null,[p[9]||(p[9]=e("label",{for:"dateOfBirth",class:"block text-sm font-medium text-gray-700 mb-2"},[te(" Date of Birth "),e("span",{class:"text-red-500"},"*")],-1)),ce(e("input",{id:"dateOfBirth","onUpdate:modelValue":p[1]||(p[1]=w=>l.value.dateOfBirth=w),type:"date",required:"",class:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-colors duration-200"},null,512),[[_e,l.value.dateOfBirth]]),a.value.dateOfBirth?(m(),g("p",UO,h(a.value.dateOfBirth),1)):J("",!0)]),e("div",null,[p[11]||(p[11]=e("label",{for:"gender",class:"block text-sm font-medium text-gray-700 mb-2"},[te(" Gender "),e("span",{class:"text-red-500"},"*")],-1)),ce(e("select",{id:"gender","onUpdate:modelValue":p[2]||(p[2]=w=>l.value.gender=w),required:"",class:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-colors duration-200"},[...p[10]||(p[10]=[e("option",{value:""},"Select Gender",-1),e("option",{value:"male"},"Male",-1),e("option",{value:"female"},"Female",-1),e("option",{value:"other"},"Other",-1)])],512),[[Re,l.value.gender]]),a.value.gender?(m(),g("p",FO,h(a.value.gender),1)):J("",!0)])]),p[19]||(p[19]=e("div",{class:"grid grid-cols-1 md:grid-cols-2 gap-6"},null,-1)),e("div",VO,[p[18]||(p[18]=e("h3",{class:"text-lg font-medium text-gray-900 mb-4"},"Address Information",-1)),e("div",OO,[p[12]||(p[12]=e("label",{for:"street",class:"block text-sm font-medium text-gray-700 mb-2"},[te(" Street Address "),e("span",{class:"text-red-500"},"*")],-1)),ce(e("textarea",{id:"street","onUpdate:modelValue":p[3]||(p[3]=w=>l.value.address.street=w),rows:"2",required:"",class:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-colors duration-200 resize-none",placeholder:"Enter your full address"},null,512),[[_e,l.value.address.street]]),a.value["address.street"]?(m(),g("p",zO,h(a.value["address.street"]),1)):J("",!0)]),e("div",HO,[e("div",null,[p[13]||(p[13]=e("label",{for:"city",class:"block text-sm font-medium text-gray-700 mb-2"},[te(" City "),e("span",{class:"text-red-500"},"*")],-1)),ce(e("input",{id:"city","onUpdate:modelValue":p[4]||(p[4]=w=>l.value.address.city=w),type:"text",required:"",class:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-colors duration-200",placeholder:"City"},null,512),[[_e,l.value.address.city]]),a.value["address.city"]?(m(),g("p",qO,h(a.value["address.city"]),1)):J("",!0)]),e("div",null,[p[15]||(p[15]=e("label",{for:"state",class:"block text-sm font-medium text-gray-700 mb-2"},[te(" State "),e("span",{class:"text-red-500"},"*")],-1)),ce(e("select",{id:"state","onUpdate:modelValue":p[5]||(p[5]=w=>l.value.address.state=w),required:"",class:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-colors duration-200"},[p[14]||(p[14]=e("option",{value:""},"Select State",-1)),(m(),g(be,null,$e(d,w=>e("option",{key:w,value:w},h(w),9,GO)),64))],512),[[Re,l.value.address.state]]),a.value["address.state"]?(m(),g("p",JO,h(a.value["address.state"]),1)):J("",!0)]),e("div",null,[p[16]||(p[16]=e("label",{for:"pincode",class:"block text-sm font-medium text-gray-700 mb-2"}," Pincode ",-1)),ce(e("input",{id:"pincode","onUpdate:modelValue":p[6]||(p[6]=w=>l.value.address.pincode=w),type:"text",pattern:"[0-9]{6}",class:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-colors duration-200",placeholder:"000000",maxlength:"6"},null,512),[[_e,l.value.address.pincode]]),a.value["address.pincode"]?(m(),g("p",WO,h(a.value["address.pincode"]),1)):J("",!0)])]),e("div",YO,[p[17]||(p[17]=e("label",{for:"country",class:"block text-sm font-medium text-gray-700 mb-2"}," Country ",-1)),ce(e("input",{id:"country","onUpdate:modelValue":p[7]||(p[7]=w=>l.value.address.country=w),type:"text",readonly:"",class:"w-full px-4 py-3 border border-gray-300 rounded-xl bg-gray-50 text-gray-500"},null,512),[[_e,l.value.address.country]])])])],32)]))}},XO={class:"bg-white rounded-2xl shadow-md p-6"},ZO={id:"gotra-suggestions"},QO=["value"],ez={key:0,class:"mt-1 text-sm text-red-600"},tz={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},oz=["value"],sz={key:0,class:"mt-1 text-sm text-red-600"},nz=["value"],rz={key:0,class:"mt-1 text-sm text-red-600"},az=["value"],lz={key:0,class:"mt-1 text-sm text-red-600"},iz=["value"],dz={key:0,class:"mt-1 text-sm text-red-600"},uz={__name:"SpiritualInfoForm",props:{data:{type:Object,default:()=>({gotra:"",nakshatra:"",rashi:"",lagna:"",vedaShaka:""})}},emits:["skip","next","previous","save-draft","update-data"],setup(t,{emit:o}){const s=t,n=o;dn();const r=B({gotra:"",nakshatra:"",rashi:"",lagna:"",vedaShaka:""}),l=B({}),a=["Bharadwaja","Kashyapa","Vasishtha","Vishwamitra","Jamadagni","Atri","Gautama","Agastya","Kaundinya","Kaushika","Bhargava","Shandilya","Angirasa","Harita","Mudgala","Parasara","Vatsya","Garga","Shaktri","Pulastya"],d=["Ashwini","Bharani","Krittika","Rohini","Mrigashirsha","Ardra","Punarvasu","Pushya","Ashlesha","Magha","Purva Phalguni","Uttara Phalguni","Hasta","Chitra","Swati","Vishakha","Anuradha","Jyeshtha","Mula","Purva Ashadha","Uttara Ashadha","Shravana","Dhanishta","Shatabhisha","Purva Bhadrapada","Uttara Bhadrapada","Revati"],i=["Mesha (Aries)","Vrishabha (Taurus)","Mithuna (Gemini)","Karka (Cancer)","Simha (Leo)","Kanya (Virgo)","Tula (Libra)","Vrishchika (Scorpio)","Dhanu (Sagittarius)","Makara (Capricorn)","Kumbha (Aquarius)","Meena (Pisces)"],c=["Rig Veda - Shankhayana","Rig Veda - Kaushitaki","Sama Veda - Kauthuma","Sama Veda - Jaiminiya","Yajur Veda - Madhyandina","Yajur Veda - Kanva","Yajur Veda - Taittiriya","Yajur Veda - Maitrayani","Atharva Veda - Shaunaka","Atharva Veda - Paippalada"];oe(()=>r.value.gotra||r.value.nakshatra||r.value.rashi||r.value.lagna||r.value.vedaShaka),oe(()=>s.data?r.value.gotra!==(s.data.gotra||"")||r.value.nakshatra!==(s.data.nakshatra||"")||r.value.rashi!==(s.data.rashi||"")||r.value.lagna!==(s.data.lagna||"")||r.value.vedaShaka!==(s.data.vedaShaka||""):!1);function u(){return l.value={},!0}function p(){u()&&(n("update-data",r.value),n("next"))}return Me(()=>{s.data&&(r.value={gotra:s.data.gotra||"",nakshatra:s.data.nakshatra||"",rashi:s.data.rashi||"",lagna:s.data.lagna||"",vedaShaka:s.data.vedaShaka||""})}),Oe(r,()=>{Object.keys(l.value).length>0&&u(),n("update-data",r.value)},{deep:!0}),(w,f)=>(m(),g("div",XO,[f[15]||(f[15]=e("div",{class:"mb-6"},[e("h2",{class:"text-xl font-semibold text-gray-900 mb-2"},"Spiritual Information"),e("p",{class:"text-gray-600"},"Help us understand your spiritual background and traditions")],-1)),e("form",{onSubmit:qe(p,["prevent"]),class:"space-y-6"},[e("div",null,[f[5]||(f[5]=e("label",{for:"gotra",class:"block text-sm font-medium text-gray-700 mb-2"},[te(" Gotra "),e("span",{class:"text-gray-400 text-xs ml-1"},"(Your family lineage)")],-1)),ce(e("input",{id:"gotra","onUpdate:modelValue":f[0]||(f[0]=v=>r.value.gotra=v),type:"text",class:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-colors duration-200",placeholder:"e.g., Bharadwaja, Kashyapa, Vasishtha",list:"gotra-suggestions"},null,512),[[_e,r.value.gotra]]),e("datalist",ZO,[(m(),g(be,null,$e(a,v=>e("option",{key:v,value:v},h(v),9,QO)),64))]),l.value.gotra?(m(),g("p",ez,h(l.value.gotra),1)):J("",!0)]),e("div",tz,[e("div",null,[f[7]||(f[7]=e("label",{for:"nakshatra",class:"block text-sm font-medium text-gray-700 mb-2"},[te(" Nakshatra "),e("span",{class:"text-gray-400 text-xs ml-1"},"(Birth star)")],-1)),ce(e("select",{id:"nakshatra","onUpdate:modelValue":f[1]||(f[1]=v=>r.value.nakshatra=v),class:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-colors duration-200"},[f[6]||(f[6]=e("option",{value:""},"Select Nakshatra",-1)),(m(),g(be,null,$e(d,v=>e("option",{key:v,value:v},h(v),9,oz)),64))],512),[[Re,r.value.nakshatra]]),l.value.nakshatra?(m(),g("p",sz,h(l.value.nakshatra),1)):J("",!0)]),e("div",null,[f[9]||(f[9]=e("label",{for:"rashi",class:"block text-sm font-medium text-gray-700 mb-2"},[te(" Rashi "),e("span",{class:"text-gray-400 text-xs ml-1"},"(Zodiac sign)")],-1)),ce(e("select",{id:"rashi","onUpdate:modelValue":f[2]||(f[2]=v=>r.value.rashi=v),class:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-colors duration-200"},[f[8]||(f[8]=e("option",{value:""},"Select Rashi",-1)),(m(),g(be,null,$e(i,v=>e("option",{key:v,value:v},h(v),9,nz)),64))],512),[[Re,r.value.rashi]]),l.value.rashi?(m(),g("p",rz,h(l.value.rashi),1)):J("",!0)])]),e("div",null,[f[11]||(f[11]=e("label",{for:"lagna",class:"block text-sm font-medium text-gray-700 mb-2"},[te(" Lagna (Ascendant) "),e("span",{class:"text-gray-400 text-xs ml-1"},"(Rising sign at birth)")],-1)),ce(e("select",{id:"lagna","onUpdate:modelValue":f[3]||(f[3]=v=>r.value.lagna=v),class:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-colors duration-200"},[f[10]||(f[10]=e("option",{value:""},"Select Lagna",-1)),(m(),g(be,null,$e(i,v=>e("option",{key:v,value:v},h(v),9,az)),64))],512),[[Re,r.value.lagna]]),l.value.lagna?(m(),g("p",lz,h(l.value.lagna),1)):J("",!0)]),e("div",null,[f[13]||(f[13]=e("label",{for:"vedaShaka",class:"block text-sm font-medium text-gray-700 mb-2"},[te(" Veda Shaka "),e("span",{class:"text-gray-400 text-xs ml-1"},"(Vedic branch/tradition)")],-1)),ce(e("select",{id:"vedaShaka","onUpdate:modelValue":f[4]||(f[4]=v=>r.value.vedaShaka=v),class:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-colors duration-200"},[f[12]||(f[12]=e("option",{value:""},"Select Veda Shaka",-1)),(m(),g(be,null,$e(c,v=>e("option",{key:v,value:v},h(v),9,iz)),64))],512),[[Re,r.value.vedaShaka]]),l.value.vedaShaka?(m(),g("p",dz,h(l.value.vedaShaka),1)):J("",!0)]),f[14]||(f[14]=Ce('<div class="bg-indigo-50 rounded-xl p-4 border border-indigo-200"><div class="flex items-start"><div class="flex-shrink-0"><svg class="h-5 w-5 text-indigo-400 mt-0.5" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"></path></svg></div><div class="ml-3"><h3 class="text-sm font-medium text-indigo-800">Optional Information</h3><p class="text-sm text-indigo-700 mt-1"> This information helps us provide personalized spiritual guidance and appropriate rituals. All fields are optional and can be filled later. </p></div></div></div><div class="flex flex-col sm:flex-row gap-4 pt-6 border-t"></div>',2))],32)]))}},cz={class:"bg-white rounded-xl shadow-lg p-6 md:p-8"},pz={class:"bg-indigo-50 rounded-xl p-6"},mz={class:"grid grid-cols-1 lg:grid-cols-2 gap-6"},gz={class:"space-y-4"},fz={class:"space-y-4"},vz={class:"bg-amber-50 rounded-xl p-6"},hz={class:"grid grid-cols-1 lg:grid-cols-2 gap-8"},yz={class:"space-y-4"},xz={class:"grid grid-cols-1 sm:grid-cols-2 gap-4"},bz={class:"space-y-4"},wz={class:"grid grid-cols-1 sm:grid-cols-2 gap-4"},kz={__name:"FamilyLineageForm",props:{data:{type:Object,default:()=>({})}},emits:["next","skip","update"],setup(t,{emit:o}){const s=o,n=B(!1);B(null),B([]);const r=t,l=Je({father:{name:"",gotra:"",nativePlace:"",vedaShaka:""},mother:{name:"",maidenGotra:"",nativePlace:"",fatherName:""},paternalGrandfather:"",paternalGrandmother:"",maternalGrandfather:"",maternalGrandmother:"",familyTreeFiles:[]}),a=async()=>{n.value=!0;try{s("update",l),s("next")}catch(d){console.error("Error saving family lineage:",d)}finally{n.value=!1}};return Oe(l,()=>{s("update",l)},{deep:!0}),Me(()=>{r.data&&(l.father=r.data.father||{name:"",gotra:"",nativePlace:"",vedaShaka:""},l.mother=r.data.mother||{name:"",maidenGotra:"",nativePlace:"",fatherName:""},l.paternalGrandfather=r.data.paternalGrandfather||"",l.paternalGrandmother=r.data.paternalGrandmother||"",l.maternalGrandfather=r.data.maternalGrandfather||"",l.maternalGrandmother=r.data.maternalGrandmother||"")}),(d,i)=>(m(),g("div",cz,[i[32]||(i[32]=Ce('<div class="mb-8"><div class="flex items-center gap-3 mb-4"><div class="w-10 h-10 bg-indigo-100 rounded-lg flex items-center justify-center"><svg class="w-5 h-5 text-indigo-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"></path></svg></div><div><h2 class="text-2xl font-bold text-gray-900">Family Lineage</h2><p class="text-gray-600">Build your family tree and heritage</p></div></div><div class="w-full bg-gray-200 rounded-full h-2"><div class="bg-indigo-600 h-2 rounded-full transition-all duration-300" style="width:60%;"></div></div><p class="text-sm text-gray-500 mt-2">Step 3 of 6 - 60% Complete</p></div>',1)),e("form",{onSubmit:qe(a,["prevent"]),class:"space-y-8"},[e("div",pz,[i[23]||(i[23]=e("h3",{class:"text-lg font-semibold text-gray-900 mb-6 flex items-center gap-2"},[e("svg",{class:"w-5 h-5 text-indigo-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})]),te(" Parents ")],-1)),e("div",mz,[e("div",gz,[i[17]||(i[17]=e("h4",{class:"font-medium text-gray-800 border-b border-indigo-200 pb-2"},"Father's Details",-1)),e("div",null,[i[12]||(i[12]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Full Name",-1)),ce(e("input",{"onUpdate:modelValue":i[0]||(i[0]=c=>l.father.name=c),type:"text",placeholder:"Enter father's full name",class:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-colors"},null,512),[[_e,l.father.name]])]),e("div",null,[i[13]||(i[13]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Gotra",-1)),ce(e("input",{"onUpdate:modelValue":i[1]||(i[1]=c=>l.father.gotra=c),type:"text",placeholder:"Enter father's gotra",class:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-colors"},null,512),[[_e,l.father.gotra]])]),e("div",null,[i[14]||(i[14]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Native Place",-1)),ce(e("input",{"onUpdate:modelValue":i[2]||(i[2]=c=>l.father.nativePlace=c),type:"text",placeholder:"Enter father's native place",class:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-colors"},null,512),[[_e,l.father.nativePlace]])]),e("div",null,[i[16]||(i[16]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Veda Shaka",-1)),ce(e("select",{"onUpdate:modelValue":i[3]||(i[3]=c=>l.father.vedaShaka=c),class:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-colors"},[...i[15]||(i[15]=[Ce('<option value="">Select Veda Shaka</option><option value="Rigveda">Rigveda</option><option value="Yajurveda">Yajurveda</option><option value="Samaveda">Samaveda</option><option value="Atharvaveda">Atharvaveda</option>',5)])],512),[[Re,l.father.vedaShaka]])])]),e("div",fz,[i[22]||(i[22]=e("h4",{class:"font-medium text-gray-800 border-b border-indigo-200 pb-2"},"Mother's Details",-1)),e("div",null,[i[18]||(i[18]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Full Name",-1)),ce(e("input",{"onUpdate:modelValue":i[4]||(i[4]=c=>l.mother.name=c),type:"text",placeholder:"Enter mother's full name",class:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-colors"},null,512),[[_e,l.mother.name]])]),e("div",null,[i[19]||(i[19]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Maiden Gotra",-1)),ce(e("input",{"onUpdate:modelValue":i[5]||(i[5]=c=>l.mother.maidenGotra=c),type:"text",placeholder:"Enter mother's maiden gotra",class:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-colors"},null,512),[[_e,l.mother.maidenGotra]])]),e("div",null,[i[20]||(i[20]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Native Place",-1)),ce(e("input",{"onUpdate:modelValue":i[6]||(i[6]=c=>l.mother.nativePlace=c),type:"text",placeholder:"Enter mother's native place",class:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-colors"},null,512),[[_e,l.mother.nativePlace]])]),e("div",null,[i[21]||(i[21]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Father's Name",-1)),ce(e("input",{"onUpdate:modelValue":i[7]||(i[7]=c=>l.mother.fatherName=c),type:"text",placeholder:"Enter maternal grandfather's name",class:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-colors"},null,512),[[_e,l.mother.fatherName]])])])])]),e("div",vz,[i[30]||(i[30]=e("h3",{class:"text-lg font-semibold text-gray-900 mb-6 flex items-center gap-2"},[e("svg",{class:"w-5 h-5 text-amber-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197m13.5-9a2.5 2.5 0 11-5 0 2.5 2.5 0 015 0z"})]),te(" Grandparents (Optional) ")],-1)),e("div",hz,[e("div",yz,[i[26]||(i[26]=e("h4",{class:"font-medium text-gray-800 border-b border-amber-200 pb-2"},"Paternal Grandparents",-1)),e("div",xz,[e("div",null,[i[24]||(i[24]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Grandfather",-1)),ce(e("input",{"onUpdate:modelValue":i[8]||(i[8]=c=>l.paternalGrandfather=c),type:"text",placeholder:"Name",class:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-amber-500 transition-colors"},null,512),[[_e,l.paternalGrandfather]])]),e("div",null,[i[25]||(i[25]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Grandmother",-1)),ce(e("input",{"onUpdate:modelValue":i[9]||(i[9]=c=>l.paternalGrandmother=c),type:"text",placeholder:"Name",class:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-amber-500 transition-colors"},null,512),[[_e,l.paternalGrandmother]])])])]),e("div",bz,[i[29]||(i[29]=e("h4",{class:"font-medium text-gray-800 border-b border-amber-200 pb-2"},"Maternal Grandparents",-1)),e("div",wz,[e("div",null,[i[27]||(i[27]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Grandfather",-1)),ce(e("input",{"onUpdate:modelValue":i[10]||(i[10]=c=>l.maternalGrandfather=c),type:"text",placeholder:"Name",class:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-amber-500 transition-colors"},null,512),[[_e,l.maternalGrandfather]])]),e("div",null,[i[28]||(i[28]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Grandmother",-1)),ce(e("input",{"onUpdate:modelValue":i[11]||(i[11]=c=>l.maternalGrandmother=c),type:"text",placeholder:"Name",class:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-amber-500 transition-colors"},null,512),[[_e,l.maternalGrandmother]])])])])])]),i[31]||(i[31]=e("div",{class:"flex flex-col sm:flex-row gap-4 pt-6 border-t border-gray-200"},null,-1))],32)]))}},_z={class:"bg-white rounded-xl shadow-lg p-8"},$z={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4"},Sz=["id","value"],Dz=["for"],Cz={class:"flex-1"},Tz={class:"flex items-center mb-2"},Ez={class:"font-semibold text-gray-900 text-sm"},Az={class:"text-xs text-gray-600"},Iz={class:"mt-2 flex items-center text-xs text-indigo-600"},Mz={class:"bg-indigo-100 px-2 py-1 rounded-full"},Rz={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Pz=["id","value"],Nz=["for"],jz={class:"flex-1"},Lz={class:"font-semibold text-gray-900 text-sm mb-1"},Bz={class:"text-xs text-gray-600"},Uz={__name:"SevaPreferencesForm",props:{data:{type:Object,default:()=>({})}},emits:["next","previous","skip","update"],setup(t,{emit:o}){const s=o,n=t,r=B(!1),l=Je({favoriteSevas:[],donationInterests:[],preferredFrequency:"",specialInterests:""}),a=[{id:"abhisheka",name:"Abhisheka",description:"Sacred bathing ritual of the deity",icon:$u,minAmount:51},{id:"arti",name:"Arti",description:"Divine light ceremony",icon:Su,minAmount:21},{id:"annadana",name:"Annadana",description:"Food donation service",icon:oa,minAmount:101},{id:"archana",name:"Archana",description:"Personal prayer offering",icon:sx,minAmount:11},{id:"kalyanam",name:"Kalyanam",description:"Divine marriage ceremony",icon:ku,minAmount:501},{id:"homam",name:"Homam",description:"Sacred fire ritual",icon:Su,minAmount:251}],d=[{id:"temple-maintenance",name:"Temple Maintenance",description:"Upkeep and renovation of temple premises",icon:nx},{id:"annadana",name:"Annadana Program",description:"Free food distribution to devotees",icon:oa},{id:"festivals",name:"Festival Celebrations",description:"Special occasions and religious festivals",icon:$u},{id:"education",name:"Religious Education",description:"Vedic studies and spiritual learning programs",icon:Zy},{id:"construction",name:"Temple Construction",description:"New building projects and expansions",icon:Qy},{id:"general",name:"General Donations",description:"Flexible contributions for temple needs",icon:ku}],i=async()=>{r.value=!0;try{s("update",l),s("next")}catch(c){console.error("Error saving seva preferences:",c)}finally{r.value=!1}};return Oe(l,()=>{s("update",l)},{deep:!0}),Me(()=>{n.data&&(l.favoriteSevas=n.data.favoriteSevas||[],l.donationInterests=n.data.donationInterests||[],l.preferredFrequency=n.data.preferredFrequency||"",l.specialInterests=n.data.specialInterests||"")}),(c,u)=>(m(),g("div",_z,[u[9]||(u[9]=e("div",{class:"mb-8"},[e("h2",{class:"text-2xl font-bold text-gray-900 mb-2"}," Seva Preferences "),e("p",{class:"text-gray-600"}," Select your preferred sevas and donation interests to personalize your temple experience. ")],-1)),e("form",{onSubmit:qe(i,["prevent"]),class:"space-y-8"},[e("div",null,[u[4]||(u[4]=e("label",{class:"block text-sm font-semibold text-gray-900 mb-4"},[te(" Favorite Sevas "),e("span",{class:"text-gray-500 font-normal"},"(Select multiple)")],-1)),e("div",$z,[(m(),g(be,null,$e(a,p=>e("div",{key:p.id,class:"relative"},[ce(e("input",{id:`seva-${p.id}`,"onUpdate:modelValue":u[0]||(u[0]=w=>l.favoriteSevas=w),value:p.id,type:"checkbox",class:"sr-only peer"},null,8,Sz),[[ct,l.favoriteSevas]]),e("label",{for:`seva-${p.id}`,class:"flex items-start p-4 border-2 border-gray-200 rounded-xl cursor-pointer transition-all duration-200 hover:border-indigo-300 peer-checked:border-indigo-600 peer-checked:bg-indigo-50"},[e("div",Cz,[e("div",Tz,[(m(),Ne(wt(p.icon),{class:"w-5 h-5 text-indigo-600 mr-2 flex-shrink-0"})),e("h3",Ez,h(p.name),1)]),e("p",Az,h(p.description),1),e("div",Iz,[e("span",Mz," "+h(p.minAmount)+"+ ",1)])]),u[3]||(u[3]=e("div",{class:"ml-3 flex items-center"},[e("div",{class:"w-5 h-5 border-2 border-gray-300 rounded peer-checked:border-indigo-600 peer-checked:bg-indigo-600 peer-checked:text-white flex items-center justify-center"},[e("svg",{class:"w-3 h-3 hidden peer-checked:block",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z","clip-rule":"evenodd"})])])],-1))],8,Dz)])),64))])]),e("div",null,[u[6]||(u[6]=e("label",{class:"block text-sm font-semibold text-gray-900 mb-4"},[te(" Donation Interests "),e("span",{class:"text-gray-500 font-normal"},"(Select categories you're interested in)")],-1)),e("div",Rz,[(m(),g(be,null,$e(d,p=>e("div",{key:p.id,class:"relative"},[ce(e("input",{id:`donation-${p.id}`,"onUpdate:modelValue":u[1]||(u[1]=w=>l.donationInterests=w),value:p.id,type:"checkbox",class:"sr-only peer"},null,8,Pz),[[ct,l.donationInterests]]),e("label",{for:`donation-${p.id}`,class:"flex items-center p-4 border-2 border-gray-200 rounded-xl cursor-pointer transition-all duration-200 hover:border-indigo-300 peer-checked:border-indigo-600 peer-checked:bg-indigo-50"},[(m(),Ne(wt(p.icon),{class:"w-6 h-6 text-indigo-600 mr-4 flex-shrink-0"})),e("div",jz,[e("h3",Lz,h(p.name),1),e("p",Bz,h(p.description),1)]),u[5]||(u[5]=e("div",{class:"w-5 h-5 border-2 border-gray-300 rounded peer-checked:border-indigo-600 peer-checked:bg-indigo-600 peer-checked:text-white flex items-center justify-center"},[e("svg",{class:"w-3 h-3 hidden peer-checked:block",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z","clip-rule":"evenodd"})])],-1))],8,Nz)])),64))])]),e("div",null,[u[7]||(u[7]=e("label",{for:"specialInterests",class:"block text-sm font-semibold text-gray-900 mb-2"}," Special Interests or Notes ",-1)),ce(e("textarea",{id:"specialInterests","onUpdate:modelValue":u[2]||(u[2]=p=>l.specialInterests=p),rows:"4",class:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-colors duration-200 resize-none",placeholder:"Any specific festivals, rituals, or temple activities you're particularly interested in..."},null,512),[[_e,l.specialInterests]])]),u[8]||(u[8]=e("div",{class:"flex flex-col sm:flex-row gap-4 pt-6 border-t border-gray-200"},[e("div",{class:"flex gap-4 flex-1"})],-1))],32)]))}},Fz={class:"relative w-full"},Vz=["for"],Oz={key:0,class:"text-red-500 ml-1"},zz={class:"relative"},Hz=["id","disabled"],qz={class:"absolute inset-y-0 right-0 flex items-center pr-3 pointer-events-none"},Gz={key:0,class:"absolute z-50 mt-2 w-full bg-white shadow-lg rounded-xl border border-gray-200 py-1 max-h-60 overflow-auto"},Jz={key:0,class:"p-2 border-b border-gray-100"},Wz=["placeholder"],Yz={class:"max-h-48 overflow-y-auto"},Kz={key:0,class:"px-4 py-3 text-sm text-gray-500 text-center"},Xz=["onClick"],Zz={class:"block truncate"},Qz={key:0,class:"absolute inset-y-0 right-0 flex items-center pr-4"},eH={key:1,class:"mt-2 text-sm text-red-600"},tH={key:2,class:"mt-2 text-sm text-gray-500"},zn={__name:"BaseSelect",props:{modelValue:{type:[String,Number,Object],default:null},options:{type:Array,default:()=>[]},label:{type:String,default:""},placeholder:{type:String,default:"Select an option"},error:{type:String,default:""},helpText:{type:String,default:""},disabled:{type:Boolean,default:!1},required:{type:Boolean,default:!1},searchable:{type:Boolean,default:!1},clearable:{type:Boolean,default:!1}},emits:["update:modelValue","change"],setup(t,{emit:o}){const s=t,n=o,r=B(!1),l=B(""),a=B(`select-${Math.random().toString(36).substr(2,9)}`),d=oe(()=>s.modelValue?s.options.find(f=>f.value===s.modelValue):null),i=oe(()=>!s.searchable||!l.value?s.options:s.options.filter(f=>f.label.toLowerCase().includes(l.value.toLowerCase()))),c=()=>{s.disabled||(r.value=!r.value)},u=f=>{n("update:modelValue",f.value),n("change",f),r.value=!1,l.value=""},p=f=>{setTimeout(()=>{var v;(v=f.relatedTarget)!=null&&v.closest(".relative")||(r.value=!1)},100)},w=f=>{var v;(v=f.target.closest(`#${a.value}`))!=null&&v.parentElement||(r.value=!1)};return Me(()=>{document.addEventListener("click",w)}),Pt(()=>{document.removeEventListener("click",w)}),(f,v)=>(m(),g("div",Fz,[t.label?(m(),g("label",{key:0,for:a.value,class:"block text-sm font-medium text-gray-900 mb-2"},[te(h(t.label)+" ",1),t.required?(m(),g("span",Oz,"*")):J("",!0)],8,Vz)):J("",!0),e("div",zz,[e("button",{id:a.value,type:"button",class:se(["relative w-full bg-white border rounded-xl px-4 py-3 text-left cursor-pointer focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-all duration-200",[t.error?"border-red-300 focus:ring-red-500 focus:border-red-500":"border-gray-300 hover:border-gray-400",t.disabled?"bg-gray-100 cursor-not-allowed opacity-50":"hover:bg-gray-50"]]),disabled:t.disabled,onClick:c,onBlur:p},[e("span",{class:se(["block truncate text-sm",d.value?"text-gray-900":"text-gray-500"])},h(d.value?d.value.label:t.placeholder),3),e("span",qz,[(m(),g("svg",{class:se(["h-5 w-5 text-gray-400 transition-transform duration-200",{"rotate-180":r.value}]),xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[...v[2]||(v[2]=[e("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"},null,-1)])],2))])],42,Hz),le(mt,{"enter-active-class":"transition ease-out duration-200","enter-from-class":"opacity-0 translate-y-1","enter-to-class":"opacity-100 translate-y-0","leave-active-class":"transition ease-in duration-150","leave-from-class":"opacity-100 translate-y-0","leave-to-class":"opacity-0 translate-y-1"},{default:ye(()=>{var N;return[r.value?(m(),g("div",Gz,[t.searchable?(m(),g("div",Jz,[ce(e("input",{"onUpdate:modelValue":v[0]||(v[0]=A=>l.value=A),type:"text",class:"w-full px-3 py-2 text-sm border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",placeholder:`Search ${((N=t.label)==null?void 0:N.toLowerCase())||"options"}...`,onClick:v[1]||(v[1]=qe(()=>{},["stop"]))},null,8,Wz),[[_e,l.value]])])):J("",!0),e("div",Yz,[i.value.length===0?(m(),g("div",Kz,h(l.value?"No matches found":"No options available"),1)):J("",!0),(m(!0),g(be,null,$e(i.value,A=>{var F,I,C;return m(),g("button",{key:A.value,type:"button",class:se(["relative w-full text-left px-4 py-3 text-sm hover:bg-indigo-50 focus:outline-none focus:bg-indigo-50 transition-colors duration-150",{"bg-indigo-100 text-indigo-900":((F=d.value)==null?void 0:F.value)===A.value,"text-gray-900":((I=d.value)==null?void 0:I.value)!==A.value}]),onClick:j=>u(A)},[e("span",Zz,h(A.label),1),((C=d.value)==null?void 0:C.value)===A.value?(m(),g("span",Qz,[...v[3]||(v[3]=[e("svg",{class:"h-5 w-5 text-indigo-600",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[e("path",{"fill-rule":"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z","clip-rule":"evenodd"})],-1)])])):J("",!0)],10,Xz)}),128))])])):J("",!0)]}),_:1})]),t.error?(m(),g("p",eH,h(t.error),1)):J("",!0),t.helpText&&!t.error?(m(),g("p",tH,h(t.helpText),1)):J("",!0)]))}},oH={class:"bg-white rounded-xl shadow-lg p-8"},sH={class:"bg-gray-50 rounded-xl p-6"},nH={class:"flex items-center mb-6"},rH={class:"ml-auto flex items-center cursor-pointer"},aH={class:"relative"},lH={class:"ml-3 text-sm text-gray-600"},iH={key:0,class:"grid grid-cols-1 md:grid-cols-2 gap-6"},dH=["value"],uH={class:"bg-gray-50 rounded-xl p-6"},cH={class:"flex items-center justify-between mb-6"},pH={class:"flex items-center"},mH={key:0,class:"text-center py-8 text-gray-500"},gH={key:1,class:"space-y-6"},fH={class:"flex items-center justify-between mb-4"},vH={class:"font-semibold text-gray-900"},hH=["onClick"],yH={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4"},xH=["value","onInput"],bH={class:"bg-red-50 rounded-xl p-6"},wH={class:"flex items-center justify-between mb-6"},kH={class:"flex items-center"},_H={key:0,class:"text-center py-8 text-gray-500"},$H={key:1,class:"space-y-6"},SH={class:"flex items-center justify-between mb-4"},DH={class:"font-semibold text-gray-900"},CH=["onClick"],TH={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4"},EH={__name:"FamilyMembersForm",props:{data:{type:Object,default:()=>({spouse:{name:"",email:"",phone:"",dateOfBirth:"",gotra:"",nakshatra:""},children:[],emergencyContacts:[],hasSpouse:!1})}},emits:["next","previous","skip","update","updateData"],setup(t,{emit:o}){const s=t,n=o,r=B(!1),l=B(s.data.hasSpouse||!1),a=Je({spouse:{...s.data.spouse},children:s.data.children?[...s.data.children]:[],emergencyContacts:s.data.emergencyContacts?[...s.data.emergencyContacts]:[]}),d=[{value:"bharadvaja",label:"Bharadvaja"},{value:"kashyapa",label:"Kashyapa"},{value:"atri",label:"Atri"},{value:"vasishta",label:"Vasishta"},{value:"gautama",label:"Gautama"},{value:"jamadagni",label:"Jamadagni"},{value:"vishvamitra",label:"Vishvamitra"}],i=[{value:"male",label:"Male"},{value:"female",label:"Female"}],c=C=>{if(!C)return"";try{if(typeof C=="string"&&C.includes("T")){const j=new Date(C);return isNaN(j.getTime())?"":j.toISOString().split("T")[0]}return C instanceof Date?isNaN(C.getTime())?"":C.toISOString().split("T")[0]:typeof C=="string"&&/^\d{4}-\d{2}-\d{2}$/.test(C)?C:""}catch(j){return console.warn("Date formatting error:",j),""}},u=C=>{if(!C)return"";try{const j=new Date(C+"T00:00:00Z");return isNaN(j.getTime())?"":j.toISOString()}catch(j){return console.warn("Date conversion error:",j),""}},p=C=>{a.spouse.dateOfBirth=u(C),F()},w=(C,j)=>{a.children[C]&&(a.children[C].dateOfBirth=u(j),F())},f=()=>{a.children.push({name:"",dateOfBirth:"",gender:"",education:"",interests:""}),F()},v=C=>{a.children.splice(C,1),F()},N=()=>{a.emergencyContacts.push({name:"",relationship:"",phone:"",address:""}),F()},A=C=>{a.emergencyContacts.splice(C,1),F()},F=()=>{const C={...a,hasSpouse:l.value};n("update",C),n("updateData",C)},I=async()=>{r.value=!0;try{const C={...a,hasSpouse:l.value};n("update",C),n("updateData",C),n("next")}catch(C){console.error("Error saving family details:",C)}finally{r.value=!1}};return Oe([()=>a.spouse.name,()=>a.spouse.email,()=>a.spouse.phone,()=>a.spouse.gotra,()=>a.spouse.nakshatra,l],()=>{F()},{deep:!0}),Oe(()=>a.children.map(C=>({name:C.name,gender:C.gender,education:C.education,interests:C.interests})),()=>{F()},{deep:!0}),Oe(()=>a.emergencyContacts,()=>{F()},{deep:!0}),Oe(l,()=>{F()}),(C,j)=>(m(),g("div",oH,[j[22]||(j[22]=e("div",{class:"mb-8"},[e("h2",{class:"text-2xl font-bold text-gray-900 mb-2"}," Family Members "),e("p",{class:"text-gray-600"}," Add your family members and emergency contacts for better temple community engagement. ")],-1)),e("form",{onSubmit:qe(I,["prevent"]),class:"space-y-8"},[e("div",sH,[e("div",nH,[le(Te(oa),{class:"w-6 h-6 text-indigo-600 mr-3"}),j[8]||(j[8]=e("h3",{class:"text-lg font-semibold text-gray-900"},"Spouse Details",-1)),e("label",rH,[ce(e("input",{"onUpdate:modelValue":j[0]||(j[0]=$=>l.value=$),type:"checkbox",class:"sr-only"},null,512),[[ct,l.value]]),e("div",aH,[j[7]||(j[7]=e("div",{class:"block bg-gray-300 w-10 h-6 rounded-full"},null,-1)),e("div",{class:se(["absolute left-1 top-1 bg-white w-4 h-4 rounded-full transition-transform duration-200",l.value?"transform translate-x-4 bg-indigo-600":""])},null,2)]),e("span",lH,h(l.value?"Married":"Single"),1)])]),l.value?(m(),g("div",iH,[le(at,{modelValue:a.spouse.name,"onUpdate:modelValue":j[1]||(j[1]=$=>a.spouse.name=$),label:"Spouse Name",placeholder:"Enter spouse's full name",required:""},null,8,["modelValue"]),le(at,{modelValue:a.spouse.email,"onUpdate:modelValue":j[2]||(j[2]=$=>a.spouse.email=$),type:"email",label:"Spouse Email",placeholder:"spouse@example.com"},null,8,["modelValue"]),le(at,{modelValue:a.spouse.phone,"onUpdate:modelValue":j[3]||(j[3]=$=>a.spouse.phone=$),type:"tel",label:"Spouse Phone",placeholder:"+91 00000 00000"},null,8,["modelValue"]),e("div",null,[j[9]||(j[9]=e("label",{class:"block text-sm font-semibold text-gray-900 mb-2"}," Date of Birth ",-1)),e("input",{value:c(a.spouse.dateOfBirth),onInput:j[4]||(j[4]=$=>p($.target.value)),type:"date",class:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-colors duration-200"},null,40,dH)]),e("div",null,[j[10]||(j[10]=e("label",{class:"block text-sm font-semibold text-gray-900 mb-2"}," Gotra ",-1)),le(zn,{modelValue:a.spouse.gotra,"onUpdate:modelValue":j[5]||(j[5]=$=>a.spouse.gotra=$),options:d,placeholder:"Select gotra"},null,8,["modelValue"])]),le(at,{modelValue:a.spouse.nakshatra,"onUpdate:modelValue":j[6]||(j[6]=$=>a.spouse.nakshatra=$),label:"Nakshatra",placeholder:"Enter nakshatra"},null,8,["modelValue"])])):J("",!0)]),e("div",uH,[e("div",cH,[e("div",pH,[le(Te(lx),{class:"w-6 h-6 text-indigo-600 mr-3"}),j[11]||(j[11]=e("h3",{class:"text-lg font-semibold text-gray-900"},"Children",-1))]),e("button",{type:"button",onClick:f,class:"flex items-center px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors duration-200"},[le(Te(_u),{class:"w-4 h-4 mr-2"}),j[12]||(j[12]=te(" Add Child ",-1))])]),a.children.length===0?(m(),g("div",mH,[le(Te(ax),{class:"w-12 h-12 mx-auto mb-4 text-gray-300"}),j[13]||(j[13]=e("p",null,"No children added yet",-1)),j[14]||(j[14]=e("p",{class:"text-sm"},'Click "Add Child" to include family members',-1))])):(m(),g("div",gH,[(m(!0),g(be,null,$e(a.children,($,y)=>(m(),g("div",{key:y,class:"bg-white rounded-lg p-6 border-2 border-gray-200"},[e("div",fH,[e("h4",vH,"Child "+h(y+1),1),e("button",{type:"button",onClick:b=>v(y),class:"text-red-600 hover:text-red-800 p-1"},[le(Te(Du),{class:"w-5 h-5"})],8,hH)]),e("div",yH,[le(at,{modelValue:$.name,"onUpdate:modelValue":b=>$.name=b,label:"Name",placeholder:"Child's name",required:""},null,8,["modelValue","onUpdate:modelValue"]),e("div",null,[j[15]||(j[15]=e("label",{class:"block text-sm font-semibold text-gray-900 mb-2"}," Date of Birth * ",-1)),e("input",{value:c($.dateOfBirth),onInput:b=>w(y,b.target.value),type:"date",required:"",class:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-colors duration-200"},null,40,xH)]),e("div",null,[j[16]||(j[16]=e("label",{class:"block text-sm font-semibold text-gray-900 mb-2"}," Gender ",-1)),le(zn,{modelValue:$.gender,"onUpdate:modelValue":b=>$.gender=b,options:i,placeholder:"Select gender"},null,8,["modelValue","onUpdate:modelValue"])]),le(at,{modelValue:$.education,"onUpdate:modelValue":b=>$.education=b,label:"Education/Class",placeholder:"Current class or qualification"},null,8,["modelValue","onUpdate:modelValue"]),le(at,{modelValue:$.interests,"onUpdate:modelValue":b=>$.interests=b,label:"Interests",placeholder:"Hobbies, sports, etc."},null,8,["modelValue","onUpdate:modelValue"])])]))),128))]))]),e("div",bH,[e("div",wH,[e("div",kH,[le(Te(rx),{class:"w-6 h-6 text-red-600 mr-3"}),j[17]||(j[17]=e("h3",{class:"text-lg font-semibold text-gray-900"},"Emergency Contacts",-1))]),e("button",{type:"button",onClick:N,class:"flex items-center px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors duration-200"},[le(Te(_u),{class:"w-4 h-4 mr-2"}),j[18]||(j[18]=te(" Add Contact ",-1))])]),a.emergencyContacts.length===0?(m(),g("div",_H,[le(Te(Ta),{class:"w-12 h-12 mx-auto mb-4 text-gray-300"}),j[19]||(j[19]=e("p",null,"No emergency contacts added",-1)),j[20]||(j[20]=e("p",{class:"text-sm"},"Add at least one emergency contact for safety",-1))])):(m(),g("div",$H,[(m(!0),g(be,null,$e(a.emergencyContacts,($,y)=>(m(),g("div",{key:y,class:"bg-white rounded-lg p-6 border-2 border-gray-200"},[e("div",SH,[e("h4",DH,"Emergency Contact "+h(y+1),1),e("button",{type:"button",onClick:b=>A(y),class:"text-red-600 hover:text-red-800 p-1"},[le(Te(Du),{class:"w-5 h-5"})],8,CH)]),e("div",TH,[le(at,{modelValue:$.name,"onUpdate:modelValue":b=>$.name=b,label:"Name",placeholder:"Contact name",required:""},null,8,["modelValue","onUpdate:modelValue"]),le(at,{modelValue:$.relationship,"onUpdate:modelValue":b=>$.relationship=b,label:"Relationship",placeholder:"Brother, Sister, Friend",required:""},null,8,["modelValue","onUpdate:modelValue"]),le(at,{modelValue:$.phone,"onUpdate:modelValue":b=>$.phone=b,type:"tel",label:"Phone",placeholder:"+91 00000 00000",required:""},null,8,["modelValue","onUpdate:modelValue"]),le(at,{modelValue:$.address,"onUpdate:modelValue":b=>$.address=b,label:"Address",placeholder:"City, State"},null,8,["modelValue","onUpdate:modelValue"])])]))),128))]))]),j[21]||(j[21]=e("div",{class:"flex flex-col sm:flex-row gap-4 pt-6 border-t border-gray-200"},null,-1))],32)]))}},AH={class:"bg-white rounded-xl shadow-lg p-6 border border-indigo-100"},IH={class:"space-y-4"},MH={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},RH={class:"space-y-4"},PH={class:"space-y-6"},NH={__name:"NotesAttachmentsForm",props:{data:{type:Object,default:()=>({})}},emits:["previous","skip","submit","update","update-data"],setup(t,{emit:o}){const s=o,{showToast:n}=Ue(),r=B(!1);B(null),B(null),B(null);const l=t,a=Je({allergies:"",dietaryRestrictions:"",sankalpa:"",additionalNotes:"",shareProfile:!0,receiveNotifications:!0}),d=async()=>{try{r.value=!0,await new Promise(i=>setTimeout(i,2e3)),n("Profile completed successfully!","success"),s("submit",a)}catch{n("Error completing profile. Please try again.","error")}finally{r.value=!1}};return Oe(a,()=>{s("update",a)},{deep:!0}),Me(()=>{l.data&&(a.healthNotes=l.data.healthNotes||"",a.allergies=l.data.allergies||"",a.dietaryRestrictions=l.data.dietaryRestrictions||"",a.sankalpa=l.data.sankalpa||"",a.additionalNotes=l.data.additionalNotes||"")}),(i,c)=>(m(),g("div",AH,[c[11]||(c[11]=Ce('<div class="flex items-center justify-between mb-6"><div><h3 class="text-xl font-semibold text-gray-900">Notes &amp; Attachments</h3><p class="text-sm text-gray-600 mt-1">Add photos, health information, and personal notes</p></div><div class="text-right"><span class="text-xs font-medium text-indigo-600 bg-indigo-50 px-2 py-1 rounded-full"> Step 6 of 6 </span></div></div>',1)),e("form",{onSubmit:qe(d,["prevent"]),class:"space-y-8"},[e("div",IH,[c[6]||(c[6]=e("div",{class:"flex items-center space-x-2"},[e("svg",{class:"w-5 h-5 text-indigo-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})]),e("h4",{class:"text-lg font-medium text-gray-900"},"Health Information")],-1)),e("div",MH,[e("div",null,[c[4]||(c[4]=e("label",{for:"allergies",class:"block text-sm font-medium text-gray-700 mb-2"}," Allergies/Medical Conditions ",-1)),ce(e("textarea",{id:"allergies","onUpdate:modelValue":c[0]||(c[0]=u=>a.allergies=u),rows:"4",placeholder:"List any allergies or medical conditions...",class:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-colors resize-none"},null,512),[[_e,a.allergies]])]),e("div",null,[c[5]||(c[5]=e("label",{for:"dietaryRestrictions",class:"block text-sm font-medium text-gray-700 mb-2"}," Dietary Restrictions ",-1)),ce(e("textarea",{id:"dietaryRestrictions","onUpdate:modelValue":c[1]||(c[1]=u=>a.dietaryRestrictions=u),rows:"4",placeholder:"Vegetarian, vegan, specific food restrictions...",class:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-colors resize-none"},null,512),[[_e,a.dietaryRestrictions]])])])]),e("div",RH,[c[9]||(c[9]=e("div",{class:"flex items-center space-x-2"},[e("svg",{class:"w-5 h-5 text-indigo-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11.049 2.927c.3-.921 1.603-.921 1.902 0l1.519 4.674a1 1 0 00.95.69h4.915c.969 0 1.371 1.24.588 1.81l-3.976 2.888a1 1 0 00-.363 1.118l1.518 4.674c.3.922-.755 1.688-1.538 1.118l-3.976-2.888a1 1 0 00-1.176 0l-3.976 2.888c-.783.57-1.838-.197-1.538-1.118l1.518-4.674a1 1 0 00-.363-1.118l-3.976-2.888c-.784-.57-.38-1.81.588-1.81h4.914a1 1 0 00.951-.69l1.519-4.674z"})]),e("h4",{class:"text-lg font-medium text-gray-900"},"Sankalpa & Personal Notes")],-1)),e("div",PH,[e("div",null,[c[7]||(c[7]=e("label",{for:"sankalpa",class:"block text-sm font-medium text-gray-700 mb-2"}," Personal Sankalpa/Intentions ",-1)),ce(e("textarea",{id:"sankalpa","onUpdate:modelValue":c[2]||(c[2]=u=>a.sankalpa=u),rows:"4",placeholder:"Share your spiritual intentions, goals, or personal sankalpa...",class:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-colors resize-none"},null,512),[[_e,a.sankalpa]])]),e("div",null,[c[8]||(c[8]=e("label",{for:"additionalNotes",class:"block text-sm font-medium text-gray-700 mb-2"}," Additional Notes ",-1)),ce(e("textarea",{id:"additionalNotes","onUpdate:modelValue":c[3]||(c[3]=u=>a.additionalNotes=u),rows:"4",placeholder:"Any other information you'd like to share with the temple...",class:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-colors resize-none"},null,512),[[_e,a.additionalNotes]])])])]),c[10]||(c[10]=e("div",{class:"flex flex-col sm:flex-row justify-between items-center pt-6 border-t border-gray-200 space-y-4 sm:space-y-0"},[e("div",{class:"flex space-x-4"})],-1))],32)]))}},jH={class:"min-h-screen bg-gray-50"},LH={key:0,class:"min-h-screen flex items-center justify-center bg-gray-50"},BH={class:"bg-white shadow-lg"},UH={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4"},FH={class:"flex items-center justify-between"},VH={class:"flex items-center space-x-4"},OH={class:"text-lg font-semibold text-gray-900"},zH={key:0,class:"text-sm text-gray-500"},HH={class:"flex items-center space-x-3"},qH={class:"text-right hidden sm:block"},GH={class:"text-gray-900 font-medium text-sm"},JH={class:"text-gray-500 text-xs"},WH={class:"py-8"},YH={class:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8"},KH={class:"bg-white rounded-xl shadow-sm border border-gray-200 mb-8 p-6"},XH={class:"flex items-center justify-between text-sm mb-2"},ZH={class:"font-medium text-indigo-600"},QH={class:"text-gray-600"},eq={class:"w-full bg-gray-200 rounded-full h-2"},tq={class:"bg-white rounded-xl shadow-sm border border-gray-200 mb-6"},oq={class:"px-6 py-4 border-b border-gray-100"},sq={class:"flex space-x-8 overflow-x-auto"},nq=["onClick"],rq={key:0,xmlns:"http://www.w3.org/2000/svg",class:"w-3 h-3",viewBox:"0 0 20 20",fill:"currentColor"},aq={key:1},lq={class:"bg-white rounded-xl shadow-sm border border-gray-200"},iq={class:"p-6"},dq={key:0,class:"flex flex-col items-center justify-center py-12"},uq={key:1,class:"bg-red-50 p-4 rounded-lg"},cq={class:"flex"},pq={class:"ml-3"},mq={class:"mt-2 text-sm text-red-700"},gq={key:2,class:"min-h-[400px]"},fq={key:0},vq={key:1},hq={key:2},yq={key:3},xq={key:4},bq={key:5},wq={key:3,class:"flex items-center justify-between pt-6 border-t border-gray-100 mt-8"},kq=["disabled"],_q={class:"flex items-center space-x-3"},$q=["disabled"],Sq={key:0},Dq={key:1},Cq={key:2},Tq={key:3,xmlns:"http://www.w3.org/2000/svg",class:"w-4 h-4",viewBox:"0 0 20 20",fill:"currentColor"},Mu={__name:"ProfileCreation",setup(t){const o=et(),s=tt(),n=dn(),r=Ue(),l=B(!0),a=B(!1),d=B(null),i=B(0),c=B(!1),u=B({name:"",city:"",state:""}),p=B({name:"",email:""}),w=oe(()=>s.params.id),f=B({personal:{},spiritual:{},lineage:{father:{name:"",gotra:"",nativePlace:"",vedaShaka:""},mother:{name:"",maidenGotra:"",nativePlace:"",fatherName:""},paternalGrandfather:"",paternalGrandmother:"",maternalGrandfather:"",maternalGrandmother:""},preferences:{favoriteSevas:[],donationInterests:[],preferredFrequency:"",specialInterests:""},family:{spouse:{name:"",email:"",phone:"",dateOfBirth:"",gotra:"",nakshatra:""},children:[],emergencyContacts:[]},notes:{healthNotes:"",allergies:"",dietaryRestrictions:"",sankalpa:"",additionalNotes:"",documents:[],profilePhoto:null,familyPhoto:null,shareProfile:!0,receiveNotifications:!0}}),v=B([{id:"personal",title:"Personal Details",component:"PersonalDetailsForm",completed:!1},{id:"spiritual",title:"Spiritual Info",component:"SpiritualInfoForm",completed:!1},{id:"lineage",title:"Family Lineage",component:"FamilyLineageForm",completed:!1},{id:"preferences",title:"Seva Preferences",component:"SevaPreferencesForm",completed:!1},{id:"family",title:"Family Members",component:"FamilyMembersForm",completed:!1},{id:"notes",title:"Notes & Attachments",component:"NotesAttachmentsForm",completed:!1}]),N=async()=>{var _;try{console.log("Fetching temple information...");const k=localStorage.getItem("selectedTempleName");k&&(u.value.name=k,console.log("Temple name from localStorage:",k));const L=w.value||localStorage.getItem("selectedEntityId")||localStorage.getItem("current_entity_id")||localStorage.getItem("current_tenant_id");if(!L){console.warn("No entity ID found"),u.value.name="Temple";return}console.log("Fetching temple details for entity ID:",L);try{const z=await pe.get(`/entities/${L}`);console.log("Temple API response:",z);const q=((_=z.data)==null?void 0:_.data)||z.data||z;q&&(u.value={name:q.name||q.Name||k||"Temple",city:q.city||q.City||"",state:q.state||q.State||""},u.value.name&&localStorage.setItem("selectedTempleName",u.value.name),console.log("Temple info loaded:",u.value))}catch(z){console.warn("API fetch failed, using localStorage data:",z),u.value.name=k||"Temple"}}catch(k){console.error("Error fetching temple info:",k),u.value.name=localStorage.getItem("selectedTempleName")||"Temple"}},A=()=>{try{const _=localStorage.getItem("user_name")||localStorage.getItem("userName"),k=localStorage.getItem("user_email")||localStorage.getItem("userEmail");try{const L=localStorage.getItem("user_data");if(L){const z=JSON.parse(L);p.value={name:z.name||z.Name||_||"Devotee",email:z.email||z.Email||k||""};return}}catch(L){console.warn("Error parsing user_data:",L)}p.value={name:_||"Devotee",email:k||""},console.log("User info loaded:",p.value)}catch(_){console.error("Error fetching user info:",_),p.value={name:"Devotee",email:""}}},F=oe(()=>v.value.length),I=oe(()=>{const _=v.value.filter(k=>k.completed).length;return Math.round(_/F.value*100)}),C=oe(()=>v.value),j=_=>{_>=0&&_<F.value&&(i.value=_)},$=async()=>{c.value=!0;try{const _=v.value[i.value].id;console.log(` Moving to next step, saving data for ${_}:`,f.value[_]),await n.updateProfileStep(_,f.value[_]),v.value[i.value].completed=!0,i.value<F.value-1?i.value++:await M()}catch(_){r.error("Failed to save step data"),console.error("Error saving step:",_)}finally{c.value=!1}},y=()=>{i.value>0&&i.value--},b=()=>{i.value<F.value-1?i.value++:E()},E=async()=>{try{c.value=!0;const _=await n.completeProfile();if(_&&_.redirectPath)o.push(_.redirectPath);else{const k=n.getCurrentEntityId()||w.value;k?o.push(`/entity/${k}/devotee/dashboard`):o.push("/devotee/dashboard")}}catch(_){r.error("Failed to complete profile"),console.error("Error skipping to end:",_)}finally{c.value=!1}},R=(_,k)=>{console.log(` UPDATING STEP DATA for ${_}:`,k),f.value[_]=k},M=async()=>{c.value=!0;try{console.log(" Current stepData before completion:",JSON.stringify(f.value,null,2));const _={personal:f.value.personal||{},spiritual:f.value.spiritual||{},lineage:f.value.lineage||{},preferences:f.value.preferences||{},family:f.value.family||{},notes:f.value.notes||{}};console.log(" COMPLETE PROFILE DATA GOING TO STORE:",JSON.stringify(_,null,2));const k=await n.completeProfile();if(console.log(" Profile completion result:",k),k&&k.success)if(k.redirectPath)o.push(k.redirectPath);else{const L=n.getCurrentEntityId()||w.value;L?o.push(`/entity/${L}/devotee/dashboard`):o.push("/devotee/dashboard")}}catch(_){r.error("Failed to complete profile"),console.error("Error completing profile:",_)}finally{c.value=!1}},G=async()=>{d.value=null,a.value=!0;try{await U()}catch{d.value="Failed to load profile data. Please try again."}finally{a.value=!1}},U=async()=>{var _;try{a.value=!0,d.value=null;const k=await n.loadProfileData();k&&(f.value={personal:k.personal||{},spiritual:k.spiritual||{},lineage:k.lineage||{},preferences:k.preferences||{},family:k.family||{},notes:k.notes||{}},v.value.forEach((L,z)=>{const q=L.id,K=f.value[q]&&Object.keys(f.value[q]).length>0;v.value[z].completed=K}))}catch(k){((_=k==null?void 0:k.response)==null?void 0:_.status)!==404&&(d.value="Failed to load profile data. Please try again."),console.error("Error loading profile data:",k)}finally{a.value=!1}};return Me(async()=>{console.log("ProfileCreation component mounted");try{A(),await N(),l.value=!1,await U(),console.log("Profile creation initialized:",{temple:u.value,user:p.value,steps:v.value})}catch(_){console.error("Error during component initialization:",_),r.error("Failed to load page data")}finally{l.value=!1}}),(_,k)=>(m(),g("div",jH,[l.value?(m(),g("div",LH,[...k[12]||(k[12]=[e("div",{class:"text-center"},[e("div",{class:"animate-spin rounded-full h-16 w-16 border-b-4 border-indigo-600 mx-auto mb-4"}),e("p",{class:"text-gray-600 font-medium"},"Loading profile...")],-1)])])):(m(),g(be,{key:1},[e("div",BH,[e("div",UH,[e("div",FH,[e("div",VH,[k[13]||(k[13]=e("div",{class:"h-10 w-10 rounded-full bg-indigo-100 flex items-center justify-center"},[e("svg",{class:"h-6 w-6 text-indigo-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})])],-1)),e("div",null,[e("h2",OH,h(u.value.name||"Temple"),1),u.value.city||u.value.state?(m(),g("p",zH,h(u.value.city)+h(u.value.city&&u.value.state?", ":"")+h(u.value.state),1)):J("",!0)])]),e("div",HH,[e("div",qH,[e("p",GH,h(p.value.name||"Devotee"),1),e("p",JH,h(p.value.email||""),1)]),k[14]||(k[14]=e("div",{class:"w-10 h-10 bg-indigo-100 rounded-full flex items-center justify-center"},[e("svg",{class:"w-6 h-6 text-indigo-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})])],-1))])])])]),e("div",WH,[e("div",YH,[e("div",KH,[e("div",{class:"flex items-center justify-between mb-4"},[k[15]||(k[15]=e("div",null,[e("h1",{class:"text-2xl font-bold text-gray-900"},"Complete Your Profile"),e("p",{class:"text-gray-600 mt-1"},"Build your spiritual profile step by step")],-1)),e("button",{onClick:E,class:"text-indigo-600 hover:text-indigo-500 font-medium text-sm"}," Skip All  ")]),e("div",null,[e("div",XH,[e("span",ZH,h(C.value.filter(L=>L.completed).length)+" of "+h(F.value)+" completed ",1),e("span",QH,h(I.value)+"% Complete",1)]),e("div",eq,[e("div",{class:"bg-indigo-600 h-2 rounded-full transition-all duration-300",style:Vt({width:`${I.value}%`})},null,4)])])]),e("div",tq,[e("div",oq,[e("nav",sq,[(m(!0),g(be,null,$e(v.value,(L,z)=>(m(),g("button",{key:L.id,onClick:q=>j(z),class:se(["flex items-center space-x-2 py-2 px-3 rounded-lg text-sm font-medium whitespace-nowrap transition-colors",i.value===z?"bg-indigo-100 text-indigo-700":L.completed?"text-green-600 hover:bg-green-50":"text-gray-500 hover:bg-gray-50"])},[e("div",{class:se(["w-5 h-5 rounded-full flex items-center justify-center text-xs",i.value===z?"bg-indigo-600 text-white":L.completed?"bg-green-100 text-green-600":"bg-gray-200 text-gray-500"])},[L.completed?(m(),g("svg",rq,[...k[16]||(k[16]=[e("path",{"fill-rule":"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z","clip-rule":"evenodd"},null,-1)])])):(m(),g("span",aq,h(z+1),1))],2),e("span",null,h(L.title),1)],10,nq))),128))])])]),e("div",lq,[e("div",iq,[a.value?(m(),g("div",dq,[...k[17]||(k[17]=[e("svg",{class:"animate-spin h-10 w-10 text-indigo-500",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),e("p",{class:"mt-4 text-gray-600"},"Loading...",-1)])])):d.value?(m(),g("div",uq,[e("div",cq,[k[19]||(k[19]=e("svg",{class:"h-5 w-5 text-red-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})],-1)),e("div",pq,[k[18]||(k[18]=e("h3",{class:"text-sm font-medium text-red-800"},"An error occurred",-1)),e("p",mq,h(d.value),1),e("div",{class:"mt-4"},[e("button",{onClick:G,class:"text-sm font-medium text-red-700 hover:text-red-600"}," Try again ")])])])])):(m(),g("div",gq,[i.value===0?(m(),g("div",fq,[le(KO,{data:f.value.personal,onUpdate:k[0]||(k[0]=L=>R("personal",L)),onUpdateData:k[1]||(k[1]=L=>R("personal",L)),onNext:$},null,8,["data"])])):i.value===1?(m(),g("div",vq,[le(uz,{data:f.value.spiritual,onUpdate:k[2]||(k[2]=L=>R("spiritual",L)),onUpdateData:k[3]||(k[3]=L=>R("spiritual",L)),onNext:$},null,8,["data"])])):i.value===2?(m(),g("div",hq,[le(kz,{data:f.value.lineage,onUpdate:k[4]||(k[4]=L=>R("lineage",L)),onUpdateData:k[5]||(k[5]=L=>R("lineage",L)),onNext:$},null,8,["data"])])):i.value===3?(m(),g("div",yq,[le(Uz,{data:f.value.preferences,onUpdate:k[6]||(k[6]=L=>R("preferences",L)),onUpdateData:k[7]||(k[7]=L=>R("preferences",L)),onNext:$},null,8,["data"])])):i.value===4?(m(),g("div",xq,[le(EH,{data:f.value.family,onUpdate:k[8]||(k[8]=L=>R("family",L)),onUpdateData:k[9]||(k[9]=L=>R("family",L)),onNext:$},null,8,["data"])])):i.value===5?(m(),g("div",bq,[le(NH,{data:f.value.notes,onUpdate:k[10]||(k[10]=L=>R("notes",L)),onUpdateData:k[11]||(k[11]=L=>R("notes",L)),onSubmit:M},null,8,["data"])])):J("",!0)])),!a.value&&!d.value?(m(),g("div",wq,[e("button",{onClick:y,disabled:i.value===0,class:"flex items-center space-x-2 px-4 py-2 text-gray-600 hover:text-gray-900 disabled:opacity-50 disabled:cursor-not-allowed"},[...k[20]||(k[20]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"w-4 h-4",viewBox:"0 0 20 20",fill:"currentColor"},[e("path",{"fill-rule":"evenodd",d:"M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z","clip-rule":"evenodd"})],-1),e("span",null,"Previous",-1)])],8,kq),e("div",_q,[e("button",{onClick:b,class:"px-4 py-2 text-gray-500 hover:text-gray-700 font-medium"}," Skip This Step "),e("button",{onClick:$,disabled:c.value,class:"flex items-center space-x-2 bg-indigo-600 hover:bg-indigo-700 disabled:bg-indigo-400 text-white px-6 py-2 rounded-lg font-medium transition-colors"},[c.value?(m(),g("span",Sq,"Saving...")):i.value===F.value-1?(m(),g("span",Dq,"Complete Profile")):(m(),g("span",Cq,"Next Step")),c.value?J("",!0):(m(),g("svg",Tq,[...k[21]||(k[21]=[e("path",{"fill-rule":"evenodd",d:"M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z","clip-rule":"evenodd"},null,-1)])]))],8,$q)])])):J("",!0)])]),k[22]||(k[22]=Ce('<div class="mt-6 bg-indigo-50 rounded-xl p-6"><div class="flex items-start space-x-3"><svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5 text-indigo-500 mt-0.5" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"></path></svg><div><h3 class="text-sm font-medium text-indigo-900 mb-1">Need Help?</h3><p class="text-sm text-indigo-700 mb-3"> All steps are optional and can be completed later from your dashboard. However, a complete profile helps temple administrators serve you better. </p><button class="text-sm text-indigo-600 hover:text-indigo-500 font-medium"> Contact Support  </button></div></div></div>',1))])])],64))]))}};function Eq(){const t=B(!1),o=B(null),s=Je({events:[],sevas:[],donations:[],announcements:[]}),n=Je({totalEvents:0,upcomingEvents:0,totalSevas:0,upcomingSevas:0,totalDonations:0,recentDonations:0}),r=()=>({headers:{Authorization:`Bearer ${localStorage.getItem("auth_token")}`,"Content-Type":"application/json"}}),l=v=>{var N,A,F,I;return console.error("API Error:",v),(A=(N=v.response)==null?void 0:N.data)!=null&&A.message?new Error(v.response.data.message):(I=(F=v.response)==null?void 0:F.data)!=null&&I.error?new Error(v.response.data.error):v.message?new Error(v.message):new Error("An unexpected error occurred")},a=async v=>{if(!v){console.error("Entity ID is required");return}t.value=!0,o.value=null;try{const[N,A]=await Promise.all([d(v),c(v)]);return p(),{events:s.events,sevas:s.sevas}}catch(N){throw o.value=l(N),o.value}finally{t.value=!1}},d=async v=>{try{localStorage.setItem("current_entity_id",v);const N=await Ie.get("/events",r());return s.events=N.data,n.totalEvents=s.events.length,n.upcomingEvents=s.events.filter(A=>new Date(A.event_date)>=new Date).length,s.events}catch(N){return console.error("Error fetching events:",N),[]}},i=async v=>{try{localStorage.setItem("current_entity_id",v),console.log(`Fetching upcoming events for entity ID: ${v}`);const N=localStorage.getItem("current_tenant_id")||v;console.log(`Using tenant ID: ${N}`);const A=r();A.headers["X-Entity-ID"]=v.toString();const F=await Ie.get("/events/upcoming",A);return Array.isArray(F.data)?(s.upcomingEvents=F.data,s.upcomingEvents):(console.warn("Unexpected response format from events/upcoming:",F.data),[])}catch(N){return console.error("Error fetching upcoming events:",N),[]}},c=async v=>{try{const N=await Ie.get(`/sevas?entity_id=${v}`,r());return s.sevas=N.data,n.totalSevas=s.sevas.length,n.upcomingSevas=s.sevas.filter(A=>A.active===!0).length,s.sevas}catch(N){return console.error("Error fetching sevas:",N),[]}},u=async()=>{try{const v=await Ie.get("/sevas/my-bookings",r());return s.myBookings=v.data,s.myBookings}catch(v){return console.error("Error fetching seva bookings:",v),[]}},p=()=>{n.totalEvents=s.events.length,n.upcomingEvents=s.events.filter(v=>new Date(v.event_date)>=new Date).length,n.totalSevas=s.sevas.length,n.upcomingSevas=s.sevas.filter(v=>v.active===!0).length};return{loading:t,error:o,activities:s,stats:n,fetchAllActivities:a,fetchEvents:d,fetchUpcomingEvents:i,fetchSevas:c,fetchMySevaBookings:u,fetchEntityDetails:async v=>{try{return(await Ie.get(`/entities/${v}`,r())).data}catch(N){throw console.error("Error fetching entity details:",N),l(N)}},fetchUserProfile:async()=>{try{const N=(await Ie.get("/auth/me",r())).data.id,A=await Ie.get(`/profiles/${N}`,r()),F=await Ie.get("/memberships",r());return{profile:A.data,memberships:F.data}}catch(v){throw console.error("Error fetching user profile:",v),l(v)}}}}const Aq={class:"relative flex items-center justify-between"},Iq={class:"flex items-center space-x-4"},Mq={class:"text-2xl md:text-3xl font-bold text-white mb-1"},Rq={class:"text-base md:text-lg text-white/90"},Pq={key:0,class:"flex flex-wrap items-center gap-4 mt-3"},Nq={key:0,class:"flex items-center text-white/80 text-sm"},jq={key:1,class:"flex items-center text-white/80 text-sm"},Lq={key:2,class:"flex items-center text-white/80 text-sm"},Bq={key:0,class:"hidden md:flex items-center space-x-3"},Uq={key:0,class:"md:hidden mt-4 pt-4 border-t border-white/20"},Fq={class:"flex flex-wrap gap-2"},up={__name:"WelcomeBanner",props:{userRole:{type:String,required:!0,validator:t=>["tenant","templeadmin","entity_admin","devotee","volunteer","super_admin","superadmin","standard_user","standarduser","monitoring_user","monitoringuser"].includes(t)},userName:{type:String,default:""},entityName:String,lastLogin:[String,Date],profileCompletion:{type:Number,default:null},showActions:{type:Boolean,default:!0},variant:{type:String,default:"gradient",validator:t=>["gradient","solid","minimal"].includes(t)}},emits:["create-temple","complete-profile","quick-action"],setup(t,{emit:o}){const s=t,n=We(),r=B(""),l=oe(()=>{var I,C;return r.value?r.value:(I=n.user)!=null&&I.name||(C=n.user)!=null&&C.fullName?n.user.name||n.user.fullName:s.userName||"User"}),a=oe(()=>{const I={tenant:{title:"Temple Administrator",icon:"BuildingOfficeIcon",gradient:"from-indigo-600 to-purple-600",solid:"bg-indigo-600"},templeadmin:{title:"Temple Administrator",icon:"BuildingOfficeIcon",gradient:"from-indigo-600 to-purple-600",solid:"bg-indigo-600"},entity_admin:{title:"Temple Manager",icon:"CogIcon",gradient:"from-blue-600 to-indigo-600",solid:"bg-blue-600"},devotee:{title:"Devotee",icon:"UserIcon",gradient:"from-green-600 to-blue-600",solid:"bg-green-600"},volunteer:{title:"Volunteer",icon:"HandRaisedIcon",gradient:"from-orange-600 to-red-600",solid:"bg-orange-600"},super_admin:{title:"System Administrator",icon:"ShieldCheckIcon",gradient:"from-red-600 to-pink-600",solid:"bg-red-600"},superadmin:{title:"System Administrator",icon:"ShieldCheckIcon",gradient:"from-red-600 to-pink-600",solid:"bg-red-600"},standard_user:{title:"Standard User",icon:"UserIcon",gradient:"from-teal-600 to-cyan-600",solid:"bg-teal-600"},standarduser:{title:"Standard User",icon:"UserIcon",gradient:"from-teal-600 to-cyan-600",solid:"bg-teal-600"},monitoring_user:{title:"Monitoring User",icon:"EyeIcon",gradient:"from-slate-600 to-gray-600",solid:"bg-slate-600"},monitoringuser:{title:"Monitoring User",icon:"EyeIcon",gradient:"from-slate-600 to-gray-600",solid:"bg-slate-600"}};return I[s.userRole]||I.devotee}),d=oe(()=>{const I=new Date().getHours();let C="Hello";return I<12?C="Good Morning":I<17?C="Good Afternoon":C="Good Evening",`${C}, ${l.value}!`}),i=oe(()=>({tenant:"Manage your temples and oversee operations",templeadmin:"Manage your temples and oversee operations",entity_admin:s.entityName?`Welcome back to ${s.entityName}`:"Manage your temple operations",devotee:"Continue your spiritual journey",volunteer:"Thank you for your service",super_admin:"System overview and administration",superadmin:"System overview and administration",standard_user:"Access your temple dashboard",standarduser:"Access your temple dashboard",monitoring_user:"Monitor temple activities",monitoringuser:"Monitor temple activities"})[s.userRole]||"Welcome to your dashboard"),c=oe(()=>({tenant:"div",templeadmin:"div",entity_admin:"div",devotee:"div",volunteer:"div",super_admin:"div",superadmin:"div",standard_user:"div",standarduser:"div",monitoring_user:"div",monitoringuser:"div"})[s.userRole]),u=oe(()=>s.entityName||s.lastLogin||s.profileCompletion!==null),p=oe(()=>{const I="relative p-6 md:p-8 rounded-xl overflow-hidden";return s.variant==="gradient"?`${I} bg-gradient-to-r ${a.value.gradient}`:s.variant==="solid"?`${I} ${a.value.solid}`:`${I} bg-white border-2 border-gray-200`}),w=oe(()=>s.variant==="minimal"?"flex items-center justify-center w-16 h-16 bg-indigo-100 rounded-xl":"flex items-center justify-center w-16 h-16 bg-white/20 backdrop-blur-sm rounded-xl"),f=oe(()=>s.variant==="minimal"?"w-8 h-8 text-indigo-600":"w-8 h-8 text-white"),v=oe(()=>s.variant==="minimal"?"inline-flex items-center px-4 py-2 bg-indigo-600 text-white text-sm font-medium rounded-lg hover:bg-indigo-700 transition-colors duration-200":"inline-flex items-center px-4 py-2 bg-white/20 backdrop-blur-sm text-white text-sm font-medium rounded-lg hover:bg-white/30 transition-all duration-200"),N=oe(()=>s.variant==="minimal"?"inline-flex items-center px-3 py-2 bg-indigo-600 text-white text-sm font-medium rounded-lg hover:bg-indigo-700 transition-colors duration-200":"inline-flex items-center px-3 py-2 bg-white/20 backdrop-blur-sm text-white text-sm font-medium rounded-lg hover:bg-white/30 transition-all duration-200"),A=I=>I?new Date(I).toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"",F=async()=>{var I;if(s.userRole==="devotee"&&((I=n.user)!=null&&I.id))try{const C=await fetch(`http://localhost:8080/api/v1/api/v1/devotees/${n.user.id}`,{headers:{Authorization:`Bearer ${n.token}`,"Content-Type":"application/json"}});if(C.ok){const j=await C.json();j.success&&j.data&&(r.value=j.data.full_name||j.data.fullName||"",console.log(" WelcomeBanner: Fetched devotee name:",r.value))}}catch(C){console.error(" WelcomeBanner: Error fetching devotee name:",C)}};return Me(()=>{F()}),(I,C)=>(m(),g("div",{class:se(p.value)},[C[9]||(C[9]=Ce('<div class="absolute inset-0 bg-gradient-to-r opacity-10"><svg class="absolute inset-0 w-full h-full" viewBox="0 0 100 100" preserveAspectRatio="none"><defs><pattern id="welcome-pattern" x="0" y="0" width="20" height="20" patternUnits="userSpaceOnUse"><circle cx="2" cy="2" r="1" fill="currentColor" opacity="0.5"></circle></pattern></defs><rect width="100%" height="100%" fill="url(#welcome-pattern)"></rect></svg></div>',1)),e("div",Aq,[e("div",Iq,[e("div",{class:se(w.value)},[(m(),Ne(wt(c.value),{class:se(f.value)},null,8,["class"]))],2),e("div",null,[e("h1",Mq,h(d.value),1),e("p",Rq,h(i.value),1),u.value?(m(),g("div",Pq,[t.entityName?(m(),g("div",Nq,[C[3]||(C[3]=e("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})],-1)),te(" "+h(t.entityName),1)])):J("",!0),t.lastLogin?(m(),g("div",jq,[C[4]||(C[4]=e("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),te(" Last login: "+h(A(t.lastLogin)),1)])):J("",!0),t.profileCompletion!==null?(m(),g("div",Lq,[C[5]||(C[5]=e("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})],-1)),te(" Profile "+h(t.profileCompletion)+"% complete ",1)])):J("",!0)])):J("",!0)])]),t.showActions?(m(),g("div",Bq,[Tt(I.$slots,"actions",{},()=>[t.userRole==="tenant"||t.userRole==="templeadmin"?(m(),g("button",{key:0,onClick:C[0]||(C[0]=j=>I.$emit("create-temple")),class:se(v.value)},[...C[6]||(C[6]=[e("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),te(" Create Temple ",-1)])],2)):J("",!0),t.userRole==="entity_admin"?(m(),g("button",{key:1,onClick:C[1]||(C[1]=j=>I.$emit("quick-action")),class:se(v.value)},[...C[7]||(C[7]=[e("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 10V3L4 14h7v7l9-11h-7z"})],-1),te(" Quick Actions ",-1)])],2)):J("",!0)])])):J("",!0)]),t.showActions?(m(),g("div",Uq,[e("div",Fq,[Tt(I.$slots,"mobile-actions",{},()=>[t.userRole==="tenant"||t.userRole==="templeadmin"?(m(),g("button",{key:0,onClick:C[2]||(C[2]=j=>I.$emit("create-temple")),class:se(N.value)},[...C[8]||(C[8]=[e("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),te(" Create Temple ",-1)])],2)):J("",!0)])])])):J("",!0)],2))}},Vq={key:0,class:"flex items-center justify-between mb-6"},Oq={class:"flex items-center"},zq={key:0,class:"text-lg font-semibold text-gray-900"},Hq={key:1,class:"text-sm text-gray-500 mt-1"},qq={key:0,class:"flex items-center space-x-2"},Gq={key:1,class:"flex items-center space-x-2"},Jq=["disabled"],Wq={key:2,class:"relative"},Yq={key:0,class:"absolute right-0 mt-2 w-48 bg-white rounded-lg shadow-lg border border-gray-200 py-2 z-50"},Kq={key:1,class:"flex items-center justify-center py-12"},Xq={class:"flex items-center space-x-3"},Zq={class:"text-gray-500"},Qq={key:2,class:"flex items-center justify-center py-12"},eG={class:"text-center"},tG={class:"text-gray-500 mb-4"},oG={key:3,class:"flex items-center justify-center py-12"},sG={class:"text-center"},nG={class:"text-gray-500 mb-2"},rG={class:"text-sm text-gray-400"},aG={key:4},lG={key:5,class:"mt-6 pt-4 border-t border-gray-100"},bn={__name:"DashboardWidget",props:{title:String,subtitle:String,icon:[String,Object],iconBg:{type:String,default:"bg-indigo-100"},iconColor:{type:String,default:"text-indigo-600"},loading:{type:Boolean,default:!1},loadingText:{type:String,default:"Loading..."},error:String,empty:{type:Boolean,default:!1},emptyText:{type:String,default:"No data available"},emptySubtext:{type:String,default:"Data will appear here when available"},refreshable:{type:Boolean,default:!1},expandable:{type:Boolean,default:!1},hasMenu:{type:Boolean,default:!1},padding:{type:String,default:"normal",validator:t=>["none","sm","normal","lg"].includes(t)},height:{type:String,default:"auto",validator:t=>["auto","sm","md","lg","full"].includes(t)}},emits:["refresh","expand","retry"],setup(t,{emit:o}){const s=t,n=B(!1),r=oe(()=>({none:"p-0",sm:"p-4",normal:"p-6",lg:"p-8"})[s.padding]),l=oe(()=>({auto:"",sm:"h-64",md:"h-80",lg:"h-96",full:"h-full"})[s.height]),a=oe(()=>s.refreshable||s.expandable||s.hasMenu),d={mounted(i,c){i.clickOutsideEvent=u=>{i===u.target||i.contains(u.target)||c.value()},document.addEventListener("click",i.clickOutsideEvent)},unmounted(i){document.removeEventListener("click",i.clickOutsideEvent)}};return(i,c)=>(m(),g("div",{class:se(["bg-white rounded-xl shadow-md border border-gray-100 hover:shadow-lg transition-all duration-200",r.value,l.value])},[t.title||i.$slots.header?(m(),g("div",Vq,[e("div",Oq,[t.icon?(m(),g("div",{key:0,class:se(["flex items-center justify-center w-10 h-10 rounded-lg mr-3",t.iconBg])},[t.icon==="profile"||t.icon==="user"?(m(),g("svg",{key:0,class:se(["w-5 h-5",t.iconColor]),viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[...c[4]||(c[4]=[e("path",{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"},null,-1),e("circle",{cx:"12",cy:"7",r:"4"},null,-1)])],2)):t.icon==="bookings"||t.icon==="calendar"?(m(),g("svg",{key:1,class:se(["w-5 h-5",t.iconColor]),viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[...c[5]||(c[5]=[Ce('<rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect><line x1="16" y1="2" x2="16" y2="6"></line><line x1="8" y1="2" x2="8" y2="6"></line><line x1="3" y1="10" x2="21" y2="10"></line><path d="M8 14h.01"></path><path d="M12 14h.01"></path><path d="M16 14h.01"></path><path d="M8 18h.01"></path><path d="M12 18h.01"></path><path d="M16 18h.01"></path>',10)])],2)):t.icon==="donations"||t.icon==="heart"?(m(),g("svg",{key:2,class:se(["w-5 h-5",t.iconColor]),viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[...c[6]||(c[6]=[e("path",{d:"M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"},null,-1)])],2)):t.icon==="events"||t.icon==="lightning"?(m(),g("svg",{key:3,class:se(["w-5 h-5",t.iconColor]),viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[...c[7]||(c[7]=[e("path",{d:"M13 2L3 14h9l-1 8 10-12h-9l1-8z"},null,-1)])],2)):(m(),g("svg",{key:4,class:se(["w-5 h-5",t.iconColor]),viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[...c[8]||(c[8]=[e("circle",{cx:"12",cy:"12",r:"10"},null,-1),e("path",{d:"M12 6v6l4 2"},null,-1)])],2))],2)):J("",!0),e("div",null,[t.title?(m(),g("h3",zq,h(t.title),1)):J("",!0),t.subtitle?(m(),g("p",Hq,h(t.subtitle),1)):J("",!0)])]),i.$slots.header?(m(),g("div",qq,[Tt(i.$slots,"header")])):a.value?(m(),g("div",Gq,[t.refreshable?(m(),g("button",{key:0,onClick:c[0]||(c[0]=u=>i.$emit("refresh")),class:"p-2 text-gray-400 hover:text-indigo-600 hover:bg-indigo-50 rounded-lg transition-colors duration-200",disabled:t.loading},[(m(),g("svg",{class:se(["w-4 h-4",t.loading?"animate-spin":""]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[...c[9]||(c[9]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"},null,-1)])],2))],8,Jq)):J("",!0),t.expandable?(m(),g("button",{key:1,onClick:c[1]||(c[1]=u=>i.$emit("expand")),class:"p-2 text-gray-400 hover:text-indigo-600 hover:bg-indigo-50 rounded-lg transition-colors duration-200"},[...c[10]||(c[10]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 8V4m0 0h4M4 4l5 5m11-1V4m0 0h-4m4 0l-5 5M4 16v4m0 0h4m-4 0l5-5m11 5l-5-5m5 5v-4m0 4h-4"})],-1)])])):J("",!0),t.hasMenu?(m(),g("div",Wq,[e("button",{onClick:c[2]||(c[2]=u=>n.value=!n.value),class:"p-2 text-gray-400 hover:text-indigo-600 hover:bg-indigo-50 rounded-lg transition-colors duration-200"},[...c[11]||(c[11]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 5v.01M12 12v.01M12 19v.01M12 6a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2z"})],-1)])]),n.value?ce((m(),g("div",Yq,[Tt(i.$slots,"menu")])),[[d,()=>n.value=!1]]):J("",!0)])):J("",!0)])):J("",!0)])):J("",!0),t.loading?(m(),g("div",Kq,[e("div",Xq,[c[12]||(c[12]=e("svg",{class:"animate-spin w-6 h-6 text-indigo-600",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1)),e("span",Zq,h(t.loadingText),1)])])):t.error?(m(),g("div",Qq,[e("div",eG,[c[13]||(c[13]=e("svg",{class:"w-12 h-12 text-red-400 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),e("p",tG,h(t.error),1),e("button",{onClick:c[3]||(c[3]=u=>i.$emit("retry")),class:"text-indigo-600 hover:text-indigo-800 font-medium transition-colors duration-200"}," Try Again ")])])):t.empty?(m(),g("div",oG,[e("div",sG,[c[14]||(c[14]=e("svg",{class:"w-12 h-12 text-gray-300 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1)),e("p",nG,h(t.emptyText),1),e("p",rG,h(t.emptySubtext),1)])])):(m(),g("div",aG,[Tt(i.$slots,"default")])),i.$slots.footer?(m(),g("div",lG,[Tt(i.$slots,"footer")])):J("",!0)],2))}},iG={class:"bg-white shadow-lg"},dG={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4"},uG={class:"flex items-center justify-between"},cG={class:"flex items-center space-x-4"},pG={key:0},mG={class:"text-lg font-semibold text-gray-900"},gG={key:0,class:"text-sm text-gray-500"},fG={class:"flex items-center space-x-3"},vG={class:"text-right hidden sm:block"},hG={class:"text-gray-900 font-medium text-sm"},yG={class:"text-gray-500 text-xs"},xG={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},bG={key:1,class:"mb-6"},wG={class:"bg-amber-50 border border-amber-200 rounded-xl p-4"},kG={class:"flex items-center"},_G={class:"ml-3 flex-1"},$G={class:"text-sm text-amber-700 mt-1"},SG={class:"ml-4"},DG={class:"w-16 h-2 bg-amber-200 rounded-full"},CG={key:2,class:"flex items-center justify-center py-12"},TG={key:3,class:"bg-white rounded-xl shadow-md p-8 text-center"},EG={class:"mt-1 text-sm text-red-600"},AG={key:4},IG={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8"},MG={class:"grid grid-cols-1 lg:grid-cols-3 gap-8"},RG={class:"lg:col-span-2 space-y-6"},PG={class:"flex items-center justify-between mb-4"},NG={key:0,class:"space-y-3"},jG={class:"flex items-center space-x-4"},LG={class:"text-sm font-medium text-gray-900"},BG={class:"text-xs text-gray-500"},UG={key:1,class:"text-center py-8"},FG={class:"mt-6"},VG={class:"flex items-center justify-between mb-4"},OG={key:0,class:"text-center py-8"},zG={key:1,class:"space-y-3"},HG={class:"flex items-center space-x-4"},qG={class:"text-sm font-medium text-gray-900"},GG={class:"text-xs text-gray-500"},JG={class:"text-right"},WG={key:2,class:"space-y-3"},YG={class:"flex items-center space-x-4"},KG={class:"text-sm font-medium text-gray-900"},XG={class:"text-xs text-gray-500"},ZG={class:"text-right"},QG={key:3,class:"text-center py-8"},eJ={class:"mt-6"},tJ={class:"space-y-6"},oJ={class:"flex items-center justify-between mb-4"},sJ={key:0,class:"space-y-4"},nJ={class:"flex items-start space-x-3"},rJ={class:"flex-shrink-0"},aJ={class:"w-12 h-12 bg-gradient-to-br from-indigo-500 to-purple-600 rounded-lg flex items-center justify-center"},lJ={class:"text-white font-semibold"},iJ={class:"flex-1 min-w-0"},dJ={class:"text-sm font-medium text-gray-900 truncate"},uJ={class:"text-xs text-gray-500 mt-1"},cJ={class:"mt-2 flex items-center space-x-2"},pJ={class:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-green-100 text-green-800"},mJ={key:1,class:"text-center py-6"},gJ={class:"space-y-3"},fJ={class:"flex-1 min-w-0"},vJ={class:"text-sm text-gray-900"},hJ={class:"text-xs text-gray-500 mt-1"},yJ={class:"space-y-3"},xJ={__name:"DevoteeDashboard",props:{id:{type:[String,Number],default:null}},setup(t){const o=tt();et();const s=We(),n=dn(),r=Ot(),l=Ra(),a=dr(),{stats:d,fetchMySevaBookings:i,fetchEntityDetails:c}=Eq(),u=B(!0),p=B(null),w=B([]),f=B([]),v=B(null),N=Je({profile:!1,entity:!1,sevas:!1,events:!1,donations:!1}),A=Je({}),F=Je({sevaCount:0,upcomingSevaCount:0,eventCount:0,upcomingEventCount:0,countsInitialized:!1}),I=Je({recentSevas:[],recentDonations:[],upcomingEvents:[]}),C=oe(()=>{var W,re,ne,fe;if(F.countsInitialized&&F.sevaCount>0)return F.sevaCount;const X=I.recentSevas.length||((W=l.recentSevas)==null?void 0:W.length)||((re=w.value)==null?void 0:re.length)||((fe=(ne=n.dashboardData)==null?void 0:ne.summary)==null?void 0:fe.totalSevaBookings)||0;return X>0&&!F.countsInitialized&&(F.sevaCount=X),X}),j=oe(()=>{var ne,fe,we;if(F.countsInitialized&&F.upcomingSevaCount>0)return F.upcomingSevaCount;const re=((ne=(I.recentSevas.length>0?I.recentSevas:l.recentSevas||[]).filter(ve=>{var De,he;return((De=ve.status)==null?void 0:De.toLowerCase())==="pending"||((he=ve.Status)==null?void 0:he.toLowerCase())==="pending"}))==null?void 0:ne.length)||0||((we=(fe=n.dashboardData)==null?void 0:fe.summary)==null?void 0:we.upcomingSevas)||0;return re>0&&!F.countsInitialized&&(F.upcomingSevaCount=re),re}),$=oe(()=>{var W,re,ne;if(F.countsInitialized&&F.eventCount>0)return F.eventCount;const X=I.upcomingEvents.length>0?I.upcomingEvents.length:((W=f.value)==null?void 0:W.length)||d.totalEvents||((ne=(re=n.dashboardData)==null?void 0:re.summary)==null?void 0:ne.eventsAttended)||0;return X>0&&!F.countsInitialized&&(F.eventCount=X),X}),y=oe(()=>{var W,re,ne;if(F.countsInitialized&&F.upcomingEventCount>0)return F.upcomingEventCount;const X=I.upcomingEvents.length>0?I.upcomingEvents.length:((W=f.value)==null?void 0:W.length)||d.upcomingEvents||((ne=(re=n.dashboardData)==null?void 0:re.summary)==null?void 0:ne.upcomingEvents)||0;return X>0&&!F.countsInitialized&&(F.upcomingEventCount=X),X}),b=()=>{if(!F.countsInitialized&&(C.value>0||$.value>0)){console.log(" Locking dashboard counters:"),console.log(`- Seva count: ${C.value}`),console.log(`- Upcoming seva count: ${j.value}`),console.log(`- Event count: ${$.value}`),console.log(`- Upcoming event count: ${y.value}`),F.sevaCount=C.value,F.upcomingSevaCount=j.value,F.eventCount=$.value,F.upcomingEventCount=y.value,F.countsInitialized=!0;try{localStorage.setItem("dashboard_counts",JSON.stringify({sevaCount:F.sevaCount,upcomingSevaCount:F.upcomingSevaCount,eventCount:F.eventCount,upcomingEventCount:F.upcomingEventCount,timestamp:Date.now()}))}catch(X){console.warn("Could not save dashboard counts to localStorage",X)}}},E=oe(()=>s.user),R=oe(()=>{var ne;if(v.value)return v.value;const X=((ne=r.temples)==null?void 0:ne.find(fe=>fe.id===parseInt(o.params.id)))||r.currentTemple;if(X)return X;const W=localStorage.getItem("selectedTempleName"),re=o.params.id||localStorage.getItem("selectedEntityId");return W&&re?{id:re,name:W,status:"Active"}:null}),M=oe(()=>n.completionPercentage||0),G=oe(()=>n.profile||s.user||{}),U=oe(()=>a.recentDonations&&a.recentDonations.length>0?a.recentDonations:I.recentDonations&&I.recentDonations.length>0?I.recentDonations:[]);oe(()=>a.loadingRecent&&!N.donations),oe(()=>{var X,W,re,ne,fe;return{totalSevaBookings:n.totalSevaBookings||0,upcomingSevas:((X=n.upcomingSevas)==null?void 0:X.length)||0,totalDonations:((W=a.donationStats)==null?void 0:W.total)||n.totalDonations||0,donationCount:((re=a.donations)==null?void 0:re.length)||((ne=n.donations)==null?void 0:ne.length)||0,eventsAttended:n.eventsAttended||0,upcomingEvents:((fe=n.upcomingEvents)==null?void 0:fe.length)||0}}),oe(()=>{var X;return((X=n.upcomingSevas)==null?void 0:X.slice(0,3))||[]});const _=oe(()=>{var X;return((X=n.notifications)==null?void 0:X.slice(0,5))||[]}),k=oe(()=>{const X=I.recentSevas.length>0?I.recentSevas:l.recentSevas||[];return X.length>0&&X.forEach(W=>{const re=W.seva_id||W.SevaID||W.id||W.ID;re&&(W.seva_name||W.SevaName||W.name||W.Name)&&(A[re]=W.seva_name||W.SevaName||W.name||W.Name)}),X}),L=oe(()=>l.loadingRecentSevas&&!N.sevas),z=()=>{try{const X=localStorage.getItem("dashboard_counts");if(X){const ne=JSON.parse(X),fe=Date.now()-3600*1e3;ne.timestamp&&ne.timestamp>fe&&(console.log(" Restoring saved dashboard counts:",ne),F.sevaCount=ne.sevaCount||0,F.upcomingSevaCount=ne.upcomingSevaCount||0,F.eventCount=ne.eventCount||0,F.upcomingEventCount=ne.upcomingEventCount||0,F.countsInitialized=!0)}const W=localStorage.getItem("dashboard_local_data");if(W){const ne=JSON.parse(W),fe=Date.now()-3600*1e3;ne.timestamp&&ne.timestamp>fe&&(console.log(" Restoring saved local data"),ne.recentSevas&&Array.isArray(ne.recentSevas)&&(I.recentSevas=ne.recentSevas),ne.recentDonations&&Array.isArray(ne.recentDonations)&&(I.recentDonations=ne.recentDonations),ne.upcomingEvents&&Array.isArray(ne.upcomingEvents)&&(I.upcomingEvents=ne.upcomingEvents,f.value=ne.upcomingEvents))}const re=localStorage.getItem("dashboard_seva_names");if(re)try{const ne=JSON.parse(re);Object.assign(A,ne),console.log(" Restored seva name cache with",Object.keys(ne).length,"entries")}catch(ne){console.warn("Error parsing saved seva names:",ne)}}catch(X){console.warn("Error restoring saved data:",X)}},q=()=>(localStorage.setItem("events_tenant_id","2"),console.log(" Forcing event tenant ID to: 2"),"2"),K=()=>{try{localStorage.setItem("dashboard_seva_names",JSON.stringify(A))}catch(X){console.warn("Could not save seva name cache to localStorage",X)}},H=X=>(X==null?void 0:X.ID)||(X==null?void 0:X.id)||0,O=X=>(X==null?void 0:X.SevaID)||(X==null?void 0:X.seva_id)||0,ee=X=>(X==null?void 0:X.Status)||(X==null?void 0:X.status)||"pending",ge=X=>(X==null?void 0:X.BookingTime)||(X==null?void 0:X.booking_time)||null,de=X=>{if(!X)return"Unknown Seva";const W=O(X);if(W&&A[W])return A[W];if(X.SevaName||X.seva_name){const ne=X.SevaName||X.seva_name;return W&&(A[W]=ne,K()),ne}if(X.seva&&X.seva.name){const ne=X.seva.name;return W&&(A[W]=ne,K()),ne}if(W&&l.sevaCatalog&&Array.isArray(l.sevaCatalog)){const ne=l.sevaCatalog.find(fe=>fe.id===W||fe.ID===W);if(ne&&(ne.name||ne.Name)){const fe=ne.name||ne.Name;return A[W]=fe,K(),fe}}if(W&&l.sevaList&&Array.isArray(l.sevaList)){const ne=l.sevaList.find(fe=>fe.id===W||fe.ID===W);if(ne&&(ne.name||ne.Name)){const fe=ne.name||ne.Name;return A[W]=fe,K(),fe}}if(X.name||X.Name){const ne=X.name||X.Name;return W&&(A[W]=ne,K()),ne}if(l.getSevaNameById&&typeof l.getSevaNameById=="function")try{const ne=l.getSevaNameById(W);if(ne&&W)return A[W]=ne,K(),ne}catch(ne){console.warn(`Error getting seva name for ID ${W}:`,ne)}const re=`Seva ${W||X.id||"Unknown"}`;return W&&(A[W]=re,K()),re},ie=X=>{const W=ge(X);if(!W)return"";try{return new Date(W).toLocaleDateString("en-IN",{day:"2-digit",month:"short",year:"numeric"})}catch(re){return console.error("Error formatting booking date:",re),""}},me=X=>({pending:"bg-yellow-100 text-yellow-800",approved:"bg-green-100 text-green-800",rejected:"bg-red-100 text-red-800",completed:"bg-blue-100 text-blue-800",cancelled:"bg-red-100 text-red-800"})[X.toLowerCase()]||"bg-gray-100 text-gray-800",ke=()=>{var re;const X=G.value,W=((re=X.personal)==null?void 0:re.dateOfBirth)||X.dob||X.date_of_birth||X.birthday;if(!W)return"Not Set";try{const ne=new Date(W);return isNaN(ne.getTime())?"Invalid Date":ne.toLocaleDateString("en-IN",{day:"numeric",month:"short"})}catch{return"Invalid Date"}},Q=()=>{var re;const X=G.value,W=((re=X.personal)==null?void 0:re.dateOfBirth)||X.dob||X.date_of_birth||X.birthday;if(!W)return"Add your birthday in profile";try{const ne=new Date(W);if(isNaN(ne.getTime()))return"Add your birthday in profile";const fe=new Date,we=fe.getFullYear(),ve=new Date(we,ne.getMonth(),ne.getDate());ve<fe&&ve.setFullYear(we+1);const De=ve-fe,he=Math.ceil(De/(1e3*60*60*24));let Se=we-ne.getFullYear();if(ve>fe?Se=Se:Se=Se+1,he===0)return` Happy ${Se}th Birthday!`;if(he===1)return` Tomorrow! Turning ${Se}`;if(he<=7)return` In ${he} days (${Se}th)`;if(he<=30)return`In ${he} days  ${Se} years`;if(he<=100){const Ee=Math.floor(he/30),ae=he%30;return ae===0?`In ${Ee} month${Ee===1?"":"s"}`:`In ${Ee}m ${ae}d  Turning ${Se}`}else{const Ee=ve.getFullYear();return`${ne.toLocaleDateString("en-IN",{month:"short",day:"numeric"})}, ${Ee}  Age ${Se}`}}catch{return"Add your birthday in profile"}},D=X=>{if(!X)return"N/A";try{return new Intl.DateTimeFormat("en-IN",{year:"numeric",month:"short",day:"numeric"}).format(new Date(X))}catch{return"Invalid Date"}},x=X=>{if(!X)return"N/A";try{return typeof X=="string"&&X.includes(":")?X:new Date(X).toLocaleTimeString("en-IN",{hour:"2-digit",minute:"2-digit"})}catch{return"Invalid Time"}},S=X=>{if(!X)return"?";try{return new Intl.DateTimeFormat("en-IN",{day:"numeric"}).format(new Date(X))}catch{return"?"}},P=async X=>{if(!X||!Array.isArray(X)||X.length===0)return X;const W=JSON.parse(JSON.stringify(X));if(console.log(" Enriching",W.length,"sevas with names"),l.sevaCatalog&&Array.isArray(l.sevaCatalog)){const re={};l.sevaCatalog.forEach(ne=>{const fe=ne.id||ne.ID;fe&&(ne.name||ne.Name)&&(re[fe]=ne.name||ne.Name)}),W.forEach(ne=>{const fe=ne.seva_id||ne.SevaID||ne.id||ne.ID;fe&&re[fe]&&(ne.seva_name=re[fe],ne.SevaName=re[fe],ne.name||(ne.name=re[fe]),ne.Name||(ne.Name=re[fe]),ne.seva&&typeof ne.seva=="object"&&(ne.seva.name=re[fe]),A[fe]=re[fe])})}if(W.forEach(re=>{const ne=re.seva_id||re.SevaID||re.id||re.ID;ne&&A[ne]&&(re.seva_name=A[ne],re.SevaName=A[ne],re.name||(re.name=A[ne]),re.Name||(re.Name=A[ne]),re.seva&&typeof re.seva=="object"&&(re.seva.name=A[ne]))}),l.getSevaDetails&&typeof l.getSevaDetails=="function"){const re=W.filter(ne=>{const fe=ne.seva_id||ne.SevaID||ne.id||ne.ID;return fe&&!ne.seva_name&&!ne.SevaName&&!ne.name&&!ne.Name&&!A[fe]});if(re.length>0){console.log(" Fetching names for",re.length,"sevas");for(const ne of re){const fe=ne.seva_id||ne.SevaID||ne.id||ne.ID;if(fe)try{const we=await l.getSevaDetails(fe);if(we&&(we.name||we.Name)){const ve=we.name||we.Name,De=W.find(he=>(he.seva_id||he.SevaID||he.id||he.ID)===fe);De&&(De.seva_name=ve,De.SevaName=ve,De.name||(De.name=ve),De.Name||(De.Name=ve),De.seva&&typeof De.seva=="object"&&(De.seva.name=ve),A[fe]=ve)}}catch(we){console.warn(` Error fetching details for seva ${fe}:`,we)}}K()}}return K(),W},T=async()=>{try{const X=o.params.id,re={headers:{Authorization:`Bearer ${localStorage.getItem("auth_token")}`,"Content-Type":"application/json","X-Entity-ID":X}};console.log(` Fetching upcoming events for entity ID: ${X}`);const ne=await Ie.get("/events/upcoming",re);if(ne.data&&Array.isArray(ne.data)){const fe=new Date;fe.setHours(0,0,0,0);const we=ne.data.filter(ve=>{const De=new Date(ve.event_date||ve.date);return De.setHours(0,0,0,0),De>=fe});console.log(`Dashboard: Found ${we.length} upcoming events after filtering for entity ID ${X}`),f.value=we.slice(0,4),I.upcomingEvents=JSON.parse(JSON.stringify(we.slice(0,4)));try{localStorage.setItem("dashboard_local_data",JSON.stringify({...JSON.parse(localStorage.getItem("dashboard_local_data")||"{}"),upcomingEvents:I.upcomingEvents,timestamp:Date.now()}))}catch(ve){console.warn("Could not save events to localStorage",ve)}return we}return[]}catch(X){return console.error("Error loading dashboard upcoming events:",X),[]}},V=async()=>{var W;const X=o.params.id;if(!X){p.value="Entity ID is missing",u.value=!1;return}z(),F.countsInitialized?u.value=!1:u.value=!0,p.value=null;try{localStorage.setItem("current_entity_id",X);const re=[];console.log(" Loading seva catalog first...");try{l.fetchSevaCatalog&&(await l.fetchSevaCatalog(),console.log(" Seva catalog loaded with",((W=l.sevaCatalog)==null?void 0:W.length)||0,"items"),l.sevaCatalog&&Array.isArray(l.sevaCatalog)&&(l.sevaCatalog.forEach(he=>{const Se=he.id||he.ID,Ee=he.name||he.Name;Se&&Ee&&(A[Se]=Ee)}),K()))}catch(he){console.warn(" Error loading seva catalog:",he)}try{l.fetchSevaList&&typeof l.fetchSevaList=="function"&&(await l.fetchSevaList(),l.sevaList&&Array.isArray(l.sevaList)&&(l.sevaList.forEach(he=>{const Se=he.id||he.ID,Ee=he.name||he.Name;Se&&Ee&&(A[Se]=Ee,console.log(` Cached seva name: ID ${Se} = "${Ee}"`))}),K()))}catch(he){console.warn(" Error loading seva list:",he)}console.log(" Loading profile data...");const ne=(async()=>{try{if(n.loadProfileData)await n.loadProfileData();else{const he=await Ht.getProfile();he&&he.data&&(n.profile=he.data)}N.profile=!0}catch(he){console.warn(" Could not load profile:",he),N.profile=!0}})();re.push(ne),console.log(" Loading entity details...");const fe=(async()=>{try{const he=await c(X);he&&(v.value=he),N.entity=!0}catch(he){console.warn(" Could not load entity details:",he);try{r.fetchTemples&&await r.fetchTemples()}catch(Se){console.warn(" Could not load temples as fallback:",Se)}N.entity=!0}})();re.push(fe),F.countsInitialized&&(u.value=!1),console.log(" Loading seva bookings for entity:",X);const we=(async()=>{try{if(I.recentSevas.length===0)if(l.fetchRecentSevas&&(await l.fetchRecentSevas(X),await new Promise(he=>setTimeout(he,100))),!l.recentSevas||l.recentSevas.length===0){const he=await i(X);if(Array.isArray(he)&&he.length>0){const Se=he.filter(ae=>{const Y=ae.entity_id||ae.EntityID||ae.entityId;return Y&&parseInt(Y)===parseInt(X)});console.log(` Filtered ${Se.length} sevas for entity ${X} from ${he.length} total`);const Ee=await P(Se);w.value=Ee.slice(0,3),I.recentSevas=JSON.parse(JSON.stringify(Ee.slice(0,3)));try{localStorage.setItem("dashboard_local_data",JSON.stringify({...JSON.parse(localStorage.getItem("dashboard_local_data")||"{}"),recentSevas:I.recentSevas,timestamp:Date.now()}))}catch(ae){console.warn("Could not save sevas to localStorage",ae)}}}else{const he=l.recentSevas.filter(Ee=>{const ae=Ee.entity_id||Ee.EntityID||Ee.entityId;return ae&&parseInt(ae)===parseInt(X)});console.log(` Filtered ${he.length} sevas from store for entity ${X}`);const Se=await P(he);if(Se&&Se.length>0){I.recentSevas=JSON.parse(JSON.stringify(Se));try{localStorage.setItem("dashboard_local_data",JSON.stringify({...JSON.parse(localStorage.getItem("dashboard_local_data")||"{}"),recentSevas:I.recentSevas,timestamp:Date.now()}))}catch(Ee){console.warn("Could not save sevas to localStorage",Ee)}}}else{const he=I.recentSevas.filter(Ee=>{const ae=Ee.entity_id||Ee.EntityID||Ee.entityId;return ae&&parseInt(ae)===parseInt(X)}),Se=await P(he);I.recentSevas=JSON.parse(JSON.stringify(Se))}N.sevas=!0}catch(he){console.warn(" Error loading seva data:",he),N.sevas=!0}})();re.push(we),console.log(" Loading event data...");const ve=(async()=>{try{q();const he=await T();Array.isArray(he)&&he.length>0&&(console.log(` Successfully loaded ${he.length} upcoming events directly`),f.value=he.slice(0,3),I.upcomingEvents=he.slice(0,3)),N.events=!0}catch(he){console.warn(" Error loading event data:",he),N.events=!0}})();re.push(ve),console.log(" Loading donation data...");const De=(async()=>{try{if(I.recentDonations.length===0&&a.fetchRecentDonations)try{if(await a.fetchRecentDonations(),await new Promise(he=>setTimeout(he,200)),(!a.recentDonations||a.recentDonations.length===0)&&(console.log(" No donations loaded on first attempt, retrying..."),await a.fetchRecentDonations(),await new Promise(he=>setTimeout(he,200))),a.recentDonations&&a.recentDonations.length>0){I.recentDonations=JSON.parse(JSON.stringify(a.recentDonations)),console.log(" Successfully loaded",I.recentDonations.length,"donations");try{localStorage.setItem("dashboard_local_data",JSON.stringify({...JSON.parse(localStorage.getItem("dashboard_local_data")||"{}"),recentDonations:I.recentDonations,timestamp:Date.now()}))}catch(he){console.warn("Could not save donations to localStorage",he)}}else console.warn(" No donations available after two attempts")}catch(he){if(console.warn(" Error in fetchRecentDonations:",he),a.getDonations&&typeof a.getDonations=="function")try{const Se=await a.getDonations();Se&&Array.isArray(Se)&&Se.length>0&&(I.recentDonations=JSON.parse(JSON.stringify(Se)),console.log(" Loaded donations via alternative method"))}catch(Se){console.warn(" Alternative donation loading also failed:",Se)}}N.donations=!0}catch(he){console.warn(" Error loading donation data:",he),N.donations=!0}})();if(re.unshift(De),n.fetchDashboardData){const he=(async()=>{try{await n.fetchDashboardData(X)}catch(Se){console.warn(" Error loading dashboard data:",Se)}})();re.push(he)}Promise.all(re).then(()=>{console.log(" All data loaded successfully"),u.value=!1,b()}).catch(he=>{console.error(" Error loading dashboard data:",he),u.value=!1,b()})}catch(re){console.error(" Error in dashboard data loading:",re),p.value=re.message||"Failed to load dashboard data",u.value=!1}},Z=()=>{const X={};!N.donations&&I.recentDonations.length===0&&(!a.recentDonations||a.recentDonations.length===0)&&(console.log(" Donations data missing, scheduling reload"),X.donations=!0),!N.events&&I.upcomingEvents.length===0&&f.value.length===0&&(console.log(" Events data missing, scheduling reload"),X.events=!0),(!N.sevas||I.recentSevas.length===0||w.value.length===0||w.value.length>0&&!de(w.value[0]).includes("Archana"))&&(console.log(" Seva names missing or incorrect, scheduling reload"),X.sevas=!0),Object.keys(X).length>0&&(console.log(" Reloading missing data:",X),X.donations&&setTimeout(async()=>{try{if(a.fetchRecentDonations){if(console.log(" Reloading donations from checkAndReloadMissingData..."),await a.fetchRecentDonations(),await new Promise(W=>setTimeout(W,200)),a.recentDonations&&a.recentDonations.length>0){I.recentDonations=JSON.parse(JSON.stringify(a.recentDonations)),console.log(" Donations reloaded successfully:",I.recentDonations.length);const W=[...I.recentDonations];I.recentDonations=[],setTimeout(()=>{I.recentDonations=W},10);try{localStorage.setItem("dashboard_local_data",JSON.stringify({...JSON.parse(localStorage.getItem("dashboard_local_data")||"{}"),recentDonations:I.recentDonations,timestamp:Date.now()}))}catch(re){console.warn("Could not save donations to localStorage",re)}}else if(console.warn(" No donations found after reload attempt"),a.getDonationsByApi&&typeof a.getDonationsByApi=="function")try{const W=await a.getDonationsByApi();W&&Array.isArray(W)&&W.length>0&&(I.recentDonations=JSON.parse(JSON.stringify(W)),console.log(" Retrieved donations via direct API"))}catch(W){console.warn(" Direct API donation retrieval failed:",W)}}}catch(W){console.warn(" Failed to reload donations:",W)}},500),X.events&&setTimeout(async()=>{try{q(),await T(),console.log(" Events reloaded successfully")}catch(W){console.warn(" Failed to reload events:",W)}},700),X.sevas&&setTimeout(async()=>{try{if(l.fetchRecentSevas){if(await l.fetchRecentSevas(),await new Promise(W=>setTimeout(W,100)),l.recentSevas&&l.recentSevas.length>0){const W=await P(l.recentSevas);w.value=W.slice(0,3),I.recentSevas=JSON.parse(JSON.stringify(W)),console.log(" Sevas reloaded and enriched successfully");const re=[...w.value];w.value=[],setTimeout(()=>{w.value=re},10)}}else{const W=await i();if(Array.isArray(W)&&W.length>0){const re=await P(W);w.value=re.slice(0,3),I.recentSevas=JSON.parse(JSON.stringify(re)),console.log(" Sevas reloaded directly and enriched successfully")}}try{localStorage.setItem("dashboard_local_data",JSON.stringify({...JSON.parse(localStorage.getItem("dashboard_local_data")||"{}"),recentSevas:I.recentSevas,timestamp:Date.now()}))}catch(W){console.warn("Could not save sevas to localStorage",W)}}catch(W){console.warn(" Failed to reload sevas:",W)}},1e3))};return Me(async()=>{if(console.log(" FORCING TENANT ID 2 FOR EVENT FETCHING"),localStorage.setItem("current_tenant_id","2"),await V(),I.recentDonations.length===0&&(!a.recentDonations||a.recentDonations.length===0)){console.log(" Donation data not loaded after initial load, forcing reload...");try{if(a.fetchRecentDonations)if(console.log(" Forcing donation reload..."),await a.fetchRecentDonations(),await new Promise(X=>setTimeout(X,300)),a.recentDonations&&a.recentDonations.length>0){I.recentDonations=JSON.parse(JSON.stringify(a.recentDonations)),console.log(" Successfully forced donation reload with",I.recentDonations.length,"items");const X=[...I.recentDonations];I.recentDonations=[],setTimeout(()=>{I.recentDonations=X},10);try{localStorage.setItem("dashboard_local_data",JSON.stringify({...JSON.parse(localStorage.getItem("dashboard_local_data")||"{}"),recentDonations:I.recentDonations,timestamp:Date.now()}))}catch(W){console.warn("Could not save donations to localStorage",W)}}else console.warn(" Still no donations after forced reload")}catch(X){console.warn(" Error in forced donation reload:",X)}}f.value.length===0&&(console.log(" Events not loaded after initial load, forcing reload..."),await T()),setTimeout(()=>{Z()},1500),setTimeout(async()=>{if(w.value.length>0){const X=w.value[0],W=de(X);if(W.includes("Seva ")&&!W.includes("Archana")){console.log(" Found generic seva names, applying enrichment...");const re=await P(w.value);w.value=re,I.recentSevas=JSON.parse(JSON.stringify(re));try{localStorage.setItem("dashboard_local_data",JSON.stringify({...JSON.parse(localStorage.getItem("dashboard_local_data")||"{}"),recentSevas:I.recentSevas,timestamp:Date.now()}))}catch(ne){console.warn("Could not save enriched sevas to localStorage",ne)}console.log(" Applied seva name enrichment on second pass")}}},2500),setTimeout(async()=>{if(I.recentDonations.length===0&&(!a.recentDonations||a.recentDonations.length===0)){console.log(" Donations still missing after delay, attempting final reload...");try{if(a.fetchRecentDonations&&(await a.fetchRecentDonations(),a.recentDonations&&a.recentDonations.length>0)){I.recentDonations=JSON.parse(JSON.stringify(a.recentDonations)),console.log(" Final donation reload successful");const X=[...I.recentDonations];I.recentDonations=[],setTimeout(()=>{I.recentDonations=X},10)}}catch(X){console.warn(" Final donation reload failed:",X)}}},3500),setTimeout(async()=>{f.value.length===0&&(console.log(" Events still missing after delays, trying one final time"),await T())},4e3),setTimeout(()=>{b()},5e3)}),Oe(()=>o.params.id,X=>{X&&(console.log(` Route changed to entity ${X}, reloading dashboard...`),V())}),Oe(()=>f.value,X=>{if(X&&Array.isArray(X)&&X.length>0){I.upcomingEvents=JSON.parse(JSON.stringify(X));try{localStorage.setItem("dashboard_local_data",JSON.stringify({...JSON.parse(localStorage.getItem("dashboard_local_data")||"{}"),upcomingEvents:I.upcomingEvents,timestamp:Date.now()}))}catch(W){console.warn("Could not save events to localStorage",W)}}},{deep:!0}),(X,W)=>{var ne,fe,we;const re=Ze("router-link");return m(),g("div",null,[e("div",iG,[e("div",dG,[e("div",uG,[e("div",cG,[W[0]||(W[0]=e("div",{class:"h-10 w-10 rounded-full bg-indigo-100 flex items-center justify-center"},[e("svg",{class:"h-6 w-6 text-indigo-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})])],-1)),(ne=R.value)!=null&&ne.name?(m(),g("div",pG,[e("h2",mG,h(R.value.name),1),R.value.city&&R.value.state?(m(),g("p",gG,h(R.value.city)+", "+h(R.value.state),1)):J("",!0)])):J("",!0)]),e("div",fG,[e("div",vG,[e("p",hG,h(((fe=E.value)==null?void 0:fe.name)||"Devotee"),1),e("p",yG,h(((we=E.value)==null?void 0:we.email)||""),1)]),W[1]||(W[1]=e("div",{class:"w-10 h-10 bg-indigo-100 rounded-full flex items-center justify-center"},[e("svg",{class:"w-6 h-6 text-indigo-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})])],-1))])])])]),e("div",xG,[E.value&&R.value?(m(),Ne(up,{key:0,user:E.value,temple:R.value,role:"devotee",class:"mb-8"},null,8,["user","temple"])):J("",!0),M.value<100?(m(),g("div",bG,[e("div",wG,[e("div",kG,[W[4]||(W[4]=e("div",{class:"flex-shrink-0"},[e("svg",{class:"h-5 w-5 text-amber-400",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z","clip-rule":"evenodd"})])],-1)),e("div",_G,[W[3]||(W[3]=e("h3",{class:"text-sm font-medium text-amber-800"},"Complete Your Profile",-1)),e("p",$G,[te(" Your profile is "+h(M.value)+"% complete. ",1),le(re,{to:`/entity/${Te(o).params.id}/devotee/profile/create`,class:"font-medium text-amber-800 hover:text-amber-900 underline"},{default:ye(()=>[...W[2]||(W[2]=[te(" Complete now ",-1)])]),_:1},8,["to"])])]),e("div",SG,[e("div",DG,[e("div",{class:"h-2 bg-amber-500 rounded-full transition-all duration-300",style:Vt({width:`${M.value}%`})},null,4)])])])])])):J("",!0),u.value?(m(),g("div",CG,[...W[5]||(W[5]=[e("div",{class:"animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600"},null,-1),e("span",{class:"ml-3 text-gray-600"},"Loading dashboard...",-1)])])):p.value?(m(),g("div",TG,[W[6]||(W[6]=e("svg",{class:"mx-auto h-12 w-12 text-red-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})],-1)),W[7]||(W[7]=e("h3",{class:"mt-2 text-lg font-medium text-gray-900"},"Unable to load dashboard",-1)),e("p",EG,h(p.value),1),e("button",{onClick:V,class:"mt-4 inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500"}," Try Again ")])):(m(),g("div",AG,[e("div",IG,[le(re,{to:{name:"DevoteeMySevaBookings",params:{id:X.$route.params.id}},class:"block"},{default:ye(()=>[le(bn,{title:"Seva Bookings",value:C.value,icon:"calendar",color:"indigo"},null,8,["value"])]),_:1},8,["to"]),le(re,{to:{name:"DevoteeMyEvents",params:{id:X.$route.params.id}},class:"block"},{default:ye(()=>[le(bn,{title:"Total Events",value:$.value,icon:"calendar-days",color:"emerald",subtitle:`${y.value} upcoming`},null,8,["value","subtitle"])]),_:1},8,["to"]),le(bn,{title:"My Birthday",value:ke(),icon:"cake",color:"purple",subtitle:Q()},null,8,["value","subtitle"]),le(re,{to:{name:"DevoteeTempleSelection"},class:"block transition-transform hover:scale-105 focus:outline-none focus:ring-2 focus:ring-rose-500 focus:ring-offset-2 rounded-lg"},{default:ye(()=>[le(bn,{title:"Temple Profile",value:R.value?"Active":"Select Temple",icon:"building-library",color:"rose",subtitle:R.value?R.value.name:"Join a temple",class:"cursor-pointer hover:shadow-lg transition-shadow duration-200"},null,8,["value","subtitle"])]),_:1})]),e("div",MG,[e("div",RG,[le(Rt,{class:"p-6"},{default:ye(()=>[e("div",PG,[W[9]||(W[9]=e("h3",{class:"text-lg font-semibold text-gray-900"},"Recent Donations",-1)),le(re,{to:`/entity/${Te(o).params.id}/devotee/donations`,class:"text-sm font-medium text-indigo-600 hover:text-indigo-700"},{default:ye(()=>[...W[8]||(W[8]=[te(" View All ",-1)])]),_:1},8,["to"])]),U.value&&U.value.length>0?(m(),g("div",NG,[(m(!0),g(be,null,$e(U.value,ve=>(m(),g("div",{key:ve.id,class:"flex items-center justify-between p-4 bg-gray-50 rounded-lg"},[e("div",jG,[W[10]||(W[10]=e("div",{class:"flex-shrink-0"},[e("div",{class:"w-10 h-10 bg-rose-100 rounded-full flex items-center justify-center"},[e("svg",{class:"w-5 h-5 text-rose-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"})])])],-1)),e("div",null,[e("p",LG,""+h(ve.amount||0),1),e("p",BG,h(D(ve.created_at||ve.date)),1)])]),W[11]||(W[11]=e("div",{class:"text-right"},null,-1))]))),128))])):(m(),g("div",UG,[W[13]||(W[13]=e("svg",{class:"mx-auto h-12 w-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"})],-1)),W[14]||(W[14]=e("h3",{class:"mt-2 text-sm font-medium text-gray-900"},"No recent donations",-1)),W[15]||(W[15]=e("p",{class:"mt-1 text-sm text-gray-500"},"Make your first donation to support the temple.",-1)),e("div",FG,[le(re,{to:`/entity/${Te(o).params.id}/devotee/donations`,class:"inline-flex items-center px-4 py-2 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500"},{default:ye(()=>[...W[12]||(W[12]=[te(" Donate Now ",-1)])]),_:1},8,["to"])])]))]),_:1}),le(Rt,{class:"p-6"},{default:ye(()=>[e("div",VG,[W[17]||(W[17]=e("h3",{class:"text-lg font-semibold text-gray-900"},"My Seva Bookings",-1)),le(re,{to:`/entity/${Te(o).params.id}/devotee/my-seva-bookings`,class:"text-sm font-medium text-indigo-600 hover:text-indigo-700"},{default:ye(()=>[...W[16]||(W[16]=[te(" View All ",-1)])]),_:1},8,["to"])]),L.value?(m(),g("div",OG,[...W[18]||(W[18]=[e("div",{class:"animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600 mx-auto"},null,-1),e("span",{class:"mt-2 text-sm text-gray-500 block"},"Loading seva bookings...",-1)])])):k.value&&k.value.length>0?(m(),g("div",zG,[(m(!0),g(be,null,$e(k.value.slice(0,3),ve=>(m(),g("div",{key:H(ve),class:"flex items-center justify-between p-4 bg-gray-50 rounded-lg"},[e("div",HG,[W[19]||(W[19]=e("div",{class:"flex-shrink-0"},[e("div",{class:"w-10 h-10 bg-indigo-100 rounded-full flex items-center justify-center"},[e("svg",{class:"w-5 h-5 text-indigo-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})])])],-1)),e("div",null,[e("p",qG,h(de(ve)),1),e("p",GG,h(ie(ve)),1)])]),e("div",JG,[e("span",{class:se([me(ee(ve)),"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium"])},h(ee(ve).charAt(0).toUpperCase()+ee(ve).slice(1)),3)])]))),128))])):w.value&&w.value.length>0?(m(),g("div",WG,[(m(!0),g(be,null,$e(w.value.slice(0,3),ve=>{var De;return m(),g("div",{key:ve.id,class:"flex items-center justify-between p-4 bg-gray-50 rounded-lg"},[e("div",YG,[W[20]||(W[20]=e("div",{class:"flex-shrink-0"},[e("div",{class:"w-10 h-10 bg-indigo-100 rounded-full flex items-center justify-center"},[e("svg",{class:"w-5 h-5 text-indigo-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})])])],-1)),e("div",null,[e("p",KG,h(((De=ve.seva)==null?void 0:De.name)||ve.name),1),e("p",XG,h(D(ve.booking_date))+" at "+h(x(ve.booking_time)),1)])]),e("div",ZG,[e("span",{class:se([me(ve.status||"pending"),"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium"])},h(ve.status||"Pending"),3)])])}),128))])):(m(),g("div",QG,[W[22]||(W[22]=e("svg",{class:"mx-auto h-12 w-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})],-1)),W[23]||(W[23]=e("h3",{class:"mt-2 text-sm font-medium text-gray-900"},"No upcoming sevas",-1)),W[24]||(W[24]=e("p",{class:"mt-1 text-sm text-gray-500"},"Book your first seva to get started.",-1)),e("div",eJ,[le(re,{to:`/entity/${Te(o).params.id}/devotee/seva-booking`,class:"inline-flex items-center px-4 py-2 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500"},{default:ye(()=>[...W[21]||(W[21]=[te(" Book Seva ",-1)])]),_:1},8,["to"])])]))]),_:1})]),e("div",tJ,[le(Rt,{class:"p-6"},{default:ye(()=>[e("div",oJ,[W[26]||(W[26]=e("h3",{class:"text-lg font-semibold text-gray-900"},"Upcoming Events",-1)),le(re,{to:`/entity/${Te(o).params.id}/devotee/events`,class:"text-sm font-medium text-indigo-600 hover:text-indigo-700"},{default:ye(()=>[...W[25]||(W[25]=[te(" View All ",-1)])]),_:1},8,["to"])]),f.value&&f.value.length>0?(m(),g("div",sJ,[(m(!0),g(be,null,$e(f.value,ve=>(m(),g("div",{key:ve.id,class:"border border-gray-200 rounded-lg p-4 hover:border-indigo-300 transition-colors"},[e("div",nJ,[e("div",rJ,[e("div",aJ,[e("span",lJ,h(S(ve.event_date||ve.date)),1)])]),e("div",iJ,[e("p",dJ,h(ve.title||ve.name),1),e("p",uJ,h(D(ve.event_date||ve.date)),1),e("div",cJ,[e("span",pJ,h(ve.status||"Upcoming"),1)])])])]))),128))])):(m(),g("div",mJ,[...W[27]||(W[27]=[e("svg",{class:"mx-auto h-10 w-10 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})],-1),e("p",{class:"mt-2 text-sm text-gray-500"},"No upcoming events",-1)])]))]),_:1}),_.value&&_.value.length>0?(m(),Ne(Rt,{key:0,class:"p-6"},{default:ye(()=>[W[29]||(W[29]=e("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Notifications",-1)),e("div",gJ,[(m(!0),g(be,null,$e(_.value,ve=>(m(),g("div",{key:ve.id,class:"flex items-start space-x-3 p-3 bg-gray-50 rounded-lg"},[W[28]||(W[28]=e("div",{class:"flex-shrink-0"},[e("div",{class:"w-2 h-2 bg-indigo-500 rounded-full mt-2"})],-1)),e("div",fJ,[e("p",vJ,h(ve.message),1),e("p",hJ,h(D(ve.date)),1)])]))),128))])]),_:1})):J("",!0),le(Rt,{class:"p-6"},{default:ye(()=>[W[33]||(W[33]=e("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Quick Actions",-1)),e("div",yJ,[le(re,{to:`/entity/${Te(o).params.id}/devotee/donations`,class:"inline-flex items-center justify-center w-full px-4 py-2 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500"},{default:ye(()=>[...W[30]||(W[30]=[e("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"})],-1),te(" Donate Now ",-1)])]),_:1},8,["to"]),le(re,{to:`/entity/${Te(o).params.id}/devotee/seva-booking`,class:"inline-flex items-center justify-center w-full px-4 py-2 border border-indigo-300 shadow-sm text-sm font-medium rounded-md text-indigo-700 bg-indigo-50 hover:bg-indigo-100 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500"},{default:ye(()=>[...W[31]||(W[31]=[e("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})],-1),te(" Book Seva ",-1)])]),_:1},8,["to"]),le(re,{to:`/entity/${Te(o).params.id}/devotee/profile/edit`,class:"inline-flex items-center justify-center w-full px-4 py-2 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500"},{default:ye(()=>[...W[32]||(W[32]=[e("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})],-1),te(" Edit Profile ",-1)])]),_:1},8,["to"])])]),_:1})])])]))])])}}},bJ={class:"min-h-screen bg-gray-50"},wJ={key:0,class:"min-h-screen flex items-center justify-center bg-gray-50"},kJ={class:"bg-white shadow-lg"},_J={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4"},$J={class:"flex items-center justify-between"},SJ={class:"flex items-center space-x-4"},DJ={class:"text-lg font-semibold text-gray-900"},CJ={key:0,class:"text-sm text-gray-500"},TJ={class:"flex items-center space-x-3"},EJ={class:"text-right hidden sm:block"},AJ={class:"text-gray-900 font-medium text-sm"},IJ={class:"text-gray-500 text-xs"},MJ={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},RJ={class:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 mb-8"},PJ={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},NJ={key:0,class:"flex justify-center py-12"},jJ={key:1,class:"text-center py-12"},LJ={key:2,class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},BJ={class:"h-48 bg-gradient-to-br from-indigo-500 to-purple-600 relative"},UJ=["src","alt"],FJ={class:"absolute top-4 right-4"},VJ={class:"p-6"},OJ={class:"flex justify-between items-start mb-3"},zJ={class:"text-lg font-semibold text-gray-900"},HJ={class:"text-right"},qJ={class:"text-xl font-bold text-indigo-600"},GJ={key:0,class:"text-sm text-gray-500 line-through"},JJ={class:"text-gray-600 text-sm mb-4 line-clamp-2"},WJ={class:"space-y-2 mb-4"},YJ={class:"flex items-center text-sm text-gray-600"},KJ={class:"flex items-center text-sm"},XJ={key:0,class:"flex items-center text-sm text-gray-600"},ZJ={key:1,class:"flex items-center text-sm text-gray-600"},QJ={key:0,class:"mb-3"},eW=["onClick","disabled"],tW={key:0},oW={key:1},sW={key:2},nW={key:3},rW={key:4},aW={__name:"SevaBooking",setup(t){const o=tt();et();const s=Ra(),n=Ue(),r=B(!0),l=B(!1),a=B(""),d=B(""),i=B(""),c=B(""),u=B({}),p=Je({}),w=Je({}),f=Je({}),v=B({name:"",city:"",state:""}),N=B({name:"",email:""}),A=oe(()=>o.params.id),F=G=>{const U=G.max_bookings_per_day||0,_=u.value[G.id]||0;return Math.max(0,U-_)},I=async()=>{var G;try{console.log("Fetching temple information...");const U=localStorage.getItem("selectedTempleName");U&&(v.value.name=U,console.log("Temple name from localStorage:",U));const _=A.value||localStorage.getItem("selectedEntityId")||localStorage.getItem("current_entity_id")||localStorage.getItem("current_tenant_id");if(!_){console.warn("No entity ID found"),v.value.name="Temple";return}console.log("Fetching temple details for entity ID:",_);try{const k=await pe.get(`/entities/${_}`);console.log("Temple API response:",k);const L=((G=k.data)==null?void 0:G.data)||k.data||k;L&&(v.value={name:L.name||L.Name||U||"Temple",city:L.city||L.City||"",state:L.state||L.State||""},v.value.name&&localStorage.setItem("selectedTempleName",v.value.name),console.log("Temple info loaded:",v.value))}catch(k){console.warn("API fetch failed, using localStorage data:",k),v.value.name=U||"Temple"}}catch(U){console.error("Error fetching temple info:",U),v.value.name=localStorage.getItem("selectedTempleName")||"Temple"}},C=()=>{try{const G=localStorage.getItem("user_name")||localStorage.getItem("userName"),U=localStorage.getItem("user_email")||localStorage.getItem("userEmail");try{const _=localStorage.getItem("user_data");if(_){const k=JSON.parse(_);N.value={name:k.name||k.Name||G||"Devotee",email:k.email||k.Email||U||""};return}}catch(_){console.warn("Error parsing user_data:",_)}N.value={name:G||"Devotee",email:U||""},console.log("User info loaded:",N.value)}catch(G){console.error("Error fetching user info:",G),N.value={name:"Devotee",email:""}}};oe(()=>new Date().toISOString().split("T")[0]);const j=oe(()=>{let G=s.sevas;if(a.value){const U=a.value.toLowerCase();G=G.filter(_=>{var k,L;return((k=_.name)==null?void 0:k.toLowerCase().includes(U))||((L=_.description)==null?void 0:L.toLowerCase().includes(U))})}return d.value&&(G=G.filter(U=>U.seva_type===d.value)),c.value&&(G=G.filter(U=>{const _=U.price;switch(c.value){case"0-500":return _<=500;case"500-1000":return _>500&&_<=1e3;case"1000-5000":return _>1e3&&_<=5e3;case"5000+":return _>5e3;default:return!0}})),G}),$=G=>G?new Date(G).toLocaleDateString("en-IN",{day:"numeric",month:"short",year:"numeric"}):"",y=()=>{a.value="",d.value="",i.value="",c.value=""},b=async()=>{try{console.log("Fetching approved booking counts...");const G=A.value||localStorage.getItem("selectedEntityId")||localStorage.getItem("current_entity_id")||localStorage.getItem("current_tenant_id");if(!G){console.warn("No entity ID available for fetching booking counts"),s.sevas.forEach(_=>{u.value[_.id]=0});return}const U=await pe.get("/seva/approved-counts",{params:{entity_id:G}});console.log("Approved counts API response:",U.data),U.data&&U.data.data?(u.value={},U.data.data.forEach(_=>{const k=_.seva_id||_.SevaID,L=_.approved_count||0;k&&(u.value[k]=L)}),console.log("Approved booking counts loaded:",u.value)):s.sevas.forEach(_=>{u.value[_.id]=0})}catch(G){console.error("Failed to fetch booking counts:",G),s.sevas.forEach(U=>{u.value[U.id]=0})}},E=async G=>{var U,_,k,L,z;if(!(p[G.id]||w[G.id]||F(G)<=0||f[G.id])){w[G.id]=!0;try{console.log("Sending booking request for seva:",G.id);const q=await it.bookSeva(G.id);if(console.log("Booking response:",q),q.success){const K=G.id.toString();f[K]=!0,n.success("Booking request sent! Waiting for temple approval."),console.log("Booking created, marked as pending approval:",K)}else n.error(q.error||"Failed to book seva")}catch(q){console.error("Booking failed:",q),console.error("Error details:",((U=q.response)==null?void 0:U.data)||"No response data");const K=((k=(_=q.response)==null?void 0:_.data)==null?void 0:k.message)||((z=(L=q.response)==null?void 0:L.data)==null?void 0:z.error)||"Booking failed. Please try again.";n.error(K)}finally{w[G.id]=!1}}},R=async()=>{l.value=!0;try{const G={search:a.value,seva_type:d.value};await s.fetchSevas(G),await b(),await M()}catch(G){console.error("Failed to load sevas:",G),G.toString&&G.toString().includes("Availability: unsupported relations")?n.error("Database schema issue. Please contact the administrator."):n.error("Failed to load sevas. Please try again.")}finally{l.value=!1}},M=async()=>{try{const G=await it.getMyBookings();G.success&&G.data&&(console.log("User bookings response:",G.data),Object.keys(p).forEach(U=>{delete p[U]}),Object.keys(f).forEach(U=>{delete f[U]}),G.data.forEach(U=>{var L;const _=(L=U.seva_id||U.SevaID)==null?void 0:L.toString(),k=(U.status||U.Status||"").toLowerCase();_&&(console.log(`Processing booking - SevaID: ${_}, Status: ${k}`),k==="approved"?(p[_]=!0,console.log("Marked as booked (approved):",_)):k==="pending"&&(f[_]=!0,console.log("Marked as pending approval:",_)))}),console.log("Final state - Booked:",p,"Pending:",f))}catch(G){console.error("Failed to fetch user bookings:",G)}};return Me(async()=>{console.log("SevaBooking component mounted");try{C(),await I(),r.value=!1,l.value=!0,await R(),console.log("Component initialized successfully"),console.log("Available slots per seva:",Object.fromEntries(s.sevas.map(G=>[G.id,F(G)])))}catch(G){console.error("Error during component initialization:",G),n.error("Failed to load page data")}finally{r.value=!1,l.value=!1}}),(G,U)=>(m(),g("div",bJ,[r.value?(m(),g("div",wJ,[...U[3]||(U[3]=[e("div",{class:"text-center"},[e("div",{class:"animate-spin rounded-full h-16 w-16 border-b-4 border-indigo-600 mx-auto mb-4"}),e("p",{class:"text-gray-600 font-medium"},"Loading temple information...")],-1)])])):(m(),g(be,{key:1},[e("div",kJ,[e("div",_J,[e("div",$J,[e("div",SJ,[U[4]||(U[4]=e("div",{class:"h-10 w-10 rounded-full bg-indigo-100 flex items-center justify-center"},[e("svg",{class:"h-6 w-6 text-indigo-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})])],-1)),e("div",null,[e("h2",DJ,h(v.value.name||"Temple"),1),v.value.city||v.value.state?(m(),g("p",CJ,h(v.value.city)+h(v.value.city&&v.value.state?", ":"")+h(v.value.state),1)):J("",!0)])]),e("div",TJ,[e("div",EJ,[e("p",AJ,h(N.value.name||"Devotee"),1),e("p",IJ,h(N.value.email||""),1)]),U[5]||(U[5]=e("div",{class:"w-10 h-10 bg-indigo-100 rounded-full flex items-center justify-center"},[e("svg",{class:"w-6 h-6 text-indigo-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})])],-1))])])])]),U[19]||(U[19]=Ce('<div class="bg-white shadow-sm border-b border-gray-200" data-v-45c95d5f><div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8" data-v-45c95d5f><div class="py-6" data-v-45c95d5f><div class="flex items-center justify-between" data-v-45c95d5f><div data-v-45c95d5f><h1 class="text-3xl font-bold text-gray-900" data-v-45c95d5f>Book Seva</h1><p class="mt-2 text-sm text-gray-600" data-v-45c95d5f>Choose from available sevas and book your preferred time slots</p></div></div></div></div></div>',1)),e("div",MJ,[e("div",RJ,[e("div",PJ,[e("div",null,[U[6]||(U[6]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Search Sevas",-1)),ce(e("input",{"onUpdate:modelValue":U[0]||(U[0]=_=>a.value=_),type:"text",placeholder:"Search by seva name...",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-colors"},null,512),[[_e,a.value]])]),e("div",null,[U[8]||(U[8]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Seva Type",-1)),ce(e("select",{"onUpdate:modelValue":U[1]||(U[1]=_=>d.value=_),class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-colors"},[...U[7]||(U[7]=[Ce('<option value="" data-v-45c95d5f>Select Seva Type</option><option value="daily" data-v-45c95d5f>Daily Seva</option><option value="special" data-v-45c95d5f>Special Seva</option><option value="festival" data-v-45c95d5f>Festival Seva</option><option value="personal" data-v-45c95d5f>Personal Seva</option>',5)])],512),[[Re,d.value]])]),e("div",null,[U[10]||(U[10]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Price Range",-1)),ce(e("select",{"onUpdate:modelValue":U[2]||(U[2]=_=>c.value=_),class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-colors"},[...U[9]||(U[9]=[Ce('<option value="" data-v-45c95d5f>All Prices</option><option value="0-500" data-v-45c95d5f>0 - 500</option><option value="500-1000" data-v-45c95d5f>500 - 1,000</option><option value="1000-5000" data-v-45c95d5f>1,000 - 5,000</option><option value="5000+" data-v-45c95d5f>5,000+</option>',5)])],512),[[Re,c.value]])])])]),l.value?(m(),g("div",NJ,[...U[11]||(U[11]=[e("div",{class:"text-center"},[e("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600 mx-auto mb-4"}),e("p",{class:"text-gray-600"},"Loading sevas...")],-1)])])):j.value.length===0?(m(),g("div",jJ,[U[12]||(U[12]=Ce('<div class="mx-auto w-24 h-24 bg-gray-100 rounded-full flex items-center justify-center mb-4" data-v-45c95d5f><svg class="w-12 h-12 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-45c95d5f><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10" data-v-45c95d5f></path></svg></div><h3 class="text-lg font-medium text-gray-900 mb-2" data-v-45c95d5f>No Sevas Available</h3><p class="text-gray-500 mb-4" data-v-45c95d5f>No sevas match your current filters or none have been added by the temple yet.</p>',3)),e("button",{onClick:y,class:"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors"}," Clear Filters ")])):(m(),g("div",LJ,[(m(!0),g(be,null,$e(j.value,_=>(m(),g("div",{key:_.id,class:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden hover:shadow-md transition-shadow"},[e("div",BJ,[_.image?(m(),g("img",{key:0,src:_.image,alt:_.name,class:"w-full h-full object-cover"},null,8,UJ)):J("",!0),U[13]||(U[13]=e("div",{class:"absolute inset-0 bg-black bg-opacity-20"},null,-1)),e("div",FJ,[e("span",{class:se(["px-3 py-1 rounded-full text-xs font-medium",_.seva_type==="daily"?"bg-green-100 text-green-800":_.seva_type==="special"?"bg-blue-100 text-blue-800":_.seva_type==="festival"?"bg-purple-100 text-purple-800":"bg-yellow-100 text-yellow-800"])},h(_.seva_type),3)])]),e("div",VJ,[e("div",OJ,[e("h3",zJ,h(_.name),1),e("div",HJ,[e("p",qJ,""+h(_.price.toLocaleString()),1),_.originalPrice&&_.originalPrice>_.price?(m(),g("p",GJ," "+h(_.originalPrice.toLocaleString()),1)):J("",!0)])]),e("p",JJ,h(_.description),1),e("div",WJ,[e("div",YJ,[U[14]||(U[14]=e("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),te(" Duration: "+h(_.duration)+" minutes ",1)]),e("div",KJ,[(m(),g("svg",{class:se(["w-4 h-4 mr-2",F(_)>0?"text-green-600":"text-red-600"]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[...U[15]||(U[15]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"},null,-1)])],2)),e("span",{class:se(F(_)>0?"text-green-600 font-medium":"text-red-600 font-medium")}," Available: "+h(F(_))+" / "+h(_.max_bookings_per_day||0)+" slots ",3)]),_.date?(m(),g("div",XJ,[U[16]||(U[16]=e("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})],-1)),te(" Date: "+h($(_.date)),1)])):J("",!0),_.start_time&&_.end_time?(m(),g("div",ZJ,[U[17]||(U[17]=e("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),te(" Time: "+h(_.start_time)+" - "+h(_.end_time),1)])):J("",!0)]),f[_.id]?(m(),g("div",QJ,[...U[18]||(U[18]=[e("div",{class:"flex items-center justify-center px-3 py-2 bg-yellow-50 border border-yellow-200 rounded-lg"},[e("svg",{class:"w-4 h-4 text-yellow-600 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})]),e("span",{class:"text-sm font-medium text-yellow-800"},"Pending Approval")],-1)])])):J("",!0),e("button",{onClick:k=>E(_),disabled:p[_.id]||w[_.id]||F(_)===0||f[_.id],class:se(["w-full py-3 px-4 rounded-lg font-medium transition-colors",w[_.id]?"bg-gray-400 text-white cursor-wait":p[_.id]?"bg-green-600 text-white cursor-default":f[_.id]?"bg-yellow-400 text-yellow-900 cursor-default":F(_)>0?"bg-indigo-600 text-white hover:bg-indigo-700":"bg-gray-300 text-gray-500 cursor-not-allowed"])},[w[_.id]?(m(),g("span",tW,"Booking...")):p[_.id]?(m(),g("span",oW," Seva Booked")):f[_.id]?(m(),g("span",sW," Pending Approval")):F(_)>0?(m(),g("span",nW,"Book Now")):(m(),g("span",rW,"Fully Booked"))],10,eW)])]))),128))]))])],64))]))}},lW=ot(aW,[["__scopeId","data-v-45c95d5f"]]),iW={class:"min-h-screen bg-gray-50"},dW={class:"bg-white shadow-lg"},uW={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4"},cW={class:"flex items-center justify-between"},pW={class:"flex items-center space-x-4"},mW={class:"text-lg font-semibold text-gray-900"},gW={key:0,class:"text-sm text-gray-500"},fW={class:"flex items-center space-x-3"},vW={class:"text-right hidden sm:block"},hW={class:"text-gray-900 font-medium text-sm"},yW={class:"text-gray-500 text-xs"},xW={class:"bg-white border-b border-gray-200"},bW={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},wW={class:"py-6"},kW={class:"flex items-center justify-between"},_W={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},$W={class:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8"},SW={class:"bg-white rounded-xl shadow-sm border border-gray-200 p-6"},DW={class:"flex items-center"},CW={class:"ml-4"},TW={class:"text-2xl font-bold text-gray-900"},EW={class:"bg-white rounded-xl shadow-sm border border-gray-200 p-6"},AW={class:"flex items-center"},IW={class:"ml-4"},MW={class:"text-2xl font-bold text-gray-900"},RW={class:"bg-white rounded-xl shadow-sm border border-gray-200 p-6"},PW={class:"flex items-center"},NW={class:"ml-4"},jW={class:"text-2xl font-bold text-gray-900"},LW={class:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 mb-8"},BW={class:"grid grid-cols-1 md:grid-cols-4 gap-4"},UW={class:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden"},FW={class:"overflow-x-auto"},VW={class:"min-w-full divide-y divide-gray-200"},OW={class:"bg-white divide-y divide-gray-200"},zW={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},HW={class:"px-6 py-4 whitespace-nowrap"},qW={class:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900"},GW={class:"px-6 py-4 whitespace-nowrap"},JW={key:0,class:"text-center py-12"},WW={key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50"},YW={class:"bg-white rounded-xl max-w-md w-full p-6"},KW={class:"flex items-center justify-between mb-4"},XW={class:"flex gap-3 pt-4"},ZW=["disabled"],QW={__name:"DonationHistory",setup(t){const o=()=>new Promise(R=>{const M=document.createElement("script");M.src="https://checkout.razorpay.com/v1/checkout.js",M.onload=()=>R(!0),M.onerror=()=>R(!1),document.body.appendChild(M)}),s=B(!1),n=B([]),r=B(!0),l=B(!1),a=B({name:"",city:"",state:""}),d=B({name:"",email:""}),i=B(null),c=B({dateRange:"all",donationType:"all",amountRange:"all"}),u=B({type:"",amount:"",purpose:""}),p=oe(()=>n.value.reduce((R,M)=>R+M.amount,0)),w=oe(()=>{const R=new Date().getMonth(),M=new Date().getFullYear();return n.value.filter(G=>{const U=new Date(G.date||G.donated_at||G.donation_date);return U.getMonth()===R&&U.getFullYear()===M}).reduce((G,U)=>G+U.amount,0)}),f=oe(()=>{let R=[...n.value];if(c.value.dateRange!=="all"){const M=new Date;R=R.filter(G=>{const U=new Date(G.date||G.donated_at||G.donation_date);switch(c.value.dateRange){case"this-month":return U.getMonth()===M.getMonth()&&U.getFullYear()===M.getFullYear();case"last-month":const _=new Date(M.getFullYear(),M.getMonth()-1,1);return U.getMonth()===_.getMonth()&&U.getFullYear()===_.getFullYear();case"this-year":return U.getFullYear()===M.getFullYear();default:return!0}})}return c.value.donationType!=="all"&&(R=R.filter(M=>(M.type||M.donation_type)===c.value.donationType)),c.value.amountRange!=="all"&&(R=R.filter(M=>{const G=M.amount;switch(c.value.amountRange){case"0-500":return G>=0&&G<=500;case"501-1000":return G>=501&&G<=1e3;case"1001-5000":return G>=1001&&G<=5e3;case"5000+":return G>5e3;default:return!0}})),R.sort((M,G)=>{const U=new Date(M.date||M.donated_at||M.donation_date);return new Date(G.date||G.donated_at||G.donation_date)-U})}),v=async()=>{var R,M,G;try{console.log("Fetching temple information...");const U=localStorage.getItem("selectedTempleName");U&&(a.value.name=U,console.log("Temple name from localStorage:",U));const _=localStorage.getItem("selectedEntityId")||localStorage.getItem("current_entity_id")||localStorage.getItem("current_tenant_id")||((R=i.value)==null?void 0:R.temple_id)||((M=i.value)==null?void 0:M.entity_id);if(!_){console.warn("No entity ID found");return}console.log("Fetching temple details for entity ID:",_);try{const k=await pe.get(`/entities/${_}`);console.log("Temple API response:",k);const L=((G=k.data)==null?void 0:G.data)||k.data||k;L&&(a.value={name:L.name||L.Name||U||"Temple",city:L.city||L.City||"",state:L.state||L.State||""},a.value.name&&localStorage.setItem("selectedTempleName",a.value.name),console.log("Temple info loaded:",a.value))}catch(k){console.warn("API fetch failed, using localStorage/context data:",k),i.value&&(a.value.name=i.value.temple_name||i.value.entity_name||U||"Temple")}}catch(U){console.error("Error fetching temple info:",U),a.value.name=localStorage.getItem("selectedTempleName")||"Temple"}},N=()=>{try{const R=localStorage.getItem("user_name")||localStorage.getItem("userName"),M=localStorage.getItem("user_email")||localStorage.getItem("userEmail");try{const G=localStorage.getItem("user_data");if(G){const U=JSON.parse(G);d.value={name:U.name||U.Name||R||"Devotee",email:U.email||U.Email||M||""};return}}catch(G){console.warn("Error parsing user_data:",G)}d.value={name:R||"Devotee",email:M||""},console.log("User info loaded:",d.value)}catch(R){console.error("Error fetching user info:",R),d.value={name:"Devotee",email:""}}},A=R=>{var U,_,k,L,z,q,K;console.log("=== DONATION RESPONSE DEBUG ==="),console.log("Full response object:",R),console.log("Response type:",typeof R),console.log("Response keys:",Object.keys(R||{})),R.data&&(console.log("response.data:",R.data),console.log("response.data keys:",Object.keys(R.data||{})));const M=[R.order_id,R.OrderID,R.orderId,(U=R.data)==null?void 0:U.order_id,(_=R.data)==null?void 0:_.OrderID,(k=R.data)==null?void 0:k.orderId].filter(Boolean),G=[R.razorpay_key,R.RazorpayKey,R.razorpayKey,R.key,(L=R.data)==null?void 0:L.razorpay_key,(z=R.data)==null?void 0:z.RazorpayKey,(q=R.data)==null?void 0:q.razorpayKey,(K=R.data)==null?void 0:K.key].filter(Boolean);console.log("Found possible order_id values:",M),console.log("Found possible razorpay_key values:",G),console.log("JSON stringified response:",JSON.stringify(R,null,2)),console.log("=== END DEBUG ===")},F=R=>{const M=[R,R.data,R.result,R.payload,R.order,R.razorpay].filter(k=>k&&typeof k=="object");let G,U,_;for(const k of M)G=G||k.order_id||k.OrderID||k.orderId||k.razorpay_order_id||k.RazorpayOrderID||k.orderID||k.id,U=U||k.razorpay_key||k.RazorpayKey||k.razorpayKey||k.key||k.Key||k.api_key||k.ApiKey||k.razorpay_api_key||k.RazorpayApiKey,_=_||k.amount||k.Amount||k.total||k.Total||k.payment_amount||k.PaymentAmount;return _=_||Number(u.value.amount),{order_id:G,razorpay_key:U,amount:_}},I=async()=>{try{console.log("Getting user context for entity association...");const R=await ht.getCurrentUserContext();R.success&&R.data?(i.value=R.data,console.log("User context loaded:",{user_id:R.data.id,user_type:R.data.user_type,temple_id:R.data.temple_id,entity_id:R.data.entity_id,temple_name:R.data.temple_name||R.data.entity_name})):console.warn("Failed to get user context:",R)}catch(R){console.error("Error getting user context:",R)}},C=R=>R?new Date(R).toLocaleDateString("en-IN",{day:"2-digit",month:"short",year:"numeric"}):"N/A",j=R=>({general:"bg-blue-100 text-blue-800",seva:"bg-green-100 text-green-800",festival:"bg-amber-100 text-amber-800",construction:"bg-purple-100 text-purple-800",event:"bg-pink-100 text-pink-800"})[R]||"bg-gray-100 text-gray-800",$=R=>{const M=(R||"").toLowerCase();return{completed:"bg-green-100 text-green-800",success:"bg-green-100 text-green-800",pending:"bg-amber-100 text-amber-800",processing:"bg-amber-100 text-amber-800",failed:"bg-red-100 text-red-800",error:"bg-red-100 text-red-800"}[M]||"bg-gray-100 text-gray-800"},y=()=>{c.value={dateRange:"all",donationType:"all",amountRange:"all"}},b=async()=>{var R,M,G,U;if(!l.value)try{if(l.value=!0,!u.value.type||!u.value.amount){alert("Please fill in all required fields");return}if(i.value||await I(),!await o()){alert("Razorpay SDK failed to load. Please check your internet connection.");return}const k={amount:Number(u.value.amount),donationType:u.value.type,note:u.value.purpose};i.value?(i.value.entity_id?(k.entityId=i.value.entity_id,k.entity_id=i.value.entity_id):i.value.temple_id&&(k.templeId=i.value.temple_id,k.temple_id=i.value.temple_id,k.entityId=i.value.temple_id,k.entity_id=i.value.temple_id),console.log("Donation data with entity context:",k)):console.warn("No user context available - donation may not be associated with correct temple"),console.log("Creating donation with data:",k);const L=await ht.createDonation(k);A(L);const{order_id:z,razorpay_key:q,amount:K}=F(L);if(console.log("Extracted values:",{order_id:z,razorpay_key:q,amount:K}),!z||!q){console.error("Missing required fields in response:",L);const ee=[];z||ee.push("order_id/OrderID/orderId"),q||ee.push("razorpay_key/RazorpayKey/key");const ge=`Server response missing required fields: ${ee.join(", ")}. 
      
Available response fields: ${Object.keys(L||{}).join(", ")}
${L.data?"Data fields: "+Object.keys(L.data).join(", "):""}

Please check backend implementation or contact support.`;throw alert(ge),new Error(`Server response missing required fields: ${ee.join(", ")}`)}const H={key:q,amount:K*100,currency:"INR",name:a.value.name||"Temple Donation",description:"Thank you for your generosity!",order_id:z,handler:async function(ee){try{console.log("Payment successful, verifying...",ee),await ht.verifyDonation({razorpay_payment_id:ee.razorpay_payment_id,razorpay_order_id:ee.razorpay_order_id,razorpay_signature:ee.razorpay_signature}),alert("Donation successful! Thank you for your generosity."),s.value=!1,u.value={type:"",amount:"",purpose:""},await E()}catch(ge){console.error("Verification failed:",ge),alert("Payment verification failed. Please contact support if amount was deducted.")}},prefill:{name:d.value.name||"Donor",email:d.value.email||"donor@example.com"},theme:{color:"#6366f1"},modal:{ondismiss:function(){console.log("Payment modal dismissed")}}};console.log("Opening Razorpay with options:",H),new window.Razorpay(H).open()}catch(_){console.error("Donation Flow Error:",_);const k=((M=(R=_.response)==null?void 0:R.data)==null?void 0:M.error)||((U=(G=_.response)==null?void 0:G.data)==null?void 0:U.message)||_.message||"Something went wrong while processing your donation";alert("Error: "+k)}finally{l.value=!1}},E=async()=>{var R,M,G;try{r.value=!0,console.log("Fetching donation history...");const U=await ht.getMyDonations();if(console.log("Donation history response:",U),n.value=Array.isArray(U)?U:[],n.value.length>0&&i.value){const _=i.value.temple_id||i.value.entity_id,k=[...new Set(n.value.map(L=>L.temple_id||L.entity_id).filter(Boolean))];console.log("Temple filtering validation:",{user_temple_id:_,donation_temple_ids:k,all_donations_count:n.value.length})}}catch(U){console.error("Error fetching donation history:",U),n.value=[],((R=U.response)==null?void 0:R.status)!==404&&alert("Failed to load donation history: "+(((G=(M=U.response)==null?void 0:M.data)==null?void 0:G.error)||U.message))}finally{r.value=!1}};return Me(async()=>{console.log("DonationHistory component mounted"),N(),await I(),await v(),await E(),console.log("All data loaded successfully")}),(R,M)=>(m(),g("div",iW,[e("div",dW,[e("div",uW,[e("div",cW,[e("div",pW,[M[9]||(M[9]=e("div",{class:"h-10 w-10 rounded-full bg-indigo-100 flex items-center justify-center"},[e("svg",{class:"h-6 w-6 text-indigo-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})])],-1)),e("div",null,[e("h2",mW,h(a.value.name||"Loading Temple..."),1),a.value.city||a.value.state?(m(),g("p",gW,h(a.value.city)+h(a.value.city&&a.value.state?", ":"")+h(a.value.state),1)):J("",!0)])]),e("div",fW,[e("div",vW,[e("p",hW,h(d.value.name||"Devotee"),1),e("p",yW,h(d.value.email||""),1)]),M[10]||(M[10]=e("div",{class:"w-10 h-10 bg-indigo-100 rounded-full flex items-center justify-center"},[e("svg",{class:"w-6 h-6 text-indigo-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})])],-1))])])])]),e("div",xW,[e("div",bW,[e("div",wW,[e("div",kW,[M[12]||(M[12]=e("div",null,[e("h1",{class:"text-2xl font-bold text-gray-900"},"My Donations"),e("p",{class:"mt-1 text-sm text-gray-600"},"Track your donation history and receipts")],-1)),e("button",{onClick:M[0]||(M[0]=G=>s.value=!0),class:"bg-indigo-600 hover:bg-indigo-700 text-white px-4 py-2 rounded-lg font-medium transition-colors duration-200 flex items-center gap-2"},[...M[11]||(M[11]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})],-1),te(" Donate Now ",-1)])])])])])]),e("div",_W,[e("div",$W,[e("div",SW,[e("div",DW,[M[14]||(M[14]=e("div",{class:"p-3 bg-indigo-100 rounded-lg"},[e("svg",{class:"w-6 h-6 text-indigo-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"})])],-1)),e("div",CW,[M[13]||(M[13]=e("p",{class:"text-sm font-medium text-gray-600"},"Total Donated",-1)),e("p",TW,""+h(p.value.toLocaleString()),1)])])]),e("div",EW,[e("div",AW,[M[16]||(M[16]=e("div",{class:"p-3 bg-green-100 rounded-lg"},[e("svg",{class:"w-6 h-6 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1)),e("div",IW,[M[15]||(M[15]=e("p",{class:"text-sm font-medium text-gray-600"},"Total Donations",-1)),e("p",MW,h(n.value.length),1)])])]),e("div",RW,[e("div",PW,[M[18]||(M[18]=e("div",{class:"p-3 bg-amber-100 rounded-lg"},[e("svg",{class:"w-6 h-6 text-amber-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7V3a4 4 0 118 0v4m-4 8a4 4 0 11-8 0v-4m4-8a4 4 0 118 0v4"})])],-1)),e("div",NW,[M[17]||(M[17]=e("p",{class:"text-sm font-medium text-gray-600"},"This Month",-1)),e("p",jW,""+h(w.value.toLocaleString()),1)])])])]),e("div",LW,[e("div",BW,[e("div",null,[M[20]||(M[20]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Date Range",-1)),ce(e("select",{"onUpdate:modelValue":M[1]||(M[1]=G=>c.value.dateRange=G),class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"},[...M[19]||(M[19]=[e("option",{value:"all"},"All Time",-1),e("option",{value:"this-month"},"This Month",-1),e("option",{value:"last-month"},"Last Month",-1),e("option",{value:"this-year"},"This Year",-1)])],512),[[Re,c.value.dateRange]])]),e("div",null,[M[22]||(M[22]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Donation Type",-1)),ce(e("select",{"onUpdate:modelValue":M[2]||(M[2]=G=>c.value.donationType=G),class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"},[...M[21]||(M[21]=[Ce('<option value="all">All Types</option><option value="general">General Donation</option><option value="seva">Seva Donation</option><option value="festival">Festival Donation</option><option value="construction">Construction Fund</option>',5)])],512),[[Re,c.value.donationType]])]),e("div",null,[M[24]||(M[24]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Amount Range",-1)),ce(e("select",{"onUpdate:modelValue":M[3]||(M[3]=G=>c.value.amountRange=G),class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"},[...M[23]||(M[23]=[Ce('<option value="all">All Amounts</option><option value="0-500">0 - 500</option><option value="501-1000">501 - 1,000</option><option value="1001-5000">1,001 - 5,000</option><option value="5000+">5,000+</option>',5)])],512),[[Re,c.value.amountRange]])]),e("div",{class:"flex items-end"},[e("button",{onClick:y,class:"w-full px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors duration-200"}," Reset Filters ")])])]),e("div",UW,[M[27]||(M[27]=e("div",{class:"px-6 py-4 border-b border-gray-200"},[e("div",{class:"flex items-center justify-between"},[e("h3",{class:"text-lg font-semibold text-gray-900"},"Donation History")])],-1)),e("div",FW,[e("table",VW,[M[25]||(M[25]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Date"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Type"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Amount"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Status")])],-1)),e("tbody",OW,[(m(!0),g(be,null,$e(f.value,G=>(m(),g("tr",{key:G.id,class:"hover:bg-gray-50"},[e("td",zW,h(C(G.created_at||G.donated_at||G.donation_date)),1),e("td",HW,[e("span",{class:se([j(G.type||G.donation_type),"px-2 py-1 text-xs font-medium rounded-full"])},h(G.type||G.donation_type),3)]),e("td",qW," "+h(G.amount.toLocaleString()),1),e("td",GW,[e("span",{class:se([$(G.status),"px-2 py-1 text-xs font-medium rounded-full"])},h(G.status),3)])]))),128))])])]),f.value.length===0?(m(),g("div",JW,[...M[26]||(M[26]=[e("svg",{class:"mx-auto h-12 w-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"})],-1),e("h3",{class:"mt-2 text-sm font-medium text-gray-900"},"No donations found",-1),e("p",{class:"mt-1 text-sm text-gray-500"},"No donations match your current filters.",-1)])])):J("",!0)])]),s.value?(m(),g("div",WW,[e("div",YW,[e("div",KW,[M[29]||(M[29]=e("h3",{class:"text-lg font-semibold text-gray-900"},"Make a Donation",-1)),e("button",{onClick:M[4]||(M[4]=G=>s.value=!1),class:"text-gray-400 hover:text-gray-600"},[...M[28]||(M[28]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),e("form",{onSubmit:qe(b,["prevent"]),class:"space-y-4"},[e("div",null,[M[31]||(M[31]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Donation Type",-1)),ce(e("select",{"onUpdate:modelValue":M[5]||(M[5]=G=>u.value.type=G),required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"},[...M[30]||(M[30]=[Ce('<option value="">Select Type</option><option value="general">General Donation</option><option value="seva">Seva Donation</option><option value="festival">Festival Donation</option><option value="event">Event Donation</option>',5)])],512),[[Re,u.value.type]])]),e("div",null,[M[32]||(M[32]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Amount ()",-1)),ce(e("input",{type:"number","onUpdate:modelValue":M[6]||(M[6]=G=>u.value.amount=G),required:"",min:"1",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",placeholder:"Enter amount"},null,512),[[_e,u.value.amount]])]),e("div",null,[M[33]||(M[33]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Purpose",-1)),ce(e("textarea",{"onUpdate:modelValue":M[7]||(M[7]=G=>u.value.purpose=G),rows:"3",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",placeholder:"Purpose of donation (optional)"},null,512),[[_e,u.value.purpose]])]),e("div",XW,[e("button",{type:"button",onClick:M[8]||(M[8]=G=>s.value=!1),class:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors duration-200"}," Cancel "),e("button",{type:"submit",disabled:l.value,class:"flex-1 bg-indigo-600 hover:bg-indigo-700 disabled:opacity-50 text-white px-4 py-2 rounded-lg font-medium transition-colors duration-200"},h(l.value?"Processing...":"Proceed to Payment"),9,ZW)])],32)])])):J("",!0)]))}},eY={class:"min-h-screen bg-gray-50"},tY={class:"bg-white shadow-lg"},oY={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4"},sY={class:"flex items-center justify-between"},nY={class:"flex items-center space-x-4"},rY={class:"text-lg font-semibold text-gray-900"},aY={key:0,class:"text-sm text-gray-500"},lY={class:"flex items-center space-x-3"},iY={class:"text-right hidden sm:block"},dY={class:"text-gray-900 font-medium text-sm"},uY={class:"text-gray-500 text-xs"},cY={class:"flex flex-col sm:flex-row gap-4 items-start sm:items-center justify-between"},pY={class:"flex flex-col sm:flex-row gap-4 items-start sm:items-center flex-1"},mY={class:"relative flex-1 min-w-0"},gY={class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},fY={key:0,class:"flex justify-center py-12"},vY={key:1,class:"space-y-4"},hY={class:"flex flex-col"},yY={class:"flex-1 min-w-0"},xY={class:"flex flex-col sm:flex-row gap-4 justify-between"},bY={class:"flex-1"},wY={class:"text-xl font-bold text-gray-900 mb-2"},kY={class:"text-gray-600 mb-3 line-clamp-2"},_Y={class:"flex flex-wrap gap-4 text-sm text-gray-500"},$Y={class:"flex items-center gap-1"},SY={class:"flex items-center gap-1"},DY={class:"flex items-center gap-1"},CY={class:"flex flex-col gap-2 items-start sm:items-end"},TY={class:"flex items-center gap-2"},EY={key:2,class:"text-center py-12"},AY={class:"text-gray-600 mb-6"},IY={class:"p-6"},MY={class:"flex justify-between items-start mb-6"},RY={class:"text-2xl font-bold text-gray-900 mb-2"},PY={class:"flex flex-wrap gap-4 text-sm text-gray-500"},NY={class:"flex items-center gap-1"},jY={class:"flex items-center gap-1"},LY={class:"flex items-center gap-1"},BY={class:"mb-6"},UY={class:"text-gray-700 leading-relaxed"},FY={key:0,class:"mb-6"},VY={class:"grid grid-cols-1 sm:grid-cols-2 gap-3"},OY={class:"font-medium text-gray-900"},zY={class:"text-sm text-gray-600"},HY={class:"flex flex-col sm:flex-row gap-4 justify-between items-start sm:items-center pt-6 border-t border-gray-200"},qY={class:"flex gap-3"},GY={__name:"MyEvents",setup(t){const o=tt(),{currentUser:s}=ln(),{showToast:n}=Ue(),r=B(!0),l=B(""),a=B("all");B("list");const d=B(!1),i=B(null),c=B([]),u=B(new Set),p=B({name:"",city:"",state:""}),w=B({name:"",email:""}),f=oe(()=>o.params.id),v=()=>"http://localhost:8080/api/v1",N=()=>localStorage.getItem("access_token")||localStorage.getItem("token")||localStorage.getItem("authToken"),A=async()=>{var z;try{console.log(" Fetching temple information...");const q=localStorage.getItem("selectedTempleName"),K=localStorage.getItem("selectedTempleCity"),H=localStorage.getItem("selectedTempleState");q&&(p.value={name:q,city:K||"",state:H||""},console.log(" Temple info from localStorage:",p.value));const O=f.value||o.params.id||localStorage.getItem("selectedEntityId")||localStorage.getItem("current_entity_id")||localStorage.getItem("current_tenant_id");if(!O){console.warn(" No entity ID found"),q||(p.value.name="Temple");return}console.log(" Fetching temple details for entity ID:",O);try{const ee=v(),ge=N(),de=await Ie.get(`${ee}/entities/${O}`,{headers:{Authorization:`Bearer ${ge}`,"Content-Type":"application/json"}});console.log(" Temple API response:",de.data);const ie=((z=de.data)==null?void 0:z.data)||de.data;ie&&(p.value={name:ie.name||ie.Name||q||"Temple",city:ie.city||ie.City||K||"",state:ie.state||ie.State||H||""},p.value.name&&localStorage.setItem("selectedTempleName",p.value.name),p.value.city&&localStorage.setItem("selectedTempleCity",p.value.city),p.value.state&&localStorage.setItem("selectedTempleState",p.value.state),console.log(" Temple info updated from API:",p.value))}catch(ee){console.warn(" API fetch failed, using localStorage data:",ee.message),p.value.name||(p.value.name=q||"Temple")}}catch(q){console.error(" Error in fetchTempleInfo:",q),p.value.name=localStorage.getItem("selectedTempleName")||"Temple"}},F=()=>{try{if(console.log(" Fetching user information..."),s!=null&&s.value){w.value={name:s.value.name||s.value.full_name||"Devotee",email:s.value.email||""},console.log(" User info from auth:",w.value);return}const z=localStorage.getItem("user_data");if(z)try{const O=JSON.parse(z);w.value={name:O.name||O.Name||O.full_name||"Devotee",email:O.email||O.Email||""},console.log(" User info from user_data:",w.value);return}catch(O){console.warn(" Error parsing user_data:",O)}const q=localStorage.getItem("user_name")||localStorage.getItem("userName")||localStorage.getItem("full_name"),K=localStorage.getItem("user_email")||localStorage.getItem("userEmail")||localStorage.getItem("email");if(q||K){w.value={name:q||"Devotee",email:K||""},console.log(" User info from localStorage items:",w.value);return}const H=localStorage.getItem("devotee_profile");if(H)try{const O=JSON.parse(H);w.value={name:O.full_name||O.name||"Devotee",email:O.email||""},console.log(" User info from profile:",w.value);return}catch(O){console.warn(" Error parsing profile data:",O)}console.log(" No user info found, using defaults"),w.value={name:"Devotee",email:""}}catch(z){console.error(" Error fetching user info:",z),w.value={name:"Devotee",email:""}}},I=oe(()=>{let z=c.value;if(l.value){const q=l.value.toLowerCase();z=z.filter(K=>K.title.toLowerCase().includes(q)||K.description.toLowerCase().includes(q))}switch(a.value){case"upcoming":z=z.filter(q=>q.status==="upcoming");break;case"ongoing":z=z.filter(q=>q.status==="ongoing");break;case"completed":z=z.filter(q=>q.status==="completed");break;case"attending":z=z.filter(q=>u.value.has(q.id));break;case"all":default:z=z.filter(q=>q.status);break}return z}),C=async()=>{try{r.value=!0;const z=await ao.getUpcomingEvents();console.log(" Events Response:",z);const q=new Date,K=new Date(q.getFullYear(),q.getMonth(),q.getDate());c.value=(Array.isArray(z)?z:[]).map(H=>{const O=new Date(H.event_date),ee=new Date(O.getFullYear(),O.getMonth(),O.getDate());let ge="upcoming";if(!isNaN(O))if(ee<K)ge="completed";else if(ee.getTime()===K.getTime())if(H.event_time)try{const de=new Date(H.event_time),ie=de.getUTCHours(),me=de.getUTCMinutes(),ke=q.getHours(),Q=q.getMinutes();ke>ie||ke===ie&&Q>=me?ge="ongoing":ge="upcoming"}catch{ge="ongoing"}else ge="ongoing";else ge="upcoming";return{id:H.id,title:H.title,description:H.description,date:H.event_date,time:H.event_time||null,venue:H.location||"Temple Premises",status:ge,attendees:H.rsvp_count||0,eventType:H.event_type,maxAttendees:200}}),console.log(" Mapped Events:",c.value)}catch(z){console.error(" Error fetching events:",z),n("Failed to load events","error")}finally{r.value=!1}},j=async(z,q)=>{try{if(q)typeof ao.registerForEvent=="function"?(await ao.registerForEvent(z),u.value.add(z),n("RSVP confirmed successfully!","success")):n("RSVP functionality not available","error");else{n("RSVP cancellation is not supported yet","error");return}}catch(K){console.error("Error updating RSVP:",K),n("Failed to update RSVP","error")}},$=z=>{i.value=z,d.value=!0},y=()=>{d.value=!1,i.value=null},b=z=>u.value.has(z),E=z=>z.status==="upcoming"&&(!z.maxAttendees||z.attendees<z.maxAttendees),R=z=>z.status==="completed"?"Completed":z.status==="ongoing"?"Ongoing":z.maxAttendees&&z.attendees>=z.maxAttendees?"Full":"Open",M=z=>{const q=R(z),K="px-2 py-1 rounded-lg text-xs font-medium";switch(q){case"Completed":return`${K} bg-gray-100 text-gray-800`;case"Ongoing":return`${K} bg-blue-100 text-blue-800`;case"Full":return`${K} bg-red-100 text-red-800`;default:return`${K} bg-green-100 text-green-800`}},G=z=>{const q="px-3 py-1 rounded-lg text-sm font-medium";return b(z)?`${q} bg-green-100 text-green-800`:`${q} bg-gray-100 text-gray-800`},U=z=>{if(!z)return"No date available";const q=new Date(z);return isNaN(q.getTime())?z:q.toLocaleDateString("en-IN",{weekday:"long",year:"numeric",month:"long",day:"numeric"})},_=z=>{if(!z)return"Time not specified";try{if(typeof z=="string"&&z.includes("T")){const q=new Date(z);if(!isNaN(q.getTime())){let K=q.getUTCHours();const H=q.getUTCMinutes(),O=K>=12?"PM":"AM";return K=K%12||12,`${K}:${H.toString().padStart(2,"0")} ${O}`}}if(typeof z=="string"&&z.includes(":")){const q=z.split(":");if(q.length>=2){let K=parseInt(q[0],10);const H=parseInt(q[1],10);if(!isNaN(K)&&!isNaN(H)&&K>=0&&K<24&&H>=0&&H<60){const O=K>=12?"PM":"AM";return K=K%12||12,`${K}:${H.toString().padStart(2,"0")} ${O}`}}}}catch(q){console.error("Error formatting time:",q,z)}return z},k=()=>{switch(a.value){case"upcoming":return"No upcoming events found. Check back later for new events.";case"ongoing":return"No events are currently ongoing.";case"attending":return"You haven't RSVP'd to any events yet. Browse upcoming events to participate.";case"completed":return"No completed events to display.";default:return"No events match your search criteria."}},L=()=>{l.value="",a.value="all"};return Me(async()=>{console.log(" Devotee Events page mounted"),F(),await A(),await C(),console.log(" Page initialization complete",{temple:p.value,user:w.value,eventsCount:c.value.length})}),Pt(()=>{console.log(" Devotee Events page unmounted")}),(z,q)=>{var K,H,O,ee,ge,de;return m(),g("div",eY,[e("div",tY,[e("div",oY,[e("div",sY,[e("div",nY,[q[3]||(q[3]=e("div",{class:"h-10 w-10 rounded-full bg-indigo-100 flex items-center justify-center"},[e("svg",{class:"h-6 w-6 text-indigo-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})])],-1)),e("div",null,[e("h2",rY,h(p.value.name||"Temple"),1),p.value.city||p.value.state?(m(),g("p",aY,h(p.value.city)+h(p.value.city&&p.value.state?", ":"")+h(p.value.state),1)):J("",!0)])]),e("div",lY,[e("div",iY,[e("p",dY,h(((K=w.value)==null?void 0:K.name)||"Devotee"),1),e("p",uY,h(((H=w.value)==null?void 0:H.email)||""),1)]),q[4]||(q[4]=e("div",{class:"w-10 h-10 bg-indigo-100 rounded-full flex items-center justify-center"},[e("svg",{class:"w-6 h-6 text-indigo-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})])],-1))])])])]),le(up,{user:w.value,userName:((O=w.value)==null?void 0:O.fullName)||((ee=w.value)==null?void 0:ee.name)||"",userRole:((ge=w.value)==null?void 0:ge.role)||"devotee",title:"My Temple Events",subtitle:`Explore upcoming events and festivals at ${((de=p.value)==null?void 0:de.name)||"the temple"}`},null,8,["user","userName","userRole","subtitle"]),le(Rt,{class:"p-6"},{default:ye(()=>[e("div",cY,[e("div",pY,[e("div",mY,[e("div",gY,[le(Te(oL),{class:"h-5 w-5 text-gray-400"})]),ce(e("input",{"onUpdate:modelValue":q[0]||(q[0]=ie=>l.value=ie),type:"text",placeholder:"Search events...",class:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-all duration-200"},null,512),[[_e,l.value]])]),ce(e("select",{"onUpdate:modelValue":q[1]||(q[1]=ie=>a.value=ie),class:"px-4 py-2 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 bg-white transition-all duration-200"},[...q[5]||(q[5]=[e("option",{value:"all"},"All Events",-1),e("option",{value:"upcoming"},"Upcoming",-1),e("option",{value:"ongoing"},"Ongoing",-1),e("option",{value:"completed"},"Completed",-1)])],512),[[Re,a.value]])])])]),_:1}),r.value?(m(),g("div",fY,[le(Ia)])):I.value.length>0?(m(),g("div",vY,[(m(!0),g(be,null,$e(I.value,ie=>(m(),Ne(Rt,{key:ie.id,class:"p-6 hover:shadow-lg transition-all duration-200 cursor-pointer",onClick:me=>$(ie)},{default:ye(()=>[e("div",hY,[e("div",yY,[e("div",xY,[e("div",bY,[e("h3",wY,h(ie.title),1),e("p",kY,h(ie.description),1),e("div",_Y,[e("div",$Y,[le(Te(Ir),{class:"h-4 w-4"}),te(" "+h(U(ie.date)),1)]),e("div",SY,[le(Te(Eu),{class:"h-4 w-4"}),te(" "+h(_(ie.time)),1)]),e("div",DY,[le(Te(Iu),{class:"h-4 w-4"}),te(" "+h(ie.venue||"Temple Premises"),1)])])]),e("div",CY,[e("div",TY,[e("span",{class:se(M(ie))},h(R(ie)),3)])])])])])]),_:2},1032,["onClick"]))),128))])):(m(),g("div",EY,[le(Rt,{class:"p-8"},{default:ye(()=>[le(Te(Ir),{class:"h-16 w-16 text-gray-300 mx-auto mb-4"}),q[7]||(q[7]=e("h3",{class:"text-xl font-semibold text-gray-900 mb-2"},"No Events Found",-1)),e("p",AY,h(k()),1),le(gt,{variant:"outline",onClick:L},{default:ye(()=>[...q[6]||(q[6]=[te(" View All Events ",-1)])]),_:1})]),_:1})])),i.value?(m(),Ne(Aa,{key:3,show:d.value,onClose:y,size:"lg"},{default:ye(()=>[e("div",IY,[e("div",MY,[e("div",null,[e("h2",RY,h(i.value.title),1),e("div",PY,[e("div",NY,[le(Te(Ir),{class:"h-4 w-4"}),te(" "+h(U(i.value.date)),1)]),e("div",jY,[le(Te(Eu),{class:"h-4 w-4"}),te(" "+h(_(i.value.time)),1)]),e("div",LY,[le(Te(Iu),{class:"h-4 w-4"}),te(" "+h(i.value.venue||"Temple Premises"),1)])])]),e("button",{onClick:y,class:"text-gray-400 hover:text-gray-600 transition-colors duration-200"},[le(Te(nL),{class:"h-6 w-6"})])]),e("div",BY,[q[8]||(q[8]=e("h3",{class:"text-lg font-semibold text-gray-900 mb-3"},"About This Event",-1)),e("p",UY,h(i.value.description),1)]),i.value.sevas&&i.value.sevas.length>0?(m(),g("div",FY,[q[10]||(q[10]=e("h3",{class:"text-lg font-semibold text-gray-900 mb-3"},"Available Sevas",-1)),e("div",VY,[(m(!0),g(be,null,$e(i.value.sevas,ie=>(m(),g("div",{key:ie.id,class:"flex items-center justify-between p-3 bg-gray-50 rounded-lg"},[e("div",null,[e("div",OY,h(ie.name),1),e("div",zY,""+h(ie.amount),1)]),le(gt,{size:"sm",variant:"outline"},{default:ye(()=>[...q[9]||(q[9]=[te(" Book Now ",-1)])]),_:1})]))),128))])])):J("",!0),e("div",HY,[e("div",null,[q[11]||(q[11]=e("div",{class:"text-sm text-gray-600 mb-1"},"RSVP Status",-1)),e("span",{class:se(G(i.value.id))},h(b(i.value.id)?"Attending":"Not Attending"),3)]),e("div",qY,[le(gt,{variant:"outline",onClick:y},{default:ye(()=>[...q[12]||(q[12]=[te(" Close ",-1)])]),_:1}),E(i.value)?(m(),Ne(gt,{key:0,variant:b(i.value.id)?"danger":"primary",onClick:q[2]||(q[2]=ie=>j(i.value.id,!b(i.value.id)))},{default:ye(()=>[te(h(b(i.value.id)?"Cancel RSVP":"RSVP Now"),1)]),_:1},8,["variant"])):J("",!0)])])])]),_:1},8,["show"])):J("",!0)])}}},JY=ot(GY,[["__scopeId","data-v-04feafb2"]]),WY={class:"profile-edit-container min-h-screen bg-gray-50"},YY={class:"bg-white shadow-lg"},KY={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4"},XY={class:"flex items-center justify-between"},ZY={class:"flex items-center space-x-4"},QY={class:"text-lg font-semibold text-gray-900"},eK={key:0,class:"text-sm text-gray-500"},tK={class:"flex items-center space-x-3"},oK={class:"text-right hidden sm:block"},sK={class:"text-gray-900 font-medium text-sm"},nK={class:"text-gray-500 text-xs"},rK={class:"max-w-4xl mx-auto py-8 px-4"},aK={key:0,class:"flex justify-center items-center py-12"},lK={key:1},iK={class:"mb-8"},dK={class:"flex items-center justify-between mb-2"},uK={class:"text-sm text-gray-500"},cK={class:"w-full bg-gray-200 rounded-full h-2"},pK={class:"bg-white rounded-lg shadow-sm border"},mK={class:"border-b border-gray-200 px-6 py-4"},gK={class:"flex space-x-8 overflow-x-auto"},fK=["onClick"],vK={class:"p-6"},hK={key:0,class:"space-y-6"},yK={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},xK={key:1,class:"space-y-6"},bK={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},wK={key:2,class:"space-y-6"},kK={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},_K={key:3,class:"space-y-6"},$K={class:"grid grid-cols-2 md:grid-cols-3 gap-3"},SK=["value"],DK={class:"text-sm text-gray-700"},CK={class:"space-y-3"},TK={class:"flex items-center space-x-3"},EK={class:"flex items-center space-x-3"},AK={class:"flex items-center space-x-3"},IK={class:"border-t border-gray-200 px-6 py-4 flex justify-between"},MK={key:1},RK={class:"flex space-x-3"},PK=["disabled"],NK={key:0},jK={key:1},LK={__name:"ProfileEdit",setup(t){const o=tt(),s=et(),{showToast:n}=Ue(),r=B(0),l=B(!1),a=B(!1),d=B({name:"",city:"",state:""}),i=B({name:"",email:""}),c=B([{id:"personal",title:"Personal"},{id:"spiritual",title:"Spiritual"},{id:"family",title:"Family"},{id:"preferences",title:"Preferences"}]),u=B({fullName:"",email:"",dateOfBirth:"",phone:"",gender:"",address:"",gotra:"",nakshatra:"",rashi:"",preferredLanguage:"",fatherName:"",motherName:"",spouseName:"",numberOfChildren:0,preferredSevas:[],emailNotifications:!0,smsNotifications:!0,whatsappNotifications:!1}),p=B([{id:"abhisheka",name:"Abhisheka"},{id:"archana",name:"Archana"},{id:"annadana",name:"Annadana"},{id:"pradakshina",name:"Pradakshina"},{id:"bhajan",name:"Bhajan"},{id:"cleaning",name:"Cleaning"}]),w=oe(()=>{const y=[u.value.fullName,u.value.email,u.value.dateOfBirth,u.value.phone,u.value.gender,u.value.address,u.value.gotra,u.value.preferredLanguage],b=y.filter(E=>E&&E.toString().trim()!=="").length;return Math.round(b/y.length*100)}),f=oe(()=>o.params.id),v=()=>"http://localhost:8080/api/v1",N=()=>localStorage.getItem("access_token")||localStorage.getItem("token")||localStorage.getItem("authToken"),A=async()=>{var y;try{console.log(" Fetching temple information...");const b=localStorage.getItem("selectedTempleName"),E=localStorage.getItem("selectedTempleCity"),R=localStorage.getItem("selectedTempleState");b&&(d.value={name:b,city:E||"",state:R||""},console.log(" Temple info from localStorage:",d.value));const M=f.value||o.params.id||localStorage.getItem("selectedEntityId")||localStorage.getItem("current_entity_id")||localStorage.getItem("current_tenant_id");if(!M){console.warn(" No entity ID found"),b||(d.value.name="Temple");return}console.log(" Fetching temple details for entity ID:",M);try{const G=v(),U=N(),_=await Ie.get(`${G}/entities/${M}`,{headers:{Authorization:`Bearer ${U}`,"Content-Type":"application/json"}});console.log(" Temple API response:",_.data);const k=((y=_.data)==null?void 0:y.data)||_.data;k&&(d.value={name:k.name||k.Name||b||"Temple",city:k.city||k.City||E||"",state:k.state||k.State||R||""},d.value.name&&localStorage.setItem("selectedTempleName",d.value.name),d.value.city&&localStorage.setItem("selectedTempleCity",d.value.city),d.value.state&&localStorage.setItem("selectedTempleState",d.value.state),console.log(" Temple info updated from API:",d.value))}catch(G){console.warn(" API fetch failed, using localStorage data:",G.message),d.value.name||(d.value.name=b||"Temple")}}catch(b){console.error(" Error in fetchTempleInfo:",b),d.value.name=localStorage.getItem("selectedTempleName")||"Temple"}},F=()=>{try{console.log(" Fetching user information...");const y=localStorage.getItem("user_data");if(y)try{const M=JSON.parse(y);i.value={name:M.name||M.Name||M.full_name||"Devotee",email:M.email||M.Email||""},console.log(" User info from user_data:",i.value);return}catch(M){console.warn(" Error parsing user_data:",M)}const b=localStorage.getItem("user_name")||localStorage.getItem("userName")||localStorage.getItem("full_name"),E=localStorage.getItem("user_email")||localStorage.getItem("userEmail")||localStorage.getItem("email");if(b||E){i.value={name:b||"Devotee",email:E||""},console.log(" User info from localStorage items:",i.value);return}const R=localStorage.getItem("devotee_profile");if(R)try{const M=JSON.parse(R);i.value={name:M.full_name||M.name||"Devotee",email:M.email||""},console.log(" User info from profile:",i.value);return}catch(M){console.warn(" Error parsing profile data:",M)}console.log(" No user info found, using defaults"),i.value={name:"Devotee",email:""}}catch(y){console.error(" Error fetching user info:",y),i.value={name:"Devotee",email:""}}},I=y=>{if(!y)return"";try{const b=new Date(y);return isNaN(b.getTime())?"":b.toISOString().split("T")[0]}catch(b){return console.error("Error formatting date:",b),""}},C=y=>{const b=[];return y.seva_abhisheka&&b.push("abhisheka"),y.seva_archana&&b.push("archana"),y.seva_annadana&&b.push("annadana"),y.seva_pradakshina&&b.push("pradakshina"),y.seva_bhajan&&b.push("bhajan"),y.seva_cleaning&&b.push("cleaning"),b},j=async()=>{try{a.value=!0,console.log("Loading profile data...");const y=await Ht.getProfile();if(y&&y.data){const b=y.data;console.log("Profile data received:",b);const E=[];b.street_address&&E.push(b.street_address),b.city&&E.push(b.city),b.state&&E.push(b.state),b.pincode&&E.push(b.pincode),u.value={fullName:b.full_name||"",email:b.email||"",dateOfBirth:I(b.dob),phone:b.phone||"",gender:b.gender||"",address:E.join(", "),gotra:b.gotra||"",nakshatra:b.nakshatra||"",rashi:b.rashi||"",preferredLanguage:b.preferred_language||"",fatherName:b.father_name||"",motherName:b.mother_name||"",spouseName:b.spouse_name||"",numberOfChildren:b.number_of_children||0,preferredSevas:C(b),emailNotifications:b.email_notifications!==!1,smsNotifications:b.sms_notifications!==!1,whatsappNotifications:b.whatsapp_notifications===!0},console.log("Profile mapped to form:",u.value)}}catch(y){console.error("Error loading profile:",y)}finally{a.value=!1}},$=async()=>{var y,b,E,R,M,G,U,_,k,L;try{l.value=!0,console.log("Saving profile data:",u.value);const z={};if((y=u.value.fullName)!=null&&y.trim()&&(z.full_name=u.value.fullName.trim()),(b=u.value.email)!=null&&b.trim()&&(z.email=u.value.email.trim()),u.value.dateOfBirth){const H=new Date(u.value.dateOfBirth+"T00:00:00");z.dob=H.toISOString()}(E=u.value.phone)!=null&&E.trim()&&(z.phone=u.value.phone.trim()),u.value.gender&&(z.gender=u.value.gender),(R=u.value.address)!=null&&R.trim()&&(z.street_address=u.value.address.trim(),z.country="India"),(M=u.value.gotra)!=null&&M.trim()&&(z.gotra=u.value.gotra.trim()),(G=u.value.nakshatra)!=null&&G.trim()&&(z.nakshatra=u.value.nakshatra.trim()),(U=u.value.rashi)!=null&&U.trim()&&(z.rashi=u.value.rashi.trim()),u.value.preferredLanguage&&(z.preferred_language=u.value.preferredLanguage),(_=u.value.fatherName)!=null&&_.trim()&&(z.father_name=u.value.fatherName.trim()),(k=u.value.motherName)!=null&&k.trim()&&(z.mother_name=u.value.motherName.trim()),(L=u.value.spouseName)!=null&&L.trim()&&(z.spouse_name=u.value.spouseName.trim()),u.value.numberOfChildren&&(z.number_of_children=parseInt(u.value.numberOfChildren)),z.seva_abhisheka=u.value.preferredSevas.includes("abhisheka"),z.seva_archana=u.value.preferredSevas.includes("archana"),z.seva_annadana=u.value.preferredSevas.includes("annadana"),z.seva_pradakshina=u.value.preferredSevas.includes("pradakshina"),z.seva_bhajan=u.value.preferredSevas.includes("bhajan"),z.seva_cleaning=u.value.preferredSevas.includes("cleaning"),z.email_notifications=u.value.emailNotifications,z.sms_notifications=u.value.smsNotifications,z.whatsapp_notifications=u.value.whatsappNotifications,console.log("Sending profile data to API:",z);const q=await Ht.createOrUpdateProfile(z);console.log("Profile saved successfully:",q.data),n("Profile updated successfully!","success");const K=o.params.id;K?s.push(`/entity/${K}/devotee/dashboard`):s.push("/devotee/dashboard")}catch(z){console.error("Error saving profile:",z);const q=z.message||"Error saving profile";n(q,"error")}finally{l.value=!1}};return Me(async()=>{console.log(" Edit Profile page mounted"),F(),await A(),await j(),console.log(" Page initialization complete",{temple:d.value,user:i.value})}),(y,b)=>(m(),g("div",WY,[e("div",YY,[e("div",KY,[e("div",XY,[e("div",ZY,[b[20]||(b[20]=e("div",{class:"h-10 w-10 rounded-full bg-indigo-100 flex items-center justify-center"},[e("svg",{class:"h-6 w-6 text-indigo-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})])],-1)),e("div",null,[e("h2",QY,h(d.value.name||"Temple"),1),d.value.city||d.value.state?(m(),g("p",eK,h(d.value.city)+h(d.value.city&&d.value.state?", ":"")+h(d.value.state),1)):J("",!0)])]),e("div",tK,[e("div",oK,[e("p",sK,h(i.value.name||"Devotee"),1),e("p",nK,h(i.value.email||""),1)]),b[21]||(b[21]=e("div",{class:"w-10 h-10 bg-indigo-100 rounded-full flex items-center justify-center"},[e("svg",{class:"w-6 h-6 text-indigo-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})])],-1))])])])]),e("div",rK,[b[49]||(b[49]=e("div",{class:"mb-8"},[e("h1",{class:"text-3xl font-bold text-gray-900 mb-2"},"Edit Profile"),e("p",{class:"text-gray-600"},"Update your personal and spiritual information")],-1)),a.value?(m(),g("div",aK,[...b[22]||(b[22]=[e("div",{class:"animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600"},null,-1),e("span",{class:"ml-3 text-gray-600"},"Loading profile...",-1)])])):J("",!0),a.value?J("",!0):(m(),g("div",lK,[e("div",iK,[e("div",dK,[b[23]||(b[23]=e("span",{class:"text-sm font-medium text-indigo-600"},"Profile Completion",-1)),e("span",uK,h(w.value)+"%",1)]),e("div",cK,[e("div",{class:"bg-indigo-600 h-2 rounded-full transition-all duration-300",style:Vt({width:w.value+"%"})},null,4)])]),e("div",pK,[e("div",mK,[e("nav",gK,[(m(!0),g(be,null,$e(c.value,(E,R)=>(m(),g("button",{key:E.id,onClick:M=>r.value=R,class:se(["py-2 px-1 border-b-2 font-medium text-sm transition-colors whitespace-nowrap",r.value===R?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"])},h(E.title),11,fK))),128))])]),e("div",vK,[r.value===0?(m(),g("div",hK,[b[31]||(b[31]=e("h3",{class:"text-lg font-medium text-gray-900 mb-4"},"Personal Information",-1)),e("div",yK,[e("div",null,[b[24]||(b[24]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Full Name",-1)),ce(e("input",{"onUpdate:modelValue":b[0]||(b[0]=E=>u.value.fullName=E),type:"text",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500",placeholder:"Enter your full name"},null,512),[[_e,u.value.fullName]])]),e("div",null,[b[25]||(b[25]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Email",-1)),ce(e("input",{"onUpdate:modelValue":b[1]||(b[1]=E=>u.value.email=E),type:"email",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500",placeholder:"your.email@example.com"},null,512),[[_e,u.value.email]])]),e("div",null,[b[26]||(b[26]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Phone Number",-1)),ce(e("input",{"onUpdate:modelValue":b[2]||(b[2]=E=>u.value.phone=E),type:"tel",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500",placeholder:"+91 9876543210"},null,512),[[_e,u.value.phone]])]),e("div",null,[b[27]||(b[27]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Date of Birth",-1)),ce(e("input",{"onUpdate:modelValue":b[3]||(b[3]=E=>u.value.dateOfBirth=E),type:"date",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500"},null,512),[[_e,u.value.dateOfBirth]])]),e("div",null,[b[29]||(b[29]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Gender",-1)),ce(e("select",{"onUpdate:modelValue":b[4]||(b[4]=E=>u.value.gender=E),class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500"},[...b[28]||(b[28]=[e("option",{value:""},"Select Gender",-1),e("option",{value:"male"},"Male",-1),e("option",{value:"female"},"Female",-1),e("option",{value:"other"},"Other",-1)])],512),[[Re,u.value.gender]])])]),e("div",null,[b[30]||(b[30]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Address",-1)),ce(e("textarea",{"onUpdate:modelValue":b[5]||(b[5]=E=>u.value.address=E),rows:"3",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500",placeholder:"Enter your complete address"},null,512),[[_e,u.value.address]])])])):J("",!0),r.value===1?(m(),g("div",xK,[b[37]||(b[37]=e("h3",{class:"text-lg font-medium text-gray-900 mb-4"},"Spiritual Information",-1)),e("div",bK,[e("div",null,[b[32]||(b[32]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Gotra",-1)),ce(e("input",{"onUpdate:modelValue":b[6]||(b[6]=E=>u.value.gotra=E),type:"text",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500",placeholder:"Enter your gotra"},null,512),[[_e,u.value.gotra]])]),e("div",null,[b[33]||(b[33]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Nakshatra",-1)),ce(e("input",{"onUpdate:modelValue":b[7]||(b[7]=E=>u.value.nakshatra=E),type:"text",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500",placeholder:"Enter your nakshatra"},null,512),[[_e,u.value.nakshatra]])]),e("div",null,[b[34]||(b[34]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Rashi",-1)),ce(e("input",{"onUpdate:modelValue":b[8]||(b[8]=E=>u.value.rashi=E),type:"text",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500",placeholder:"Enter your rashi"},null,512),[[_e,u.value.rashi]])]),e("div",null,[b[36]||(b[36]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Preferred Language",-1)),ce(e("select",{"onUpdate:modelValue":b[9]||(b[9]=E=>u.value.preferredLanguage=E),class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500"},[...b[35]||(b[35]=[Ce('<option value="" data-v-39786e60>Select Language</option><option value="kannada" data-v-39786e60>Kannada</option><option value="hindi" data-v-39786e60>Hindi</option><option value="sanskrit" data-v-39786e60>Sanskrit</option><option value="tamil" data-v-39786e60>Tamil</option><option value="telugu" data-v-39786e60>Telugu</option><option value="english" data-v-39786e60>English</option>',7)])],512),[[Re,u.value.preferredLanguage]])])])])):J("",!0),r.value===2?(m(),g("div",wK,[b[42]||(b[42]=e("h3",{class:"text-lg font-medium text-gray-900 mb-4"},"Family Information",-1)),e("div",kK,[e("div",null,[b[38]||(b[38]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Father's Name",-1)),ce(e("input",{"onUpdate:modelValue":b[10]||(b[10]=E=>u.value.fatherName=E),type:"text",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500",placeholder:"Enter father's name"},null,512),[[_e,u.value.fatherName]])]),e("div",null,[b[39]||(b[39]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Mother's Name",-1)),ce(e("input",{"onUpdate:modelValue":b[11]||(b[11]=E=>u.value.motherName=E),type:"text",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500",placeholder:"Enter mother's name"},null,512),[[_e,u.value.motherName]])]),e("div",null,[b[40]||(b[40]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Spouse Name",-1)),ce(e("input",{"onUpdate:modelValue":b[12]||(b[12]=E=>u.value.spouseName=E),type:"text",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500",placeholder:"Enter spouse name (if applicable)"},null,512),[[_e,u.value.spouseName]])]),e("div",null,[b[41]||(b[41]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Number of Children",-1)),ce(e("input",{"onUpdate:modelValue":b[13]||(b[13]=E=>u.value.numberOfChildren=E),type:"number",min:"0",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500",placeholder:"0"},null,512),[[_e,u.value.numberOfChildren]])])])])):J("",!0),r.value===3?(m(),g("div",_K,[b[48]||(b[48]=e("h3",{class:"text-lg font-medium text-gray-900 mb-4"},"Seva Preferences",-1)),e("div",null,[b[43]||(b[43]=e("label",{class:"block text-sm font-medium text-gray-700 mb-3"},"Preferred Sevas",-1)),e("div",$K,[(m(!0),g(be,null,$e(p.value,E=>(m(),g("label",{key:E.id,class:"flex items-center space-x-2 p-3 border border-gray-200 rounded-lg hover:bg-gray-50 cursor-pointer"},[ce(e("input",{type:"checkbox",value:E.id,"onUpdate:modelValue":b[14]||(b[14]=R=>u.value.preferredSevas=R),class:"h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded"},null,8,SK),[[ct,u.value.preferredSevas]]),e("span",DK,h(E.name),1)]))),128))])]),e("div",null,[b[47]||(b[47]=e("label",{class:"block text-sm font-medium text-gray-700 mb-3"},"Notification Preferences",-1)),e("div",CK,[e("label",TK,[ce(e("input",{type:"checkbox","onUpdate:modelValue":b[15]||(b[15]=E=>u.value.emailNotifications=E),class:"h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded"},null,512),[[ct,u.value.emailNotifications]]),b[44]||(b[44]=e("span",{class:"text-sm text-gray-700"},"Email notifications for events and sevas",-1))]),e("label",EK,[ce(e("input",{type:"checkbox","onUpdate:modelValue":b[16]||(b[16]=E=>u.value.smsNotifications=E),class:"h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded"},null,512),[[ct,u.value.smsNotifications]]),b[45]||(b[45]=e("span",{class:"text-sm text-gray-700"},"SMS notifications for important updates",-1))]),e("label",AK,[ce(e("input",{type:"checkbox","onUpdate:modelValue":b[17]||(b[17]=E=>u.value.whatsappNotifications=E),class:"h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded"},null,512),[[ct,u.value.whatsappNotifications]]),b[46]||(b[46]=e("span",{class:"text-sm text-gray-700"},"WhatsApp notifications",-1))])])])])):J("",!0)]),e("div",IK,[r.value>0?(m(),g("button",{key:0,onClick:b[18]||(b[18]=E=>r.value--),class:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-indigo-500"}," Previous ")):(m(),g("div",MK)),e("div",RK,[e("button",{onClick:$,disabled:l.value,class:"px-4 py-2 text-sm font-medium text-white bg-indigo-600 border border-transparent rounded-md hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 disabled:opacity-50"},[l.value?(m(),g("span",NK,"Saving...")):(m(),g("span",jK,"Save Changes"))],8,PK),r.value<c.value.length-1?(m(),g("button",{key:0,onClick:b[19]||(b[19]=E=>r.value++),class:"px-4 py-2 text-sm font-medium text-white bg-indigo-600 border border-transparent rounded-md hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500"}," Next ")):J("",!0)])])])]))])]))}},Ru=ot(LK,[["__scopeId","data-v-39786e60"]]);class BK{constructor(){this.baseURL="/volunteers",this.entityBaseURL="/entities",this.membershipURL="/memberships"}async joinTemple(o){var s,n,r;try{console.log(`Attempting to join temple with ID: ${o}`);let l;try{l=await Co.post(this.membershipURL,{entity_id:o})}catch{console.log("First join attempt failed, trying alternative endpoint...");try{l=await Co.post("/userprofile/join-temple",{entity_id:o})}catch{l=await Co.post(`${this.entityBaseURL}/${o}/join`,{})}}return console.log("Join temple response:",l.data),{success:!0,data:l.data,message:"Temple joined successfully"}}catch(l){return console.error("Error joining temple:",l.response||l),{success:!1,message:((n=(s=l.response)==null?void 0:s.data)==null?void 0:n.error)||"Failed to join temple",error:((r=l.response)==null?void 0:r.data)||l.message}}}async getUserMemberships(){var o,s,n;try{console.log("Fetching user memberships...");let r;try{r=await Co.get(this.membershipURL)}catch{console.log("First membership attempt failed, trying alternative endpoint...");try{r=await Co.get("/userprofile/memberships")}catch{r=await Co.get("/user/joined-entities")}}console.log("User memberships response:",r.data);let l=r.data;return Array.isArray(r.data.memberships)?l=r.data.memberships:Array.isArray(r.data.data)?l=r.data.data:typeof r.data=="object"&&!Array.isArray(r.data)&&(l=Object.keys(r.data).map(a=>({entity_id:parseInt(a),...r.data[a]}))),{success:!0,data:l||[],message:"User memberships fetched successfully"}}catch(r){return console.error("Error fetching memberships:",r.response||r),{success:!1,message:((s=(o=r.response)==null?void 0:o.data)==null?void 0:s.error)||"Failed to fetch user memberships",error:((n=r.response)==null?void 0:n.data)||r.message}}}async getVolunteersByEntity(o,s={}){var n,r,l;try{const a=new URLSearchParams({page:s.page||1,limit:s.limit||10,search:s.search||"",status:s.status||"",joinedFrom:s.joinedFrom||"",joinedTo:s.joinedTo||"",sortBy:s.sortBy||"createdAt",sortOrder:s.sortOrder||"desc"}).toString(),d=await Co.get(`${this.entityBaseURL}/${o}/volunteers?${a}`);return{success:!0,data:d.data.volunteers||[],meta:d.data.meta||{},message:"Volunteers fetched successfully"}}catch(a){return{success:!1,message:((r=(n=a.response)==null?void 0:n.data)==null?void 0:r.message)||"Failed to fetch volunteers",error:((l=a.response)==null?void 0:l.data)||a.message}}}async getVolunteerDashboard(o){var s,n,r;try{return{success:!0,data:(await Co.get(`${this.baseURL}/${o}/dashboard`)).data.dashboard,message:"Volunteer dashboard data fetched successfully"}}catch(l){return{success:!1,message:((n=(s=l.response)==null?void 0:s.data)==null?void 0:n.message)||"Failed to fetch volunteer dashboard data",error:((r=l.response)==null?void 0:r.data)||l.message}}}}const Pu=new BK,UK={class:"min-h-screen bg-gray-50 py-8"},FK={class:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8"},VK={class:"bg-white rounded-xl shadow-md p-6 mb-8"},OK={class:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6"},zK={class:"md:col-span-2"},HK={class:"relative"},qK={class:"flex items-center justify-between text-sm text-gray-600 border-t pt-4"},GK={style:{"font-family":"sans-serif"}},JK={key:0,class:"flex justify-center items-center py-12"},WK={key:1,class:"text-center py-12"},YK={key:2,class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},KK=["onClick"],XK={class:"relative h-48 bg-gradient-to-br from-indigo-100 to-indigo-200"},ZK=["src","alt"],QK={key:1,class:"w-full h-full flex items-center justify-center"},eX={class:"p-6"},tX={class:"text-lg font-semibold text-gray-900 mb-2 group-hover:text-indigo-600 transition-colors duration-200",style:{"font-family":"sans-serif"}},oX={class:"space-y-2 mb-4"},sX={class:"flex items-center text-sm text-gray-600"},nX={key:0,class:"flex items-center text-sm text-gray-600"},rX={class:"flex items-center text-sm text-gray-600"},aX=["onClick","disabled"],lX={key:0},iX={key:1},dX={class:"text-center"},uX={class:"text-lg font-semibold text-gray-900 mb-2",style:{"font-family":"sans-serif"}},cX={class:"text-gray-600 text-sm mb-6"},pX={class:"flex space-x-3"},mX=["disabled"],gX={key:0,class:"flex items-center justify-center"},fX={key:1},vX={__name:"TempleSelection",setup(t){const o=Ue(),s=We(),n=B(""),r=B(""),l=B(!0),a=B(!1),d=B(null),i=B(!1),c=B([]),u=B([]),p=()=>{var b,E;return`joinedTemples_${((b=s.user)==null?void 0:b.id)||((E=s.user)==null?void 0:E.email)||"anonymous"}`},w=()=>{try{const y=p(),b=localStorage.getItem(y);b?u.value=JSON.parse(b):u.value=[],console.log("Loaded joined temples from localStorage:",u.value)}catch(y){console.error("Error loading joined temples from localStorage:",y),u.value=[]}},f=()=>{try{const y=p();localStorage.setItem(y,JSON.stringify(u.value)),console.log("Saved joined temples:",u.value)}catch(y){console.error("Error saving joined temples to localStorage:",y)}},v=async()=>{try{console.log("Fetching user memberships from API...");const y=await Pu.getUserMemberships();if(y.success&&Array.isArray(y.data)){const b=y.data.map(E=>E.entity_id||E.EntityID||E.entityId||E.id).filter(E=>E!=null);u.value=b,f(),console.log("User memberships fetched from API:",b)}else console.warn("No memberships found or API error, falling back to localStorage"),w()}catch(y){console.error("Error fetching user memberships from API:",y),w()}},N=y=>{if(!y)return!1;const b=Number(y);return u.value.map(R=>Number(R)).includes(b)},A=oe(()=>{let y=c.value;if(n.value){const b=n.value.toLowerCase();y=y.filter(E=>{var R,M,G;return((R=E.name)==null?void 0:R.toLowerCase().includes(b))||((M=E.city)==null?void 0:M.toLowerCase().includes(b))||((G=E.state)==null?void 0:G.toLowerCase().includes(b))})}return r.value&&(y=y.filter(b=>{var E;return((E=b.city)==null?void 0:E.toLowerCase())===r.value.toLowerCase()})),y}),F=()=>{n.value="",r.value=""},I=y=>{if(N(y.id)){o.info(`You are already a volunteer at ${y.name}`);return}d.value=y,a.value=!0},C=()=>{a.value=!1,d.value=null},j=async()=>{if(d.value){i.value=!0;try{console.log(`Joining temple with ID ${d.value.id}...`),u.value.includes(d.value.id)||(u.value.push(d.value.id),f());try{localStorage.setItem("selectedEntityId",d.value.id.toString()),localStorage.setItem("selectedTempleName",d.value.name)}catch(b){console.error("localStorage error:",b)}const y=await Pu.joinTemple(d.value.id);y.success?(console.log("API join temple success:",y),o.success(`Successfully joined ${d.value.name} as a volunteer!`)):console.error("API join temple failed, but UI already updated:",y)}catch(y){console.error("Error joining temple:",y),o.success(`Joined ${d.value.name} as a volunteer! (local only)`)}finally{i.value=!1,C()}}},$=async()=>{l.value=!0;try{console.log("Fetching temples from API...");const y=await lt.getTemples();Array.isArray(y)&&y.length>0?(c.value=y,console.log(`Successfully processed ${c.value.length} temples from API`)):(console.warn("No temples found or invalid response, using mock data"),c.value=lt.getMockTemples()),c.value.length===0&&o.info("No approved temples found. Please check back later.")}catch(y){console.error("Error fetching temple data from API:",y),c.value=lt.getMockTemples(),o.info("Using demo temple data.")}finally{l.value=!1}};return Me(async()=>{s.isAuthenticated||await s.initialize(),await v(),await $()}),(y,b)=>{var E,R;return m(),g("div",UK,[e("div",FK,[b[16]||(b[16]=Ce('<div class="text-center mb-8"><h1 class="text-3xl font-bold text-gray-900 mb-4" style="font-family:&#39;Roboto&#39;, sans-serif;"> Welcome, Volunteer! </h1><p class="text-lg text-gray-600 max-w-2xl mx-auto" style="font-family:sans-serif;"> Select a temple to begin your volunteer journey. You&#39;ll be able to view assigned sevas, upcoming events, and receive notifications from the temple administration. </p></div><div class="bg-indigo-50 border border-indigo-200 rounded-xl p-6 mb-8"><div class="flex items-start space-x-4"><div class="flex-shrink-0"><div class="w-12 h-12 bg-indigo-600 rounded-full flex items-center justify-center"><svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197m13.5-9a2.25 2.25 0 11-4.5 0 2.25 2.25 0 014.5 0z"></path></svg></div></div><div class="flex-1"><h3 class="text-lg font-semibold text-indigo-800 mb-2" style="font-family:sans-serif;"> Ready to Serve? </h3><p class="text-indigo-700 text-sm leading-relaxed"> As a volunteer, you&#39;ll have access to view seva assignments, upcoming temple events, and receive important notifications. Choose your temple below to get started. </p></div></div></div>',2)),e("div",VK,[e("div",OK,[e("div",zK,[b[4]||(b[4]=e("label",{for:"search",class:"block text-sm font-medium text-gray-700 mb-2",style:{"font-family":"sans-serif"}}," Search Temples ",-1)),e("div",HK,[b[3]||(b[3]=e("div",{class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},[e("svg",{class:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})])],-1)),ce(e("input",{"onUpdate:modelValue":b[0]||(b[0]=M=>n.value=M),type:"text",id:"search",placeholder:"Search by temple name, city, or location...",class:"block w-full pl-10 pr-3 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-all duration-200"},null,512),[[_e,n.value]])])]),e("div",null,[b[6]||(b[6]=e("label",{for:"location",class:"block text-sm font-medium text-gray-700 mb-2",style:{"font-family":"sans-serif"}}," Filter by Location ",-1)),ce(e("select",{"onUpdate:modelValue":b[1]||(b[1]=M=>r.value=M),id:"location",class:"block w-full px-3 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-all duration-200"},[...b[5]||(b[5]=[Ce('<option value="">All Locations</option><option value="bengaluru">Bengaluru</option><option value="mumbai">Mumbai</option><option value="delhi">Delhi</option><option value="chennai">Chennai</option><option value="hyderabad">Hyderabad</option>',6)])],512),[[Re,r.value]])])]),e("div",qK,[e("span",GK,h(A.value.length)+" temple"+h(A.value.length!==1?"s":"")+" found ",1),n.value||r.value?(m(),g("button",{key:0,onClick:F,class:"text-indigo-600 hover:text-indigo-800 font-medium transition-colors duration-200"}," Clear filters ")):J("",!0)])]),l.value?(m(),g("div",JK,[...b[7]||(b[7]=[e("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600"},null,-1)])])):A.value.length===0?(m(),g("div",WK,[b[8]||(b[8]=Ce('<div class="w-24 h-24 mx-auto mb-4 text-gray-300"><svg fill="currentColor" viewBox="0 0 24 24"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"></path></svg></div><h3 class="text-lg font-medium text-gray-900 mb-2" style="font-family:sans-serif;"> No temples found </h3><p class="text-gray-600 mb-4"> No approved temples match your search criteria. Please try different filters or check back later. </p>',3)),e("button",{onClick:F,class:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-lg text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 transition-all duration-200"}," View All Temples ")])):(m(),g("div",YK,[(m(!0),g(be,null,$e(A.value,M=>(m(),g("div",{key:M.id,class:"bg-white rounded-xl shadow-md hover:shadow-lg transition-all duration-200 overflow-hidden group cursor-pointer",onClick:G=>I(M)},[e("div",XK,[M.image?(m(),g("img",{key:0,src:M.image,alt:M.name,class:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-200"},null,8,ZK)):(m(),g("div",QK,[...b[9]||(b[9]=[e("svg",{class:"w-16 h-16 text-indigo-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})],-1)])])),b[10]||(b[10]=e("div",{class:"absolute top-3 right-3"},[e("span",{class:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800"},[e("svg",{class:"w-3 h-3 mr-1",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z","clip-rule":"evenodd"})]),te(" Active ")])],-1))]),e("div",eX,[e("h3",tX,h(M.name),1),e("div",oX,[e("div",sX,[b[11]||(b[11]=e("svg",{class:"w-4 h-4 mr-2 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})],-1)),te(" "+h(M.city)+", "+h(M.state),1)]),M.phone?(m(),g("div",nX,[b[12]||(b[12]=e("svg",{class:"w-4 h-4 mr-2 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"})],-1)),te(" "+h(M.phone),1)])):J("",!0),e("div",rX,[b[13]||(b[13]=e("svg",{class:"w-4 h-4 mr-2 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197m13.5-9a2.25 2.25 0 11-4.5 0 2.25 2.25 0 014.5 0z"})],-1)),te(" "+h(M.volunteersCount||0)+" volunteers ",1)])]),e("button",{onClick:qe(G=>I(M),["stop"]),disabled:N(M.id),class:se(["w-full inline-flex items-center justify-center px-4 py-2 border border-transparent text-sm font-medium rounded-lg text-white transition-all duration-200",N(M.id)?"bg-green-600 cursor-not-allowed opacity-80":"bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 group-hover:bg-indigo-700"])},[N(M.id)?(m(),g("span",lX,[...b[14]||(b[14]=[e("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})],-1),te(" Joined Successfully ",-1)])])):(m(),g("span",iX,[...b[15]||(b[15]=[te(" Join as Volunteer ",-1),e("svg",{class:"w-4 h-4 ml-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 7l5 5m0 0l-5 5m5-5H6"})],-1)])]))],10,aX)])],8,KK))),128))]))]),a.value?(m(),g("div",{key:0,class:"fixed inset-0 bg-gray-500 bg-opacity-75 flex items-center justify-center p-4 z-50",onClick:C},[e("div",{class:"bg-white rounded-xl shadow-xl max-w-md w-full p-6",onClick:b[2]||(b[2]=qe(()=>{},["stop"]))},[e("div",dX,[b[18]||(b[18]=e("div",{class:"w-16 h-16 mx-auto mb-4 bg-indigo-100 rounded-full flex items-center justify-center"},[e("svg",{class:"w-8 h-8 text-indigo-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})])],-1)),e("h3",uX," Join "+h((E=d.value)==null?void 0:E.name)+"? ",1),e("p",cX," You're about to join "+h((R=d.value)==null?void 0:R.name)+" as a volunteer. You'll receive access to view seva assignments and temple notifications. ",1),e("div",pX,[e("button",{onClick:C,class:"flex-1 px-4 py-2 border border-gray-300 text-sm font-medium rounded-lg text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 transition-all duration-200"}," Cancel "),e("button",{onClick:j,disabled:i.value,class:"flex-1 px-4 py-2 border border-transparent text-sm font-medium rounded-lg text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed"},[i.value?(m(),g("span",gX,[...b[17]||(b[17]=[e("svg",{class:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),te(" Joining... ",-1)])])):(m(),g("span",fX,"Join Temple"))],8,mX)])])])])):J("",!0)])}}},hX={class:"min-h-screen bg-gray-50"},yX={class:"bg-gradient-to-r from-indigo-600 to-indigo-800 text-white"},xX={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},bX={class:"flex items-center justify-between"},wX={class:"text-3xl font-bold font-roboto"},kX={class:"mt-2 text-indigo-100 text-lg"},_X={class:"hidden md:flex items-center space-x-4"},$X={class:"bg-white/10 backdrop-blur-sm rounded-xl p-4 text-center"},SX={class:"text-2xl font-bold"},DX={class:"bg-white/10 backdrop-blur-sm rounded-xl p-4 text-center"},CX={class:"text-2xl font-bold"},TX={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},EX={class:"grid grid-cols-2 gap-4 md:hidden mb-6"},AX={class:"bg-white rounded-xl shadow-md p-4 text-center border-l-4 border-indigo-500"},IX={class:"text-2xl font-bold text-gray-900"},MX={class:"bg-white rounded-xl shadow-md p-4 text-center border-l-4 border-indigo-500"},RX={class:"text-2xl font-bold text-gray-900"},PX={class:"mb-8"},NX={class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4"},jX={key:0,class:"absolute -top-2 -right-2 bg-red-500 text-white text-xs rounded-full w-6 h-6 flex items-center justify-center"},LX={class:"grid grid-cols-1 lg:grid-cols-3 gap-8"},BX={class:"lg:col-span-2"},UX={class:"bg-white rounded-xl shadow-md border border-gray-200"},FX={class:"p-6"},VX={key:0,class:"text-center py-8"},OX={key:1,class:"space-y-4"},zX={class:"flex items-start justify-between"},HX={class:"flex-1"},qX={class:"font-semibold text-gray-900"},GX={class:"text-sm text-gray-600 mt-1"},JX={class:"flex items-center mt-3 space-x-4 text-sm"},WX={class:"flex items-center text-gray-500"},YX={class:"flex items-center text-gray-500"},KX={class:"ml-4"},XX={class:"space-y-6"},ZX={class:"bg-white rounded-xl shadow-md border border-gray-200"},QX={class:"p-6"},eZ={key:0,class:"text-center py-6"},tZ={key:1,class:"space-y-3"},oZ={class:"font-semibold text-gray-900 text-sm"},sZ={class:"flex items-center mt-2 text-xs text-gray-600"},nZ={class:"p-6 overflow-y-auto max-h-[60vh]"},rZ={key:0,class:"text-center py-8"},aZ={key:1,class:"space-y-4"},lZ={class:"flex items-start justify-between"},iZ={class:"flex-1"},dZ={class:"text-gray-900"},uZ={class:"text-sm text-gray-500 mt-2"},cZ={class:"ml-4"},pZ={key:0,class:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800"},mZ={class:"p-6 overflow-y-auto max-h-[60vh]"},gZ={class:"space-y-6"},fZ={class:"bg-gray-50 rounded-lg p-4 space-y-3"},vZ={class:"text-gray-900"},hZ={class:"text-gray-900"},yZ={class:"grid grid-cols-1 sm:grid-cols-2 gap-4"},xZ={class:"text-gray-900"},bZ={class:"text-gray-900"},wZ={__name:"VolunteerDashboard",setup(t){const o=et(),s=B(!1),n=B(!1),r=B({fullName:"Ravi Kumar",email:"ravi.volunteer@temple.com",phone:"+91 98765 43210"}),l=B({name:"Sri Venkateswara Temple",address:"Temple Street, Bangalore, Karnataka 560001",phone:"+91 80 2345 6789",email:"info@srivenkateswara.temple"}),a=B([{id:1,name:"Abhishekam",description:"Assist with morning abhishekam ritual",scheduledDate:"2025-06-25",timeSlot:"6:00 AM - 8:00 AM",status:"Scheduled"},{id:2,name:"Decoration",description:"Flower decoration for evening aarti",scheduledDate:"2025-06-27",timeSlot:"5:00 PM - 6:00 PM",status:"Pending"},{id:3,name:"Prasadam Distribution",description:"Help distribute prasadam after evening prayers",scheduledDate:"2025-06-23",timeSlot:"7:00 PM - 8:00 PM",status:"Completed"}]),d=B([{id:1,name:"Janmashtami Celebration",date:"2025-08-16",description:"Grand celebration of Lord Krishna's birthday"},{id:2,name:"Monthly Satsang",date:"2025-06-30",description:"Community gathering and spiritual discourse"}]),i=B([{id:1,message:"New seva assignment: Abhishekam on June 25th",isRead:!1,createdAt:"2025-06-20T10:30:00Z"},{id:2,message:"Janmashtami celebration planning meeting on June 22nd",isRead:!1,createdAt:"2025-06-19T14:15:00Z"},{id:3,message:"Thank you for your service during last weekend's event",isRead:!0,createdAt:"2025-06-18T09:00:00Z"},{id:4,message:"Reminder: Monthly volunteer meeting tomorrow at 6 PM",isRead:!1,createdAt:"2025-06-17T16:45:00Z"},{id:5,message:"New temple guidelines have been updated",isRead:!0,createdAt:"2025-06-15T11:20:00Z"}]),c=oe(()=>({assignedSevas:a.value.filter($=>$.status!=="Completed").length,upcomingEvents:d.value.length})),u=oe(()=>i.value.filter($=>!$.isRead).length),p=()=>{o.push("/entity/1/volunteer/assignments")},w=()=>{o.push("/entity/1/volunteer/schedule")},f=()=>{s.value=!0},v=()=>{s.value=!1},N=()=>{n.value=!0},A=()=>{n.value=!1},F=()=>{i.value.forEach($=>$.isRead=!0)},I=$=>({Scheduled:"bg-blue-100 text-blue-800",Pending:"bg-yellow-100 text-yellow-800",Completed:"bg-green-100 text-green-800",Cancelled:"bg-red-100 text-red-800"})[$]||"bg-gray-100 text-gray-800",C=$=>new Date($).toLocaleDateString("en-IN",{day:"numeric",month:"short",year:"numeric"}),j=$=>new Date($).toLocaleDateString("en-IN",{day:"numeric",month:"long",year:"numeric",hour:"2-digit",minute:"2-digit"});return Me(()=>{console.log("Volunteer dashboard mounted")}),($,y)=>(m(),g("div",hX,[e("div",yX,[e("div",xX,[e("div",bX,[e("div",null,[e("h1",wX,"Welcome back, "+h(r.value.fullName)+"!",1),e("p",kX,h(l.value.name)+" - Volunteer Dashboard",1)]),e("div",_X,[e("div",$X,[e("div",SX,h(c.value.assignedSevas),1),y[2]||(y[2]=e("div",{class:"text-sm text-indigo-200"},"Assigned Sevas",-1))]),e("div",DX,[e("div",CX,h(c.value.upcomingEvents),1),y[3]||(y[3]=e("div",{class:"text-sm text-indigo-200"},"Upcoming Events",-1))])])])])]),e("div",TX,[e("div",EX,[e("div",AX,[e("div",IX,h(c.value.assignedSevas),1),y[4]||(y[4]=e("div",{class:"text-sm text-gray-600"},"Assigned Sevas",-1))]),e("div",MX,[e("div",RX,h(c.value.upcomingEvents),1),y[5]||(y[5]=e("div",{class:"text-sm text-gray-600"},"Upcoming Events",-1))])]),e("div",PX,[y[10]||(y[10]=e("h2",{class:"text-xl font-bold text-gray-900 mb-4 font-roboto"},"Quick Actions",-1)),e("div",NX,[e("button",{onClick:p,class:"bg-white hover:bg-indigo-50 border border-gray-200 rounded-xl p-6 text-left transition-all duration-200 hover:shadow-lg hover:border-indigo-300"},[...y[6]||(y[6]=[Ce('<div class="flex items-center" data-v-03a61261><div class="bg-indigo-100 rounded-lg p-3" data-v-03a61261><svg class="w-6 h-6 text-indigo-600" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-03a61261><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2" data-v-03a61261></path></svg></div><div class="ml-4" data-v-03a61261><h3 class="font-semibold text-gray-900" data-v-03a61261>My Assignments</h3><p class="text-sm text-gray-600" data-v-03a61261>View seva assignments</p></div></div>',1)])]),e("button",{onClick:w,class:"bg-white hover:bg-indigo-50 border border-gray-200 rounded-xl p-6 text-left transition-all duration-200 hover:shadow-lg hover:border-indigo-300"},[...y[7]||(y[7]=[Ce('<div class="flex items-center" data-v-03a61261><div class="bg-indigo-100 rounded-lg p-3" data-v-03a61261><svg class="w-6 h-6 text-indigo-600" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-03a61261><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z" data-v-03a61261></path></svg></div><div class="ml-4" data-v-03a61261><h3 class="font-semibold text-gray-900" data-v-03a61261>My Schedule</h3><p class="text-sm text-gray-600" data-v-03a61261>Check upcoming tasks</p></div></div>',1)])]),e("button",{onClick:f,class:"bg-white hover:bg-indigo-50 border border-gray-200 rounded-xl p-6 text-left transition-all duration-200 hover:shadow-lg hover:border-indigo-300 relative"},[y[8]||(y[8]=Ce('<div class="flex items-center" data-v-03a61261><div class="bg-indigo-100 rounded-lg p-3" data-v-03a61261><svg class="w-6 h-6 text-indigo-600" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-03a61261><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 17h5l-5 5v-5z" data-v-03a61261></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 19H6.5a2.5 2.5 0 010-5H9" data-v-03a61261></path></svg></div><div class="ml-4" data-v-03a61261><h3 class="font-semibold text-gray-900" data-v-03a61261>Notifications</h3><p class="text-sm text-gray-600" data-v-03a61261>Temple updates</p></div></div>',1)),u.value>0?(m(),g("span",jX,h(u.value),1)):J("",!0)]),e("button",{onClick:N,class:"bg-white hover:bg-indigo-50 border border-gray-200 rounded-xl p-6 text-left transition-all duration-200 hover:shadow-lg hover:border-indigo-300"},[...y[9]||(y[9]=[Ce('<div class="flex items-center" data-v-03a61261><div class="bg-indigo-100 rounded-lg p-3" data-v-03a61261><svg class="w-6 h-6 text-indigo-600" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-03a61261><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4" data-v-03a61261></path></svg></div><div class="ml-4" data-v-03a61261><h3 class="font-semibold text-gray-900" data-v-03a61261>Temple Info</h3><p class="text-sm text-gray-600" data-v-03a61261>View temple details</p></div></div>',1)])])])]),e("div",LX,[e("div",BX,[e("div",UX,[y[14]||(y[14]=e("div",{class:"px-6 py-4 border-b border-gray-200"},[e("h3",{class:"text-lg font-semibold text-gray-900 font-roboto"},"My Assigned Sevas")],-1)),e("div",FX,[a.value.length===0?(m(),g("div",VX,[...y[11]||(y[11]=[Ce('<div class="text-gray-400 mb-4" data-v-03a61261><svg class="w-16 h-16 mx-auto" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-03a61261><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2" data-v-03a61261></path></svg></div><p class="text-gray-600" data-v-03a61261>No sevas assigned yet</p><p class="text-sm text-gray-500 mt-2" data-v-03a61261>Check back later for new assignments</p>',3)])])):(m(),g("div",OX,[(m(!0),g(be,null,$e(a.value,b=>(m(),g("div",{key:b.id,class:"border border-gray-200 rounded-lg p-4 hover:bg-gray-50 transition-colors duration-200"},[e("div",zX,[e("div",HX,[e("h4",qX,h(b.name),1),e("p",GX,h(b.description),1),e("div",JX,[e("div",WX,[y[12]||(y[12]=e("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})],-1)),te(" "+h(C(b.scheduledDate)),1)]),e("div",YX,[y[13]||(y[13]=e("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),te(" "+h(b.timeSlot),1)])])]),e("div",KX,[e("span",{class:se([I(b.status),"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium"])},h(b.status),3)])])]))),128))]))])])]),e("div",XX,[e("div",ZX,[y[17]||(y[17]=e("div",{class:"px-6 py-4 border-b border-gray-200"},[e("h3",{class:"text-lg font-semibold text-gray-900 font-roboto"},"Upcoming Events")],-1)),e("div",QX,[d.value.length===0?(m(),g("div",eZ,[...y[15]||(y[15]=[e("div",{class:"text-gray-400 mb-3"},[e("svg",{class:"w-12 h-12 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})])],-1),e("p",{class:"text-sm text-gray-600"},"No upcoming events",-1)])])):(m(),g("div",tZ,[(m(!0),g(be,null,$e(d.value,b=>(m(),g("div",{key:b.id,class:"border-l-4 border-indigo-500 bg-indigo-50 p-4 rounded-r-lg"},[e("h4",oZ,h(b.name),1),e("div",sZ,[y[16]||(y[16]=e("svg",{class:"w-3 h-3 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})],-1)),te(" "+h(C(b.date)),1)])]))),128))]))])])])])]),s.value?(m(),g("div",{key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",onClick:v},[e("div",{class:"bg-white rounded-xl shadow-xl max-w-2xl w-full mx-4 max-h-[80vh] overflow-hidden",onClick:y[0]||(y[0]=qe(()=>{},["stop"]))},[e("div",{class:"px-6 py-4 border-b border-gray-200 flex items-center justify-between"},[y[19]||(y[19]=e("h3",{class:"text-xl font-semibold text-gray-900 font-roboto"},"All Notifications",-1)),e("button",{onClick:v,class:"text-gray-400 hover:text-gray-600 transition-colors duration-200"},[...y[18]||(y[18]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),e("div",nZ,[i.value.length===0?(m(),g("div",rZ,[...y[20]||(y[20]=[e("div",{class:"text-gray-400 mb-4"},[e("svg",{class:"w-16 h-16 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 17h5l-5 5v-5z"})])],-1),e("p",{class:"text-gray-600"},"No notifications found",-1)])])):(m(),g("div",aZ,[(m(!0),g(be,null,$e(i.value,b=>(m(),g("div",{key:b.id,class:se(["p-4 rounded-lg border transition-colors duration-200",b.isRead?"bg-gray-50 border-gray-200":"bg-blue-50 border-blue-200"])},[e("div",lZ,[e("div",iZ,[e("p",dZ,h(b.message),1),e("p",uZ,h(j(b.createdAt)),1)]),e("div",cZ,[b.isRead?J("",!0):(m(),g("span",pZ," New "))])])],2))),128))]))]),e("div",{class:"px-6 py-4 border-t border-gray-200 bg-gray-50"},[e("button",{onClick:F,class:"w-full bg-indigo-600 text-white py-2 px-4 rounded-lg hover:bg-indigo-700 transition-colors duration-200 font-medium"}," Mark All as Read ")])])])):J("",!0),n.value?(m(),g("div",{key:1,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",onClick:A},[e("div",{class:"bg-white rounded-xl shadow-xl max-w-2xl w-full mx-4 max-h-[80vh] overflow-hidden",onClick:y[1]||(y[1]=qe(()=>{},["stop"]))},[e("div",{class:"px-6 py-4 border-b border-gray-200 flex items-center justify-between"},[y[22]||(y[22]=e("h3",{class:"text-xl font-semibold text-gray-900 font-roboto"},"Temple Details",-1)),e("button",{onClick:A,class:"text-gray-400 hover:text-gray-600 transition-colors duration-200"},[...y[21]||(y[21]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),e("div",mZ,[e("div",gZ,[e("div",null,[y[27]||(y[27]=e("h4",{class:"text-lg font-semibold text-gray-900 mb-3"},"Basic Information",-1)),e("div",fZ,[e("div",null,[y[23]||(y[23]=e("label",{class:"text-sm font-medium text-gray-700"},"Temple Name",-1)),e("p",vZ,h(l.value.name),1)]),e("div",null,[y[24]||(y[24]=e("label",{class:"text-sm font-medium text-gray-700"},"Address",-1)),e("p",hZ,h(l.value.address),1)]),e("div",yZ,[e("div",null,[y[25]||(y[25]=e("label",{class:"text-sm font-medium text-gray-700"},"Phone",-1)),e("p",xZ,h(l.value.phone),1)]),e("div",null,[y[26]||(y[26]=e("label",{class:"text-sm font-medium text-gray-700"},"Email",-1)),e("p",bZ,h(l.value.email),1)])])])]),y[28]||(y[28]=Ce('<div data-v-03a61261><h4 class="text-lg font-semibold text-gray-900 mb-3" data-v-03a61261>Temple Timings</h4><div class="bg-gray-50 rounded-lg p-4" data-v-03a61261><div class="grid grid-cols-1 sm:grid-cols-2 gap-4" data-v-03a61261><div data-v-03a61261><label class="text-sm font-medium text-gray-700" data-v-03a61261>Morning</label><p class="text-gray-900" data-v-03a61261>5:30 AM - 12:00 PM</p></div><div data-v-03a61261><label class="text-sm font-medium text-gray-700" data-v-03a61261>Evening</label><p class="text-gray-900" data-v-03a61261>4:00 PM - 9:00 PM</p></div></div></div></div><div data-v-03a61261><h4 class="text-lg font-semibold text-gray-900 mb-3" data-v-03a61261>Daily Schedule</h4><div class="bg-gray-50 rounded-lg p-4 space-y-2" data-v-03a61261><div class="flex justify-between" data-v-03a61261><span class="text-gray-700" data-v-03a61261>Suprabhatam</span><span class="text-gray-900" data-v-03a61261>5:30 AM</span></div><div class="flex justify-between" data-v-03a61261><span class="text-gray-700" data-v-03a61261>Abhishekam</span><span class="text-gray-900" data-v-03a61261>6:00 AM</span></div><div class="flex justify-between" data-v-03a61261><span class="text-gray-700" data-v-03a61261>Archana</span><span class="text-gray-900" data-v-03a61261>7:00 AM</span></div><div class="flex justify-between" data-v-03a61261><span class="text-gray-700" data-v-03a61261>Afternoon Aarti</span><span class="text-gray-900" data-v-03a61261>12:00 PM</span></div><div class="flex justify-between" data-v-03a61261><span class="text-gray-700" data-v-03a61261>Evening Aarti</span><span class="text-gray-900" data-v-03a61261>7:00 PM</span></div><div class="flex justify-between" data-v-03a61261><span class="text-gray-700" data-v-03a61261>Night Aarti</span><span class="text-gray-900" data-v-03a61261>8:30 PM</span></div></div></div><div data-v-03a61261><h4 class="text-lg font-semibold text-gray-900 mb-3" data-v-03a61261>Temple Management</h4><div class="bg-gray-50 rounded-lg p-4 space-y-3" data-v-03a61261><div data-v-03a61261><label class="text-sm font-medium text-gray-700" data-v-03a61261>Head Priest</label><p class="text-gray-900" data-v-03a61261>Sri Venkateswara Sharma</p></div><div data-v-03a61261><label class="text-sm font-medium text-gray-700" data-v-03a61261>Temple Administrator</label><p class="text-gray-900" data-v-03a61261>Sri Rajesh Kumar</p></div><div data-v-03a61261><label class="text-sm font-medium text-gray-700" data-v-03a61261>Volunteer Coordinator</label><p class="text-gray-900" data-v-03a61261>Smt. Lakshmi Devi</p><p class="text-sm text-gray-600" data-v-03a61261>coordinator@srivenkateswara.temple</p></div></div></div>',3))])])])])):J("",!0)]))}},kZ=ot(wZ,[["__scopeId","data-v-03a61261"]]),_Z={class:"min-h-screen bg-gray-50"},$Z={class:"bg-white shadow-sm border-b border-gray-200"},SZ={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},DZ={class:"py-6"},CZ={class:"flex flex-col sm:flex-row sm:items-center sm:justify-between"},TZ={class:"mt-4 sm:mt-0 flex flex-col sm:flex-row gap-3"},EZ=["disabled"],AZ={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6"},IZ={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8"},MZ={class:"bg-white overflow-hidden shadow-md rounded-xl"},RZ={class:"p-6"},PZ={class:"flex items-center"},NZ={class:"ml-4"},jZ={class:"text-2xl font-bold text-gray-900"},LZ={class:"bg-white overflow-hidden shadow-md rounded-xl"},BZ={class:"p-6"},UZ={class:"flex items-center"},FZ={class:"ml-4"},VZ={class:"text-2xl font-bold text-gray-900"},OZ={class:"bg-white overflow-hidden shadow-md rounded-xl"},zZ={class:"p-6"},HZ={class:"flex items-center"},qZ={class:"ml-4"},GZ={class:"text-2xl font-bold text-gray-900"},JZ={class:"bg-white overflow-hidden shadow-md rounded-xl"},WZ={class:"p-6"},YZ={class:"flex items-center"},KZ={class:"ml-4"},XZ={class:"text-2xl font-bold text-gray-900"},ZZ={class:"bg-white shadow-md rounded-xl mb-6"},QZ={class:"border-b border-gray-200"},eQ={class:"-mb-px flex space-x-8 px-6","aria-label":"Tabs"},tQ=["onClick"],oQ={class:"bg-white shadow-md rounded-xl"},sQ={class:"px-6 py-4 border-b border-gray-200"},nQ={class:"flex flex-col sm:flex-row sm:items-center sm:justify-between"},rQ={class:"text-lg font-semibold text-gray-900 font-['Roboto']"},aQ={class:"mt-3 sm:mt-0 flex items-center space-x-3"},lQ={class:"relative"},iQ={class:"divide-y divide-gray-200"},dQ={key:0,class:"p-8 text-center"},uQ={key:1,class:"p-8 text-center"},cQ={class:"mt-1 text-sm text-gray-500"},pQ={class:"flex flex-col lg:flex-row lg:items-center lg:justify-between"},mQ={class:"flex-1 min-w-0"},gQ={class:"flex items-center space-x-3"},fQ={class:"text-lg font-semibold text-gray-900 font-['Roboto'] truncate"},vQ={class:"mt-2 flex flex-col sm:flex-row sm:items-center text-sm text-gray-500 space-y-1 sm:space-y-0 sm:space-x-6"},hQ={class:"flex items-center"},yQ={class:"flex items-center"},xQ={class:"flex items-center"},bQ={class:"mt-2 text-sm text-gray-600 font-sans"},wQ={key:0,class:"mt-2 flex items-center text-sm text-gray-500"},kQ={class:"mt-4 lg:mt-0 lg:ml-6 flex flex-col sm:flex-row gap-2"},_Q=["onClick"],$Q=["onClick"],SQ=["onClick"],DQ={key:0,class:"fixed inset-0 z-50 overflow-y-auto"},CQ={class:"flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0"},TQ={class:"inline-block align-bottom bg-white rounded-xl text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full"},EQ={class:"bg-white px-6 pt-6 pb-4"},AQ={class:"flex items-center justify-between"},IQ={class:"px-6 pb-6"},MQ={class:"space-y-4"},RQ={class:"grid grid-cols-2 gap-2"},PQ=["value"],NQ={class:"ml-2 text-sm text-gray-700 font-sans"},jQ={class:"space-y-2"},LQ=["value"],BQ={class:"ml-2 text-sm text-gray-700 font-sans"},UQ={class:"bg-gray-50 px-6 py-4 flex flex-col sm:flex-row-reverse gap-3"},FQ={__name:"MyAssignments",setup(t){const o=B(!1),s=B(""),n=B("all"),r=B(!1),l=B({totalAssignments:12,completed:8,pending:3,thisWeek:2}),a=B([{id:"all",name:"All",count:12},{id:"pending",name:"Pending",count:3},{id:"accepted",name:"Accepted",count:6},{id:"completed",name:"Completed",count:8},{id:"upcoming",name:"Upcoming",count:4}]),d=B({days:["Monday","Wednesday","Friday"],timeSlots:["Morning (6AM-12PM)","Evening (6PM-10PM)"]}),i=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],c=["Early Morning (4AM-8AM)","Morning (6AM-12PM)","Afternoon (12PM-6PM)","Evening (6PM-10PM)","Night (10PM-12AM)"],u=B([{id:1,title:"Temple Cleaning - Main Hall",description:"Assist with daily cleaning and maintenance of the main prayer hall including floor mopping, decoration arrangement, and general upkeep.",date:"2025-06-22",startTime:"6:00 AM",endTime:"8:00 AM",location:"Main Prayer Hall",status:"pending",coordinator:"Radhika Sharma"},{id:2,title:"Festival Decoration Setup",description:"Help set up decorations for the upcoming Janmashtami celebration. Tasks include hanging garlands, arranging flowers, and setting up stage decorations.",date:"2025-06-23",startTime:"4:00 PM",endTime:"8:00 PM",location:"Temple Courtyard",status:"accepted",coordinator:"Priya Nair"},{id:3,title:"Prasadam Distribution",description:"Assist in preparing and distributing prasadam to devotees during evening aarti. Includes serving, crowd management, and cleanup.",date:"2025-06-21",startTime:"6:00 PM",endTime:"8:30 PM",location:"Distribution Counter",status:"completed",coordinator:"Amit Kumar"},{id:4,title:"Library Organization",description:"Help organize religious books and scriptures in the temple library. Tasks include cataloging, shelving, and maintaining reading area.",date:"2025-06-24",startTime:"10:00 AM",endTime:"1:00 PM",location:"Temple Library",status:"accepted",coordinator:"Dr. Sunita Mehta"},{id:5,title:"Youth Program Coordination",description:"Assist with organizing and conducting youth spiritual education program. Help with activities, storytelling, and managing children.",date:"2025-06-25",startTime:"3:00 PM",endTime:"5:00 PM",location:"Community Hall",status:"pending",coordinator:"Rajesh Gupta"}]),p=oe(()=>{let $=u.value;if(n.value!=="all")if(n.value==="upcoming"){const y=new Date().toISOString().split("T")[0];$=$.filter(b=>b.date>=y&&(b.status==="accepted"||b.status==="pending"))}else $=$.filter(y=>y.status===n.value);if(s.value){const y=s.value.toLowerCase();$=$.filter(b=>b.title.toLowerCase().includes(y)||b.description.toLowerCase().includes(y)||b.location.toLowerCase().includes(y)||b.coordinator.toLowerCase().includes(y))}return $}),w=$=>{const y=a.value.find(b=>b.id===$);return y?y.name:"All"},f=$=>({pending:"bg-yellow-400",accepted:"bg-blue-400",completed:"bg-green-400",declined:"bg-red-400"})[$]||"bg-gray-400",v=$=>({pending:"bg-yellow-100 text-yellow-800",accepted:"bg-blue-100 text-blue-800",completed:"bg-green-100 text-green-800",declined:"bg-red-100 text-red-800"})[$]||"bg-gray-100 text-gray-800",N=$=>new Date($).toLocaleDateString("en-US",{weekday:"short",year:"numeric",month:"short",day:"numeric"}),A=async()=>{o.value=!0;try{await new Promise($=>setTimeout($,1e3)),console.log("Refreshing assignments...")}catch($){console.error("Error refreshing assignments:",$)}finally{o.value=!1}},F=async $=>{try{await new Promise(b=>setTimeout(b,500));const y=u.value.find(b=>b.id===$);y&&(y.status="accepted"),l.value.pending-=1,console.log("Assignment accepted successfully!")}catch(y){console.error("Error accepting assignment:",y)}},I=async $=>{try{await new Promise(b=>setTimeout(b,500));const y=u.value.find(b=>b.id===$);y&&(y.status="declined"),l.value.pending-=1,console.log("Assignment declined.")}catch(y){console.error("Error declining assignment:",y)}},C=$=>{console.log("Viewing assignment details:",$),alert(`Assignment Details:

Title: ${$.title}
Date: ${N($.date)}
Time: ${$.startTime} - ${$.endTime}
Location: ${$.location}
Coordinator: ${$.coordinator}

Description: ${$.description}`)},j=async()=>{try{await new Promise($=>setTimeout($,1e3)),console.log("Saving availability:",d.value),r.value=!1,console.log("Availability updated successfully!")}catch($){console.error("Error saving availability:",$)}};return Me(()=>{A()}),($,y)=>(m(),g("div",_Z,[e("div",$Z,[e("div",SZ,[e("div",DZ,[e("div",CZ,[y[8]||(y[8]=e("div",null,[e("h1",{class:"text-2xl font-bold text-gray-900 font-['Roboto']"},"My Assignments"),e("p",{class:"mt-1 text-sm text-gray-600 font-sans"}," View and manage your volunteering assignments and schedules ")],-1)),e("div",TZ,[e("button",{onClick:A,disabled:o.value,class:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-lg text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200"},[(m(),g("svg",{class:se(["w-4 h-4 mr-2",{"animate-spin":o.value}]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[...y[6]||(y[6]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"},null,-1)])],2)),y[7]||(y[7]=te(" Refresh ",-1))],8,EZ)])])])])]),e("div",AZ,[e("div",IZ,[e("div",MZ,[e("div",RZ,[e("div",PZ,[y[10]||(y[10]=e("div",{class:"flex-shrink-0"},[e("div",{class:"w-10 h-10 bg-indigo-100 rounded-lg flex items-center justify-center"},[e("svg",{class:"w-6 h-6 text-indigo-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})])])],-1)),e("div",NZ,[y[9]||(y[9]=e("dt",{class:"text-sm font-medium text-gray-500 font-sans"},"Total Assignments",-1)),e("dd",jZ,h(l.value.totalAssignments),1)])])])]),e("div",LZ,[e("div",BZ,[e("div",UZ,[y[12]||(y[12]=e("div",{class:"flex-shrink-0"},[e("div",{class:"w-10 h-10 bg-green-100 rounded-lg flex items-center justify-center"},[e("svg",{class:"w-6 h-6 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})])])],-1)),e("div",FZ,[y[11]||(y[11]=e("dt",{class:"text-sm font-medium text-gray-500 font-sans"},"Completed",-1)),e("dd",VZ,h(l.value.completed),1)])])])]),e("div",OZ,[e("div",zZ,[e("div",HZ,[y[14]||(y[14]=e("div",{class:"flex-shrink-0"},[e("div",{class:"w-10 h-10 bg-yellow-100 rounded-lg flex items-center justify-center"},[e("svg",{class:"w-6 h-6 text-yellow-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})])])],-1)),e("div",qZ,[y[13]||(y[13]=e("dt",{class:"text-sm font-medium text-gray-500 font-sans"},"Pending",-1)),e("dd",GZ,h(l.value.pending),1)])])])]),e("div",JZ,[e("div",WZ,[e("div",YZ,[y[16]||(y[16]=e("div",{class:"flex-shrink-0"},[e("div",{class:"w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center"},[e("svg",{class:"w-6 h-6 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})])])],-1)),e("div",KZ,[y[15]||(y[15]=e("dt",{class:"text-sm font-medium text-gray-500 font-sans"},"This Week",-1)),e("dd",XZ,h(l.value.thisWeek),1)])])])])]),e("div",ZZ,[e("div",QZ,[e("nav",eQ,[(m(!0),g(be,null,$e(a.value,b=>(m(),g("button",{key:b.id,onClick:E=>n.value=b.id,class:se([n.value===b.id?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300","whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm transition-all duration-200"])},[te(h(b.name)+" ",1),b.count?(m(),g("span",{key:0,class:se([n.value===b.id?"bg-indigo-100 text-indigo-600":"bg-gray-100 text-gray-900","ml-2 py-0.5 px-2.5 rounded-full text-xs font-medium"])},h(b.count),3)):J("",!0)],10,tQ))),128))])])]),e("div",oQ,[e("div",sQ,[e("div",nQ,[e("h3",rQ,h(w(n.value))+" Assignments ",1),e("div",aQ,[e("div",lQ,[ce(e("input",{"onUpdate:modelValue":y[0]||(y[0]=b=>s.value=b),type:"text",placeholder:"Search assignments...",class:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-lg leading-5 bg-white placeholder-gray-500 focus:outline-none focus:placeholder-gray-400 focus:ring-1 focus:ring-indigo-500 focus:border-indigo-500 text-sm"},null,512),[[_e,s.value]]),y[17]||(y[17]=e("div",{class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},[e("svg",{class:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})])],-1))])])])]),e("div",iQ,[o.value?(m(),g("div",dQ,[...y[18]||(y[18]=[e("div",{class:"inline-flex items-center px-4 py-2 font-semibold leading-6 text-sm shadow rounded-md text-indigo-600 bg-indigo-50"},[e("svg",{class:"animate-spin -ml-1 mr-3 h-5 w-5 text-indigo-600",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]),te(" Loading assignments... ")],-1)])])):p.value.length===0?(m(),g("div",uQ,[y[19]||(y[19]=e("svg",{class:"mx-auto h-12 w-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})],-1)),y[20]||(y[20]=e("h3",{class:"mt-2 text-sm font-medium text-gray-900"},"No assignments found",-1)),e("p",cQ,h(s.value?"Try adjusting your search criteria.":"No assignments match the current filter."),1)])):(m(!0),g(be,{key:2},$e(p.value,b=>(m(),g("div",{key:b.id,class:"p-6 hover:bg-gray-50 transition-colors duration-200"},[e("div",pQ,[e("div",mQ,[e("div",gQ,[e("div",{class:se(["flex-shrink-0 w-3 h-3 rounded-full",f(b.status)])},null,2),e("h4",fQ,h(b.title),1),e("span",{class:se(["inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium",v(b.status)])},h(b.status),3)]),e("div",vQ,[e("div",hQ,[y[21]||(y[21]=e("svg",{class:"flex-shrink-0 mr-1.5 h-4 w-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})],-1)),te(" "+h(N(b.date)),1)]),e("div",yQ,[y[22]||(y[22]=e("svg",{class:"flex-shrink-0 mr-1.5 h-4 w-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),te(" "+h(b.startTime)+" - "+h(b.endTime),1)]),e("div",xQ,[y[23]||(y[23]=e("svg",{class:"flex-shrink-0 mr-1.5 h-4 w-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})],-1)),te(" "+h(b.location),1)])]),e("p",bQ,h(b.description),1),b.coordinator?(m(),g("div",wQ,[y[24]||(y[24]=e("svg",{class:"flex-shrink-0 mr-1.5 h-4 w-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})],-1)),te(" Coordinator: "+h(b.coordinator),1)])):J("",!0)]),e("div",kQ,[b.status==="pending"?(m(),g("button",{key:0,onClick:E=>F(b.id),class:"inline-flex items-center px-3 py-2 border border-transparent text-sm leading-4 font-medium rounded-lg text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 transition-all duration-200"}," Accept ",8,_Q)):J("",!0),b.status==="pending"?(m(),g("button",{key:1,onClick:E=>I(b.id),class:"inline-flex items-center px-3 py-2 border border-red-300 text-sm leading-4 font-medium rounded-lg text-red-700 bg-red-50 hover:bg-red-100 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 transition-all duration-200"}," Decline ",8,$Q)):J("",!0),e("button",{onClick:E=>C(b),class:"inline-flex items-center px-3 py-2 border border-gray-300 text-sm leading-4 font-medium rounded-lg text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 transition-all duration-200"}," View Details ",8,SQ)])])]))),128))])])]),r.value?(m(),g("div",DQ,[e("div",CQ,[e("div",{class:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity",onClick:y[1]||(y[1]=b=>r.value=!1)}),y[30]||(y[30]=e("span",{class:"hidden sm:inline-block sm:align-middle sm:h-screen"},"",-1)),e("div",TQ,[e("div",EQ,[e("div",AQ,[y[26]||(y[26]=e("h3",{class:"text-lg leading-6 font-bold text-gray-900 font-['Roboto']"}," Update Availability ",-1)),e("button",{onClick:y[2]||(y[2]=b=>r.value=!1),class:"text-gray-400 hover:text-gray-600 transition-colors duration-200"},[...y[25]||(y[25]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),y[27]||(y[27]=e("p",{class:"mt-2 text-sm text-gray-600 font-sans"}," Set your availability preferences for volunteer assignments. ",-1))]),e("div",IQ,[e("div",MQ,[e("div",null,[y[28]||(y[28]=e("label",{class:"block text-sm font-medium text-gray-700 font-sans mb-2"}," Preferred Days ",-1)),e("div",RQ,[(m(),g(be,null,$e(i,b=>e("label",{key:b,class:"flex items-center"},[ce(e("input",{"onUpdate:modelValue":y[3]||(y[3]=E=>d.value.days=E),value:b,type:"checkbox",class:"h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded"},null,8,PQ),[[ct,d.value.days]]),e("span",NQ,h(b),1)])),64))])]),e("div",null,[y[29]||(y[29]=e("label",{class:"block text-sm font-medium text-gray-700 font-sans mb-2"}," Preferred Time Slots ",-1)),e("div",jQ,[(m(),g(be,null,$e(c,b=>e("label",{key:b,class:"flex items-center"},[ce(e("input",{"onUpdate:modelValue":y[4]||(y[4]=E=>d.value.timeSlots=E),value:b,type:"checkbox",class:"h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded"},null,8,LQ),[[ct,d.value.timeSlots]]),e("span",BQ,h(b),1)])),64))])])])]),e("div",UQ,[e("button",{onClick:j,class:"w-full inline-flex justify-center px-4 py-2 border border-transparent text-sm font-medium rounded-lg text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 transition-all duration-200 sm:w-auto"}," Save Changes "),e("button",{onClick:y[5]||(y[5]=b=>r.value=!1),class:"w-full inline-flex justify-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-lg text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 transition-all duration-200 sm:w-auto"}," Cancel ")])])])])):J("",!0)]))}},VQ={class:"min-h-screen bg-gray-50 p-4 sm:p-6 lg:p-8"},OQ={class:"mb-8"},zQ={class:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4"},HQ={class:"flex flex-col sm:flex-row gap-3"},qQ=["value"],GQ=["disabled"],JQ={key:0,class:"animate-spin -ml-1 mr-2 h-4 w-4 text-white inline",fill:"none",viewBox:"0 0 24 24"},WQ={class:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8"},YQ={class:"bg-white rounded-2xl shadow-md p-6 border border-gray-200"},KQ={class:"flex items-center"},XQ={class:"ml-4"},ZQ={class:"text-2xl font-bold text-gray-900"},QQ={class:"bg-white rounded-2xl shadow-md p-6 border border-gray-200"},eee={class:"flex items-center"},tee={class:"ml-4"},oee={class:"text-2xl font-bold text-gray-900"},see={class:"bg-white rounded-2xl shadow-md p-6 border border-gray-200"},nee={class:"flex items-center"},ree={class:"ml-4"},aee={class:"text-2xl font-bold text-gray-900"},lee={class:"bg-white rounded-2xl shadow-md border border-gray-200 mb-8"},iee={class:"p-6 border-b border-gray-200"},dee={class:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4"},uee={class:"flex bg-gray-100 rounded-xl p-1"},cee={key:0,class:"p-6"},pee={key:0,class:"text-center py-12"},mee={key:1,class:"space-y-4"},gee={class:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4"},fee={class:"flex-1"},vee={class:"flex items-center gap-3 mb-2"},hee={class:"text-lg font-semibold text-gray-900 mb-1"},yee={class:"text-gray-600 mb-2"},xee={class:"flex flex-col sm:flex-row sm:items-center gap-2 text-sm text-gray-500"},bee={class:"flex items-center gap-1"},wee={class:"flex items-center gap-1"},kee={class:"flex items-center gap-1"},_ee={class:"flex flex-col sm:flex-row gap-2"},$ee=["onClick"],See=["onClick"],Dee={key:1,class:"p-6"},Cee={class:"p-6 border-b border-gray-200"},Tee={class:"flex items-center justify-between"},Eee={class:"text-xl font-bold text-gray-900",style:{"font-family":"'Roboto', sans-serif"}},Aee={class:"p-6"},Iee={class:"space-y-4"},Mee={class:"text-gray-900"},Ree={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Pee={class:"text-gray-900"},Nee={class:"text-gray-900"},jee={class:"text-gray-900"},Lee={key:0},Bee={class:"text-gray-900"},Uee={__name:"MySchedule",setup(t){const o=B(!1),s=B(new Date().getMonth()),n=B("list"),r=B(!1),l=B(null),a=B([{id:1,type:"seva",title:"Morning Prayer Service",description:"Assist with morning prayers and temple setup",date:"2025-06-22",time:"06:00 AM - 08:00 AM",location:"Main Temple Hall",status:"upcoming",notes:"Please arrive 15 minutes early for briefing"},{id:2,type:"event",title:"Ganesha Chaturthi Celebration",description:"Help with event setup and crowd management",date:"2025-06-25",time:"10:00 AM - 06:00 PM",location:"Temple Grounds",status:"upcoming",notes:"Lunch will be provided"},{id:3,type:"seva",title:"Temple Cleaning Drive",description:"Weekly temple cleaning and maintenance",date:"2025-06-18",time:"07:00 AM - 09:00 AM",location:"Entire Temple Complex",status:"completed"},{id:4,type:"seva",title:"Food Distribution",description:"Distribute prasad to devotees",date:"2025-06-28",time:"12:00 PM - 02:00 PM",location:"Temple Kitchen",status:"upcoming"},{id:5,type:"event",title:"Spiritual Discourse",description:"Help with audio/video setup and seating arrangement",date:"2025-06-30",time:"05:00 PM - 08:00 PM",location:"Discourse Hall",status:"upcoming"}]),d=[{value:0,label:"January"},{value:1,label:"February"},{value:2,label:"March"},{value:3,label:"April"},{value:4,label:"May"},{value:5,label:"June"},{value:6,label:"July"},{value:7,label:"August"},{value:8,label:"September"},{value:9,label:"October"},{value:10,label:"November"},{value:11,label:"December"}],i=oe(()=>a.value.filter(F=>new Date(F.date).getMonth()===s.value)),c=oe(()=>{const F=i.value.length,I=a.value.filter(j=>j.status==="completed").length,C=a.value.filter(j=>j.status==="upcoming").length;return{thisMonth:F,completed:I,upcoming:C}}),u=async()=>{o.value=!0,await new Promise(F=>setTimeout(F,1e3)),o.value=!1},p=()=>{},w=F=>{const I=a.value.find(C=>C.id===F);I&&(I.status="completed")},f=F=>{l.value=F,r.value=!0},v=()=>{r.value=!1,l.value=null},N=F=>new Date(F).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"}),A=F=>{switch(F){case"completed":return"bg-green-100 text-green-800";case"upcoming":return"bg-orange-100 text-orange-800";case"cancelled":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}};return Me(()=>{}),(F,I)=>{var C,j,$,y,b,E,R,M;return m(),g("div",VQ,[e("div",OQ,[e("div",zQ,[I[5]||(I[5]=e("div",null,[e("h1",{class:"text-3xl font-bold text-gray-900",style:{"font-family":"'Roboto', sans-serif"}},"My Schedule"),e("p",{class:"mt-2 text-gray-600"},"View your upcoming seva assignments and events")],-1)),e("div",HQ,[ce(e("select",{"onUpdate:modelValue":I[0]||(I[0]=G=>s.value=G),onChange:p,class:"px-4 py-2 border border-gray-300 rounded-xl bg-white text-gray-700 focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-all duration-200"},[(m(),g(be,null,$e(d,G=>e("option",{key:G.value,value:G.value},h(G.label),9,qQ)),64))],544),[[Re,s.value]]),e("button",{onClick:u,disabled:o.value,class:"px-6 py-2 bg-indigo-600 text-white rounded-xl hover:bg-indigo-700 focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 shadow-md"},[o.value?(m(),g("svg",JQ,[...I[4]||(I[4]=[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)])])):J("",!0),te(" "+h(o.value?"Loading...":"Refresh"),1)],8,GQ)])])]),e("div",WQ,[e("div",YQ,[e("div",KQ,[I[7]||(I[7]=e("div",{class:"p-3 bg-indigo-100 rounded-xl"},[e("svg",{class:"h-6 w-6 text-indigo-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})])],-1)),e("div",XQ,[I[6]||(I[6]=e("p",{class:"text-sm font-medium text-gray-600"},"This Month",-1)),e("p",ZQ,h(c.value.thisMonth),1)])])]),e("div",QQ,[e("div",eee,[I[9]||(I[9]=e("div",{class:"p-3 bg-green-100 rounded-xl"},[e("svg",{class:"h-6 w-6 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1)),e("div",tee,[I[8]||(I[8]=e("p",{class:"text-sm font-medium text-gray-600"},"Completed",-1)),e("p",oee,h(c.value.completed),1)])])]),e("div",see,[e("div",nee,[I[11]||(I[11]=e("div",{class:"p-3 bg-orange-100 rounded-xl"},[e("svg",{class:"h-6 w-6 text-orange-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1)),e("div",ree,[I[10]||(I[10]=e("p",{class:"text-sm font-medium text-gray-600"},"Upcoming",-1)),e("p",aee,h(c.value.upcoming),1)])])])]),e("div",lee,[e("div",iee,[e("div",dee,[I[12]||(I[12]=e("h2",{class:"text-xl font-bold text-gray-900",style:{"font-family":"'Roboto', sans-serif"}},"Schedule View",-1)),e("div",uee,[e("button",{onClick:I[1]||(I[1]=G=>n.value="list"),class:se(["px-4 py-2 rounded-lg text-sm font-medium transition-all duration-200",n.value==="list"?"bg-white text-indigo-600 shadow-sm":"text-gray-600 hover:text-gray-900"])}," List View ",2),e("button",{onClick:I[2]||(I[2]=G=>n.value="calendar"),class:se(["px-4 py-2 rounded-lg text-sm font-medium transition-all duration-200",n.value==="calendar"?"bg-white text-indigo-600 shadow-sm":"text-gray-600 hover:text-gray-900"])}," Calendar View ",2)])])]),n.value==="list"?(m(),g("div",cee,[i.value.length===0?(m(),g("div",pee,[...I[13]||(I[13]=[e("svg",{class:"mx-auto h-12 w-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})],-1),e("h3",{class:"mt-4 text-lg font-medium text-gray-900"},"No scheduled items",-1),e("p",{class:"mt-2 text-gray-600"},"You don't have any assignments for the selected period.",-1)])])):(m(),g("div",mee,[(m(!0),g(be,null,$e(i.value,G=>(m(),g("div",{key:G.id,class:"bg-gray-50 rounded-xl p-6 border border-gray-200 hover:shadow-md transition-all duration-200"},[e("div",gee,[e("div",fee,[e("div",vee,[e("span",{class:se(["px-2 py-1 rounded-lg text-xs font-medium",G.type==="seva"?"bg-indigo-100 text-indigo-800":"bg-purple-100 text-purple-800"])},h(G.type==="seva"?"Seva":"Event"),3),e("span",{class:se(["px-2 py-1 rounded-lg text-xs font-medium",A(G.status)])},h(G.status),3)]),e("h3",hee,h(G.title),1),e("p",yee,h(G.description),1),e("div",xee,[e("div",bee,[I[14]||(I[14]=e("svg",{class:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})],-1)),te(" "+h(N(G.date)),1)]),e("div",wee,[I[15]||(I[15]=e("svg",{class:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),te(" "+h(G.time),1)]),e("div",kee,[I[16]||(I[16]=e("svg",{class:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})],-1)),te(" "+h(G.location),1)])])]),e("div",_ee,[G.status==="upcoming"?(m(),g("button",{key:0,onClick:U=>w(G.id),class:"px-4 py-2 bg-green-600 text-white rounded-xl hover:bg-green-700 focus:ring-2 focus:ring-green-500 focus:ring-offset-2 transition-all duration-200 text-sm font-medium"}," Mark Complete ",8,$ee)):J("",!0),e("button",{onClick:U=>f(G),class:"px-4 py-2 bg-indigo-100 text-indigo-700 rounded-xl hover:bg-indigo-200 focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 transition-all duration-200 text-sm font-medium"}," View Details ",8,See)])])]))),128))]))])):(m(),g("div",Dee,[...I[17]||(I[17]=[Ce('<div class="bg-gray-50 rounded-xl p-8 text-center"><svg class="mx-auto h-12 w-12 text-gray-400 mb-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"></path></svg><h3 class="text-lg font-medium text-gray-900 mb-2">Calendar View</h3><p class="text-gray-600">Calendar view will be implemented in the next phase</p></div>',1)])]))]),r.value?(m(),g("div",{key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",onClick:v},[e("div",{class:"bg-white rounded-2xl shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",onClick:I[3]||(I[3]=qe(()=>{},["stop"]))},[e("div",Cee,[e("div",Tee,[e("h3",Eee,h((C=l.value)==null?void 0:C.title),1),e("button",{onClick:v,class:"p-2 hover:bg-gray-100 rounded-xl transition-all duration-200"},[...I[18]||(I[18]=[e("svg",{class:"h-5 w-5 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])])]),e("div",Aee,[e("div",Iee,[e("div",null,[I[19]||(I[19]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Description",-1)),e("p",Mee,h((j=l.value)==null?void 0:j.description),1)]),e("div",Ree,[e("div",null,[I[20]||(I[20]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Date",-1)),e("p",Pee,h(N(($=l.value)==null?void 0:$.date)),1)]),e("div",null,[I[21]||(I[21]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Time",-1)),e("p",Nee,h((y=l.value)==null?void 0:y.time),1)])]),e("div",null,[I[22]||(I[22]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Location",-1)),e("p",jee,h((b=l.value)==null?void 0:b.location),1)]),e("div",null,[I[23]||(I[23]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Status",-1)),e("span",{class:se(["px-3 py-1 rounded-lg text-sm font-medium",A((E=l.value)==null?void 0:E.status)])},h((R=l.value)==null?void 0:R.status),3)]),(M=l.value)!=null&&M.notes?(m(),g("div",Lee,[I[24]||(I[24]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Notes",-1)),e("p",Bee,h(l.value.notes),1)])):J("",!0)])]),e("div",{class:"p-6 border-t border-gray-200 flex justify-end"},[e("button",{onClick:v,class:"px-6 py-2 bg-gray-100 text-gray-700 rounded-xl hover:bg-gray-200 focus:ring-2 focus:ring-gray-500 focus:ring-offset-2 transition-all duration-200 font-medium"}," Close ")])])])):J("",!0)])}}},Fee={class:"notifications-page min-h-screen bg-gradient-to-br from-indigo-50 via-white to-purple-50 py-8 px-4 sm:px-6 lg:px-8"},Vee={class:"max-w-4xl mx-auto"},Oee={class:"grid grid-cols-1 sm:grid-cols-3 gap-6 mb-8"},zee={class:"bg-white rounded-2xl shadow-lg border border-indigo-100 p-6 transform hover:scale-105 transition-all duration-300"},Hee={class:"flex items-center"},qee={class:"p-3 rounded-xl bg-indigo-100"},Gee={class:"ml-4"},Jee={class:"text-2xl font-bold text-gray-900"},Wee={class:"bg-white rounded-2xl shadow-lg border border-amber-100 p-6 transform hover:scale-105 transition-all duration-300"},Yee={class:"flex items-center"},Kee={class:"p-3 rounded-xl bg-amber-100"},Xee={class:"ml-4"},Zee={class:"text-2xl font-bold text-gray-900"},Qee={class:"bg-white rounded-2xl shadow-lg border border-green-100 p-6 transform hover:scale-105 transition-all duration-300"},ete={class:"flex items-center"},tte={class:"p-3 rounded-xl bg-green-100"},ote={class:"ml-4"},ste={class:"text-2xl font-bold text-gray-900"},nte={class:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 mb-8"},rte={class:"flex flex-wrap gap-3"},ate={class:"w-full sm:w-auto"},lte={key:0,class:"flex justify-center items-center py-16"},ite={class:"relative"},dte={class:"absolute inset-0 flex items-center justify-center"},ute={key:1,class:"bg-white rounded-2xl shadow-xl border border-gray-100 p-12 text-center my-8 transform hover:scale-105 transition-all duration-300"},cte={class:"flex justify-center mb-6"},pte={class:"relative"},mte={class:"h-20 w-20 rounded-full bg-gradient-to-br from-indigo-100 to-purple-100 flex items-center justify-center"},gte={class:"absolute -top-1 -right-1 h-6 w-6 rounded-full bg-gradient-to-r from-indigo-500 to-purple-500 flex items-center justify-center"},fte={class:"text-gray-500 text-lg max-w-md mx-auto leading-relaxed"},vte={key:2,class:"space-y-6"},hte={__name:"NotificationsView",setup(t){const o=lp(),{notifications:s,unreadCount:n,isLoading:r,markAsRead:l,markAllAsRead:a,removeNotification:d,clearRead:i,fetchNotifications:c,NOTIFICATION_TYPES:u,CATEGORIES:p}=o,w=B("all"),f=[{value:"all",label:"All Notifications"},{value:"unread",label:"Unread Only"},{value:"temple",label:"Temple Updates"},{value:"seva",label:"Seva Bookings"},{value:"donation",label:"Donations"},{value:"event",label:"Events"},{value:"system",label:"System Updates"}],v=oe(()=>w.value==="all"?s:w.value==="unread"?s.filter(A=>!A.isRead):s.filter(A=>A.category===w.value)),N=oe(()=>w.value==="all"?"You have no notifications at the moment...":w.value==="unread"?"All caught up! You have no unread notifications.":`You have no ${{temple:"temple updates",seva:"seva booking",donation:"donation",event:"event",system:"system"}[w.value]||w.value} notifications.`);return Me(()=>c("current-user-id")),(A,F)=>(m(),g("div",Fee,[e("div",Vee,[F[8]||(F[8]=e("div",{class:"mb-8"},[e("div",{class:"text-center sm:text-left"},[e("h1",{class:"text-4xl font-bold bg-gradient-to-r from-indigo-800 to-purple-700 bg-clip-text text-transparent mb-3"}," Notifications "),e("p",{class:"text-gray-600 text-lg font-medium"},"Manage all your notifications in one place")])],-1)),e("div",Oee,[e("div",zee,[e("div",Hee,[e("div",qee,[le(Te(Ar),{class:"h-6 w-6 text-indigo-600"})]),e("div",Gee,[F[1]||(F[1]=e("p",{class:"text-sm font-medium text-gray-600"},"Total",-1)),e("p",Jee,h(Te(s).length),1)])])]),e("div",Wee,[e("div",Yee,[e("div",Kee,[le(Te(eL),{class:"h-6 w-6 text-amber-600"})]),e("div",Xee,[F[2]||(F[2]=e("p",{class:"text-sm font-medium text-gray-600"},"Unread",-1)),e("p",Zee,h(Te(n)),1)])])]),e("div",Qee,[e("div",ete,[e("div",tte,[le(Te(sa),{class:"h-6 w-6 text-green-600"})]),e("div",ote,[F[3]||(F[3]=e("p",{class:"text-sm font-medium text-gray-600"},"Read",-1)),e("p",ste,h(Te(s).length-Te(n)),1)])])])]),e("div",nte,[e("div",rte,[Te(n)>0?(m(),Ne(gt,{key:0,onClick:Te(a),variant:"secondary",size:"sm",class:"inline-flex items-center bg-indigo-100 text-indigo-700 hover:bg-indigo-200 border-0 rounded-xl px-6 py-2 font-semibold transition-all duration-200 transform hover:scale-105"},{default:ye(()=>[le(Te(sa),{class:"h-4 w-4 mr-2"}),F[4]||(F[4]=te(" Mark all as read ",-1))]),_:1},8,["onClick"])):J("",!0),Te(s).length>0?(m(),Ne(gt,{key:1,onClick:Te(i),variant:"secondary",size:"sm",class:"inline-flex items-center bg-amber-100 text-amber-700 hover:bg-amber-200 border-0 rounded-xl px-6 py-2 font-semibold transition-all duration-200 transform hover:scale-105"},{default:ye(()=>[le(Te(sL),{class:"h-4 w-4 mr-2"}),F[5]||(F[5]=te(" Clear read notifications ",-1))]),_:1},8,["onClick"])):J("",!0)]),e("div",ate,[le(zn,{modelValue:w.value,"onUpdate:modelValue":F[0]||(F[0]=I=>w.value=I),options:f,placeholder:"Filter notifications",class:"min-w-[200px] rounded-xl border-indigo-200 focus:border-indigo-500 focus:ring-indigo-500"},null,8,["modelValue"])])]),Te(r)?(m(),g("div",lte,[e("div",ite,[F[6]||(F[6]=e("div",{class:"w-16 h-16 border-4 border-indigo-200 border-t-indigo-600 rounded-full animate-spin"},null,-1)),e("div",dte,[le(Te(Ar),{class:"h-6 w-6 text-indigo-600"})])])])):v.value.length===0?(m(),g("div",ute,[e("div",cte,[e("div",pte,[e("div",mte,[le(Te(Ar),{class:"h-10 w-10 text-indigo-600"})]),e("div",gte,[le(Te(Qj),{class:"h-3 w-3 text-white"})])])]),F[7]||(F[7]=e("h3",{class:"text-2xl font-bold text-gray-900 mb-3"},"No notifications",-1)),e("p",fte,h(N.value),1)])):(m(),g("div",vte,[(m(!0),g(be,null,$e(v.value,I=>(m(),g("div",{key:I.id,class:se(["group bg-white rounded-2xl shadow-lg overflow-hidden transition-all duration-300 transform hover:scale-102 hover:shadow-xl",I.isRead?"border border-gray-100 opacity-80 hover:opacity-100":"border border-indigo-100 border-l-4 border-l-indigo-500 shadow-indigo-100"])},null,2))),128))]))])]))}},yte={class:"p-6"},xte={key:0,class:"flex justify-center items-center py-12"},bte={key:1,class:"space-y-6"},wte={class:"bg-white shadow-md rounded-lg p-6"},kte={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},_te={class:"flex items-center"},$te={class:"flex items-center"},Ste={class:"flex items-center"},Dte={class:"px-2 py-1 bg-indigo-100 text-indigo-800 rounded-full text-sm"},Cte={class:"flex items-center"},Tte={class:"flex items-center"},Ete={class:"flex items-center"},Ate={key:0,class:"mt-4"},Ite={class:"flex items-start"},Mte={key:0},Rte={key:1},Pte={key:0,class:"bg-white shadow-md rounded-lg p-6"},Nte={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},jte={key:0,class:"flex items-center"},Lte={key:1,class:"flex items-center"},Bte={key:2,class:"flex items-center"},Ute={key:3,class:"flex items-center"},Fte={key:4,class:"flex items-center"},Vte={key:1,class:"bg-white shadow-md rounded-lg p-6"},Ote={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},zte={key:0,class:"flex items-center"},Hte={key:1,class:"flex items-center"},qte={key:2,class:"flex items-center"},Gte={key:3,class:"flex items-center"},Jte={key:2,class:"bg-white shadow-md rounded-lg p-6"},Wte={class:"flex flex-wrap gap-2"},Yte={class:"bg-white shadow-md rounded-lg p-6"},Kte={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Xte={class:"flex items-center"},Zte={class:"flex items-center"},Qte={class:"flex items-center"},eoe={class:"font-mono text-sm"},toe={key:3,class:"bg-yellow-50 border border-yellow-200 rounded-lg p-6 text-center"},ooe={__name:"UserProfileView",setup(t){const o=et(),s=tt(),{showToast:n}=Ue(),r=B(!1),l=B(null),a=B({}),d=oe(()=>JSON.parse(localStorage.getItem("temple_user_data")||"{}").email||"Not provided"),i=oe(()=>{const I=localStorage.getItem("temple_user_role");return I?I.charAt(0).toUpperCase()+I.slice(1):"Devotee"}),c=oe(()=>a.value.gotra||a.value.nakshatra||a.value.rashi||a.value.lagna||a.value.veda_shaka),u=oe(()=>a.value.father_name||a.value.mother_name||a.value.spouse_name||a.value.children&&a.value.children.length>0),p=oe(()=>{const I=[];return a.value.seva_abhisheka&&I.push("abhisheka"),a.value.seva_arti&&I.push("arti"),a.value.seva_annadana&&I.push("annadana"),a.value.seva_archana&&I.push("archana"),a.value.seva_kalyanam&&I.push("kalyanam"),a.value.seva_homam&&I.push("homam"),I}),w=oe(()=>[a.value.full_name,a.value.dob,a.value.phone,a.value.gotra].filter(Boolean).length<2),f=I=>{if(!I)return"Not provided";try{return new Date(I).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})}catch{return"Invalid date"}},v=I=>I?I.charAt(0).toUpperCase()+I.slice(1):"Not provided",N=I=>I.charAt(0).toUpperCase()+I.slice(1),A=async()=>{var I,C;try{r.value=!0,l.value=null,console.log("Loading user profile...");const j=await Ht.getProfile();j&&j.data?(a.value=j.data,console.log("Profile loaded:",a.value)):(console.log("No profile data found"),a.value={})}catch(j){console.error("Error loading profile:",j),l.value=j.message||"Failed to load profile",!((I=j.message)!=null&&I.includes("404"))&&!((C=j.message)!=null&&C.includes("not found"))&&n(l.value,"error"),a.value={}}finally{r.value=!1}},F=()=>{const I=s.params.id;I?o.push(`/entity/${I}/devotee/profile/create`):o.push("/devotee/profile/create")};return Me(()=>{A()}),(I,C)=>(m(),g("div",yte,[C[27]||(C[27]=e("div",{class:"flex justify-between items-center mb-6"},[e("h1",{class:"text-2xl font-bold"},"My Profile")],-1)),r.value?(m(),g("div",xte,[...C[0]||(C[0]=[e("div",{class:"animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600"},null,-1),e("span",{class:"ml-3 text-gray-600"},"Loading profile...",-1)])])):J("",!0),r.value?J("",!0):(m(),g("div",bte,[e("div",wte,[C[8]||(C[8]=e("h2",{class:"text-xl font-semibold mb-4 border-b pb-2"},"Personal Information",-1)),e("div",kte,[e("div",_te,[C[1]||(C[1]=e("span",{class:"font-medium w-32"},"Name:",-1)),e("span",null,h(a.value.full_name||"Not provided"),1)]),e("div",$te,[C[2]||(C[2]=e("span",{class:"font-medium w-32"},"Email:",-1)),e("span",null,h(d.value||"Not provided"),1)]),e("div",Ste,[C[3]||(C[3]=e("span",{class:"font-medium w-32"},"Role:",-1)),e("span",Dte,h(i.value||"Devotee"),1)]),e("div",Cte,[C[4]||(C[4]=e("span",{class:"font-medium w-32"},"Phone:",-1)),e("span",null,h(a.value.phone||"Not provided"),1)]),e("div",Tte,[C[5]||(C[5]=e("span",{class:"font-medium w-32"},"Gender:",-1)),e("span",null,h(v(a.value.gender)),1)]),e("div",Ete,[C[6]||(C[6]=e("span",{class:"font-medium w-32"},"Date of Birth:",-1)),e("span",null,h(f(a.value.dob)),1)])]),a.value.street_address||a.value.city?(m(),g("div",Ate,[e("div",Ite,[C[7]||(C[7]=e("span",{class:"font-medium w-32"},"Address:",-1)),e("div",null,[a.value.street_address?(m(),g("div",Mte,h(a.value.street_address),1)):J("",!0),e("div",null,h([a.value.city,a.value.state,a.value.pincode].filter(Boolean).join(", ")),1),a.value.country?(m(),g("div",Rte,h(a.value.country),1)):J("",!0)])])])):J("",!0)]),c.value?(m(),g("div",Pte,[C[14]||(C[14]=e("h2",{class:"text-xl font-semibold mb-4 border-b pb-2"},"Spiritual Information",-1)),e("div",Nte,[a.value.gotra?(m(),g("div",jte,[C[9]||(C[9]=e("span",{class:"font-medium w-32"},"Gotra:",-1)),e("span",null,h(a.value.gotra),1)])):J("",!0),a.value.nakshatra?(m(),g("div",Lte,[C[10]||(C[10]=e("span",{class:"font-medium w-32"},"Nakshatra:",-1)),e("span",null,h(a.value.nakshatra),1)])):J("",!0),a.value.rashi?(m(),g("div",Bte,[C[11]||(C[11]=e("span",{class:"font-medium w-32"},"Rashi:",-1)),e("span",null,h(a.value.rashi),1)])):J("",!0),a.value.lagna?(m(),g("div",Ute,[C[12]||(C[12]=e("span",{class:"font-medium w-32"},"Lagna:",-1)),e("span",null,h(a.value.lagna),1)])):J("",!0),a.value.veda_shaka?(m(),g("div",Fte,[C[13]||(C[13]=e("span",{class:"font-medium w-32"},"Veda Shaka:",-1)),e("span",null,h(a.value.veda_shaka),1)])):J("",!0)])])):J("",!0),u.value?(m(),g("div",Vte,[C[19]||(C[19]=e("h2",{class:"text-xl font-semibold mb-4 border-b pb-2"},"Family Information",-1)),e("div",Ote,[a.value.father_name?(m(),g("div",zte,[C[15]||(C[15]=e("span",{class:"font-medium w-32"},"Father:",-1)),e("span",null,h(a.value.father_name),1)])):J("",!0),a.value.mother_name?(m(),g("div",Hte,[C[16]||(C[16]=e("span",{class:"font-medium w-32"},"Mother:",-1)),e("span",null,h(a.value.mother_name),1)])):J("",!0),a.value.spouse_name?(m(),g("div",qte,[C[17]||(C[17]=e("span",{class:"font-medium w-32"},"Spouse:",-1)),e("span",null,h(a.value.spouse_name),1)])):J("",!0),a.value.children&&a.value.children.length>0?(m(),g("div",Gte,[C[18]||(C[18]=e("span",{class:"font-medium w-32"},"Children:",-1)),e("span",null,h(a.value.children.length),1)])):J("",!0)])])):J("",!0),p.value.length>0?(m(),g("div",Jte,[C[20]||(C[20]=e("h2",{class:"text-xl font-semibold mb-4 border-b pb-2"},"Seva Preferences",-1)),e("div",Wte,[(m(!0),g(be,null,$e(p.value,j=>(m(),g("span",{key:j,class:"px-3 py-1 bg-green-100 text-green-800 rounded-full text-sm"},h(N(j)),1))),128))])])):J("",!0),e("div",Yte,[C[25]||(C[25]=e("h2",{class:"text-xl font-semibold mb-4 border-b pb-2"},"Account Information",-1)),e("div",Kte,[e("div",Xte,[C[21]||(C[21]=e("span",{class:"font-medium w-32"},"Member Since:",-1)),e("span",null,h(f(a.value.created_at)),1)]),e("div",Zte,[C[22]||(C[22]=e("span",{class:"font-medium w-32"},"Last Updated:",-1)),e("span",null,h(f(a.value.updated_at)),1)]),e("div",Qte,[C[23]||(C[23]=e("span",{class:"font-medium w-32"},"Profile ID:",-1)),e("span",eoe,h(a.value.id||"N/A"),1)]),C[24]||(C[24]=e("div",{class:"flex items-center"},[e("span",{class:"font-medium w-32"},"Status:"),e("span",{class:"px-2 py-1 bg-green-100 text-green-800 rounded-full text-sm"}," Active ")],-1))])]),w.value?(m(),g("div",toe,[C[26]||(C[26]=Ce('<div class="text-yellow-600 mb-4"><svg class="h-12 w-12 mx-auto" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path></svg></div><h3 class="text-lg font-medium text-yellow-800 mb-2">Complete Your Profile</h3><p class="text-yellow-700 mb-4"> Your profile is mostly empty. Complete it to get the most out of your temple experience. </p>',3)),e("button",{onClick:F,class:"px-4 py-2 bg-yellow-600 text-white rounded-lg hover:bg-yellow-700 transition-colors"}," Complete Profile ")])):J("",!0)]))]))}},soe={class:"settings-container"},noe={class:"p-4"},roe={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},aoe={class:"mt-4"},loe={class:"p-4"},ioe={class:"grid grid-cols-1 gap-4"},doe={class:"mt-4"},uoe={class:"p-4"},coe={class:"space-y-4"},poe={class:"flex items-center justify-between"},moe={class:"relative inline-flex items-center cursor-pointer"},goe={class:"flex items-center justify-between"},foe={class:"relative inline-flex items-center cursor-pointer"},voe={class:"flex items-center justify-between"},hoe={class:"relative inline-flex items-center cursor-pointer"},yoe={class:"mt-4"},xoe={__name:"SettingsView",setup(t){const{showToast:o}=Ue(),s=B({fullName:"",email:"",phone:"",language:"en"}),n=B({currentPassword:"",newPassword:"",confirmPassword:""}),r=B({email:!0,sms:!1,events:!0}),l=[{value:"en",label:"English"},{value:"hi",label:"Hindi"},{value:"ta",label:"Tamil"},{value:"te",label:"Telugu"},{value:"mr",label:"Marathi"}];Me(async()=>{try{s.value={fullName:"Arjun Sharma",email:"arjun.sharma@example.com",phone:"+91 98765 43210",language:"en"}}catch{o("Error loading profile data","error")}});const a=async()=>{try{await new Promise(c=>setTimeout(c,1e3)),o("Profile updated successfully","success")}catch{o("Failed to update profile","error")}},d=async()=>{try{if(n.value.newPassword!==n.value.confirmPassword){o("New passwords do not match","error");return}await new Promise(c=>setTimeout(c,1e3)),n.value={currentPassword:"",newPassword:"",confirmPassword:""},o("Password changed successfully","success")}catch{o("Failed to change password","error")}},i=async()=>{try{await new Promise(c=>setTimeout(c,1e3)),o("Notification settings saved","success")}catch{o("Failed to save notification settings","error")}};return(c,u)=>(m(),g("div",soe,[u[22]||(u[22]=e("h1",{class:"text-2xl font-bold mb-6"},"Account Settings",-1)),le(Rt,{class:"mb-6"},{header:ye(()=>[...u[10]||(u[10]=[e("h2",{class:"text-xl font-semibold"},"Profile Information",-1)])]),default:ye(()=>[e("div",noe,[e("form",{onSubmit:qe(a,["prevent"])},[e("div",roe,[le(at,{modelValue:s.value.fullName,"onUpdate:modelValue":u[0]||(u[0]=p=>s.value.fullName=p),label:"Full Name",placeholder:"Enter your full name",required:""},null,8,["modelValue"]),le(at,{modelValue:s.value.email,"onUpdate:modelValue":u[1]||(u[1]=p=>s.value.email=p),label:"Email Address",type:"email",placeholder:"Enter your email",disabled:""},null,8,["modelValue"]),le(at,{modelValue:s.value.phone,"onUpdate:modelValue":u[2]||(u[2]=p=>s.value.phone=p),label:"Phone Number",placeholder:"Enter your phone number"},null,8,["modelValue"]),le(zn,{modelValue:s.value.language,"onUpdate:modelValue":u[3]||(u[3]=p=>s.value.language=p),label:"Preferred Language",options:l},null,8,["modelValue"])]),e("div",aoe,[le(gt,{type:"submit",variant:"primary"},{default:ye(()=>[...u[11]||(u[11]=[te(" Save Changes ",-1)])]),_:1})])],32)])]),_:1}),le(Rt,{class:"mb-6"},{header:ye(()=>[...u[12]||(u[12]=[e("h2",{class:"text-xl font-semibold"},"Change Password",-1)])]),default:ye(()=>[e("div",loe,[e("form",{onSubmit:qe(d,["prevent"])},[e("div",ioe,[le(at,{modelValue:n.value.currentPassword,"onUpdate:modelValue":u[4]||(u[4]=p=>n.value.currentPassword=p),label:"Current Password",type:"password",placeholder:"Enter your current password",required:""},null,8,["modelValue"]),le(at,{modelValue:n.value.newPassword,"onUpdate:modelValue":u[5]||(u[5]=p=>n.value.newPassword=p),label:"New Password",type:"password",placeholder:"Enter your new password",required:""},null,8,["modelValue"]),le(at,{modelValue:n.value.confirmPassword,"onUpdate:modelValue":u[6]||(u[6]=p=>n.value.confirmPassword=p),label:"Confirm New Password",type:"password",placeholder:"Confirm your new password",required:""},null,8,["modelValue"])]),e("div",doe,[le(gt,{type:"submit",variant:"primary"},{default:ye(()=>[...u[13]||(u[13]=[te(" Update Password ",-1)])]),_:1})])],32)])]),_:1}),le(Rt,null,{header:ye(()=>[...u[14]||(u[14]=[e("h2",{class:"text-xl font-semibold"},"Notification Settings",-1)])]),default:ye(()=>[e("div",uoe,[e("div",coe,[e("div",poe,[u[16]||(u[16]=e("div",null,[e("h3",{class:"font-medium"},"Email Notifications"),e("p",{class:"text-gray-600 text-sm"},"Receive updates and alerts via email")],-1)),e("label",moe,[ce(e("input",{type:"checkbox","onUpdate:modelValue":u[7]||(u[7]=p=>r.value.email=p),class:"sr-only peer"},null,512),[[ct,r.value.email]]),u[15]||(u[15]=e("div",{class:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-indigo-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-indigo-600"},null,-1))])]),e("div",goe,[u[18]||(u[18]=e("div",null,[e("h3",{class:"font-medium"},"SMS Notifications"),e("p",{class:"text-gray-600 text-sm"},"Receive important alerts via SMS")],-1)),e("label",foe,[ce(e("input",{type:"checkbox","onUpdate:modelValue":u[8]||(u[8]=p=>r.value.sms=p),class:"sr-only peer"},null,512),[[ct,r.value.sms]]),u[17]||(u[17]=e("div",{class:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-indigo-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-indigo-600"},null,-1))])]),e("div",voe,[u[20]||(u[20]=e("div",null,[e("h3",{class:"font-medium"},"Event Reminders"),e("p",{class:"text-gray-600 text-sm"},"Receive reminders about upcoming events")],-1)),e("label",hoe,[ce(e("input",{type:"checkbox","onUpdate:modelValue":u[9]||(u[9]=p=>r.value.events=p),class:"sr-only peer"},null,512),[[ct,r.value.events]]),u[19]||(u[19]=e("div",{class:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-indigo-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-indigo-600"},null,-1))])])]),e("div",yoe,[le(gt,{onClick:i,variant:"primary"},{default:ye(()=>[...u[21]||(u[21]=[te(" Save Notification Settings ",-1)])]),_:1})])])]),_:1})]))}},boe=ot(xoe,[["__scopeId","data-v-ebdbc313"]]),woe={name:"SupportView",components:{BaseCard:Rt,BaseButton:gt},setup(){const{showToast:t}=Ue(),o=Je([{question:"How do I reset my password?",answer:'You can reset your password by clicking on the "Forgot Password" link on the login page. You will receive an email with instructions to reset your password.',open:!1},{question:"How can I add a new temple to my account?",answer:'If you are a Temple Administrator, you can add a new temple by navigating to the "Manage Temples" section in your dashboard and clicking on the "Create Temple" button.',open:!1},{question:"How do I book a seva?",answer:'As a devotee, you can book a seva by selecting your temple, navigating to the "Sevas" section, choosing the seva you want to book, and following the booking process.',open:!1},{question:"How do I make a donation?",answer:'You can make a donation by selecting your temple, navigating to the "Donations" section, choosing the donation type, and following the payment process.',open:!1},{question:"How can I volunteer for temple activities?",answer:'You can volunteer by selecting your temple, navigating to the "Volunteer" section, and registering as a volunteer. Temple administrators will review your application.',open:!1}]);return{faqs:o,toggleFaq:n=>{o[n].open=!o[n].open}}}},koe={class:"support-container"},_oe={class:"p-4"},$oe=["onClick"],Soe={key:0,class:"mt-2 text-gray-600 transition-all"};function Doe(t,o,s,n,r,l){const a=Ze("BaseCard");return m(),g("div",koe,[le(a,{class:"mb-8"},{header:ye(()=>[...o[0]||(o[0]=[e("h1",{class:"text-2xl font-bold text-indigo-800"},"Support Center",-1)])]),default:ye(()=>[e("div",_oe,[o[3]||(o[3]=e("p",{class:"mb-4 text-gray-700"},"Welcome to the Temple SaaS Support Center. We're here to help you with any questions or issues you may have.",-1)),o[4]||(o[4]=e("div",{class:"bg-indigo-50 p-4 rounded-lg mb-6"},[e("h2",{class:"text-lg font-semibold text-indigo-700 mb-2"},"Contact Support"),e("p",{class:"mb-4"},"Our support team is available Monday-Friday, 9am-5pm IST"),e("div",{class:"flex items-center mb-2"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-indigo-600 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})]),e("span",null,"support@templesaas.com")]),e("div",{class:"flex items-center"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-indigo-600 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"})]),e("span",null,"+91 8000 123456")])],-1)),e("div",null,[o[2]||(o[2]=e("h2",{class:"text-lg font-semibold text-indigo-700 mb-4"},"Frequently Asked Questions",-1)),(m(!0),g(be,null,$e(n.faqs,(d,i)=>(m(),g("div",{key:i,class:"mb-4 border-b border-gray-200 pb-4"},[e("h3",{onClick:c=>n.toggleFaq(i),class:"flex justify-between items-center text-md font-medium text-gray-800 cursor-pointer hover:text-indigo-600"},[te(h(d.question)+" ",1),(m(),g("svg",{xmlns:"http://www.w3.org/2000/svg",class:se(["h-5 w-5 transform transition-transform",d.open?"rotate-180":""]),fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[...o[1]||(o[1]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"},null,-1)])],2))],8,$oe),d.open?(m(),g("div",Soe,h(d.answer),1)):J("",!0)]))),128))])])]),_:1})])}const Coe=ot(woe,[["render",Doe],["__scopeId","data-v-e7b69a13"]]),Toe={class:"min-h-screen bg-gradient-to-br from-indigo-50 via-white to-indigo-100 flex items-center justify-center px-4 sm:px-6 lg:px-8"},Eoe={__name:"NotFound",setup(t){const o=et(),s=()=>{o.push("/")},n=()=>{window.history.length>1?o.go(-1):o.push("/")};return(r,l)=>(m(),g("div",Toe,[e("div",{class:"max-w-md w-full space-y-8 text-center"},[l[2]||(l[2]=Ce('<div class="relative" data-v-2f879d05><div class="absolute inset-0 bg-indigo-200 rounded-full opacity-20 animate-pulse" data-v-2f879d05></div><div class="relative bg-white rounded-full p-8 shadow-lg border border-indigo-100" data-v-2f879d05><div class="flex items-center justify-center" data-v-2f879d05><svg class="w-24 h-24 text-indigo-600 animate-bounce" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-2f879d05><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4" data-v-2f879d05></path></svg></div></div></div><div class="space-y-2" data-v-2f879d05><h1 class="text-8xl font-black text-indigo-600 tracking-tight" data-v-2f879d05> 404 </h1><div class="h-1 w-32 bg-gradient-to-r from-indigo-500 to-indigo-700 rounded-full mx-auto" data-v-2f879d05></div></div><div class="space-y-4" data-v-2f879d05><h2 class="text-2xl font-bold text-gray-900 sm:text-3xl" data-v-2f879d05> Page Not Found </h2><p class="text-gray-600 text-lg leading-relaxed" data-v-2f879d05> The page you&#39;re looking for doesn&#39;t exist or has been moved. Let&#39;s get you back to your spiritual journey. </p></div>',3)),e("div",{class:"space-y-4 pt-6"},[e("button",{onClick:s,class:"w-full flex items-center justify-center px-8 py-3 border border-transparent text-base font-medium rounded-xl text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 transform transition-all duration-200 hover:scale-105 shadow-lg hover:shadow-xl"},[...l[0]||(l[0]=[e("svg",{class:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})],-1),te(" Go to Home ",-1)])]),e("button",{onClick:n,class:"w-full flex items-center justify-center px-8 py-3 border-2 border-indigo-200 text-base font-medium rounded-xl text-indigo-700 bg-white hover:bg-indigo-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 transform transition-all duration-200 hover:scale-105"},[...l[1]||(l[1]=[e("svg",{class:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 19l-7-7m0 0l7-7m-7 7h18"})],-1),te(" Go Back ",-1)])])]),l[3]||(l[3]=Ce('<div class="pt-8 border-t border-indigo-100" data-v-2f879d05><p class="text-sm text-gray-500" data-v-2f879d05> Still having trouble? <a href="#" class="font-medium text-indigo-600 hover:text-indigo-500 transition-colors duration-200" data-v-2f879d05> Contact support </a></p></div><div class="absolute top-0 left-0 w-full h-full overflow-hidden pointer-events-none" data-v-2f879d05><div class="absolute top-20 left-10 w-4 h-4 bg-indigo-300 rounded-full opacity-20 animate-pulse" data-v-2f879d05></div><div class="absolute top-40 right-16 w-6 h-6 bg-indigo-400 rounded-full opacity-15 animate-pulse" style="animation-delay:1s;" data-v-2f879d05></div><div class="absolute bottom-32 left-20 w-3 h-3 bg-indigo-500 rounded-full opacity-25 animate-pulse" style="animation-delay:2s;" data-v-2f879d05></div><div class="absolute bottom-20 right-8 w-5 h-5 bg-indigo-300 rounded-full opacity-20 animate-pulse" style="animation-delay:0.5s;" data-v-2f879d05></div></div>',2))])]))}},Aoe=ot(Eoe,[["__scopeId","data-v-2f879d05"]]),Ioe={class:"min-h-screen bg-gradient-to-br from-indigo-50 via-white to-indigo-100 flex items-center justify-center px-4 sm:px-6 lg:px-8"},Moe={class:"max-w-md w-full space-y-8 text-center"},Roe={class:"pt-8 border-t border-gray-200"},Poe={class:"bg-indigo-50 rounded-xl p-6 shadow-sm"},Noe={class:"bg-white rounded-lg p-3 text-left"},joe={class:"text-xs text-gray-600 space-y-1 font-mono"},Loe={__name:"Unauthorized",setup(t){const o=et(),s=tt(),n=B(""),r=B("");Me(()=>{n.value=new Date().toLocaleString(),r.value=s.fullPath});const l=()=>{window.history.length>1?o.go(-1):o.push("/")},a=()=>{o.push("/login")},d=()=>{o.push("/")};return(i,c)=>(m(),g("div",Ioe,[e("div",Moe,[c[7]||(c[7]=Ce('<div class="mx-auto flex items-center justify-center h-32 w-32 rounded-full bg-gradient-to-br from-red-100 to-red-200 shadow-lg" data-v-71220cdd><svg class="h-16 w-16 text-red-600" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2" data-v-71220cdd><path stroke-linecap="round" stroke-linejoin="round" d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z" data-v-71220cdd></path></svg></div><div class="space-y-2" data-v-71220cdd><h1 class="text-8xl font-bold text-indigo-600 tracking-tight" data-v-71220cdd> 401 </h1><div class="h-1 w-20 bg-gradient-to-r from-indigo-500 to-indigo-700 mx-auto rounded-full" data-v-71220cdd></div></div><div class="space-y-4" data-v-71220cdd><h2 class="text-3xl font-bold text-gray-900 font-roboto" data-v-71220cdd> Access Denied </h2><p class="text-lg text-gray-600 leading-relaxed font-sans" data-v-71220cdd> Sorry, you don&#39;t have permission to access this page. Please contact your administrator or try logging in with appropriate credentials. </p></div>',3)),e("div",{class:"space-y-4 pt-6"},[e("div",{class:"flex flex-col sm:flex-row gap-4 justify-center"},[e("button",{onClick:l,class:"inline-flex items-center justify-center px-6 py-3 border border-transparent text-base font-medium rounded-xl text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 transition-all duration-200 shadow-md hover:shadow-lg transform hover:-translate-y-0.5"},[...c[0]||(c[0]=[e("svg",{class:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 19l-7-7m0 0l7-7m-7 7h18"})],-1),te(" Go Back ",-1)])]),e("button",{onClick:a,class:"inline-flex items-center justify-center px-6 py-3 border-2 border-indigo-600 text-base font-medium rounded-xl text-indigo-600 bg-white hover:bg-indigo-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 transition-all duration-200 shadow-md hover:shadow-lg transform hover:-translate-y-0.5"},[...c[1]||(c[1]=[e("svg",{class:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 16l-4-4m0 0l4-4m-4 4h14m-5 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h7a3 3 0 013 3v1"})],-1),te(" Login ",-1)])])]),e("div",{class:"pt-4"},[e("button",{onClick:d,class:"text-indigo-600 hover:text-indigo-800 font-medium transition-colors duration-200 underline decoration-2 underline-offset-4 hover:decoration-indigo-800"}," Return to Homepage ")])]),e("div",Roe,[e("div",Poe,[c[5]||(c[5]=e("h3",{class:"text-lg font-semibold text-indigo-900 mb-2 font-roboto"}," Need Help? ",-1)),c[6]||(c[6]=e("p",{class:"text-indigo-700 text-sm mb-4 font-sans"}," If you believe this is an error, please contact support with the following details: ",-1)),e("div",Noe,[e("div",joe,[c[4]||(c[4]=e("div",null,[e("span",{class:"font-semibold"},"Error Code:"),te(" 401")],-1)),e("div",null,[c[2]||(c[2]=e("span",{class:"font-semibold"},"Timestamp:",-1)),te(" "+h(n.value),1)]),e("div",null,[c[3]||(c[3]=e("span",{class:"font-semibold"},"Page:",-1)),te(" "+h(r.value),1)])])])])])])]))}},Boe=ot(Loe,[["__scopeId","data-v-71220cdd"]]),Uoe={class:"min-h-screen bg-gradient-to-br from-indigo-50 via-white to-indigo-100 flex items-center justify-center px-4 sm:px-6 lg:px-8"},Foe={class:"max-w-lg w-full text-center"},Voe={class:"bg-white rounded-2xl shadow-lg p-8 sm:p-10 border border-gray-100"},Ooe={class:"space-y-4 sm:space-y-0 sm:space-x-4 sm:flex sm:justify-center"},zoe=["disabled"],Hoe={key:0,class:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},qoe={key:1,class:"mr-2 h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},Goe={class:"mt-8 text-gray-400 text-sm"},Joe={__name:"ServerError",setup(t){const o=et(),s=B(!1),n=B("");Me(()=>{n.value=Math.random().toString(36).substr(2,9).toUpperCase()});const r=async()=>{s.value=!0;try{await new Promise(a=>setTimeout(a,2e3)),window.location.reload()}catch(a){console.error("Retry failed:",a)}finally{s.value=!1}},l=()=>{o.push("/")};return(a,d)=>(m(),g("div",Uoe,[e("div",Foe,[d[5]||(d[5]=e("div",{class:"mb-8"},[e("div",{class:"mx-auto flex items-center justify-center h-24 w-24 rounded-full bg-red-100 shadow-lg"},[e("svg",{class:"h-12 w-12 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})])])],-1)),e("div",Voe,[d[3]||(d[3]=Ce('<div class="mb-6" data-v-00a572bd><h1 class="text-6xl sm:text-7xl font-bold text-indigo-600 mb-2" data-v-00a572bd> 500 </h1><div class="h-1 w-20 bg-gradient-to-r from-indigo-500 to-indigo-700 mx-auto rounded-full" data-v-00a572bd></div></div><h2 class="text-2xl sm:text-3xl font-bold text-gray-900 mb-4" style="font-family:&#39;Roboto&#39;, sans-serif;" data-v-00a572bd> Server Error </h2><p class="text-gray-600 text-lg mb-6 leading-relaxed" style="font-family:sans-serif;" data-v-00a572bd> Oops! Something went wrong on our end. Our technical team has been notified and is working to resolve this issue. </p><div class="bg-indigo-50 rounded-xl p-4 mb-8 border border-indigo-100" data-v-00a572bd><p class="text-indigo-800 text-sm font-medium mb-2" data-v-00a572bd> What happened? </p><p class="text-indigo-700 text-sm leading-relaxed" data-v-00a572bd> The server encountered an unexpected condition that prevented it from fulfilling your request. This is typically a temporary issue. </p></div>',4)),e("div",Ooe,[e("button",{onClick:r,disabled:s.value,class:"w-full sm:w-auto inline-flex items-center justify-center px-6 py-3 bg-indigo-600 text-white font-semibold rounded-xl shadow-md hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 transform hover:scale-105"},[s.value?(m(),g("svg",Hoe,[...d[0]||(d[0]=[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)])])):(m(),g("svg",qoe,[...d[1]||(d[1]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"},null,-1)])])),te(" "+h(s.value?"Retrying...":"Try Again"),1)],8,zoe),e("button",{onClick:l,class:"w-full sm:w-auto inline-flex items-center justify-center px-6 py-3 bg-white text-indigo-600 font-semibold rounded-xl border-2 border-indigo-600 hover:bg-indigo-50 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 transition-all duration-200 transform hover:scale-105"},[...d[2]||(d[2]=[e("svg",{class:"mr-2 h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})],-1),te(" Go Home ",-1)])])]),d[4]||(d[4]=Ce('<div class="mt-8 pt-6 border-t border-gray-200" data-v-00a572bd><p class="text-gray-500 text-sm mb-3" data-v-00a572bd> Need immediate assistance? </p><div class="flex flex-col sm:flex-row items-center justify-center space-y-2 sm:space-y-0 sm:space-x-6" data-v-00a572bd><a href="mailto:support@templesaas.com" class="inline-flex items-center text-indigo-600 hover:text-indigo-800 text-sm font-medium transition-colors duration-200" data-v-00a572bd><svg class="mr-2 h-4 w-4" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-00a572bd><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z" data-v-00a572bd></path></svg> Email Support </a><a href="tel:+1234567890" class="inline-flex items-center text-indigo-600 hover:text-indigo-800 text-sm font-medium transition-colors duration-200" data-v-00a572bd><svg class="mr-2 h-4 w-4" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-00a572bd><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z" data-v-00a572bd></path></svg> Call Support </a></div></div>',1))]),e("p",Goe," Error ID: "+h(n.value)+"  "+h(new Date().toLocaleString()),1)])]))}},Woe=ot(Joe,[["__scopeId","data-v-00a572bd"]]);function cp(t,o){var n,r,l;const s=(t||"").toLowerCase().trim();if(console.log(" Determining redirect for role:",s),s==="standard_user"||s==="standarduser"||s==="monitoring_user"||s==="monitoringuser"){const a=localStorage.getItem("assigned_tenant_id");return a?(console.log(" Redirecting special user to assigned tenant dashboard:",a),`/tenant/${a}/dashboard`):(console.log(" Redirecting special user to tenant selection"),"/tenant-selection")}if(s==="superadmin"||s==="super_admin")return console.log(" Redirecting superadmin to dashboard"),"/superadmin/dashboard";if(s==="tenant"||s==="templeadmin"){const a=(o==null?void 0:o.id)||localStorage.getItem("current_tenant_id"),d=a?`/tenant/${a}/dashboard`:"/tenant/dashboard";return console.log(" Redirecting tenant to:",d),d}if(s==="devotee"){const a=(o==null?void 0:o.entityId)||((n=o==null?void 0:o.current_entity)==null?void 0:n.id);return a?(console.log(" Redirecting devotee to entity dashboard:",a),`/entity/${a}/devotee/dashboard`):(console.log(" Redirecting devotee to temple selection"),"/devotee/temple-selection")}if(s==="volunteer"){const a=(o==null?void 0:o.entityId)||((r=o==null?void 0:o.current_entity)==null?void 0:r.id);return a?(console.log(" Redirecting volunteer to entity dashboard:",a),`/entity/${a}/volunteer/dashboard`):(console.log(" Redirecting volunteer to temple selection"),"/volunteer/temple-selection")}if(s==="entity_admin"){const a=(o==null?void 0:o.entityId)||((l=o==null?void 0:o.current_entity)==null?void 0:l.id);return a?(console.log(" Redirecting entity admin to entity dashboard:",a),`/entity/${a}/dashboard`):(console.log(" Redirecting entity admin to tenant dashboard"),"/tenant/dashboard")}return console.log(" Unknown role, redirecting to login"),"/login"}const Yoe=[{path:"/",component:ap,children:[{path:"",name:"Landing",component:Y8,meta:{title:"Temple Management SaaS - Manage Your Temple Digitally",description:"Manage your temple, devotees, sevas & donations with ease"}},{path:"/terms",name:"Terms",component:i7,meta:{title:"Terms of Service"}},{path:"/privacy",name:"Privacy",component:C7,meta:{title:"Privacy Policy"}}]},{path:"/login",name:"Login",component:J7,meta:{title:"Login",layout:"AuthLayout"}},{path:"/register",name:"Register",component:ZS,meta:{title:"Register",layout:"AuthLayout"}},{path:"/forgot-password",name:"ForgotPassword",component:l9,meta:{title:"Forgot Password",layout:"AuthLayout"}},{path:"/auth-pages/reset-password",name:"BackendResetPassword",component:Cu,props:t=>({token:t.query.token}),meta:{title:"Reset Password",layout:"AuthLayout",requiresAuth:!1}},{path:"/debug-reset",name:"DebugReset",component:Cu,meta:{title:"Debug Reset Password",layout:"AuthLayout",requiresAuth:!1}},{path:"/notifications",name:"Notifications",component:hte,meta:{requiresAuth:!0,title:"Notifications",breadcrumb:"Notifications",layout:"DashboardLayout"}},{path:"/profile",name:"Profile",component:ooe,meta:{requiresAuth:!0,title:"My Profile",breadcrumb:"My Profile",layout:"DashboardLayout"}},{path:"/settings",name:"Settings",component:boe,meta:{requiresAuth:!0,title:"Account Settings",breadcrumb:"Settings",layout:"DashboardLayout"}},{path:"/support",name:"Support",component:Coe,meta:{requiresAuth:!0,title:"Support Center",breadcrumb:"Support",layout:"DashboardLayout"}},{path:"/tenant-selection",name:"TenantSelection",component:d6,meta:{requiresAuth:!0,allowedRoles:["superadmin","super_admin","standard_user","standarduser","monitoring_user","monitoringuser"],title:"Temple Selection",layout:"DashboardLayout"}},{path:"/tenant",component:Ao,meta:{requiresAuth:!0,allowedRoles:["tenant","templeadmin"]},children:[{path:"dashboard",name:"TenantDashboard",component:Er,meta:{title:"Tenant Dashboard",breadcrumb:"Dashboard"}},{path:"user-management",name:"TenantUserManagement",component:()=>vt(()=>import("./UserManagement-DCUnR_6x.js"),__vite__mapDeps([16,17])),meta:{title:"Tenant User Management",breadcrumb:"User Management",requiresAuth:!0,allowedRoles:["tenant","templeadmin"]}},{path:"entities/create",name:"CreateTemple",component:Xy,meta:{title:"Create Temple",breadcrumb:"Create Temple"}},{path:"entities/:id",name:"TempleDetails",component:lb,props:!0,meta:{title:"Temple Details",breadcrumb:"Temple Details"}},{path:"entities/:id/edit",name:"EditTemple",component:I4,props:!0,meta:{title:"Edit Temple",breadcrumb:"Edit Temple"}},{path:":tenantId/dashboard",name:"TenantSpecificDashboard",component:Er,props:!0,meta:{title:"Tenant Dashboard",breadcrumb:"Dashboard"}},{path:"reports/temple-register",name:"TempleRegisterReport",component:A5,meta:{title:"Temple Register Report",breadcrumb:"Temple Register",requiresAuth:!0,allowedRoles:["tenant","templeadmin"]}},{path:"reports/temple-activities",name:"TempleActivitiesReport",component:G3,meta:{title:"Temple Activities Report",breadcrumb:"Temple Activities",requiresAuth:!0,allowedRoles:["tenant","templeadmin"]}},{path:"reports/birthdays",name:"BirthdaysReport",component:w_,meta:{title:"Birthdays Report",breadcrumb:"Birthdays",requiresAuth:!0,allowedRoles:["tenant","templeadmin"]}},{path:"reports/audit-logs",name:"AuditLogsReport",component:gD,meta:{title:"Audit Logs Report",breadcrumb:"Audit Logs",requiresAuth:!0,allowedRoles:["tenant","templeadmin"]}}]},{path:"/tenant/:tenantId/dashboard",name:"TenantDirectDashboard",component:Er,props:!0,meta:{requiresAuth:!0,allowedRoles:["tenant","templeadmin"],title:"Tenant Dashboard",breadcrumb:"Dashboard",layout:"DashboardLayout"}},{path:"/entity/:id",component:Ao,props:!0,meta:{requiresAuth:!0,allowedRoles:["tenant","entity_admin","templeadmin","standard_user","standarduser","monitoring_user","monitoringuser"]},children:[{path:"/entity/:id/dashboard",name:"EntityDirectDashboard",component:()=>vt(()=>Promise.resolve().then(()=>EC),void 0),meta:{title:"Entity Dashboard",requiresAuth:!0,allowedRoles:["tenant","entity_admin","templeadmin","standard_user","standarduser","monitoring_user","monitoringuser"]}},{path:"dashboard",name:"EntityDashboard",component:ip,props:!0,meta:{title:"Temple Dashboard",breadcrumb:"Dashboard",allowedRoles:["tenant","entity_admin","templeadmin","standard_user","standarduser","monitoring_user","monitoringuser"]}},{path:"devotees",name:"DevoteeManagement",component:sE,props:!0,meta:{title:"Devotee Management",breadcrumb:"Devotees",allowedRoles:["tenant","entity_admin","templeadmin","standard_user","standarduser","monitoring_user","monitoringuser"]}},{path:"devotees/:devoteeId/profile",name:"devotee-profile",component:()=>vt(()=>import("./DevoteeProfileView-CbrgSfx9.js"),[]),props:!0,meta:{title:"Devotee Profile",breadcrumb:"Profile",allowedRoles:["tenant","entity_admin","templeadmin","standard_user","standarduser","monitoring_user","monitoringuser"]}},{path:"sevas",name:"SevaManagement",component:QI,props:!0,meta:{title:"Seva Management",breadcrumb:"Sevas",allowedRoles:["tenant","entity_admin","templeadmin","standard_user","standarduser"]}},{path:"donations",name:"DonationManagement",component:hN,props:!0,meta:{title:"Donation Management",breadcrumb:"Donations",allowedRoles:["tenant","entity_admin","templeadmin","standard_user","standarduser"]}},{path:"events",name:"EventManagement",component:Wj,props:!0,meta:{title:"Event Management",breadcrumb:"Events",allowedRoles:["tenant","entity_admin","templeadmin","standard_user","standarduser"]}},{path:"communication",name:"CommunicationCenter",component:DF,props:!0,meta:{title:"Communication Center",breadcrumb:"Communication",allowedRoles:["tenant","entity_admin","templeadmin","standard_user","standarduser"]}},{path:"message",name:"MessageComposer",component:Q0,props:!0,meta:{title:"Compose Message",breadcrumb:"Message Composer",allowedRoles:["tenant","entity_admin","templeadmin","standard_user","standarduser"]}},{path:"volunteers",name:"VolunteerManagement",component:sO,props:!0,meta:{title:"Volunteer Management",breadcrumb:"Volunteers",allowedRoles:["tenant","entity_admin","templeadmin","standard_user","standarduser"]}}]},{path:"/devotee",component:Ao,meta:{requiresAuth:!0,allowedRoles:["devotee"]},children:[{path:"temple-selection",name:"DevoteeTempleSelection",component:NO,meta:{title:"Select Temple",breadcrumb:"Temple Selection"}},{path:"profile/create",name:"DevoteeProfileCreation",component:Mu,meta:{title:"Complete Profile",breadcrumb:"Profile Creation"}},{path:"profile/edit",name:"DevoteeProfileEdit",component:Ru,meta:{title:"Edit Profile",breadcrumb:"Edit Profile",role:"devotee"}}]},{path:"/entity/:id/devotee",component:Ao,props:!0,meta:{requiresAuth:!0,allowedRoles:["devotee"]},children:[{path:"profile/create",name:"DevoteeEntityProfileCreation",component:Mu,props:!0,meta:{title:"Complete Profile",breadcrumb:"Profile Creation"}},{path:"dashboard",name:"DevoteeDashboard",component:xJ,props:!0,meta:{title:"My Dashboard",breadcrumb:"Dashboard"}},{path:"profile/edit",name:"DevoteeProfileEdit",component:Ru,props:!0,meta:{title:"Edit Profile",breadcrumb:"Edit Profile"}},{path:"seva-booking",name:"SevaBooking",component:lW,props:!0,meta:{title:"Book Seva",breadcrumb:"Seva Booking"}},{path:"donations",name:"DevoteeDonationHistory",component:QW,props:!0,meta:{title:"My Donations",breadcrumb:"Donation History"}},{path:"events",name:"DevoteeMyEvents",component:JY,props:!0,meta:{title:"Temple Events",breadcrumb:"My Events"}},{path:"my-seva-bookings",name:"DevoteeMySevaBookings",component:()=>vt(()=>import("./MySevaBookings-DSm7i7sC.js"),[]),props:!0,meta:{title:"My Seva Bookings",breadcrumb:"My Seva Bookings"}}]},{path:"/volunteer",component:Ao,meta:{requiresAuth:!0,allowedRoles:["volunteer"]},children:[{path:"temple-selection",name:"VolunteerTempleSelection",component:vX,meta:{title:"Select Temple",breadcrumb:"Temple Selection"}}]},{path:"/entity/:id/volunteer",component:Ao,props:!0,meta:{requiresAuth:!0,allowedRoles:["volunteer"]},children:[{path:"dashboard",name:"VolunteerDashboard",component:kZ,props:!0,meta:{title:"Volunteer Dashboard",breadcrumb:"Dashboard"}},{path:"assignments",name:"MyAssignments",component:FQ,props:!0,meta:{title:"My Assignments",breadcrumb:"Assignments"}},{path:"schedule",name:"MySchedule",component:Uee,props:!0,meta:{title:"My Schedule",breadcrumb:"Schedule"}}]},{path:"/superadmin",component:Ao,meta:{requiresAuth:!0,allowedRoles:["superadmin","super_admin"]},children:H1},{path:"/temple-selection",redirect:t=>"/devotee/temple-selection"},{path:"/unauthorized",name:"Unauthorized",component:Boe,meta:{title:"Access Denied"}},{path:"/server-error",name:"ServerError",component:Woe,meta:{title:"Server Error"}},{path:"/:pathMatch(.*)*",name:"NotFound",component:Aoe,meta:{title:"Page Not Found"}}],hs=Zf({history:Cf(),routes:Yoe,scrollBehavior(t,o,s){return s||{top:0}}});hs.beforeEach((t,o,s)=>{if(t.meta.title&&(document.title=t.meta.title),console.log(" Route navigation:",{to:t.path,name:t.name,requiresAuth:t.meta.requiresAuth,allowedRoles:t.meta.allowedRoles}),t.meta.requiresAuth)return z1(t,o,s);s()});hs.beforeEach((t,o,s)=>{const n=We();if(!n.isAuthenticated||!n.user){s();return}const r=(n.user.role||"").toLowerCase().trim();if(console.log(" SPECIAL ROLE CHECK:",{userRole:r,currentPath:t.path,needsTenantSelection:n.needsTenantSelection}),n.needsTenantSelection&&t.path!=="/tenant-selection"){console.log(" REDIRECTING special user to tenant selection"),s("/tenant-selection");return}s()});hs.beforeEach((t,o,s)=>{const n=We();if(n.isAuthenticated&&t.path==="/"){console.log(" Authenticated user visiting root path, determining redirect...");const r=n.userRole,l=n.user;console.log(" User role:",r),console.log(" User data:",l);const a=cp(r,l);return console.log(" Redirecting to:",a),s(a)}s()});const We=Uo("auth",()=>{const t=localStorage.getItem("user_data"),o=B(t&&t!=="undefined"?JSON.parse(t):null),s=B(localStorage.getItem("auth_token")||null),n=B(!1),r=B(null),l=B(localStorage.getItem("current_tenant_id")||null),a=B(localStorage.getItem("assigned_tenant_id")||null),d=oe(()=>!!s.value&&!!o.value),i=oe(()=>{if(!o.value)return null;if(typeof o.value.role=="string"){const ge=o.value.role.toLowerCase().trim();return ge==="monitoringuser"||ge==="monitoring_user"?"monitoring_user":ge==="standarduser"||ge==="standard_user"?"standard_user":ge==="superadmin"||ge==="super_admin"?"superadmin":ge==="templeadmin"||ge==="tenant"?"templeadmin":ge}const O={1:"superadmin",2:"templeadmin",3:"devotee",4:"volunteer",5:"standard_user",6:"monitoring_user"},ee=o.value.roleId?O[o.value.roleId]:null;return console.log(" Role mapping:",{roleId:o.value.roleId,mappedRole:ee,userObject:o.value}),ee}),c=O=>{try{const ge=O.split(".")[1].replace(/-/g,"+").replace(/_/g,"/"),de=decodeURIComponent(atob(ge).split("").map(function(ie){return"%"+("00"+ie.charCodeAt(0).toString(16)).slice(-2)}).join(""));return JSON.parse(de)}catch(ee){return console.error("Error parsing JWT token:",ee),{}}},u=O=>{var de,ie,me,ke;const ee=(O||"").toLowerCase().trim();if(console.log(" Getting dashboard path for role:",ee),ee==="standard_user"||ee==="standarduser"||ee==="monitoring_user"||ee==="monitoringuser")return a.value?(console.log(` ${ee} redirecting to assigned tenant: ${a.value}`),`/tenant/${a.value}/dashboard`):(console.log(` ${ee} with no assigned tenant -> tenant selection`),"/tenant-selection");if(ee==="superadmin"||ee==="super_admin")return console.log(" Super admin -> /superadmin/dashboard"),"/superadmin/dashboard";const ge=((de=o.value)==null?void 0:de.entityId)||((me=(ie=o.value)==null?void 0:ie.current_entity)==null?void 0:me.id);if(ee==="templeadmin"||ee==="tenant"){const Q=((ke=o.value)==null?void 0:ke.id)||l.value;return Q?`/tenant/${Q}/dashboard`:"/tenant/dashboard"}else{if(ee==="devotee")return"/devotee/temple-selection";if(ee==="volunteer")return ge?`/entity/${ge}/volunteer/dashboard`:"/volunteer/temple-selection"}return console.log(" Unknown role, defaulting to home"),"/"},p=oe(()=>o.value?u(i.value):"/login"),w=oe(()=>{var ee;const O=((ee=i.value)==null?void 0:ee.toLowerCase())||"";return O==="tenant"||O==="templeadmin"}),f=oe(()=>{var ee;return(((ee=i.value)==null?void 0:ee.toLowerCase())||"")==="devotee"}),v=oe(()=>{var ee;return(((ee=i.value)==null?void 0:ee.toLowerCase())||"")==="volunteer"}),N=oe(()=>{var ee;const O=((ee=i.value)==null?void 0:ee.toLowerCase())||"";return O==="superadmin"||O==="super_admin"}),A=oe(()=>{var ee;const O=((ee=i.value)==null?void 0:ee.toLowerCase())||"";return O==="standard_user"||O==="standarduser"}),F=oe(()=>{var ee;const O=((ee=i.value)==null?void 0:ee.toLowerCase())||"";return O==="monitoring_user"||O==="monitoringuser"}),I=oe(()=>f.value||v.value),C=oe(()=>{var ee;const O=((ee=i.value)==null?void 0:ee.toLowerCase())||"";return(O==="standard_user"||O==="standarduser"||O==="monitoring_user"||O==="monitoringuser")&&!a.value}),j=async()=>{if(!s.value)return!1;try{return console.log("Refreshing auth token..."),pe.defaults.headers.common.Authorization=`Bearer ${s.value}`,localStorage.setItem("token_last_refreshed",new Date().getTime()),localStorage.setItem("auth_token",s.value),!0}catch(O){return console.error("Token refresh failed:",O),!1}},$=()=>{const O=localStorage.getItem("auth_token");if(O){d.value=!0;const ee=localStorage.getItem("user_id"),ge=localStorage.getItem("user_role");return!o.value&&ee&&(o.value={id:ee,role:ge||"unknown"}),pe.defaults.headers.common.Authorization=`Bearer ${O}`,console.log("Auth check: Authenticated with token"),!0}else return d.value=!1,o.value=null,console.log("Auth check: Not authenticated (no token)"),!1},y=oe(()=>{var O,ee,ge;return(ee=(O=o.value)==null?void 0:O.role)!=null&&ee.roleName?o.value.role.roleName.toLowerCase():(ge=o.value)!=null&&ge.role?o.value.role.toLowerCase():i.value?i.value.toLowerCase():""}),b=O=>{if(!d.value)return!1;const ee=y.value;return ee?ee===O.toLowerCase()||ee===O.toLowerCase().replace("_",""):!1},E=()=>{console.log("Clearing all browser storage"),localStorage.clear(),sessionStorage.clear(),document.cookie.split(";").forEach(function(O){document.cookie=O.replace(/^ +/,"").replace(/=.*/,"=;expires="+new Date().toUTCString()+";path=/")}),console.log("All storage cleared")},R=()=>{console.log("Resetting all application state"),E(),delete pe.defaults.headers.common.Authorization,delete pe.defaults.headers.common["X-Tenant-ID"],console.log("Application state reset complete")},M=async()=>{try{if(s.value)try{await pe.post("/auth/logout")}catch(O){console.warn("Logout endpoint error:",O)}}catch(O){console.error("Logout error:",O)}finally{R(),o.value=null,s.value=null,l.value=null,a.value=null,window.location.href=window.location.origin+"/login"}},G=async()=>{console.log("Initializing auth store...");const O=localStorage.getItem("auth_token");if(O){s.value=O;try{const ge=c(O);ge.assigned_tenant_id&&(a.value=ge.assigned_tenant_id,localStorage.setItem("assigned_tenant_id",ge.assigned_tenant_id),console.log(" Found assigned tenant ID in token:",ge.assigned_tenant_id),pe.defaults.headers.common["X-Tenant-ID"]=ge.assigned_tenant_id,console.log(" Set X-Tenant-ID header from token:",ge.assigned_tenant_id))}catch(ge){console.error("Failed to parse token for assigned tenant ID:",ge)}const ee=localStorage.getItem("user_data");if(ee&&ee!=="undefined")try{if(o.value=JSON.parse(ee),pe.defaults.headers.common.Authorization=`Bearer ${s.value}`,console.log("Auth initialized with stored user:",o.value),console.log("User role computed as:",i.value),console.log("Set Authorization header with token"),localStorage.setItem("token_last_refreshed",new Date().getTime()),!a.value){const ge=localStorage.getItem("current_tenant_id");ge&&(pe.defaults.headers.common["X-Tenant-ID"]=ge,l.value=ge,console.log("Set X-Tenant-ID header from localStorage:",ge))}return!0}catch(ge){return console.error("Failed to parse stored user_data:",ge),!1}else return console.warn("Token exists but no valid user data found"),!1}return!1};return{user:o,token:s,loading:n,error:r,currentTenantId:l,assignedTenantId:a,normalizedRole:y,hasRole:b,checkAuth:$,isAuthenticated:d,userRole:i,isTenant:w,isDevotee:f,isVolunteer:v,isSuperAdmin:N,isStandardUser:A,isMonitoringUser:F,isEndUser:I,dashboardRoute:p,needsTenantSelection:C,initialize:G,login:async O=>{var ee,ge,de,ie;n.value=!0,r.value=null;try{console.log(" Starting login request"),R(),console.log(" Performing backend login");const me=await pe.post("/auth/login",O);console.log(" Login response received:",me.data);const ke=me.data,Q=ke.accessToken,D=ke.user;if(!Q)throw new Error("No authentication token received from server");console.log(" Raw user data from backend:",D),s.value=Q,o.value=D,localStorage.setItem("auth_token",Q),localStorage.setItem("user_data",JSON.stringify(D));try{const S=c(Q);console.log(" Token payload:",S),S.assigned_tenant_id&&(a.value=S.assigned_tenant_id,localStorage.setItem("assigned_tenant_id",S.assigned_tenant_id),console.log(" Found assigned tenant ID in token:",S.assigned_tenant_id),pe.defaults.headers.common["X-Tenant-ID"]=S.assigned_tenant_id,console.log(" Set X-Tenant-ID header from token:",S.assigned_tenant_id))}catch(S){console.error("Failed to parse token for assigned tenant ID:",S)}if(console.log(" Computed user role after login:",i.value),console.log(" Role computed from roleId:",D.roleId),localStorage.setItem("token_last_refreshed",new Date().getTime()),pe.defaults.headers.common.Authorization=`Bearer ${Q}`,console.log(" Set Authorization header with token"),!a.value&&D.roleId===2){const S=D.id;l.value=S,localStorage.setItem("current_tenant_id",S),pe.defaults.headers.common["X-Tenant-ID"]=S,console.log(" Set X-Tenant-ID header from user data:",S)}const x=u(i.value);return console.log(" Login successful, redirecting to:",x),console.log(" User role:",i.value),console.log(" Full user object:",D),{success:!0,user:D,redirectPath:x}}catch(me){return console.error(" Login error:",me),r.value=((ge=(ee=me.response)==null?void 0:ee.data)==null?void 0:ge.message)||((ie=(de=me.response)==null?void 0:de.data)==null?void 0:ie.error)||me.message||"Login failed",{success:!1,error:r.value}}finally{n.value=!1,console.log(" Login process completed, loading set to false")}},logout:M,register:async O=>{var ee,ge;n.value=!0,r.value=null;try{const ie=(await pe.post("/v1/auth/register",O)).data,me=O.role==="templeadmin"?"/auth/pending-approval":O.role==="devotee"?"/devotee/temple-selection":"/volunteer/temple-selection";return{success:!0,message:ie.message||"Registration successful!",redirectPath:me}}catch(de){return console.error("Registration failed:",de),r.value=((ge=(ee=de.response)==null?void 0:ee.data)==null?void 0:ge.message)||de.message||"Registration failed",{success:!1,error:r.value}}finally{n.value=!1}},joinTemple:async O=>{var ee,ge;n.value=!0,r.value=null;try{const de=f.value?"/v1/devotee/join-temple":"/v1/volunteer/join-temple",me=(await pe.post(de,{templeId:O})).data,ke=me.temple||me.entity||me,Q={...o.value,entityId:O,current_entity:ke};return o.value=Q,localStorage.setItem("user_data",JSON.stringify(Q)),localStorage.setItem("current_entity_id",O),{success:!0,message:"Successfully joined temple!",redirectPath:u(i.value)}}catch(de){return console.error("Failed to join temple:",de),r.value=((ge=(ee=de.response)==null?void 0:ee.data)==null?void 0:ge.message)||de.message||"Failed to join temple",{success:!1,error:r.value}}finally{n.value=!1}},selectTenant:async O=>{if(!O)return console.error("No tenant ID provided"),{success:!1,error:"No tenant ID provided"};try{console.log(" Selecting tenant ID:",O),localStorage.setItem("selected_tenant_id",O),localStorage.setItem("current_tenant_id",O),localStorage.setItem("current_entity_id",O),l.value=O,pe.defaults.headers.common["X-Tenant-ID"]=O;const ee=(i.value||"").toLowerCase();let ge;return ee==="superadmin"||ee==="super_admin"||ee==="standard_user"||ee==="standarduser"||ee==="monitoring_user"||ee==="monitoringuser"?ge=`/entity/${O}/dashboard`:ge=`/tenant/${O}/dashboard`,{success:!0,redirectPath:ge}}catch(ee){return console.error("Error selecting tenant:",ee),{success:!1,error:"Failed to select tenant"}}},getDashboardPath:u,resetAppState:R,clearAllStorage:E,debugTenantData:()=>{console.log("------- DEBUG TENANT DATA -------"),console.log("Current user:",o.value),console.log("Current tenant ID:",l.value),console.log("Assigned tenant ID:",a.value),console.log("Is tenant?",w.value),console.log("Dashboard route:",p.value),console.log("Auth headers:",pe.defaults.headers.common),console.log("Local storage:",{auth_token:localStorage.getItem("auth_token"),user_data:localStorage.getItem("user_data"),current_tenant_id:localStorage.getItem("current_tenant_id"),selected_tenant_id:localStorage.getItem("selected_tenant_id"),current_entity_id:localStorage.getItem("current_entity_id"),assigned_tenant_id:localStorage.getItem("assigned_tenant_id")}),console.log("Token payload:",c(localStorage.getItem("auth_token"))),console.log("--------------------------------")},forgotPassword:async O=>{var ee,ge;n.value=!0,r.value=null;try{const de=await pe.post("/auth/forgot-password",{email:O});return{success:!0,message:"Password reset instructions sent to your email"}}catch(de){return console.error("Forgot password error:",de),r.value=((ge=(ee=de.response)==null?void 0:ee.data)==null?void 0:ge.message)||de.message||"Failed to send reset instructions",{success:!1,error:r.value}}finally{n.value=!1}},resetPassword:async(O,ee)=>{var ge,de;n.value=!0,r.value=null;try{const ie=await pe.post("/v1/auth/reset-password",{token:O,newPassword:ee});return{success:!0,message:"Password has been reset successfully"}}catch(ie){return console.error("Reset password error:",ie),r.value=((de=(ge=ie.response)==null?void 0:ge.data)==null?void 0:de.message)||ie.message||"Failed to reset password",{success:!1,error:r.value}}finally{n.value=!1}},refreshToken:j,verifyToken:async()=>{if(!s.value)return!1;try{pe.defaults.headers.common.Authorization=`Bearer ${s.value}`;const O=new Date().getTime(),ee=parseInt(localStorage.getItem("token_last_refreshed")||"0");return O-ee>1e4&&localStorage.setItem("token_last_refreshed",O.toString()),!0}catch(O){return console.error("Token verification failed:",O),!1}},parseJwt:c,initializeAuth:G,clearError:()=>{r.value=null}}}),Koe={class:"min-h-screen bg-gradient-to-br from-indigo-50 via-white to-indigo-50"},Xoe={class:"bg-white shadow-lg border-b border-indigo-100 sticky top-0 z-40"},Zoe={class:"px-6 py-4"},Qoe={class:"flex items-center justify-between"},ese={class:"flex items-center space-x-4"},tse={key:0,class:"absolute right-0 mt-2 w-48 bg-white rounded-xl shadow-lg border border-gray-100 py-2 z-50"},ose={class:"flex flex-col lg:flex-row"},sse={class:"w-full lg:w-64 bg-white shadow-lg min-h-screen border-r border-indigo-100 hidden lg:block"},nse={class:"p-6"},rse={class:"space-y-2"},ase={class:"flex-1 p-4 sm:p-6 lg:p-8 overflow-x-auto"},lse={key:0},ise={class:"grid grid-cols-1 xl:grid-cols-2 gap-4 sm:gap-6"},dse={class:"bg-white rounded-xl shadow-sm border border-gray-200"},use={class:"p-6"},cse={class:"space-y-4"},pse={class:"font-medium text-gray-900 font-sans"},mse={class:"text-sm text-gray-600 font-sans"},gse={class:"flex space-x-2"},fse=["onClick"],vse=["onClick"],hse={class:"bg-white rounded-xl shadow-sm border border-gray-200"},yse={class:"p-6"},xse={class:"space-y-4"},bse={class:"flex items-center justify-between mb-2"},wse={class:"font-medium text-gray-900 font-sans"},kse={class:"flex space-x-2"},_se=["onClick"],$se=["onClick"],Sse={__name:"SuperAdminLayout",setup(t){const o=et(),s=B(!1),n=B(null),r=()=>{o.push("/login")},l=()=>{s.value=!s.value},a=d=>{n.value&&!n.value.contains(d.target)&&(s.value=!1)};return Me(()=>{document.addEventListener("click",a)}),Pt(()=>{document.removeEventListener("click",a)}),(d,i)=>{const c=Ze("router-link"),u=Ze("router-view");return m(),g("div",Koe,[e("header",Xoe,[e("div",Zoe,[e("div",Qoe,[i[5]||(i[5]=Ce('<div class="flex items-center space-x-4"><div class="w-10 h-10 bg-gradient-to-br from-indigo-600 to-indigo-800 rounded-xl flex items-center justify-center"><svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"></path></svg></div><div><h1 class="text-xl font-bold text-gray-900 font-roboto">Temple SaaS</h1><p class="text-sm text-indigo-600 font-medium font-sans">Super Admin Portal</p></div></div>',1)),e("div",ese,[i[4]||(i[4]=Ce('<button class="p-2 text-gray-600 hover:text-gray-900 hover:bg-indigo-50 rounded-lg transition-colors"><svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 17h5l-5 5-5-5h5v-5a7.07 7.07 0 017-7 7.07 7.07 0 017 7v5z"></path></svg></button><button class="p-2 text-gray-600 hover:text-gray-900 hover:bg-indigo-50 rounded-lg transition-colors"><svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path></svg></button>',2)),e("div",{class:"relative",ref_key:"profileDropdownRef",ref:n},[e("button",{onClick:l,class:"flex items-center space-x-3 p-2 rounded-xl hover:bg-indigo-50 transition-all duration-200"},[...i[0]||(i[0]=[Ce('<div class="w-8 h-8 bg-gradient-to-br from-indigo-600 to-indigo-800 rounded-lg flex items-center justify-center"><span class="text-white font-semibold text-sm">SA</span></div><div class="text-left"><p class="text-sm font-semibold text-gray-900 font-sans">Super Admin</p><p class="text-xs text-gray-500 font-sans">admin@templesaas.com</p></div><svg class="w-4 h-4 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg>',3)])]),s.value?(m(),g("div",tse,[i[1]||(i[1]=e("a",{href:"#",class:"block px-4 py-2 text-sm text-gray-700 hover:bg-indigo-50 hover:text-indigo-600 transition-colors font-sans"}," Profile Settings ",-1)),i[2]||(i[2]=e("a",{href:"#",class:"block px-4 py-2 text-sm text-gray-700 hover:bg-indigo-50 hover:text-indigo-600 transition-colors font-sans"}," System Logs ",-1)),i[3]||(i[3]=e("hr",{class:"my-2 border-gray-100"},null,-1)),e("button",{onClick:r,class:"block w-full text-left px-4 py-2 text-sm text-red-600 hover:bg-red-50 transition-colors font-sans"}," Logout ")])):J("",!0)],512)])])])]),e("div",ose,[e("aside",sse,[e("nav",nse,[e("div",rse,[le(c,{to:"/superadmin/dashboard",class:se(["flex items-center space-x-3 p-3 rounded-xl text-gray-700 hover:bg-indigo-50 hover:text-indigo-600 transition-all duration-200 group",{"bg-indigo-50 text-indigo-600 border border-indigo-200":d.$route.path==="/superadmin/dashboard"}])},{default:ye(()=>[...i[6]||(i[6]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2V6zM14 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V6zM4 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2v-2zM14 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z"})],-1),e("span",{class:"font-medium font-sans"},"Dashboard",-1)])]),_:1},8,["class"])]),i[7]||(i[7]=Ce('<hr class="my-6 border-gray-200"><div class="space-y-4"><h3 class="text-xs font-semibold text-gray-500 uppercase tracking-wider font-sans">Quick Overview</h3><div class="bg-gradient-to-br from-indigo-50 to-indigo-100 p-4 rounded-xl"><div class="flex items-center justify-between"><div><p class="text-2xl font-bold text-indigo-600 font-sans">24</p><p class="text-sm text-indigo-600 font-sans">Active Temples</p></div><div class="w-10 h-10 bg-indigo-600 rounded-lg flex items-center justify-center"><svg class="w-5 h-5 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"></path></svg></div></div></div><div class="bg-gradient-to-br from-green-50 to-green-100 p-4 rounded-xl"><div class="flex items-center justify-between"><div><p class="text-2xl font-bold text-green-600 font-sans">1,247</p><p class="text-sm text-green-600 font-sans">Total Users</p></div><div class="w-10 h-10 bg-green-600 rounded-lg flex items-center justify-center"><svg class="w-5 h-5 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197m13.5-9a2.5 2.5 0 11-5 0 2.5 2.5 0 015 0z"></path></svg></div></div></div></div>',2))])]),e("main",ase,[d.$route.path==="/superadmin/dashboard"||!d.$route.path.includes("/superadmin/")?(m(),g("div",lse,[i[13]||(i[13]=Ce('<div class="mb-6"><h2 class="text-2xl font-bold text-gray-900 font-roboto">Super Admin Dashboard</h2><p class="text-gray-600 mt-1 font-sans">Manage tenant and temple approvals</p></div><div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 sm:gap-6 mb-6 sm:mb-8"><div class="bg-white p-6 rounded-xl shadow-sm border border-gray-200"><div class="flex items-center justify-between"><div><p class="text-sm font-medium text-gray-600 font-sans">Pending Tenants</p><p class="text-2xl font-bold text-gray-900 font-sans">12</p></div><div class="p-3 bg-yellow-100 rounded-full"><svg class="w-6 h-6 text-yellow-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path></svg></div></div></div><div class="bg-white p-6 rounded-xl shadow-sm border border-gray-200"><div class="flex items-center justify-between"><div><p class="text-sm font-medium text-gray-600 font-sans">Pending Temples</p><p class="text-2xl font-bold text-gray-900 font-sans">8</p></div><div class="p-3 bg-blue-100 rounded-full"><svg class="w-6 h-6 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"></path></svg></div></div></div><div class="bg-white p-6 rounded-xl shadow-sm border border-gray-200"><div class="flex items-center justify-between"><div><p class="text-sm font-medium text-gray-600 font-sans">Total Active</p><p class="text-2xl font-bold text-gray-900 font-sans">156</p></div><div class="p-3 bg-green-100 rounded-full"><svg class="w-6 h-6 text-green-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2V6zM14 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V6zM4 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2v-2zM14 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z"></path></svg></div></div></div></div>',2)),e("div",ise,[e("div",dse,[i[9]||(i[9]=e("div",{class:"p-6 border-b border-gray-200"},[e("h3",{class:"text-lg font-semibold text-gray-900 font-roboto"},"Pending Tenant Approvals")],-1)),e("div",use,[e("div",cse,[(m(),g(be,null,$e([1,2,3],p=>e("div",{key:p,class:"flex items-center justify-between p-4 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors"},[e("div",null,[e("h4",pse,"Temple Admin "+h(p),1),e("p",mse,"admin"+h(p)+"@temple.com",1),i[8]||(i[8]=e("p",{class:"text-xs text-gray-500 font-sans"},"Applied 2 days ago",-1))]),e("div",gse,[e("button",{onClick:w=>d.approveTenant(p),class:"px-3 py-1 bg-green-600 text-white text-sm rounded-lg hover:bg-green-700 transition-colors font-sans"}," Approve ",8,fse),e("button",{onClick:w=>d.rejectTenant(p),class:"px-3 py-1 bg-red-600 text-white text-sm rounded-lg hover:bg-red-700 transition-colors font-sans"}," Reject ",8,vse)])])),64))])])]),e("div",hse,[i[12]||(i[12]=e("div",{class:"p-6 border-b border-gray-200"},[e("h3",{class:"text-lg font-semibold text-gray-900 font-roboto"},"Pending Temple Approvals")],-1)),e("div",yse,[e("div",xse,[(m(),g(be,null,$e([1,2],p=>e("div",{key:p,class:"flex flex-col p-4 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors"},[e("div",bse,[e("h4",wse,"Sri Venkateswara Temple "+h(p),1),e("div",kse,[e("button",{onClick:w=>d.approveTemple(p),class:"px-3 py-1 bg-green-600 text-white text-sm rounded-lg hover:bg-green-700 transition-colors font-sans"}," Approve ",8,_se),e("button",{onClick:w=>d.rejectTemple(p),class:"px-3 py-1 bg-red-600 text-white text-sm rounded-lg hover:bg-red-700 transition-colors font-sans"}," Reject ",8,$se)])]),i[10]||(i[10]=e("p",{class:"text-sm text-gray-600 font-sans"},"Bangalore, Karnataka",-1)),i[11]||(i[11]=e("p",{class:"text-xs text-gray-500 font-sans"},"Submitted 1 day ago",-1))])),64))])])])])])):(m(),Ne(u,{key:1}))])])])}}},Dse={id:"app",class:"min-h-screen bg-gray-50"},Cse={key:0,class:"fixed inset-0 z-50 flex items-center justify-center bg-white bg-opacity-90 backdrop-blur-sm"},Tse={class:"flex flex-col items-center space-y-4"},Ese={class:"text-indigo-600 font-medium"},Ase={class:"fixed top-4 right-4 md:right-8 lg:right-12 z-50 space-y-2"},Ise={class:"p-4"},Mse={class:"flex items-start"},Rse={class:"flex-shrink-0"},Pse={class:"ml-3 w-0 flex-1"},Nse={class:"text-sm font-medium text-gray-900"},jse={key:0,class:"mt-1 text-sm text-gray-500"},Lse={class:"ml-4 flex-shrink-0 flex"},Bse=["onClick"],Use={key:1,class:"min-h-screen flex flex-col items-center justify-center bg-gray-50"},Fse={class:"flex min-h-screen items-center justify-center p-4"},Vse={key:0,class:"relative bg-white rounded-2xl shadow-2xl max-w-lg w-full mx-auto overflow-hidden"},Ose={key:0,class:"fixed bottom-4 left-4 right-4 md:left-auto md:right-4 md:w-80 bg-red-600 text-white px-4 py-3 rounded-2xl shadow-lg flex items-center space-x-3 z-30"},zse={key:0,class:"fixed bottom-4 left-4 right-4 md:left-auto md:right-4 md:w-96 bg-white border border-gray-200 rounded-2xl shadow-2xl p-4 z-30"},Hse={class:"flex items-start space-x-3"},qse={class:"flex-shrink-0"},Gse={class:"h-10 w-10 bg-indigo-100 rounded-xl flex items-center justify-center"},Jse={__name:"App",setup(t){const o=et(),s=tt(),n=We(),r=B(!1),l=B(!0),a=B(!1),d=B(navigator.onLine),i=B([]);let c=0;const u=B(!1),p=B(!1);let w=null;const f=B(!1),v={AuthLayout:Jo(_6),PublicLayout:Jo(ap),DashboardLayout:Jo(Ao),SuperAdminLayout:Jo(Sse)},N=oe(()=>{const H=s.meta.layout||"PublicLayout";return console.log("Current layout:",H,"for route:",s.path),v[H]||v.PublicLayout});oe(()=>n.isAuthenticated),oe(()=>{var H;return!((H=s.meta)!=null&&H.requiresAuth)});const A=oe(()=>["/login","/register","/forgot-password","/reset-password"].includes(s.path)||s.path.startsWith("/auth/")),F=(H,O,ee="",ge=5e3)=>{const de=++c,ie={id:de,type:H,title:O,message:ee};return i.value.push(ie),ge>0&&setTimeout(()=>{I(de)},ge),de},I=H=>{const O=i.value.findIndex(ee=>ee.id===H);O>-1&&i.value.splice(O,1)},C=H=>{const O={success:"border-green-500",error:"border-red-500",warning:"border-yellow-500",info:"border-indigo-500"};return O[H]||O.info},j=H=>{const O={success:"text-green-500",error:"text-red-500",warning:"text-yellow-500",info:"text-indigo-500"};return O[H]||O.info},$=H=>{const O={success:tp,error:sp,warning:Ta,info:op};return O[H]||O.info},y=H=>H.path.includes("/auth/")?"slide-left":H.path.includes("/dashboard/")?"fade":H.path.includes("/profile/")?"slide-right":"fade",b=()=>{u.value=!0,document.body.style.overflow="hidden"},E=()=>{u.value=!1,document.body.style.overflow="auto"},R=H=>{H.preventDefault(),w=H,p.value=!0},M=async()=>{if(!w)return;w.prompt();const{outcome:H}=await w.userChoice;H==="accepted"&&F("success","App Installed!","Temple Manager has been added to your home screen"),w=null,p.value=!1},G=()=>{p.value=!1,w=null},U=()=>{d.value=!0,F("success","Back Online","Internet connection restored")},_=()=>{d.value=!1},k=H=>{console.error("Global error:",H),F("error","Something went wrong","Please try again or contact support")},L=async()=>{var H;console.log("App mounting, initializing auth...");try{l.value=!0;const O=await n.initialize();if(console.log("Auth initialized, authenticated:",O),O){if(A.value){const ee=n.userRole,ge=n.user;console.log("Authenticated user with role:",ee);const de=cp(ee,ge);console.log("Redirecting authenticated user to dashboard:",de),o.replace(de)}}else(H=s.meta)!=null&&H.requiresAuth&&(console.log("Redirecting unauthenticated user from protected route to login"),o.replace("/login"))}catch(O){console.error("Failed to initialize auth:",O),a.value=!0,F("error","Authentication Error","Failed to initialize application")}finally{l.value=!1}};Oe(()=>n.isAuthenticated,(H,O)=>{var ee,ge;if(H&&!O&&!l.value){const de=((ee=n.user)==null?void 0:ee.fullName)||((ge=n.user)==null?void 0:ge.name)||"User";F("success",`Welcome back, ${de}!`,"You have successfully logged in"),f.value=!0,setTimeout(()=>{f.value=!1},1e3)}});const z=()=>{window.location.reload()},q=async()=>{try{await n.logout(),F("info","Session reset","Please log in again"),o.replace("/login")}catch(H){console.error("Error during reset:",H),localStorage.clear(),window.location.href="/login"}},K=()=>{r.value=!0,setTimeout(()=>{r.value=!1},500)};return Me(async()=>{await L(),window.addEventListener("online",U),window.addEventListener("offline",_),window.addEventListener("beforeinstallprompt",R),window.addEventListener("error",k),document.documentElement.style.setProperty("--color-primary","#4f46e5"),document.documentElement.style.setProperty("--color-primary-dark","#3730a3"),document.documentElement.style.setProperty("--color-primary-light","#6366f1"),o.beforeEach((H,O,ee)=>{H.path!==O.path&&K(),ee()}),document.addEventListener("keydown",H=>{H.key==="Escape"&&u.value&&E()})}),Pt(()=>{window.removeEventListener("online",U),window.removeEventListener("offline",_),window.removeEventListener("beforeinstallprompt",R),window.removeEventListener("error",k),document.body.style.overflow="auto"}),window.showToast=F,window.showModal=b,window.hideModal=E,(H,O)=>{const ee=Ze("router-view");return m(),g("div",Dse,[le(mt,{name:"fade","enter-active-class":"transition-opacity duration-300 ease-out","leave-active-class":"transition-opacity duration-200 ease-in","enter-from-class":"opacity-0","enter-to-class":"opacity-100","leave-from-class":"opacity-100","leave-to-class":"opacity-0"},{default:ye(()=>[r.value||l.value?(m(),g("div",Cse,[e("div",Tse,[O[0]||(O[0]=e("div",{class:"animate-spin rounded-full h-12 w-12 border-4 border-indigo-200 border-t-indigo-600"},null,-1)),e("p",Ese,h(l.value?"Initializing application...":"Loading..."),1)])])):J("",!0)]),_:1}),(m(),Ne(Nn,{to:"body"},[e("div",Ase,[le(Eg,{name:"toast","enter-active-class":"transition-all duration-300 ease-out","leave-active-class":"transition-all duration-200 ease-in","enter-from-class":"opacity-0 transform translate-x-full","enter-to-class":"opacity-100 transform translate-x-0","leave-from-class":"opacity-100 transform translate-x-0","leave-to-class":"opacity-0 transform translate-x-full"},{default:ye(()=>[(m(!0),g(be,null,$e(i.value,ge=>(m(),g("div",{key:ge.id,class:se(["max-w-sm w-full bg-white shadow-lg rounded-2xl pointer-events-auto overflow-hidden border-l-4",C(ge.type)])},[e("div",Ise,[e("div",Mse,[e("div",Rse,[(m(),Ne(wt($(ge.type)),{class:se(["h-6 w-6",j(ge.type)])},null,8,["class"]))]),e("div",Pse,[e("p",Nse,h(ge.title),1),ge.message?(m(),g("p",jse,h(ge.message),1)):J("",!0)]),e("div",Lse,[e("button",{onClick:de=>I(ge.id),class:"bg-white rounded-md inline-flex text-gray-400 hover:text-gray-600 focus:outline-none focus:ring-2 focus:ring-indigo-500 transition-colors duration-200"},[O[1]||(O[1]=e("span",{class:"sr-only"},"Close",-1)),le(Te(Ea),{class:"h-5 w-5"})],8,Bse)])])])],2))),128))]),_:1})])])),l.value?a.value?(m(),g("div",Use,[e("div",{class:"text-center max-w-md px-4"},[O[2]||(O[2]=e("h1",{class:"text-2xl font-bold text-indigo-600 mb-4"},"Something went wrong",-1)),O[3]||(O[3]=e("p",{class:"text-gray-600 mb-6"},"There was a problem starting the application. Please try again.",-1)),e("div",{class:"space-y-4"},[e("button",{onClick:z,class:"w-full py-2 px-4 bg-indigo-600 text-white rounded hover:bg-indigo-700"}," Refresh Page "),e("button",{onClick:q,class:"w-full py-2 px-4 border border-gray-300 bg-white text-gray-700 rounded hover:bg-gray-50"}," Reset & Logout ")])])])):J("",!0):(m(),Ne(wt(N.value),{key:0},{default:ye(()=>[le(ee,null,{default:ye(({Component:ge,route:de})=>[le(mt,{name:y(de),mode:"out-in","enter-active-class":"transition-all duration-300 ease-out","leave-active-class":"transition-all duration-200 ease-in"},{default:ye(()=>[(m(),Ne(wt(ge),{key:de.path}))]),_:2},1032,["name"])]),_:1})]),_:1})),(m(),Ne(Nn,{to:"body"},[le(mt,{name:"modal","enter-active-class":"transition-opacity duration-300 ease-out","leave-active-class":"transition-opacity duration-200 ease-in","enter-from-class":"opacity-0","enter-to-class":"opacity-100","leave-from-class":"opacity-100","leave-to-class":"opacity-0"},{default:ye(()=>[u.value?(m(),g("div",{key:0,class:"fixed inset-0 z-40 overflow-y-auto",onClick:qe(E,["self"])},[e("div",Fse,[O[4]||(O[4]=e("div",{class:"fixed inset-0 bg-black bg-opacity-25 backdrop-blur-sm transition-opacity"},null,-1)),le(mt,{name:"modal-content","enter-active-class":"transition-all duration-300 ease-out","leave-active-class":"transition-all duration-200 ease-in","enter-from-class":"opacity-0 transform scale-95","enter-to-class":"opacity-100 transform scale-100","leave-from-class":"opacity-100 transform scale-100","leave-to-class":"opacity-0 transform scale-95"},{default:ye(()=>[u.value?(m(),g("div",Vse,[Tt(H.$slots,"modal-content",{},void 0,!0)])):J("",!0)]),_:3})])])):J("",!0)]),_:3})])),le(mt,{name:"slide-up","enter-active-class":"transition-transform duration-300 ease-out","leave-active-class":"transition-transform duration-200 ease-in","enter-from-class":"transform translate-y-full","enter-to-class":"transform translate-y-0","leave-from-class":"transform translate-y-0","leave-to-class":"transform translate-y-full"},{default:ye(()=>[d.value?J("",!0):(m(),g("div",Ose,[le(Te(ix),{class:"h-5 w-5 text-red-200"}),O[5]||(O[5]=e("div",{class:"flex-1"},[e("p",{class:"font-medium text-sm"},"No Internet Connection"),e("p",{class:"text-xs text-red-200"},"Some features may be limited")],-1))]))]),_:1}),le(mt,{name:"slide-up","enter-active-class":"transition-transform duration-300 ease-out","leave-active-class":"transition-transform duration-200 ease-in","enter-from-class":"transform translate-y-full","enter-to-class":"transform translate-y-0","leave-from-class":"transform translate-y-0","leave-to-class":"transform translate-y-full"},{default:ye(()=>[p.value?(m(),g("div",zse,[e("div",Hse,[e("div",qse,[e("div",Gse,[le(Te(ex),{class:"h-6 w-6 text-indigo-600"})])]),O[6]||(O[6]=e("div",{class:"flex-1 min-w-0"},[e("h3",{class:"text-sm font-bold text-gray-900",style:{"font-family":"'Roboto', sans-serif"}}," Install Temple Manager "),e("p",{class:"text-xs text-gray-500 mt-1"}," Add to your home screen for quick access ")],-1))]),e("div",{class:"mt-4 flex space-x-2"},[e("button",{onClick:M,class:"flex-1 bg-indigo-600 text-white text-xs font-medium py-2 px-3 rounded-xl hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 transition-colors duration-200"}," Install "),e("button",{onClick:G,class:"flex-1 bg-gray-100 text-gray-700 text-xs font-medium py-2 px-3 rounded-xl hover:bg-gray-200 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2 transition-colors duration-200"}," Not Now ")])])):J("",!0)]),_:1})])}}},Wse=ot(Jse,[["__scopeId","data-v-ecf2f18e"]]),Bt=Fg(Wse),Yse=zg();Bt.use(Yse);const Is=We(),Kse=Is.initialize();console.log(" Auth initialization result:",Kse);console.log(" Auth state after init:",{isAuthenticated:Is.isAuthenticated,user:Is.user,token:Is.token,userRole:Is.userRole});Bt.use(hs);Bt.config.errorHandler=(t,o,s)=>{console.error("Global error:",t),console.error("Component instance:",o),console.error("Error info:",s);try{const{showToast:n}=Ue();n("An unexpected error occurred. Please try again.","error")}catch(n){console.error("Failed to show error toast:",n)}};Bt.config.performance=!1;Bt.config.globalProperties.$constants={APP_NAME:"Temple SaaS Platform",APP_VERSION:"1.0.0",ROLES:{SUPER_ADMIN:"superadmin",TENANT:"tenant",DEVOTEE:"devotee",VOLUNTEER:"volunteer"},STATUS:{PENDING:"PENDING",APPROVED:"APPROVED",REJECTED:"REJECTED",ACTIVE:"ACTIVE",INACTIVE:"INACTIVE"},TEMPLE_STATUS:{PENDING:"PENDING",APPROVED:"APPROVED",REJECTED:"REJECTED",UNDER_REVIEW:"UNDER_REVIEW"},SEVA_TYPES:{DAILY:"daily",WEEKLY:"weekly",MONTHLY:"monthly",FESTIVAL:"festival",SPECIAL:"special"},DONATION_TYPES:{GENERAL:"general",SEVA:"seva",FESTIVAL:"festival",DEVELOPMENT:"development",FOOD:"food",MAINTENANCE:"maintenance"},COMMUNICATION_CHANNELS:{EMAIL:"email",SMS:"sms",WHATSAPP:"whatsapp",IN_APP:"in_app"},FILE_LIMITS:{MAX_SIZE:5*1024*1024,ALLOWED_TYPES:["image/jpeg","image/png","image/jpg","application/pdf","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document"]},THEME:{PRIMARY:"indigo-600",SECONDARY:"indigo-500",ACCENT:"indigo-800",SUCCESS:"green-600",ERROR:"red-600",WARNING:"yellow-600",INFO:"blue-600",GRAY:"gray-600"},BREAKPOINTS:{SM:"640px",MD:"768px",LG:"1024px",XL:"1280px","2XL":"1536px"}};const ys=ln(),pp=Ue();Bt.provide("auth",ys);Bt.provide("toast",pp);Bt.config.globalProperties.$auth=ys;Bt.config.globalProperties.$toast=pp;Bt.directive("permission",{mounted(t,o){try{const{hasPermission:s}=ys,n=o.value;(!s||!s(n))&&(t.style.display="none")}catch(s){console.error("Permission directive error:",s),t.style.display="none"}},updated(t,o){try{const{hasPermission:s}=ys,n=o.value;!s||!s(n)?t.style.display="none":t.style.display=""}catch(s){console.error("Permission directive error:",s),t.style.display="none"}}});Bt.directive("role",{mounted(t,o){try{const{user:s}=ys,n=Array.isArray(o.value)?o.value:[o.value];(!(s!=null&&s.value)||!n.includes(s.value.role))&&(t.style.display="none")}catch(s){console.error("Role directive error:",s),t.style.display="none"}},updated(t,o){try{const{user:s}=ys,n=Array.isArray(o.value)?o.value:[o.value];!(s!=null&&s.value)||!n.includes(s.value.role)?t.style.display="none":t.style.display=""}catch(s){console.error("Role directive error:",s),t.style.display="none"}}});Bt.directive("loading",{mounted(t,o){Nu(t,o.value)},updated(t,o){Nu(t,o.value)}});function Nu(t,o){try{if(o){if(t.classList.add("opacity-50","pointer-events-none","cursor-not-allowed"),!t.querySelector(".loading-spinner")){const s=document.createElement("div");s.className="loading-spinner absolute inset-0 flex items-center justify-center bg-white bg-opacity-75",s.innerHTML=`
          <div class="animate-spin rounded-full h-6 w-6 border-b-2 border-indigo-600"></div>
        `,window.getComputedStyle(t).position==="static"&&(t.style.position="relative"),t.appendChild(s)}}else{t.classList.remove("opacity-50","pointer-events-none","cursor-not-allowed");const s=t.querySelector(".loading-spinner");s&&s.remove()}}catch(s){console.error("Loading directive error:",s)}}Bt.mixin({methods:{formatCurrency(t,o="INR"){try{return new Intl.NumberFormat("en-IN",{style:"currency",currency:o,minimumFractionDigits:0}).format(t)}catch(s){return console.error("Currency formatting error:",s),`${t}`}},formatDate(t,o="short"){try{const s={short:{year:"numeric",month:"short",day:"numeric"},long:{year:"numeric",month:"long",day:"numeric",weekday:"long"},time:{hour:"2-digit",minute:"2-digit"},datetime:{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}};return new Intl.DateTimeFormat("en-IN",s[o]||s.short).format(new Date(t))}catch(s){return console.error("Date formatting error:",s),new Date(t).toLocaleDateString()}},truncate(t,o=50){return t?t.length>o?t.substring(0,o)+"...":t:""},capitalize(t){return t?t.charAt(0).toUpperCase()+t.slice(1):""},generateAvatar(t){return t?t.split(" ").map(s=>s.charAt(0)).join("").toUpperCase().substring(0,2):""},getStatusColor(t){return{PENDING:"bg-yellow-100 text-yellow-800",APPROVED:"bg-green-100 text-green-800",REJECTED:"bg-red-100 text-red-800",ACTIVE:"bg-green-100 text-green-800",INACTIVE:"bg-gray-100 text-gray-800",UNDER_REVIEW:"bg-blue-100 text-blue-800"}[t]||"bg-gray-100 text-gray-800"},safeGet(t,o,s=null){try{return o.split(".").reduce((n,r)=>n==null?void 0:n[r],t)??s}catch{return s}}}});try{Bt.mount("#app")}catch(t){console.error("Failed to mount app:",t);const o=document.getElementById("app");o&&(o.innerHTML=`
      <div class="min-h-screen flex items-center justify-center bg-gray-50">
        <div class="text-center">
          <h1 class="text-2xl font-bold text-red-600 mb-4">Application Failed to Start</h1>
          <p class="text-gray-600 mb-4">Please refresh the page or contact support.</p>
          <button onclick="window.location.reload()" class="bg-indigo-600 text-white px-4 py-2 rounded">
            Refresh Page
          </button>
        </div>
      </div>
    `)}export{et as A,Ce as B,te as C,Vt as D,tt as E,be as F,pe as G,Ra as H,Oe as I,ye as J,Ze as K,Aa as L,it as M,Qo as N,xS as O,ct as P,at as Q,gt as R,Xse as S,np as T,Rt as U,Co as V,Ot as W,lt as X,Ve as Y,rp as Z,ot as _,E_ as a,I_ as b,oe as c,Uo as d,Ue as e,Je as f,T_ as g,g as h,e as i,J as j,Re as k,$e as l,cs as m,se as n,m as o,qe as p,We as q,B as r,Me as s,h as t,A_ as u,_e as v,ce as w,Ne as x,Te as y,le as z};
