const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/SuperAdminDashboard-Busci4D0.js","assets/superadmin.service-C_Bv3yYL.js","assets/TenantApprovals-Cn9OyE4y.js","assets/UserManagement-C_W9aM5w.js","assets/superadmin-hiDUlfja.js","assets/UserManagement-BgmLin17.css","assets/RoleManagement-BcnM4uBS.js","assets/RoleManagement-q74yCzv9.css","assets/ResetPassword-CrFpA86s.js","assets/ResetPasswordForm-C9QGh0UO.js","assets/AssignTenantsView-BZpYr21j.js","assets/AssignTenantsView-BGYqtsG5.css","assets/SuperadminReportsView-CdvJ_Rgq.js","assets/UserManagement-CFnMDz-D.js","assets/UserManagement-DW6r8lom.css"])))=>i.map(i=>d[i]);
(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function s(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerPolicy&&(i.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?i.credentials="include":r.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(r){if(r.ep)return;r.ep=!0;const i=s(r);fetch(r.href,i)}})();/**
* @vue/shared v3.5.22
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function ra(t){const o=Object.create(null);for(const s of t.split(","))o[s]=1;return s=>s in o}const Xe={},as=[],io=()=>{},Lu=()=>!1,Hn=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&(t.charCodeAt(2)>122||t.charCodeAt(2)<97),aa=t=>t.startsWith("onUpdate:"),dt=Object.assign,ia=(t,o)=>{const s=t.indexOf(o);s>-1&&t.splice(s,1)},fp=Object.prototype.hasOwnProperty,We=(t,o)=>fp.call(t,o),Ae=Array.isArray,is=t=>Qs(t)==="[object Map]",ys=t=>Qs(t)==="[object Set]",Xl=t=>Qs(t)==="[object Date]",Me=t=>typeof t=="function",at=t=>typeof t=="string",Kt=t=>typeof t=="symbol",Ye=t=>t!==null&&typeof t=="object",Bu=t=>(Ye(t)||Me(t))&&Me(t.then)&&Me(t.catch),Vu=Object.prototype.toString,Qs=t=>Vu.call(t),vp=t=>Qs(t).slice(8,-1),Uu=t=>Qs(t)==="[object Object]",la=t=>at(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,Is=ra(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),qn=t=>{const o=Object.create(null);return(s=>o[s]||(o[s]=t(s)))},hp=/-\w/g,Wt=qn(t=>t.replace(hp,o=>o.slice(1).toUpperCase())),yp=/\B([A-Z])/g,Bo=qn(t=>t.replace(yp,"-$1").toLowerCase()),Gn=qn(t=>t.charAt(0).toUpperCase()+t.slice(1)),ur=qn(t=>t?`on${Gn(t)}`:""),Po=(t,o)=>!Object.is(t,o),wn=(t,...o)=>{for(let s=0;s<t.length;s++)t[s](...o)},Fu=(t,o,s,n=!1)=>{Object.defineProperty(t,o,{configurable:!0,enumerable:!1,writable:n,value:s})},En=t=>{const o=parseFloat(t);return isNaN(o)?t:o},xp=t=>{const o=at(t)?Number(t):NaN;return isNaN(o)?t:o};let Zl;const Wn=()=>Zl||(Zl=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function Pt(t){if(Ae(t)){const o={};for(let s=0;s<t.length;s++){const n=t[s],r=at(n)?_p(n):Pt(n);if(r)for(const i in r)o[i]=r[i]}return o}else if(at(t)||Ye(t))return t}const bp=/;(?![^(]*\))/g,wp=/:([^]+)/,kp=/\/\*[^]*?\*\//g;function _p(t){const o={};return t.replace(kp,"").split(bp).forEach(s=>{if(s){const n=s.split(wp);n.length>1&&(o[n[0].trim()]=n[1].trim())}}),o}function ie(t){let o="";if(at(t))o=t;else if(Ae(t))for(let s=0;s<t.length;s++){const n=ie(t[s]);n&&(o+=n+" ")}else if(Ye(t))for(const s in t)t[s]&&(o+=s+" ");return o.trim()}const $p="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",Sp=ra($p);function Ou(t){return!!t||t===""}function Dp(t,o){if(t.length!==o.length)return!1;let s=!0;for(let n=0;s&&n<t.length;n++)s=Zo(t[n],o[n]);return s}function Zo(t,o){if(t===o)return!0;let s=Xl(t),n=Xl(o);if(s||n)return s&&n?t.getTime()===o.getTime():!1;if(s=Kt(t),n=Kt(o),s||n)return t===o;if(s=Ae(t),n=Ae(o),s||n)return s&&n?Dp(t,o):!1;if(s=Ye(t),n=Ye(o),s||n){if(!s||!n)return!1;const r=Object.keys(t).length,i=Object.keys(o).length;if(r!==i)return!1;for(const a in t){const l=t.hasOwnProperty(a),d=o.hasOwnProperty(a);if(l&&!d||!l&&d||!Zo(t[a],o[a]))return!1}}return String(t)===String(o)}function da(t,o){return t.findIndex(s=>Zo(s,o))}const zu=t=>!!(t&&t.__v_isRef===!0),y=t=>at(t)?t:t==null?"":Ae(t)||Ye(t)&&(t.toString===Vu||!Me(t.toString))?zu(t)?y(t.value):JSON.stringify(t,Hu,2):String(t),Hu=(t,o)=>zu(o)?Hu(t,o.value):is(o)?{[`Map(${o.size})`]:[...o.entries()].reduce((s,[n,r],i)=>(s[cr(n,i)+" =>"]=r,s),{})}:ys(o)?{[`Set(${o.size})`]:[...o.values()].map(s=>cr(s))}:Kt(o)?cr(o):Ye(o)&&!Ae(o)&&!Uu(o)?String(o):o,cr=(t,o="")=>{var s;return Kt(t)?`Symbol(${(s=t.description)!=null?s:o})`:t};/**
* @vue/reactivity v3.5.22
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let wt;class qu{constructor(o=!1){this.detached=o,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=wt,!o&&wt&&(this.index=(wt.scopes||(wt.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let o,s;if(this.scopes)for(o=0,s=this.scopes.length;o<s;o++)this.scopes[o].pause();for(o=0,s=this.effects.length;o<s;o++)this.effects[o].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let o,s;if(this.scopes)for(o=0,s=this.scopes.length;o<s;o++)this.scopes[o].resume();for(o=0,s=this.effects.length;o<s;o++)this.effects[o].resume()}}run(o){if(this._active){const s=wt;try{return wt=this,o()}finally{wt=s}}}on(){++this._on===1&&(this.prevScope=wt,wt=this)}off(){this._on>0&&--this._on===0&&(wt=this.prevScope,this.prevScope=void 0)}stop(o){if(this._active){this._active=!1;let s,n;for(s=0,n=this.effects.length;s<n;s++)this.effects[s].stop();for(this.effects.length=0,s=0,n=this.cleanups.length;s<n;s++)this.cleanups[s]();if(this.cleanups.length=0,this.scopes){for(s=0,n=this.scopes.length;s<n;s++)this.scopes[s].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!o){const r=this.parent.scopes.pop();r&&r!==this&&(this.parent.scopes[this.index]=r,r.index=this.index)}this.parent=void 0}}}function Gu(t){return new qu(t)}function Wu(){return wt}function Cp(t,o=!1){wt&&wt.cleanups.push(t)}let et;const pr=new WeakSet;class Ju{constructor(o){this.fn=o,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,wt&&wt.active&&wt.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,pr.has(this)&&(pr.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||Ku(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,Ql(this),Xu(this);const o=et,s=Yt;et=this,Yt=!0;try{return this.fn()}finally{Zu(this),et=o,Yt=s,this.flags&=-3}}stop(){if(this.flags&1){for(let o=this.deps;o;o=o.nextDep)pa(o);this.deps=this.depsTail=void 0,Ql(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?pr.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){Mr(this)&&this.run()}get dirty(){return Mr(this)}}let Yu=0,Ms,Rs;function Ku(t,o=!1){if(t.flags|=8,o){t.next=Rs,Rs=t;return}t.next=Ms,Ms=t}function ua(){Yu++}function ca(){if(--Yu>0)return;if(Rs){let o=Rs;for(Rs=void 0;o;){const s=o.next;o.next=void 0,o.flags&=-9,o=s}}let t;for(;Ms;){let o=Ms;for(Ms=void 0;o;){const s=o.next;if(o.next=void 0,o.flags&=-9,o.flags&1)try{o.trigger()}catch(n){t||(t=n)}o=s}}if(t)throw t}function Xu(t){for(let o=t.deps;o;o=o.nextDep)o.version=-1,o.prevActiveLink=o.dep.activeLink,o.dep.activeLink=o}function Zu(t){let o,s=t.depsTail,n=s;for(;n;){const r=n.prevDep;n.version===-1?(n===s&&(s=r),pa(n),Tp(n)):o=n,n.dep.activeLink=n.prevActiveLink,n.prevActiveLink=void 0,n=r}t.deps=o,t.depsTail=s}function Mr(t){for(let o=t.deps;o;o=o.nextDep)if(o.dep.version!==o.version||o.dep.computed&&(Qu(o.dep.computed)||o.dep.version!==o.version))return!0;return!!t._dirty}function Qu(t){if(t.flags&4&&!(t.flags&16)||(t.flags&=-17,t.globalVersion===Os)||(t.globalVersion=Os,!t.isSSR&&t.flags&128&&(!t.deps&&!t._dirty||!Mr(t))))return;t.flags|=2;const o=t.dep,s=et,n=Yt;et=t,Yt=!0;try{Xu(t);const r=t.fn(t._value);(o.version===0||Po(r,t._value))&&(t.flags|=128,t._value=r,o.version++)}catch(r){throw o.version++,r}finally{et=s,Yt=n,Zu(t),t.flags&=-3}}function pa(t,o=!1){const{dep:s,prevSub:n,nextSub:r}=t;if(n&&(n.nextSub=r,t.prevSub=void 0),r&&(r.prevSub=n,t.nextSub=void 0),s.subs===t&&(s.subs=n,!n&&s.computed)){s.computed.flags&=-5;for(let i=s.computed.deps;i;i=i.nextDep)pa(i,!0)}!o&&!--s.sc&&s.map&&s.map.delete(s.key)}function Tp(t){const{prevDep:o,nextDep:s}=t;o&&(o.nextDep=s,t.prevDep=void 0),s&&(s.prevDep=o,t.nextDep=void 0)}let Yt=!0;const ec=[];function wo(){ec.push(Yt),Yt=!1}function ko(){const t=ec.pop();Yt=t===void 0?!0:t}function Ql(t){const{cleanup:o}=t;if(t.cleanup=void 0,o){const s=et;et=void 0;try{o()}finally{et=s}}}let Os=0;class Ep{constructor(o,s){this.sub=o,this.dep=s,this.version=s.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class ma{constructor(o){this.computed=o,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(o){if(!et||!Yt||et===this.computed)return;let s=this.activeLink;if(s===void 0||s.sub!==et)s=this.activeLink=new Ep(et,this),et.deps?(s.prevDep=et.depsTail,et.depsTail.nextDep=s,et.depsTail=s):et.deps=et.depsTail=s,tc(s);else if(s.version===-1&&(s.version=this.version,s.nextDep)){const n=s.nextDep;n.prevDep=s.prevDep,s.prevDep&&(s.prevDep.nextDep=n),s.prevDep=et.depsTail,s.nextDep=void 0,et.depsTail.nextDep=s,et.depsTail=s,et.deps===s&&(et.deps=n)}return s}trigger(o){this.version++,Os++,this.notify(o)}notify(o){ua();try{for(let s=this.subs;s;s=s.prevSub)s.sub.notify()&&s.sub.dep.notify()}finally{ca()}}}function tc(t){if(t.dep.sc++,t.sub.flags&4){const o=t.dep.computed;if(o&&!t.dep.subs){o.flags|=20;for(let n=o.deps;n;n=n.nextDep)tc(n)}const s=t.dep.subs;s!==t&&(t.prevSub=s,s&&(s.nextSub=t)),t.dep.subs=t}}const An=new WeakMap,Yo=Symbol(""),Rr=Symbol(""),zs=Symbol("");function kt(t,o,s){if(Yt&&et){let n=An.get(t);n||An.set(t,n=new Map);let r=n.get(s);r||(n.set(s,r=new ma),r.map=n,r.key=s),r.track()}}function ho(t,o,s,n,r,i){const a=An.get(t);if(!a){Os++;return}const l=d=>{d&&d.trigger()};if(ua(),o==="clear")a.forEach(l);else{const d=Ae(t),c=d&&la(s);if(d&&s==="length"){const u=Number(n);a.forEach((p,v)=>{(v==="length"||v===zs||!Kt(v)&&v>=u)&&l(p)})}else switch((s!==void 0||a.has(void 0))&&l(a.get(s)),c&&l(a.get(zs)),o){case"add":d?c&&l(a.get("length")):(l(a.get(Yo)),is(t)&&l(a.get(Rr)));break;case"delete":d||(l(a.get(Yo)),is(t)&&l(a.get(Rr)));break;case"set":is(t)&&l(a.get(Yo));break}}ca()}function Ap(t,o){const s=An.get(t);return s&&s.get(o)}function os(t){const o=Be(t);return o===t?o:(kt(o,"iterate",zs),Ht(t)?o:o.map(ht))}function Jn(t){return kt(t=Be(t),"iterate",zs),t}const Ip={__proto__:null,[Symbol.iterator](){return mr(this,Symbol.iterator,ht)},concat(...t){return os(this).concat(...t.map(o=>Ae(o)?os(o):o))},entries(){return mr(this,"entries",t=>(t[1]=ht(t[1]),t))},every(t,o){return uo(this,"every",t,o,void 0,arguments)},filter(t,o){return uo(this,"filter",t,o,s=>s.map(ht),arguments)},find(t,o){return uo(this,"find",t,o,ht,arguments)},findIndex(t,o){return uo(this,"findIndex",t,o,void 0,arguments)},findLast(t,o){return uo(this,"findLast",t,o,ht,arguments)},findLastIndex(t,o){return uo(this,"findLastIndex",t,o,void 0,arguments)},forEach(t,o){return uo(this,"forEach",t,o,void 0,arguments)},includes(...t){return gr(this,"includes",t)},indexOf(...t){return gr(this,"indexOf",t)},join(t){return os(this).join(t)},lastIndexOf(...t){return gr(this,"lastIndexOf",t)},map(t,o){return uo(this,"map",t,o,void 0,arguments)},pop(){return $s(this,"pop")},push(...t){return $s(this,"push",t)},reduce(t,...o){return ed(this,"reduce",t,o)},reduceRight(t,...o){return ed(this,"reduceRight",t,o)},shift(){return $s(this,"shift")},some(t,o){return uo(this,"some",t,o,void 0,arguments)},splice(...t){return $s(this,"splice",t)},toReversed(){return os(this).toReversed()},toSorted(t){return os(this).toSorted(t)},toSpliced(...t){return os(this).toSpliced(...t)},unshift(...t){return $s(this,"unshift",t)},values(){return mr(this,"values",ht)}};function mr(t,o,s){const n=Jn(t),r=n[o]();return n!==t&&!Ht(t)&&(r._next=r.next,r.next=()=>{const i=r._next();return i.done||(i.value=s(i.value)),i}),r}const Mp=Array.prototype;function uo(t,o,s,n,r,i){const a=Jn(t),l=a!==t&&!Ht(t),d=a[o];if(d!==Mp[o]){const p=d.apply(t,i);return l?ht(p):p}let c=s;a!==t&&(l?c=function(p,v){return s.call(this,ht(p),v,t)}:s.length>2&&(c=function(p,v){return s.call(this,p,v,t)}));const u=d.call(a,c,n);return l&&r?r(u):u}function ed(t,o,s,n){const r=Jn(t);let i=s;return r!==t&&(Ht(t)?s.length>3&&(i=function(a,l,d){return s.call(this,a,l,d,t)}):i=function(a,l,d){return s.call(this,a,ht(l),d,t)}),r[o](i,...n)}function gr(t,o,s){const n=Be(t);kt(n,"iterate",zs);const r=n[o](...s);return(r===-1||r===!1)&&va(s[0])?(s[0]=Be(s[0]),n[o](...s)):r}function $s(t,o,s=[]){wo(),ua();const n=Be(t)[o].apply(t,s);return ca(),ko(),n}const Rp=ra("__proto__,__v_isRef,__isVue"),oc=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(Kt));function Pp(t){Kt(t)||(t=String(t));const o=Be(this);return kt(o,"has",t),o.hasOwnProperty(t)}class sc{constructor(o=!1,s=!1){this._isReadonly=o,this._isShallow=s}get(o,s,n){if(s==="__v_skip")return o.__v_skip;const r=this._isReadonly,i=this._isShallow;if(s==="__v_isReactive")return!r;if(s==="__v_isReadonly")return r;if(s==="__v_isShallow")return i;if(s==="__v_raw")return n===(r?i?Hp:ic:i?ac:rc).get(o)||Object.getPrototypeOf(o)===Object.getPrototypeOf(n)?o:void 0;const a=Ae(o);if(!r){let d;if(a&&(d=Ip[s]))return d;if(s==="hasOwnProperty")return Pp}const l=Reflect.get(o,s,rt(o)?o:n);if((Kt(s)?oc.has(s):Rp(s))||(r||kt(o,"get",s),i))return l;if(rt(l)){const d=a&&la(s)?l:l.value;return r&&Ye(d)?jr(d):d}return Ye(l)?r?jr(l):Je(l):l}}class nc extends sc{constructor(o=!1){super(!1,o)}set(o,s,n,r){let i=o[s];if(!this._isShallow){const d=jo(i);if(!Ht(n)&&!jo(n)&&(i=Be(i),n=Be(n)),!Ae(o)&&rt(i)&&!rt(n))return d||(i.value=n),!0}const a=Ae(o)&&la(s)?Number(s)<o.length:We(o,s),l=Reflect.set(o,s,n,rt(o)?o:r);return o===Be(r)&&(a?Po(n,i)&&ho(o,"set",s,n):ho(o,"add",s,n)),l}deleteProperty(o,s){const n=We(o,s);o[s];const r=Reflect.deleteProperty(o,s);return r&&n&&ho(o,"delete",s,void 0),r}has(o,s){const n=Reflect.has(o,s);return(!Kt(s)||!oc.has(s))&&kt(o,"has",s),n}ownKeys(o){return kt(o,"iterate",Ae(o)?"length":Yo),Reflect.ownKeys(o)}}class jp extends sc{constructor(o=!1){super(!0,o)}set(o,s){return!0}deleteProperty(o,s){return!0}}const Np=new nc,Lp=new jp,Bp=new nc(!0);const Pr=t=>t,pn=t=>Reflect.getPrototypeOf(t);function Vp(t,o,s){return function(...n){const r=this.__v_raw,i=Be(r),a=is(i),l=t==="entries"||t===Symbol.iterator&&a,d=t==="keys"&&a,c=r[t](...n),u=s?Pr:o?In:ht;return!o&&kt(i,"iterate",d?Rr:Yo),{next(){const{value:p,done:v}=c.next();return v?{value:p,done:v}:{value:l?[u(p[0]),u(p[1])]:u(p),done:v}},[Symbol.iterator](){return this}}}}function mn(t){return function(...o){return t==="delete"?!1:t==="clear"?void 0:this}}function Up(t,o){const s={get(r){const i=this.__v_raw,a=Be(i),l=Be(r);t||(Po(r,l)&&kt(a,"get",r),kt(a,"get",l));const{has:d}=pn(a),c=o?Pr:t?In:ht;if(d.call(a,r))return c(i.get(r));if(d.call(a,l))return c(i.get(l));i!==a&&i.get(r)},get size(){const r=this.__v_raw;return!t&&kt(Be(r),"iterate",Yo),r.size},has(r){const i=this.__v_raw,a=Be(i),l=Be(r);return t||(Po(r,l)&&kt(a,"has",r),kt(a,"has",l)),r===l?i.has(r):i.has(r)||i.has(l)},forEach(r,i){const a=this,l=a.__v_raw,d=Be(l),c=o?Pr:t?In:ht;return!t&&kt(d,"iterate",Yo),l.forEach((u,p)=>r.call(i,c(u),c(p),a))}};return dt(s,t?{add:mn("add"),set:mn("set"),delete:mn("delete"),clear:mn("clear")}:{add(r){!o&&!Ht(r)&&!jo(r)&&(r=Be(r));const i=Be(this);return pn(i).has.call(i,r)||(i.add(r),ho(i,"add",r,r)),this},set(r,i){!o&&!Ht(i)&&!jo(i)&&(i=Be(i));const a=Be(this),{has:l,get:d}=pn(a);let c=l.call(a,r);c||(r=Be(r),c=l.call(a,r));const u=d.call(a,r);return a.set(r,i),c?Po(i,u)&&ho(a,"set",r,i):ho(a,"add",r,i),this},delete(r){const i=Be(this),{has:a,get:l}=pn(i);let d=a.call(i,r);d||(r=Be(r),d=a.call(i,r)),l&&l.call(i,r);const c=i.delete(r);return d&&ho(i,"delete",r,void 0),c},clear(){const r=Be(this),i=r.size!==0,a=r.clear();return i&&ho(r,"clear",void 0,void 0),a}}),["keys","values","entries",Symbol.iterator].forEach(r=>{s[r]=Vp(r,t,o)}),s}function ga(t,o){const s=Up(t,o);return(n,r,i)=>r==="__v_isReactive"?!t:r==="__v_isReadonly"?t:r==="__v_raw"?n:Reflect.get(We(s,r)&&r in n?s:n,r,i)}const Fp={get:ga(!1,!1)},Op={get:ga(!1,!0)},zp={get:ga(!0,!1)};const rc=new WeakMap,ac=new WeakMap,ic=new WeakMap,Hp=new WeakMap;function qp(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Gp(t){return t.__v_skip||!Object.isExtensible(t)?0:qp(vp(t))}function Je(t){return jo(t)?t:fa(t,!1,Np,Fp,rc)}function lc(t){return fa(t,!1,Bp,Op,ac)}function jr(t){return fa(t,!0,Lp,zp,ic)}function fa(t,o,s,n,r){if(!Ye(t)||t.__v_raw&&!(o&&t.__v_isReactive))return t;const i=Gp(t);if(i===0)return t;const a=r.get(t);if(a)return a;const l=new Proxy(t,i===2?n:s);return r.set(t,l),l}function bo(t){return jo(t)?bo(t.__v_raw):!!(t&&t.__v_isReactive)}function jo(t){return!!(t&&t.__v_isReadonly)}function Ht(t){return!!(t&&t.__v_isShallow)}function va(t){return t?!!t.__v_raw:!1}function Be(t){const o=t&&t.__v_raw;return o?Be(o):t}function Wo(t){return!We(t,"__v_skip")&&Object.isExtensible(t)&&Fu(t,"__v_skip",!0),t}const ht=t=>Ye(t)?Je(t):t,In=t=>Ye(t)?jr(t):t;function rt(t){return t?t.__v_isRef===!0:!1}function V(t){return dc(t,!1)}function Wp(t){return dc(t,!0)}function dc(t,o){return rt(t)?t:new Jp(t,o)}class Jp{constructor(o,s){this.dep=new ma,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=s?o:Be(o),this._value=s?o:ht(o),this.__v_isShallow=s}get value(){return this.dep.track(),this._value}set value(o){const s=this._rawValue,n=this.__v_isShallow||Ht(o)||jo(o);o=n?o:Be(o),Po(o,s)&&(this._rawValue=o,this._value=n?o:ht(o),this.dep.trigger())}}function _e(t){return rt(t)?t.value:t}const Yp={get:(t,o,s)=>o==="__v_raw"?t:_e(Reflect.get(t,o,s)),set:(t,o,s,n)=>{const r=t[o];return rt(r)&&!rt(s)?(r.value=s,!0):Reflect.set(t,o,s,n)}};function uc(t){return bo(t)?t:new Proxy(t,Yp)}function cc(t){const o=Ae(t)?new Array(t.length):{};for(const s in t)o[s]=pc(t,s);return o}class Kp{constructor(o,s,n){this._object=o,this._key=s,this._defaultValue=n,this.__v_isRef=!0,this._value=void 0}get value(){const o=this._object[this._key];return this._value=o===void 0?this._defaultValue:o}set value(o){this._object[this._key]=o}get dep(){return Ap(Be(this._object),this._key)}}class Xp{constructor(o){this._getter=o,this.__v_isRef=!0,this.__v_isReadonly=!0,this._value=void 0}get value(){return this._value=this._getter()}}function Zp(t,o,s){return rt(t)?t:Me(t)?new Xp(t):Ye(t)&&arguments.length>1?pc(t,o,s):V(t)}function pc(t,o,s){const n=t[o];return rt(n)?n:new Kp(t,o,s)}class Qp{constructor(o,s,n){this.fn=o,this.setter=s,this._value=void 0,this.dep=new ma(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=Os-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!s,this.isSSR=n}notify(){if(this.flags|=16,!(this.flags&8)&&et!==this)return Ku(this,!0),!0}get value(){const o=this.dep.track();return Qu(this),o&&(o.version=this.dep.version),this._value}set value(o){this.setter&&this.setter(o)}}function em(t,o,s=!1){let n,r;return Me(t)?n=t:(n=t.get,r=t.set),new Qp(n,r,s)}const gn={},Mn=new WeakMap;let qo;function tm(t,o=!1,s=qo){if(s){let n=Mn.get(s);n||Mn.set(s,n=[]),n.push(t)}}function om(t,o,s=Xe){const{immediate:n,deep:r,once:i,scheduler:a,augmentJob:l,call:d}=s,c=S=>r?S:Ht(S)||r===!1||r===0?yo(S,1):yo(S);let u,p,v,g,h=!1,D=!1;if(rt(t)?(p=()=>t.value,h=Ht(t)):bo(t)?(p=()=>c(t),h=!0):Ae(t)?(D=!0,h=t.some(S=>bo(S)||Ht(S)),p=()=>t.map(S=>{if(rt(S))return S.value;if(bo(S))return c(S);if(Me(S))return d?d(S,2):S()})):Me(t)?o?p=d?()=>d(t,2):t:p=()=>{if(v){wo();try{v()}finally{ko()}}const S=qo;qo=u;try{return d?d(t,3,[g]):t(g)}finally{qo=S}}:p=io,o&&r){const S=p,k=r===!0?1/0:r;p=()=>yo(S(),k)}const C=Wu(),B=()=>{u.stop(),C&&C.active&&ia(C.effects,u)};if(i&&o){const S=o;o=(...k)=>{S(...k),B()}}let _=D?new Array(t.length).fill(gn):gn;const T=S=>{if(!(!(u.flags&1)||!u.dirty&&!S))if(o){const k=u.run();if(r||h||(D?k.some((b,x)=>Po(b,_[x])):Po(k,_))){v&&v();const b=qo;qo=u;try{const x=[k,_===gn?void 0:D&&_[0]===gn?[]:_,g];_=k,d?d(o,3,x):o(...x)}finally{qo=b}}}else u.run()};return l&&l(T),u=new Ju(p),u.scheduler=a?()=>a(T,!1):T,g=S=>tm(S,!1,u),v=u.onStop=()=>{const S=Mn.get(u);if(S){if(d)d(S,4);else for(const k of S)k();Mn.delete(u)}},o?n?T(!0):_=u.run():a?a(T.bind(null,!0),!0):u.run(),B.pause=u.pause.bind(u),B.resume=u.resume.bind(u),B.stop=B,B}function yo(t,o=1/0,s){if(o<=0||!Ye(t)||t.__v_skip||(s=s||new Map,(s.get(t)||0)>=o))return t;if(s.set(t,o),o--,rt(t))yo(t.value,o,s);else if(Ae(t))for(let n=0;n<t.length;n++)yo(t[n],o,s);else if(ys(t)||is(t))t.forEach(n=>{yo(n,o,s)});else if(Uu(t)){for(const n in t)yo(t[n],o,s);for(const n of Object.getOwnPropertySymbols(t))Object.prototype.propertyIsEnumerable.call(t,n)&&yo(t[n],o,s)}return t}/**
* @vue/runtime-core v3.5.22
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function en(t,o,s,n){try{return n?t(...n):t()}catch(r){Yn(r,o,s)}}function Xt(t,o,s,n){if(Me(t)){const r=en(t,o,s,n);return r&&Bu(r)&&r.catch(i=>{Yn(i,o,s)}),r}if(Ae(t)){const r=[];for(let i=0;i<t.length;i++)r.push(Xt(t[i],o,s,n));return r}}function Yn(t,o,s,n=!0){const r=o?o.vnode:null,{errorHandler:i,throwUnhandledErrorInProduction:a}=o&&o.appContext.config||Xe;if(o){let l=o.parent;const d=o.proxy,c=`https://vuejs.org/error-reference/#runtime-${s}`;for(;l;){const u=l.ec;if(u){for(let p=0;p<u.length;p++)if(u[p](t,d,c)===!1)return}l=l.parent}if(i){wo(),en(i,null,10,[t,d,c]),ko();return}}sm(t,s,r,n,a)}function sm(t,o,s,n=!0,r=!1){if(r)throw t;console.error(t)}const At=[];let so=-1;const ls=[];let Io=null,ns=0;const mc=Promise.resolve();let Rn=null;function Qo(t){const o=Rn||mc;return t?o.then(this?t.bind(this):t):o}function nm(t){let o=so+1,s=At.length;for(;o<s;){const n=o+s>>>1,r=At[n],i=Hs(r);i<t||i===t&&r.flags&2?o=n+1:s=n}return o}function ha(t){if(!(t.flags&1)){const o=Hs(t),s=At[At.length-1];!s||!(t.flags&2)&&o>=Hs(s)?At.push(t):At.splice(nm(o),0,t),t.flags|=1,gc()}}function gc(){Rn||(Rn=mc.then(vc))}function rm(t){Ae(t)?ls.push(...t):Io&&t.id===-1?Io.splice(ns+1,0,t):t.flags&1||(ls.push(t),t.flags|=1),gc()}function td(t,o,s=so+1){for(;s<At.length;s++){const n=At[s];if(n&&n.flags&2){if(t&&n.id!==t.uid)continue;At.splice(s,1),s--,n.flags&4&&(n.flags&=-2),n(),n.flags&4||(n.flags&=-2)}}}function fc(t){if(ls.length){const o=[...new Set(ls)].sort((s,n)=>Hs(s)-Hs(n));if(ls.length=0,Io){Io.push(...o);return}for(Io=o,ns=0;ns<Io.length;ns++){const s=Io[ns];s.flags&4&&(s.flags&=-2),s.flags&8||s(),s.flags&=-2}Io=null,ns=0}}const Hs=t=>t.id==null?t.flags&2?-1:1/0:t.id;function vc(t){try{for(so=0;so<At.length;so++){const o=At[so];o&&!(o.flags&8)&&(o.flags&4&&(o.flags&=-2),en(o,o.i,o.i?15:14),o.flags&4||(o.flags&=-2))}}finally{for(;so<At.length;so++){const o=At[so];o&&(o.flags&=-2)}so=-1,At.length=0,fc(),Rn=null,(At.length||ls.length)&&vc()}}let yt=null,hc=null;function Pn(t){const o=yt;return yt=t,hc=t&&t.type.__scopeId||null,o}function fe(t,o=yt,s){if(!o||t._n)return t;const n=(...r)=>{n._d&&Bn(-1);const i=Pn(o);let a;try{a=t(...r)}finally{Pn(i),n._d&&Bn(1)}return a};return n._n=!0,n._c=!0,n._d=!0,n}function de(t,o){if(yt===null)return t;const s=er(yt),n=t.dirs||(t.dirs=[]);for(let r=0;r<o.length;r++){let[i,a,l,d=Xe]=o[r];i&&(Me(i)&&(i={mounted:i,updated:i}),i.deep&&yo(a),n.push({dir:i,instance:s,value:a,oldValue:void 0,arg:l,modifiers:d}))}return t}function Fo(t,o,s,n){const r=t.dirs,i=o&&o.dirs;for(let a=0;a<r.length;a++){const l=r[a];i&&(l.oldValue=i[a].value);let d=l.dir[n];d&&(wo(),Xt(d,s,8,[t.el,l,t,o]),ko())}}const yc=Symbol("_vte"),xc=t=>t.__isTeleport,Ps=t=>t&&(t.disabled||t.disabled===""),od=t=>t&&(t.defer||t.defer===""),sd=t=>typeof SVGElement<"u"&&t instanceof SVGElement,nd=t=>typeof MathMLElement=="function"&&t instanceof MathMLElement,Nr=(t,o)=>{const s=t&&t.to;return at(s)?o?o(s):null:s},bc={name:"Teleport",__isTeleport:!0,process(t,o,s,n,r,i,a,l,d,c){const{mc:u,pc:p,pbc:v,o:{insert:g,querySelector:h,createText:D,createComment:C}}=c,B=Ps(o.props);let{shapeFlag:_,children:T,dynamicChildren:S}=o;if(t==null){const k=o.el=D(""),b=o.anchor=D("");g(k,s,n),g(b,s,n);const x=(E,O)=>{_&16&&u(T,E,O,r,i,a,l,d)},F=()=>{const E=o.target=Nr(o.props,h),O=wc(E,o,D,g);E&&(a!=="svg"&&sd(E)?a="svg":a!=="mathml"&&nd(E)&&(a="mathml"),r&&r.isCE&&(r.ce._teleportTargets||(r.ce._teleportTargets=new Set)).add(E),B||(x(E,O),kn(o,!1)))};B&&(x(s,b),kn(o,!0)),od(o.props)?(o.el.__isMounted=!1,Et(()=>{F(),delete o.el.__isMounted},i)):F()}else{if(od(o.props)&&t.el.__isMounted===!1){Et(()=>{bc.process(t,o,s,n,r,i,a,l,d,c)},i);return}o.el=t.el,o.targetStart=t.targetStart;const k=o.anchor=t.anchor,b=o.target=t.target,x=o.targetAnchor=t.targetAnchor,F=Ps(t.props),E=F?s:b,O=F?k:x;if(a==="svg"||sd(b)?a="svg":(a==="mathml"||nd(b))&&(a="mathml"),S?(v(t.dynamicChildren,S,E,r,i,a,l),ka(t,o,!0)):d||p(t,o,E,O,r,i,a,l,!1),B)F?o.props&&t.props&&o.props.to!==t.props.to&&(o.props.to=t.props.to):fn(o,s,k,c,1);else if((o.props&&o.props.to)!==(t.props&&t.props.to)){const N=o.target=Nr(o.props,h);N&&fn(o,N,null,c,0)}else F&&fn(o,b,x,c,1);kn(o,B)}},remove(t,o,s,{um:n,o:{remove:r}},i){const{shapeFlag:a,children:l,anchor:d,targetStart:c,targetAnchor:u,target:p,props:v}=t;if(p&&(r(c),r(u)),i&&r(d),a&16){const g=i||!Ps(v);for(let h=0;h<l.length;h++){const D=l[h];n(D,o,s,g,!!D.dynamicChildren)}}},move:fn,hydrate:am};function fn(t,o,s,{o:{insert:n},m:r},i=2){i===0&&n(t.targetAnchor,o,s);const{el:a,anchor:l,shapeFlag:d,children:c,props:u}=t,p=i===2;if(p&&n(a,o,s),(!p||Ps(u))&&d&16)for(let v=0;v<c.length;v++)r(c[v],o,s,2);p&&n(l,o,s)}function am(t,o,s,n,r,i,{o:{nextSibling:a,parentNode:l,querySelector:d,insert:c,createText:u}},p){function v(D,C,B,_){C.anchor=p(a(D),C,l(D),s,n,r,i),C.targetStart=B,C.targetAnchor=_}const g=o.target=Nr(o.props,d),h=Ps(o.props);if(g){const D=g._lpa||g.firstChild;if(o.shapeFlag&16)if(h)v(t,o,D,D&&a(D));else{o.anchor=a(t);let C=D;for(;C;){if(C&&C.nodeType===8){if(C.data==="teleport start anchor")o.targetStart=C;else if(C.data==="teleport anchor"){o.targetAnchor=C,g._lpa=o.targetAnchor&&a(o.targetAnchor);break}}C=a(C)}o.targetAnchor||wc(g,o,u,c),p(D&&a(D),o,g,s,n,r,i)}kn(o,h)}else h&&o.shapeFlag&16&&v(t,o,t,a(t));return o.anchor&&a(o.anchor)}const jn=bc;function kn(t,o){const s=t.ctx;if(s&&s.ut){let n,r;for(o?(n=t.el,r=t.anchor):(n=t.targetStart,r=t.targetAnchor);n&&n!==r;)n.nodeType===1&&n.setAttribute("data-v-owner",s.uid),n=n.nextSibling;s.ut()}}function wc(t,o,s,n){const r=o.targetStart=s(""),i=o.targetAnchor=s("");return r[yc]=i,t&&(n(r,t),n(i,t)),i}const fo=Symbol("_leaveCb"),vn=Symbol("_enterCb");function kc(){const t={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return Ee(()=>{t.isMounted=!0}),xa(()=>{t.isUnmounting=!0}),t}const Ft=[Function,Array],_c={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:Ft,onEnter:Ft,onAfterEnter:Ft,onEnterCancelled:Ft,onBeforeLeave:Ft,onLeave:Ft,onAfterLeave:Ft,onLeaveCancelled:Ft,onBeforeAppear:Ft,onAppear:Ft,onAfterAppear:Ft,onAppearCancelled:Ft},$c=t=>{const o=t.subTree;return o.component?$c(o.component):o},im={name:"BaseTransition",props:_c,setup(t,{slots:o}){const s=tn(),n=kc();return()=>{const r=o.default&&ya(o.default(),!0);if(!r||!r.length)return;const i=Sc(r),a=Be(t),{mode:l}=a;if(n.isLeaving)return fr(i);const d=rd(i);if(!d)return fr(i);let c=qs(d,a,n,s,p=>c=p);d.type!==_t&&es(d,c);let u=s.subTree&&rd(s.subTree);if(u&&u.type!==_t&&!Go(u,d)&&$c(s).type!==_t){let p=qs(u,a,n,s);if(es(u,p),l==="out-in"&&d.type!==_t)return n.isLeaving=!0,p.afterLeave=()=>{n.isLeaving=!1,s.job.flags&8||s.update(),delete p.afterLeave,u=void 0},fr(i);l==="in-out"&&d.type!==_t?p.delayLeave=(v,g,h)=>{const D=Dc(n,u);D[String(u.key)]=u,v[fo]=()=>{g(),v[fo]=void 0,delete c.delayedLeave,u=void 0},c.delayedLeave=()=>{h(),delete c.delayedLeave,u=void 0}}:u=void 0}else u&&(u=void 0);return i}}};function Sc(t){let o=t[0];if(t.length>1){for(const s of t)if(s.type!==_t){o=s;break}}return o}const lm=im;function Dc(t,o){const{leavingVNodes:s}=t;let n=s.get(o.type);return n||(n=Object.create(null),s.set(o.type,n)),n}function qs(t,o,s,n,r){const{appear:i,mode:a,persisted:l=!1,onBeforeEnter:d,onEnter:c,onAfterEnter:u,onEnterCancelled:p,onBeforeLeave:v,onLeave:g,onAfterLeave:h,onLeaveCancelled:D,onBeforeAppear:C,onAppear:B,onAfterAppear:_,onAppearCancelled:T}=o,S=String(t.key),k=Dc(s,t),b=(E,O)=>{E&&Xt(E,n,9,O)},x=(E,O)=>{const N=O[1];b(E,O),Ae(E)?E.every(L=>L.length<=1)&&N():E.length<=1&&N()},F={mode:a,persisted:l,beforeEnter(E){let O=d;if(!s.isMounted)if(i)O=C||d;else return;E[fo]&&E[fo](!0);const N=k[S];N&&Go(t,N)&&N.el[fo]&&N.el[fo](),b(O,[E])},enter(E){let O=c,N=u,L=p;if(!s.isMounted)if(i)O=B||c,N=_||u,L=T||p;else return;let M=!1;const X=E[vn]=ee=>{M||(M=!0,ee?b(L,[E]):b(N,[E]),F.delayedLeave&&F.delayedLeave(),E[vn]=void 0)};O?x(O,[E,X]):X()},leave(E,O){const N=String(t.key);if(E[vn]&&E[vn](!0),s.isUnmounting)return O();b(v,[E]);let L=!1;const M=E[fo]=X=>{L||(L=!0,O(),X?b(D,[E]):b(h,[E]),E[fo]=void 0,k[N]===t&&delete k[N])};k[N]=t,g?x(g,[E,M]):M()},clone(E){const O=qs(E,o,s,n,r);return r&&r(O),O}};return F}function fr(t){if(Kn(t))return t=No(t),t.children=null,t}function rd(t){if(!Kn(t))return xc(t.type)&&t.children?Sc(t.children):t;if(t.component)return t.component.subTree;const{shapeFlag:o,children:s}=t;if(s){if(o&16)return s[0];if(o&32&&Me(s.default))return s.default()}}function es(t,o){t.shapeFlag&6&&t.component?(t.transition=o,es(t.component.subTree,o)):t.shapeFlag&128?(t.ssContent.transition=o.clone(t.ssContent),t.ssFallback.transition=o.clone(t.ssFallback)):t.transition=o}function ya(t,o=!1,s){let n=[],r=0;for(let i=0;i<t.length;i++){let a=t[i];const l=s==null?a.key:String(s)+String(a.key!=null?a.key:i);a.type===he?(a.patchFlag&128&&r++,n=n.concat(ya(a.children,o,l))):(o||a.type!==_t)&&n.push(l!=null?No(a,{key:l}):a)}if(r>1)for(let i=0;i<n.length;i++)n[i].patchFlag=-2;return n}function Cc(t,o){return Me(t)?dt({name:t.name},o,{setup:t}):t}function Tc(t){t.ids=[t.ids[0]+t.ids[2]+++"-",0,0]}const Nn=new WeakMap;function js(t,o,s,n,r=!1){if(Ae(t)){t.forEach((h,D)=>js(h,o&&(Ae(o)?o[D]:o),s,n,r));return}if(ds(n)&&!r){n.shapeFlag&512&&n.type.__asyncResolved&&n.component.subTree.component&&js(t,o,s,n.component.subTree);return}const i=n.shapeFlag&4?er(n.component):n.el,a=r?null:i,{i:l,r:d}=t,c=o&&o.r,u=l.refs===Xe?l.refs={}:l.refs,p=l.setupState,v=Be(p),g=p===Xe?Lu:h=>We(v,h);if(c!=null&&c!==d){if(ad(o),at(c))u[c]=null,g(c)&&(p[c]=null);else if(rt(c)){c.value=null;const h=o;h.k&&(u[h.k]=null)}}if(Me(d))en(d,l,12,[a,u]);else{const h=at(d),D=rt(d);if(h||D){const C=()=>{if(t.f){const B=h?g(d)?p[d]:u[d]:d.value;if(r)Ae(B)&&ia(B,i);else if(Ae(B))B.includes(i)||B.push(i);else if(h)u[d]=[i],g(d)&&(p[d]=u[d]);else{const _=[i];d.value=_,t.k&&(u[t.k]=_)}}else h?(u[d]=a,g(d)&&(p[d]=a)):D&&(d.value=a,t.k&&(u[t.k]=a))};if(a){const B=()=>{C(),Nn.delete(t)};B.id=-1,Nn.set(t,B),Et(B,s)}else ad(t),C()}}}function ad(t){const o=Nn.get(t);o&&(o.flags|=8,Nn.delete(t))}Wn().requestIdleCallback;Wn().cancelIdleCallback;const ds=t=>!!t.type.__asyncLoader,Kn=t=>t.type.__isKeepAlive;function dm(t,o){Ec(t,"a",o)}function um(t,o){Ec(t,"da",o)}function Ec(t,o,s=$t){const n=t.__wdc||(t.__wdc=()=>{let r=s;for(;r;){if(r.isDeactivated)return;r=r.parent}return t()});if(Xn(o,n,s),s){let r=s.parent;for(;r&&r.parent;)Kn(r.parent.vnode)&&cm(n,o,s,r),r=r.parent}}function cm(t,o,s,n){const r=Xn(o,t,n,!0);Ut(()=>{ia(n[o],r)},s)}function Xn(t,o,s=$t,n=!1){if(s){const r=s[t]||(s[t]=[]),i=o.__weh||(o.__weh=(...a)=>{wo();const l=on(s),d=Xt(o,s,t,a);return l(),ko(),d});return n?r.unshift(i):r.push(i),i}}const _o=t=>(o,s=$t)=>{(!Js||t==="sp")&&Xn(t,(...n)=>o(...n),s)},pm=_o("bm"),Ee=_o("m"),mm=_o("bu"),Ac=_o("u"),xa=_o("bum"),Ut=_o("um"),gm=_o("sp"),fm=_o("rtg"),vm=_o("rtc");function hm(t,o=$t){Xn("ec",t,o)}const Ic="components";function He(t,o){return Rc(Ic,t,!0,o)||t}const Mc=Symbol.for("v-ndc");function xt(t){return at(t)?Rc(Ic,t,!1)||t:t||Mc}function Rc(t,o,s=!0,n=!1){const r=yt||$t;if(r){const i=r.type;{const l=ag(i,!1);if(l&&(l===o||l===Wt(o)||l===Gn(Wt(o))))return i}const a=id(r[t]||i[t],o)||id(r.appContext[t],o);return!a&&n?i:a}}function id(t,o){return t&&(t[o]||t[Wt(o)]||t[Gn(Wt(o))])}function ke(t,o,s,n){let r;const i=s,a=Ae(t);if(a||at(t)){const l=a&&bo(t);let d=!1,c=!1;l&&(d=!Ht(t),c=jo(t),t=Jn(t)),r=new Array(t.length);for(let u=0,p=t.length;u<p;u++)r[u]=o(d?c?In(ht(t[u])):ht(t[u]):t[u],u,void 0,i)}else if(typeof t=="number"){r=new Array(t);for(let l=0;l<t;l++)r[l]=o(l+1,l,void 0,i)}else if(Ye(t))if(t[Symbol.iterator])r=Array.from(t,(l,d)=>o(l,d,void 0,i));else{const l=Object.keys(t);r=new Array(l.length);for(let d=0,c=l.length;d<c;d++){const u=l[d];r[d]=o(t[u],u,d,i)}}else r=[];return r}function Dt(t,o,s={},n,r){if(yt.ce||yt.parent&&ds(yt.parent)&&yt.parent.ce){const c=Object.keys(s).length>0;return o!=="default"&&(s.name=o),m(),Re(he,null,[re("slot",s,n&&n())],c?-2:64)}let i=t[o];i&&i._c&&(i._d=!1),m();const a=i&&Pc(i(s)),l=s.key||a&&a.key,d=Re(he,{key:(l&&!Kt(l)?l:`_${o}`)+(!a&&n?"_fb":"")},a||(n?n():[]),a&&t._===1?64:-2);return!r&&d.scopeId&&(d.slotScopeIds=[d.scopeId+"-s"]),i&&i._c&&(i._d=!0),d}function Pc(t){return t.some(o=>Ws(o)?!(o.type===_t||o.type===he&&!Pc(o.children)):!0)?t:null}const Lr=t=>t?Qc(t)?er(t):Lr(t.parent):null,Ns=dt(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>Lr(t.parent),$root:t=>Lr(t.root),$host:t=>t.ce,$emit:t=>t.emit,$options:t=>Nc(t),$forceUpdate:t=>t.f||(t.f=()=>{ha(t.update)}),$nextTick:t=>t.n||(t.n=Qo.bind(t.proxy)),$watch:t=>Fm.bind(t)}),vr=(t,o)=>t!==Xe&&!t.__isScriptSetup&&We(t,o),ym={get({_:t},o){if(o==="__v_skip")return!0;const{ctx:s,setupState:n,data:r,props:i,accessCache:a,type:l,appContext:d}=t;let c;if(o[0]!=="$"){const g=a[o];if(g!==void 0)switch(g){case 1:return n[o];case 2:return r[o];case 4:return s[o];case 3:return i[o]}else{if(vr(n,o))return a[o]=1,n[o];if(r!==Xe&&We(r,o))return a[o]=2,r[o];if((c=t.propsOptions[0])&&We(c,o))return a[o]=3,i[o];if(s!==Xe&&We(s,o))return a[o]=4,s[o];Br&&(a[o]=0)}}const u=Ns[o];let p,v;if(u)return o==="$attrs"&&kt(t.attrs,"get",""),u(t);if((p=l.__cssModules)&&(p=p[o]))return p;if(s!==Xe&&We(s,o))return a[o]=4,s[o];if(v=d.config.globalProperties,We(v,o))return v[o]},set({_:t},o,s){const{data:n,setupState:r,ctx:i}=t;return vr(r,o)?(r[o]=s,!0):n!==Xe&&We(n,o)?(n[o]=s,!0):We(t.props,o)||o[0]==="$"&&o.slice(1)in t?!1:(i[o]=s,!0)},has({_:{data:t,setupState:o,accessCache:s,ctx:n,appContext:r,propsOptions:i,type:a}},l){let d,c;return!!(s[l]||t!==Xe&&l[0]!=="$"&&We(t,l)||vr(o,l)||(d=i[0])&&We(d,l)||We(n,l)||We(Ns,l)||We(r.config.globalProperties,l)||(c=a.__cssModules)&&c[l])},defineProperty(t,o,s){return s.get!=null?t._.accessCache[o]=0:We(s,"value")&&this.set(t,o,s.value,null),Reflect.defineProperty(t,o,s)}};function xm(){return bm().slots}function bm(t){const o=tn();return o.setupContext||(o.setupContext=t0(o))}function ld(t){return Ae(t)?t.reduce((o,s)=>(o[s]=null,o),{}):t}let Br=!0;function wm(t){const o=Nc(t),s=t.proxy,n=t.ctx;Br=!1,o.beforeCreate&&dd(o.beforeCreate,t,"bc");const{data:r,computed:i,methods:a,watch:l,provide:d,inject:c,created:u,beforeMount:p,mounted:v,beforeUpdate:g,updated:h,activated:D,deactivated:C,beforeDestroy:B,beforeUnmount:_,destroyed:T,unmounted:S,render:k,renderTracked:b,renderTriggered:x,errorCaptured:F,serverPrefetch:E,expose:O,inheritAttrs:N,components:L,directives:M,filters:X}=o;if(c&&km(c,n,null),a)for(const ae in a){const H=a[ae];Me(H)&&(n[ae]=H.bind(s))}if(r){const ae=r.call(s,s);Ye(ae)&&(t.data=Je(ae))}if(Br=!0,i)for(const ae in i){const H=i[ae],J=Me(H)?H.bind(s,s):Me(H.get)?H.get.bind(s,s):io,z=!Me(H)&&Me(H.set)?H.set.bind(s):io,I=te({get:J,set:z});Object.defineProperty(n,ae,{enumerable:!0,configurable:!0,get:()=>I.value,set:P=>I.value=P})}if(l)for(const ae in l)jc(l[ae],n,s,ae);if(d){const ae=Me(d)?d.call(s):d;Reflect.ownKeys(ae).forEach(H=>{Ls(H,ae[H])})}u&&dd(u,t,"c");function oe(ae,H){Ae(H)?H.forEach(J=>ae(J.bind(s))):H&&ae(H.bind(s))}if(oe(pm,p),oe(Ee,v),oe(mm,g),oe(Ac,h),oe(dm,D),oe(um,C),oe(hm,F),oe(vm,b),oe(fm,x),oe(xa,_),oe(Ut,S),oe(gm,E),Ae(O))if(O.length){const ae=t.exposed||(t.exposed={});O.forEach(H=>{Object.defineProperty(ae,H,{get:()=>s[H],set:J=>s[H]=J,enumerable:!0})})}else t.exposed||(t.exposed={});k&&t.render===io&&(t.render=k),N!=null&&(t.inheritAttrs=N),L&&(t.components=L),M&&(t.directives=M),E&&Tc(t)}function km(t,o,s=io){Ae(t)&&(t=Vr(t));for(const n in t){const r=t[n];let i;Ye(r)?"default"in r?i=qt(r.from||n,r.default,!0):i=qt(r.from||n):i=qt(r),rt(i)?Object.defineProperty(o,n,{enumerable:!0,configurable:!0,get:()=>i.value,set:a=>i.value=a}):o[n]=i}}function dd(t,o,s){Xt(Ae(t)?t.map(n=>n.bind(o.proxy)):t.bind(o.proxy),o,s)}function jc(t,o,s,n){let r=n.includes(".")?Jc(s,n):()=>s[n];if(at(t)){const i=o[t];Me(i)&&Ue(r,i)}else if(Me(t))Ue(r,t.bind(s));else if(Ye(t))if(Ae(t))t.forEach(i=>jc(i,o,s,n));else{const i=Me(t.handler)?t.handler.bind(s):o[t.handler];Me(i)&&Ue(r,i,t)}}function Nc(t){const o=t.type,{mixins:s,extends:n}=o,{mixins:r,optionsCache:i,config:{optionMergeStrategies:a}}=t.appContext,l=i.get(o);let d;return l?d=l:!r.length&&!s&&!n?d=o:(d={},r.length&&r.forEach(c=>Ln(d,c,a,!0)),Ln(d,o,a)),Ye(o)&&i.set(o,d),d}function Ln(t,o,s,n=!1){const{mixins:r,extends:i}=o;i&&Ln(t,i,s,!0),r&&r.forEach(a=>Ln(t,a,s,!0));for(const a in o)if(!(n&&a==="expose")){const l=_m[a]||s&&s[a];t[a]=l?l(t[a],o[a]):o[a]}return t}const _m={data:ud,props:cd,emits:cd,methods:As,computed:As,beforeCreate:Tt,created:Tt,beforeMount:Tt,mounted:Tt,beforeUpdate:Tt,updated:Tt,beforeDestroy:Tt,beforeUnmount:Tt,destroyed:Tt,unmounted:Tt,activated:Tt,deactivated:Tt,errorCaptured:Tt,serverPrefetch:Tt,components:As,directives:As,watch:Sm,provide:ud,inject:$m};function ud(t,o){return o?t?function(){return dt(Me(t)?t.call(this,this):t,Me(o)?o.call(this,this):o)}:o:t}function $m(t,o){return As(Vr(t),Vr(o))}function Vr(t){if(Ae(t)){const o={};for(let s=0;s<t.length;s++)o[t[s]]=t[s];return o}return t}function Tt(t,o){return t?[...new Set([].concat(t,o))]:o}function As(t,o){return t?dt(Object.create(null),t,o):o}function cd(t,o){return t?Ae(t)&&Ae(o)?[...new Set([...t,...o])]:dt(Object.create(null),ld(t),ld(o??{})):o}function Sm(t,o){if(!t)return o;if(!o)return t;const s=dt(Object.create(null),t);for(const n in o)s[n]=Tt(t[n],o[n]);return s}function Lc(){return{app:null,config:{isNativeTag:Lu,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let Dm=0;function Cm(t,o){return function(n,r=null){Me(n)||(n=dt({},n)),r!=null&&!Ye(r)&&(r=null);const i=Lc(),a=new WeakSet,l=[];let d=!1;const c=i.app={_uid:Dm++,_component:n,_props:r,_container:null,_context:i,_instance:null,version:lg,get config(){return i.config},set config(u){},use(u,...p){return a.has(u)||(u&&Me(u.install)?(a.add(u),u.install(c,...p)):Me(u)&&(a.add(u),u(c,...p))),c},mixin(u){return i.mixins.includes(u)||i.mixins.push(u),c},component(u,p){return p?(i.components[u]=p,c):i.components[u]},directive(u,p){return p?(i.directives[u]=p,c):i.directives[u]},mount(u,p,v){if(!d){const g=c._ceVNode||re(n,r);return g.appContext=i,v===!0?v="svg":v===!1&&(v=void 0),t(g,u,v),d=!0,c._container=u,u.__vue_app__=c,er(g.component)}},onUnmount(u){l.push(u)},unmount(){d&&(Xt(l,c._instance,16),t(null,c._container),delete c._container.__vue_app__)},provide(u,p){return i.provides[u]=p,c},runWithContext(u){const p=Ko;Ko=c;try{return u()}finally{Ko=p}}};return c}}let Ko=null;function Ls(t,o){if($t){let s=$t.provides;const n=$t.parent&&$t.parent.provides;n===s&&(s=$t.provides=Object.create(n)),s[t]=o}}function qt(t,o,s=!1){const n=tn();if(n||Ko){let r=Ko?Ko._context.provides:n?n.parent==null||n.ce?n.vnode.appContext&&n.vnode.appContext.provides:n.parent.provides:void 0;if(r&&t in r)return r[t];if(arguments.length>1)return s&&Me(o)?o.call(n&&n.proxy):o}}function Tm(){return!!(tn()||Ko)}const Bc={},Vc=()=>Object.create(Bc),Uc=t=>Object.getPrototypeOf(t)===Bc;function Em(t,o,s,n=!1){const r={},i=Vc();t.propsDefaults=Object.create(null),Fc(t,o,r,i);for(const a in t.propsOptions[0])a in r||(r[a]=void 0);s?t.props=n?r:lc(r):t.type.props?t.props=r:t.props=i,t.attrs=i}function Am(t,o,s,n){const{props:r,attrs:i,vnode:{patchFlag:a}}=t,l=Be(r),[d]=t.propsOptions;let c=!1;if((n||a>0)&&!(a&16)){if(a&8){const u=t.vnode.dynamicProps;for(let p=0;p<u.length;p++){let v=u[p];if(Zn(t.emitsOptions,v))continue;const g=o[v];if(d)if(We(i,v))g!==i[v]&&(i[v]=g,c=!0);else{const h=Wt(v);r[h]=Ur(d,l,h,g,t,!1)}else g!==i[v]&&(i[v]=g,c=!0)}}}else{Fc(t,o,r,i)&&(c=!0);let u;for(const p in l)(!o||!We(o,p)&&((u=Bo(p))===p||!We(o,u)))&&(d?s&&(s[p]!==void 0||s[u]!==void 0)&&(r[p]=Ur(d,l,p,void 0,t,!0)):delete r[p]);if(i!==l)for(const p in i)(!o||!We(o,p))&&(delete i[p],c=!0)}c&&ho(t.attrs,"set","")}function Fc(t,o,s,n){const[r,i]=t.propsOptions;let a=!1,l;if(o)for(let d in o){if(Is(d))continue;const c=o[d];let u;r&&We(r,u=Wt(d))?!i||!i.includes(u)?s[u]=c:(l||(l={}))[u]=c:Zn(t.emitsOptions,d)||(!(d in n)||c!==n[d])&&(n[d]=c,a=!0)}if(i){const d=Be(s),c=l||Xe;for(let u=0;u<i.length;u++){const p=i[u];s[p]=Ur(r,d,p,c[p],t,!We(c,p))}}return a}function Ur(t,o,s,n,r,i){const a=t[s];if(a!=null){const l=We(a,"default");if(l&&n===void 0){const d=a.default;if(a.type!==Function&&!a.skipFactory&&Me(d)){const{propsDefaults:c}=r;if(s in c)n=c[s];else{const u=on(r);n=c[s]=d.call(null,o),u()}}else n=d;r.ce&&r.ce._setProp(s,n)}a[0]&&(i&&!l?n=!1:a[1]&&(n===""||n===Bo(s))&&(n=!0))}return n}const Im=new WeakMap;function Oc(t,o,s=!1){const n=s?Im:o.propsCache,r=n.get(t);if(r)return r;const i=t.props,a={},l=[];let d=!1;if(!Me(t)){const u=p=>{d=!0;const[v,g]=Oc(p,o,!0);dt(a,v),g&&l.push(...g)};!s&&o.mixins.length&&o.mixins.forEach(u),t.extends&&u(t.extends),t.mixins&&t.mixins.forEach(u)}if(!i&&!d)return Ye(t)&&n.set(t,as),as;if(Ae(i))for(let u=0;u<i.length;u++){const p=Wt(i[u]);pd(p)&&(a[p]=Xe)}else if(i)for(const u in i){const p=Wt(u);if(pd(p)){const v=i[u],g=a[p]=Ae(v)||Me(v)?{type:v}:dt({},v),h=g.type;let D=!1,C=!0;if(Ae(h))for(let B=0;B<h.length;++B){const _=h[B],T=Me(_)&&_.name;if(T==="Boolean"){D=!0;break}else T==="String"&&(C=!1)}else D=Me(h)&&h.name==="Boolean";g[0]=D,g[1]=C,(D||We(g,"default"))&&l.push(p)}}const c=[a,l];return Ye(t)&&n.set(t,c),c}function pd(t){return t[0]!=="$"&&!Is(t)}const ba=t=>t==="_"||t==="_ctx"||t==="$stable",wa=t=>Ae(t)?t.map(ao):[ao(t)],Mm=(t,o,s)=>{if(o._n)return o;const n=fe((...r)=>wa(o(...r)),s);return n._c=!1,n},zc=(t,o,s)=>{const n=t._ctx;for(const r in t){if(ba(r))continue;const i=t[r];if(Me(i))o[r]=Mm(r,i,n);else if(i!=null){const a=wa(i);o[r]=()=>a}}},Hc=(t,o)=>{const s=wa(o);t.slots.default=()=>s},qc=(t,o,s)=>{for(const n in o)(s||!ba(n))&&(t[n]=o[n])},Rm=(t,o,s)=>{const n=t.slots=Vc();if(t.vnode.shapeFlag&32){const r=o._;r?(qc(n,o,s),s&&Fu(n,"_",r,!0)):zc(o,n)}else o&&Hc(t,o)},Pm=(t,o,s)=>{const{vnode:n,slots:r}=t;let i=!0,a=Xe;if(n.shapeFlag&32){const l=o._;l?s&&l===1?i=!1:qc(r,o,s):(i=!o.$stable,zc(o,r)),a=o}else o&&(Hc(t,o),a={default:1});if(i)for(const l in r)!ba(l)&&a[l]==null&&delete r[l]},Et=Ym;function jm(t){return Nm(t)}function Nm(t,o){const s=Wn();s.__VUE__=!0;const{insert:n,remove:r,patchProp:i,createElement:a,createText:l,createComment:d,setText:c,setElementText:u,parentNode:p,nextSibling:v,setScopeId:g=io,insertStaticContent:h}=t,D=(A,j,ne,K=null,q=null,le=null,se=void 0,G=null,U=!!j.dynamicChildren)=>{if(A===j)return;A&&!Go(A,j)&&(K=ge(A),P(A,q,le,!0),A=null),j.patchFlag===-2&&(U=!1,j.dynamicChildren=null);const{type:Z,ref:ye,shapeFlag:pe}=j;switch(Z){case Qn:C(A,j,ne,K);break;case _t:B(A,j,ne,K);break;case _n:A==null&&_(j,ne,K,se);break;case he:L(A,j,ne,K,q,le,se,G,U);break;default:pe&1?k(A,j,ne,K,q,le,se,G,U):pe&6?M(A,j,ne,K,q,le,se,G,U):(pe&64||pe&128)&&Z.process(A,j,ne,K,q,le,se,G,U,w)}ye!=null&&q?js(ye,A&&A.ref,le,j||A,!j):ye==null&&A&&A.ref!=null&&js(A.ref,null,le,A,!0)},C=(A,j,ne,K)=>{if(A==null)n(j.el=l(j.children),ne,K);else{const q=j.el=A.el;j.children!==A.children&&c(q,j.children)}},B=(A,j,ne,K)=>{A==null?n(j.el=d(j.children||""),ne,K):j.el=A.el},_=(A,j,ne,K)=>{[A.el,A.anchor]=h(A.children,j,ne,K,A.el,A.anchor)},T=({el:A,anchor:j},ne,K)=>{let q;for(;A&&A!==j;)q=v(A),n(A,ne,K),A=q;n(j,ne,K)},S=({el:A,anchor:j})=>{let ne;for(;A&&A!==j;)ne=v(A),r(A),A=ne;r(j)},k=(A,j,ne,K,q,le,se,G,U)=>{j.type==="svg"?se="svg":j.type==="math"&&(se="mathml"),A==null?b(j,ne,K,q,le,se,G,U):E(A,j,q,le,se,G,U)},b=(A,j,ne,K,q,le,se,G)=>{let U,Z;const{props:ye,shapeFlag:pe,transition:be,dirs:Se}=A;if(U=A.el=a(A.type,le,ye&&ye.is,ye),pe&8?u(U,A.children):pe&16&&F(A.children,U,null,K,q,hr(A,le),se,G),Se&&Fo(A,null,K,"created"),x(U,A,A.scopeId,se,K),ye){for(const Fe in ye)Fe!=="value"&&!Is(Fe)&&i(U,Fe,null,ye[Fe],le,K);"value"in ye&&i(U,"value",null,ye.value,le),(Z=ye.onVnodeBeforeMount)&&eo(Z,K,A)}Se&&Fo(A,null,K,"beforeMount");const Ie=Lm(q,be);Ie&&be.beforeEnter(U),n(U,j,ne),((Z=ye&&ye.onVnodeMounted)||Ie||Se)&&Et(()=>{Z&&eo(Z,K,A),Ie&&be.enter(U),Se&&Fo(A,null,K,"mounted")},q)},x=(A,j,ne,K,q)=>{if(ne&&g(A,ne),K)for(let le=0;le<K.length;le++)g(A,K[le]);if(q){let le=q.subTree;if(j===le||Kc(le.type)&&(le.ssContent===j||le.ssFallback===j)){const se=q.vnode;x(A,se,se.scopeId,se.slotScopeIds,q.parent)}}},F=(A,j,ne,K,q,le,se,G,U=0)=>{for(let Z=U;Z<A.length;Z++){const ye=A[Z]=G?Mo(A[Z]):ao(A[Z]);D(null,ye,j,ne,K,q,le,se,G)}},E=(A,j,ne,K,q,le,se)=>{const G=j.el=A.el;let{patchFlag:U,dynamicChildren:Z,dirs:ye}=j;U|=A.patchFlag&16;const pe=A.props||Xe,be=j.props||Xe;let Se;if(ne&&Oo(ne,!1),(Se=be.onVnodeBeforeUpdate)&&eo(Se,ne,j,A),ye&&Fo(j,A,ne,"beforeUpdate"),ne&&Oo(ne,!0),(pe.innerHTML&&be.innerHTML==null||pe.textContent&&be.textContent==null)&&u(G,""),Z?O(A.dynamicChildren,Z,G,ne,K,hr(j,q),le):se||H(A,j,G,null,ne,K,hr(j,q),le,!1),U>0){if(U&16)N(G,pe,be,ne,q);else if(U&2&&pe.class!==be.class&&i(G,"class",null,be.class,q),U&4&&i(G,"style",pe.style,be.style,q),U&8){const Ie=j.dynamicProps;for(let Fe=0;Fe<Ie.length;Fe++){const Ve=Ie[Fe],pt=pe[Ve],mt=be[Ve];(mt!==pt||Ve==="value")&&i(G,Ve,pt,mt,q,ne)}}U&1&&A.children!==j.children&&u(G,j.children)}else!se&&Z==null&&N(G,pe,be,ne,q);((Se=be.onVnodeUpdated)||ye)&&Et(()=>{Se&&eo(Se,ne,j,A),ye&&Fo(j,A,ne,"updated")},K)},O=(A,j,ne,K,q,le,se)=>{for(let G=0;G<j.length;G++){const U=A[G],Z=j[G],ye=U.el&&(U.type===he||!Go(U,Z)||U.shapeFlag&198)?p(U.el):ne;D(U,Z,ye,null,K,q,le,se,!0)}},N=(A,j,ne,K,q)=>{if(j!==ne){if(j!==Xe)for(const le in j)!Is(le)&&!(le in ne)&&i(A,le,j[le],null,q,K);for(const le in ne){if(Is(le))continue;const se=ne[le],G=j[le];se!==G&&le!=="value"&&i(A,le,G,se,q,K)}"value"in ne&&i(A,"value",j.value,ne.value,q)}},L=(A,j,ne,K,q,le,se,G,U)=>{const Z=j.el=A?A.el:l(""),ye=j.anchor=A?A.anchor:l("");let{patchFlag:pe,dynamicChildren:be,slotScopeIds:Se}=j;Se&&(G=G?G.concat(Se):Se),A==null?(n(Z,ne,K),n(ye,ne,K),F(j.children||[],ne,ye,q,le,se,G,U)):pe>0&&pe&64&&be&&A.dynamicChildren?(O(A.dynamicChildren,be,ne,q,le,se,G),(j.key!=null||q&&j===q.subTree)&&ka(A,j,!0)):H(A,j,ne,ye,q,le,se,G,U)},M=(A,j,ne,K,q,le,se,G,U)=>{j.slotScopeIds=G,A==null?j.shapeFlag&512?q.ctx.activate(j,ne,K,se,U):X(j,ne,K,q,le,se,U):ee(A,j,U)},X=(A,j,ne,K,q,le,se)=>{const G=A.component=og(A,K,q);if(Kn(A)&&(G.ctx.renderer=w),sg(G,!1,se),G.asyncDep){if(q&&q.registerDep(G,oe,se),!A.el){const U=G.subTree=re(_t);B(null,U,j,ne),A.placeholder=U.el}}else oe(G,A,j,ne,q,le,se)},ee=(A,j,ne)=>{const K=j.component=A.component;if(Wm(A,j,ne))if(K.asyncDep&&!K.asyncResolved){ae(K,j,ne);return}else K.next=j,K.update();else j.el=A.el,K.vnode=j},oe=(A,j,ne,K,q,le,se)=>{const G=()=>{if(A.isMounted){let{next:pe,bu:be,u:Se,parent:Ie,vnode:Fe}=A;{const Lt=Gc(A);if(Lt){pe&&(pe.el=Fe.el,ae(A,pe,se)),Lt.asyncDep.then(()=>{A.isUnmounted||G()});return}}let Ve=pe,pt;Oo(A,!1),pe?(pe.el=Fe.el,ae(A,pe,se)):pe=Fe,be&&wn(be),(pt=pe.props&&pe.props.onVnodeBeforeUpdate)&&eo(pt,Ie,pe,Fe),Oo(A,!0);const mt=gd(A),Nt=A.subTree;A.subTree=mt,D(Nt,mt,p(Nt.el),ge(Nt),A,q,le),pe.el=mt.el,Ve===null&&Jm(A,mt.el),Se&&Et(Se,q),(pt=pe.props&&pe.props.onVnodeUpdated)&&Et(()=>eo(pt,Ie,pe,Fe),q)}else{let pe;const{el:be,props:Se}=j,{bm:Ie,m:Fe,parent:Ve,root:pt,type:mt}=A,Nt=ds(j);Oo(A,!1),Ie&&wn(Ie),!Nt&&(pe=Se&&Se.onVnodeBeforeMount)&&eo(pe,Ve,j),Oo(A,!0);{pt.ce&&pt.ce._def.shadowRoot!==!1&&pt.ce._injectChildStyle(mt);const Lt=A.subTree=gd(A);D(null,Lt,ne,K,A,q,le),j.el=Lt.el}if(Fe&&Et(Fe,q),!Nt&&(pe=Se&&Se.onVnodeMounted)){const Lt=j;Et(()=>eo(pe,Ve,Lt),q)}(j.shapeFlag&256||Ve&&ds(Ve.vnode)&&Ve.vnode.shapeFlag&256)&&A.a&&Et(A.a,q),A.isMounted=!0,j=ne=K=null}};A.scope.on();const U=A.effect=new Ju(G);A.scope.off();const Z=A.update=U.run.bind(U),ye=A.job=U.runIfDirty.bind(U);ye.i=A,ye.id=A.uid,U.scheduler=()=>ha(ye),Oo(A,!0),Z()},ae=(A,j,ne)=>{j.component=A;const K=A.vnode.props;A.vnode=j,A.next=null,Am(A,j.props,K,ne),Pm(A,j.children,ne),wo(),td(A),ko()},H=(A,j,ne,K,q,le,se,G,U=!1)=>{const Z=A&&A.children,ye=A?A.shapeFlag:0,pe=j.children,{patchFlag:be,shapeFlag:Se}=j;if(be>0){if(be&128){z(Z,pe,ne,K,q,le,se,G,U);return}else if(be&256){J(Z,pe,ne,K,q,le,se,G,U);return}}Se&8?(ye&16&&De(Z,q,le),pe!==Z&&u(ne,pe)):ye&16?Se&16?z(Z,pe,ne,K,q,le,se,G,U):De(Z,q,le,!0):(ye&8&&u(ne,""),Se&16&&F(pe,ne,K,q,le,se,G,U))},J=(A,j,ne,K,q,le,se,G,U)=>{A=A||as,j=j||as;const Z=A.length,ye=j.length,pe=Math.min(Z,ye);let be;for(be=0;be<pe;be++){const Se=j[be]=U?Mo(j[be]):ao(j[be]);D(A[be],Se,ne,null,q,le,se,G,U)}Z>ye?De(A,q,le,!0,!1,pe):F(j,ne,K,q,le,se,G,U,pe)},z=(A,j,ne,K,q,le,se,G,U)=>{let Z=0;const ye=j.length;let pe=A.length-1,be=ye-1;for(;Z<=pe&&Z<=be;){const Se=A[Z],Ie=j[Z]=U?Mo(j[Z]):ao(j[Z]);if(Go(Se,Ie))D(Se,Ie,ne,null,q,le,se,G,U);else break;Z++}for(;Z<=pe&&Z<=be;){const Se=A[pe],Ie=j[be]=U?Mo(j[be]):ao(j[be]);if(Go(Se,Ie))D(Se,Ie,ne,null,q,le,se,G,U);else break;pe--,be--}if(Z>pe){if(Z<=be){const Se=be+1,Ie=Se<ye?j[Se].el:K;for(;Z<=be;)D(null,j[Z]=U?Mo(j[Z]):ao(j[Z]),ne,Ie,q,le,se,G,U),Z++}}else if(Z>be)for(;Z<=pe;)P(A[Z],q,le,!0),Z++;else{const Se=Z,Ie=Z,Fe=new Map;for(Z=Ie;Z<=be;Z++){const bt=j[Z]=U?Mo(j[Z]):ao(j[Z]);bt.key!=null&&Fe.set(bt.key,Z)}let Ve,pt=0;const mt=be-Ie+1;let Nt=!1,Lt=0;const $o=new Array(mt);for(Z=0;Z<mt;Z++)$o[Z]=0;for(Z=Se;Z<=pe;Z++){const bt=A[Z];if(pt>=mt){P(bt,q,le,!0);continue}let Bt;if(bt.key!=null)Bt=Fe.get(bt.key);else for(Ve=Ie;Ve<=be;Ve++)if($o[Ve-Ie]===0&&Go(bt,j[Ve])){Bt=Ve;break}Bt===void 0?P(bt,q,le,!0):($o[Bt-Ie]=Z+1,Bt>=Lt?Lt=Bt:Nt=!0,D(bt,j[Bt],ne,null,q,le,se,G,U),pt++)}const ws=Nt?Bm($o):as;for(Ve=ws.length-1,Z=mt-1;Z>=0;Z--){const bt=Ie+Z,Bt=j[bt],ks=j[bt+1],_s=bt+1<ye?ks.el||ks.placeholder:K;$o[Z]===0?D(null,Bt,ne,_s,q,le,se,G,U):Nt&&(Ve<0||Z!==ws[Ve]?I(Bt,ne,_s,2):Ve--)}}},I=(A,j,ne,K,q=null)=>{const{el:le,type:se,transition:G,children:U,shapeFlag:Z}=A;if(Z&6){I(A.component.subTree,j,ne,K);return}if(Z&128){A.suspense.move(j,ne,K);return}if(Z&64){se.move(A,j,ne,w);return}if(se===he){n(le,j,ne);for(let pe=0;pe<U.length;pe++)I(U[pe],j,ne,K);n(A.anchor,j,ne);return}if(se===_n){T(A,j,ne);return}if(K!==2&&Z&1&&G)if(K===0)G.beforeEnter(le),n(le,j,ne),Et(()=>G.enter(le),q);else{const{leave:pe,delayLeave:be,afterLeave:Se}=G,Ie=()=>{A.ctx.isUnmounted?r(le):n(le,j,ne)},Fe=()=>{le._isLeaving&&le[fo](!0),pe(le,()=>{Ie(),Se&&Se()})};be?be(le,Ie,Fe):Fe()}else n(le,j,ne)},P=(A,j,ne,K=!1,q=!1)=>{const{type:le,props:se,ref:G,children:U,dynamicChildren:Z,shapeFlag:ye,patchFlag:pe,dirs:be,cacheIndex:Se}=A;if(pe===-2&&(q=!1),G!=null&&(wo(),js(G,null,ne,A,!0),ko()),Se!=null&&(j.renderCache[Se]=void 0),ye&256){j.ctx.deactivate(A);return}const Ie=ye&1&&be,Fe=!ds(A);let Ve;if(Fe&&(Ve=se&&se.onVnodeBeforeUnmount)&&eo(Ve,j,A),ye&6)me(A.component,ne,K);else{if(ye&128){A.suspense.unmount(ne,K);return}Ie&&Fo(A,null,j,"beforeUnmount"),ye&64?A.type.remove(A,j,ne,w,K):Z&&!Z.hasOnce&&(le!==he||pe>0&&pe&64)?De(Z,j,ne,!1,!0):(le===he&&pe&384||!q&&ye&16)&&De(U,j,ne),K&&W(A)}(Fe&&(Ve=se&&se.onVnodeUnmounted)||Ie)&&Et(()=>{Ve&&eo(Ve,j,A),Ie&&Fo(A,null,j,"unmounted")},ne)},W=A=>{const{type:j,el:ne,anchor:K,transition:q}=A;if(j===he){we(ne,K);return}if(j===_n){S(A);return}const le=()=>{r(ne),q&&!q.persisted&&q.afterLeave&&q.afterLeave()};if(A.shapeFlag&1&&q&&!q.persisted){const{leave:se,delayLeave:G}=q,U=()=>se(ne,le);G?G(A.el,le,U):U()}else le()},we=(A,j)=>{let ne;for(;A!==j;)ne=v(A),r(A),A=ne;r(j)},me=(A,j,ne)=>{const{bum:K,scope:q,job:le,subTree:se,um:G,m:U,a:Z}=A;md(U),md(Z),K&&wn(K),q.stop(),le&&(le.flags|=8,P(se,A,j,ne)),G&&Et(G,j),Et(()=>{A.isUnmounted=!0},j)},De=(A,j,ne,K=!1,q=!1,le=0)=>{for(let se=le;se<A.length;se++)P(A[se],j,ne,K,q)},ge=A=>{if(A.shapeFlag&6)return ge(A.component.subTree);if(A.shapeFlag&128)return A.suspense.next();const j=v(A.anchor||A.el),ne=j&&j[yc];return ne?v(ne):j};let ue=!1;const $=(A,j,ne)=>{A==null?j._vnode&&P(j._vnode,null,null,!0):D(j._vnode||null,A,j,null,null,null,ne),j._vnode=A,ue||(ue=!0,td(),fc(),ue=!1)},w={p:D,um:P,m:I,r:W,mt:X,mc:F,pc:H,pbc:O,n:ge,o:t};return{render:$,hydrate:void 0,createApp:Cm($)}}function hr({type:t,props:o},s){return s==="svg"&&t==="foreignObject"||s==="mathml"&&t==="annotation-xml"&&o&&o.encoding&&o.encoding.includes("html")?void 0:s}function Oo({effect:t,job:o},s){s?(t.flags|=32,o.flags|=4):(t.flags&=-33,o.flags&=-5)}function Lm(t,o){return(!t||t&&!t.pendingBranch)&&o&&!o.persisted}function ka(t,o,s=!1){const n=t.children,r=o.children;if(Ae(n)&&Ae(r))for(let i=0;i<n.length;i++){const a=n[i];let l=r[i];l.shapeFlag&1&&!l.dynamicChildren&&((l.patchFlag<=0||l.patchFlag===32)&&(l=r[i]=Mo(r[i]),l.el=a.el),!s&&l.patchFlag!==-2&&ka(a,l)),l.type===Qn&&l.patchFlag!==-1&&(l.el=a.el),l.type===_t&&!l.el&&(l.el=a.el)}}function Bm(t){const o=t.slice(),s=[0];let n,r,i,a,l;const d=t.length;for(n=0;n<d;n++){const c=t[n];if(c!==0){if(r=s[s.length-1],t[r]<c){o[n]=r,s.push(n);continue}for(i=0,a=s.length-1;i<a;)l=i+a>>1,t[s[l]]<c?i=l+1:a=l;c<t[s[i]]&&(i>0&&(o[n]=s[i-1]),s[i]=n)}}for(i=s.length,a=s[i-1];i-- >0;)s[i]=a,a=o[a];return s}function Gc(t){const o=t.subTree.component;if(o)return o.asyncDep&&!o.asyncResolved?o:Gc(o)}function md(t){if(t)for(let o=0;o<t.length;o++)t[o].flags|=8}const Vm=Symbol.for("v-scx"),Um=()=>qt(Vm);function Ue(t,o,s){return Wc(t,o,s)}function Wc(t,o,s=Xe){const{immediate:n,deep:r,flush:i,once:a}=s,l=dt({},s),d=o&&n||!o&&i!=="post";let c;if(Js){if(i==="sync"){const g=Um();c=g.__watcherHandles||(g.__watcherHandles=[])}else if(!d){const g=()=>{};return g.stop=io,g.resume=io,g.pause=io,g}}const u=$t;l.call=(g,h,D)=>Xt(g,u,h,D);let p=!1;i==="post"?l.scheduler=g=>{Et(g,u&&u.suspense)}:i!=="sync"&&(p=!0,l.scheduler=(g,h)=>{h?g():ha(g)}),l.augmentJob=g=>{o&&(g.flags|=4),p&&(g.flags|=2,u&&(g.id=u.uid,g.i=u))};const v=om(t,o,l);return Js&&(c?c.push(v):d&&v()),v}function Fm(t,o,s){const n=this.proxy,r=at(t)?t.includes(".")?Jc(n,t):()=>n[t]:t.bind(n,n);let i;Me(o)?i=o:(i=o.handler,s=o);const a=on(this),l=Wc(r,i.bind(n),s);return a(),l}function Jc(t,o){const s=o.split(".");return()=>{let n=t;for(let r=0;r<s.length&&n;r++)n=n[s[r]];return n}}const Om=(t,o)=>o==="modelValue"||o==="model-value"?t.modelModifiers:t[`${o}Modifiers`]||t[`${Wt(o)}Modifiers`]||t[`${Bo(o)}Modifiers`];function zm(t,o,...s){if(t.isUnmounted)return;const n=t.vnode.props||Xe;let r=s;const i=o.startsWith("update:"),a=i&&Om(n,o.slice(7));a&&(a.trim&&(r=s.map(u=>at(u)?u.trim():u)),a.number&&(r=s.map(En)));let l,d=n[l=ur(o)]||n[l=ur(Wt(o))];!d&&i&&(d=n[l=ur(Bo(o))]),d&&Xt(d,t,6,r);const c=n[l+"Once"];if(c){if(!t.emitted)t.emitted={};else if(t.emitted[l])return;t.emitted[l]=!0,Xt(c,t,6,r)}}const Hm=new WeakMap;function Yc(t,o,s=!1){const n=s?Hm:o.emitsCache,r=n.get(t);if(r!==void 0)return r;const i=t.emits;let a={},l=!1;if(!Me(t)){const d=c=>{const u=Yc(c,o,!0);u&&(l=!0,dt(a,u))};!s&&o.mixins.length&&o.mixins.forEach(d),t.extends&&d(t.extends),t.mixins&&t.mixins.forEach(d)}return!i&&!l?(Ye(t)&&n.set(t,null),null):(Ae(i)?i.forEach(d=>a[d]=null):dt(a,i),Ye(t)&&n.set(t,a),a)}function Zn(t,o){return!t||!Hn(o)?!1:(o=o.slice(2).replace(/Once$/,""),We(t,o[0].toLowerCase()+o.slice(1))||We(t,Bo(o))||We(t,o))}function gd(t){const{type:o,vnode:s,proxy:n,withProxy:r,propsOptions:[i],slots:a,attrs:l,emit:d,render:c,renderCache:u,props:p,data:v,setupState:g,ctx:h,inheritAttrs:D}=t,C=Pn(t);let B,_;try{if(s.shapeFlag&4){const S=r||n,k=S;B=ao(c.call(k,S,u,p,g,v,h)),_=l}else{const S=o;B=ao(S.length>1?S(p,{attrs:l,slots:a,emit:d}):S(p,null)),_=o.props?l:qm(l)}}catch(S){Bs.length=0,Yn(S,t,1),B=re(_t)}let T=B;if(_&&D!==!1){const S=Object.keys(_),{shapeFlag:k}=T;S.length&&k&7&&(i&&S.some(aa)&&(_=Gm(_,i)),T=No(T,_,!1,!0))}return s.dirs&&(T=No(T,null,!1,!0),T.dirs=T.dirs?T.dirs.concat(s.dirs):s.dirs),s.transition&&es(T,s.transition),B=T,Pn(C),B}const qm=t=>{let o;for(const s in t)(s==="class"||s==="style"||Hn(s))&&((o||(o={}))[s]=t[s]);return o},Gm=(t,o)=>{const s={};for(const n in t)(!aa(n)||!(n.slice(9)in o))&&(s[n]=t[n]);return s};function Wm(t,o,s){const{props:n,children:r,component:i}=t,{props:a,children:l,patchFlag:d}=o,c=i.emitsOptions;if(o.dirs||o.transition)return!0;if(s&&d>=0){if(d&1024)return!0;if(d&16)return n?fd(n,a,c):!!a;if(d&8){const u=o.dynamicProps;for(let p=0;p<u.length;p++){const v=u[p];if(a[v]!==n[v]&&!Zn(c,v))return!0}}}else return(r||l)&&(!l||!l.$stable)?!0:n===a?!1:n?a?fd(n,a,c):!0:!!a;return!1}function fd(t,o,s){const n=Object.keys(o);if(n.length!==Object.keys(t).length)return!0;for(let r=0;r<n.length;r++){const i=n[r];if(o[i]!==t[i]&&!Zn(s,i))return!0}return!1}function Jm({vnode:t,parent:o},s){for(;o;){const n=o.subTree;if(n.suspense&&n.suspense.activeBranch===t&&(n.el=t.el),n===t)(t=o.vnode).el=s,o=o.parent;else break}}const Kc=t=>t.__isSuspense;function Ym(t,o){o&&o.pendingBranch?Ae(t)?o.effects.push(...t):o.effects.push(t):rm(t)}const he=Symbol.for("v-fgt"),Qn=Symbol.for("v-txt"),_t=Symbol.for("v-cmt"),_n=Symbol.for("v-stc"),Bs=[];let Vt=null;function m(t=!1){Bs.push(Vt=t?null:[])}function Km(){Bs.pop(),Vt=Bs[Bs.length-1]||null}let Gs=1;function Bn(t,o=!1){Gs+=t,t<0&&Vt&&o&&(Vt.hasOnce=!0)}function Xc(t){return t.dynamicChildren=Gs>0?Vt||as:null,Km(),Gs>0&&Vt&&Vt.push(t),t}function f(t,o,s,n,r,i){return Xc(e(t,o,s,n,r,i,!0))}function Re(t,o,s,n,r){return Xc(re(t,o,s,n,r,!0))}function Ws(t){return t?t.__v_isVNode===!0:!1}function Go(t,o){return t.type===o.type&&t.key===o.key}const Zc=({key:t})=>t??null,$n=({ref:t,ref_key:o,ref_for:s})=>(typeof t=="number"&&(t=""+t),t!=null?at(t)||rt(t)||Me(t)?{i:yt,r:t,k:o,f:!!s}:t:null);function e(t,o=null,s=null,n=0,r=null,i=t===he?0:1,a=!1,l=!1){const d={__v_isVNode:!0,__v_skip:!0,type:t,props:o,key:o&&Zc(o),ref:o&&$n(o),scopeId:hc,slotScopeIds:null,children:s,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:i,patchFlag:n,dynamicProps:r,dynamicChildren:null,appContext:null,ctx:yt};return l?(_a(d,s),i&128&&t.normalize(d)):s&&(d.shapeFlag|=at(s)?8:16),Gs>0&&!a&&Vt&&(d.patchFlag>0||i&6)&&d.patchFlag!==32&&Vt.push(d),d}const re=Xm;function Xm(t,o=null,s=null,n=0,r=null,i=!1){if((!t||t===Mc)&&(t=_t),Ws(t)){const l=No(t,o,!0);return s&&_a(l,s),Gs>0&&!i&&Vt&&(l.shapeFlag&6?Vt[Vt.indexOf(t)]=l:Vt.push(l)),l.patchFlag=-2,l}if(ig(t)&&(t=t.__vccOpts),o){o=Zm(o);let{class:l,style:d}=o;l&&!at(l)&&(o.class=ie(l)),Ye(d)&&(va(d)&&!Ae(d)&&(d=dt({},d)),o.style=Pt(d))}const a=at(t)?1:Kc(t)?128:xc(t)?64:Ye(t)?4:Me(t)?2:0;return e(t,o,s,n,r,a,i,!0)}function Zm(t){return t?va(t)||Uc(t)?dt({},t):t:null}function No(t,o,s=!1,n=!1){const{props:r,ref:i,patchFlag:a,children:l,transition:d}=t,c=o?Qm(r||{},o):r,u={__v_isVNode:!0,__v_skip:!0,type:t.type,props:c,key:c&&Zc(c),ref:o&&o.ref?s&&i?Ae(i)?i.concat($n(o)):[i,$n(o)]:$n(o):i,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:l,target:t.target,targetStart:t.targetStart,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:o&&t.type!==he?a===-1?16:a|16:a,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:d,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&No(t.ssContent),ssFallback:t.ssFallback&&No(t.ssFallback),placeholder:t.placeholder,el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce};return d&&n&&es(u,d.clone(u)),u}function Q(t=" ",o=0){return re(Qn,null,t,o)}function $e(t,o){const s=re(_n,null,t);return s.staticCount=o,s}function Y(t="",o=!1){return o?(m(),Re(_t,null,t)):re(_t,null,t)}function ao(t){return t==null||typeof t=="boolean"?re(_t):Ae(t)?re(he,null,t.slice()):Ws(t)?Mo(t):re(Qn,null,String(t))}function Mo(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:No(t)}function _a(t,o){let s=0;const{shapeFlag:n}=t;if(o==null)o=null;else if(Ae(o))s=16;else if(typeof o=="object")if(n&65){const r=o.default;r&&(r._c&&(r._d=!1),_a(t,r()),r._c&&(r._d=!0));return}else{s=32;const r=o._;!r&&!Uc(o)?o._ctx=yt:r===3&&yt&&(yt.slots._===1?o._=1:(o._=2,t.patchFlag|=1024))}else Me(o)?(o={default:o,_ctx:yt},s=32):(o=String(o),n&64?(s=16,o=[Q(o)]):s=8);t.children=o,t.shapeFlag|=s}function Qm(...t){const o={};for(let s=0;s<t.length;s++){const n=t[s];for(const r in n)if(r==="class")o.class!==n.class&&(o.class=ie([o.class,n.class]));else if(r==="style")o.style=Pt([o.style,n.style]);else if(Hn(r)){const i=o[r],a=n[r];a&&i!==a&&!(Ae(i)&&i.includes(a))&&(o[r]=i?[].concat(i,a):a)}else r!==""&&(o[r]=n[r])}return o}function eo(t,o,s,n=null){Xt(t,o,7,[s,n])}const eg=Lc();let tg=0;function og(t,o,s){const n=t.type,r=(o?o.appContext:t.appContext)||eg,i={uid:tg++,vnode:t,type:n,parent:o,appContext:r,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new qu(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:o?o.provides:Object.create(r.provides),ids:o?o.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Oc(n,r),emitsOptions:Yc(n,r),emit:null,emitted:null,propsDefaults:Xe,inheritAttrs:n.inheritAttrs,ctx:Xe,data:Xe,props:Xe,attrs:Xe,slots:Xe,refs:Xe,setupState:Xe,setupContext:null,suspense:s,suspenseId:s?s.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return i.ctx={_:i},i.root=o?o.root:i,i.emit=zm.bind(null,i),t.ce&&t.ce(i),i}let $t=null;const tn=()=>$t||yt;let Vn,Fr;{const t=Wn(),o=(s,n)=>{let r;return(r=t[s])||(r=t[s]=[]),r.push(n),i=>{r.length>1?r.forEach(a=>a(i)):r[0](i)}};Vn=o("__VUE_INSTANCE_SETTERS__",s=>$t=s),Fr=o("__VUE_SSR_SETTERS__",s=>Js=s)}const on=t=>{const o=$t;return Vn(t),t.scope.on(),()=>{t.scope.off(),Vn(o)}},vd=()=>{$t&&$t.scope.off(),Vn(null)};function Qc(t){return t.vnode.shapeFlag&4}let Js=!1;function sg(t,o=!1,s=!1){o&&Fr(o);const{props:n,children:r}=t.vnode,i=Qc(t);Em(t,n,i,o),Rm(t,r,s||o);const a=i?ng(t,o):void 0;return o&&Fr(!1),a}function ng(t,o){const s=t.type;t.accessCache=Object.create(null),t.proxy=new Proxy(t.ctx,ym);const{setup:n}=s;if(n){wo();const r=t.setupContext=n.length>1?t0(t):null,i=on(t),a=en(n,t,0,[t.props,r]),l=Bu(a);if(ko(),i(),(l||t.sp)&&!ds(t)&&Tc(t),l){if(a.then(vd,vd),o)return a.then(d=>{hd(t,d)}).catch(d=>{Yn(d,t,0)});t.asyncDep=a}else hd(t,a)}else e0(t)}function hd(t,o,s){Me(o)?t.type.__ssrInlineRender?t.ssrRender=o:t.render=o:Ye(o)&&(t.setupState=uc(o)),e0(t)}function e0(t,o,s){const n=t.type;t.render||(t.render=n.render||io);{const r=on(t);wo();try{wm(t)}finally{ko(),r()}}}const rg={get(t,o){return kt(t,"get",""),t[o]}};function t0(t){const o=s=>{t.exposed=s||{}};return{attrs:new Proxy(t.attrs,rg),slots:t.slots,emit:t.emit,expose:o}}function er(t){return t.exposed?t.exposeProxy||(t.exposeProxy=new Proxy(uc(Wo(t.exposed)),{get(o,s){if(s in o)return o[s];if(s in Ns)return Ns[s](t)},has(o,s){return s in o||s in Ns}})):t.proxy}function ag(t,o=!0){return Me(t)?t.displayName||t.name:t.name||o&&t.__name}function ig(t){return Me(t)&&"__vccOpts"in t}const te=(t,o)=>em(t,o,Js);function zt(t,o,s){try{Bn(-1);const n=arguments.length;return n===2?Ye(o)&&!Ae(o)?Ws(o)?re(t,null,[o]):re(t,o):re(t,null,o):(n>3?s=Array.prototype.slice.call(arguments,2):n===3&&Ws(s)&&(s=[s]),re(t,o,s))}finally{Bn(1)}}const lg="3.5.22";/**
* @vue/runtime-dom v3.5.22
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Or;const yd=typeof window<"u"&&window.trustedTypes;if(yd)try{Or=yd.createPolicy("vue",{createHTML:t=>t})}catch{}const o0=Or?t=>Or.createHTML(t):t=>t,dg="http://www.w3.org/2000/svg",ug="http://www.w3.org/1998/Math/MathML",go=typeof document<"u"?document:null,xd=go&&go.createElement("template"),cg={insert:(t,o,s)=>{o.insertBefore(t,s||null)},remove:t=>{const o=t.parentNode;o&&o.removeChild(t)},createElement:(t,o,s,n)=>{const r=o==="svg"?go.createElementNS(dg,t):o==="mathml"?go.createElementNS(ug,t):s?go.createElement(t,{is:s}):go.createElement(t);return t==="select"&&n&&n.multiple!=null&&r.setAttribute("multiple",n.multiple),r},createText:t=>go.createTextNode(t),createComment:t=>go.createComment(t),setText:(t,o)=>{t.nodeValue=o},setElementText:(t,o)=>{t.textContent=o},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>go.querySelector(t),setScopeId(t,o){t.setAttribute(o,"")},insertStaticContent(t,o,s,n,r,i){const a=s?s.previousSibling:o.lastChild;if(r&&(r===i||r.nextSibling))for(;o.insertBefore(r.cloneNode(!0),s),!(r===i||!(r=r.nextSibling)););else{xd.innerHTML=o0(n==="svg"?`<svg>${t}</svg>`:n==="mathml"?`<math>${t}</math>`:t);const l=xd.content;if(n==="svg"||n==="mathml"){const d=l.firstChild;for(;d.firstChild;)l.appendChild(d.firstChild);l.removeChild(d)}o.insertBefore(l,s)}return[a?a.nextSibling:o.firstChild,s?s.previousSibling:o.lastChild]}},So="transition",Ss="animation",ps=Symbol("_vtc"),s0={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},n0=dt({},_c,s0),pg=t=>(t.displayName="Transition",t.props=n0,t),It=pg((t,{slots:o})=>zt(lm,r0(t),o)),zo=(t,o=[])=>{Ae(t)?t.forEach(s=>s(...o)):t&&t(...o)},bd=t=>t?Ae(t)?t.some(o=>o.length>1):t.length>1:!1;function r0(t){const o={};for(const L in t)L in s0||(o[L]=t[L]);if(t.css===!1)return o;const{name:s="v",type:n,duration:r,enterFromClass:i=`${s}-enter-from`,enterActiveClass:a=`${s}-enter-active`,enterToClass:l=`${s}-enter-to`,appearFromClass:d=i,appearActiveClass:c=a,appearToClass:u=l,leaveFromClass:p=`${s}-leave-from`,leaveActiveClass:v=`${s}-leave-active`,leaveToClass:g=`${s}-leave-to`}=t,h=mg(r),D=h&&h[0],C=h&&h[1],{onBeforeEnter:B,onEnter:_,onEnterCancelled:T,onLeave:S,onLeaveCancelled:k,onBeforeAppear:b=B,onAppear:x=_,onAppearCancelled:F=T}=o,E=(L,M,X,ee)=>{L._enterCancelled=ee,To(L,M?u:l),To(L,M?c:a),X&&X()},O=(L,M)=>{L._isLeaving=!1,To(L,p),To(L,g),To(L,v),M&&M()},N=L=>(M,X)=>{const ee=L?x:_,oe=()=>E(M,L,X);zo(ee,[M,oe]),wd(()=>{To(M,L?d:i),oo(M,L?u:l),bd(ee)||kd(M,n,D,oe)})};return dt(o,{onBeforeEnter(L){zo(B,[L]),oo(L,i),oo(L,a)},onBeforeAppear(L){zo(b,[L]),oo(L,d),oo(L,c)},onEnter:N(!1),onAppear:N(!0),onLeave(L,M){L._isLeaving=!0;const X=()=>O(L,M);oo(L,p),L._enterCancelled?(oo(L,v),zr(L)):(zr(L),oo(L,v)),wd(()=>{L._isLeaving&&(To(L,p),oo(L,g),bd(S)||kd(L,n,C,X))}),zo(S,[L,X])},onEnterCancelled(L){E(L,!1,void 0,!0),zo(T,[L])},onAppearCancelled(L){E(L,!0,void 0,!0),zo(F,[L])},onLeaveCancelled(L){O(L),zo(k,[L])}})}function mg(t){if(t==null)return null;if(Ye(t))return[yr(t.enter),yr(t.leave)];{const o=yr(t);return[o,o]}}function yr(t){return xp(t)}function oo(t,o){o.split(/\s+/).forEach(s=>s&&t.classList.add(s)),(t[ps]||(t[ps]=new Set)).add(o)}function To(t,o){o.split(/\s+/).forEach(n=>n&&t.classList.remove(n));const s=t[ps];s&&(s.delete(o),s.size||(t[ps]=void 0))}function wd(t){requestAnimationFrame(()=>{requestAnimationFrame(t)})}let gg=0;function kd(t,o,s,n){const r=t._endId=++gg,i=()=>{r===t._endId&&n()};if(s!=null)return setTimeout(i,s);const{type:a,timeout:l,propCount:d}=a0(t,o);if(!a)return n();const c=a+"end";let u=0;const p=()=>{t.removeEventListener(c,v),i()},v=g=>{g.target===t&&++u>=d&&p()};setTimeout(()=>{u<d&&p()},l+1),t.addEventListener(c,v)}function a0(t,o){const s=window.getComputedStyle(t),n=h=>(s[h]||"").split(", "),r=n(`${So}Delay`),i=n(`${So}Duration`),a=_d(r,i),l=n(`${Ss}Delay`),d=n(`${Ss}Duration`),c=_d(l,d);let u=null,p=0,v=0;o===So?a>0&&(u=So,p=a,v=i.length):o===Ss?c>0&&(u=Ss,p=c,v=d.length):(p=Math.max(a,c),u=p>0?a>c?So:Ss:null,v=u?u===So?i.length:d.length:0);const g=u===So&&/\b(?:transform|all)(?:,|$)/.test(n(`${So}Property`).toString());return{type:u,timeout:p,propCount:v,hasTransform:g}}function _d(t,o){for(;t.length<o.length;)t=t.concat(t);return Math.max(...o.map((s,n)=>$d(s)+$d(t[n])))}function $d(t){return t==="auto"?0:Number(t.slice(0,-1).replace(",","."))*1e3}function zr(t){return(t?t.ownerDocument:document).body.offsetHeight}function fg(t,o,s){const n=t[ps];n&&(o=(o?[o,...n]:[...n]).join(" ")),o==null?t.removeAttribute("class"):s?t.setAttribute("class",o):t.className=o}const Un=Symbol("_vod"),i0=Symbol("_vsh"),us={name:"show",beforeMount(t,{value:o},{transition:s}){t[Un]=t.style.display==="none"?"":t.style.display,s&&o?s.beforeEnter(t):Ds(t,o)},mounted(t,{value:o},{transition:s}){s&&o&&s.enter(t)},updated(t,{value:o,oldValue:s},{transition:n}){!o!=!s&&(n?o?(n.beforeEnter(t),Ds(t,!0),n.enter(t)):n.leave(t,()=>{Ds(t,!1)}):Ds(t,o))},beforeUnmount(t,{value:o}){Ds(t,o)}};function Ds(t,o){t.style.display=o?t[Un]:"none",t[i0]=!o}const vg=Symbol(""),hg=/(?:^|;)\s*display\s*:/;function yg(t,o,s){const n=t.style,r=at(s);let i=!1;if(s&&!r){if(o)if(at(o))for(const a of o.split(";")){const l=a.slice(0,a.indexOf(":")).trim();s[l]==null&&Sn(n,l,"")}else for(const a in o)s[a]==null&&Sn(n,a,"");for(const a in s)a==="display"&&(i=!0),Sn(n,a,s[a])}else if(r){if(o!==s){const a=n[vg];a&&(s+=";"+a),n.cssText=s,i=hg.test(s)}}else o&&t.removeAttribute("style");Un in t&&(t[Un]=i?n.display:"",t[i0]&&(n.display="none"))}const Sd=/\s*!important$/;function Sn(t,o,s){if(Ae(s))s.forEach(n=>Sn(t,o,n));else if(s==null&&(s=""),o.startsWith("--"))t.setProperty(o,s);else{const n=xg(t,o);Sd.test(s)?t.setProperty(Bo(n),s.replace(Sd,""),"important"):t[n]=s}}const Dd=["Webkit","Moz","ms"],xr={};function xg(t,o){const s=xr[o];if(s)return s;let n=Wt(o);if(n!=="filter"&&n in t)return xr[o]=n;n=Gn(n);for(let r=0;r<Dd.length;r++){const i=Dd[r]+n;if(i in t)return xr[o]=i}return o}const Cd="http://www.w3.org/1999/xlink";function Td(t,o,s,n,r,i=Sp(o)){n&&o.startsWith("xlink:")?s==null?t.removeAttributeNS(Cd,o.slice(6,o.length)):t.setAttributeNS(Cd,o,s):s==null||i&&!Ou(s)?t.removeAttribute(o):t.setAttribute(o,i?"":Kt(s)?String(s):s)}function Ed(t,o,s,n,r){if(o==="innerHTML"||o==="textContent"){s!=null&&(t[o]=o==="innerHTML"?o0(s):s);return}const i=t.tagName;if(o==="value"&&i!=="PROGRESS"&&!i.includes("-")){const l=i==="OPTION"?t.getAttribute("value")||"":t.value,d=s==null?t.type==="checkbox"?"on":"":String(s);(l!==d||!("_value"in t))&&(t.value=d),s==null&&t.removeAttribute(o),t._value=s;return}let a=!1;if(s===""||s==null){const l=typeof t[o];l==="boolean"?s=Ou(s):s==null&&l==="string"?(s="",a=!0):l==="number"&&(s=0,a=!0)}try{t[o]=s}catch{}a&&t.removeAttribute(r||o)}function xo(t,o,s,n){t.addEventListener(o,s,n)}function bg(t,o,s,n){t.removeEventListener(o,s,n)}const Ad=Symbol("_vei");function wg(t,o,s,n,r=null){const i=t[Ad]||(t[Ad]={}),a=i[o];if(n&&a)a.value=n;else{const[l,d]=kg(o);if(n){const c=i[o]=Sg(n,r);xo(t,l,c,d)}else a&&(bg(t,l,a,d),i[o]=void 0)}}const Id=/(?:Once|Passive|Capture)$/;function kg(t){let o;if(Id.test(t)){o={};let n;for(;n=t.match(Id);)t=t.slice(0,t.length-n[0].length),o[n[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):Bo(t.slice(2)),o]}let br=0;const _g=Promise.resolve(),$g=()=>br||(_g.then(()=>br=0),br=Date.now());function Sg(t,o){const s=n=>{if(!n._vts)n._vts=Date.now();else if(n._vts<=s.attached)return;Xt(Dg(n,s.value),o,5,[n])};return s.value=t,s.attached=$g(),s}function Dg(t,o){if(Ae(o)){const s=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{s.call(t),t._stopped=!0},o.map(n=>r=>!r._stopped&&n&&n(r))}else return o}const Md=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)>96&&t.charCodeAt(2)<123,Cg=(t,o,s,n,r,i)=>{const a=r==="svg";o==="class"?fg(t,n,a):o==="style"?yg(t,s,n):Hn(o)?aa(o)||wg(t,o,s,n,i):(o[0]==="."?(o=o.slice(1),!0):o[0]==="^"?(o=o.slice(1),!1):Tg(t,o,n,a))?(Ed(t,o,n),!t.tagName.includes("-")&&(o==="value"||o==="checked"||o==="selected")&&Td(t,o,n,a,i,o!=="value")):t._isVueCE&&(/[A-Z]/.test(o)||!at(n))?Ed(t,Wt(o),n,i,o):(o==="true-value"?t._trueValue=n:o==="false-value"&&(t._falseValue=n),Td(t,o,n,a))};function Tg(t,o,s,n){if(n)return!!(o==="innerHTML"||o==="textContent"||o in t&&Md(o)&&Me(s));if(o==="spellcheck"||o==="draggable"||o==="translate"||o==="autocorrect"||o==="form"||o==="list"&&t.tagName==="INPUT"||o==="type"&&t.tagName==="TEXTAREA")return!1;if(o==="width"||o==="height"){const r=t.tagName;if(r==="IMG"||r==="VIDEO"||r==="CANVAS"||r==="SOURCE")return!1}return Md(o)&&at(s)?!1:o in t}const l0=new WeakMap,d0=new WeakMap,Fn=Symbol("_moveCb"),Rd=Symbol("_enterCb"),Eg=t=>(delete t.props.mode,t),Ag=Eg({name:"TransitionGroup",props:dt({},n0,{tag:String,moveClass:String}),setup(t,{slots:o}){const s=tn(),n=kc();let r,i;return Ac(()=>{if(!r.length)return;const a=t.moveClass||`${t.name||"v"}-move`;if(!jg(r[0].el,s.vnode.el,a)){r=[];return}r.forEach(Mg),r.forEach(Rg);const l=r.filter(Pg);zr(s.vnode.el),l.forEach(d=>{const c=d.el,u=c.style;oo(c,a),u.transform=u.webkitTransform=u.transitionDuration="";const p=c[Fn]=v=>{v&&v.target!==c||(!v||v.propertyName.endsWith("transform"))&&(c.removeEventListener("transitionend",p),c[Fn]=null,To(c,a))};c.addEventListener("transitionend",p)}),r=[]}),()=>{const a=Be(t),l=r0(a);let d=a.tag||he;if(r=[],i)for(let c=0;c<i.length;c++){const u=i[c];u.el&&u.el instanceof Element&&(r.push(u),es(u,qs(u,l,n,s)),l0.set(u,u.el.getBoundingClientRect()))}i=o.default?ya(o.default()):[];for(let c=0;c<i.length;c++){const u=i[c];u.key!=null&&es(u,qs(u,l,n,s))}return re(d,null,i)}}}),Ig=Ag;function Mg(t){const o=t.el;o[Fn]&&o[Fn](),o[Rd]&&o[Rd]()}function Rg(t){d0.set(t,t.el.getBoundingClientRect())}function Pg(t){const o=l0.get(t),s=d0.get(t),n=o.left-s.left,r=o.top-s.top;if(n||r){const i=t.el.style;return i.transform=i.webkitTransform=`translate(${n}px,${r}px)`,i.transitionDuration="0s",t}}function jg(t,o,s){const n=t.cloneNode(),r=t[ps];r&&r.forEach(l=>{l.split(/\s+/).forEach(d=>d&&n.classList.remove(d))}),s.split(/\s+/).forEach(l=>l&&n.classList.add(l)),n.style.display="none";const i=o.nodeType===1?o:o.parentNode;i.appendChild(n);const{hasTransform:a}=a0(n);return i.removeChild(n),a}const Lo=t=>{const o=t.props["onUpdate:modelValue"]||!1;return Ae(o)?s=>wn(o,s):o};function Ng(t){t.target.composing=!0}function Pd(t){const o=t.target;o.composing&&(o.composing=!1,o.dispatchEvent(new Event("input")))}const Gt=Symbol("_assign"),xe={created(t,{modifiers:{lazy:o,trim:s,number:n}},r){t[Gt]=Lo(r);const i=n||r.props&&r.props.type==="number";xo(t,o?"change":"input",a=>{if(a.target.composing)return;let l=t.value;s&&(l=l.trim()),i&&(l=En(l)),t[Gt](l)}),s&&xo(t,"change",()=>{t.value=t.value.trim()}),o||(xo(t,"compositionstart",Ng),xo(t,"compositionend",Pd),xo(t,"change",Pd))},mounted(t,{value:o}){t.value=o??""},beforeUpdate(t,{value:o,oldValue:s,modifiers:{lazy:n,trim:r,number:i}},a){if(t[Gt]=Lo(a),t.composing)return;const l=(i||t.type==="number")&&!/^0\d/.test(t.value)?En(t.value):t.value,d=o??"";l!==d&&(document.activeElement===t&&t.type!=="range"&&(n&&o===s||r&&t.value.trim()===d)||(t.value=d))}},ot={deep:!0,created(t,o,s){t[Gt]=Lo(s),xo(t,"change",()=>{const n=t._modelValue,r=ms(t),i=t.checked,a=t[Gt];if(Ae(n)){const l=da(n,r),d=l!==-1;if(i&&!d)a(n.concat(r));else if(!i&&d){const c=[...n];c.splice(l,1),a(c)}}else if(ys(n)){const l=new Set(n);i?l.add(r):l.delete(r),a(l)}else a(u0(t,i))})},mounted:jd,beforeUpdate(t,o,s){t[Gt]=Lo(s),jd(t,o,s)}};function jd(t,{value:o,oldValue:s},n){t._modelValue=o;let r;if(Ae(o))r=da(o,n.props.value)>-1;else if(ys(o))r=o.has(n.props.value);else{if(o===s)return;r=Zo(o,u0(t,!0))}t.checked!==r&&(t.checked=r)}const cs={created(t,{value:o},s){t.checked=Zo(o,s.props.value),t[Gt]=Lo(s),xo(t,"change",()=>{t[Gt](ms(t))})},beforeUpdate(t,{value:o,oldValue:s},n){t[Gt]=Lo(n),o!==s&&(t.checked=Zo(o,n.props.value))}},Ce={deep:!0,created(t,{value:o,modifiers:{number:s}},n){const r=ys(o);xo(t,"change",()=>{const i=Array.prototype.filter.call(t.options,a=>a.selected).map(a=>s?En(ms(a)):ms(a));t[Gt](t.multiple?r?new Set(i):i:i[0]),t._assigning=!0,Qo(()=>{t._assigning=!1})}),t[Gt]=Lo(n)},mounted(t,{value:o}){Nd(t,o)},beforeUpdate(t,o,s){t[Gt]=Lo(s)},updated(t,{value:o}){t._assigning||Nd(t,o)}};function Nd(t,o){const s=t.multiple,n=Ae(o);if(!(s&&!n&&!ys(o))){for(let r=0,i=t.options.length;r<i;r++){const a=t.options[r],l=ms(a);if(s)if(n){const d=typeof l;d==="string"||d==="number"?a.selected=o.some(c=>String(c)===String(l)):a.selected=da(o,l)>-1}else a.selected=o.has(l);else if(Zo(ms(a),o)){t.selectedIndex!==r&&(t.selectedIndex=r);return}}!s&&t.selectedIndex!==-1&&(t.selectedIndex=-1)}}function ms(t){return"_value"in t?t._value:t.value}function u0(t,o){const s=o?"_trueValue":"_falseValue";return s in t?t[s]:o}const Lg=["ctrl","shift","alt","meta"],Bg={stop:t=>t.stopPropagation(),prevent:t=>t.preventDefault(),self:t=>t.target!==t.currentTarget,ctrl:t=>!t.ctrlKey,shift:t=>!t.shiftKey,alt:t=>!t.altKey,meta:t=>!t.metaKey,left:t=>"button"in t&&t.button!==0,middle:t=>"button"in t&&t.button!==1,right:t=>"button"in t&&t.button!==2,exact:(t,o)=>Lg.some(s=>t[`${s}Key`]&&!o.includes(s))},Oe=(t,o)=>{const s=t._withMods||(t._withMods={}),n=o.join(".");return s[n]||(s[n]=((r,...i)=>{for(let a=0;a<o.length;a++){const l=Bg[o[a]];if(l&&l(r,o))return}return t(r,...i)}))},Vg={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},Loe=(t,o)=>{const s=t._withKeys||(t._withKeys={}),n=o.join(".");return s[n]||(s[n]=(r=>{if(!("key"in r))return;const i=Bo(r.key);if(o.some(a=>a===i||Vg[a]===i))return t(r)}))},Ug=dt({patchProp:Cg},cg);let Ld;function Fg(){return Ld||(Ld=jm(Ug))}const Og=((...t)=>{const o=Fg().createApp(...t),{mount:s}=o;return o.mount=n=>{const r=Hg(n);if(!r)return;const i=o._component;!Me(i)&&!i.render&&!i.template&&(i.template=r.innerHTML),r.nodeType===1&&(r.textContent="");const a=s(r,!1,zg(r));return r instanceof Element&&(r.removeAttribute("v-cloak"),r.setAttribute("data-v-app","")),a},o});function zg(t){if(t instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&t instanceof MathMLElement)return"mathml"}function Hg(t){return at(t)?document.querySelector(t):t}/*!
 * pinia v3.0.3
 * (c) 2025 Eduardo San Martin Morote
 * @license MIT
 */let c0;const tr=t=>c0=t,p0=Symbol();function Hr(t){return t&&typeof t=="object"&&Object.prototype.toString.call(t)==="[object Object]"&&typeof t.toJSON!="function"}var Vs;(function(t){t.direct="direct",t.patchObject="patch object",t.patchFunction="patch function"})(Vs||(Vs={}));function qg(){const t=Gu(!0),o=t.run(()=>V({}));let s=[],n=[];const r=Wo({install(i){tr(r),r._a=i,i.provide(p0,r),i.config.globalProperties.$pinia=r,n.forEach(a=>s.push(a)),n=[]},use(i){return this._a?s.push(i):n.push(i),this},_p:s,_a:null,_e:t,_s:new Map,state:o});return r}const m0=()=>{};function Bd(t,o,s,n=m0){t.push(o);const r=()=>{const i=t.indexOf(o);i>-1&&(t.splice(i,1),n())};return!s&&Wu()&&Cp(r),r}function ss(t,...o){t.slice().forEach(s=>{s(...o)})}const Gg=t=>t(),Vd=Symbol(),wr=Symbol();function qr(t,o){t instanceof Map&&o instanceof Map?o.forEach((s,n)=>t.set(n,s)):t instanceof Set&&o instanceof Set&&o.forEach(t.add,t);for(const s in o){if(!o.hasOwnProperty(s))continue;const n=o[s],r=t[s];Hr(r)&&Hr(n)&&t.hasOwnProperty(s)&&!rt(n)&&!bo(n)?t[s]=qr(r,n):t[s]=n}return t}const Wg=Symbol();function Jg(t){return!Hr(t)||!Object.prototype.hasOwnProperty.call(t,Wg)}const{assign:Eo}=Object;function Yg(t){return!!(rt(t)&&t.effect)}function Kg(t,o,s,n){const{state:r,actions:i,getters:a}=o,l=s.state.value[t];let d;function c(){l||(s.state.value[t]=r?r():{});const u=cc(s.state.value[t]);return Eo(u,i,Object.keys(a||{}).reduce((p,v)=>(p[v]=Wo(te(()=>{tr(s);const g=s._s.get(t);return a[v].call(g,g)})),p),{}))}return d=g0(t,c,o,s,n,!0),d}function g0(t,o,s={},n,r,i){let a;const l=Eo({actions:{}},s),d={deep:!0};let c,u,p=[],v=[],g;const h=n.state.value[t];!i&&!h&&(n.state.value[t]={}),V({});let D;function C(F){let E;c=u=!1,typeof F=="function"?(F(n.state.value[t]),E={type:Vs.patchFunction,storeId:t,events:g}):(qr(n.state.value[t],F),E={type:Vs.patchObject,payload:F,storeId:t,events:g});const O=D=Symbol();Qo().then(()=>{D===O&&(c=!0)}),u=!0,ss(p,E,n.state.value[t])}const B=i?function(){const{state:E}=s,O=E?E():{};this.$patch(N=>{Eo(N,O)})}:m0;function _(){a.stop(),p=[],v=[],n._s.delete(t)}const T=(F,E="")=>{if(Vd in F)return F[wr]=E,F;const O=function(){tr(n);const N=Array.from(arguments),L=[],M=[];function X(ae){L.push(ae)}function ee(ae){M.push(ae)}ss(v,{args:N,name:O[wr],store:k,after:X,onError:ee});let oe;try{oe=F.apply(this&&this.$id===t?this:k,N)}catch(ae){throw ss(M,ae),ae}return oe instanceof Promise?oe.then(ae=>(ss(L,ae),ae)).catch(ae=>(ss(M,ae),Promise.reject(ae))):(ss(L,oe),oe)};return O[Vd]=!0,O[wr]=E,O},S={_p:n,$id:t,$onAction:Bd.bind(null,v),$patch:C,$reset:B,$subscribe(F,E={}){const O=Bd(p,F,E.detached,()=>N()),N=a.run(()=>Ue(()=>n.state.value[t],L=>{(E.flush==="sync"?u:c)&&F({storeId:t,type:Vs.direct,events:g},L)},Eo({},d,E)));return O},$dispose:_},k=Je(S);n._s.set(t,k);const x=(n._a&&n._a.runWithContext||Gg)(()=>n._e.run(()=>(a=Gu()).run(()=>o({action:T}))));for(const F in x){const E=x[F];if(rt(E)&&!Yg(E)||bo(E))i||(h&&Jg(E)&&(rt(E)?E.value=h[F]:qr(E,h[F])),n.state.value[t][F]=E);else if(typeof E=="function"){const O=T(E,F);x[F]=O,l.actions[F]=E}}return Eo(k,x),Eo(Be(k),x),Object.defineProperty(k,"$state",{get:()=>n.state.value[t],set:F=>{C(E=>{Eo(E,F)})}}),n._p.forEach(F=>{Eo(k,a.run(()=>F({store:k,app:n._a,pinia:n,options:l})))}),h&&i&&s.hydrate&&s.hydrate(k.$state,h),c=!0,u=!0,k}/*! #__NO_SIDE_EFFECTS__ */function Vo(t,o,s){let n;const r=typeof o=="function";n=r?s:o;function i(a,l){const d=Tm();return a=a||(d?qt(p0,null):null),a&&tr(a),a=c0,a._s.has(t)||(r?g0(t,o,n,a):Kg(t,n,a)),a._s.get(t)}return i.$id=t,i}function Xg(t){const o=Be(t),s={};for(const n in o){const r=o[n];r.effect?s[n]=te({get:()=>t[n],set(i){t[n]=i}}):(rt(r)||bo(r))&&(s[n]=Zp(t,n))}return s}/*!
  * vue-router v4.5.1
  * (c) 2025 Eduardo San Martin Morote
  * @license MIT
  */const rs=typeof document<"u";function f0(t){return typeof t=="object"||"displayName"in t||"props"in t||"__vccOpts"in t}function Zg(t){return t.__esModule||t[Symbol.toStringTag]==="Module"||t.default&&f0(t.default)}const Ge=Object.assign;function kr(t,o){const s={};for(const n in o){const r=o[n];s[n]=Zt(r)?r.map(t):t(r)}return s}const Us=()=>{},Zt=Array.isArray,v0=/#/g,Qg=/&/g,ef=/\//g,tf=/=/g,of=/\?/g,h0=/\+/g,sf=/%5B/g,nf=/%5D/g,y0=/%5E/g,rf=/%60/g,x0=/%7B/g,af=/%7C/g,b0=/%7D/g,lf=/%20/g;function $a(t){return encodeURI(""+t).replace(af,"|").replace(sf,"[").replace(nf,"]")}function df(t){return $a(t).replace(x0,"{").replace(b0,"}").replace(y0,"^")}function Gr(t){return $a(t).replace(h0,"%2B").replace(lf,"+").replace(v0,"%23").replace(Qg,"%26").replace(rf,"`").replace(x0,"{").replace(b0,"}").replace(y0,"^")}function uf(t){return Gr(t).replace(tf,"%3D")}function cf(t){return $a(t).replace(v0,"%23").replace(of,"%3F")}function pf(t){return t==null?"":cf(t).replace(ef,"%2F")}function Ys(t){try{return decodeURIComponent(""+t)}catch{}return""+t}const mf=/\/$/,gf=t=>t.replace(mf,"");function _r(t,o,s="/"){let n,r={},i="",a="";const l=o.indexOf("#");let d=o.indexOf("?");return l<d&&l>=0&&(d=-1),d>-1&&(n=o.slice(0,d),i=o.slice(d+1,l>-1?l:o.length),r=t(i)),l>-1&&(n=n||o.slice(0,l),a=o.slice(l,o.length)),n=yf(n??o,s),{fullPath:n+(i&&"?")+i+a,path:n,query:r,hash:Ys(a)}}function ff(t,o){const s=o.query?t(o.query):"";return o.path+(s&&"?")+s+(o.hash||"")}function Ud(t,o){return!o||!t.toLowerCase().startsWith(o.toLowerCase())?t:t.slice(o.length)||"/"}function vf(t,o,s){const n=o.matched.length-1,r=s.matched.length-1;return n>-1&&n===r&&gs(o.matched[n],s.matched[r])&&w0(o.params,s.params)&&t(o.query)===t(s.query)&&o.hash===s.hash}function gs(t,o){return(t.aliasOf||t)===(o.aliasOf||o)}function w0(t,o){if(Object.keys(t).length!==Object.keys(o).length)return!1;for(const s in t)if(!hf(t[s],o[s]))return!1;return!0}function hf(t,o){return Zt(t)?Fd(t,o):Zt(o)?Fd(o,t):t===o}function Fd(t,o){return Zt(o)?t.length===o.length&&t.every((s,n)=>s===o[n]):t.length===1&&t[0]===o}function yf(t,o){if(t.startsWith("/"))return t;if(!t)return o;const s=o.split("/"),n=t.split("/"),r=n[n.length-1];(r===".."||r===".")&&n.push("");let i=s.length-1,a,l;for(a=0;a<n.length;a++)if(l=n[a],l!==".")if(l==="..")i>1&&i--;else break;return s.slice(0,i).join("/")+"/"+n.slice(a).join("/")}const Do={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};var Ks;(function(t){t.pop="pop",t.push="push"})(Ks||(Ks={}));var Fs;(function(t){t.back="back",t.forward="forward",t.unknown=""})(Fs||(Fs={}));function xf(t){if(!t)if(rs){const o=document.querySelector("base");t=o&&o.getAttribute("href")||"/",t=t.replace(/^\w+:\/\/[^\/]+/,"")}else t="/";return t[0]!=="/"&&t[0]!=="#"&&(t="/"+t),gf(t)}const bf=/^[^#]+#/;function wf(t,o){return t.replace(bf,"#")+o}function kf(t,o){const s=document.documentElement.getBoundingClientRect(),n=t.getBoundingClientRect();return{behavior:o.behavior,left:n.left-s.left-(o.left||0),top:n.top-s.top-(o.top||0)}}const or=()=>({left:window.scrollX,top:window.scrollY});function _f(t){let o;if("el"in t){const s=t.el,n=typeof s=="string"&&s.startsWith("#"),r=typeof s=="string"?n?document.getElementById(s.slice(1)):document.querySelector(s):s;if(!r)return;o=kf(r,t)}else o=t;"scrollBehavior"in document.documentElement.style?window.scrollTo(o):window.scrollTo(o.left!=null?o.left:window.scrollX,o.top!=null?o.top:window.scrollY)}function Od(t,o){return(history.state?history.state.position-o:-1)+t}const Wr=new Map;function $f(t,o){Wr.set(t,o)}function Sf(t){const o=Wr.get(t);return Wr.delete(t),o}let Df=()=>location.protocol+"//"+location.host;function k0(t,o){const{pathname:s,search:n,hash:r}=o,i=t.indexOf("#");if(i>-1){let l=r.includes(t.slice(i))?t.slice(i).length:1,d=r.slice(l);return d[0]!=="/"&&(d="/"+d),Ud(d,"")}return Ud(s,t)+n+r}function Cf(t,o,s,n){let r=[],i=[],a=null;const l=({state:v})=>{const g=k0(t,location),h=s.value,D=o.value;let C=0;if(v){if(s.value=g,o.value=v,a&&a===h){a=null;return}C=D?v.position-D.position:0}else n(g);r.forEach(B=>{B(s.value,h,{delta:C,type:Ks.pop,direction:C?C>0?Fs.forward:Fs.back:Fs.unknown})})};function d(){a=s.value}function c(v){r.push(v);const g=()=>{const h=r.indexOf(v);h>-1&&r.splice(h,1)};return i.push(g),g}function u(){const{history:v}=window;v.state&&v.replaceState(Ge({},v.state,{scroll:or()}),"")}function p(){for(const v of i)v();i=[],window.removeEventListener("popstate",l),window.removeEventListener("beforeunload",u)}return window.addEventListener("popstate",l),window.addEventListener("beforeunload",u,{passive:!0}),{pauseListeners:d,listen:c,destroy:p}}function zd(t,o,s,n=!1,r=!1){return{back:t,current:o,forward:s,replaced:n,position:window.history.length,scroll:r?or():null}}function Tf(t){const{history:o,location:s}=window,n={value:k0(t,s)},r={value:o.state};r.value||i(n.value,{back:null,current:n.value,forward:null,position:o.length-1,replaced:!0,scroll:null},!0);function i(d,c,u){const p=t.indexOf("#"),v=p>-1?(s.host&&document.querySelector("base")?t:t.slice(p))+d:Df()+t+d;try{o[u?"replaceState":"pushState"](c,"",v),r.value=c}catch(g){console.error(g),s[u?"replace":"assign"](v)}}function a(d,c){const u=Ge({},o.state,zd(r.value.back,d,r.value.forward,!0),c,{position:r.value.position});i(d,u,!0),n.value=d}function l(d,c){const u=Ge({},r.value,o.state,{forward:d,scroll:or()});i(u.current,u,!0);const p=Ge({},zd(n.value,d,null),{position:u.position+1},c);i(d,p,!1),n.value=d}return{location:n,state:r,push:l,replace:a}}function Ef(t){t=xf(t);const o=Tf(t),s=Cf(t,o.state,o.location,o.replace);function n(i,a=!0){a||s.pauseListeners(),history.go(i)}const r=Ge({location:"",base:t,go:n,createHref:wf.bind(null,t)},o,s);return Object.defineProperty(r,"location",{enumerable:!0,get:()=>o.location.value}),Object.defineProperty(r,"state",{enumerable:!0,get:()=>o.state.value}),r}function Af(t){return typeof t=="string"||t&&typeof t=="object"}function _0(t){return typeof t=="string"||typeof t=="symbol"}const $0=Symbol("");var Hd;(function(t){t[t.aborted=4]="aborted",t[t.cancelled=8]="cancelled",t[t.duplicated=16]="duplicated"})(Hd||(Hd={}));function fs(t,o){return Ge(new Error,{type:t,[$0]:!0},o)}function co(t,o){return t instanceof Error&&$0 in t&&(o==null||!!(t.type&o))}const qd="[^/]+?",If={sensitive:!1,strict:!1,start:!0,end:!0},Mf=/[.+*?^${}()[\]/\\]/g;function Rf(t,o){const s=Ge({},If,o),n=[];let r=s.start?"^":"";const i=[];for(const c of t){const u=c.length?[]:[90];s.strict&&!c.length&&(r+="/");for(let p=0;p<c.length;p++){const v=c[p];let g=40+(s.sensitive?.25:0);if(v.type===0)p||(r+="/"),r+=v.value.replace(Mf,"\\$&"),g+=40;else if(v.type===1){const{value:h,repeatable:D,optional:C,regexp:B}=v;i.push({name:h,repeatable:D,optional:C});const _=B||qd;if(_!==qd){g+=10;try{new RegExp(`(${_})`)}catch(S){throw new Error(`Invalid custom RegExp for param "${h}" (${_}): `+S.message)}}let T=D?`((?:${_})(?:/(?:${_}))*)`:`(${_})`;p||(T=C&&c.length<2?`(?:/${T})`:"/"+T),C&&(T+="?"),r+=T,g+=20,C&&(g+=-8),D&&(g+=-20),_===".*"&&(g+=-50)}u.push(g)}n.push(u)}if(s.strict&&s.end){const c=n.length-1;n[c][n[c].length-1]+=.7000000000000001}s.strict||(r+="/?"),s.end?r+="$":s.strict&&!r.endsWith("/")&&(r+="(?:/|$)");const a=new RegExp(r,s.sensitive?"":"i");function l(c){const u=c.match(a),p={};if(!u)return null;for(let v=1;v<u.length;v++){const g=u[v]||"",h=i[v-1];p[h.name]=g&&h.repeatable?g.split("/"):g}return p}function d(c){let u="",p=!1;for(const v of t){(!p||!u.endsWith("/"))&&(u+="/"),p=!1;for(const g of v)if(g.type===0)u+=g.value;else if(g.type===1){const{value:h,repeatable:D,optional:C}=g,B=h in c?c[h]:"";if(Zt(B)&&!D)throw new Error(`Provided param "${h}" is an array but it is not repeatable (* or + modifiers)`);const _=Zt(B)?B.join("/"):B;if(!_)if(C)v.length<2&&(u.endsWith("/")?u=u.slice(0,-1):p=!0);else throw new Error(`Missing required param "${h}"`);u+=_}}return u||"/"}return{re:a,score:n,keys:i,parse:l,stringify:d}}function Pf(t,o){let s=0;for(;s<t.length&&s<o.length;){const n=o[s]-t[s];if(n)return n;s++}return t.length<o.length?t.length===1&&t[0]===80?-1:1:t.length>o.length?o.length===1&&o[0]===80?1:-1:0}function S0(t,o){let s=0;const n=t.score,r=o.score;for(;s<n.length&&s<r.length;){const i=Pf(n[s],r[s]);if(i)return i;s++}if(Math.abs(r.length-n.length)===1){if(Gd(n))return 1;if(Gd(r))return-1}return r.length-n.length}function Gd(t){const o=t[t.length-1];return t.length>0&&o[o.length-1]<0}const jf={type:0,value:""},Nf=/[a-zA-Z0-9_]/;function Lf(t){if(!t)return[[]];if(t==="/")return[[jf]];if(!t.startsWith("/"))throw new Error(`Invalid path "${t}"`);function o(g){throw new Error(`ERR (${s})/"${c}": ${g}`)}let s=0,n=s;const r=[];let i;function a(){i&&r.push(i),i=[]}let l=0,d,c="",u="";function p(){c&&(s===0?i.push({type:0,value:c}):s===1||s===2||s===3?(i.length>1&&(d==="*"||d==="+")&&o(`A repeatable param (${c}) must be alone in its segment. eg: '/:ids+.`),i.push({type:1,value:c,regexp:u,repeatable:d==="*"||d==="+",optional:d==="*"||d==="?"})):o("Invalid state to consume buffer"),c="")}function v(){c+=d}for(;l<t.length;){if(d=t[l++],d==="\\"&&s!==2){n=s,s=4;continue}switch(s){case 0:d==="/"?(c&&p(),a()):d===":"?(p(),s=1):v();break;case 4:v(),s=n;break;case 1:d==="("?s=2:Nf.test(d)?v():(p(),s=0,d!=="*"&&d!=="?"&&d!=="+"&&l--);break;case 2:d===")"?u[u.length-1]=="\\"?u=u.slice(0,-1)+d:s=3:u+=d;break;case 3:p(),s=0,d!=="*"&&d!=="?"&&d!=="+"&&l--,u="";break;default:o("Unknown state");break}}return s===2&&o(`Unfinished custom RegExp for param "${c}"`),p(),a(),r}function Bf(t,o,s){const n=Rf(Lf(t.path),s),r=Ge(n,{record:t,parent:o,children:[],alias:[]});return o&&!r.record.aliasOf==!o.record.aliasOf&&o.children.push(r),r}function Vf(t,o){const s=[],n=new Map;o=Kd({strict:!1,end:!0,sensitive:!1},o);function r(p){return n.get(p)}function i(p,v,g){const h=!g,D=Jd(p);D.aliasOf=g&&g.record;const C=Kd(o,p),B=[D];if("alias"in p){const S=typeof p.alias=="string"?[p.alias]:p.alias;for(const k of S)B.push(Jd(Ge({},D,{components:g?g.record.components:D.components,path:k,aliasOf:g?g.record:D})))}let _,T;for(const S of B){const{path:k}=S;if(v&&k[0]!=="/"){const b=v.record.path,x=b[b.length-1]==="/"?"":"/";S.path=v.record.path+(k&&x+k)}if(_=Bf(S,v,C),g?g.alias.push(_):(T=T||_,T!==_&&T.alias.push(_),h&&p.name&&!Yd(_)&&a(p.name)),D0(_)&&d(_),D.children){const b=D.children;for(let x=0;x<b.length;x++)i(b[x],_,g&&g.children[x])}g=g||_}return T?()=>{a(T)}:Us}function a(p){if(_0(p)){const v=n.get(p);v&&(n.delete(p),s.splice(s.indexOf(v),1),v.children.forEach(a),v.alias.forEach(a))}else{const v=s.indexOf(p);v>-1&&(s.splice(v,1),p.record.name&&n.delete(p.record.name),p.children.forEach(a),p.alias.forEach(a))}}function l(){return s}function d(p){const v=Of(p,s);s.splice(v,0,p),p.record.name&&!Yd(p)&&n.set(p.record.name,p)}function c(p,v){let g,h={},D,C;if("name"in p&&p.name){if(g=n.get(p.name),!g)throw fs(1,{location:p});C=g.record.name,h=Ge(Wd(v.params,g.keys.filter(T=>!T.optional).concat(g.parent?g.parent.keys.filter(T=>T.optional):[]).map(T=>T.name)),p.params&&Wd(p.params,g.keys.map(T=>T.name))),D=g.stringify(h)}else if(p.path!=null)D=p.path,g=s.find(T=>T.re.test(D)),g&&(h=g.parse(D),C=g.record.name);else{if(g=v.name?n.get(v.name):s.find(T=>T.re.test(v.path)),!g)throw fs(1,{location:p,currentLocation:v});C=g.record.name,h=Ge({},v.params,p.params),D=g.stringify(h)}const B=[];let _=g;for(;_;)B.unshift(_.record),_=_.parent;return{name:C,path:D,params:h,matched:B,meta:Ff(B)}}t.forEach(p=>i(p));function u(){s.length=0,n.clear()}return{addRoute:i,resolve:c,removeRoute:a,clearRoutes:u,getRoutes:l,getRecordMatcher:r}}function Wd(t,o){const s={};for(const n of o)n in t&&(s[n]=t[n]);return s}function Jd(t){const o={path:t.path,redirect:t.redirect,name:t.name,meta:t.meta||{},aliasOf:t.aliasOf,beforeEnter:t.beforeEnter,props:Uf(t),children:t.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in t?t.components||null:t.component&&{default:t.component}};return Object.defineProperty(o,"mods",{value:{}}),o}function Uf(t){const o={},s=t.props||!1;if("component"in t)o.default=s;else for(const n in t.components)o[n]=typeof s=="object"?s[n]:s;return o}function Yd(t){for(;t;){if(t.record.aliasOf)return!0;t=t.parent}return!1}function Ff(t){return t.reduce((o,s)=>Ge(o,s.meta),{})}function Kd(t,o){const s={};for(const n in t)s[n]=n in o?o[n]:t[n];return s}function Of(t,o){let s=0,n=o.length;for(;s!==n;){const i=s+n>>1;S0(t,o[i])<0?n=i:s=i+1}const r=zf(t);return r&&(n=o.lastIndexOf(r,n-1)),n}function zf(t){let o=t;for(;o=o.parent;)if(D0(o)&&S0(t,o)===0)return o}function D0({record:t}){return!!(t.name||t.components&&Object.keys(t.components).length||t.redirect)}function Hf(t){const o={};if(t===""||t==="?")return o;const n=(t[0]==="?"?t.slice(1):t).split("&");for(let r=0;r<n.length;++r){const i=n[r].replace(h0," "),a=i.indexOf("="),l=Ys(a<0?i:i.slice(0,a)),d=a<0?null:Ys(i.slice(a+1));if(l in o){let c=o[l];Zt(c)||(c=o[l]=[c]),c.push(d)}else o[l]=d}return o}function Xd(t){let o="";for(let s in t){const n=t[s];if(s=uf(s),n==null){n!==void 0&&(o+=(o.length?"&":"")+s);continue}(Zt(n)?n.map(i=>i&&Gr(i)):[n&&Gr(n)]).forEach(i=>{i!==void 0&&(o+=(o.length?"&":"")+s,i!=null&&(o+="="+i))})}return o}function qf(t){const o={};for(const s in t){const n=t[s];n!==void 0&&(o[s]=Zt(n)?n.map(r=>r==null?null:""+r):n==null?n:""+n)}return o}const Gf=Symbol(""),Zd=Symbol(""),sr=Symbol(""),Sa=Symbol(""),Jr=Symbol("");function Cs(){let t=[];function o(n){return t.push(n),()=>{const r=t.indexOf(n);r>-1&&t.splice(r,1)}}function s(){t=[]}return{add:o,list:()=>t.slice(),reset:s}}function Ro(t,o,s,n,r,i=a=>a()){const a=n&&(n.enterCallbacks[r]=n.enterCallbacks[r]||[]);return()=>new Promise((l,d)=>{const c=v=>{v===!1?d(fs(4,{from:s,to:o})):v instanceof Error?d(v):Af(v)?d(fs(2,{from:o,to:v})):(a&&n.enterCallbacks[r]===a&&typeof v=="function"&&a.push(v),l())},u=i(()=>t.call(n&&n.instances[r],o,s,c));let p=Promise.resolve(u);t.length<3&&(p=p.then(c)),p.catch(v=>d(v))})}function $r(t,o,s,n,r=i=>i()){const i=[];for(const a of t)for(const l in a.components){let d=a.components[l];if(!(o!=="beforeRouteEnter"&&!a.instances[l]))if(f0(d)){const u=(d.__vccOpts||d)[o];u&&i.push(Ro(u,s,n,a,l,r))}else{let c=d();i.push(()=>c.then(u=>{if(!u)throw new Error(`Couldn't resolve component "${l}" at "${a.path}"`);const p=Zg(u)?u.default:u;a.mods[l]=u,a.components[l]=p;const g=(p.__vccOpts||p)[o];return g&&Ro(g,s,n,a,l,r)()}))}}return i}function Qd(t){const o=qt(sr),s=qt(Sa),n=te(()=>{const d=_e(t.to);return o.resolve(d)}),r=te(()=>{const{matched:d}=n.value,{length:c}=d,u=d[c-1],p=s.matched;if(!u||!p.length)return-1;const v=p.findIndex(gs.bind(null,u));if(v>-1)return v;const g=eu(d[c-2]);return c>1&&eu(u)===g&&p[p.length-1].path!==g?p.findIndex(gs.bind(null,d[c-2])):v}),i=te(()=>r.value>-1&&Xf(s.params,n.value.params)),a=te(()=>r.value>-1&&r.value===s.matched.length-1&&w0(s.params,n.value.params));function l(d={}){if(Kf(d)){const c=o[_e(t.replace)?"replace":"push"](_e(t.to)).catch(Us);return t.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>c),c}return Promise.resolve()}return{route:n,href:te(()=>n.value.href),isActive:i,isExactActive:a,navigate:l}}function Wf(t){return t.length===1?t[0]:t}const Jf=Cc({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"},viewTransition:Boolean},useLink:Qd,setup(t,{slots:o}){const s=Je(Qd(t)),{options:n}=qt(sr),r=te(()=>({[tu(t.activeClass,n.linkActiveClass,"router-link-active")]:s.isActive,[tu(t.exactActiveClass,n.linkExactActiveClass,"router-link-exact-active")]:s.isExactActive}));return()=>{const i=o.default&&Wf(o.default(s));return t.custom?i:zt("a",{"aria-current":s.isExactActive?t.ariaCurrentValue:null,href:s.href,onClick:s.navigate,class:r.value},i)}}}),Yf=Jf;function Kf(t){if(!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)&&!t.defaultPrevented&&!(t.button!==void 0&&t.button!==0)){if(t.currentTarget&&t.currentTarget.getAttribute){const o=t.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(o))return}return t.preventDefault&&t.preventDefault(),!0}}function Xf(t,o){for(const s in o){const n=o[s],r=t[s];if(typeof n=="string"){if(n!==r)return!1}else if(!Zt(r)||r.length!==n.length||n.some((i,a)=>i!==r[a]))return!1}return!0}function eu(t){return t?t.aliasOf?t.aliasOf.path:t.path:""}const tu=(t,o,s)=>t??o??s,Zf=Cc({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(t,{attrs:o,slots:s}){const n=qt(Jr),r=te(()=>t.route||n.value),i=qt(Zd,0),a=te(()=>{let c=_e(i);const{matched:u}=r.value;let p;for(;(p=u[c])&&!p.components;)c++;return c}),l=te(()=>r.value.matched[a.value]);Ls(Zd,te(()=>a.value+1)),Ls(Gf,l),Ls(Jr,r);const d=V();return Ue(()=>[d.value,l.value,t.name],([c,u,p],[v,g,h])=>{u&&(u.instances[p]=c,g&&g!==u&&c&&c===v&&(u.leaveGuards.size||(u.leaveGuards=g.leaveGuards),u.updateGuards.size||(u.updateGuards=g.updateGuards))),c&&u&&(!g||!gs(u,g)||!v)&&(u.enterCallbacks[p]||[]).forEach(D=>D(c))},{flush:"post"}),()=>{const c=r.value,u=t.name,p=l.value,v=p&&p.components[u];if(!v)return ou(s.default,{Component:v,route:c});const g=p.props[u],h=g?g===!0?c.params:typeof g=="function"?g(c):g:null,C=zt(v,Ge({},h,o,{onVnodeUnmounted:B=>{B.component.isUnmounted&&(p.instances[u]=null)},ref:d}));return ou(s.default,{Component:C,route:c})||C}}});function ou(t,o){if(!t)return null;const s=t(o);return s.length===1?s[0]:s}const Qf=Zf;function ev(t){const o=Vf(t.routes,t),s=t.parseQuery||Hf,n=t.stringifyQuery||Xd,r=t.history,i=Cs(),a=Cs(),l=Cs(),d=Wp(Do);let c=Do;rs&&t.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const u=kr.bind(null,ge=>""+ge),p=kr.bind(null,pf),v=kr.bind(null,Ys);function g(ge,ue){let $,w;return _0(ge)?($=o.getRecordMatcher(ge),w=ue):w=ge,o.addRoute(w,$)}function h(ge){const ue=o.getRecordMatcher(ge);ue&&o.removeRoute(ue)}function D(){return o.getRoutes().map(ge=>ge.record)}function C(ge){return!!o.getRecordMatcher(ge)}function B(ge,ue){if(ue=Ge({},ue||d.value),typeof ge=="string"){const ne=_r(s,ge,ue.path),K=o.resolve({path:ne.path},ue),q=r.createHref(ne.fullPath);return Ge(ne,K,{params:v(K.params),hash:Ys(ne.hash),redirectedFrom:void 0,href:q})}let $;if(ge.path!=null)$=Ge({},ge,{path:_r(s,ge.path,ue.path).path});else{const ne=Ge({},ge.params);for(const K in ne)ne[K]==null&&delete ne[K];$=Ge({},ge,{params:p(ne)}),ue.params=p(ue.params)}const w=o.resolve($,ue),R=ge.hash||"";w.params=u(v(w.params));const A=ff(n,Ge({},ge,{hash:df(R),path:w.path})),j=r.createHref(A);return Ge({fullPath:A,hash:R,query:n===Xd?qf(ge.query):ge.query||{}},w,{redirectedFrom:void 0,href:j})}function _(ge){return typeof ge=="string"?_r(s,ge,d.value.path):Ge({},ge)}function T(ge,ue){if(c!==ge)return fs(8,{from:ue,to:ge})}function S(ge){return x(ge)}function k(ge){return S(Ge(_(ge),{replace:!0}))}function b(ge){const ue=ge.matched[ge.matched.length-1];if(ue&&ue.redirect){const{redirect:$}=ue;let w=typeof $=="function"?$(ge):$;return typeof w=="string"&&(w=w.includes("?")||w.includes("#")?w=_(w):{path:w},w.params={}),Ge({query:ge.query,hash:ge.hash,params:w.path!=null?{}:ge.params},w)}}function x(ge,ue){const $=c=B(ge),w=d.value,R=ge.state,A=ge.force,j=ge.replace===!0,ne=b($);if(ne)return x(Ge(_(ne),{state:typeof ne=="object"?Ge({},R,ne.state):R,force:A,replace:j}),ue||$);const K=$;K.redirectedFrom=ue;let q;return!A&&vf(n,w,$)&&(q=fs(16,{to:K,from:w}),I(w,w,!0,!1)),(q?Promise.resolve(q):O(K,w)).catch(le=>co(le)?co(le,2)?le:z(le):H(le,K,w)).then(le=>{if(le){if(co(le,2))return x(Ge({replace:j},_(le.to),{state:typeof le.to=="object"?Ge({},R,le.to.state):R,force:A}),ue||K)}else le=L(K,w,!0,j,R);return N(K,w,le),le})}function F(ge,ue){const $=T(ge,ue);return $?Promise.reject($):Promise.resolve()}function E(ge){const ue=we.values().next().value;return ue&&typeof ue.runWithContext=="function"?ue.runWithContext(ge):ge()}function O(ge,ue){let $;const[w,R,A]=tv(ge,ue);$=$r(w.reverse(),"beforeRouteLeave",ge,ue);for(const ne of w)ne.leaveGuards.forEach(K=>{$.push(Ro(K,ge,ue))});const j=F.bind(null,ge,ue);return $.push(j),De($).then(()=>{$=[];for(const ne of i.list())$.push(Ro(ne,ge,ue));return $.push(j),De($)}).then(()=>{$=$r(R,"beforeRouteUpdate",ge,ue);for(const ne of R)ne.updateGuards.forEach(K=>{$.push(Ro(K,ge,ue))});return $.push(j),De($)}).then(()=>{$=[];for(const ne of A)if(ne.beforeEnter)if(Zt(ne.beforeEnter))for(const K of ne.beforeEnter)$.push(Ro(K,ge,ue));else $.push(Ro(ne.beforeEnter,ge,ue));return $.push(j),De($)}).then(()=>(ge.matched.forEach(ne=>ne.enterCallbacks={}),$=$r(A,"beforeRouteEnter",ge,ue,E),$.push(j),De($))).then(()=>{$=[];for(const ne of a.list())$.push(Ro(ne,ge,ue));return $.push(j),De($)}).catch(ne=>co(ne,8)?ne:Promise.reject(ne))}function N(ge,ue,$){l.list().forEach(w=>E(()=>w(ge,ue,$)))}function L(ge,ue,$,w,R){const A=T(ge,ue);if(A)return A;const j=ue===Do,ne=rs?history.state:{};$&&(w||j?r.replace(ge.fullPath,Ge({scroll:j&&ne&&ne.scroll},R)):r.push(ge.fullPath,R)),d.value=ge,I(ge,ue,$,j),z()}let M;function X(){M||(M=r.listen((ge,ue,$)=>{if(!me.listening)return;const w=B(ge),R=b(w);if(R){x(Ge(R,{replace:!0,force:!0}),w).catch(Us);return}c=w;const A=d.value;rs&&$f(Od(A.fullPath,$.delta),or()),O(w,A).catch(j=>co(j,12)?j:co(j,2)?(x(Ge(_(j.to),{force:!0}),w).then(ne=>{co(ne,20)&&!$.delta&&$.type===Ks.pop&&r.go(-1,!1)}).catch(Us),Promise.reject()):($.delta&&r.go(-$.delta,!1),H(j,w,A))).then(j=>{j=j||L(w,A,!1),j&&($.delta&&!co(j,8)?r.go(-$.delta,!1):$.type===Ks.pop&&co(j,20)&&r.go(-1,!1)),N(w,A,j)}).catch(Us)}))}let ee=Cs(),oe=Cs(),ae;function H(ge,ue,$){z(ge);const w=oe.list();return w.length?w.forEach(R=>R(ge,ue,$)):console.error(ge),Promise.reject(ge)}function J(){return ae&&d.value!==Do?Promise.resolve():new Promise((ge,ue)=>{ee.add([ge,ue])})}function z(ge){return ae||(ae=!ge,X(),ee.list().forEach(([ue,$])=>ge?$(ge):ue()),ee.reset()),ge}function I(ge,ue,$,w){const{scrollBehavior:R}=t;if(!rs||!R)return Promise.resolve();const A=!$&&Sf(Od(ge.fullPath,0))||(w||!$)&&history.state&&history.state.scroll||null;return Qo().then(()=>R(ge,ue,A)).then(j=>j&&_f(j)).catch(j=>H(j,ge,ue))}const P=ge=>r.go(ge);let W;const we=new Set,me={currentRoute:d,listening:!0,addRoute:g,removeRoute:h,clearRoutes:o.clearRoutes,hasRoute:C,getRoutes:D,resolve:B,options:t,push:S,replace:k,go:P,back:()=>P(-1),forward:()=>P(1),beforeEach:i.add,beforeResolve:a.add,afterEach:l.add,onError:oe.add,isReady:J,install(ge){const ue=this;ge.component("RouterLink",Yf),ge.component("RouterView",Qf),ge.config.globalProperties.$router=ue,Object.defineProperty(ge.config.globalProperties,"$route",{enumerable:!0,get:()=>_e(d)}),rs&&!W&&d.value===Do&&(W=!0,S(r.location).catch(R=>{}));const $={};for(const R in Do)Object.defineProperty($,R,{get:()=>d.value[R],enumerable:!0});ge.provide(sr,ue),ge.provide(Sa,lc($)),ge.provide(Jr,d);const w=ge.unmount;we.add(ge),ge.unmount=function(){we.delete(ge),we.size<1&&(c=Do,M&&M(),M=null,d.value=Do,W=!1,ae=!1),w()}}};function De(ge){return ge.reduce((ue,$)=>ue.then(()=>E($)),Promise.resolve())}return me}function tv(t,o){const s=[],n=[],r=[],i=Math.max(o.matched.length,t.matched.length);for(let a=0;a<i;a++){const l=o.matched[a];l&&(t.matched.find(c=>gs(c,l))?n.push(l):s.push(l));const d=t.matched[a];d&&(o.matched.find(c=>gs(c,d))||r.push(d))}return[s,n,r]}function Ke(){return qt(sr)}function Ze(t){return qt(Sa)}function C0(t,o){return function(){return t.apply(o,arguments)}}const{toString:ov}=Object.prototype,{getPrototypeOf:Da}=Object,{iterator:nr,toStringTag:T0}=Symbol,rr=(t=>o=>{const s=ov.call(o);return t[s]||(t[s]=s.slice(8,-1).toLowerCase())})(Object.create(null)),Qt=t=>(t=t.toLowerCase(),o=>rr(o)===t),ar=t=>o=>typeof o===t,{isArray:xs}=Array,vs=ar("undefined");function sn(t){return t!==null&&!vs(t)&&t.constructor!==null&&!vs(t.constructor)&&Mt(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const E0=Qt("ArrayBuffer");function sv(t){let o;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?o=ArrayBuffer.isView(t):o=t&&t.buffer&&E0(t.buffer),o}const nv=ar("string"),Mt=ar("function"),A0=ar("number"),nn=t=>t!==null&&typeof t=="object",rv=t=>t===!0||t===!1,Dn=t=>{if(rr(t)!=="object")return!1;const o=Da(t);return(o===null||o===Object.prototype||Object.getPrototypeOf(o)===null)&&!(T0 in t)&&!(nr in t)},av=t=>{if(!nn(t)||sn(t))return!1;try{return Object.keys(t).length===0&&Object.getPrototypeOf(t)===Object.prototype}catch{return!1}},iv=Qt("Date"),lv=Qt("File"),dv=Qt("Blob"),uv=Qt("FileList"),cv=t=>nn(t)&&Mt(t.pipe),pv=t=>{let o;return t&&(typeof FormData=="function"&&t instanceof FormData||Mt(t.append)&&((o=rr(t))==="formdata"||o==="object"&&Mt(t.toString)&&t.toString()==="[object FormData]"))},mv=Qt("URLSearchParams"),[gv,fv,vv,hv]=["ReadableStream","Request","Response","Headers"].map(Qt),yv=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function rn(t,o,{allOwnKeys:s=!1}={}){if(t===null||typeof t>"u")return;let n,r;if(typeof t!="object"&&(t=[t]),xs(t))for(n=0,r=t.length;n<r;n++)o.call(null,t[n],n,t);else{if(sn(t))return;const i=s?Object.getOwnPropertyNames(t):Object.keys(t),a=i.length;let l;for(n=0;n<a;n++)l=i[n],o.call(null,t[l],l,t)}}function I0(t,o){if(sn(t))return null;o=o.toLowerCase();const s=Object.keys(t);let n=s.length,r;for(;n-- >0;)if(r=s[n],o===r.toLowerCase())return r;return null}const Jo=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,M0=t=>!vs(t)&&t!==Jo;function Yr(){const{caseless:t,skipUndefined:o}=M0(this)&&this||{},s={},n=(r,i)=>{const a=t&&I0(s,i)||i;Dn(s[a])&&Dn(r)?s[a]=Yr(s[a],r):Dn(r)?s[a]=Yr({},r):xs(r)?s[a]=r.slice():(!o||!vs(r))&&(s[a]=r)};for(let r=0,i=arguments.length;r<i;r++)arguments[r]&&rn(arguments[r],n);return s}const xv=(t,o,s,{allOwnKeys:n}={})=>(rn(o,(r,i)=>{s&&Mt(r)?t[i]=C0(r,s):t[i]=r},{allOwnKeys:n}),t),bv=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),wv=(t,o,s,n)=>{t.prototype=Object.create(o.prototype,n),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:o.prototype}),s&&Object.assign(t.prototype,s)},kv=(t,o,s,n)=>{let r,i,a;const l={};if(o=o||{},t==null)return o;do{for(r=Object.getOwnPropertyNames(t),i=r.length;i-- >0;)a=r[i],(!n||n(a,t,o))&&!l[a]&&(o[a]=t[a],l[a]=!0);t=s!==!1&&Da(t)}while(t&&(!s||s(t,o))&&t!==Object.prototype);return o},_v=(t,o,s)=>{t=String(t),(s===void 0||s>t.length)&&(s=t.length),s-=o.length;const n=t.indexOf(o,s);return n!==-1&&n===s},$v=t=>{if(!t)return null;if(xs(t))return t;let o=t.length;if(!A0(o))return null;const s=new Array(o);for(;o-- >0;)s[o]=t[o];return s},Sv=(t=>o=>t&&o instanceof t)(typeof Uint8Array<"u"&&Da(Uint8Array)),Dv=(t,o)=>{const n=(t&&t[nr]).call(t);let r;for(;(r=n.next())&&!r.done;){const i=r.value;o.call(t,i[0],i[1])}},Cv=(t,o)=>{let s;const n=[];for(;(s=t.exec(o))!==null;)n.push(s);return n},Tv=Qt("HTMLFormElement"),Ev=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(s,n,r){return n.toUpperCase()+r}),su=(({hasOwnProperty:t})=>(o,s)=>t.call(o,s))(Object.prototype),Av=Qt("RegExp"),R0=(t,o)=>{const s=Object.getOwnPropertyDescriptors(t),n={};rn(s,(r,i)=>{let a;(a=o(r,i,t))!==!1&&(n[i]=a||r)}),Object.defineProperties(t,n)},Iv=t=>{R0(t,(o,s)=>{if(Mt(t)&&["arguments","caller","callee"].indexOf(s)!==-1)return!1;const n=t[s];if(Mt(n)){if(o.enumerable=!1,"writable"in o){o.writable=!1;return}o.set||(o.set=()=>{throw Error("Can not rewrite read-only method '"+s+"'")})}})},Mv=(t,o)=>{const s={},n=r=>{r.forEach(i=>{s[i]=!0})};return xs(t)?n(t):n(String(t).split(o)),s},Rv=()=>{},Pv=(t,o)=>t!=null&&Number.isFinite(t=+t)?t:o;function jv(t){return!!(t&&Mt(t.append)&&t[T0]==="FormData"&&t[nr])}const Nv=t=>{const o=new Array(10),s=(n,r)=>{if(nn(n)){if(o.indexOf(n)>=0)return;if(sn(n))return n;if(!("toJSON"in n)){o[r]=n;const i=xs(n)?[]:{};return rn(n,(a,l)=>{const d=s(a,r+1);!vs(d)&&(i[l]=d)}),o[r]=void 0,i}}return n};return s(t,0)},Lv=Qt("AsyncFunction"),Bv=t=>t&&(nn(t)||Mt(t))&&Mt(t.then)&&Mt(t.catch),P0=((t,o)=>t?setImmediate:o?((s,n)=>(Jo.addEventListener("message",({source:r,data:i})=>{r===Jo&&i===s&&n.length&&n.shift()()},!1),r=>{n.push(r),Jo.postMessage(s,"*")}))(`axios@${Math.random()}`,[]):s=>setTimeout(s))(typeof setImmediate=="function",Mt(Jo.postMessage)),Vv=typeof queueMicrotask<"u"?queueMicrotask.bind(Jo):typeof process<"u"&&process.nextTick||P0,Uv=t=>t!=null&&Mt(t[nr]),ve={isArray:xs,isArrayBuffer:E0,isBuffer:sn,isFormData:pv,isArrayBufferView:sv,isString:nv,isNumber:A0,isBoolean:rv,isObject:nn,isPlainObject:Dn,isEmptyObject:av,isReadableStream:gv,isRequest:fv,isResponse:vv,isHeaders:hv,isUndefined:vs,isDate:iv,isFile:lv,isBlob:dv,isRegExp:Av,isFunction:Mt,isStream:cv,isURLSearchParams:mv,isTypedArray:Sv,isFileList:uv,forEach:rn,merge:Yr,extend:xv,trim:yv,stripBOM:bv,inherits:wv,toFlatObject:kv,kindOf:rr,kindOfTest:Qt,endsWith:_v,toArray:$v,forEachEntry:Dv,matchAll:Cv,isHTMLForm:Tv,hasOwnProperty:su,hasOwnProp:su,reduceDescriptors:R0,freezeMethods:Iv,toObjectSet:Mv,toCamelCase:Ev,noop:Rv,toFiniteNumber:Pv,findKey:I0,global:Jo,isContextDefined:M0,isSpecCompliantForm:jv,toJSONObject:Nv,isAsyncFn:Lv,isThenable:Bv,setImmediate:P0,asap:Vv,isIterable:Uv};function Pe(t,o,s,n,r){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",o&&(this.code=o),s&&(this.config=s),n&&(this.request=n),r&&(this.response=r,this.status=r.status?r.status:null)}ve.inherits(Pe,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:ve.toJSONObject(this.config),code:this.code,status:this.status}}});const j0=Pe.prototype,N0={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{N0[t]={value:t}});Object.defineProperties(Pe,N0);Object.defineProperty(j0,"isAxiosError",{value:!0});Pe.from=(t,o,s,n,r,i)=>{const a=Object.create(j0);ve.toFlatObject(t,a,function(u){return u!==Error.prototype},c=>c!=="isAxiosError");const l=t&&t.message?t.message:"Error",d=o==null&&t?t.code:o;return Pe.call(a,l,d,s,n,r),t&&a.cause==null&&Object.defineProperty(a,"cause",{value:t,configurable:!0}),a.name=t&&t.name||"Error",i&&Object.assign(a,i),a};const Fv=null;function Kr(t){return ve.isPlainObject(t)||ve.isArray(t)}function L0(t){return ve.endsWith(t,"[]")?t.slice(0,-2):t}function nu(t,o,s){return t?t.concat(o).map(function(r,i){return r=L0(r),!s&&i?"["+r+"]":r}).join(s?".":""):o}function Ov(t){return ve.isArray(t)&&!t.some(Kr)}const zv=ve.toFlatObject(ve,{},null,function(o){return/^is[A-Z]/.test(o)});function ir(t,o,s){if(!ve.isObject(t))throw new TypeError("target must be an object");o=o||new FormData,s=ve.toFlatObject(s,{metaTokens:!0,dots:!1,indexes:!1},!1,function(D,C){return!ve.isUndefined(C[D])});const n=s.metaTokens,r=s.visitor||u,i=s.dots,a=s.indexes,d=(s.Blob||typeof Blob<"u"&&Blob)&&ve.isSpecCompliantForm(o);if(!ve.isFunction(r))throw new TypeError("visitor must be a function");function c(h){if(h===null)return"";if(ve.isDate(h))return h.toISOString();if(ve.isBoolean(h))return h.toString();if(!d&&ve.isBlob(h))throw new Pe("Blob is not supported. Use a Buffer instead.");return ve.isArrayBuffer(h)||ve.isTypedArray(h)?d&&typeof Blob=="function"?new Blob([h]):Buffer.from(h):h}function u(h,D,C){let B=h;if(h&&!C&&typeof h=="object"){if(ve.endsWith(D,"{}"))D=n?D:D.slice(0,-2),h=JSON.stringify(h);else if(ve.isArray(h)&&Ov(h)||(ve.isFileList(h)||ve.endsWith(D,"[]"))&&(B=ve.toArray(h)))return D=L0(D),B.forEach(function(T,S){!(ve.isUndefined(T)||T===null)&&o.append(a===!0?nu([D],S,i):a===null?D:D+"[]",c(T))}),!1}return Kr(h)?!0:(o.append(nu(C,D,i),c(h)),!1)}const p=[],v=Object.assign(zv,{defaultVisitor:u,convertValue:c,isVisitable:Kr});function g(h,D){if(!ve.isUndefined(h)){if(p.indexOf(h)!==-1)throw Error("Circular reference detected in "+D.join("."));p.push(h),ve.forEach(h,function(B,_){(!(ve.isUndefined(B)||B===null)&&r.call(o,B,ve.isString(_)?_.trim():_,D,v))===!0&&g(B,D?D.concat(_):[_])}),p.pop()}}if(!ve.isObject(t))throw new TypeError("data must be an object");return g(t),o}function ru(t){const o={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(n){return o[n]})}function Ca(t,o){this._pairs=[],t&&ir(t,this,o)}const B0=Ca.prototype;B0.append=function(o,s){this._pairs.push([o,s])};B0.toString=function(o){const s=o?function(n){return o.call(this,n,ru)}:ru;return this._pairs.map(function(r){return s(r[0])+"="+s(r[1])},"").join("&")};function Hv(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function V0(t,o,s){if(!o)return t;const n=s&&s.encode||Hv;ve.isFunction(s)&&(s={serialize:s});const r=s&&s.serialize;let i;if(r?i=r(o,s):i=ve.isURLSearchParams(o)?o.toString():new Ca(o,s).toString(n),i){const a=t.indexOf("#");a!==-1&&(t=t.slice(0,a)),t+=(t.indexOf("?")===-1?"?":"&")+i}return t}class au{constructor(){this.handlers=[]}use(o,s,n){return this.handlers.push({fulfilled:o,rejected:s,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(o){this.handlers[o]&&(this.handlers[o]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(o){ve.forEach(this.handlers,function(n){n!==null&&o(n)})}}const U0={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},qv=typeof URLSearchParams<"u"?URLSearchParams:Ca,Gv=typeof FormData<"u"?FormData:null,Wv=typeof Blob<"u"?Blob:null,Jv={isBrowser:!0,classes:{URLSearchParams:qv,FormData:Gv,Blob:Wv},protocols:["http","https","file","blob","url","data"]},Ta=typeof window<"u"&&typeof document<"u",Xr=typeof navigator=="object"&&navigator||void 0,Yv=Ta&&(!Xr||["ReactNative","NativeScript","NS"].indexOf(Xr.product)<0),Kv=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",Xv=Ta&&window.location.href||"http://localhost",Zv=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Ta,hasStandardBrowserEnv:Yv,hasStandardBrowserWebWorkerEnv:Kv,navigator:Xr,origin:Xv},Symbol.toStringTag,{value:"Module"})),St={...Zv,...Jv};function Qv(t,o){return ir(t,new St.classes.URLSearchParams,{visitor:function(s,n,r,i){return St.isNode&&ve.isBuffer(s)?(this.append(n,s.toString("base64")),!1):i.defaultVisitor.apply(this,arguments)},...o})}function e1(t){return ve.matchAll(/\w+|\[(\w*)]/g,t).map(o=>o[0]==="[]"?"":o[1]||o[0])}function t1(t){const o={},s=Object.keys(t);let n;const r=s.length;let i;for(n=0;n<r;n++)i=s[n],o[i]=t[i];return o}function F0(t){function o(s,n,r,i){let a=s[i++];if(a==="__proto__")return!0;const l=Number.isFinite(+a),d=i>=s.length;return a=!a&&ve.isArray(r)?r.length:a,d?(ve.hasOwnProp(r,a)?r[a]=[r[a],n]:r[a]=n,!l):((!r[a]||!ve.isObject(r[a]))&&(r[a]=[]),o(s,n,r[a],i)&&ve.isArray(r[a])&&(r[a]=t1(r[a])),!l)}if(ve.isFormData(t)&&ve.isFunction(t.entries)){const s={};return ve.forEachEntry(t,(n,r)=>{o(e1(n),r,s,0)}),s}return null}function o1(t,o,s){if(ve.isString(t))try{return(o||JSON.parse)(t),ve.trim(t)}catch(n){if(n.name!=="SyntaxError")throw n}return(s||JSON.stringify)(t)}const an={transitional:U0,adapter:["xhr","http","fetch"],transformRequest:[function(o,s){const n=s.getContentType()||"",r=n.indexOf("application/json")>-1,i=ve.isObject(o);if(i&&ve.isHTMLForm(o)&&(o=new FormData(o)),ve.isFormData(o))return r?JSON.stringify(F0(o)):o;if(ve.isArrayBuffer(o)||ve.isBuffer(o)||ve.isStream(o)||ve.isFile(o)||ve.isBlob(o)||ve.isReadableStream(o))return o;if(ve.isArrayBufferView(o))return o.buffer;if(ve.isURLSearchParams(o))return s.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),o.toString();let l;if(i){if(n.indexOf("application/x-www-form-urlencoded")>-1)return Qv(o,this.formSerializer).toString();if((l=ve.isFileList(o))||n.indexOf("multipart/form-data")>-1){const d=this.env&&this.env.FormData;return ir(l?{"files[]":o}:o,d&&new d,this.formSerializer)}}return i||r?(s.setContentType("application/json",!1),o1(o)):o}],transformResponse:[function(o){const s=this.transitional||an.transitional,n=s&&s.forcedJSONParsing,r=this.responseType==="json";if(ve.isResponse(o)||ve.isReadableStream(o))return o;if(o&&ve.isString(o)&&(n&&!this.responseType||r)){const a=!(s&&s.silentJSONParsing)&&r;try{return JSON.parse(o,this.parseReviver)}catch(l){if(a)throw l.name==="SyntaxError"?Pe.from(l,Pe.ERR_BAD_RESPONSE,this,null,this.response):l}}return o}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:St.classes.FormData,Blob:St.classes.Blob},validateStatus:function(o){return o>=200&&o<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};ve.forEach(["delete","get","head","post","put","patch"],t=>{an.headers[t]={}});const s1=ve.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),n1=t=>{const o={};let s,n,r;return t&&t.split(`
`).forEach(function(a){r=a.indexOf(":"),s=a.substring(0,r).trim().toLowerCase(),n=a.substring(r+1).trim(),!(!s||o[s]&&s1[s])&&(s==="set-cookie"?o[s]?o[s].push(n):o[s]=[n]:o[s]=o[s]?o[s]+", "+n:n)}),o},iu=Symbol("internals");function Ts(t){return t&&String(t).trim().toLowerCase()}function Cn(t){return t===!1||t==null?t:ve.isArray(t)?t.map(Cn):String(t)}function r1(t){const o=Object.create(null),s=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let n;for(;n=s.exec(t);)o[n[1]]=n[2];return o}const a1=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function Sr(t,o,s,n,r){if(ve.isFunction(n))return n.call(this,o,s);if(r&&(o=s),!!ve.isString(o)){if(ve.isString(n))return o.indexOf(n)!==-1;if(ve.isRegExp(n))return n.test(o)}}function i1(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(o,s,n)=>s.toUpperCase()+n)}function l1(t,o){const s=ve.toCamelCase(" "+o);["get","set","has"].forEach(n=>{Object.defineProperty(t,n+s,{value:function(r,i,a){return this[n].call(this,o,r,i,a)},configurable:!0})})}let Rt=class{constructor(o){o&&this.set(o)}set(o,s,n){const r=this;function i(l,d,c){const u=Ts(d);if(!u)throw new Error("header name must be a non-empty string");const p=ve.findKey(r,u);(!p||r[p]===void 0||c===!0||c===void 0&&r[p]!==!1)&&(r[p||d]=Cn(l))}const a=(l,d)=>ve.forEach(l,(c,u)=>i(c,u,d));if(ve.isPlainObject(o)||o instanceof this.constructor)a(o,s);else if(ve.isString(o)&&(o=o.trim())&&!a1(o))a(n1(o),s);else if(ve.isObject(o)&&ve.isIterable(o)){let l={},d,c;for(const u of o){if(!ve.isArray(u))throw TypeError("Object iterator must return a key-value pair");l[c=u[0]]=(d=l[c])?ve.isArray(d)?[...d,u[1]]:[d,u[1]]:u[1]}a(l,s)}else o!=null&&i(s,o,n);return this}get(o,s){if(o=Ts(o),o){const n=ve.findKey(this,o);if(n){const r=this[n];if(!s)return r;if(s===!0)return r1(r);if(ve.isFunction(s))return s.call(this,r,n);if(ve.isRegExp(s))return s.exec(r);throw new TypeError("parser must be boolean|regexp|function")}}}has(o,s){if(o=Ts(o),o){const n=ve.findKey(this,o);return!!(n&&this[n]!==void 0&&(!s||Sr(this,this[n],n,s)))}return!1}delete(o,s){const n=this;let r=!1;function i(a){if(a=Ts(a),a){const l=ve.findKey(n,a);l&&(!s||Sr(n,n[l],l,s))&&(delete n[l],r=!0)}}return ve.isArray(o)?o.forEach(i):i(o),r}clear(o){const s=Object.keys(this);let n=s.length,r=!1;for(;n--;){const i=s[n];(!o||Sr(this,this[i],i,o,!0))&&(delete this[i],r=!0)}return r}normalize(o){const s=this,n={};return ve.forEach(this,(r,i)=>{const a=ve.findKey(n,i);if(a){s[a]=Cn(r),delete s[i];return}const l=o?i1(i):String(i).trim();l!==i&&delete s[i],s[l]=Cn(r),n[l]=!0}),this}concat(...o){return this.constructor.concat(this,...o)}toJSON(o){const s=Object.create(null);return ve.forEach(this,(n,r)=>{n!=null&&n!==!1&&(s[r]=o&&ve.isArray(n)?n.join(", "):n)}),s}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([o,s])=>o+": "+s).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(o){return o instanceof this?o:new this(o)}static concat(o,...s){const n=new this(o);return s.forEach(r=>n.set(r)),n}static accessor(o){const n=(this[iu]=this[iu]={accessors:{}}).accessors,r=this.prototype;function i(a){const l=Ts(a);n[l]||(l1(r,a),n[l]=!0)}return ve.isArray(o)?o.forEach(i):i(o),this}};Rt.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);ve.reduceDescriptors(Rt.prototype,({value:t},o)=>{let s=o[0].toUpperCase()+o.slice(1);return{get:()=>t,set(n){this[s]=n}}});ve.freezeMethods(Rt);function Dr(t,o){const s=this||an,n=o||s,r=Rt.from(n.headers);let i=n.data;return ve.forEach(t,function(l){i=l.call(s,i,r.normalize(),o?o.status:void 0)}),r.normalize(),i}function O0(t){return!!(t&&t.__CANCEL__)}function bs(t,o,s){Pe.call(this,t??"canceled",Pe.ERR_CANCELED,o,s),this.name="CanceledError"}ve.inherits(bs,Pe,{__CANCEL__:!0});function z0(t,o,s){const n=s.config.validateStatus;!s.status||!n||n(s.status)?t(s):o(new Pe("Request failed with status code "+s.status,[Pe.ERR_BAD_REQUEST,Pe.ERR_BAD_RESPONSE][Math.floor(s.status/100)-4],s.config,s.request,s))}function d1(t){const o=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return o&&o[1]||""}function u1(t,o){t=t||10;const s=new Array(t),n=new Array(t);let r=0,i=0,a;return o=o!==void 0?o:1e3,function(d){const c=Date.now(),u=n[i];a||(a=c),s[r]=d,n[r]=c;let p=i,v=0;for(;p!==r;)v+=s[p++],p=p%t;if(r=(r+1)%t,r===i&&(i=(i+1)%t),c-a<o)return;const g=u&&c-u;return g?Math.round(v*1e3/g):void 0}}function c1(t,o){let s=0,n=1e3/o,r,i;const a=(c,u=Date.now())=>{s=u,r=null,i&&(clearTimeout(i),i=null),t(...c)};return[(...c)=>{const u=Date.now(),p=u-s;p>=n?a(c,u):(r=c,i||(i=setTimeout(()=>{i=null,a(r)},n-p)))},()=>r&&a(r)]}const On=(t,o,s=3)=>{let n=0;const r=u1(50,250);return c1(i=>{const a=i.loaded,l=i.lengthComputable?i.total:void 0,d=a-n,c=r(d),u=a<=l;n=a;const p={loaded:a,total:l,progress:l?a/l:void 0,bytes:d,rate:c||void 0,estimated:c&&l&&u?(l-a)/c:void 0,event:i,lengthComputable:l!=null,[o?"download":"upload"]:!0};t(p)},s)},lu=(t,o)=>{const s=t!=null;return[n=>o[0]({lengthComputable:s,total:t,loaded:n}),o[1]]},du=t=>(...o)=>ve.asap(()=>t(...o)),p1=St.hasStandardBrowserEnv?((t,o)=>s=>(s=new URL(s,St.origin),t.protocol===s.protocol&&t.host===s.host&&(o||t.port===s.port)))(new URL(St.origin),St.navigator&&/(msie|trident)/i.test(St.navigator.userAgent)):()=>!0,m1=St.hasStandardBrowserEnv?{write(t,o,s,n,r,i){const a=[t+"="+encodeURIComponent(o)];ve.isNumber(s)&&a.push("expires="+new Date(s).toGMTString()),ve.isString(n)&&a.push("path="+n),ve.isString(r)&&a.push("domain="+r),i===!0&&a.push("secure"),document.cookie=a.join("; ")},read(t){const o=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return o?decodeURIComponent(o[3]):null},remove(t){this.write(t,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function g1(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function f1(t,o){return o?t.replace(/\/?\/$/,"")+"/"+o.replace(/^\/+/,""):t}function H0(t,o,s){let n=!g1(o);return t&&(n||s==!1)?f1(t,o):o}const uu=t=>t instanceof Rt?{...t}:t;function ts(t,o){o=o||{};const s={};function n(c,u,p,v){return ve.isPlainObject(c)&&ve.isPlainObject(u)?ve.merge.call({caseless:v},c,u):ve.isPlainObject(u)?ve.merge({},u):ve.isArray(u)?u.slice():u}function r(c,u,p,v){if(ve.isUndefined(u)){if(!ve.isUndefined(c))return n(void 0,c,p,v)}else return n(c,u,p,v)}function i(c,u){if(!ve.isUndefined(u))return n(void 0,u)}function a(c,u){if(ve.isUndefined(u)){if(!ve.isUndefined(c))return n(void 0,c)}else return n(void 0,u)}function l(c,u,p){if(p in o)return n(c,u);if(p in t)return n(void 0,c)}const d={url:i,method:i,data:i,baseURL:a,transformRequest:a,transformResponse:a,paramsSerializer:a,timeout:a,timeoutMessage:a,withCredentials:a,withXSRFToken:a,adapter:a,responseType:a,xsrfCookieName:a,xsrfHeaderName:a,onUploadProgress:a,onDownloadProgress:a,decompress:a,maxContentLength:a,maxBodyLength:a,beforeRedirect:a,transport:a,httpAgent:a,httpsAgent:a,cancelToken:a,socketPath:a,responseEncoding:a,validateStatus:l,headers:(c,u,p)=>r(uu(c),uu(u),p,!0)};return ve.forEach(Object.keys({...t,...o}),function(u){const p=d[u]||r,v=p(t[u],o[u],u);ve.isUndefined(v)&&p!==l||(s[u]=v)}),s}const q0=t=>{const o=ts({},t);let{data:s,withXSRFToken:n,xsrfHeaderName:r,xsrfCookieName:i,headers:a,auth:l}=o;if(o.headers=a=Rt.from(a),o.url=V0(H0(o.baseURL,o.url,o.allowAbsoluteUrls),t.params,t.paramsSerializer),l&&a.set("Authorization","Basic "+btoa((l.username||"")+":"+(l.password?unescape(encodeURIComponent(l.password)):""))),ve.isFormData(s)){if(St.hasStandardBrowserEnv||St.hasStandardBrowserWebWorkerEnv)a.setContentType(void 0);else if(ve.isFunction(s.getHeaders)){const d=s.getHeaders(),c=["content-type","content-length"];Object.entries(d).forEach(([u,p])=>{c.includes(u.toLowerCase())&&a.set(u,p)})}}if(St.hasStandardBrowserEnv&&(n&&ve.isFunction(n)&&(n=n(o)),n||n!==!1&&p1(o.url))){const d=r&&i&&m1.read(i);d&&a.set(r,d)}return o},v1=typeof XMLHttpRequest<"u",h1=v1&&function(t){return new Promise(function(s,n){const r=q0(t);let i=r.data;const a=Rt.from(r.headers).normalize();let{responseType:l,onUploadProgress:d,onDownloadProgress:c}=r,u,p,v,g,h;function D(){g&&g(),h&&h(),r.cancelToken&&r.cancelToken.unsubscribe(u),r.signal&&r.signal.removeEventListener("abort",u)}let C=new XMLHttpRequest;C.open(r.method.toUpperCase(),r.url,!0),C.timeout=r.timeout;function B(){if(!C)return;const T=Rt.from("getAllResponseHeaders"in C&&C.getAllResponseHeaders()),k={data:!l||l==="text"||l==="json"?C.responseText:C.response,status:C.status,statusText:C.statusText,headers:T,config:t,request:C};z0(function(x){s(x),D()},function(x){n(x),D()},k),C=null}"onloadend"in C?C.onloadend=B:C.onreadystatechange=function(){!C||C.readyState!==4||C.status===0&&!(C.responseURL&&C.responseURL.indexOf("file:")===0)||setTimeout(B)},C.onabort=function(){C&&(n(new Pe("Request aborted",Pe.ECONNABORTED,t,C)),C=null)},C.onerror=function(S){const k=S&&S.message?S.message:"Network Error",b=new Pe(k,Pe.ERR_NETWORK,t,C);b.event=S||null,n(b),C=null},C.ontimeout=function(){let S=r.timeout?"timeout of "+r.timeout+"ms exceeded":"timeout exceeded";const k=r.transitional||U0;r.timeoutErrorMessage&&(S=r.timeoutErrorMessage),n(new Pe(S,k.clarifyTimeoutError?Pe.ETIMEDOUT:Pe.ECONNABORTED,t,C)),C=null},i===void 0&&a.setContentType(null),"setRequestHeader"in C&&ve.forEach(a.toJSON(),function(S,k){C.setRequestHeader(k,S)}),ve.isUndefined(r.withCredentials)||(C.withCredentials=!!r.withCredentials),l&&l!=="json"&&(C.responseType=r.responseType),c&&([v,h]=On(c,!0),C.addEventListener("progress",v)),d&&C.upload&&([p,g]=On(d),C.upload.addEventListener("progress",p),C.upload.addEventListener("loadend",g)),(r.cancelToken||r.signal)&&(u=T=>{C&&(n(!T||T.type?new bs(null,t,C):T),C.abort(),C=null)},r.cancelToken&&r.cancelToken.subscribe(u),r.signal&&(r.signal.aborted?u():r.signal.addEventListener("abort",u)));const _=d1(r.url);if(_&&St.protocols.indexOf(_)===-1){n(new Pe("Unsupported protocol "+_+":",Pe.ERR_BAD_REQUEST,t));return}C.send(i||null)})},y1=(t,o)=>{const{length:s}=t=t?t.filter(Boolean):[];if(o||s){let n=new AbortController,r;const i=function(c){if(!r){r=!0,l();const u=c instanceof Error?c:this.reason;n.abort(u instanceof Pe?u:new bs(u instanceof Error?u.message:u))}};let a=o&&setTimeout(()=>{a=null,i(new Pe(`timeout ${o} of ms exceeded`,Pe.ETIMEDOUT))},o);const l=()=>{t&&(a&&clearTimeout(a),a=null,t.forEach(c=>{c.unsubscribe?c.unsubscribe(i):c.removeEventListener("abort",i)}),t=null)};t.forEach(c=>c.addEventListener("abort",i));const{signal:d}=n;return d.unsubscribe=()=>ve.asap(l),d}},x1=function*(t,o){let s=t.byteLength;if(s<o){yield t;return}let n=0,r;for(;n<s;)r=n+o,yield t.slice(n,r),n=r},b1=async function*(t,o){for await(const s of w1(t))yield*x1(s,o)},w1=async function*(t){if(t[Symbol.asyncIterator]){yield*t;return}const o=t.getReader();try{for(;;){const{done:s,value:n}=await o.read();if(s)break;yield n}}finally{await o.cancel()}},cu=(t,o,s,n)=>{const r=b1(t,o);let i=0,a,l=d=>{a||(a=!0,n&&n(d))};return new ReadableStream({async pull(d){try{const{done:c,value:u}=await r.next();if(c){l(),d.close();return}let p=u.byteLength;if(s){let v=i+=p;s(v)}d.enqueue(new Uint8Array(u))}catch(c){throw l(c),c}},cancel(d){return l(d),r.return()}},{highWaterMark:2})},pu=64*1024,{isFunction:hn}=ve,k1=(({Request:t,Response:o})=>({Request:t,Response:o}))(ve.global),{ReadableStream:mu,TextEncoder:gu}=ve.global,fu=(t,...o)=>{try{return!!t(...o)}catch{return!1}},_1=t=>{t=ve.merge.call({skipUndefined:!0},k1,t);const{fetch:o,Request:s,Response:n}=t,r=o?hn(o):typeof fetch=="function",i=hn(s),a=hn(n);if(!r)return!1;const l=r&&hn(mu),d=r&&(typeof gu=="function"?(h=>D=>h.encode(D))(new gu):async h=>new Uint8Array(await new s(h).arrayBuffer())),c=i&&l&&fu(()=>{let h=!1;const D=new s(St.origin,{body:new mu,method:"POST",get duplex(){return h=!0,"half"}}).headers.has("Content-Type");return h&&!D}),u=a&&l&&fu(()=>ve.isReadableStream(new n("").body)),p={stream:u&&(h=>h.body)};r&&["text","arrayBuffer","blob","formData","stream"].forEach(h=>{!p[h]&&(p[h]=(D,C)=>{let B=D&&D[h];if(B)return B.call(D);throw new Pe(`Response type '${h}' is not supported`,Pe.ERR_NOT_SUPPORT,C)})});const v=async h=>{if(h==null)return 0;if(ve.isBlob(h))return h.size;if(ve.isSpecCompliantForm(h))return(await new s(St.origin,{method:"POST",body:h}).arrayBuffer()).byteLength;if(ve.isArrayBufferView(h)||ve.isArrayBuffer(h))return h.byteLength;if(ve.isURLSearchParams(h)&&(h=h+""),ve.isString(h))return(await d(h)).byteLength},g=async(h,D)=>{const C=ve.toFiniteNumber(h.getContentLength());return C??v(D)};return async h=>{let{url:D,method:C,data:B,signal:_,cancelToken:T,timeout:S,onDownloadProgress:k,onUploadProgress:b,responseType:x,headers:F,withCredentials:E="same-origin",fetchOptions:O}=q0(h),N=o||fetch;x=x?(x+"").toLowerCase():"text";let L=y1([_,T&&T.toAbortSignal()],S),M=null;const X=L&&L.unsubscribe&&(()=>{L.unsubscribe()});let ee;try{if(b&&c&&C!=="get"&&C!=="head"&&(ee=await g(F,B))!==0){let I=new s(D,{method:"POST",body:B,duplex:"half"}),P;if(ve.isFormData(B)&&(P=I.headers.get("content-type"))&&F.setContentType(P),I.body){const[W,we]=lu(ee,On(du(b)));B=cu(I.body,pu,W,we)}}ve.isString(E)||(E=E?"include":"omit");const oe=i&&"credentials"in s.prototype,ae={...O,signal:L,method:C.toUpperCase(),headers:F.normalize().toJSON(),body:B,duplex:"half",credentials:oe?E:void 0};M=i&&new s(D,ae);let H=await(i?N(M,O):N(D,ae));const J=u&&(x==="stream"||x==="response");if(u&&(k||J&&X)){const I={};["status","statusText","headers"].forEach(me=>{I[me]=H[me]});const P=ve.toFiniteNumber(H.headers.get("content-length")),[W,we]=k&&lu(P,On(du(k),!0))||[];H=new n(cu(H.body,pu,W,()=>{we&&we(),X&&X()}),I)}x=x||"text";let z=await p[ve.findKey(p,x)||"text"](H,h);return!J&&X&&X(),await new Promise((I,P)=>{z0(I,P,{data:z,headers:Rt.from(H.headers),status:H.status,statusText:H.statusText,config:h,request:M})})}catch(oe){throw X&&X(),oe&&oe.name==="TypeError"&&/Load failed|fetch/i.test(oe.message)?Object.assign(new Pe("Network Error",Pe.ERR_NETWORK,h,M),{cause:oe.cause||oe}):Pe.from(oe,oe&&oe.code,h,M)}}},$1=new Map,G0=t=>{let o=t?t.env:{};const{fetch:s,Request:n,Response:r}=o,i=[n,r,s];let a=i.length,l=a,d,c,u=$1;for(;l--;)d=i[l],c=u.get(d),c===void 0&&u.set(d,c=l?new Map:_1(o)),u=c;return c};G0();const Zr={http:Fv,xhr:h1,fetch:{get:G0}};ve.forEach(Zr,(t,o)=>{if(t){try{Object.defineProperty(t,"name",{value:o})}catch{}Object.defineProperty(t,"adapterName",{value:o})}});const vu=t=>`- ${t}`,S1=t=>ve.isFunction(t)||t===null||t===!1,W0={getAdapter:(t,o)=>{t=ve.isArray(t)?t:[t];const{length:s}=t;let n,r;const i={};for(let a=0;a<s;a++){n=t[a];let l;if(r=n,!S1(n)&&(r=Zr[(l=String(n)).toLowerCase()],r===void 0))throw new Pe(`Unknown adapter '${l}'`);if(r&&(ve.isFunction(r)||(r=r.get(o))))break;i[l||"#"+a]=r}if(!r){const a=Object.entries(i).map(([d,c])=>`adapter ${d} `+(c===!1?"is not supported by the environment":"is not available in the build"));let l=s?a.length>1?`since :
`+a.map(vu).join(`
`):" "+vu(a[0]):"as no adapter specified";throw new Pe("There is no suitable adapter to dispatch the request "+l,"ERR_NOT_SUPPORT")}return r},adapters:Zr};function Cr(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new bs(null,t)}function hu(t){return Cr(t),t.headers=Rt.from(t.headers),t.data=Dr.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),W0.getAdapter(t.adapter||an.adapter,t)(t).then(function(n){return Cr(t),n.data=Dr.call(t,t.transformResponse,n),n.headers=Rt.from(n.headers),n},function(n){return O0(n)||(Cr(t),n&&n.response&&(n.response.data=Dr.call(t,t.transformResponse,n.response),n.response.headers=Rt.from(n.response.headers))),Promise.reject(n)})}const J0="1.12.2",lr={};["object","boolean","number","function","string","symbol"].forEach((t,o)=>{lr[t]=function(n){return typeof n===t||"a"+(o<1?"n ":" ")+t}});const yu={};lr.transitional=function(o,s,n){function r(i,a){return"[Axios v"+J0+"] Transitional option '"+i+"'"+a+(n?". "+n:"")}return(i,a,l)=>{if(o===!1)throw new Pe(r(a," has been removed"+(s?" in "+s:"")),Pe.ERR_DEPRECATED);return s&&!yu[a]&&(yu[a]=!0,console.warn(r(a," has been deprecated since v"+s+" and will be removed in the near future"))),o?o(i,a,l):!0}};lr.spelling=function(o){return(s,n)=>(console.warn(`${n} is likely a misspelling of ${o}`),!0)};function D1(t,o,s){if(typeof t!="object")throw new Pe("options must be an object",Pe.ERR_BAD_OPTION_VALUE);const n=Object.keys(t);let r=n.length;for(;r-- >0;){const i=n[r],a=o[i];if(a){const l=t[i],d=l===void 0||a(l,i,t);if(d!==!0)throw new Pe("option "+i+" must be "+d,Pe.ERR_BAD_OPTION_VALUE);continue}if(s!==!0)throw new Pe("Unknown option "+i,Pe.ERR_BAD_OPTION)}}const Tn={assertOptions:D1,validators:lr},to=Tn.validators;let Xo=class{constructor(o){this.defaults=o||{},this.interceptors={request:new au,response:new au}}async request(o,s){try{return await this._request(o,s)}catch(n){if(n instanceof Error){let r={};Error.captureStackTrace?Error.captureStackTrace(r):r=new Error;const i=r.stack?r.stack.replace(/^.+\n/,""):"";try{n.stack?i&&!String(n.stack).endsWith(i.replace(/^.+\n.+\n/,""))&&(n.stack+=`
`+i):n.stack=i}catch{}}throw n}}_request(o,s){typeof o=="string"?(s=s||{},s.url=o):s=o||{},s=ts(this.defaults,s);const{transitional:n,paramsSerializer:r,headers:i}=s;n!==void 0&&Tn.assertOptions(n,{silentJSONParsing:to.transitional(to.boolean),forcedJSONParsing:to.transitional(to.boolean),clarifyTimeoutError:to.transitional(to.boolean)},!1),r!=null&&(ve.isFunction(r)?s.paramsSerializer={serialize:r}:Tn.assertOptions(r,{encode:to.function,serialize:to.function},!0)),s.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?s.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:s.allowAbsoluteUrls=!0),Tn.assertOptions(s,{baseUrl:to.spelling("baseURL"),withXsrfToken:to.spelling("withXSRFToken")},!0),s.method=(s.method||this.defaults.method||"get").toLowerCase();let a=i&&ve.merge(i.common,i[s.method]);i&&ve.forEach(["delete","get","head","post","put","patch","common"],h=>{delete i[h]}),s.headers=Rt.concat(a,i);const l=[];let d=!0;this.interceptors.request.forEach(function(D){typeof D.runWhen=="function"&&D.runWhen(s)===!1||(d=d&&D.synchronous,l.unshift(D.fulfilled,D.rejected))});const c=[];this.interceptors.response.forEach(function(D){c.push(D.fulfilled,D.rejected)});let u,p=0,v;if(!d){const h=[hu.bind(this),void 0];for(h.unshift(...l),h.push(...c),v=h.length,u=Promise.resolve(s);p<v;)u=u.then(h[p++],h[p++]);return u}v=l.length;let g=s;for(;p<v;){const h=l[p++],D=l[p++];try{g=h(g)}catch(C){D.call(this,C);break}}try{u=hu.call(this,g)}catch(h){return Promise.reject(h)}for(p=0,v=c.length;p<v;)u=u.then(c[p++],c[p++]);return u}getUri(o){o=ts(this.defaults,o);const s=H0(o.baseURL,o.url,o.allowAbsoluteUrls);return V0(s,o.params,o.paramsSerializer)}};ve.forEach(["delete","get","head","options"],function(o){Xo.prototype[o]=function(s,n){return this.request(ts(n||{},{method:o,url:s,data:(n||{}).data}))}});ve.forEach(["post","put","patch"],function(o){function s(n){return function(i,a,l){return this.request(ts(l||{},{method:o,headers:n?{"Content-Type":"multipart/form-data"}:{},url:i,data:a}))}}Xo.prototype[o]=s(),Xo.prototype[o+"Form"]=s(!0)});let C1=class Y0{constructor(o){if(typeof o!="function")throw new TypeError("executor must be a function.");let s;this.promise=new Promise(function(i){s=i});const n=this;this.promise.then(r=>{if(!n._listeners)return;let i=n._listeners.length;for(;i-- >0;)n._listeners[i](r);n._listeners=null}),this.promise.then=r=>{let i;const a=new Promise(l=>{n.subscribe(l),i=l}).then(r);return a.cancel=function(){n.unsubscribe(i)},a},o(function(i,a,l){n.reason||(n.reason=new bs(i,a,l),s(n.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(o){if(this.reason){o(this.reason);return}this._listeners?this._listeners.push(o):this._listeners=[o]}unsubscribe(o){if(!this._listeners)return;const s=this._listeners.indexOf(o);s!==-1&&this._listeners.splice(s,1)}toAbortSignal(){const o=new AbortController,s=n=>{o.abort(n)};return this.subscribe(s),o.signal.unsubscribe=()=>this.unsubscribe(s),o.signal}static source(){let o;return{token:new Y0(function(r){o=r}),cancel:o}}};function T1(t){return function(s){return t.apply(null,s)}}function E1(t){return ve.isObject(t)&&t.isAxiosError===!0}const Qr={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Qr).forEach(([t,o])=>{Qr[o]=t});function K0(t){const o=new Xo(t),s=C0(Xo.prototype.request,o);return ve.extend(s,Xo.prototype,o,{allOwnKeys:!0}),ve.extend(s,o,null,{allOwnKeys:!0}),s.create=function(r){return K0(ts(t,r))},s}const Te=K0(an);Te.Axios=Xo;Te.CanceledError=bs;Te.CancelToken=C1;Te.isCancel=O0;Te.VERSION=J0;Te.toFormData=ir;Te.AxiosError=Pe;Te.Cancel=Te.CanceledError;Te.all=function(o){return Promise.all(o)};Te.spread=T1;Te.isAxiosError=E1;Te.mergeConfig=ts;Te.AxiosHeaders=Rt;Te.formToJSON=t=>F0(ve.isHTMLForm(t)?new FormData(t):t);Te.getAdapter=W0.getAdapter;Te.HttpStatusCode=Qr;Te.default=Te;const{Axios:Uoe,AxiosError:Foe,CanceledError:Ooe,isCancel:zoe,CancelToken:Hoe,VERSION:qoe,all:Goe,Cancel:Woe,isAxiosError:Joe,spread:Yoe,toFormData:Koe,AxiosHeaders:Xoe,HttpStatusCode:Zoe,formToJSON:Qoe,getAdapter:ese,mergeConfig:tse}=Te,A1="https://api.templecloud.in/api/v1",ce=Te.create({baseURL:A1,timeout:3e4,headers:{"Content-Type":"application/json",Accept:"application/json"}});ce.interceptors.request.use(t=>{const o=localStorage.getItem("auth_token");if(o&&(t.headers.Authorization=`Bearer ${o}`),!t.url.includes("/auth/")){const n=localStorage.getItem("current_tenant_id");n&&(t.headers["X-Tenant-ID"]=n);const r=localStorage.getItem("current_entity_id");r&&(t.headers["X-Entity-ID"]=r)}return t},t=>(console.error("Request error:",t),Promise.reject(t)));ce.interceptors.response.use(t=>t,t=>{var o,s,n;return console.error("API Error:",t.message),((o=t.response)==null?void 0:o.status)===401&&((n=(s=t.config)==null?void 0:s.url)!=null&&n.includes("/auth/login")||(localStorage.removeItem("auth_token"),localStorage.removeItem("user_data"),localStorage.removeItem("current_tenant_id"),delete ce.defaults.headers.common.Authorization,delete ce.defaults.headers.common["X-Tenant-ID"],window.location.pathname.includes("/login")||(window.location.href="/login?error=session_expired"))),Promise.reject(t)});const X0={login:t=>ce.post("/auth/login",t),register:t=>ce.post("/auth/register",t),logout:()=>ce.post("/auth/logout"),refreshToken:()=>ce.post("/auth/refresh"),getProfile:()=>ce.get("/auth/me"),getPublicRoles:()=>ce.get("/auth/public-roles")},Z0={create:t=>ce.post("/tenant/temples",t),getAll:()=>ce.get("/tenant/temples"),getById:t=>ce.get(`/tenant/temples/${t}`),update:(t,o)=>ce.put(`/tenant/temples/${t}`,o),delete:t=>ce.delete(`/tenant/temples/${t}`)},I1={devotee:{getProfile:()=>ce.get("/devotee/profile"),updateProfile:t=>ce.put("/devotee/profile",t),joinTemple:t=>ce.post("/devotee/join-temple",{templeId:t})},volunteer:{getProfile:()=>ce.get("/volunteer/profile"),updateProfile:t=>ce.put("/volunteer/profile",t),joinTemple:t=>ce.post("/volunteer/join-temple",{templeId:t})}},M1={getTemples:()=>ce.get("/superadmin/temples"),getPendingTemples:()=>ce.get("/superadmin/temples/pending"),approveTemple:(t,o)=>ce.post(`/superadmin/temples/${t}/approve`,{notes:o}),rejectTemple:(t,o)=>ce.post(`/superadmin/temples/${t}/reject`,{reason:o})},R1={getAll:()=>ce.get("/events"),getUpcoming:()=>ce.get("/events/upcoming"),getById:t=>ce.get(`/events/${t}`),getStats:()=>ce.get("/events/stats"),create:t=>ce.post("/events",t),update:(t,o)=>ce.put(`/events/${t}`,o),delete:t=>ce.delete(`/events/${t}`),getRSVPs:t=>ce.get(`/event-rsvps/${t}`),createRSVP:t=>ce.post(`/event-rsvps/${t}`,{})},P1={getEntityDashboard:t=>ce.get(`/entities/${t}/dashboard`),getEntityEvents:(t,o=3)=>ce.get(`/events/upcoming?entity_id=${t}&limit=${o}`),getEntityDonors:(t,o=5)=>ce.get(`/donations/top?entity_id=${t}&limit=${o}`),getEntityNotifications:(t,o=5)=>ce.get(`/notifications?entity_id=${t}&limit=${o}`)},j1={getTemplates:()=>ce.get("/notifications/templates"),createTemplate:t=>ce.post("/notifications/templates",t),updateTemplate:(t,o)=>ce.put(`/notifications/templates/${t}`,o),deleteTemplate:t=>ce.delete(`/notifications/templates/${t}`),sendBulk:(t,o)=>ce.post(`/entities/${t}/communication/bulk-send`,o),previewBulk:(t,o)=>ce.post(`/entities/${t}/communication/preview`,o),getHistory:(t,o)=>ce.get(`/entities/${t}/communication/history?${o}`),getMessageDetails:(t,o)=>ce.get(`/entities/${t}/communication/messages/${o}`),getDevotees:(t,o)=>ce.get(`/entities/${t}/devotees/for-messaging?${o}`),sendNotification:(t,o)=>ce.post(`/entities/${t}/communication/notifications`,o),getUnreadNotifications:(t,o)=>ce.get(`/entities/${t}/users/${o}/notifications/unread`),markNotificationAsRead:(t,o,s)=>ce.put(`/entities/${t}/users/${o}/notifications/${s}/read`),getStats:(t,o)=>ce.get(`/entities/${t}/communication/stats?${o}`),sendDirectNotification:t=>ce.post("/notifications/send",t)},N1={listInApp:(t=20)=>ce.get(`/notifications/inapp?limit=${t}`),markInAppRead:t=>ce.put(`/notifications/inapp/${t}/read`)},ea={getActivities:(t,o={})=>{const s=new URLSearchParams(o).toString();return ce.get(`/entities/${t}/reports/activities?${s}`)},downloadActivities:(t,o={})=>{const s=new URLSearchParams(o).toString();return ce.get(`/entities/${t}/reports/activities?${s}`,{responseType:"blob",headers:{Accept:"application/octet-stream"}})},getActivitiesByType:(t,o,s={})=>{const n={type:o,date_range:s.dateRange||"weekly",...s};return ea.getActivities(t,n)},downloadActivitiesByType:(t,o,s,n={})=>{const r={type:o,format:s,date_range:n.dateRange||"weekly",...n};return ea.downloadActivities(t,r)},getTempleRegistered:(t,o={})=>{const s=new URLSearchParams(o).toString();return ce.get(`/entities/${t}/reports/temple-registered?${s}`)},downloadTempleRegistered:(t,o={})=>{const s=new URLSearchParams(o).toString();return ce.get(`/entities/${t}/reports/temple-registered?${s}`,{responseType:"blob",headers:{Accept:"application/octet-stream"}})},getDevoteeBirthdays:(t,o={})=>{const s=new URLSearchParams(o).toString();return ce.get(`/entities/${t}/reports/devotee-birthdays?${s}`)},downloadDevoteeBirthdays:(t,o={})=>{const s=new URLSearchParams(o).toString();return ce.get(`/entities/${t}/reports/devotee-birthdays?${s}`,{responseType:"blob",headers:{Accept:"application/octet-stream"}})}},Le={auth:X0,temple:Z0,user:I1,admin:M1,event:R1,dashboard:P1,communication:j1,inapp:N1,reports:ea},ose=Object.freeze(Object.defineProperty({__proto__:null,apiClient:Le,authAPI:X0,default:ce,templeAPI:Z0},Symbol.toStringTag,{value:"Module"})),yn={SUPER_ADMIN:"super_admin",TENANT:"tenant",DEVOTEE:"devotee",VOLUNTEER:"volunteer"},Tr={PENDING:"pending",APPROVED:"approved",REJECTED:"rejected"},L1="modulepreload",B1=function(t){return"/"+t},xu={},ft=function(o,s,n){let r=Promise.resolve();if(s&&s.length>0){let a=function(c){return Promise.all(c.map(u=>Promise.resolve(u).then(p=>({status:"fulfilled",value:p}),p=>({status:"rejected",reason:p}))))};document.getElementsByTagName("link");const l=document.querySelector("meta[property=csp-nonce]"),d=(l==null?void 0:l.nonce)||(l==null?void 0:l.getAttribute("nonce"));r=a(s.map(c=>{if(c=B1(c),c in xu)return;xu[c]=!0;const u=c.endsWith(".css"),p=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${p}`))return;const v=document.createElement("link");if(v.rel=u?"stylesheet":L1,u||(v.as="script"),v.crossOrigin="",v.href=c,d&&v.setAttribute("nonce",d),document.head.appendChild(v),u)return new Promise((g,h)=>{v.addEventListener("load",g),v.addEventListener("error",()=>h(new Error(`Unable to preload CSS for ${c}`)))})}))}function i(a){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=a,window.dispatchEvent(l),!l.defaultPrevented)throw a}return r.then(a=>{for(const l of a||[])l.status==="rejected"&&i(l.reason);return o().catch(i)})},Es=V([]);let V1=0;const je=()=>{const t={SUCCESS:{icon:"",bgClass:"bg-green-50 border-green-200",textClass:"text-green-800",iconClass:"text-green-600"},ERROR:{icon:"",bgClass:"bg-red-50 border-red-200",textClass:"text-red-800",iconClass:"text-red-600"},WARNING:{icon:"",bgClass:"bg-yellow-50 border-yellow-200",textClass:"text-yellow-800",iconClass:"text-yellow-600"},INFO:{icon:"",bgClass:"bg-indigo-50 border-indigo-200",textClass:"text-indigo-800",iconClass:"text-indigo-600"}};function o(c,u="info",p=5e3){let v,g,h;return typeof c=="object"?(v=c.message,g=(c.type||"info").toUpperCase(),h=c.duration||5e3):(v=c,g=(u||"info").toUpperCase(),h=p),s(v,g,h)}const s=(c,u="INFO",p=5e3)=>{const v=++V1,g={id:v,message:c,type:u,duration:p,...t[u],timestamp:Date.now()};return Es.value.push(g),p>0&&setTimeout(()=>{n(v)},p),v},n=c=>{const u=Es.value.findIndex(p=>p.id===c);u>-1&&Es.value.splice(u,1)};return{toasts:Es,showToast:o,addToast:s,removeToast:n,clearAllToasts:()=>{Es.value=[]},success:(c,u=5e3)=>s(c,"SUCCESS",u),error:(c,u=7e3)=>s(c,"ERROR",u),warning:(c,u=6e3)=>s(c,"WARNING",u),info:(c,u=5e3)=>s(c,"INFO",u),TOAST_TYPES:t}},Q0=()=>{const t=localStorage.getItem("temple_auth_token")||localStorage.getItem("auth_token");return t||(console.log("No auth token found in localStorage"),null)},ut=()=>{const t=Q0();return t!=null&&t!==""},ep=()=>{localStorage.removeItem("temple_auth_token"),localStorage.removeItem("temple_user_data"),localStorage.removeItem("temple_user_role"),localStorage.removeItem("auth_token"),localStorage.removeItem("user_data")},bu=()=>{ep(),Zs.currentRoute.value.path!=="/login"&&Zs.push("/login")},no={async getProfile(){try{if(!ut())throw new Error("Authentication required");return await ce.get("/profiles/me")}catch(t){throw this.handleError(t)}},async getDevoteeById(t){try{if(!ut())throw new Error("Authentication required");return await ce.get(`/profiles/${t}`)}catch(o){throw this.handleError(o)}},async createOrUpdateProfile(t){try{if(!ut())throw new Error("Authentication required");let o;return t instanceof FormData?o=await ce.post("/profiles",t,{headers:{"Content-Type":"multipart/form-data"}}):o=await ce.post("/profiles",t),o}catch(o){throw this.handleError(o)}},async updateProfile(t,o){try{if(!ut())throw new Error("Authentication required");let s;return o instanceof FormData?s=await ce.put("/profiles",o,{headers:{"Content-Type":"multipart/form-data"}}):s=await ce.put("/profiles",o),s}catch(s){throw this.handleError(s)}},async joinTemple(t){try{if(!ut())throw new Error("Authentication required");return await ce.post("/memberships",{entity_id:t})}catch(o){throw this.handleError(o)}},async getMemberships(){try{if(!ut())throw new Error("Authentication required");return await ce.get("/memberships")}catch(t){throw this.handleError(t)}},async checkTempleJoined(t){var o;try{if(!ut())throw new Error("Authentication required");return await ce.get(`/memberships/check/${t}`)}catch(s){if(((o=s.response)==null?void 0:o.status)===404)return{data:{joined:!1}};throw this.handleError(s)}},async getAllDevotees(t){try{if(!ut())throw new Error("Authentication required");if(!t)throw new Error("Entity ID is required");return await ce.get(`/entities/${t}/devotees`)}catch(o){throw this.handleError(o)}},async getDevoteeStats(t){try{if(!ut())throw new Error("Authentication required");if(!t)throw new Error("Entity ID is required");return await ce.get(`/entities/${t}/devotee-stats`)}catch(o){throw this.handleError(o)}},async updateDevoteeStatus(t,o,s){try{if(!ut())throw new Error("Authentication required");return await ce.patch(`/entities/${t}/devotees/${o}/status`,{status:s})}catch(n){throw this.handleError(n)}},async getAllProfiles(){try{if(!ut())throw new Error("Authentication required");return await ce.get("/profiles")}catch(t){throw this.handleError(t)}},async addFamilyMember(t,o){try{if(!ut())throw new Error("Authentication required");return await ce.post(`/profiles/${t}/family`,o)}catch(s){throw this.handleError(s)}},async updateFamilyMember(t,o,s){try{if(!ut())throw new Error("Authentication required");return await ce.put(`/profiles/${t}/family/${o}`,s)}catch(n){throw this.handleError(n)}},async removeFamilyMember(t,o){try{if(!ut())throw new Error("Authentication required");return await ce.delete(`/profiles/${t}/family/${o}`)}catch(s){throw this.handleError(s)}},async getDashboardData(t){try{if(!ut())throw new Error("Authentication required");return await ce.get(`/entity/${t}/devotee/dashboard`)}catch(o){throw console.warn("Dashboard endpoint not available"),this.handleError(o)}},async searchTemples(t={}){try{if(!ut())throw new Error("Authentication required");return await ce.get("/temples/search",{params:t})}catch(o){throw this.handleError(o)}},async getRecentTemples(){try{if(!ut())throw new Error("Authentication required");return await ce.get("/temples/recent")}catch(t){throw this.handleError(t)}},handleError(t){var o,s,n,r,i,a,l,d,c;return((o=t.response)==null?void 0:o.status)===401?(console.error("Authentication error:",(s=t.response)==null?void 0:s.data),bu(),new Error("Authentication failed. Please login again.")):((n=t.response)==null?void 0:n.status)===403?new Error("Access denied. You do not have permission to perform this action."):((r=t.response)==null?void 0:r.status)===404?new Error("The requested resource was not found."):((i=t.response)==null?void 0:i.status)>=500?new Error("Server error. Please try again later."):t.code==="NETWORK_ERROR"||!t.response?new Error("Network error. Please check your internet connection."):t.code==="ECONNABORTED"?new Error("Request timeout. Please try again."):(l=(a=t.response)==null?void 0:a.data)!=null&&l.message?new Error(t.response.data.message):(c=(d=t.response)==null?void 0:d.data)!=null&&c.error?new Error(t.response.data.error):t.message?new Error(t.message):new Error("An unexpected error occurred")},isAuthenticated:ut,getAuthToken:Q0,clearAuth:ep,redirectToLogin:bu},U1={SUPER_ADMIN:{id:"SUPER_ADMIN",name:"Super Administrator",description:"Internal system administrator with full access",permissions:["manage_tenants","manage_temples","approve_tenants","approve_temples","system_settings","view_all_data"],dashboard:"/admin/dashboard",allowRegistration:!1,internal:!0},TENANT:{id:"TENANT",name:"Temple Administrator",description:"Creates and manages temples",permissions:["create_temple","manage_own_temples","view_temple_stats","upload_documents"],dashboard:"/tenant/dashboard",allowRegistration:!0,requiresApproval:!0,internal:!1},DEVOTEE:{id:"DEVOTEE",name:"Devotee",description:"Temple member who can book sevas and donate",permissions:["join_temple","book_seva","make_donation","view_events","manage_profile","view_donation_history"],dashboard:"/entity/:id/devotee/dashboard",allowRegistration:!0,requiresApproval:!1,internal:!1},VOLUNTEER:{id:"VOLUNTEER",name:"Volunteer",description:"Temple volunteer who assists with temple activities",permissions:["join_temple","view_assignments","view_events","manage_profile"],dashboard:"/entity/:id/volunteer/dashboard",allowRegistration:!0,requiresApproval:!1,internal:!1}},F1={PENDING:{value:"PENDING",label:"Pending Approval",color:"bg-yellow-100 text-yellow-800",icon:"clock"},APPROVED:{value:"APPROVED",label:"Approved",color:"bg-green-100 text-green-800",icon:"check-circle"},REJECTED:{value:"REJECTED",label:"Rejected",color:"bg-red-100 text-red-800",icon:"x-circle"}},O1={TENANT:{postRegistration:"PENDING",emailTemplate:"tenant_registration_received",approvalRequired:!0,redirectAfterApproval:"/tenant/dashboard"},DEVOTEE:{postRegistration:"ACTIVE",emailTemplate:"devotee_welcome",approvalRequired:!1,redirectAfterRegistration:"/devotee/temple-selection"},VOLUNTEER:{postRegistration:"ACTIVE",emailTemplate:"volunteer_welcome",approvalRequired:!1,redirectAfterRegistration:"/volunteer/temple-selection"}},wu={roles:U1,statusTypes:F1,registrationFlow:O1},gt=V(null),po=V(localStorage.getItem("auth_token")),Ct=V(!1),ku=V(!1),mo=V(localStorage.getItem("assigned_tenant_id"));function ln(){const t=te(()=>!!po.value&&!!gt.value),o=te(()=>{var N;return((N=gt.value)==null?void 0:N.role)||null}),s=te(()=>{var N;return((N=gt.value)==null?void 0:N.status)||null}),n=te(()=>{var N;return((N=gt.value)==null?void 0:N.current_entity)||null}),r=te(()=>o.value===yn.SUPER_ADMIN),i=te(()=>o.value===yn.TENANT),a=te(()=>o.value===yn.DEVOTEE),l=te(()=>o.value===yn.VOLUNTEER),d=te(()=>a.value||l.value),c=te(()=>{const N=(o.value||"").toLowerCase();return N==="standard_user"||N==="standarduser"}),u=te(()=>{const N=(o.value||"").toLowerCase();return N==="monitoring_user"||N==="monitoringuser"}),p=te(()=>s.value===Tr.PENDING),v=te(()=>s.value===Tr.APPROVED),g=te(()=>s.value===Tr.REJECTED),h=N=>{try{const M=N.split(".")[1].replace(/-/g,"+").replace(/_/g,"/"),X=decodeURIComponent(atob(M).split("").map(function(ee){return"%"+("00"+ee.charCodeAt(0).toString(16)).slice(-2)}).join(""));return JSON.parse(X)}catch(L){return console.error("Error parsing JWT token:",L),{}}},D=N=>wu.roles[N]||null,C=()=>{if(!gt.value)return"/login";const N=D(o.value);return N?c.value||u.value?mo.value?(console.log(` Redirecting ${o.value} to assigned tenant: ${mo.value}`),`/tenant/${mo.value}/dashboard`):"/tenant-selection":a.value?"/devotee/temple-selection":l.value&&n.value?N.dashboard.replace(":id",n.value.id):N.dashboard:"/login"},B=N=>{var M;if(!gt.value)return!1;const L=D(o.value);return((M=L==null?void 0:L.permissions)==null?void 0:M.includes(N))||!1},_=(N,L=null,M=[])=>!t.value||L&&o.value!==L?!1:M.length>0?M.every(X=>B(X)):!0,T=async N=>{var M,X;const{showToast:L}=je();try{Ct.value=!0;const ee=await Le.auth.login(N),{user:oe,token:ae}=ee.data;po.value=ae,gt.value=oe,localStorage.setItem("auth_token",ae),localStorage.setItem("user_data",JSON.stringify(oe));try{const J=h(ae);J.assigned_tenant_id&&(mo.value=J.assigned_tenant_id,localStorage.setItem("assigned_tenant_id",J.assigned_tenant_id),console.log("Found assigned tenant ID in token:",J.assigned_tenant_id),Le.setTenantId(J.assigned_tenant_id))}catch(J){console.error("Failed to parse token for assigned tenant ID:",J)}L("Login successful!","success");const H=C();return{success:!0,user:oe,redirectPath:H}}catch(ee){return console.error("Login failed:",ee),{success:!1,error:((X=(M=ee.response)==null?void 0:M.data)==null?void 0:X.message)||"Login failed"}}finally{Ct.value=!1}},S=async N=>{var M,X;const{showToast:L}=je();try{Ct.value=!0;const ee=await Le.auth.register(N),{user:oe,message:ae}=ee.data,H=wu.registrationFlow[N.role];if(H.approvalRequired)return L(ae||"Registration successful! You will be notified after approval.","success"),{success:!0,user:oe,redirectPath:"/auth/pending-approval"};if(L(ae||"Registration successful! Please join a temple to continue.","success"),ee.data.token){po.value=ee.data.token,gt.value=oe,localStorage.setItem("auth_token",ee.data.token),localStorage.setItem("user_data",JSON.stringify(oe));try{const J=h(ee.data.token);J.assigned_tenant_id&&(mo.value=J.assigned_tenant_id,localStorage.setItem("assigned_tenant_id",J.assigned_tenant_id),console.log("Found assigned tenant ID in token:",J.assigned_tenant_id),Le.setTenantId(J.assigned_tenant_id))}catch(J){console.error("Failed to parse token for assigned tenant ID:",J)}return{success:!0,user:oe,redirectPath:H.redirectAfterRegistration}}else return{success:!0,user:oe,redirectPath:"/login"}}catch(ee){return console.error("Registration failed:",ee),{success:!1,error:((X=(M=ee.response)==null?void 0:M.data)==null?void 0:X.message)||"Registration failed"}}finally{Ct.value=!1}},k=async()=>{const{showToast:N}=je();try{Ct.value=!0,po.value&&await Le.auth.logout()}catch(L){console.error("Logout error:",L)}finally{return po.value=null,gt.value=null,mo.value=null,localStorage.removeItem("auth_token"),localStorage.removeItem("user_data"),localStorage.removeItem("current_tenant_id"),localStorage.removeItem("assigned_tenant_id"),Ct.value=!1,N("Logged out successfully","success"),{success:!0,redirectPath:"/login"}}},b=async N=>{var M,X;const{showToast:L}=je();try{return Ct.value=!0,await Le.auth.forgotPassword(N),L("Password reset link sent to your email","success"),{success:!0}}catch(ee){return console.error("Forgot password failed:",ee),{success:!1,error:((X=(M=ee.response)==null?void 0:M.data)==null?void 0:X.message)||"Failed to send reset link"}}finally{Ct.value=!1}},x=async(N,L)=>{var X,ee;const{showToast:M}=je();try{return Ct.value=!0,await Le.auth.resetPassword(N,L),M("Password reset successful! Please login with your new password.","success"),{success:!0,redirectPath:"/login"}}catch(oe){return console.error("Reset password failed:",oe),{success:!1,error:((ee=(X=oe.response)==null?void 0:X.data)==null?void 0:ee.message)||"Password reset failed"}}finally{Ct.value=!1}},F=async()=>{try{const N=localStorage.getItem("auth_token"),L=localStorage.getItem("user_data");if(N&&L){po.value=N,gt.value=JSON.parse(L);try{const M=h(N);M.assigned_tenant_id&&(mo.value=M.assigned_tenant_id,localStorage.setItem("assigned_tenant_id",M.assigned_tenant_id),console.log("Found assigned tenant ID in token:",M.assigned_tenant_id),Le.setTenantId(M.assigned_tenant_id))}catch(M){console.error("Failed to parse token for assigned tenant ID:",M)}try{const M=await Le.auth.refreshToken();if(M.data.token){po.value=M.data.token,localStorage.setItem("auth_token",M.data.token);try{const X=h(M.data.token);X.assigned_tenant_id&&(mo.value=X.assigned_tenant_id,localStorage.setItem("assigned_tenant_id",X.assigned_tenant_id),console.log("Found assigned tenant ID in refreshed token:",X.assigned_tenant_id),Le.setTenantId(X.assigned_tenant_id))}catch(X){console.error("Failed to parse refreshed token for assigned tenant ID:",X)}}}catch{console.warn("Token refresh failed, clearing auth state"),await k()}}}catch(N){console.error("Auth initialization failed:",N)}finally{ku.value=!0}},E=async N=>{var M,X;const{showToast:L}=je();try{Ct.value=!0;let ee;if(i.value)ee=await Le.tenant.updateProfile(N);else if(a.value)ee=await Le.devotee.updateProfile(N);else throw new Error("Profile update not supported for this role");return gt.value={...gt.value,...ee.data.user},localStorage.setItem("user_data",JSON.stringify(gt.value)),L("Profile updated successfully!","success"),{success:!0,user:gt.value}}catch(ee){return console.error("Profile update failed:",ee),{success:!1,error:((X=(M=ee.response)==null?void 0:M.data)==null?void 0:X.message)||"Profile update failed"}}finally{Ct.value=!1}},O=async N=>{var M,X,ee;const{showToast:L}=je();try{Ct.value=!0;let oe;if(a.value)oe=await Le.devotee.joinTemple(N);else if(l.value)oe=await Le.volunteer.joinTemple(N);else throw new Error("Only devotees and volunteers can join temples");const ae=oe.data.entity_id||N,H={...gt.value,current_entity:{id:ae,...oe.data.temple}};gt.value=H,localStorage.setItem("user_data",JSON.stringify(H)),L(`Successfully joined ${((M=oe.data.temple)==null?void 0:M.name)||"temple"}!`,"success");const J=C();return{success:!0,temple:oe.data.temple,entityId:ae,redirectPath:J}}catch(oe){return console.error("Join temple failed:",oe),{success:!1,error:((ee=(X=oe.response)==null?void 0:X.data)==null?void 0:ee.message)||"Failed to join temple"}}finally{Ct.value=!1}};return Ue(po,N=>{},{immediate:!0}),{user:te(()=>gt.value),token:te(()=>po.value),isLoading:te(()=>Ct.value),isInitialized:te(()=>ku.value),assignedTenantId:te(()=>mo.value),isAuthenticated:t,userRole:o,userStatus:s,currentEntity:n,isSuperAdmin:r,isTenant:i,isDevotee:a,isVolunteer:l,isEndUser:d,isStandardUser:c,isMonitoringUser:u,isPending:p,isApproved:v,isRejected:g,login:T,register:S,logout:k,forgotPassword:b,resetPassword:x,initializeAuth:F,updateProfile:E,joinTemple:O,hasPermission:B,canAccessRoute:_,getDashboardPath:C,getRoleConfig:D,parseJwt:h}}const{logout:Ho}=ln(),{showToast:qe}=je(),ct={async createDonation(t){var o,s,n;try{console.log("Creating donation with data:",t);const r=this.getCurrentEntityId(),i=localStorage.getItem("current_tenant_id");if(!r)throw new Error("No entity ID available for donation creation");console.log(`Creating donation for entity ID: ${r}, tenant ID: ${i}`);const a={Amount:Number(t.amount),DonationType:t.donationType||t.type||t.donation_type,Note:t.note||t.purpose||""};t.referenceID&&(a.ReferenceID=t.referenceID),console.log("Sending donation payload:",a);const l={headers:{Authorization:`Bearer ${localStorage.getItem("auth_token")}`,"Content-Type":"application/json","X-Tenant-ID":i,"X-Entity-ID":r}},d=`/v1/donations?entity_id=${r}`,c=await Te.post(d,a,l);return console.log("Create donation response:",c.data),console.log("Full response structure:",JSON.stringify(c.data,null,2)),c.data}catch(r){if(console.error("Error creating donation:",r),((o=r.response)==null?void 0:o.status)===401)qe("Please login to make a donation","error"),Ho();else if(((s=r.response)==null?void 0:s.status)===400){const i=((n=r.response.data)==null?void 0:n.error)||"Invalid donation data";qe(i,"error"),console.error("Validation error:",i)}else qe("Failed to create donation","error");throw r}},async verifyDonation(t){var o;try{console.log("Verifying donation with payment data:",t);const s={paymentID:t.razorpay_payment_id||t.paymentID,orderID:t.razorpay_order_id||t.orderID,razorpaySig:t.razorpay_signature||t.razorpaySig};console.log("Sending verification payload:",s);const n=await ce.post("/v1/donations/verify",s);return console.log("Verify donation response:",n.data),console.log("Verification response structure:",JSON.stringify(n.data,null,2)),n.data}catch(s){throw console.error("Error verifying donation:",s),((o=s.response)==null?void 0:o.status)===400?qe("Payment verification failed","error"):qe("Failed to verify donation","error"),s}},async getMyDonations(){var t,o;try{console.log("Calling getMyDonations API...");const s=this.getCurrentEntityId(),n=localStorage.getItem("current_tenant_id");console.log(`Fetching my donations for entity ID: ${s}, tenant ID: ${n}`);const r={headers:{Authorization:`Bearer ${localStorage.getItem("auth_token")}`,"Content-Type":"application/json","X-Tenant-ID":n,"X-Entity-ID":s}},i=s?`/v1/donations/my?entity_id=${s}`:"/v1/donations/my",a=await Te.get(i,r);if(console.log("My donations raw response:",a),console.log("My donations response data:",a.data),a.data&&a.data.success){const l=a.data.data||[];return console.log("Extracted donations from successful response:",l),l}else return Array.isArray(a.data)?(console.log("Response data is array:",a.data),a.data):a.data&&a.data.data?(console.log("Response has data property:",a.data.data),a.data.data):(console.log("Fallback: returning data or empty array"),a.data||[])}catch(s){if(console.error("Error fetching my donations:",s),((t=s.response)==null?void 0:t.status)===401)qe("Please login to view your donations","error"),Ho();else{if(((o=s.response)==null?void 0:o.status)===404)return console.warn("My donations endpoint not found - this is expected if not implemented yet"),[];qe("Failed to load your donations","error")}throw s}},async getMyRecentDonations(){var t,o;try{console.log("Calling getMyRecentDonations API...");const s=this.getCurrentEntityId(),n=localStorage.getItem("current_tenant_id");console.log(`Fetching my recent donations for entity ID: ${s}, tenant ID: ${n}`);const r={headers:{Authorization:`Bearer ${localStorage.getItem("auth_token")}`,"Content-Type":"application/json","X-Tenant-ID":n,"X-Entity-ID":s}},i=s?`/v1/donations/recent?entity_id=${s}`:"/v1/donations/recent",a=await Te.get(i,r);if(console.log("Recent donations raw response:",a),console.log("Recent donations response data:",a.data),a.data&&a.data.recent_donations&&Array.isArray(a.data.recent_donations)){const l=a.data.recent_donations.map(d=>({id:d.id||d.ID||Math.random(),amount:d.amount||d.Amount,donation_type:d.donation_type||d.DonationType,donationType:d.donation_type||d.DonationType,type:d.donation_type||d.DonationType,method:d.method||d.Method,status:d.status||d.Status,date:d.donated_at||d.DonatedAt||d.date,donation_date:d.donated_at||d.DonatedAt,donated_at:d.donated_at||d.DonatedAt,note:d.note||d.Note||d.purpose}));return console.log("Mapped recent donations:",l),l}else return Array.isArray(a.data)?a.data.map(l=>({id:l.id||l.ID||Math.random(),amount:l.amount||l.Amount,donation_type:l.donation_type||l.DonationType,donationType:l.donation_type||l.DonationType,type:l.donation_type||l.DonationType,method:l.method||l.Method,status:l.status||l.Status,date:l.donated_at||l.DonatedAt||l.date,donation_date:l.donated_at||l.DonatedAt,donated_at:l.donated_at||l.DonatedAt,note:l.note||l.Note||l.purpose})):(console.warn("Unexpected response format for recent donations:",a.data),[])}catch(s){if(console.error("Error fetching recent donations:",s),((t=s.response)==null?void 0:t.status)===401)qe("Please login to view your recent donations","error"),Ho();else{if(((o=s.response)==null?void 0:o.status)===404)return console.warn("Recent donations endpoint not found"),[];qe("Failed to load recent donations","error")}return[]}},async getDonationStats(){var t,o;try{const s=this.getCurrentEntityId(),n=localStorage.getItem("current_tenant_id");console.log(`Fetching donation stats for entity ID: ${s}, tenant ID: ${n}`);const r={headers:{Authorization:`Bearer ${localStorage.getItem("auth_token")}`,"Content-Type":"application/json","X-Tenant-ID":n,"X-Entity-ID":s}},i=s?`/v1/donations/dashboard?entity_id=${s}`:"/v1/donations/dashboard",a=await Te.get(i,r);return console.log("Dashboard stats response:",a.data),a.data}catch(s){throw console.error("Error fetching donation stats:",s),((t=s.response)==null?void 0:t.status)===403?qe("You do not have permission to view statistics","error"):((o=s.response)==null?void 0:o.status)===401?(qe("Please login to view statistics","error"),Ho()):qe("Failed to load statistics","error"),s}},async getRecentDonations(t=5){var o,s;try{const n=this.getCurrentEntityId(),r=localStorage.getItem("current_tenant_id"),i={headers:{Authorization:`Bearer ${localStorage.getItem("auth_token")}`,"Content-Type":"application/json","X-Tenant-ID":r,"X-Entity-ID":n}};try{const d=n?`/v1/donations/recent?entity_id=${n}&limit=${t}`:`/v1/donations/recent?limit=${t}`,c=await Te.get(d,i);if(c.data&&c.data.recent_donations)return c.data.recent_donations.slice(0,t)}catch(d){console.warn("Recent donations endpoint failed, falling back to general endpoint:",d)}const a=n?`/v1/donations?entity_id=${n}&limit=${t}&page=1`:`/v1/donations?limit=${t}&page=1`,l=await Te.get(a,i);return console.log("Recent donations response:",l.data),((o=l.data)==null?void 0:o.data)||[]}catch(n){throw console.error("Error fetching recent donations:",n),((s=n.response)==null?void 0:s.status)===403?qe("You do not have permission to view recent donations","error"):qe("Failed to load recent donations","error"),n}},async getDonations(t={}){var o,s,n;try{const r=this.getCurrentEntityId(),i=localStorage.getItem("current_tenant_id");console.log(`Fetching donations for entity ID: ${r}, tenant ID: ${i}`);const a={page:t.page||1,limit:t.limit||20,...r?{entity_id:r}:{},...t.status&&t.status!=="all"?{status:t.status}:{},...t.type&&t.type!=="all"?{type:t.type}:{},...t.method&&t.method!=="all"?{method:t.method}:{},...t.search?{search:t.search}:{},...t.min!==void 0&&t.min!==null&&t.min!==""?{min:t.min}:{},...t.max!==void 0&&t.max!==null&&t.max!==""?{max:t.max}:{},...t.from?{from:t.from}:{},...t.to?{to:t.to}:{},...t.dateRange&&t.dateRange!=="all"?{dateRange:t.dateRange}:{}},l={headers:{Authorization:`Bearer ${localStorage.getItem("auth_token")}`,"Content-Type":"application/json","X-Tenant-ID":i,"X-Entity-ID":r}};console.log("Fetching donations with params:",a);const d=await Te.get("/v1/donations/",{params:a,...l});return console.log("Get donations response:",d.data),d.data}catch(r){throw console.error("Error fetching donations:",r),((o=r.response)==null?void 0:o.status)===403?(qe("You do not have permission to view donations","error"),Ho()):((s=r.response)==null?void 0:s.status)===404?qe("Donation endpoint not found","error"):((n=r.response)==null?void 0:n.status)===401?(qe("Please login to view donations","error"),Ho()):qe("Failed to load donations","error"),r}},async getDashboard(){var t,o;try{const s=this.getCurrentEntityId(),n=localStorage.getItem("current_tenant_id"),r={headers:{Authorization:`Bearer ${localStorage.getItem("auth_token")}`,"Content-Type":"application/json","X-Tenant-ID":n,"X-Entity-ID":s}},i=s?`/v1/donations/dashboard?entity_id=${s}`:"/v1/donations/dashboard",a=await Te.get(i,r);return console.log("Dashboard data response:",a.data),a.data}catch(s){throw console.error("Error fetching donation dashboard:",s),((t=s.response)==null?void 0:t.status)===401?(qe("Please login to view dashboard","error"),Ho()):((o=s.response)==null?void 0:o.status)===403?qe("You do not have permission to view dashboard","error"):qe("Failed to load dashboard data","error"),s}},async getTopDonors(t=5){var o;try{const s=this.getCurrentEntityId(),n=localStorage.getItem("current_tenant_id"),r={headers:{Authorization:`Bearer ${localStorage.getItem("auth_token")}`,"Content-Type":"application/json","X-Tenant-ID":n,"X-Entity-ID":s}},i={limit:t,...s?{entity_id:s}:{}},a=await Te.get("/donations/top-donors",{params:i,...r});return console.log("Top donors response:",a.data),a.data}catch(s){throw console.error("Error fetching top donors:",s),((o=s.response)==null?void 0:o.status)===403?qe("You do not have permission to view top donors","error"):qe("Failed to load top donors","error"),s}},async getAnalytics(t=30){var o;try{const s=this.getCurrentEntityId(),n=localStorage.getItem("current_tenant_id"),r={headers:{Authorization:`Bearer ${localStorage.getItem("auth_token")}`,"Content-Type":"application/json","X-Tenant-ID":n,"X-Entity-ID":s}},i={days:t,...s?{entity_id:s}:{}},a=await Te.get("/donations/analytics",{params:i,...r});return console.log("Analytics response:",a.data),a.data}catch(s){throw console.error("Error fetching analytics:",s),((o=s.response)==null?void 0:o.status)===403?qe("You do not have permission to view analytics","error"):qe("Failed to load analytics","error"),s}},async generateReceipt(t){var o,s;try{const n=this.getCurrentEntityId(),r=localStorage.getItem("current_tenant_id"),i={headers:{Authorization:`Bearer ${localStorage.getItem("auth_token")}`,"Content-Type":"application/json","X-Tenant-ID":r,"X-Entity-ID":n}},a=n?`/v1/donations/${t}/receipt?entity_id=${n}`:`/v1/donations/${t}/receipt`,l=await Te.get(a,i);return console.log("Receipt response:",l.data),l.data}catch(n){throw console.error("Error generating receipt:",n),((o=n.response)==null?void 0:o.status)===403?qe("You do not have permission to generate receipts","error"):((s=n.response)==null?void 0:s.status)===404?qe("Donation not found","error"):qe("Failed to generate receipt","error"),n}},async exportDonations(t={},o="csv"){var s;try{const n=this.getCurrentEntityId(),r=localStorage.getItem("current_tenant_id"),i={format:o,...n?{entity_id:n}:{},...t.status&&t.status!=="all"?{status:t.status}:{},...t.type&&t.type!=="all"?{type:t.type}:{},...t.method&&t.method!=="all"?{method:t.method}:{},...t.search?{search:t.search}:{},...t.from?{from:t.from}:{},...t.to?{to:t.to}:{}},a={headers:{Authorization:`Bearer ${localStorage.getItem("auth_token")}`,"X-Tenant-ID":r,"X-Entity-ID":n}},l=await Te.get("/v1/donations/export",{params:i,...a,responseType:"blob"}),d=window.URL.createObjectURL(new Blob([l.data])),c=document.createElement("a");return c.href=d,c.setAttribute("download",`donations_export_${new Date().toISOString().slice(0,10)}.${o}`),document.body.appendChild(c),c.click(),document.body.removeChild(c),window.URL.revokeObjectURL(d),l.data}catch(n){throw console.error("Error exporting donations:",n),((s=n.response)==null?void 0:s.status)===403?qe("You do not have permission to export donations","error"):qe("Failed to export donations","error"),n}},getCurrentEntityId(){const o=window.location.pathname.match(/\/entity\/(\d+)/);if(o){const r=o[1];return console.log(`Entity ID from URL path: ${r}`),r}const s=localStorage.getItem("current_entity_id");if(s&&s!=="null"&&s!=="undefined")return console.log(`Entity ID from localStorage: ${s}`),s;const n=this.getUserInfo();if(n)switch(n.role){case"templeadmin":if(n.entityId)return console.log(`TempleAdmin entity ID: ${n.entityId}`),n.entityId.toString();break;case"standarduser":case"monitoringuser":if(n.assignedTenantId)return console.log(`StandardUser/MonitoringUser assigned tenant ID: ${n.assignedTenantId}`),n.assignedTenantId.toString();break}return console.warn("Could not resolve entity ID"),null},getUserInfo(){try{const t=localStorage.getItem("auth_token");if(t){const o=JSON.parse(atob(t.split(".")[1]));return{userId:o.user_id,role:o.role||o.role_name,entityId:o.entity_id,assignedTenantId:o.assigned_tenant_id}}}catch(t){console.warn("Error parsing user info from token:",t)}return null},getDonationTypes(){return[{value:"general",label:"General Donation"},{value:"seva",label:"Seva Donation"},{value:"festival",label:"Festival Donation"},{value:"construction",label:"Construction Fund"},{value:"annadanam",label:"Annadanam"},{value:"education",label:"Education Fund"},{value:"maintenance",label:"Maintenance"},{value:"temple_maintenance",label:"Temple Maintenance"},{value:"event",label:"Event Donation"}]}},dn=Vo("devotee",()=>{const t=je(),{user:o,currentEntity:s}=ln(),n=V({personal:{},spiritual:{},lineage:{},preferences:{},family:{},notes:{}}),r=V({summary:{totalDonations:0,totalSevaBookings:0,upcomingEvents:0,profileCompletion:0},recentDonations:[],upcomingSevas:[],announcements:[],quickStats:{thisMonthDonations:0,thisMonthSevas:0,favoriteDeity:"",memberSince:""}}),i=V([]),a=V(null),l=V(!1),d=V([]),c=V([]),u=V(6),p=te(()=>u.value===0?0:Math.round(d.value.length/u.value*100)),v=te(()=>p.value===100),g=V(null),h=V([]),D=V({total:0,active:0,inactive:0,newThisMonth:0,maleCount:0,femaleCount:0,otherCount:0}),C=V(null),B=V({status:"all",search:"",gender:"all",sortBy:"name",sortOrder:"asc"}),_=te(()=>{let w=[...h.value];if(B.value.status!=="all"&&(w=w.filter(R=>R.status===B.value.status)),B.value.gender!=="all"&&(w=w.filter(R=>R.gender===B.value.gender)),B.value.search){const R=B.value.search.toLowerCase();w=w.filter(A=>{var j,ne,K,q;return((j=A.full_name)==null?void 0:j.toLowerCase().includes(R))||((ne=A.email)==null?void 0:ne.toLowerCase().includes(R))||((K=A.phone)==null?void 0:K.includes(R))||((q=A.gotra)==null?void 0:q.toLowerCase().includes(R))})}return w.sort((R,A)=>{let j,ne;switch(B.value.sortBy){case"name":j=R.full_name||"",ne=A.full_name||"";break;case"email":j=R.email||"",ne=A.email||"";break;case"gotra":j=R.gotra||"",ne=A.gotra||"";break;case"date":j=R.created_at?new Date(R.created_at):new Date(0),ne=A.created_at?new Date(A.created_at):new Date(0);break;default:j=R.full_name||"",ne=A.full_name||""}return j instanceof Date?B.value.sortOrder==="asc"?j-ne:ne-j:B.value.sortOrder==="asc"?j.localeCompare(ne):ne.localeCompare(j)}),w}),T=V(!1),S=V(null),k=()=>{var w;return((w=s.value)==null?void 0:w.id)||g.value},b=async()=>{var w,R;try{T.value=!0,S.value=null;const A=await no.getProfile();if(A.data){const j=A.data,ne={personal:{fullName:j.full_name||"",dateOfBirth:j.dob||"",gender:j.gender||"",phone:"",email:"",address:{street:j.street_address||"",city:j.city||"",state:j.state||"",pincode:j.pincode||"",country:j.country||"India"}},spiritual:{gotra:j.gotra||"",nakshatra:j.nakshatra||"",rashi:j.rashi||"",lagna:j.lagna||"",vedaShaka:j.veda_shaka||""},lineage:{father:{name:j.father_name||"",gotra:j.father_gotra||"",nativePlace:j.father_native_place||"",vedaShaka:j.father_veda_shaka||""},mother:{name:j.mother_name||"",maidenGotra:j.maiden_gotra||"",nativePlace:j.mother_native_place||"",fatherName:j.maternal_grandfather_name||""},paternalGrandfather:j.paternal_grandfather_name||"",paternalGrandmother:j.paternal_grandmother_name||"",maternalGrandfather:j.maternal_grandfather_name||"",maternalGrandmother:j.maternal_grandmother_name||""},preferences:{favoriteSevas:x(j),donationInterests:F(j),preferredFrequency:"",specialInterests:j.special_interests_or_notes||""},family:{spouse:{name:j.spouse_name||"",email:j.spouse_email||"",phone:j.spouse_phone||"",dateOfBirth:j.spouse_dob||"",gotra:j.spouse_gotra||"",nakshatra:j.spouse_nakshatra||""},children:(j.children||[]).map(K=>({name:K.child_name||"",dateOfBirth:K.child_dob||"",gender:K.child_gender||"",education:K.child_education||"",interests:K.child_interests||""})),emergencyContacts:(j.emergency_contacts||[]).map(K=>({name:K.contact_name||"",relationship:K.contact_relationship||"",phone:K.contact_phone||"",address:K.contact_address||""}))},notes:{healthNotes:j.health_notes||"",allergies:j.allergies_or_conditions||"",dietaryRestrictions:j.dietary_restrictions||"",sankalpa:j.personal_sankalpa||"",additionalNotes:j.additional_notes||"",documents:[],profilePhoto:null,familyPhoto:null,shareProfile:!0,receiveNotifications:!0}};return n.value=ne,M(ne),ne}return null}catch(A){return S.value=((R=(w=A.response)==null?void 0:w.data)==null?void 0:R.error)||"Failed to load profile data",console.error("Error loading profile data:",A),null}finally{T.value=!1}};function x(w){const R=[];return w.seva_abhisheka&&R.push("abhisheka"),w.seva_arti&&R.push("arti"),w.seva_annadana&&R.push("annadana"),w.seva_archana&&R.push("archana"),w.seva_kalyanam&&R.push("kalyanam"),w.seva_homam&&R.push("homam"),R}function F(w){const R=[];return w.donate_temple_maintenance&&R.push("temple-maintenance"),w.donate_annadana_program&&R.push("annadana"),w.donate_festival_celebrations&&R.push("festivals"),w.donate_religious_education&&R.push("education"),w.donate_temple_construction&&R.push("construction"),w.donate_general&&R.push("general"),R}const E=async(w,R)=>{var A,j;console.log(` STORE UPDATING STEP ${w}:`,R);try{return T.value=!0,S.value=null,n.value[w]=R,d.value.includes(w)||(d.value.push(w),c.value=c.value.filter(ne=>ne!==w)),{success:!0}}catch(ne){return S.value=((j=(A=ne.response)==null?void 0:A.data)==null?void 0:j.error)||`Error updating profile step: ${w}`,console.error(`Error updating profile step ${w}:`,ne),t.error(S.value),{success:!1}}finally{T.value=!1}},O=async()=>{var w,R,A,j,ne,K,q,le,se,G,U,Z,ye,pe,be,Se,Ie,Fe,Ve,pt,mt,Nt,Lt,$o,ws,bt,Bt,ks,_s,ja,Na,La,Ba,Va,Ua,Fa,Oa,za,Ha,qa,Ga,Wa,Ja,Ya,Ka,Xa,Za,Qa,ei,ti,oi,si,ni,ri,ai,ii,li,di,ui,ci,pi,mi,gi,fi,vi,hi,yi,xi,bi,wi,ki,_i,$i,Si,Di,Ci,Ti,Ei,Ai,Ii,Mi,Ri,Pi,ji,Ni,Li,Bi,Vi,Ui,Fi,Oi,zi,Hi,qi,Gi,Wi,Ji,Yi,Ki,Xi,Zi,Qi,el,tl,ol,sl,nl,rl,al,il,ll,dl,ul,cl,pl,ml,gl,fl,vl,hl,yl,xl,bl,wl,kl,_l,$l,Sl,Dl,Cl,Tl,El,Al,Il,Ml,Rl,Pl,jl,Nl,Ll,Bl,Vl,Ul,Fl,Ol,zl,Hl,ql,Gl,Wl,Jl;console.log(" PROFILE STATE BEFORE API CONVERSION:",JSON.stringify(n.value,null,2));try{T.value=!0,S.value=null,console.log("Starting profile completion...");const lo=ze=>{if(!ze)return null;try{const cn=new Date(ze);return isNaN(cn.getTime())?null:cn.toISOString()}catch(cn){return console.error("Date conversion error:",cn),null}},Yl={full_name:((R=(w=n.value)==null?void 0:w.personal)==null?void 0:R.fullName)||null,dob:lo((j=(A=n.value)==null?void 0:A.personal)==null?void 0:j.dateOfBirth),gender:((K=(ne=n.value)==null?void 0:ne.personal)==null?void 0:K.gender)||null,street_address:((se=(le=(q=n.value)==null?void 0:q.personal)==null?void 0:le.address)==null?void 0:se.street)||null,city:((Z=(U=(G=n.value)==null?void 0:G.personal)==null?void 0:U.address)==null?void 0:Z.city)||null,state:((be=(pe=(ye=n.value)==null?void 0:ye.personal)==null?void 0:pe.address)==null?void 0:be.state)||null,pincode:((Fe=(Ie=(Se=n.value)==null?void 0:Se.personal)==null?void 0:Ie.address)==null?void 0:Fe.pincode)||null,country:((mt=(pt=(Ve=n.value)==null?void 0:Ve.personal)==null?void 0:pt.address)==null?void 0:mt.country)||"India",gotra:((Lt=(Nt=n.value)==null?void 0:Nt.spiritual)==null?void 0:Lt.gotra)||null,nakshatra:((ws=($o=n.value)==null?void 0:$o.spiritual)==null?void 0:ws.nakshatra)||null,rashi:((Bt=(bt=n.value)==null?void 0:bt.spiritual)==null?void 0:Bt.rashi)||null,lagna:((_s=(ks=n.value)==null?void 0:ks.spiritual)==null?void 0:_s.lagna)||null,veda_shaka:((Na=(ja=n.value)==null?void 0:ja.spiritual)==null?void 0:Na.vedaShaka)||null,father_name:((Va=(Ba=(La=n.value)==null?void 0:La.lineage)==null?void 0:Ba.father)==null?void 0:Va.name)||null,father_gotra:((Oa=(Fa=(Ua=n.value)==null?void 0:Ua.lineage)==null?void 0:Fa.father)==null?void 0:Oa.gotra)||null,father_native_place:((qa=(Ha=(za=n.value)==null?void 0:za.lineage)==null?void 0:Ha.father)==null?void 0:qa.nativePlace)||null,father_veda_shaka:((Ja=(Wa=(Ga=n.value)==null?void 0:Ga.lineage)==null?void 0:Wa.father)==null?void 0:Ja.vedaShaka)||null,mother_name:((Xa=(Ka=(Ya=n.value)==null?void 0:Ya.lineage)==null?void 0:Ka.mother)==null?void 0:Xa.name)||null,maiden_gotra:((ei=(Qa=(Za=n.value)==null?void 0:Za.lineage)==null?void 0:Qa.mother)==null?void 0:ei.maidenGotra)||null,mother_native_place:((si=(oi=(ti=n.value)==null?void 0:ti.lineage)==null?void 0:oi.mother)==null?void 0:si.nativePlace)||null,maternal_grandfather_name:((ai=(ri=(ni=n.value)==null?void 0:ni.lineage)==null?void 0:ri.mother)==null?void 0:ai.fatherName)||null,paternal_grandfather_name:((li=(ii=n.value)==null?void 0:ii.lineage)==null?void 0:li.paternalGrandfather)||null,paternal_grandmother_name:((ui=(di=n.value)==null?void 0:di.lineage)==null?void 0:ui.paternalGrandmother)||null,maternal_grandmother_name:((pi=(ci=n.value)==null?void 0:ci.lineage)==null?void 0:pi.maternalGrandmother)||null,seva_abhisheka:Array.isArray((gi=(mi=n.value)==null?void 0:mi.preferences)==null?void 0:gi.favoriteSevas)?(vi=(fi=n.value)==null?void 0:fi.preferences)==null?void 0:vi.favoriteSevas.includes("abhisheka"):!1,seva_arti:Array.isArray((yi=(hi=n.value)==null?void 0:hi.preferences)==null?void 0:yi.favoriteSevas)?(bi=(xi=n.value)==null?void 0:xi.preferences)==null?void 0:bi.favoriteSevas.includes("arti"):!1,seva_annadana:Array.isArray((ki=(wi=n.value)==null?void 0:wi.preferences)==null?void 0:ki.favoriteSevas)?($i=(_i=n.value)==null?void 0:_i.preferences)==null?void 0:$i.favoriteSevas.includes("annadana"):!1,seva_archana:Array.isArray((Di=(Si=n.value)==null?void 0:Si.preferences)==null?void 0:Di.favoriteSevas)?(Ti=(Ci=n.value)==null?void 0:Ci.preferences)==null?void 0:Ti.favoriteSevas.includes("archana"):!1,seva_kalyanam:Array.isArray((Ai=(Ei=n.value)==null?void 0:Ei.preferences)==null?void 0:Ai.favoriteSevas)?(Mi=(Ii=n.value)==null?void 0:Ii.preferences)==null?void 0:Mi.favoriteSevas.includes("kalyanam"):!1,seva_homam:Array.isArray((Pi=(Ri=n.value)==null?void 0:Ri.preferences)==null?void 0:Pi.favoriteSevas)?(Ni=(ji=n.value)==null?void 0:ji.preferences)==null?void 0:Ni.favoriteSevas.includes("homam"):!1,donate_temple_maintenance:Array.isArray((Bi=(Li=n.value)==null?void 0:Li.preferences)==null?void 0:Bi.donationInterests)?(Ui=(Vi=n.value)==null?void 0:Vi.preferences)==null?void 0:Ui.donationInterests.includes("temple-maintenance"):!1,donate_annadana_program:Array.isArray((Oi=(Fi=n.value)==null?void 0:Fi.preferences)==null?void 0:Oi.donationInterests)?(Hi=(zi=n.value)==null?void 0:zi.preferences)==null?void 0:Hi.donationInterests.includes("annadana"):!1,donate_festival_celebrations:Array.isArray((Gi=(qi=n.value)==null?void 0:qi.preferences)==null?void 0:Gi.donationInterests)?(Ji=(Wi=n.value)==null?void 0:Wi.preferences)==null?void 0:Ji.donationInterests.includes("festivals"):!1,donate_religious_education:Array.isArray((Ki=(Yi=n.value)==null?void 0:Yi.preferences)==null?void 0:Ki.donationInterests)?(Zi=(Xi=n.value)==null?void 0:Xi.preferences)==null?void 0:Zi.donationInterests.includes("education"):!1,donate_temple_construction:Array.isArray((el=(Qi=n.value)==null?void 0:Qi.preferences)==null?void 0:el.donationInterests)?(ol=(tl=n.value)==null?void 0:tl.preferences)==null?void 0:ol.donationInterests.includes("construction"):!1,donate_general:Array.isArray((nl=(sl=n.value)==null?void 0:sl.preferences)==null?void 0:nl.donationInterests)?(al=(rl=n.value)==null?void 0:rl.preferences)==null?void 0:al.donationInterests.includes("general"):!1,special_interests_or_notes:((ll=(il=n.value)==null?void 0:il.preferences)==null?void 0:ll.specialInterests)||null,spouse_name:((cl=(ul=(dl=n.value)==null?void 0:dl.family)==null?void 0:ul.spouse)==null?void 0:cl.name)||null,spouse_email:((gl=(ml=(pl=n.value)==null?void 0:pl.family)==null?void 0:ml.spouse)==null?void 0:gl.email)||null,spouse_phone:((hl=(vl=(fl=n.value)==null?void 0:fl.family)==null?void 0:vl.spouse)==null?void 0:hl.phone)||null,spouse_dob:lo((bl=(xl=(yl=n.value)==null?void 0:yl.family)==null?void 0:xl.spouse)==null?void 0:bl.dateOfBirth),spouse_gotra:((_l=(kl=(wl=n.value)==null?void 0:wl.family)==null?void 0:kl.spouse)==null?void 0:_l.gotra)||null,spouse_nakshatra:((Dl=(Sl=($l=n.value)==null?void 0:$l.family)==null?void 0:Sl.spouse)==null?void 0:Dl.nakshatra)||null,children:Array.isArray((Tl=(Cl=n.value)==null?void 0:Cl.family)==null?void 0:Tl.children)?(Al=(El=n.value)==null?void 0:El.family)==null?void 0:Al.children.map(ze=>({child_name:(ze==null?void 0:ze.name)||"",child_dob:lo(ze==null?void 0:ze.dateOfBirth),child_gender:(ze==null?void 0:ze.gender)||"",child_education:(ze==null?void 0:ze.education)||"",child_interests:(ze==null?void 0:ze.interests)||""})):[],emergency_contacts:Array.isArray((Ml=(Il=n.value)==null?void 0:Il.family)==null?void 0:Ml.emergencyContacts)?(Pl=(Rl=n.value)==null?void 0:Rl.family)==null?void 0:Pl.emergencyContacts.map(ze=>({contact_name:(ze==null?void 0:ze.name)||"",contact_relationship:(ze==null?void 0:ze.relationship)||"",contact_phone:(ze==null?void 0:ze.phone)||"",contact_address:(ze==null?void 0:ze.address)||""})):[],health_notes:((Nl=(jl=n.value)==null?void 0:jl.notes)==null?void 0:Nl.healthNotes)||null,allergies_or_conditions:((Bl=(Ll=n.value)==null?void 0:Ll.notes)==null?void 0:Bl.allergies)||null,dietary_restrictions:((Ul=(Vl=n.value)==null?void 0:Vl.notes)==null?void 0:Ul.dietaryRestrictions)||null,personal_sankalpa:((Ol=(Fl=n.value)==null?void 0:Fl.notes)==null?void 0:Ol.sankalpa)||null,additional_notes:((Hl=(zl=n.value)==null?void 0:zl.notes)==null?void 0:Hl.additionalNotes)||null};console.log("Sending API data:",Yl);const un=await no.createOrUpdateProfile(Yl);console.log("Profile completed:",un.data),t.success("Profile completed successfully!");const Kl=((ql=un.data)==null?void 0:ql.entity_id)||k();return Kl?{success:!0,data:un.data,redirectPath:`/entity/${Kl}/devotee/dashboard`}:{success:!0,data:un.data,redirectPath:"/devotee/dashboard"}}catch(lo){throw S.value=((Wl=(Gl=lo.response)==null?void 0:Gl.data)==null?void 0:Wl.error)||lo.message||"Failed to complete profile",console.error("Error completing profile:",lo),console.error("Error response:",(Jl=lo.response)==null?void 0:Jl.data),t.error(S.value),lo}finally{T.value=!1}},N=async w=>{var R,A;try{T.value=!0,S.value=null;const j=await no.joinTemple(w);return g.value=w,t.success("Successfully joined temple"),j.data}catch(j){throw S.value=((A=(R=j.response)==null?void 0:R.data)==null?void 0:A.error)||"Failed to join temple",t.error(S.value),console.error("Error joining temple:",j),j}finally{T.value=!1}},L=async w=>{try{T.value=!0;const R=await no.getDashboardData(w);if(R.data)return r.value=R.data,R.data;throw new Error("No dashboard data returned")}catch(R){throw console.error("Error fetching dashboard data:",R),t.error("Failed to load dashboard data"),R}finally{T.value=!1}},M=w=>{var A,j,ne,K,q,le,se,G,U,Z,ye,pe,be,Se,Ie,Fe;d.value=[],(A=w.personal)!=null&&A.fullName&&d.value.push("personal"),((j=w.spiritual)!=null&&j.gotra||(ne=w.spiritual)!=null&&ne.nakshatra)&&d.value.push("spiritual"),((q=(K=w.lineage)==null?void 0:K.father)!=null&&q.name||(se=(le=w.lineage)==null?void 0:le.mother)!=null&&se.name)&&d.value.push("lineage"),((((U=(G=w.preferences)==null?void 0:G.favoriteSevas)==null?void 0:U.length)||0)>0||(((ye=(Z=w.preferences)==null?void 0:Z.donationInterests)==null?void 0:ye.length)||0)>0)&&d.value.push("preferences"),((be=(pe=w.family)==null?void 0:pe.spouse)!=null&&be.name||(((Se=w.family.children)==null?void 0:Se.length)||0)>0)&&d.value.push("family"),((Ie=w.notes)!=null&&Ie.sankalpa||(Fe=w.notes)!=null&&Fe.allergies)&&d.value.push("notes");const R=["personal","spiritual","lineage","preferences","family","notes"];c.value=R.filter(Ve=>!d.value.includes(Ve))},X=w=>{g.value=w},ee=async w=>{var R,A;try{if(T.value=!0,S.value=null,!w)throw new Error("Entity ID is required");console.log(" Fetching devotees for entity:",w);const j=await no.getAllDevotees(w);return j.data?(h.value=j.data,console.log(" Devotees loaded:",j.data.length),j.data):(h.value=[],[])}catch(j){return S.value=((A=(R=j.response)==null?void 0:R.data)==null?void 0:A.error)||j.message||"Failed to fetch devotees",console.error(" Error fetching devotees:",j),h.value=[],[]}finally{T.value=!1}},oe=async w=>ee(w),ae=async w=>{var R,A;try{if(T.value=!0,S.value=null,!w)throw new Error("Entity ID is required");try{const j=await no.getDevoteeStats(w);if(j.data)return D.value=j.data,console.log(" Devotee stats loaded from API:",j.data),j.data}catch{h.value.length===0&&await ee(w);const j={total:h.value.length,active:h.value.filter(ne=>ne.status==="active").length,inactive:h.value.filter(ne=>ne.status==="inactive").length,newThisMonth:H(),maleCount:h.value.filter(ne=>ne.gender==="male").length,femaleCount:h.value.filter(ne=>ne.gender==="female").length,otherCount:h.value.filter(ne=>ne.gender!=="male"&&ne.gender!=="female").length};return D.value=j,console.log(" Devotee stats calculated:",j),j}}catch(j){S.value=((A=(R=j.response)==null?void 0:R.data)==null?void 0:A.error)||j.message||"Failed to fetch devotee statistics",console.error(" Error fetching devotee stats:",j);const ne={total:0,active:0,inactive:0,newThisMonth:0,maleCount:0,femaleCount:0,otherCount:0};return D.value=ne,ne}finally{T.value=!1}},H=()=>{const w=new Date,R=new Date(w.getFullYear(),w.getMonth(),1);return h.value.filter(A=>A.created_at?new Date(A.created_at)>=R:!1).length},J=async w=>{var R,A;try{if(T.value=!0,S.value=null,!w)throw new Error("Devotee ID is required");const j=h.value.find(K=>K.id===Number(w));if(j)return C.value=j,j;const ne=await no.getDevoteeById(w);if(ne.data)return C.value=ne.data,ne.data;throw new Error("Devotee not found")}catch(j){return S.value=((A=(R=j.response)==null?void 0:R.data)==null?void 0:A.error)||j.message||"Failed to fetch devotee",console.error("Error fetching devotee:",j),t.error(S.value),null}finally{T.value=!1}},z=async(w,R,A)=>{var j,ne,K,q,le;try{if(T.value=!0,S.value=null,!w)throw new Error("Entity ID is required");if(!R)throw new Error("Devotee ID is required");if(!A||!["active","inactive"].includes(A))throw new Error('Status must be either "active" or "inactive"');const se=Number(w),G=Number(R);if(isNaN(se)||isNaN(G))throw new Error("Invalid ID format");console.log(" Updating devotee status:",{entityId:se,devoteeId:G,status:A});const U=h.value.findIndex(pe=>pe.id===G);U===-1&&console.warn(" Devotee not found in local store, proceeding with API call");const Z=await no.updateDevoteeStatus(se,G,A);if(!Z||!Z.data)throw new Error("Invalid response from server");U!==-1&&(h.value[U]={...h.value[U],status:A,updated_at:new Date().toISOString()},console.log(" Local devotee updated:",h.value[U])),C.value&&C.value.id===G&&(C.value={...C.value,status:A,updated_at:new Date().toISOString()});try{await ae(se)}catch(pe){console.warn(" Failed to refresh stats after status update:",pe)}const ye=A==="active"?"activated":"deactivated";return t.success(`Devotee ${ye} successfully`),console.log(" Devotee status updated successfully"),Z.data}catch(se){const G=((ne=(j=se.response)==null?void 0:j.data)==null?void 0:ne.error)||((q=(K=se.response)==null?void 0:K.data)==null?void 0:q.message)||se.message||"Failed to update devotee status";throw S.value=G,console.error(" Error updating devotee status:",{error:se,entityId:w,devoteeId:R,status:A,response:(le=se.response)==null?void 0:le.data}),t.error(G),new Error(G)}finally{T.value=!1}},I=async(w,R)=>{try{return await z(w,R,"active")}catch(A){throw console.error(" Error activating devotee:",A),A}},P=async(w,R)=>{try{return await z(w,R,"inactive")}catch(A){throw console.error(" Error deactivating devotee:",A),A}},W=(w,R)=>{B.value.hasOwnProperty(w)?B.value[w]=R:console.warn(` Invalid filter key: ${w}`)},we=()=>{B.value={status:"all",search:"",gender:"all",sortBy:"name",sortOrder:"asc"}},me=async w=>{var R,A;try{if(l.value=!0,S.value=null,!w||!w.amount)throw new Error("Invalid donation data");const j={...w,amount:Math.round(w.amount*100),currency:"INR"},ne=await ct.createDonation(j);if(ne.data)return a.value=ne.data,ne.data;throw new Error("Failed to create donation order")}catch(j){throw S.value=((A=(R=j.response)==null?void 0:R.data)==null?void 0:A.error)||j.message||"Failed to create donation",t.error(S.value),console.error("Error creating donation:",j),j}finally{l.value=!1}},De=async w=>{var R,A;try{if(l.value=!0,S.value=null,!w)throw new Error("Verification data is required");const j=await ct.verifyDonation(w);if(j.data){t.success("Donation verified successfully!");try{await ge(),g.value&&await L(g.value)}catch(ne){console.warn(" Failed to refresh data after donation verification:",ne)}return j.data}throw new Error("Failed to verify donation")}catch(j){throw S.value=((A=(R=j.response)==null?void 0:R.data)==null?void 0:A.error)||j.message||"Failed to verify donation",t.error(S.value),console.error("Error verifying donation:",j),j}finally{l.value=!1}},ge=async()=>{var w,R;try{T.value=!0,S.value=null;const A=await ct.getMyDonations();return A.data?(i.value=A.data,A.data):(i.value=[],[])}catch(A){return S.value=((R=(w=A.response)==null?void 0:w.data)==null?void 0:R.error)||A.message||"Failed to fetch donation history",console.error("Error fetching donation history:",A),i.value=[],[]}finally{T.value=!1}};return{profile:n,dashboardData:r,loading:T,error:S,selectedTempleId:g,donationHistory:i,currentDonation:a,isProcessingDonation:l,completedSteps:d,incompleteSteps:c,totalSteps:u,completionPercentage:p,isProfileComplete:v,devotees:h,devoteeStats:D,currentDevotee:C,devoteeFilters:B,filteredDevotees:_,loadProfileData:b,updateProfileStep:E,completeProfile:O,fetchDashboardData:L,joinTemple:N,setSelectedTempleId:X,getCurrentEntityId:k,fetchDevoteesByEntity:ee,fetchDevotees:oe,fetchDevoteeStats:ae,getDevoteeById:J,updateDevoteeStatus:z,activateDevotee:I,deactivateDevotee:P,setDevoteeFilter:W,resetDevoteeFilters:we,createDonation:me,verifyDonation:De,fetchDonationHistory:ge,clearError:()=>{S.value=null},resetStore:()=>{n.value={personal:{},spiritual:{},lineage:{},preferences:{},family:{},notes:{}},r.value={summary:{totalDonations:0,totalSevaBookings:0,upcomingEvents:0,profileCompletion:0},recentDonations:[],upcomingSevas:[],announcements:[],quickStats:{thisMonthDonations:0,thisMonthSevas:0,favoriteDeity:"",memberSince:""}},i.value=[],a.value=null,h.value=[],C.value=null,g.value=null,d.value=[],c.value=[],T.value=!1,l.value=!1,S.value=null,we()}}});function z1(t,o,s){const n=tt();return console.log(" Auth Check:",{isAuthenticated:n.isAuthenticated,user:n.user,userRole:n.userRole,needsTenantSelection:n.needsTenantSelection,assignedTenantId:n.assignedTenantId,route:t.path,toName:t.name}),n.isAuthenticated?n.needsTenantSelection&&t.name!=="TenantSelection"&&!t.path.includes("/tenant-selection")?(console.log(" User needs tenant selection, redirecting..."),console.log("- User role:",n.userRole),console.log("- Needs tenant selection:",n.needsTenantSelection),console.log("- Assigned tenant ID:",n.assignedTenantId),s({name:"TenantSelection"}),!1):n.isSuperAdmin&&t.name==="TenantSelection"?(console.log(" SuperAdmin accessing tenant selection - allowed"),s(),!0):(console.log(" Auth guard passed for role:",n.userRole),s(),!0):(console.log(" Not authenticated, redirecting to login"),s({name:"Login",query:{redirect:t.fullPath,message:"Please login to access this page"}}),!1)}const Xs={BASE_URL:"https://api.templecloud.in/api/v1",TIMEOUT:3e4,RETRY_ATTEMPTS:3,RETRY_DELAY:1e3};console.log("import.meta.env.VITE_API_BASE_URL= ","https://api.templecloud.in/api/v1");console.log(" API Config:",Xs);const vo=Te.create({baseURL:Xs.BASE_URL,timeout:Xs.TIMEOUT,headers:{"Content-Type":"application/json",Accept:"application/json"}});vo.interceptors.request.use(t=>{var s,n;console.log(` API Request: ${(s=t.method)==null?void 0:s.toUpperCase()} ${t.url}`);let o=localStorage.getItem("access_token");if(!o)try{o=tt().token}catch(r){console.warn("Could not access auth store:",r)}o?t.headers.Authorization=`Bearer ${o}`:console.warn("No authentication token for:",t.url);try{const r=tt();(n=r.user)!=null&&n.entityId&&!t.url.includes("/superadmin/")&&(t.headers["X-Tenant-ID"]=r.user.entityId)}catch(r){console.warn("Could not set X-Tenant-ID:",r)}return t.metadata={startTime:new Date},t},t=>Promise.reject(t));vo.interceptors.response.use(t=>{var s;const o=new Date-t.config.metadata.startTime;return console.log(` API Response: ${(s=t.config.method)==null?void 0:s.toUpperCase()} ${t.config.url} - ${o}ms`),t},async t=>{console.error(" API Error:",t);let o;try{const n=je();o=n.showToast||n.error||n}catch{o=()=>{}}let s;try{s=tt()}catch{}if(t.response){const{status:n,data:r}=t.response;switch(n){case 401:o({type:"error",title:"Authentication Required",message:"Your session has expired. Please login again."}),s?s.logout():localStorage.removeItem("auth_token"),window.location.href="/login";break;case 403:o({type:"warning",title:"Access Denied",message:r.message||"You do not have permission."});break;case 404:o({type:"error",title:"Not Found",message:(r==null?void 0:r.message)||"API endpoint not found."}),console.warn("404 URL:",t.config.url);break;case 422:console.warn("Validation errors:",r.errors);break;case 429:o({type:"warning",title:"Too Many Requests",message:"Please wait before retrying."});break;case 500:o({type:"error",title:"Server Error",message:"Internal error, please try again later."});break;default:o({type:"error",title:"Request Failed",message:(r==null?void 0:r.message)||"Unexpected error occurred."})}}else t.request?o({type:"error",title:"Network Error",message:"Check your internet connection."}):o({type:"error",title:"Request Error",message:"Request setup failed."});return Promise.reject(t)});const tp=async(t,o=1)=>{var s;try{return await vo(t)}catch(n){if(o<Xs.RETRY_ATTEMPTS&&((s=n.response)==null?void 0:s.status)>=500)return console.log(`Retrying request (attempt ${o+1})`),await new Promise(r=>setTimeout(r,Xs.RETRY_DELAY*o)),tp(t,o+1);throw n}},Co={async get(t,o={}){try{return(await tp({method:"get",url:t,...o})).data}catch(s){throw this.handleError(s)}},async post(t,o={},s={}){try{return(await vo.post(t,o,s)).data}catch(n){throw this.handleError(n)}},async put(t,o={},s={}){try{return(await vo.put(t,o,s)).data}catch(n){throw this.handleError(n)}},async patch(t,o={},s={}){try{return(await vo.patch(t,o,s)).data}catch(n){throw this.handleError(n)}},async delete(t,o={}){try{return(await vo.delete(t,o)).data}catch(s){throw this.handleError(s)}},async upload(t,o,s=null){try{const n={headers:{"Content-Type":"multipart/form-data"}};return s&&(n.onUploadProgress=i=>{const a=Math.round(i.loaded*100/i.total);s(a)}),(await vo.post(t,o,n)).data}catch(n){throw this.handleError(n)}},async download(t,o=null){try{const s=await vo.get(t,{responseType:"blob"}),n=new Blob([s.data]),r=URL.createObjectURL(n),i=document.createElement("a");return i.href=r,i.download=o||"download",document.body.appendChild(i),i.click(),document.body.removeChild(i),URL.revokeObjectURL(r),s.data}catch(s){throw this.handleError(s)}},async batch(t){try{const o=t.map(({method:s,url:n,data:r,config:i})=>this[s](n,r,i));return await Promise.allSettled(o)}catch(o){throw this.handleError(o)}},handleError(t){var s,n;const o={message:"Unexpected error occurred",status:null,data:null,errors:null};return t.response?(o.message=((s=t.response.data)==null?void 0:s.message)||t.message,o.status=t.response.status,o.data=t.response.data,o.errors=(n=t.response.data)==null?void 0:n.errors):t.request?o.message="Network error - check your internet connection":o.message=t.message,o}},Qe=(t,o)=>{const s=t.__vccOpts||t;for(const[n,r]of o)s[n]=r;return s},H1=[{path:"dashboard",name:"SuperAdminDashboard",component:()=>ft(()=>import("./SuperAdminDashboard-Busci4D0.js"),__vite__mapDeps([0,1])),meta:{title:"Super Admin Dashboard",breadcrumb:"Dashboard"}},{path:"tenant-approvals",name:"TenantApprovals",component:()=>ft(()=>import("./TenantApprovals-Cn9OyE4y.js"),__vite__mapDeps([2,1])),meta:{title:"Tenant Approvals",breadcrumb:"Tenant Approvals"}},{path:"user-management",name:"SuperadminUserManagement",component:()=>ft(()=>import("./UserManagement-C_W9aM5w.js"),__vite__mapDeps([3,4,1,5])),meta:{requiresAuth:!0,role:"superadmin"}},{path:"role-management",name:"SuperadminRoleManagement",component:()=>ft(()=>import("./RoleManagement-BcnM4uBS.js"),__vite__mapDeps([6,1,7])),meta:{requiresAuth:!0,role:"superadmin"}},{path:"reset-password",name:"ResetPassword",component:()=>ft(()=>import("./ResetPassword-CrFpA86s.js"),__vite__mapDeps([8,1])),meta:{requiresAuth:!0,role:"superadmin"}},{path:"reset-password/:userId",name:"ResetPasswordForm",component:()=>ft(()=>import("./ResetPasswordForm-C9QGh0UO.js"),__vite__mapDeps([9,1])),meta:{requiresAuth:!0,role:"superadmin",title:"Reset User Password"}},{path:"users/:userId/assign-tenants",name:"AssignTenants",component:()=>ft(()=>import("./AssignTenantsView-BZpYr21j.js"),__vite__mapDeps([10,1,11])),meta:{requiresAuth:!0,role:"superadmin",title:"Assign Tenants to User"}},{path:"audit-logs",name:"AuditLogs",component:()=>ft(()=>import("./AuditLogsView-pNuvJ5gU.js"),[]),meta:{requiresAuth:!0,role:"superadmin",title:"Audit Logs",breadcrumb:"Audit Logs"}},{path:"reports",name:"superadmin-reports",component:()=>ft(()=>import("./SuperadminReportsView-CdvJ_Rgq.js"),__vite__mapDeps([12,4,1])),meta:{requiresAuth:!0,role:"superadmin",title:"Reports Management"}},{path:"reports/temple-register",name:"SuperadminTempleRegister",component:()=>ft(()=>import("./TempleRegisterReport-BL6CWTGK.js"),[]),meta:{requiresAuth:!0,role:"superadmin",title:"Temple Register Report"}},{path:"reports/temple-activities",name:"SuperadminTempleActivities",component:()=>ft(()=>import("./TempleActivitiesReport-DCHODYK3.js"),[]),meta:{requiresAuth:!0,role:"superadmin",title:"Temple Activities Report"}},{path:"reports/birthdays",name:"SuperadminBirthdays",component:()=>ft(()=>import("./BirthdaysReport-BHr4ujjt.js"),[]),meta:{requiresAuth:!0,role:"superadmin",title:"Devotee Birthdays Report"}},{path:"reports/user-details",name:"SuperadminUserDetails",component:()=>ft(()=>import("./UserDetailsReport-BTux7PF5.js"),[]),meta:{requiresAuth:!0,role:"superadmin",title:"User Details Report"}},{path:"reports/approval-status",name:"SuperadminApprovalStatus",component:()=>ft(()=>import("./ApprovalStatusReport-CinPtdOb.js"),[]),meta:{requiresAuth:!0,role:"superadmin",title:"Approval Status Report"}}],ta={async getTemplates(){try{return{success:!0,data:(await Le.communication.getTemplates()).data}}catch(t){return this.handleError(t)}},async createTemplate(t){try{return{success:!0,data:(await Le.communication.createTemplate(t)).data}}catch(o){return this.handleError(o)}},async updateTemplate(t,o){try{return{success:!0,data:(await Le.communication.updateTemplate(t,o)).data}}catch(s){return this.handleError(s)}},async deleteTemplate(t){try{return await Le.communication.deleteTemplate(t),{success:!0,message:"Deleted successfully"}}catch(o){return this.handleError(o)}},async sendBulkMessage(t,o){try{return{success:!0,data:(await Le.communication.sendBulk(t,o)).data}}catch(s){return this.handleError(s)}},async previewBulkMessage(t,o){try{return{success:!0,data:(await Le.communication.previewBulk(t,o)).data}}catch(s){return this.handleError(s)}},async getMessageHistory(t,o){try{return{success:!0,data:(await Le.communication.getHistory(t,o)).data}}catch(s){return this.handleError(s)}},async getMessageDetails(t,o){try{return{success:!0,data:(await Le.communication.getMessageDetails(t,o)).data}}catch(s){return this.handleError(s)}},async getDevoteesForMessaging(t,o){try{return{success:!0,data:(await Le.communication.getDevotees(t,o)).data}}catch(s){return this.handleError(s)}},async sendDirectNotification(t){var o,s;try{if(console.log(" CommunicationService: Sending notification with payload:",t),!t)throw new Error("Payload is required");if(!t.channel)throw new Error("Channel is required");if(!t.subject)throw new Error("Subject is required");if(!t.body)throw new Error("Body is required");const n=await Le.communication.sendDirectNotification(t);return console.log(" CommunicationService: Notification sent successfully:",n.data),{success:!0,data:n.data}}catch(n){console.error(" CommunicationService: Error in sendDirectNotification:",n);let r="Failed to send notification";return n.response?(console.error("Server response error:",{status:n.response.status,data:n.response.data,headers:n.response.headers}),n.response.data&&(typeof n.response.data=="string"?r=n.response.data:n.response.data.error?r=n.response.data.error:n.response.data.message?r=n.response.data.message:n.response.data.details&&(r=n.response.data.details)),n.response.status===400?r=`Bad Request: ${r}`:n.response.status===401?r="Authentication failed":n.response.status===403?r="Access denied":n.response.status===404?r="Service not found":n.response.status>=500&&(r=`Server error: ${r}`)):n.request?(console.error("No response received:",n.request),r="No response from server. Please check your connection."):n.message&&(r=n.message),{success:!1,error:r,status:((o=n.response)==null?void 0:o.status)||500,details:((s=n.response)==null?void 0:s.data)||null}}},async getUnreadNotifications(t,o){try{return{success:!0,data:(await Le.communication.getUnreadNotifications(t,o)).data}}catch(s){return this.handleError(s)}},async markNotificationAsRead(t,o,s){try{return await Le.communication.markNotificationAsRead(t,o,s),{success:!0,message:"Marked as read"}}catch(n){return this.handleError(n)}},async getCommunicationStats(t,o){try{return{success:!0,data:(await Le.communication.getStats(t,o)).data}}catch(s){return this.handleError(s)}},validateMessage(t){const o=[];return t.type||o.push("Message type is required"),!t.content&&!t.templateId&&o.push("Content or template required"),t.type==="email"&&!t.subject&&o.push("Email subject required"),t.recipients||o.push("Recipients required"),{isValid:o.length===0,errors:o}},renderTemplate(t,o={}){let s=t;const n={temple_name:"[Temple Name]",devotee_name:"[Devotee Name]",current_date:new Date().toLocaleDateString("en-IN"),current_time:new Date().toLocaleTimeString("en-IN"),...o};return Object.entries(n).forEach(([r,i])=>{s=s.replace(new RegExp(`\\{${r}\\}`,"gi"),i)}),s},handleError(t){var s;console.error("CommunicationService: API Error:",t);let o="An unexpected error occurred";return t.response?(console.error("Error response:",{status:t.response.status,data:t.response.data,headers:t.response.headers}),t.response.data&&(typeof t.response.data=="string"?o=t.response.data:t.response.data.error?o=t.response.data.error:t.response.data.message&&(o=t.response.data.message)),t.response.status===500?o=`Server error: ${o}`:t.response.status===404?o="Service not found":t.response.status===401?o="Authentication error":t.response.status===403&&(o="Access denied")):t.request?(console.error("No response received:",t.request),o="No response from server. Check your connection."):t.message&&(o=t.message),{success:!1,error:o,status:((s=t.response)==null?void 0:s.status)||500}}},q1={name:"MessageComposer",setup(){const t=tt(),o=Ze(),s=V(!1),n=V(""),r=V(!1),i=V(!1),a=te(()=>{var M;return(M=t.user)==null?void 0:M.id}),l=te(()=>{var M,X,ee,oe;return((M=t.user)==null?void 0:M.entity_id)??((X=t.user)==null?void 0:X.entityId)??((oe=(ee=t.user)==null?void 0:ee.current_entity)==null?void 0:oe.id)??localStorage.getItem("current_entity_id")??null}),d=te(()=>!!localStorage.getItem("auth_token")),c=te(()=>!1),u=V("all"),p=V([]),v=V("announcement"),g=V(""),h=V(""),D=V(["email"]),C=V("now"),B=V(""),_=V(""),T=V(!1),S=V(!1),k=te(()=>{const X=u.value==="custom"?p.value.length>0:!0;return g.value.trim()&&h.value.trim()&&D.value.length>0&&X&&!s.value}),b=(M,X=!1)=>{n.value=M,r.value=X,setTimeout(()=>{n.value=""},5e3)},x=()=>{u.value==="all"?p.value=[{id:1,name:"All Devotees",type:"devotee"},{id:2,name:"All Volunteers",type:"volunteer"}]:u.value==="devotees"?p.value=[{id:1,name:"All Devotees",type:"devotee"}]:u.value==="volunteers"&&(p.value=[{id:2,name:"All Volunteers",type:"volunteer"}])},F=M=>{p.value=p.value.filter(X=>X.id!==M)},E=()=>{console.log("Opening template selector...")},O=()=>{T.value=!0,console.log("Saving draft...")},N=()=>{g.value="",h.value="",T.value=!1},L=async()=>{if(console.log(" Starting message send process..."),!a.value||!l.value){const M=`Missing required data - Sender ID: ${a.value}, Entity ID: ${l.value}`;console.error(" Validation failed:",M),b(M,!0);return}if(!d.value){const M="No authentication token found";console.error(" Auth check failed:",M),b(M,!0);return}if(!g.value.trim()||!h.value.trim()){const M="Subject and message are required";console.error(" Content validation failed:",M),b(M,!0);return}if(!D.value.length){const M="Please select at least one delivery method";console.error(" Delivery method validation failed:",M),b(M,!0);return}s.value=!0;try{const M=u.value==="custom";let X=0,ee=0,oe="";b("Sending messages...",!1);for(const ae of D.value){console.log(` Preparing to send via ${ae}...`);const H={channel:ae,subject:g.value.trim(),body:h.value.trim(),template_id:null,recipients:M?p.value.map(J=>ae==="email"?J.email:ae==="sms"||ae==="whatsapp"?J.phone:J.id).filter(Boolean):[],audience:M?null:u.value,metadata:{sender_id:a.value,entity_id:l.value,message_type:v.value,scheduled_type:C.value}};console.log(` Payload for ${ae}:`,JSON.stringify(H,null,2));try{const J=await ta.sendDirectNotification(H);J.success?(X++,console.log(` Successfully sent via ${ae}`)):(ee++,oe=J.error||"Unknown error",console.error(` Failed to send via ${ae}:`,J.error))}catch(J){ee++,oe=J.message||"Network error",console.error(` Exception sending via ${ae}:`,J)}}X>0&&ee===0?(b(` Message sent successfully via ${X} channel(s)!`,!1),g.value="",h.value="",p.value=[],x()):X>0&&ee>0?b(` Partially sent: ${X} successful, ${ee} failed. Last error: ${oe}`,!0):b(` Failed to send message: ${oe}`,!0)}catch(M){console.error(" Unexpected error in sendMessage:",M),b(` Unexpected error: ${M.message}`,!0)}finally{s.value=!1}};return Ee(()=>{console.log(" MessageComposer mounted"),console.log("Auth state:",{user:t.user,senderID:a.value,entityID:l.value,hasToken:d.value}),x();const M=o.query.subject,X=o.query.content;M&&(g.value=M),X&&(h.value=X)}),{recipientType:u,selectedRecipients:p,messageType:v,subject:g,message:h,deliveryMethods:D,scheduleType:C,scheduledDate:B,scheduledTime:_,isDraft:T,showRecipientModal:S,isSubmitting:s,statusMessage:n,isError:r,showDebugInfo:i,canSend:k,senderID:a,entityID:l,hasAuthToken:d,isDevelopment:c,updateRecipients:x,removeRecipient:F,insertTemplate:E,saveDraft:O,clearDraft:N,sendMessage:L}}},G1={class:"bg-white rounded-2xl shadow-lg border border-gray-100 overflow-hidden"},W1={class:"bg-gradient-to-r from-indigo-600 to-indigo-700 px-6 py-4"},J1={class:"flex items-center justify-between"},Y1={class:"flex items-center justify-between"},K1={key:1,class:"p-4 bg-yellow-50 border border-yellow-200 rounded-lg text-sm"},X1={class:"space-y-1 text-yellow-700"},Z1={class:"space-y-4"},Q1={class:"flex items-center justify-between"},e2={class:"text-xs text-gray-500"},t2={class:"grid grid-cols-1 md:grid-cols-3 gap-3"},o2={class:"relative cursor-pointer"},s2={class:"relative cursor-pointer"},n2={class:"relative cursor-pointer"},r2={key:0,class:"space-y-3"},a2={class:"flex items-center justify-between"},i2={class:"flex flex-wrap gap-2"},l2=["onClick"],d2={class:"space-y-2"},u2={class:"space-y-2"},c2={class:"flex items-center justify-between text-sm"},p2={class:"flex items-center space-x-4"},m2={class:"text-gray-500"},g2={class:"space-y-3"},f2={class:"space-y-2"},v2={class:"flex items-center space-x-3"},h2={class:"flex items-center space-x-3"},y2={class:"flex items-center space-x-3"},x2={class:"flex flex-col sm:flex-row gap-3 pt-6 border-t border-gray-100"},b2=["disabled"],w2={key:0,class:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},k2={key:1,class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"};function _2(t,o,s,n,r,i){return m(),f("div",G1,[e("div",W1,[e("div",J1,[o[18]||(o[18]=$e('<div class="flex items-center space-x-3"><div class="bg-white/20 rounded-lg p-2"><svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 19l9 2-9-18-9 18 9-2zm0 0v-8"></path></svg></div><div><h2 class="text-xl font-bold text-white">Compose Message</h2><p class="text-indigo-100 text-sm">Send notifications to devotees and volunteers</p></div></div>',1)),n.isDraft?(m(),f("button",{key:0,onClick:o[0]||(o[0]=(...a)=>n.clearDraft&&n.clearDraft(...a)),class:"bg-white/20 hover:bg-white/30 text-white px-4 py-2 rounded-lg text-sm font-medium transition-all duration-200"}," Clear Draft ")):Y("",!0)])]),e("form",{onSubmit:o[17]||(o[17]=Oe((...a)=>n.sendMessage&&n.sendMessage(...a),["prevent"])),class:"p-6 space-y-6"},[n.statusMessage?(m(),f("div",{key:0,class:ie(["p-4 rounded-lg text-sm",n.isError?"bg-red-100 text-red-800":"bg-green-100 text-green-800"])},[e("div",Y1,[e("span",null,y(n.statusMessage),1),e("button",{onClick:o[1]||(o[1]=a=>n.statusMessage=""),class:"ml-2 text-gray-500 hover:text-gray-700"},[...o[19]||(o[19]=[e("svg",{class:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z","clip-rule":"evenodd"})],-1)])])])],2)):Y("",!0),n.isDevelopment&&n.showDebugInfo?(m(),f("div",K1,[o[20]||(o[20]=e("div",{class:"font-semibold text-yellow-800 mb-2"},"Debug Info:",-1)),e("div",X1,[e("div",null,"Sender ID: "+y(n.senderID||"Not set"),1),e("div",null,"Entity ID: "+y(n.entityID||"Not set"),1),e("div",null,"Auth Token: "+y(n.hasAuthToken?"Present":"Missing"),1),e("div",null,"Recipient Type: "+y(n.recipientType),1),e("div",null,"Selected Recipients: "+y(n.selectedRecipients.length),1),e("div",null,"Delivery Methods: "+y(n.deliveryMethods.join(", ")),1)]),e("button",{type:"button",onClick:o[2]||(o[2]=a=>n.showDebugInfo=!1),class:"text-yellow-600 underline mt-2"},"Hide Debug")])):Y("",!0),e("div",Z1,[e("div",Q1,[o[21]||(o[21]=e("label",{class:"text-sm font-semibold text-gray-900"},"Recipients",-1)),e("span",e2,y(n.selectedRecipients.length)+" selected",1)]),e("div",t2,[e("label",o2,[de(e("input",{type:"radio",value:"all","onUpdate:modelValue":o[3]||(o[3]=a=>n.recipientType=a),class:"sr-only",onChange:o[4]||(o[4]=(...a)=>n.updateRecipients&&n.updateRecipients(...a))},null,544),[[cs,n.recipientType]]),e("div",{class:ie(["border-2 rounded-xl p-4 text-center transition-all duration-200",n.recipientType==="all"?"border-indigo-500 bg-indigo-50":"border-gray-200 hover:border-gray-300"])},[e("div",{class:ie(["w-8 h-8 mx-auto mb-2 rounded-full flex items-center justify-center",n.recipientType==="all"?"bg-indigo-500 text-white":"bg-gray-100 text-gray-400"])},[...o[22]||(o[22]=[e("svg",{class:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{d:"M13 6a3 3 0 11-6 0 3 3 0 016 0zM18 8a2 2 0 11-4 0 2 2 0 014 0zM14 15a4 4 0 00-8 0v3h8v-3z"})],-1)])],2),e("span",{class:ie(["font-medium text-sm",n.recipientType==="all"?"text-indigo-700":"text-gray-600"])}," All Members ",2)],2)]),e("label",s2,[de(e("input",{type:"radio",value:"devotees","onUpdate:modelValue":o[5]||(o[5]=a=>n.recipientType=a),class:"sr-only",onChange:o[6]||(o[6]=(...a)=>n.updateRecipients&&n.updateRecipients(...a))},null,544),[[cs,n.recipientType]]),e("div",{class:ie(["border-2 rounded-xl p-4 text-center transition-all duration-200",n.recipientType==="devotees"?"border-indigo-500 bg-indigo-50":"border-gray-200 hover:border-gray-300"])},[e("div",{class:ie(["w-8 h-8 mx-auto mb-2 rounded-full flex items-center justify-center",n.recipientType==="devotees"?"bg-indigo-500 text-white":"bg-gray-100 text-gray-400"])},[...o[23]||(o[23]=[e("svg",{class:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)])],2),e("span",{class:ie(["font-medium text-sm",n.recipientType==="devotees"?"text-indigo-700":"text-gray-600"])}," Devotees Only ",2)],2)]),e("label",n2,[de(e("input",{type:"radio",value:"volunteers","onUpdate:modelValue":o[7]||(o[7]=a=>n.recipientType=a),class:"sr-only",onChange:o[8]||(o[8]=(...a)=>n.updateRecipients&&n.updateRecipients(...a))},null,544),[[cs,n.recipientType]]),e("div",{class:ie(["border-2 rounded-xl p-4 text-center transition-all duration-200",n.recipientType==="volunteers"?"border-indigo-500 bg-indigo-50":"border-gray-200 hover:border-gray-300"])},[e("div",{class:ie(["w-8 h-8 mx-auto mb-2 rounded-full flex items-center justify-center",n.recipientType==="volunteers"?"bg-indigo-500 text-white":"bg-gray-100 text-gray-400"])},[...o[24]||(o[24]=[e("svg",{class:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{d:"M13 6a3 3 0 11-6 0 3 3 0 016 0zM18 8a2 2 0 11-4 0 2 2 0 014 0zM14 15a4 4 0 00-8 0v3h8v-3z"})],-1)])],2),e("span",{class:ie(["font-medium text-sm",n.recipientType==="volunteers"?"text-indigo-700":"text-gray-600"])}," Volunteers Only ",2)],2)])]),n.recipientType==="custom"?(m(),f("div",r2,[e("div",a2,[o[25]||(o[25]=e("label",{class:"text-sm font-medium text-gray-700"},"Select Recipients",-1)),e("button",{type:"button",onClick:o[9]||(o[9]=a=>n.showRecipientModal=!0),class:"text-indigo-600 hover:text-indigo-700 text-sm font-medium"}," Browse & Select ")]),e("div",i2,[(m(!0),f(he,null,ke(n.selectedRecipients,a=>(m(),f("span",{key:a.id,class:"inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-indigo-100 text-indigo-800"},[Q(y(a.name)+" ",1),e("button",{type:"button",onClick:l=>n.removeRecipient(a.id),class:"ml-2 text-indigo-600 hover:text-indigo-800"},[...o[26]||(o[26]=[e("svg",{class:"w-3 h-3",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z","clip-rule":"evenodd"})],-1)])],8,l2)]))),128))])])):Y("",!0)]),e("div",d2,[o[27]||(o[27]=e("label",{class:"text-sm font-semibold text-gray-900"},"Subject",-1)),de(e("input",{type:"text","onUpdate:modelValue":o[10]||(o[10]=a=>n.subject=a),placeholder:"Enter message subject...",class:"w-full px-4 py-3 border border-gray-200 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-all duration-200",required:""},null,512),[[xe,n.subject]])]),e("div",u2,[o[28]||(o[28]=e("label",{class:"text-sm font-semibold text-gray-900"},"Message",-1)),de(e("textarea",{"onUpdate:modelValue":o[11]||(o[11]=a=>n.message=a),placeholder:"Type your message here...",rows:"6",class:"w-full px-4 py-3 border border-gray-200 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-all duration-200 resize-none",required:""},null,512),[[xe,n.message]]),e("div",c2,[e("div",p2,[e("button",{type:"button",onClick:o[12]||(o[12]=(...a)=>n.insertTemplate&&n.insertTemplate(...a)),class:"text-indigo-600 hover:text-indigo-700 font-medium"}," Insert Template "),n.isDevelopment?(m(),f("button",{key:0,type:"button",onClick:o[13]||(o[13]=a=>n.showDebugInfo=!n.showDebugInfo),class:"text-gray-500 hover:text-gray-700 font-medium"},y(n.showDebugInfo?"Hide":"Show")+" Debug ",1)):Y("",!0)]),e("span",m2,y(n.message.length)+"/1000 characters",1)])]),e("div",g2,[o[32]||(o[32]=e("label",{class:"text-sm font-semibold text-gray-900"},"Delivery Method",-1)),e("div",f2,[e("label",v2,[de(e("input",{type:"checkbox","onUpdate:modelValue":o[14]||(o[14]=a=>n.deliveryMethods=a),value:"sms",class:"w-4 h-4 text-indigo-600 border-gray-300 rounded focus:ring-indigo-500"},null,512),[[ot,n.deliveryMethods]]),o[29]||(o[29]=e("span",{class:"text-sm text-gray-700"},"SMS",-1))]),e("label",h2,[de(e("input",{type:"checkbox","onUpdate:modelValue":o[15]||(o[15]=a=>n.deliveryMethods=a),value:"email",class:"w-4 h-4 text-indigo-600 border-gray-300 rounded focus:ring-indigo-500"},null,512),[[ot,n.deliveryMethods]]),o[30]||(o[30]=e("span",{class:"text-sm text-gray-700"},"Email",-1))]),e("label",y2,[de(e("input",{type:"checkbox","onUpdate:modelValue":o[16]||(o[16]=a=>n.deliveryMethods=a),value:"whatsapp",class:"w-4 h-4 text-indigo-600 border-gray-300 rounded focus:ring-indigo-500"},null,512),[[ot,n.deliveryMethods]]),o[31]||(o[31]=e("span",{class:"text-sm text-gray-700"},"WhatsApp",-1))])])]),e("div",x2,[e("button",{type:"submit",disabled:!n.canSend||n.isSubmitting,class:"flex-1 bg-indigo-600 hover:bg-indigo-700 disabled:bg-gray-300 disabled:cursor-not-allowed text-white font-semibold py-3 px-6 rounded-lg transition-all duration-200 flex items-center justify-center space-x-2"},[n.isSubmitting?(m(),f("svg",w2,[...o[33]||(o[33]=[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)])])):(m(),f("svg",k2,[...o[34]||(o[34]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 19l9 2-9-18-9 18 9-2zm0 0v-8"},null,-1)])])),e("span",null,y(n.scheduleType==="now"?"Send Message":"Schedule Message"),1)],8,b2)])],32)])}const op=Qe(q1,[["render",_2]]),it={async getTemples(t={}){var o,s,n,r,i,a,l;try{console.log(" Making API call to fetch available temples"),console.log(" Search params:",t);const d=window.location.pathname;console.log(" Current path:",d);const c=d.includes("/standarduser")||d.match(/\/tenant\/\d+\/dashboard/)!==null||d==="/tenant/dashboard",u=((o=t.headers)==null?void 0:o["X-Tenant-ID"])||localStorage.getItem("current_tenant_id")||((s=d.match(/\/tenant\/(\d+)\/dashboard/))==null?void 0:s[1])||localStorage.getItem("X-Tenant-ID");console.log(` Is standard user check: ${c}`),console.log(` Using tenant ID: ${u||"none"}`);const p=t.superAdmin===!0;if(console.log(` Is SuperAdmin request: ${p}`),c&&!p)return console.log(" Standard user detected - using specialized multi-fetch approach"),await this.getTemplesForStandardUser();let v;if(p){console.log(` Using SuperAdmin endpoint for tenant ${t.tenantId}`);try{const C=Date.now();v=await ce.get(`/entities?tenant_id=${t.tenantId}&_=${C}`),console.log(" First attempt successful with /entities endpoint")}catch(C){console.log(" First endpoint failed, trying fallback...",C.message);try{const B=Date.now();v=await ce.get(`/superadmin/entities?tenant_id=${t.tenantId}&_=${B}`),console.log(" Second attempt successful with /superadmin/entities endpoint")}catch(B){console.log(" Second endpoint failed, trying third endpoint...",B.message);try{const _=Date.now();v=await ce.get(`/superadmin/tenants/${t.tenantId}/entities?_=${_}`),console.log(" Third attempt successful with /superadmin/tenants/[id]/entities endpoint")}catch(_){console.log(" All SuperAdmin tenant-specific endpoints failed, using generic endpoint",_.message);const T=Date.now();v=await ce.get(`/entities?_=${T}`)}}}}else if(d.includes("/tenant/dashboard")){const C=Date.now();console.log(" Using temple admin special endpoint with multi-fallback strategy");try{console.log(" Trying /entities/by-creator endpoint..."),v=await ce.get(`/entities/by-creator?_=${C}`),console.log(" by-creator endpoint successful")}catch(B){console.log(" by-creator endpoint failed, trying tenant-created endpoint...",B.message);try{const _=((n=t.headers)==null?void 0:n["X-Tenant-ID"])||localStorage.getItem("current_tenant_id")||((r=d.match(/\/tenant\/(\d+)\/dashboard/))==null?void 0:r[1]);if(_)console.log(` Trying /entities/tenant/${_}/created endpoint...`),v=await ce.get(`/entities/tenant/${_}/created?_=${C}`),console.log(" tenant-created endpoint successful");else throw new Error("No tenant ID available for tenant-created endpoint")}catch(_){console.log(" tenant-created endpoint failed, trying general entities...",_.message);try{console.log(" Trying /entities endpoint..."),v=await ce.get(`/entities?_=${C}`),console.log(" general entities endpoint successful")}catch(T){console.log(" All temple admin endpoints failed, creating empty response",T.message),v={data:[]}}}}}else if(d.includes("/tenant/")||d.includes("/entity/")||d.includes("/admin/")||d.includes("/standarduser/")||d.includes("/superadmin/")){const C=Date.now();console.log(" Using admin endpoint: /entities"),v=await ce.get(`/entities?_=${C}`)}else{console.log(" Using devotee endpoint: /temples/search");const C=new URLSearchParams;t.query&&C.append("query",t.query),t.state&&C.append("state",t.state),t.type&&C.append("type",t.type),C.append("_",Date.now()),v=await ce.get(`/temples/search${C.toString()?"?"+C.toString():""}`)}console.log(" Temple API response received:",v);let g=(v==null?void 0:v.data)||v;if(!Array.isArray(g))if(g!=null&&g.data&&Array.isArray(g.data))g=g.data;else if(g!=null&&g.temples&&Array.isArray(g.temples))g=g.temples;else if(g!=null&&g.entities&&Array.isArray(g.entities))g=g.entities;else if(g!=null&&g.items&&Array.isArray(g.items))g=g.items;else return console.log(" Could not extract temple data from response, returning empty array"),[];if(!Array.isArray(g))return console.error(" Could not extract array from response:",v),[];if(p&&t.tenantId){console.log(` SUPERADMIN: Filtering temples by tenant ID ${t.tenantId}`),g=g.filter(B=>B.created_by&&B.created_by.toString()===t.tenantId.toString()||B.tenant_id&&B.tenant_id.toString()===t.tenantId.toString()||B.creator_id&&B.creator_id.toString()===t.tenantId.toString()),console.log(` SUPERADMIN: After filtering: ${g.length} temples match tenant ID ${t.tenantId}`);const C=g.map(B=>this.normalizeTempleData(B));return console.log(` SUPERADMIN: Final normalized temples: ${C.length}`),C}const h=((i=t.headers)==null?void 0:i["X-Tenant-ID"])||t.tenantId||localStorage.getItem("current_tenant_id")||((a=d.match(/\/tenant\/(\d+)\/dashboard/))==null?void 0:a[1]);c?console.log(` STANDARD USER - SHOWING ALL TEMPLES (${g.length}) WITHOUT FILTERING`):h&&(d.includes("/tenant/")||t.superAdmin)&&(console.log(` Filtering temples by tenant ID ${h}`),g=g.filter(C=>C.created_by&&C.created_by.toString()===h.toString()||C.tenant_id&&C.tenant_id.toString()===h.toString()||C.creator_id&&C.creator_id.toString()===h.toString()),console.log(` After filtering: ${g.length} temples match tenant ID ${h}`));const D=g.map(C=>this.normalizeTempleData(C));return console.log(` Final temples count: ${D.length}`),console.log(" Normalized temples:",D),D}catch(d){return console.error(" Error fetching temples:",d),console.error("Error response:",(l=d.response)==null?void 0:l.data),[]}},async getTempleById(t){var o;try{console.log(` Fetching temple details for ID: ${t}`);const s=Date.now(),n=await ce.get(`/entities/${t}?_=${s}`);console.log(" Temple details response:",n);const r=n.data||n;return this.normalizeTempleData(r)}catch(s){throw console.error(` Error fetching temple ID ${t}:`,s),console.error("Error response:",(o=s.response)==null?void 0:o.data),s}},async getTempleDocuments(t){var o;try{console.log(` Fetching documents for temple ID: ${t}`);const s=Date.now(),n=await ce.get(`/entities/${t}/documents?_=${s}`);return console.log(" Temple documents response:",n),n.data||n}catch(s){throw console.error(` Error fetching temple documents for ID ${t}:`,s),console.error("Error response:",(o=s.response)==null?void 0:o.data),s}},async downloadDocument(t,o){try{console.log(` Downloading ${o} for temple ID: ${t}`);const s=await ce.get(`/entities/${t}/documents/${o}/download`,{responseType:"blob"}),n=new Blob([s.data]),r=window.URL.createObjectURL(n),i=s.headers["content-disposition"];let a=`${o}_${t}.pdf`;if(i){const d=i.match(/filename="(.+)"/);d&&(a=d[1])}const l=document.createElement("a");return l.href=r,l.download=a,document.body.appendChild(l),l.click(),document.body.removeChild(l),window.URL.revokeObjectURL(r),console.log(` Downloaded ${o} as ${a}`),{success:!0,filename:a}}catch(s){throw console.error(` Error downloading ${o} for temple ID ${t}:`,s),s}},async getSuperAdminTemplesStrict(t){try{if(console.log(` STRICT: Fetching temples for tenant ID ${t}`),!t)return console.error(" STRICT: No tenant ID provided"),[];const o=Date.now(),s=await ce.get(`/entities?_=${o}`,{headers:{"X-Tenant-ID":t}});console.log(" STRICT: API response:",s);let n=(s==null?void 0:s.data)||s;Array.isArray(n)||(n!=null&&n.data&&Array.isArray(n.data)?n=n.data:n!=null&&n.temples&&Array.isArray(n.temples)?n=n.temples:n!=null&&n.entities&&Array.isArray(n.entities)?n=n.entities:n!=null&&n.items&&Array.isArray(n.items)?n=n.items:n=[]),console.log(` STRICT: Total temples before filtering: ${n.length}`);const r=n.filter(a=>{const l=a.created_by&&a.created_by.toString()===t.toString(),d=a.tenant_id&&a.tenant_id.toString()===t.toString(),c=a.creator_id&&a.creator_id.toString()===t.toString();return l||d||c});return console.log(` STRICT: Temples after filtering: ${r.length}`),r.map(a=>this.normalizeTempleData(a))}catch(o){return console.error(" STRICT: Error fetching temples:",o),[]}},async getTemplesDirectByTenant(t){try{if(console.log(` DIRECT: Making direct API call for tenant ${t}`),!t)return console.error(" DIRECT: No tenant ID provided"),[];let o=null,s="",n=!1;const r={Authorization:`Bearer ${localStorage.getItem("auth_token")}`,"X-Tenant-ID":t};try{s=`/entities/by-creator?tenant_id=${t}&_=${Date.now()}`,console.log(` DIRECT: Trying endpoint: ${s}`),o=await ce.get(s,{headers:r}),console.log(` DIRECT: Success with ${s}`),n=!0}catch(l){console.log(` DIRECT: Failed with ${s}: ${l.message}`);try{s=`/entities?tenant_id=${t}&_=${Date.now()}`,console.log(` DIRECT: Trying endpoint: ${s}`),o=await ce.get(s,{headers:r}),console.log(` DIRECT: Success with ${s}`),n=!0}catch(d){console.log(` DIRECT: Failed with ${s}: ${d.message}`);try{s=`/superadmin/tenants/${t}/entities?_=${Date.now()}`,console.log(` DIRECT: Trying endpoint: ${s}`),o=await ce.get(s,{headers:r}),console.log(` DIRECT: Success with ${s}`),n=!0}catch(c){console.log(` DIRECT: Failed with ${s}: ${c.message}`),s=`/entities?_=${Date.now()}`,console.log(` DIRECT: Using fallback endpoint: ${s}`),o=await ce.get(s,{headers:r})}}}console.log(` DIRECT: Response from ${s}:`,o);let i=[];o&&o.data&&(i=Array.isArray(o.data)?o.data:o.data.data?o.data.data:o.data.entities?o.data.entities:o.data.items?o.data.items:[]),console.log(` DIRECT: Extracted ${i.length} temples`);const a=i.filter(l=>{const d=l.created_by&&l.created_by.toString()===t.toString(),c=l.tenant_id&&l.tenant_id.toString()===t.toString(),u=l.creator_id&&l.creator_id.toString()===t.toString();return d||c||u});return console.log(` DIRECT: After filtering: ${a.length} temples`),a.map(l=>this.normalizeTempleData(l))}catch(o){return console.error(" DIRECT: Fatal error:",o),[]}},async getTemplesForStandardUser(){var t,o;try{console.log(" Standard user: Fetching all accessible temples...");const s=localStorage.getItem("current_tenant_id")||((t=document.querySelector('meta[name="tenant-id"]'))==null?void 0:t.getAttribute("content"))||((o=window.location.pathname.match(/\/tenant\/(\d+)\/dashboard/))==null?void 0:o[1]);console.log(` Using tenant ID: ${s}`);const n=new Map;try{console.log("1 Fetching assigned entity...");const a=Date.now();let d=(await ce.get(`/entities?_=${a}`)).data||[];Array.isArray(d)||(d.data&&Array.isArray(d.data)?d=d.data:d.entities&&Array.isArray(d.entities)?d=d.entities:d.items&&Array.isArray(d.items)?d=d.items:d=[]),console.log(` Got ${d.length} assigned temples`),d.forEach(c=>{n.set(c.id,c)})}catch(a){console.warn(" Error fetching assigned entity:",a.message)}if(s)try{console.log(`2 Fetching temples for tenant ${s}...`);const a=Date.now();let d=(await ce.get(`/entities?tenant_id=${s}&_=${a}`)).data||[];Array.isArray(d)||(d.data&&Array.isArray(d.data)?d=d.data:d.entities&&Array.isArray(d.entities)?d=d.entities:d.items&&Array.isArray(d.items)?d=d.items:d=[]),console.log(` Got ${d.length} tenant temples`),d.forEach(c=>{n.set(c.id,c)})}catch(a){console.warn(" Error fetching tenant temples:",a.message)}try{console.log("3 Fetching all temples as fallback...");const a=Date.now();let d=(await ce.get(`/superadmin/entities?_=${a}`)).data||[];Array.isArray(d)||(d.data&&Array.isArray(d.data)?d=d.data:d.entities&&Array.isArray(d.entities)?d=d.entities:d.items&&Array.isArray(d.items)?d=d.items:d=[]),s&&(d=d.filter(c=>c.created_by&&c.created_by.toString()===s.toString()||c.tenant_id&&c.tenant_id.toString()===s.toString()||c.creator_id&&c.creator_id.toString()===s.toString())),console.log(` Got ${d.length} superadmin temples for tenant`),d.forEach(c=>{n.set(c.id,c)})}catch(a){console.warn(" Error fetching superadmin temples:",a.message)}const r=Array.from(n.values());return console.log(` Total unique temples found: ${r.length}`),r.map(a=>this.normalizeTempleData(a))}catch(s){return console.error(" Error in getTemplesForStandardUser:",s),[]}},async getSuperAdminTemples(t){return console.log(` Making API call to fetch temples for SuperAdmin for tenant ${t}`),this.getTemples({tenantId:t,superAdmin:!0})},async createTemple(t){var o,s,n,r,i,a,l,d,c;try{console.log(" Creating new temple entity"),console.log(" Temple data received:",t);const u=t.documents&&(t.documents.registration||t.documents.trustDeed||t.documents.property||t.documents.additional&&t.documents.additional.length>0);let p,v={};if(u){console.log(" Creating FormData with files");const h=new FormData;h.append("name",t.name||""),h.append("main_deity",t.main_deity||t.mainDeity||""),h.append("temple_type",t.temple_type||t.templeType||t.category||""),h.append("established_year",t.established_year?t.established_year.toString():""),h.append("phone",t.phone||""),h.append("email",t.email||""),h.append("description",t.description||""),h.append("street_address",t.street_address||((o=t.address)==null?void 0:o.street)||t.streetAddress||""),h.append("city",t.city||((s=t.address)==null?void 0:s.city)||""),h.append("district",t.district||""),h.append("state",t.state||((n=t.address)==null?void 0:n.state)||""),h.append("pincode",t.pincode||((r=t.address)==null?void 0:r.pincode)||""),h.append("landmark",t.landmark||""),h.append("map_link",t.map_link||t.mapLink||""),h.append("status","pending"),t.documents.registration&&(h.append("registration_cert",t.documents.registration),console.log(" Added registration certificate:",t.documents.registration.name)),t.documents.trustDeed&&(h.append("trust_deed",t.documents.trustDeed),console.log(" Added trust deed:",t.documents.trustDeed.name)),t.documents.property&&(h.append("property_docs",t.documents.property),console.log(" Added property documents:",t.documents.property.name)),t.documents.additional&&t.documents.additional.length>0&&t.documents.additional.forEach((D,C)=>{h.append(`additional_docs_${C}`,D),console.log(` Added additional document ${C}:`,D.name)}),p=h,console.log(" FormData contents:");for(let[D,C]of h.entries())C instanceof File?console.log(`${D}: File - ${C.name} (${C.size} bytes)`):console.log(`${D}: ${C}`)}else console.log(" Creating JSON payload (no files)"),p={name:t.name||"",main_deity:t.main_deity||t.mainDeity||"",temple_type:t.temple_type||t.templeType||t.category||"",established_year:t.established_year?parseInt(t.established_year):null,phone:t.phone||"",email:t.email||"",description:t.description||"",street_address:t.street_address||((i=t.address)==null?void 0:i.street)||t.streetAddress||"",city:t.city||((a=t.address)==null?void 0:a.city)||"",district:t.district||"",state:t.state||((l=t.address)==null?void 0:l.state)||"",pincode:t.pincode||((d=t.address)==null?void 0:d.pincode)||"",landmark:t.landmark||"",map_link:t.map_link||t.mapLink||"",status:"pending"},v["Content-Type"]="application/json",console.log(" JSON payload:",p);console.log(" Making API request to /entities"),console.log(" Headers:",v);const g=await ce.post("/entities",p,{headers:v});return console.log(" Temple created successfully:",g.data),g.data||g}catch(u){throw console.error(" Error creating temple:",u),console.error(" Error response:",(c=u.response)==null?void 0:c.data),console.error(" Error config:",u.config),u}},async updateTemple(t,o){var s,n,r,i,a,l,d;try{console.log(` Updating temple with ID: ${t}`),console.log(" Update data:",o);const c={id:parseInt(t),name:o.name||"",main_deity:o.mainDeity||o.main_deity||"",temple_type:o.templeType||o.temple_type||o.category||"",established_year:o.establishedYear?parseInt(o.establishedYear):null,phone:((s=o.contact)==null?void 0:s.phone)||o.phone||"",email:((n=o.contact)==null?void 0:n.email)||o.email||"",description:o.description||"",street_address:((r=o.address)==null?void 0:r.street)||o.streetAddress||o.addressLine1||o.street_address||"",city:((i=o.address)==null?void 0:i.city)||o.city||"",district:o.district||"",state:((a=o.address)==null?void 0:a.state)||o.state||"",pincode:((l=o.address)==null?void 0:l.pincode)||o.pincode||"",landmark:o.landmark||"",map_link:o.mapLink||o.map_link||""};console.log(" Final update payload:",c);const u=await ce.put(`/entities/${t}`,c);return console.log(" Update temple response:",u),u.data||u}catch(c){throw console.error(` Error updating temple ID ${t}:`,c),console.error("Error details:",c.message||((d=c.response)==null?void 0:d.data)),c}},async deleteTemple(t){var o;try{console.log(` Deleting temple with ID: ${t}`);const s=await ce.delete(`/entities/${t}`);return console.log(" Temple deleted successfully"),s.data||s}catch(s){throw console.error(` Error deleting temple ID ${t}:`,s),console.error("Error response:",(o=s.response)==null?void 0:o.data),s}},async joinTemple(t){var o;try{console.log(` Joining temple ID ${t}`);const s=await ce.post("/memberships",{entity_id:t});return console.log(" Join temple response:",s),s.data||s}catch(s){throw console.error(` Error joining temple ID ${t}:`,s),console.error("Error response:",(o=s.response)==null?void 0:o.data),s}},async getRecentTemples(){var t;try{console.log(" Fetching recent temples");const o=await ce.get("/temples/recent");console.log(" Recent temples response:",o);let s=o.data||o;return Array.isArray(s)||(s.data&&Array.isArray(s.data)?s=s.data:s.temples&&Array.isArray(s.temples)?s=s.temples:s.entities&&Array.isArray(s.entities)?s=s.entities:s.items&&Array.isArray(s.items)&&(s=s.items)),Array.isArray(s)?s.map(n=>this.normalizeTempleData(n)):(console.error(" Could not extract array from response:",o),[])}catch(o){return console.error(" Error fetching recent temples:",o),console.error("Error response:",(t=o.response)==null?void 0:t.data),[]}},normalizeTempleData(t){return t?{id:t.id||t.ID||0,name:t.name||t.Name||"Unknown Temple",description:t.description||t.Description||"",templeType:t.temple_type||t.TempleType||"",category:t.temple_type||t.TempleType||"",addressLine1:t.street_address||t.StreetAddress||"",city:t.city||t.City||"",state:t.state||t.State||"",district:t.district||t.District||"",pincode:t.pincode||t.Pincode||"",country:"India",phone:t.phone||t.Phone||"",email:t.email||t.Email||"",status:t.status||t.Status||"pending",devoteeCount:t.devotee_count||t.DevoteeCount||0,volunteersCount:t.volunteers_count||t.VolunteersCount||0,image:t.image_url||t.ImageUrl||null,mainDeity:t.main_deity||t.MainDeity||"",establishedYear:t.established_year||t.EstablishedYear||null,createdAt:t.created_at||t.CreatedAt||null,updatedAt:t.updated_at||t.UpdatedAt||null,createdBy:t.created_by||t.CreatedBy||null,tenantId:t.tenant_id||t.TenantId||t.created_by||t.CreatedBy||null,registrationCertUrl:t.registration_cert_url||t.RegistrationCertUrl||null,trustDeedUrl:t.trust_deed_url||t.TrustDeedUrl||null,propertyDocsUrl:t.property_docs_url||t.PropertyDocsUrl||null,additionalDocsUrls:t.additional_docs_urls||t.AdditionalDocsUrls||null,address:{street:t.street_address||t.StreetAddress||"",city:t.city||t.City||"",state:t.state||t.State||"",district:t.district||t.District||"",pincode:t.pincode||t.Pincode||"",country:"India"},contact:{phone:t.phone||t.Phone||"",email:t.email||t.Email||"",website:t.website||t.Website||""}}:null},async searchTemples(t){var o;try{console.log(` Searching temples with query: ${t}`);const s=window.location.pathname;let n;s.includes("/tenant/")||s.includes("/entity/")||s.includes("/admin/")||s.includes("/standarduser/")||s.includes("/superadmin/")?(console.log(" Using admin search endpoint: /entities"),n=await ce.get(`/entities?search=${encodeURIComponent(t)}`)):(console.log(" Using devotee search endpoint: /temples/search"),n=await ce.get(`/temples/search?query=${encodeURIComponent(t)}`));let r=n.data||n;return Array.isArray(r)||(r.data&&Array.isArray(r.data)?r=r.data:r.temples&&Array.isArray(r.temples)?r=r.temples:r.entities&&Array.isArray(r.entities)?r=r.entities:r.items&&Array.isArray(r.items)&&(r=r.items)),Array.isArray(r)?r.map(i=>this.normalizeTempleData(i)):(console.error(" Could not extract array from response:",n),[])}catch(s){return console.error(" Error searching temples:",s),console.error("Error response:",(o=s.response)==null?void 0:o.data),[]}}},Uo=Vo("temple",()=>{const t=V([]),o=V(null),s=V(!1),n=V(null),r=je(),i=V({name:"",mainDeity:"",description:"",templeType:"",establishedYear:"",contact:{phone:"",email:"",website:""},address:{street:"",city:"",state:"",pincode:"",country:"India"},district:"",landmark:"",mapLink:"",documents:{registration:null,trustDeed:null,property:null,additional:[]},status:"pending",rejection_reason:"",admin_notes:""}),a=te(()=>t.value.filter(N=>N.status==="approved"||N.status==="active")),l=te(()=>t.value.filter(N=>N.status==="pending")),d=te(()=>t.value.filter(N=>N.status==="rejected")),c=te(()=>({total:t.value.length,approved:a.value.length,pending:l.value.length,rejected:d.value.length})),u=()=>{t.value=[],o.value=null},p=async N=>{try{s.value=!0,n.value=null,console.log(` Fetching temples for tenant ID ${N||"unknown"}...`);const L={};N&&(L.headers={"X-Tenant-ID":N});const M=Date.now(),X=await it.getTemples(L,M);return console.log(" Temple service response:",X),t.value=X||[],console.log(" Temples set in store:",t.value),X}catch(L){const M=L.message||"Failed to fetch temples";throw n.value=M,r.error(M),console.error("Error fetching temples:",L),L}finally{s.value=!1}},v=async N=>{console.log(` Fetching temples for SuperAdmin for tenant ID ${N}...`),t.value=[],s.value=!0,n.value=null;try{if(!N)return console.warn("No tenant ID provided for fetchTemplesForSuperAdmin"),[];console.log(` Starting fresh fetch for tenant ID ${N}`),localStorage.setItem("current_tenant_id",N);const L={tenantId:N,superAdmin:!0,headers:{"X-Tenant-ID":N},timestamp:Date.now()},M=await it.getTemples(L);if(M&&Array.isArray(M)){const X=M.filter(ee=>ee.created_by&&ee.created_by.toString()===N.toString()||ee.tenant_id&&ee.tenant_id.toString()===N.toString()||ee.creator_id&&ee.creator_id.toString()===N.toString());t.value=X,console.log(` Temple service response for SuperAdmin: ${X.length} temples for tenant ${N}`)}else t.value=[],console.warn(`No temples returned for tenant ID ${N}`);return t.value}catch(L){return console.error(" Error fetching temples for SuperAdmin:",L),n.value=`Failed to fetch temples: ${L.message||"Unknown error"}`,[]}finally{s.value=!1}},g=async N=>{console.log(` STRICT STORE: Fetching temples for tenant ID ${N}`),t.value=[],s.value=!0,n.value=null;try{if(!N)return console.warn(" STRICT STORE: No tenant ID provided"),[];const L=await it.getSuperAdminTemplesStrict(N);return t.value=L,console.log(` STRICT STORE: Set ${t.value.length} temples in store`),t.value}catch(L){return console.error(" STRICT STORE: Error:",L),n.value=`Failed to fetch temples: ${L.message||"Unknown error"}`,[]}finally{s.value=!1}},h=async N=>{console.log(` STORE DIRECT: Fetching temples for tenant ${N}`),t.value=[],s.value=!0,n.value=null;try{const L=await it.getTemplesDirectByTenant(N);return t.value=L,console.log(` STORE DIRECT: Set ${L.length} temples in store`),L}catch(L){return console.error(" STORE DIRECT: Error:",L),n.value=L.message||"Unknown error",[]}finally{s.value=!1}},D=async N=>{var L,M,X,ee,oe,ae;try{s.value=!0,n.value=null,console.log(" STORE: Creating temple with data:",N);const H={name:N.name||"",mainDeity:N.mainDeity||N.presiding_deity||"",templeType:N.templeType||N.category||"",establishedYear:N.establishedYear||"",description:N.description||"",contact:{phone:((L=N.contact)==null?void 0:L.phone)||N.phone||"",email:((M=N.contact)==null?void 0:M.email)||N.email||""},address:{street:((X=N.address)==null?void 0:X.street)||N.addressLine1||N.streetAddress||"",city:((ee=N.address)==null?void 0:ee.city)||N.city||"",state:((oe=N.address)==null?void 0:oe.state)||N.state||"",pincode:((ae=N.address)==null?void 0:ae.pincode)||N.pincode||""},district:N.district||"",landmark:N.landmark||"",mapLink:N.mapLink||"",documents:N.documents||{}};console.log(" STORE: Transformed data for service:",H);const J=await it.createTemple(H);console.log(" STORE: Service response:",J);const z={id:J.id||J.ID||Date.now(),name:H.name,description:H.description,status:"pending",templeType:H.templeType,mainDeity:H.mainDeity,establishedYear:H.establishedYear,phone:H.contact.phone,email:H.contact.email,addressLine1:H.address.street,city:H.address.city,state:H.address.state,pincode:H.address.pincode,district:H.district,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),address:H.address,contact:H.contact};t.value.push(z),r.success("Temple created successfully. It will be reviewed by the admin."),b();try{localStorage.removeItem("dashboard_local_data"),localStorage.removeItem("dashboard_counts"),localStorage.removeItem("dashboard_seva_names")}catch(I){console.warn("Could not clear localStorage cache:",I)}return J}catch(H){const J=H.message||"Failed to create temple";throw n.value=J,r.error(J),console.error("Error creating temple:",H),H}finally{s.value=!1}},C=async(N,L)=>{var M,X,ee,oe,ae,H;try{s.value=!0,n.value=null,console.log(" STORE: Updating temple with data:",L);const J={name:L.name||"",mainDeity:L.mainDeity||L.presiding_deity||"",templeType:L.templeType||L.category||"",establishedYear:L.establishedYear||"",description:L.description||"",contact:{phone:((M=L.contact)==null?void 0:M.phone)||L.phone||"",email:((X=L.contact)==null?void 0:X.email)||L.email||""},address:{street:((ee=L.address)==null?void 0:ee.street)||L.addressLine1||L.streetAddress||"",city:((oe=L.address)==null?void 0:oe.city)||L.city||"",state:((ae=L.address)==null?void 0:ae.state)||L.state||"",pincode:((H=L.address)==null?void 0:H.pincode)||L.pincode||""},district:L.district||"",landmark:L.landmark||"",mapLink:L.mapLink||"",documents:L.documents||{}},z=await it.updateTemple(N,J),I=t.value.findIndex(P=>P.id===Number(N));return I!==-1&&(t.value[I]={...t.value[I],...z,templeType:z.temple_type||z.templeType,mainDeity:z.main_deity||z.mainDeity,addressLine1:z.street_address||z.addressLine1,updatedAt:new Date().toISOString()}),r.success("Temple updated successfully"),z}catch(J){const z=J.message||`Failed to update temple with ID: ${N}`;throw n.value=z,r.error(z),console.error("Error updating temple:",J),J}finally{s.value=!1}},B=async N=>{try{s.value=!0,n.value=null,await it.deleteTemple(N),t.value=t.value.filter(L=>L.id!==Number(N)),r.success("Temple deleted successfully")}catch(L){const M=L.message||`Failed to delete temple with ID: ${N}`;throw n.value=M,r.error(M),console.error("Error deleting temple:",L),L}finally{s.value=!1}},_=N=>{o.value=N},T=()=>o.value,S=N=>t.value.find(L=>L.slug===N),k=N=>{const L=S(N);return L?(o.value=L,L):null},b=()=>{i.value={name:"",mainDeity:"",description:"",templeType:"",establishedYear:"",contact:{phone:"",email:"",website:""},address:{street:"",city:"",state:"",pincode:"",country:"India"},district:"",landmark:"",mapLink:"",documents:{registration:null,trustDeed:null,property:null,additional:[]},status:"pending",rejection_reason:"",admin_notes:""}},x=(N,L)=>{if(N.includes(".")){const[M,X]=N.split(".");i.value[M][X]=L}else i.value[N]=L},F=N=>{if(!N.trim())return t.value;const L=N.toLowerCase();return t.value.filter(M=>{var X,ee,oe,ae,H;return M.name.toLowerCase().includes(L)||((ee=(X=M.address)==null?void 0:X.city)==null?void 0:ee.toLowerCase().includes(L))||((ae=(oe=M.address)==null?void 0:oe.state)==null?void 0:ae.toLowerCase().includes(L))||((H=M.mainDeity)==null?void 0:H.toLowerCase().includes(L))})},E=te(()=>N=>t.value.find(L=>L.id===parseInt(N)));return{temples:t,currentTemple:o,loading:s,error:n,templeForm:i,approvedTemples:a,pendingTemples:l,rejectedTemples:d,templeCounts:c,getTempleById:E,fetchTemples:p,fetchDirectByTenant:h,createTemple:D,updateTemple:C,deleteTemple:B,setCurrentTemple:_,getCurrentTemple:T,getTempleBySlug:S,setCurrentTempleBySlug:k,resetForm:b,updateFormField:x,searchTemples:F,clearError:()=>{n.value=null},fetchTemplesForSuperAdmin:v,fetchSuperAdminTemplesStrict:g,clearTempleData:u}}),$2={key:0,class:"w-2 h-2 bg-current rounded-full animate-pulse opacity-60"},sp={__name:"TempleApprovalStatus",props:{status:{type:String,required:!0,validator:t=>{const o=String(t||"").toUpperCase();return["PENDING","APPROVED","REJECTED"].includes(o)}},size:{type:String,default:"md",validator:t=>["sm","md","lg"].includes(t)}},setup(t){const o=t,s=te(()=>String(o.status||"").toUpperCase()),n=te(()=>{const r={PENDING:{text:"Pending Approval",classes:"bg-amber-100 text-amber-800 border border-amber-200",icon:()=>zt("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[zt("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})])},APPROVED:{text:"Approved",classes:"bg-green-100 text-green-800 border border-green-200",icon:()=>zt("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[zt("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})])},REJECTED:{text:"Rejected",classes:"bg-red-100 text-red-800 border border-red-200",icon:()=>zt("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[zt("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z"})])}};return r[s.value]||r.PENDING});return(r,i)=>(m(),f("div",{class:ie(["inline-flex items-center gap-2 px-3 py-1.5 rounded-full text-sm font-medium transition-all duration-200",n.value.classes])},[(m(),Re(xt(n.value.icon),{class:"w-4 h-4"})),e("span",null,y(n.value.text),1),s.value==="PENDING"?(m(),f("div",$2)):Y("",!0)],2))}},S2={class:"min-h-screen bg-gray-50"},D2={class:"bg-white shadow-sm border-b border-gray-200 rounded-2xl"},C2={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6"},T2={class:"flex items-center justify-between"},E2={class:"text-gray-600 mt-1"},A2={key:0,class:"text-indigo-600 font-medium"},I2={class:"flex items-center space-x-4"},M2={class:"bg-indigo-50 px-4 py-2 rounded-lg border border-indigo-200"},R2={class:"text-indigo-800 font-medium"},P2={class:"text-indigo-600 text-sm ml-2"},j2={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},N2={class:"bg-gradient-to-r from-indigo-600 to-indigo-800 rounded-2xl shadow-lg p-8 mb-8 text-white"},L2={class:"flex flex-col md:flex-row md:items-center md:justify-between"},B2={class:"flex-1"},V2={class:"text-indigo-100 text-lg mb-4"},U2={key:0,class:"mt-6 md:mt-0"},F2={class:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8"},O2={class:"bg-white rounded-2xl shadow-sm border border-gray-200 p-6 hover:shadow-md transition-shadow duration-200"},z2={class:"flex items-center"},H2={class:"ml-4"},q2={class:"text-2xl font-bold text-gray-900"},G2={class:"bg-white rounded-2xl shadow-sm border border-gray-200 p-6 hover:shadow-md transition-shadow duration-200"},W2={class:"flex items-center"},J2={class:"ml-4"},Y2={class:"text-2xl font-bold text-gray-900"},K2={class:"bg-white rounded-2xl shadow-sm border border-gray-200 p-6 hover:shadow-md transition-shadow duration-200"},X2={class:"flex items-center"},Z2={class:"ml-4"},Q2={class:"text-2xl font-bold text-gray-900"},eh={class:"bg-white rounded-2xl shadow-sm border border-gray-200 overflow-hidden"},th={class:"p-6 border-b border-gray-200"},oh={class:"flex flex-col sm:flex-row sm:items-center sm:justify-between"},sh={class:"text-xl font-bold text-gray-900"},nh={class:"text-gray-600 mt-1"},rh={key:0,class:"mt-4 sm:mt-0"},ah={key:0,class:"p-12 text-center"},ih={key:1,class:"divide-y divide-gray-200"},lh={class:"flex flex-col lg:flex-row lg:items-center lg:justify-between"},dh={class:"flex-1"},uh={class:"flex items-center mb-2"},ch={class:"text-lg font-semibold text-gray-900 mr-3"},ph={class:"text-gray-600 mb-2"},mh={class:"flex flex-wrap items-center text-sm text-gray-500 gap-4"},gh={class:"flex items-center"},fh={class:"flex items-center"},vh={class:"mt-4 lg:mt-0 flex items-center space-x-3"},hh=["onClick"],yh=["onClick"],xh=["onClick","disabled","title"],bh={key:0,class:"mt-4 p-4 bg-red-50 border border-red-200 rounded-lg"},wh={class:"flex items-start"},kh={class:"text-sm text-red-700"},_h=["onClick"],$h={key:2,class:"p-12 text-center"},Sh={class:"text-gray-600 mb-6"},Er={__name:"TenantDashboard",setup(t){const o=Ke(),s=Ze(),n=Uo(),r=tt(),{showToast:i}=je(),a=V(!0),l=N=>(N.status||"").toString().toLowerCase()==="approved",d=N=>(N.status||"").toString().toLowerCase()==="rejected",c=N=>(N.status||"").toString().toLowerCase()==="pending";te(()=>{var L;return(((L=r.user)==null?void 0:L.status)||"").toString().toLowerCase()==="approved"});const u=te(()=>{var L;return(((L=r.user)==null?void 0:L.status)||"").toString().toLowerCase()==="rejected"}),p=te(()=>{var L;const N=(((L=r.user)==null?void 0:L.status)||"").toString().toLowerCase();return N==="pending"||!N}),v=te(()=>{const N=(r.userRole||"").toLowerCase();return N==="tenant"||N==="templeadmin"}),g=te(()=>{const N=(r.userRole||"").toLowerCase();return N==="monitoring_user"||N==="monitoringuser"}),h=te(()=>{const N=(r.userRole||"").toLowerCase();return N==="standard_user"||N==="standarduser"}),D=te(()=>v.value?"Tenant":g.value?"Monitoring User":h.value?"Standard User":r.userRole||"User"),C=te(()=>{var L;if(s.params.tenantId)return console.log("Using tenantId from route params:",s.params.tenantId),s.params.tenantId;if((g.value||h.value)&&r.assignedTenantId)return console.log("Using assigned tenant ID:",r.assignedTenantId),r.assignedTenantId;const N=((L=r.user)==null?void 0:L.id)||localStorage.getItem("current_tenant_id");return console.log("Using tenantId from auth store:",N),N}),B=()=>{localStorage.removeItem("temple_data"),localStorage.removeItem("temple_cache"),typeof n.clearTempleData=="function"&&n.clearTempleData()},_=te(()=>n.temples.filter(N=>l(N)).length),T=te(()=>n.temples.filter(N=>c(N)).length),S=N=>N?new Date(N).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):"N/A",k=N=>{o.push(`/tenant/entities/${N.id}`)},b=N=>{o.push(`/tenant/entities/${N.id}/edit`)},x=N=>{o.push(`/entity/${N.id}/dashboard`)},F=N=>{o.push(`/tenant/entities/${N.id}/documents`)};Ue(C,async(N,L)=>{N&&N!==L&&(console.log(`TenantId changed from ${L} to ${N}, reloading data...`),await E())});const E=async()=>{if(a.value=!0,!C.value){console.warn("No tenant ID available, cannot load temples"),a.value=!1;return}try{B();const N=localStorage.getItem("selected_tenant_id");console.log("Loading temples for tenant ID:",C.value,"Selected tenant ID:",N),N?(console.log("Using fetchDirectByTenant for SuperAdmin tenant view"),await n.fetchDirectByTenant(N)):(console.log("Using standard fetchTemples"),await n.fetchTemples(C.value))}catch(N){console.error("Error loading temple data:",N),i("Failed to load temple data. Please try again.","error")}finally{a.value=!1}},O=N=>{if(!N)return"";try{const L=typeof N=="string"?JSON.parse(N):N;return L?[L.street,L.city,L.state,L.pincode,L.country].filter(Boolean).join(", "):""}catch{return N||""}};return Ee(async()=>{console.log("TenantDashboard mounted with tenantId:",C.value),await E(),v.value&&(p.value?i("Your account is pending approval from the administrator.","info"):u.value&&i("Your account has been rejected. Please contact support.","error"))}),(N,L)=>{var X,ee;const M=He("router-link");return m(),f("div",S2,[e("div",D2,[e("div",C2,[e("div",T2,[e("div",null,[L[1]||(L[1]=e("h1",{class:"text-2xl font-bold text-gray-900"},"Tenant Dashboard",-1)),e("p",E2,[L[0]||(L[0]=Q(" Manage your temple registrations and applications ",-1)),C.value?(m(),f("span",A2," (Tenant ID: "+y(C.value)+")",1)):Y("",!0)])]),e("div",I2,[e("div",M2,[e("span",R2,y(((X=_e(r).user)==null?void 0:X.name)||((ee=_e(r).user)==null?void 0:ee.fullName)),1),e("span",P2,"("+y(D.value)+")",1)])])])])]),e("div",j2,[e("div",N2,[e("div",L2,[e("div",B2,[L[2]||(L[2]=e("h2",{class:"text-3xl font-bold mb-2"},"Welcome back!",-1)),e("p",V2,y(v.value?"Manage your temple applications and track their approval status":"View and access temples for this tenant"),1)]),v.value?(m(),f("div",U2,[re(M,{to:"/tenant/entities/create",class:"inline-flex items-center bg-white text-indigo-600 px-6 py-3 rounded-xl font-semibold hover:bg-indigo-50 transition-all duration-200 shadow-lg hover:shadow-xl transform hover:-translate-y-1"},{default:fe(()=>[...L[3]||(L[3]=[e("svg",{class:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})],-1),Q(" Create New Temple ",-1)])]),_:1})])):Y("",!0)])]),e("div",F2,[e("div",O2,[e("div",z2,[L[5]||(L[5]=e("div",{class:"p-3 bg-indigo-100 rounded-xl"},[e("svg",{class:"w-8 h-8 text-indigo-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-4m-5 0H3m2 0h4M9 7h6m-6 4h6m-6 4h6"})])],-1)),e("div",H2,[L[4]||(L[4]=e("p",{class:"text-sm text-gray-600"},"Total Temples",-1)),e("p",q2,y(_e(n).temples.length),1)])])]),e("div",G2,[e("div",W2,[L[7]||(L[7]=e("div",{class:"p-3 bg-green-100 rounded-xl"},[e("svg",{class:"w-8 h-8 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1)),e("div",J2,[L[6]||(L[6]=e("p",{class:"text-sm text-gray-600"},"Approved",-1)),e("p",Y2,y(_.value),1)])])]),e("div",K2,[e("div",X2,[L[9]||(L[9]=e("div",{class:"p-3 bg-amber-100 rounded-xl"},[e("svg",{class:"w-8 h-8 text-amber-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1)),e("div",Z2,[L[8]||(L[8]=e("p",{class:"text-sm text-gray-600"},"Pending",-1)),e("p",Q2,y(T.value),1)])])])]),e("div",eh,[e("div",th,[e("div",oh,[e("div",null,[e("h3",sh,y(v.value?"Your Temples":"Available Temples"),1),e("p",nh,y(v.value?"Manage and track your temple applications":"Select a temple to access its dashboard"),1)]),v.value?(m(),f("div",rh,[re(M,{to:"/tenant/entities/create",class:"inline-flex items-center bg-indigo-600 text-white px-4 py-2 rounded-lg hover:bg-indigo-700 transition-colors duration-200 font-medium"},{default:fe(()=>[...L[10]||(L[10]=[e("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})],-1),Q(" Add Temple ",-1)])]),_:1})])):Y("",!0)])]),a.value?(m(),f("div",ah,[...L[11]||(L[11]=[e("div",{class:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-indigo-500 mx-auto"},null,-1),e("p",{class:"mt-4 text-gray-600"},"Loading temples...",-1)])])):_e(n).temples.length>0?(m(),f("div",ih,[(m(!0),f(he,null,ke(_e(n).temples,oe=>(m(),f("div",{key:oe.id,class:"p-6 hover:bg-gray-50 transition-colors duration-150"},[e("div",lh,[e("div",dh,[e("div",uh,[e("h4",ch,y(oe.name),1),re(sp,{status:oe.status},null,8,["status"])]),e("p",ph,y(O(oe.address)),1),e("div",mh,[e("span",gh,[L[12]||(L[12]=e("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})],-1)),Q(" Created: "+y(S(oe.createdAt)),1)]),e("span",fh,[L[13]||(L[13]=e("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})],-1)),Q(" "+y(oe.city)+", "+y(oe.state),1)])])]),e("div",vh,[e("button",{onClick:ae=>k(oe),class:"inline-flex items-center px-4 py-2 border border-gray-300 rounded-lg text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 transition-colors duration-200"},[...L[14]||(L[14]=[e("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})],-1),Q(" View ",-1)])],8,hh),v.value?(m(),f("button",{key:0,onClick:ae=>b(oe),class:"inline-flex items-center px-4 py-2 border border-indigo-300 rounded-lg text-sm font-medium text-indigo-700 bg-indigo-50 hover:bg-indigo-100 transition-colors duration-200"},[...L[15]||(L[15]=[e("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})],-1),Q(" Edit ",-1)])],8,yh)):Y("",!0),e("button",{onClick:ae=>x(oe),disabled:v.value&&!l(oe),class:ie(["inline-flex items-center px-4 py-2 text-sm font-medium rounded-lg transition-colors duration-200",v.value&&!l(oe)?"bg-gray-400 text-gray-100 cursor-not-allowed":"bg-indigo-600 text-white hover:bg-indigo-700"]),title:v.value&&!l(oe)?"Temple needs approval before it can be managed":""},[L[16]||(L[16]=e("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6V4m0 2a2 2 0 100 4m0-4a2 2 0 110 4m-6 8a2 2 0 100-4m0 4a2 2 0 100 4m0-4v2m0-6V4m6 6v10m6-2a2 2 0 100-4m0 4a2 2 0 100 4m0-4v2m0-6V4"})],-1)),Q(" "+y(v.value?"Manage":"Access Dashboard"),1)],10,xh)])]),v.value&&d(oe)&&oe.adminNotes?(m(),f("div",bh,[e("div",wh,[L[18]||(L[18]=e("svg",{class:"w-5 h-5 text-red-400 mt-0.5 mr-2 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),e("div",null,[L[17]||(L[17]=e("h5",{class:"text-sm font-medium text-red-800 mb-1"},"Admin Notes:",-1)),e("p",kh,y(oe.adminNotes),1),e("button",{onClick:ae=>F(oe),class:"mt-2 text-sm text-red-600 hover:text-red-800 font-medium underline"}," Re-upload Documents ",8,_h)])])])):Y("",!0)]))),128))])):(m(),f("div",$h,[L[20]||(L[20]=e("svg",{class:"w-16 h-16 text-gray-400 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1",d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-4m-5 0H3m2 0h4M9 7h6m-6 4h6m-6 4h6"})],-1)),L[21]||(L[21]=e("h3",{class:"text-lg font-medium text-gray-900 mb-2"},"No temples registered yet",-1)),e("p",Sh,y(v.value?"Get started by creating your first temple registration":"No temples are available for this tenant"),1),v.value?(m(),Re(M,{key:0,to:"/tenant/entities/create",class:"inline-flex items-center bg-indigo-600 text-white px-6 py-3 rounded-lg hover:bg-indigo-700 transition-colors duration-200 font-medium"},{default:fe(()=>[...L[19]||(L[19]=[e("svg",{class:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})],-1),Q(" Create Your First Temple ",-1)])]),_:1})):Y("",!0)]))])])])}}},Ot={email:/^[^\s@]+@[^\s@]+\.[^\s@]+$/,phone:/^[\+]?[1-9][\d]{0,15}$/,indianMobile:/^[6-9]\d{9}$/,password:/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[@$!%*?&])[A-Za-z\d@$!%*?&]{8,}$/,alphabetic:/^[a-zA-Z\s]+$/,url:/^https?:\/\/(www\.)?[-a-zA-Z0-9@:%._\+~#=]{1,256}\.[a-zA-Z0-9()]{1,6}\b([-a-zA-Z0-9()@:%_\+.~#?&//=]*)$/,pincode:/^[1-9][0-9]{5}$/,aadhar:/^\d{12}$/,pan:/^[A-Z]{5}[0-9]{4}[A-Z]{1}$/,amount:/^\d+(\.\d{1,2})?$/,templeName:/^[a-zA-Z0-9\s\-\.,()]+$/,address:/^[a-zA-Z0-9\s\-\.,#\/()]+$/},oa={required:(t,o="Field")=>!t||typeof t=="string"&&t.trim()===""?`${o} is required`:!0,minLength:t=>(o,s="Field")=>o&&o.length<t?`${s} must be at least ${t} characters long`:!0,maxLength:t=>(o,s="Field")=>o&&o.length>t?`${s} must not exceed ${t} characters`:!0,lengthRange:(t,o)=>(s,n="Field")=>s&&(s.length<t||s.length>o)?`${n} must be between ${t} and ${o} characters`:!0,email:(t,o="Email")=>t?Ot.email.test(t)?!0:`Please enter a valid ${o.toLowerCase()}`:!0,password:(t,o="Password")=>t?Ot.password.test(t)?!0:`${o} must contain at least 8 characters with uppercase, lowercase, number and special character`:!0,confirmPassword:t=>(o,s="Confirm Password")=>o&&o!==t?`${s} does not match`:!0,phone:(t,o="Phone number")=>t?Ot.phone.test(t)?!0:`Please enter a valid ${o.toLowerCase()}`:!0,indianMobile:(t,o="Mobile number")=>t?Ot.indianMobile.test(t)?!0:`Please enter a valid 10-digit Indian ${o.toLowerCase()}`:!0,name:(t,o="Name")=>t?Ot.alphabetic.test(t)?t.trim().length<2?`${o} must be at least 2 characters long`:!0:`${o} should contain only letters and spaces`:!0,age:(t,o="Age")=>{if(!t)return!0;const s=parseInt(t);return isNaN(s)||s<1||s>120?`Please enter a valid ${o.toLowerCase()} between 1 and 120`:!0},birthDate:(t,o="Birth date")=>{if(!t)return!0;const s=new Date(t);return s>new Date?`${o} cannot be in the future`:s<new Date("1900-01-01")?`Please enter a valid ${o.toLowerCase()}`:!0},address:(t,o="Address")=>t?Ot.address.test(t)?t.trim().length<10?`${o} should be more descriptive (minimum 10 characters)`:!0:`${o} contains invalid characters`:!0,pincode:(t,o="PIN code")=>t?Ot.pincode.test(t)?!0:`Please enter a valid 6-digit ${o.toLowerCase()}`:!0,templeName:(t,o="Temple name")=>t?Ot.templeName.test(t)?t.trim().length<3?`${o} must be at least 3 characters long`:!0:`${o} contains invalid characters`:!0,sevaName:(t,o="Seva name")=>t?t.trim().length<2?`${o} must be at least 2 characters long`:t.length>100?`${o} must not exceed 100 characters`:!0:!0,donationAmount:(t,o="Donation amount")=>{if(!t)return!0;if(!Ot.amount.test(t))return`Please enter a valid ${o.toLowerCase()}`;const s=parseFloat(t);return s<=0?`${o} must be greater than 0`:s>1e6?`${o} cannot exceed 10,00,000`:!0},aadhar:(t,o="Aadhar number")=>t?Ot.aadhar.test(t)?!0:`Please enter a valid 12-digit ${o.toLowerCase()}`:!0,pan:(t,o="PAN number")=>t?Ot.pan.test(t.toUpperCase())?!0:`Please enter a valid ${o.toLowerCase()} (e.g., ABCDE1234F)`:!0,file:(t=[],o=5)=>(s,n="File")=>{if(!s)return!0;if(t.length>0){const i=s.type.toLowerCase();if(!t.some(l=>i.includes(l.toLowerCase())))return`${n} must be of type: ${t.join(", ")}`}return s.size/(1024*1024)>o?`${n} size must not exceed ${o}MB`:!0},image:(t=2)=>oa.file(["jpg","jpeg","png","webp"],t),document:(t=10)=>oa.file(["pdf","doc","docx","jpg","jpeg","png"],t),url:(t,o="URL")=>t?Ot.url.test(t)?!0:`Please enter a valid ${o.toLowerCase()}`:!0,select:(t=[])=>(o,s="Selection")=>o?t.includes(o)?!0:`Please select a valid ${s.toLowerCase()}`:!0,multiSelect:(t=[],o=0,s=null)=>(n,r="Selections")=>{if(!n||!Array.isArray(n))return o>0?`Please make at least ${o} ${r.toLowerCase()}`:!0;if(n.length<o)return`Please select at least ${o} ${r.toLowerCase()}`;if(s&&n.length>s)return`Please select no more than ${s} ${r.toLowerCase()}`;const i=n.filter(a=>!t.includes(a));return i.length>0?`Invalid ${r.toLowerCase()}: ${i.join(", ")}`:!0},date:(t=null,o=null)=>(s,n="Date")=>{if(!s)return!0;const r=new Date(s);return isNaN(r.getTime())?`Please enter a valid ${n.toLowerCase()}`:t&&r<new Date(t)?`${n} cannot be earlier than ${new Date(t).toLocaleDateString()}`:o&&r>new Date(o)?`${n} cannot be later than ${new Date(o).toLocaleDateString()}`:!0},futureDate:(t,o="Date")=>{if(!t)return!0;const s=new Date(t),n=new Date;return n.setHours(0,0,0,0),s<n?`${o} must be today or in the future`:!0},time:(t,o="Time")=>t?/^([01]?[0-9]|2[0-3]):[0-5][0-9]$/.test(t)?!0:`Please enter a valid ${o.toLowerCase()} (HH:MM format)`:!0},Dh={class:"min-h-screen bg-gray-50"},Ch={class:"bg-white shadow-sm border-b border-gray-200 rounded-2xl"},Th={class:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-6"},Eh={class:"flex items-center justify-between"},Ah={class:"flex items-center space-x-2 text-sm text-gray-500 mb-2"},Ih={class:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},Mh={class:"mb-8"},Rh={class:"flex items-center justify-between mb-2"},Ph={class:"text-sm font-medium text-indigo-600"},jh={class:"text-sm text-gray-500"},Nh={class:"w-full bg-gray-200 rounded-full h-2"},Lh={class:"bg-white rounded-2xl shadow-sm border border-gray-200 overflow-hidden"},Bh={class:"p-8"},Vh={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},Uh={class:"md:col-span-2"},Fh=["max"],Oh={class:"md:col-span-2"},zh={class:"md:col-span-2"},Hh={class:"p-8"},qh={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},Gh={class:"md:col-span-2"},Wh={class:"md:col-span-2"},Jh={class:"md:col-span-2"},Yh={class:"p-8"},Kh={class:"space-y-6"},Xh={class:"border-2 border-dashed border-gray-300 rounded-lg p-6 hover:border-indigo-400 transition-colors duration-200"},Zh={class:"text-center"},Qh={class:"flex justify-center"},ey={class:"cursor-pointer bg-indigo-600 text-white px-6 py-2 rounded-lg hover:bg-indigo-700 transition-colors duration-200"},ty={key:0,class:"text-sm text-green-600 mt-2"},oy={class:"border-2 border-dashed border-gray-300 rounded-lg p-6 hover:border-indigo-400 transition-colors duration-200"},sy={class:"text-center"},ny={class:"flex justify-center"},ry={class:"cursor-pointer bg-indigo-600 text-white px-6 py-2 rounded-lg hover:bg-indigo-700 transition-colors duration-200"},ay={key:0,class:"text-sm text-green-600 mt-2"},iy={class:"border-2 border-dashed border-gray-300 rounded-lg p-6 hover:border-indigo-400 transition-colors duration-200"},ly={class:"text-center"},dy={class:"flex justify-center"},uy={class:"cursor-pointer bg-gray-600 text-white px-6 py-2 rounded-lg hover:bg-gray-700 transition-colors duration-200"},cy={key:0,class:"text-sm text-green-600 mt-2"},py={class:"border-2 border-dashed border-gray-300 rounded-lg p-6 hover:border-indigo-400 transition-colors duration-200"},my={class:"text-center"},gy={class:"flex justify-center"},fy={class:"cursor-pointer bg-gray-600 text-white px-6 py-2 rounded-lg hover:bg-gray-700 transition-colors duration-200"},vy={key:0,class:"mt-2"},hy={class:"mt-8 p-4 bg-gray-50 rounded-lg"},yy={class:"flex items-start"},xy={class:"text-sm text-gray-700"},by={class:"px-8 py-6 bg-gray-50 border-t border-gray-200 flex justify-between"},wy={key:1},ky={class:"flex space-x-3"},_y=["disabled"],$y={key:0,class:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",fill:"none",viewBox:"0 0 24 24"},Sy={__name:"CreateTemple",setup(t){const o=Ke();Uo();const s=je(),n=V(1),r=V(!1),i=V(null),a=Je({name:"",main_deity:"",temple_type:"",established_year:"",phone:"",email:"",description:"",street_address:"",city:"",state:"",district:"",pincode:"",landmark:"",map_link:"",documents:{registration:null,trustDeed:null,property:null,additional:[]},acceptTerms:!1}),l=()=>{c()&&n.value++},d=()=>{n.value--},c=()=>{if(n.value===1){const g=["name","main_deity","temple_type","phone","email","established_year"].filter(h=>!a[h]);if(g.length>0)return s.error(`Please fill in all required fields: ${g.join(", ")}`),!1;if(a.established_year&&isNaN(parseInt(a.established_year)))return s.error("Established Year must be a valid number"),!1;if(a.phone&&!/^[0-9]{10}$/.test(a.phone.replace(/[^0-9]/g,"")))return s.error("Please enter a valid 10-digit phone number"),!1;if(a.email&&!oa.email(a.email))return s.error("Please enter a valid email address"),!1}else if(n.value===2){const g=["street_address","city","state","district","pincode"].filter(h=>!a[h]);if(g.length>0)return s.error(`Please fill in all required address fields: ${g.join(", ")}`),!1;if(!a.street_address||a.street_address.trim()==="")return s.error("Street address is required"),!1;if(a.pincode&&!/^\d{6}$/.test(a.pincode))return s.error("PIN Code must be a 6-digit number"),!1}return!0},u=(v,g)=>{var T,S,k;const h=Array.from(v.target.files);if(console.log(` handleFileUpload called with type: ${g}`),console.log(` Number of files selected: ${h.length}`),h.length===0){console.log(" No files selected");return}const D=10*1024*1024,C=h.filter(b=>b.size>D);if(C.length>0){i.value=`Some files exceed the 10MB size limit: ${C.map(b=>b.name).join(", ")}`,console.error(" Files too large:",C.map(b=>b.name));return}const B=["application/pdf","image/jpeg","image/jpg","image/png"],_=h.filter(b=>!B.includes(b.type));if(_.length>0){i.value=`Invalid file types. Only PDF, JPG, JPEG, and PNG files are allowed: ${_.map(b=>b.name).join(", ")}`,console.error(" Invalid file types:",_.map(b=>b.name));return}g==="additional"?(a.documents.additional||(a.documents.additional=[]),a.documents.additional=[...a.documents.additional,...h],console.log(` Added ${h.length} additional files. Total: ${a.documents.additional.length}`)):(a.documents[g]=h[0],console.log(` Set ${g} file:`,h[0].name)),console.log(" Current documents state:",{registration:((T=a.documents.registration)==null?void 0:T.name)||"Not set",trustDeed:((S=a.documents.trustDeed)==null?void 0:S.name)||"Not set",property:((k=a.documents.property)==null?void 0:k.name)||"Not set",additional:a.documents.additional?`${a.documents.additional.length} files`:"Not set"}),i.value=null},p=async()=>{var v,g,h;if(c())try{r.value=!0,console.log(" FORM DATA AT SUBMISSION:"),console.log("Documents object:",a.documents);const D=a.documents&&(a.documents.registration||a.documents.trustDeed||a.documents.property||a.documents.additional&&a.documents.additional.length>0);if(console.log(" Has files:",D),D){const C=new FormData;C.append("name",a.name||""),C.append("main_deity",a.main_deity||""),C.append("temple_type",a.temple_type||""),C.append("established_year",a.established_year?a.established_year.toString():""),C.append("phone",a.phone||""),C.append("email",a.email||""),C.append("description",a.description||""),C.append("street_address",a.street_address||""),C.append("city",a.city||""),C.append("district",a.district||""),C.append("state",a.state||""),C.append("pincode",a.pincode||""),C.append("landmark",a.landmark||""),C.append("map_link",a.map_link||""),C.append("status","pending"),a.documents.registration&&(C.append("registration_cert",a.documents.registration),console.log(" Added registration_cert:",a.documents.registration.name)),a.documents.trustDeed&&(C.append("trust_deed",a.documents.trustDeed),console.log(" Added trust_deed:",a.documents.trustDeed.name)),a.documents.property&&(C.append("property_docs",a.documents.property),console.log(" Added property_docs:",a.documents.property.name)),a.documents.additional&&a.documents.additional.length>0&&a.documents.additional.forEach((_,T)=>{C.append(`additional_docs_${T}`,_),console.log(` Added additional_docs_${T}:`,_.name)}),console.log(" FormData contents:");for(let[_,T]of C.entries())T instanceof File?console.log(`${_}: File - ${T.name} (${T.size} bytes)`):console.log(`${_}: ${T}`);const B=await ce.post("/entities",C,{headers:{"Content-Type":"multipart/form-data"}});console.log(" Temple created successfully:",B.data)}else{const C={name:a.name||"",main_deity:a.main_deity||"",temple_type:a.temple_type||"",established_year:parseInt(a.established_year||0),phone:a.phone?a.phone.replace(/[^0-9]/g,""):"",email:a.email||"",description:a.description||"",street_address:a.street_address||"",city:a.city||"",district:a.district||"",state:a.state||"",pincode:a.pincode||"",landmark:a.landmark||"",map_link:a.map_link||"",status:"pending"};console.log(" JSON payload:",C);const B=await ce.post("/entities",C,{headers:{"Content-Type":"application/json"}});console.log(" Temple created successfully:",B.data)}s.success("Temple registration submitted successfully!"),o.push("/tenant/dashboard")}catch(D){i.value=((g=(v=D.response)==null?void 0:v.data)==null?void 0:g.error)||"Failed to submit temple registration. Please try again.",s.error(i.value),console.error("Temple registration failed:",D),console.error("Error details:",((h=D.response)==null?void 0:h.data)||D.message)}finally{r.value=!1}};return(v,g)=>{const h=He("router-link");return m(),f("div",Dh,[e("div",Ch,[e("div",Th,[e("div",Eh,[e("div",null,[e("nav",Ah,[re(h,{to:"/tenant/dashboard",class:"hover:text-indigo-600"},{default:fe(()=>[...g[19]||(g[19]=[Q("Dashboard",-1)])]),_:1}),g[20]||(g[20]=e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1)),g[21]||(g[21]=e("span",{class:"text-gray-900"},"Create Temple",-1))]),g[22]||(g[22]=e("h1",{class:"text-2xl font-bold text-gray-900"},"Register New Temple",-1)),g[23]||(g[23]=e("p",{class:"text-gray-600 mt-1"},"Fill out the form below to register your temple for approval",-1))])])])]),e("div",Ih,[e("div",Mh,[e("div",Rh,[e("span",Ph,"Step "+y(n.value)+" of 3",1),e("span",jh,y(Math.round(n.value/3*100))+"% Complete",1)]),e("div",Nh,[e("div",{class:"bg-indigo-600 h-2 rounded-full transition-all duration-300",style:Pt({width:`${n.value/3*100}%`})},null,4)])]),e("div",Lh,[e("form",{onSubmit:Oe(p,["prevent"])},[de(e("div",Bh,[g[32]||(g[32]=e("div",{class:"mb-6"},[e("h2",{class:"text-xl font-bold text-gray-900 mb-2"},"Temple Basic Information"),e("p",{class:"text-gray-600"},"Provide the essential details about your temple")],-1)),e("div",Vh,[e("div",Uh,[g[24]||(g[24]=e("label",{for:"templeName",class:"block text-sm font-medium text-gray-700 mb-2"}," Temple Name * ",-1)),de(e("input",{id:"templeName","onUpdate:modelValue":g[0]||(g[0]=D=>a.name=D),type:"text",required:"",class:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-colors duration-200",placeholder:"Enter temple name"},null,512),[[xe,a.name]])]),e("div",null,[g[25]||(g[25]=e("label",{for:"deity",class:"block text-sm font-medium text-gray-700 mb-2"}," Main Deity * ",-1)),de(e("input",{id:"deity","onUpdate:modelValue":g[1]||(g[1]=D=>a.main_deity=D),type:"text",required:"",class:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-colors duration-200",placeholder:"e.g., Lord Vishnu, Goddess Lakshmi"},null,512),[[xe,a.main_deity]])]),e("div",null,[g[27]||(g[27]=e("label",{for:"templeType",class:"block text-sm font-medium text-gray-700 mb-2"}," Temple Type * ",-1)),de(e("select",{id:"templeType","onUpdate:modelValue":g[2]||(g[2]=D=>a.temple_type=D),required:"",class:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-colors duration-200"},[...g[26]||(g[26]=[$e('<option value="">Select temple type</option><option value="traditional">Traditional</option><option value="modern">Modern</option><option value="heritage">Heritage</option><option value="community">Community</option>',5)])],512),[[Ce,a.temple_type]])]),e("div",null,[g[28]||(g[28]=e("label",{for:"establishedYear",class:"block text-sm font-medium text-gray-700 mb-2"}," Established Year * ",-1)),de(e("input",{id:"establishedYear","onUpdate:modelValue":g[3]||(g[3]=D=>a.established_year=D),type:"number",min:"1800",max:new Date().getFullYear(),required:"",class:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-colors duration-200",placeholder:"YYYY"},null,8,Fh),[[xe,a.established_year]])]),e("div",null,[g[29]||(g[29]=e("label",{for:"phone",class:"block text-sm font-medium text-gray-700 mb-2"}," Contact Phone * ",-1)),de(e("input",{id:"phone","onUpdate:modelValue":g[4]||(g[4]=D=>a.phone=D),type:"tel",required:"",class:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-colors duration-200",placeholder:"+91 XXXXX XXXXX"},null,512),[[xe,a.phone]])]),e("div",Oh,[g[30]||(g[30]=e("label",{for:"email",class:"block text-sm font-medium text-gray-700 mb-2"}," Temple Email * ",-1)),de(e("input",{id:"email","onUpdate:modelValue":g[5]||(g[5]=D=>a.email=D),type:"email",required:"",class:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-colors duration-200",placeholder:"temple@example.com"},null,512),[[xe,a.email]])]),e("div",zh,[g[31]||(g[31]=e("label",{for:"description",class:"block text-sm font-medium text-gray-700 mb-2"}," Temple Description ",-1)),de(e("textarea",{id:"description","onUpdate:modelValue":g[6]||(g[6]=D=>a.description=D),rows:"4",class:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-colors duration-200",placeholder:"Brief description of the temple, its history, and significance..."},null,512),[[xe,a.description]])])])],512),[[us,n.value===1]]),de(e("div",Hh,[g[41]||(g[41]=e("div",{class:"mb-6"},[e("h2",{class:"text-xl font-bold text-gray-900 mb-2"},"Temple Address"),e("p",{class:"text-gray-600"},"Provide the complete address details")],-1)),e("div",qh,[e("div",Gh,[g[33]||(g[33]=e("label",{for:"street_address",class:"block text-sm font-medium text-gray-700 mb-2"}," Street Address * ",-1)),de(e("input",{id:"street_address","onUpdate:modelValue":g[7]||(g[7]=D=>a.street_address=D),type:"text",required:"",class:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-colors duration-200",placeholder:"Enter complete street address"},null,512),[[xe,a.street_address]])]),e("div",null,[g[34]||(g[34]=e("label",{for:"city",class:"block text-sm font-medium text-gray-700 mb-2"}," City * ",-1)),de(e("input",{id:"city","onUpdate:modelValue":g[8]||(g[8]=D=>a.city=D),type:"text",required:"",class:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-colors duration-200",placeholder:"Enter city name"},null,512),[[xe,a.city]])]),e("div",null,[g[36]||(g[36]=e("label",{for:"state",class:"block text-sm font-medium text-gray-700 mb-2"}," State * ",-1)),de(e("select",{id:"state","onUpdate:modelValue":g[9]||(g[9]=D=>a.state=D),required:"",class:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-colors duration-200"},[...g[35]||(g[35]=[$e('<option value="">Select state</option><option value="Karnataka">Karnataka</option><option value="Tamil Nadu">Tamil Nadu</option><option value="Andhra Pradesh">Andhra Pradesh</option><option value="Kerala">Kerala</option><option value="Maharashtra">Maharashtra</option><option value="Gujarat">Gujarat</option><option value="Rajasthan">Rajasthan</option><option value="Uttar Pradesh">Uttar Pradesh</option><option value="West Bengal">West Bengal</option><option value="Odisha">Odisha</option>',11)])],512),[[Ce,a.state]])]),e("div",null,[g[37]||(g[37]=e("label",{for:"district",class:"block text-sm font-medium text-gray-700 mb-2"}," District * ",-1)),de(e("input",{id:"district","onUpdate:modelValue":g[10]||(g[10]=D=>a.district=D),type:"text",required:"",class:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-colors duration-200",placeholder:"Enter district name"},null,512),[[xe,a.district]])]),e("div",null,[g[38]||(g[38]=e("label",{for:"pincode",class:"block text-sm font-medium text-gray-700 mb-2"}," PIN Code * ",-1)),de(e("input",{id:"pincode","onUpdate:modelValue":g[11]||(g[11]=D=>a.pincode=D),type:"text",pattern:"[0-9]{6}",required:"",class:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-colors duration-200",placeholder:"Enter 6-digit PIN code"},null,512),[[xe,a.pincode]])]),e("div",Wh,[g[39]||(g[39]=e("label",{for:"landmark",class:"block text-sm font-medium text-gray-700 mb-2"}," Landmark (Optional) ",-1)),de(e("input",{id:"landmark","onUpdate:modelValue":g[12]||(g[12]=D=>a.landmark=D),type:"text",class:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-colors duration-200",placeholder:"Nearby landmark for easy identification"},null,512),[[xe,a.landmark]])]),e("div",Jh,[g[40]||(g[40]=e("label",{for:"map_link",class:"block text-sm font-medium text-gray-700 mb-2"}," Google Maps Link (Optional) ",-1)),de(e("input",{id:"map_link","onUpdate:modelValue":g[13]||(g[13]=D=>a.map_link=D),type:"url",class:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-colors duration-200",placeholder:"https://maps.google.com/..."},null,512),[[xe,a.map_link]])])])],512),[[us,n.value===2]]),de(e("div",Yh,[g[61]||(g[61]=e("div",{class:"mb-6"},[e("h2",{class:"text-xl font-bold text-gray-900 mb-2"},"Upload Documents"),e("p",{class:"text-gray-600"},"Upload required documents for temple verification")],-1)),e("div",Kh,[e("div",Xh,[e("div",Zh,[g[43]||(g[43]=e("svg",{class:"w-12 h-12 text-gray-400 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1)),g[44]||(g[44]=e("h3",{class:"text-lg font-medium text-gray-900 mb-2"},"Registration Certificate *",-1)),g[45]||(g[45]=e("p",{class:"text-gray-600 mb-4"},"Upload temple registration certificate",-1)),e("div",Qh,[e("label",ey,[g[42]||(g[42]=e("span",null,"Choose File",-1)),e("input",{type:"file",class:"hidden",accept:".pdf,.jpg,.jpeg,.png",onChange:g[14]||(g[14]=D=>u(D,"registration"))},null,32)])]),a.documents.registration?(m(),f("p",ty,"  "+y(a.documents.registration.name),1)):Y("",!0)])]),e("div",oy,[e("div",sy,[g[47]||(g[47]=e("svg",{class:"w-12 h-12 text-gray-400 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1)),g[48]||(g[48]=e("h3",{class:"text-lg font-medium text-gray-900 mb-2"},"Trust Deed *",-1)),g[49]||(g[49]=e("p",{class:"text-gray-600 mb-4"},"Upload temple trust deed document",-1)),e("div",ny,[e("label",ry,[g[46]||(g[46]=e("span",null,"Choose File",-1)),e("input",{type:"file",class:"hidden",accept:".pdf,.jpg,.jpeg,.png",onChange:g[15]||(g[15]=D=>u(D,"trustDeed"))},null,32)])]),a.documents.trustDeed?(m(),f("p",ay,"  "+y(a.documents.trustDeed.name),1)):Y("",!0)])]),e("div",iy,[e("div",ly,[g[51]||(g[51]=$e('<svg class="w-12 h-12 text-gray-400 mx-auto mb-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2H5a2 2 0 00-2-2z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 5a2 2 0 012-2h4a2 2 0 012 2v2H8V5z"></path></svg><h3 class="text-lg font-medium text-gray-900 mb-2">Property Documents</h3><p class="text-gray-600 mb-4">Upload property ownership documents (Optional)</p>',3)),e("div",dy,[e("label",uy,[g[50]||(g[50]=e("span",null,"Choose File",-1)),e("input",{type:"file",class:"hidden",accept:".pdf,.jpg,.jpeg,.png",onChange:g[16]||(g[16]=D=>u(D,"property"))},null,32)])]),a.documents.property?(m(),f("p",cy,"  "+y(a.documents.property.name),1)):Y("",!0)])]),e("div",py,[e("div",my,[g[53]||(g[53]=e("svg",{class:"w-12 h-12 text-gray-400 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15.172 7l-6.586 6.586a2 2 0 102.828 2.828l6.414-6.586a4 4 0 00-5.656-5.656l-6.415 6.585a6 6 0 108.486 8.486L20.5 13"})],-1)),g[54]||(g[54]=e("h3",{class:"text-lg font-medium text-gray-900 mb-2"},"Additional Documents",-1)),g[55]||(g[55]=e("p",{class:"text-gray-600 mb-4"},"Upload any additional supporting documents (Optional)",-1)),e("div",gy,[e("label",fy,[g[52]||(g[52]=e("span",null,"Choose Files",-1)),e("input",{type:"file",class:"hidden",accept:".pdf,.jpg,.jpeg,.png",multiple:"",onChange:g[17]||(g[17]=D=>u(D,"additional"))},null,32)])]),a.documents.additional&&a.documents.additional.length>0?(m(),f("div",vy,[(m(!0),f(he,null,ke(a.documents.additional,(D,C)=>(m(),f("p",{key:C,class:"text-sm text-green-600"},"  "+y(D.name),1))),128))])):Y("",!0)])])]),e("div",hy,[e("label",yy,[de(e("input",{"onUpdate:modelValue":g[18]||(g[18]=D=>a.acceptTerms=D),type:"checkbox",class:"mt-1 mr-3 h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded",required:""},null,512),[[ot,a.acceptTerms]]),e("span",xy,[g[58]||(g[58]=Q(" I agree to the ",-1)),re(h,{to:"/terms",class:"text-indigo-600 hover:text-indigo-800 underline"},{default:fe(()=>[...g[56]||(g[56]=[Q("Terms and Conditions",-1)])]),_:1}),g[59]||(g[59]=Q(" and ",-1)),re(h,{to:"/privacy",class:"text-indigo-600 hover:text-indigo-800 underline"},{default:fe(()=>[...g[57]||(g[57]=[Q("Privacy Policy",-1)])]),_:1}),g[60]||(g[60]=Q(". I confirm that all information provided is accurate and complete. ",-1))])])])],512),[[us,n.value===3]]),e("div",by,[n.value>1?(m(),f("button",{key:0,type:"button",onClick:d,class:"inline-flex items-center px-6 py-3 border border-gray-300 rounded-lg text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 transition-colors duration-200"},[...g[62]||(g[62]=[e("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1),Q(" Previous ",-1)])])):(m(),f("div",wy)),e("div",ky,[re(h,{to:"/tenant/dashboard",class:"inline-flex items-center px-6 py-3 border border-gray-300 rounded-lg text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 transition-colors duration-200"},{default:fe(()=>[...g[63]||(g[63]=[Q(" Cancel ",-1)])]),_:1}),n.value<3?(m(),f("button",{key:0,type:"button",onClick:l,class:"inline-flex items-center px-6 py-3 bg-indigo-600 text-white rounded-lg text-sm font-medium hover:bg-indigo-700 transition-colors duration-200"},[...g[64]||(g[64]=[Q(" Next ",-1),e("svg",{class:"w-4 h-4 ml-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1)])])):(m(),f("button",{key:1,type:"submit",disabled:r.value,class:"inline-flex items-center px-6 py-3 bg-indigo-600 text-white rounded-lg text-sm font-medium hover:bg-indigo-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200"},[r.value?(m(),f("svg",$y,[...g[65]||(g[65]=[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)])])):Y("",!0),Q(" "+y(r.value?"Submitting...":"Submit Temple Registration"),1)],8,_y))])])],32)]),g[66]||(g[66]=$e('<div class="mt-8 bg-blue-50 border border-blue-200 rounded-lg p-6"><div class="flex items-start"><svg class="w-6 h-6 text-blue-600 mt-0.5 mr-3 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg><div><h3 class="text-sm font-medium text-blue-800 mb-1">Need Help?</h3><p class="text-sm text-blue-700"> If you need assistance with temple registration, please contact our support team at <a href="mailto:support@templesaas.com" class="underline">support@templesaas.com</a> or call us at <a href="tel:+91-800-123-4567" class="underline">+91-800-123-4567</a></p></div></div></div>',1))])])}}};function Dy(t,o){return m(),f("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M4.26 10.147a60.438 60.438 0 0 0-.491 6.347A48.62 48.62 0 0 1 12 20.904a48.62 48.62 0 0 1 8.232-4.41 60.46 60.46 0 0 0-.491-6.347m-15.482 0a50.636 50.636 0 0 0-2.658-.813A59.906 59.906 0 0 1 12 3.493a59.903 59.903 0 0 1 10.399 5.84c-.896.248-1.783.52-2.658.814m-15.482 0A50.717 50.717 0 0 1 12 13.489a50.702 50.702 0 0 1 7.74-3.342M6.75 15a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5Zm0 0v-3.675A55.378 55.378 0 0 1 12 8.443m-7.007 11.55A5.981 5.981 0 0 0 6.75 15.75v-1.5"})])}function Cy(t,o){return m(),f("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 21v-8.25M15.75 21v-8.25M8.25 21v-8.25M3 9l9-6 9 6m-1.5 12V10.332A48.36 48.36 0 0 0 12 9.75c-2.551 0-5.056.2-7.5.582V21M3 21h18M12 6.75h.008v.008H12V6.75Z"})])}function np(t,o){return m(),f("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9 12.75 11.25 15 15 9.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"})])}function Ty(t,o){return m(),f("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M10.5 1.5H8.25A2.25 2.25 0 0 0 6 3.75v16.5a2.25 2.25 0 0 0 2.25 2.25h7.5A2.25 2.25 0 0 0 18 20.25V3.75a2.25 2.25 0 0 0-2.25-2.25H13.5m-3 0V3h3V1.5m-3 0h3m-3 18.75h3"})])}function Ea(t,o){return m(),f("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126ZM12 15.75h.007v.008H12v-.008Z"})])}function Ey(t,o){return m(),f("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3.98 8.223A10.477 10.477 0 0 0 1.934 12C3.226 16.338 7.244 19.5 12 19.5c.993 0 1.953-.138 2.863-.395M6.228 6.228A10.451 10.451 0 0 1 12 4.5c4.756 0 8.773 3.162 10.065 7.498a10.522 10.522 0 0 1-4.293 5.774M6.228 6.228 3 3m3.228 3.228 3.65 3.65m7.894 7.894L21 21m-3.228-3.228-3.65-3.65m0 0a3 3 0 1 0-4.243-4.243m4.242 4.242L9.88 9.88"})])}function Ay(t,o){return m(),f("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M2.036 12.322a1.012 1.012 0 0 1 0-.639C3.423 7.51 7.36 4.5 12 4.5c4.638 0 8.573 3.007 9.963 7.178.07.207.07.431 0 .639C20.577 16.49 16.64 19.5 12 19.5c-4.638 0-8.573-3.007-9.963-7.178Z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"})])}function _u(t,o){return m(),f("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M21 11.25v8.25a1.5 1.5 0 0 1-1.5 1.5H5.25a1.5 1.5 0 0 1-1.5-1.5v-8.25M12 4.875A2.625 2.625 0 1 0 9.375 7.5H12m0-2.625V7.5m0-2.625A2.625 2.625 0 1 1 14.625 7.5H12m0 0V21m-8.625-9.75h18c.621 0 1.125-.504 1.125-1.125v-1.5c0-.621-.504-1.125-1.125-1.125h-18c-.621 0-1.125.504-1.125 1.125v1.5c0 .621.504 1.125 1.125 1.125Z"})])}function Iy(t,o){return m(),f("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M10.05 4.575a1.575 1.575 0 1 0-3.15 0v3m3.15-3v-1.5a1.575 1.575 0 0 1 3.15 0v1.5m-3.15 0 .075 5.925m3.075.75V4.575m0 0a1.575 1.575 0 0 1 3.15 0V15M6.9 7.575a1.575 1.575 0 1 0-3.15 0v8.175a6.75 6.75 0 0 0 6.75 6.75h2.018a5.25 5.25 0 0 0 3.712-1.538l1.732-1.732a5.25 5.25 0 0 0 1.538-3.712l.003-2.024a.668.668 0 0 1 .198-.471 1.575 1.575 0 1 0-2.228-2.228 3.818 3.818 0 0 0-1.12 2.687M6.9 7.575V12m6.27 4.318A4.49 4.49 0 0 1 16.35 15m.002 0h-.002"})])}function sa(t,o){return m(),f("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M21 8.25c0-2.485-2.099-4.5-4.688-4.5-1.935 0-3.597 1.126-4.312 2.733-.715-1.607-2.377-2.733-4.313-2.733C5.1 3.75 3 5.765 3 8.25c0 7.22 9 12 9 12s9-4.78 9-12Z"})])}function My(t,o){return m(),f("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m2.25 12 8.954-8.955c.44-.439 1.152-.439 1.591 0L21.75 12M4.5 9.75v10.125c0 .621.504 1.125 1.125 1.125H9.75v-4.875c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125V21h4.125c.621 0 1.125-.504 1.125-1.125V9.75M8.25 21h8.25"})])}function rp(t,o){return m(),f("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m11.25 11.25.041-.02a.75.75 0 0 1 1.063.852l-.708 2.836a.75.75 0 0 0 1.063.853l.041-.021M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9-3.75h.008v.008H12V8.25Z"})])}function Ry(t,o){return m(),f("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M2.25 6.75c0 8.284 6.716 15 15 15h2.25a2.25 2.25 0 0 0 2.25-2.25v-1.372c0-.516-.351-.966-.852-1.091l-4.423-1.106c-.44-.11-.902.055-1.173.417l-.97 1.293c-.282.376-.769.542-1.21.38a12.035 12.035 0 0 1-7.143-7.143c-.162-.441.004-.928.38-1.21l1.293-.97c.363-.271.527-.734.417-1.173L6.963 3.102a1.125 1.125 0 0 0-1.091-.852H4.5A2.25 2.25 0 0 0 2.25 4.5v2.25Z"})])}function $u(t,o){return m(),f("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 4.5v15m7.5-7.5h-15"})])}function Su(t,o){return m(),f("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9.813 15.904 9 18.75l-.813-2.846a4.5 4.5 0 0 0-3.09-3.09L2.25 12l2.846-.813a4.5 4.5 0 0 0 3.09-3.09L9 5.25l.813 2.846a4.5 4.5 0 0 0 3.09 3.09L15.75 12l-2.846.813a4.5 4.5 0 0 0-3.09 3.09ZM18.259 8.715 18 9.75l-.259-1.035a3.375 3.375 0 0 0-2.455-2.456L14.25 6l1.036-.259a3.375 3.375 0 0 0 2.455-2.456L18 2.25l.259 1.035a3.375 3.375 0 0 0 2.456 2.456L21.75 6l-1.035.259a3.375 3.375 0 0 0-2.456 2.456ZM16.894 20.567 16.5 21.75l-.394-1.183a2.25 2.25 0 0 0-1.423-1.423L13.5 18.75l1.183-.394a2.25 2.25 0 0 0 1.423-1.423l.394-1.183.394 1.183a2.25 2.25 0 0 0 1.423 1.423l1.183.394-1.183.394a2.25 2.25 0 0 0-1.423 1.423Z"})])}function Du(t,o){return m(),f("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 3v2.25m6.364.386-1.591 1.591M21 12h-2.25m-.386 6.364-1.591-1.591M12 18.75V21m-4.773-4.227-1.591 1.591M5.25 12H3m4.227-4.773L5.636 5.636M15.75 12a3.75 3.75 0 1 1-7.5 0 3.75 3.75 0 0 1 7.5 0Z"})])}function Cu(t,o){return m(),f("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0"})])}function Py(t,o){return m(),f("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M18 18.72a9.094 9.094 0 0 0 3.741-.479 3 3 0 0 0-4.682-2.72m.94 3.198.001.031c0 .225-.012.447-.037.666A11.944 11.944 0 0 1 12 21c-2.17 0-4.207-.576-5.963-1.584A6.062 6.062 0 0 1 6 18.719m12 0a5.971 5.971 0 0 0-.941-3.197m0 0A5.995 5.995 0 0 0 12 12.75a5.995 5.995 0 0 0-5.058 2.772m0 0a3 3 0 0 0-4.681 2.72 8.986 8.986 0 0 0 3.74.477m.94-3.197a5.971 5.971 0 0 0-.94 3.197M15 6.75a3 3 0 1 1-6 0 3 3 0 0 1 6 0Zm6 3a2.25 2.25 0 1 1-4.5 0 2.25 2.25 0 0 1 4.5 0Zm-13.5 0a2.25 2.25 0 1 1-4.5 0 2.25 2.25 0 0 1 4.5 0Z"})])}function jy(t,o){return m(),f("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15 19.128a9.38 9.38 0 0 0 2.625.372 9.337 9.337 0 0 0 4.121-.952 4.125 4.125 0 0 0-7.533-2.493M15 19.128v-.003c0-1.113-.285-2.16-.786-3.07M15 19.128v.106A12.318 12.318 0 0 1 8.624 21c-2.331 0-4.512-.645-6.374-1.766l-.001-.109a6.375 6.375 0 0 1 11.964-3.07M12 6.375a3.375 3.375 0 1 1-6.75 0 3.375 3.375 0 0 1 6.75 0Zm8.25 2.25a2.625 2.625 0 1 1-5.25 0 2.625 2.625 0 0 1 5.25 0Z"})])}function Ny(t,o){return m(),f("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M8.288 15.038a5.25 5.25 0 0 1 7.424 0M5.106 11.856c3.807-3.808 9.98-3.808 13.788 0M1.924 8.674c5.565-5.565 14.587-5.565 20.152 0M12.53 18.22l-.53.53-.53-.53a.75.75 0 0 1 1.06 0Z"})])}function ap(t,o){return m(),f("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m9.75 9.75 4.5 4.5m0-4.5-4.5 4.5M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"})])}function Aa(t,o){return m(),f("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 18 18 6M6 6l12 12"})])}const Ly={key:0,class:"fixed inset-0 z-50 overflow-y-auto","aria-labelledby":"modal-title",role:"dialog","aria-modal":"true"},By={class:"flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0"},Vy={key:0,class:"bg-white px-6 py-4 border-b border-gray-200"},Uy={class:"flex items-center justify-between"},Fy={class:"flex items-center"},Oy={key:0,class:"flex-shrink-0 mr-4"},zy={class:"text-lg font-semibold text-gray-900",id:"modal-title"},Hy={key:0,class:"text-sm text-gray-600 mt-1"},qy={key:0,class:"text-gray-700"},Gy={key:1,class:"text-gray-700"},Wy={key:1,class:"bg-gray-50 px-6 py-4 border-t border-gray-200 flex justify-end space-x-3"},Jy=["disabled"],Yy=["disabled"],Ky={key:0,class:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},Xy={__name:"BaseModal",props:{modelValue:{type:Boolean,default:!1},title:{type:String,default:"Confirm Action"},subtitle:{type:String,default:""},message:{type:String,default:""},icon:{type:[String,Object],default:null},variant:{type:String,default:"default",validator:t=>["default","danger","warning","success"].includes(t)},size:{type:String,default:"md",validator:t=>["sm","md","lg","xl","full"].includes(t)},showHeader:{type:Boolean,default:!0},showCloseButton:{type:Boolean,default:!0},showFooter:{type:Boolean,default:!0},showCancelButton:{type:Boolean,default:!0},showConfirmButton:{type:Boolean,default:!0},cancelText:{type:String,default:"Cancel"},confirmText:{type:String,default:"Confirm"},loadingText:{type:String,default:"Loading..."},loading:{type:Boolean,default:!1},closeOnBackdrop:{type:Boolean,default:!0},closeOnEscape:{type:Boolean,default:!0},persistent:{type:Boolean,default:!1}},emits:["update:modelValue","confirm","cancel","close"],setup(t,{emit:o}){const s=t,n=o,r=te(()=>({sm:"sm:max-w-sm",md:"sm:max-w-md",lg:"sm:max-w-lg",xl:"sm:max-w-2xl",full:"sm:max-w-7xl"})[s.size]),i=te(()=>s.showHeader||s.showFooter?"px-6 py-4":"p-6"),a=te(()=>({default:"bg-indigo-100",danger:"bg-red-100",warning:"bg-yellow-100",success:"bg-green-100"})[s.variant]),l=te(()=>({default:"text-indigo-600",danger:"text-red-600",warning:"text-yellow-600",success:"text-green-600"})[s.variant]),d=te(()=>`${{default:"border border-transparent bg-indigo-600 text-white hover:bg-indigo-700 focus:ring-indigo-500",danger:"border border-transparent bg-red-600 text-white hover:bg-red-700 focus:ring-red-500",warning:"border border-transparent bg-yellow-600 text-white hover:bg-yellow-700 focus:ring-yellow-500",success:"border border-transparent bg-green-600 text-white hover:bg-green-700 focus:ring-green-500"}[s.variant]} ${s.loading?"opacity-75 cursor-not-allowed":""}`),c=()=>{!s.persistent&&!s.loading&&(n("update:modelValue",!1),n("close"))},u=()=>{s.closeOnBackdrop&&c()},p=()=>{s.loading||(n("cancel"),n("update:modelValue",!1))},v=()=>{s.loading||n("confirm")},g=D=>{D.key==="Escape"&&s.closeOnEscape&&s.modelValue&&c()};Ee(()=>{document.addEventListener("keydown",g),s.modelValue&&(document.body.style.overflow="hidden")}),Ut(()=>{document.removeEventListener("keydown",g),document.body.style.overflow=""});const{modelValue:h}=cc(s);return Ue(h,D=>{Qo(()=>{D?document.body.style.overflow="hidden":document.body.style.overflow=""})}),(D,C)=>(m(),Re(jn,{to:"body"},[_e(h)?(m(),f("div",Ly,[e("div",By,[re(It,{"enter-active-class":"transition-opacity ease-out duration-300","enter-from-class":"opacity-0","enter-to-class":"opacity-100","leave-active-class":"transition-opacity ease-in duration-200","leave-from-class":"opacity-100","leave-to-class":"opacity-0"},{default:fe(()=>[_e(h)?(m(),f("div",{key:0,class:"fixed inset-0 bg-gray-500 bg-opacity-75 backdrop-blur-sm transition-opacity",onClick:u})):Y("",!0)]),_:1}),C[2]||(C[2]=e("span",{class:"hidden sm:inline-block sm:align-middle sm:h-screen","aria-hidden":"true"},"",-1)),re(It,{"enter-active-class":"transition-all ease-out duration-300","enter-from-class":"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95","enter-to-class":"opacity-100 translate-y-0 sm:scale-100","leave-active-class":"transition-all ease-in duration-200","leave-from-class":"opacity-100 translate-y-0 sm:scale-100","leave-to-class":"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95"},{default:fe(()=>[_e(h)?(m(),f("div",{key:0,class:ie(["inline-block align-bottom bg-white rounded-xl text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:w-full border border-gray-200",r.value])},[t.showHeader?(m(),f("div",Vy,[e("div",Uy,[e("div",Fy,[t.icon?(m(),f("div",Oy,[e("div",{class:ie(["mx-auto flex items-center justify-center h-10 w-10 rounded-full",a.value])},[(m(),Re(xt(t.icon),{class:ie(["h-5 w-5",l.value])},null,8,["class"]))],2)])):Y("",!0),e("div",null,[e("h3",zy,y(t.title),1),t.subtitle?(m(),f("p",Hy,y(t.subtitle),1)):Y("",!0)])]),t.showCloseButton?(m(),f("button",{key:0,onClick:c,class:"rounded-md text-gray-400 hover:text-gray-600 focus:outline-none focus:ring-2 focus:ring-indigo-500 transition-colors duration-200"},[C[0]||(C[0]=e("span",{class:"sr-only"},"Close",-1)),re(_e(Aa),{class:"h-5 w-5"})])):Y("",!0)])])):Y("",!0),e("div",{class:ie(["bg-white",i.value])},[D.$slots.default?(m(),f("div",qy,[Dt(D.$slots,"default",{},void 0,!0)])):t.message?(m(),f("div",Gy,[e("p",null,y(t.message),1)])):Y("",!0)],2),t.showFooter?(m(),f("div",Wy,[Dt(D.$slots,"footer",{},()=>[t.showCancelButton?(m(),f("button",{key:0,onClick:p,type:"button",class:"inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 transition-colors duration-200 sm:text-sm",disabled:t.loading},y(t.cancelText),9,Jy)):Y("",!0),t.showConfirmButton?(m(),f("button",{key:1,onClick:v,type:"button",class:ie(["inline-flex items-center justify-center rounded-md shadow-sm px-4 py-2 text-base font-medium focus:outline-none focus:ring-2 focus:ring-offset-2 transition-all duration-200 sm:text-sm",d.value]),disabled:t.loading},[t.loading?(m(),f("svg",Ky,[...C[1]||(C[1]=[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)])])):Y("",!0),Q(" "+y(t.loading?t.loadingText:t.confirmText),1)],10,Yy)):Y("",!0)],!0)])):Y("",!0)],2)):Y("",!0)]),_:3})])])):Y("",!0)]))}},Ia=Qe(Xy,[["__scopeId","data-v-86a742fd"]]),ip={__name:"AppBreadcrumb",props:{items:{type:Array,default:()=>[]}},setup(t){const o=t,s=Ze(),n=tt(),r=te(()=>{var a;return(a=n.user)==null?void 0:a.role}),i=te(()=>{const a=[],l=s.path,d=s.params,c=()=>{switch(r.value){case"tenant":return{name:"Dashboard",to:"/tenant/dashboard"};case"entity_admin":return{name:"Dashboard",to:`/entity/${d.entityId}/dashboard`};case"devotee":return{name:"Dashboard",to:`/entity/${d.entityId}/devotee/dashboard`};case"volunteer":return{name:"Dashboard",to:`/entity/${d.entityId}/volunteer/dashboard`};default:return{name:"Dashboard",to:"/"}}};return l==="/"||l==="/landing"?a.push({name:"Home",current:!0}):l.includes("/login")||l.includes("/register")?(a.push({name:"Home",to:"/"}),a.push({name:l.includes("/login")?"Login":"Register",current:!0})):l.includes("/tenant")?(a.push(c()),l.includes("/entities/create")?(a.push({name:"My Temples",to:"/tenant/entities"}),a.push({name:"Create Temple",current:!0})):l.includes("/entities")&&!l.includes("/create")&&!l.includes("/edit")?l.match(/\/tenant\/entities\/\d+$/)?(a.push({name:"My Temples",to:"/tenant/entities"}),a.push({name:"Temple Details",current:!0})):a.push({name:"My Temples",current:!0,badge:"3"}):l.includes("/entities")&&l.includes("/edit")?(a.push({name:"My Temples",to:"/tenant/entities"}),a.push({name:"Edit Temple",current:!0})):l.includes("/settings")?a.push({name:"Settings",current:!0}):a[0].current=!0):l.includes("/entity")&&r.value==="entity_admin"?(a.push(c()),l.includes("/devotees")?(a.push({name:"Management",to:`/entity/${d.entityId}/devotees`}),a.push({name:"Devotees",current:!0,badge:"1,247"})):l.includes("/volunteers")?(a.push({name:"Management",to:`/entity/${d.entityId}/volunteers`}),a.push({name:"Volunteers",current:!0,badge:"89"})):l.includes("/sevas")?a.push({name:"Seva Management",current:!0,badge:"5 pending"}):l.includes("/donations")?a.push({name:"Donations",current:!0}):l.includes("/events")?a.push({name:"Events & Festivals",current:!0,badge:"2 upcoming"}):l.includes("/communication")?a.push({name:"Communication",current:!0}):l.includes("/settings")?a.push({name:"Settings",current:!0}):a[0].current=!0):l.includes("/entity")&&r.value==="devotee"?(a.push(c()),l.includes("/seva-booking")?a.push({name:"Book Seva",current:!0}):l.includes("/donations")?a.push({name:"My Donations",current:!0}):l.includes("/events")?a.push({name:"Temple Events",current:!0}):l.includes("/profile")?(a.push({name:"My Profile",current:!0}),l.includes("/create")&&(a[a.length-1].current=!1,a[a.length-1].to=`/entity/${d.entityId}/devotee/profile`,a.push({name:"Complete Profile",current:!0}))):a[0].current=!0):l.includes("/entity")&&r.value==="volunteer"?(a.push(c()),l.includes("/assignments")?a.push({name:"My Assignments",current:!0,badge:"3 active"}):l.includes("/schedule")?a.push({name:"My Schedule",current:!0}):l.includes("/events")?a.push({name:"Temple Events",current:!0}):a[0].current=!0):l.includes("/devotee/temple-selection")?(a.push({name:"Home",to:"/"}),a.push({name:"Select Temple",current:!0})):l.includes("/volunteer/temple-selection")?(a.push({name:"Home",to:"/"}),a.push({name:"Select Temple",current:!0})):(a.push({name:"Home",to:"/"}),a.push({name:"Page",current:!0})),a});return te(()=>o.items&&o.items.length>0?o.items.map((a,l)=>({name:a.name,to:a.path||void 0,current:l===o.items.length-1})):i.value),(a,l)=>null}},Zy={key:0,class:"relative"},Qy={key:1,class:"flex space-x-2"},ex={key:2,class:"flex space-x-1"},tx={key:3,class:"ml-3"},ox={class:"bg-white rounded-xl shadow-lg p-8 max-w-sm w-full mx-4"},sx={class:"text-center"},nx={class:"text-lg font-semibold text-gray-900 mb-2"},rx={class:"text-gray-600"},ax={__name:"BaseLoader",props:{show:{type:Boolean,default:!0},type:{type:String,default:"spinner",validator:t=>["spinner","dots","pulse"].includes(t)},size:{type:String,default:"md",validator:t=>["sm","md","lg","xl"].includes(t)},color:{type:String,default:"indigo"},text:{type:String,default:""},subtext:{type:String,default:""},center:{type:Boolean,default:!1},fullHeight:{type:Boolean,default:!1},overlay:{type:Boolean,default:!1},overlayDark:{type:Boolean,default:!1},overlayTitle:{type:String,default:""},overlayText:{type:String,default:""}},setup(t){const o=t,s=te(()=>({sm:"h-4 w-4",md:"h-6 w-6",lg:"h-8 w-8",xl:"h-12 w-12"})[o.size]),n=te(()=>({sm:"h-2 w-2",md:"h-3 w-3",lg:"h-4 w-4",xl:"h-5 w-5"})[o.size]),r=te(()=>({sm:"h-2 w-1",md:"h-4 w-1",lg:"h-6 w-1",xl:"h-8 w-2"})[o.size]),i=te(()=>({sm:"sm",md:"base",lg:"lg",xl:"xl"})[o.size]),a=te(()=>({sm:"xs",md:"sm",lg:"base",xl:"lg"})[o.size]),l=te(()=>{let d=[];return o.center&&d.push("justify-center"),o.fullHeight&&d.push("min-h-screen"),d.join(" ")});return(d,c)=>(m(),f(he,null,[t.show?(m(),f("div",{key:0,class:ie(["flex items-center justify-center",l.value])},[t.type==="spinner"?(m(),f("div",Zy,[e("div",{class:ie(["animate-spin rounded-full border-2 border-indigo-200",[s.value,`border-t-${t.color}-600`]])},null,2)])):t.type==="dots"?(m(),f("div",Qy,[(m(),f(he,null,ke(3,u=>e("div",{key:u,class:ie(["animate-bounce rounded-full",[n.value,`bg-${t.color}-600`,{"animation-delay-150":u===2,"animation-delay-300":u===3}]]),style:Pt({animationDelay:`${(u-1)*150}ms`})},null,6)),64))])):t.type==="pulse"?(m(),f("div",ex,[(m(),f(he,null,ke(3,u=>e("div",{key:u,class:ie(["animate-pulse rounded",[r.value,`bg-${t.color}-600`]]),style:Pt({animationDelay:`${(u-1)*200}ms`})},null,6)),64))])):Y("",!0),t.text?(m(),f("div",tx,[e("p",{class:ie(`text-${i.value} text-${t.color}-700 font-medium`)},y(t.text),3),t.subtext?(m(),f("p",{key:0,class:ie(`text-${a.value} text-gray-500 mt-1`)},y(t.subtext),3)):Y("",!0)])):Y("",!0)],2)):Y("",!0),t.overlay&&t.show?(m(),f("div",{key:1,class:ie(["fixed inset-0 bg-white bg-opacity-75 backdrop-blur-sm flex items-center justify-center z-50",{"bg-gray-900 bg-opacity-50":t.overlayDark}])},[e("div",ox,[e("div",sx,[c[0]||(c[0]=e("div",{class:"flex justify-center mb-4"},[e("div",{class:"animate-spin rounded-full h-12 w-12 border-2 border-indigo-200 border-t-indigo-600"})],-1)),e("h3",nx,y(t.overlayTitle||"Loading..."),1),e("p",rx,y(t.overlayText||"Please wait while we process your request."),1)])])],2)):Y("",!0)],64))}},Ma=Qe(ax,[["__scopeId","data-v-4fefcc0d"]]),ix=["aria-live"],lx={class:"flex items-start gap-3 p-4"},dx={class:"flex-1 min-w-0"},ux={key:1,class:"mt-3 flex gap-2"},cx={key:0,class:"absolute bottom-0 left-0 right-0 h-1 bg-black/10 rounded-b-xl overflow-hidden"},px={__name:"BaseAlert",props:{type:{type:String,default:"info",validator:t=>["success","error","warning","info"].includes(t)},title:{type:String,default:""},message:{type:String,default:""},dismissible:{type:Boolean,default:!0},autoDismiss:{type:Boolean,default:!1},autoDismissTime:{type:Number,default:5e3},actionText:{type:String,default:""},showActions:{type:Boolean,default:!1},persistent:{type:Boolean,default:!1}},emits:["dismiss","action"],setup(t,{expose:o,emit:s}){const n=t,r=s,i=V(!0),a=V(0);let l=null;const d=te(()=>({success:np,error:ap,warning:Ea,info:rp})[n.type]),c=te(()=>`w-full max-w-md mx-auto sm:max-w-lg md:max-w-xl lg:max-w-2xl ${{success:"bg-green-50 border-green-200 text-green-900",error:"bg-red-50 border-red-200 text-red-900",warning:"bg-yellow-50 border-yellow-200 text-yellow-900",info:"bg-blue-50 border-blue-200 text-blue-900"}[n.type]}`),u=te(()=>({success:"bg-green-100 text-green-600",error:"bg-red-100 text-red-600",warning:"bg-yellow-100 text-yellow-600",info:"bg-blue-100 text-blue-600"})[n.type]),p=te(()=>({success:"text-green-600",error:"text-red-600",warning:"text-yellow-600",info:"text-blue-600"})[n.type]),v=te(()=>({success:"text-green-900",error:"text-red-900",warning:"text-yellow-900",info:"text-blue-900"})[n.type]),g=te(()=>({success:"text-green-800",error:"text-red-800",warning:"text-yellow-800",info:"text-blue-800"})[n.type]),h=te(()=>({success:"bg-green-100 text-green-800 hover:bg-green-200 focus:ring-green-500",error:"bg-red-100 text-red-800 hover:bg-red-200 focus:ring-red-500",warning:"bg-yellow-100 text-yellow-800 hover:bg-yellow-200 focus:ring-yellow-500",info:"bg-blue-100 text-blue-800 hover:bg-blue-200 focus:ring-blue-500"})[n.type]),D=te(()=>({success:"text-green-500 hover:bg-green-100 focus:ring-green-500",error:"text-red-500 hover:bg-red-100 focus:ring-red-500",warning:"text-yellow-500 hover:bg-yellow-100 focus:ring-yellow-500",info:"text-blue-500 hover:bg-blue-100 focus:ring-blue-500"})[n.type]),C=()=>{n.persistent||(i.value=!1,l&&clearTimeout(l),setTimeout(()=>{r("dismiss")},300))},B=()=>{r("action")};return Ee(()=>{n.autoDismiss&&n.autoDismissTime&&!n.persistent&&(setTimeout(()=>{a.value=100},100),l=setTimeout(()=>{C()},n.autoDismissTime))}),Ut(()=>{l&&clearTimeout(l)}),o({dismiss:C}),(_,T)=>(m(),Re(It,{"enter-active-class":"transition-all duration-300 ease-out","enter-from-class":"opacity-0 transform -translate-y-2 scale-95","enter-to-class":"opacity-100 transform translate-y-0 scale-100","leave-active-class":"transition-all duration-200 ease-in","leave-from-class":"opacity-100 transform translate-y-0 scale-100","leave-to-class":"opacity-0 transform -translate-y-2 scale-95"},{default:fe(()=>[i.value?(m(),f("div",{key:0,class:ie([c.value,"relative rounded-xl shadow-lg border transition-all duration-200 hover:shadow-xl"]),role:"alert","aria-live":t.type==="error"?"assertive":"polite"},[e("div",lx,[e("div",{class:ie([u.value,"flex-shrink-0 rounded-full p-1"])},[(m(),Re(xt(d.value),{class:ie([p.value,"w-5 h-5"])},null,8,["class"]))],2),e("div",dx,[t.title?(m(),f("h4",{key:0,class:ie([v.value,"font-bold text-sm font-roboto leading-5 mb-1"])},y(t.title),3)):Y("",!0),e("div",{class:ie([g.value,"text-sm font-sans leading-5"])},[Dt(_.$slots,"default",{},()=>[Q(y(t.message),1)],!0)],2),_.$slots.actions||t.showActions?(m(),f("div",ux,[Dt(_.$slots,"actions",{},()=>[t.actionText?(m(),f("button",{key:0,onClick:B,class:ie([h.value,"text-xs font-medium px-3 py-1.5 rounded-lg transition-all duration-200 hover:shadow-md focus:outline-none focus:ring-2 focus:ring-offset-2"])},y(t.actionText),3)):Y("",!0)],!0)])):Y("",!0)]),t.dismissible?(m(),f("button",{key:0,onClick:C,class:ie([D.value,"flex-shrink-0 rounded-lg p-1.5 transition-all duration-200 hover:shadow-md focus:outline-none focus:ring-2 focus:ring-offset-2"]),"aria-label":"Dismiss alert"},[re(_e(Aa),{class:"w-4 h-4"})],2)):Y("",!0)]),t.autoDismiss&&t.autoDismissTime?(m(),f("div",cx,[e("div",{class:"h-full bg-current transition-all ease-linear",style:Pt({width:`${a.value}%`,transitionDuration:`${t.autoDismissTime}ms`})},null,4)])):Y("",!0)],10,ix)):Y("",!0)]),_:3}))}},mx=Qe(px,[["__scopeId","data-v-b76fa8a6"]]),gx={class:"min-h-screen bg-gray-50"},fx={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},vx={key:0,class:"flex justify-center items-center h-64"},hx={key:2,class:"space-y-8"},yx={class:"bg-white shadow rounded-lg overflow-hidden"},xx={class:"px-6 py-5 border-b border-gray-200 flex justify-between items-center"},bx={class:"text-2xl font-bold text-gray-900"},wx={class:"p-6"},kx={class:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6"},_x={class:"mt-2 space-y-3"},$x={class:"ml-2 text-sm text-gray-900"},Sx={class:"ml-2 text-sm text-gray-900"},Dx={class:"ml-2 text-sm text-gray-900"},Cx={class:"mt-2 space-y-3"},Tx={class:"ml-2 text-sm text-gray-900"},Ex={class:"ml-2 text-sm text-gray-900"},Ax={class:"ml-2 text-sm text-gray-900"},Ix={class:"mb-6"},Mx={class:"text-sm text-gray-700"},Rx={key:3,class:"flex flex-col items-center justify-center py-16 text-center"},Px={__name:"TempleDetails",setup(t){const o=Ze();Ke();const s=Uo(),n=V(!0),r=V(null),i=V(null),a=te(()=>{var c;return[{name:"My Temples",to:"/tenant/entities"},{name:((c=i.value)==null?void 0:c.name)||"Temple Details",current:!0}]}),l=te(()=>{var c;return((c=i.value)==null?void 0:c.mainDeity)||"Not mentioned"}),d=async()=>{try{n.value=!0,r.value=null;const c=o.params.id,u=await s.getTempleById(c);u?(i.value=u,console.log("Fetched temple:",u)):r.value="Temple not found"}catch(c){console.error("Error fetching temple:",c),r.value=c.message||"Failed to load temple details"}finally{n.value=!1}};return Ee(()=>{d()}),(c,u)=>(m(),f("div",gx,[e("div",fx,[re(ip,{items:a.value,class:"mb-6"},null,8,["items"]),e("div",null,[n.value?(m(),f("div",vx,[re(Ma,{size:"lg"})])):r.value?(m(),Re(mx,{key:1,type:"error",title:"Error Loading Temple",message:r.value,class:"mb-6"},null,8,["message"])):i.value?(m(),f("div",hx,[e("div",yx,[e("div",xx,[e("h1",bx,y(i.value.name||"Unnamed Temple"),1),re(sp,{status:i.value.status},null,8,["status"])]),e("div",wx,[e("div",kx,[e("div",null,[u[4]||(u[4]=e("h3",{class:"text-sm font-medium text-gray-500"},"Temple Details",-1)),e("div",_x,[e("div",null,[u[1]||(u[1]=e("span",{class:"text-sm text-gray-500"},"Location:",-1)),e("span",$x,y(i.value.city||"N/A")+", "+y(i.value.state||"N/A"),1)]),e("div",null,[u[2]||(u[2]=e("span",{class:"text-sm text-gray-500"},"Established:",-1)),e("span",Sx,y(i.value.established_year??i.value.establishedYear??"Not mentioned"),1)]),e("div",null,[u[3]||(u[3]=e("span",{class:"text-sm text-gray-500"},"Main Deity:",-1)),e("span",Dx,y(l.value),1)])])]),e("div",null,[u[8]||(u[8]=e("h3",{class:"text-sm font-medium text-gray-500"},"Contact Information",-1)),e("div",Cx,[e("div",null,[u[5]||(u[5]=e("span",{class:"text-sm text-gray-500"},"Email:",-1)),e("span",Tx,y(i.value.email||"N/A"),1)]),e("div",null,[u[6]||(u[6]=e("span",{class:"text-sm text-gray-500"},"Phone:",-1)),e("span",Ex,y(i.value.phone||"N/A"),1)]),e("div",null,[u[7]||(u[7]=e("span",{class:"text-sm text-gray-500"},"Address:",-1)),e("span",Ax,[i.value.address&&typeof i.value.address=="object"?(m(),f(he,{key:0},[Q(y(i.value.address.street||"")+y(i.value.address.street?", ":"")+" "+y(i.value.address.city||"")+y(i.value.address.city?", ":"")+" "+y(i.value.address.district||"")+y(i.value.address.district?", ":"")+" "+y(i.value.address.state||"")+y(i.value.address.state?", ":"")+" "+y(i.value.address.pincode||"")+y(i.value.address.pincode?", ":"")+" "+y(i.value.address.country||""),1)],64)):(m(),f(he,{key:1},[Q(y(i.value.address||"N/A"),1)],64))])])])])]),e("div",Ix,[u[9]||(u[9]=e("h3",{class:"text-sm font-medium text-gray-500 mb-2"},"Description",-1)),e("p",Mx,y(i.value.description||"No description available."),1)]),u[10]||(u[10]=e("div",{class:"flex flex-wrap gap-3"},null,-1))])])])):(m(),f("div",Rx,[u[11]||(u[11]=e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-20 w-20 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})],-1)),u[12]||(u[12]=e("h3",{class:"mt-4 text-lg font-medium text-gray-900"},"No Temple Found",-1)),u[13]||(u[13]=e("p",{class:"mt-1 text-gray-500"},"The temple you're looking for doesn't exist or has been removed.",-1)),e("button",{onClick:u[0]||(u[0]=p=>c.$router.push("/tenant/entities")),class:"mt-6 px-4 py-2 text-sm font-medium text-white bg-indigo-600 rounded-lg hover:bg-indigo-700"}," Back to Temples ")]))])])]))}},jx=Qe(Px,[["__scopeId","data-v-695d3a31"]]),Nx={class:"min-h-screen bg-gray-50"},Lx={class:"bg-white shadow-sm border-b border-gray-200"},Bx={class:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-6"},Vx={class:"flex items-center justify-between"},Ux={class:"flex items-center space-x-2 text-sm text-gray-500 mb-2"},Fx={class:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},Ox={class:"mb-8"},zx={class:"flex items-center justify-between mb-2"},Hx={class:"text-sm font-medium text-indigo-600"},qx={class:"text-sm text-gray-500"},Gx={class:"w-full bg-gray-200 rounded-full h-2"},Wx={key:0,class:"flex justify-center items-center py-20"},Jx={key:1,class:"bg-red-50 border border-red-200 rounded-lg p-6 text-center"},Yx={class:"text-red-700 mb-4"},Kx={class:"p-8"},Xx={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},Zx={class:"md:col-span-2"},Qx=["max"],eb={class:"md:col-span-2"},tb={class:"md:col-span-2"},ob={class:"p-8"},sb={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},nb={class:"md:col-span-2"},rb={class:"md:col-span-2"},ab={class:"md:col-span-2"},ib={class:"p-8"},lb={class:"mb-6 flex items-center justify-between"},db={class:"space-y-6"},ub={class:"border-2 border-dashed border-gray-300 rounded-lg p-6 hover:border-indigo-400 transition-colors duration-200"},cb={class:"text-center"},pb={class:"flex flex-col items-center space-y-2"},mb={class:"cursor-pointer bg-indigo-600 text-white px-6 py-2 rounded-lg hover:bg-indigo-700 transition-colors duration-200"},gb={key:0,class:"flex items-center space-x-2 mt-2"},fb={class:"text-sm text-green-600"},vb={key:1,class:"flex items-center space-x-2 mt-2"},hb={class:"text-sm text-gray-600"},yb=["disabled"],xb={key:0},bb={key:1},wb={class:"border-2 border-dashed border-gray-300 rounded-lg p-6 hover:border-indigo-400 transition-colors duration-200"},kb={class:"text-center"},_b={class:"flex flex-col items-center space-y-2"},$b={class:"cursor-pointer bg-indigo-600 text-white px-6 py-2 rounded-lg hover:bg-indigo-700 transition-colors duration-200"},Sb={key:0,class:"flex items-center space-x-2 mt-2"},Db={class:"text-sm text-green-600"},Cb={key:1,class:"flex items-center space-x-2 mt-2"},Tb={class:"text-sm text-gray-600"},Eb=["disabled"],Ab={key:0},Ib={key:1},Mb={class:"border-2 border-dashed border-gray-300 rounded-lg p-6 hover:border-indigo-400 transition-colors duration-200"},Rb={class:"text-center"},Pb={class:"flex flex-col items-center space-y-2"},jb={class:"cursor-pointer bg-gray-600 text-white px-6 py-2 rounded-lg hover:bg-gray-700 transition-colors duration-200"},Nb={key:0,class:"flex items-center space-x-2 mt-2"},Lb={class:"text-sm text-green-600"},Bb={key:1,class:"flex items-center space-x-2 mt-2"},Vb={class:"text-sm text-gray-600"},Ub=["disabled"],Fb={key:0},Ob={key:1},zb={class:"border-2 border-dashed border-gray-300 rounded-lg p-6 hover:border-indigo-400 transition-colors duration-200"},Hb={class:"text-center"},qb={class:"flex flex-col items-center"},Gb={class:"cursor-pointer bg-gray-600 text-white px-6 py-2 rounded-lg hover:bg-gray-700 transition-colors duration-200"},Wb={key:0,class:"mt-2 w-full"},Jb=["onClick"],Yb=["onClick"],Kb={key:1,class:"mt-2 w-full"},Xb={class:"text-sm text-gray-600"},Zb=["onClick"],Qb=["disabled","onClick"],ew={key:0},tw={key:1},ow={class:"mt-8 p-4 bg-gray-50 rounded-lg"},sw={class:"flex items-start"},nw={class:"text-sm font-medium text-gray-900 mb-1"},rw={key:0,class:"text-sm text-red-600 mt-1"},aw={key:1,class:"text-sm text-gray-700 mt-1"},iw={class:"px-8 py-6 bg-gray-50 border-t border-gray-200 flex justify-between"},lw={key:1},dw={class:"flex space-x-3"},uw=["disabled"],cw={key:0,class:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",fill:"none",viewBox:"0 0 24 24"},pw={key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4"},mw={class:"bg-white rounded-lg max-w-4xl w-full max-h-[90vh] overflow-hidden"},gw={class:"p-6 overflow-y-auto max-h-[70vh]"},fw={class:"space-y-6"},vw={key:0,class:"border border-gray-200 rounded-lg p-4"},hw={class:"flex items-center justify-between mb-3"},yw={class:"flex space-x-2"},xw=["disabled"],bw={key:0},ww={key:1},kw={class:"text-sm text-gray-600"},_w={key:1,class:"border border-gray-200 rounded-lg p-4"},$w={class:"flex items-center justify-between mb-3"},Sw={class:"flex space-x-2"},Dw=["disabled"],Cw={key:0},Tw={key:1},Ew={class:"text-sm text-gray-600"},Aw={key:2,class:"border border-gray-200 rounded-lg p-4"},Iw={class:"flex items-center justify-between mb-3"},Mw={class:"flex space-x-2"},Rw=["disabled"],Pw={key:0},jw={key:1},Nw={class:"text-sm text-gray-600"},Lw={key:3},Bw={class:"space-y-3"},Vw={class:"flex items-center justify-between mb-2"},Uw={class:"text-sm font-medium text-gray-800"},Fw={class:"flex space-x-2"},Ow=["onClick"],zw=["onClick","disabled"],Hw={key:0},qw={key:1},Gw={class:"text-xs text-gray-600"},Ww={key:4,class:"text-center py-8"},Jw={key:1,class:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50 p-4"},Yw={class:"bg-white rounded-lg max-w-6xl w-full max-h-[95vh] overflow-hidden"},Kw={class:"flex items-center justify-between p-4 border-b border-gray-200"},Xw={class:"text-lg font-semibold text-gray-900"},Zw={class:"flex items-center space-x-2"},Qw=["disabled"],e4={key:0},t4={key:1},o4={class:"p-4 overflow-auto max-h-[85vh]"},s4=["src"],n4=["src","alt"],r4={__name:"EditTemple",setup(t){const o=Ke(),s=Ze(),n=je(),r=V(1),i=V(!1),a=V(!0),l=V(null),d=V(!1),c=V(!1),u=V(""),p=V(""),v=Je({registration:!1,trustDeed:!1,property:!1,viewer:!1}),g=Je({registration:"",trustDeed:"",property:"",additional:[]}),h=Je({name:"",mainDeity:"",templeType:"",establishedYear:"",phone:"",email:"",description:"",streetAddress:"",city:"",state:"",district:"",pincode:"",landmark:"",mapLink:"",documents:{registration:null,trustDeed:null,property:null,additional:[]},status:"PENDING",rejectionReason:"",adminNotes:""}),D=Je({registration:"",trustDeed:"",property:"",additional:[]}),C=Je({registration:"",trustDeed:"",property:"",additional:[]}),B=(ue,$="success")=>{try{$==="success"&&n.success?n.success(ue):$==="error"&&n.error?n.error(ue):n.addToast?n.addToast({content:ue,type:$}):console.log($.toUpperCase(),ue)}catch(w){console.error("Toast error",w),$==="error"&&alert(ue)}},_=te(()=>s.params.id),T=te(()=>{switch((h.status||"").toUpperCase()){case"APPROVED":return"text-green-600 font-medium";case"PENDING":return"text-yellow-600 font-medium";case"REJECTED":return"text-red-600 font-medium";default:return"text-gray-600"}}),S=te(()=>!!(C.registration||C.trustDeed||C.property||C.additional&&C.additional.length>0)),k=te(()=>{const ue=(u.value||"").toLowerCase();return ue.includes(".pdf")||ue.includes("application/pdf")||ue.startsWith("blob:")&&p.value.toLowerCase().includes("pdf")}),b=ue=>((ue||"").trim()||"document").replace(/[\\/:*?"<>|\u0000-\u001F]/g,"_").slice(0,200),x=ue=>{if(!ue)return"";const $=/filename\*\s*=\s*([^;]+)/i.exec(ue);if($){let R=$[1].trim().replace(/^"+|"+$/g,"");R.toLowerCase().startsWith("utf-8''")&&(R=R.substring(7));try{return b(decodeURIComponent(R))}catch{return b(R)}}const w=/filename\s*=\s*("?)([^";]+)\1/i.exec(ue);return w&&w[2]?b(w[2]):""},F=ue=>{try{const w=new URL(ue,window.location.origin).pathname.split("/").filter(Boolean).pop()||"";return b(decodeURIComponent(w))}catch{const w=(ue||"").split("?")[0].split("#")[0].split("/").filter(Boolean).pop()||"";try{return b(decodeURIComponent(w))}catch{return b(w)}}},E=(ue,$,w)=>b(x(w)||ue||F($)||"document"),O=ue=>{if(!ue)return"";let $=String(ue);if($.includes("/files/")&&($=$.replace(/\/files\//g,"/")),$.startsWith("http://")||$.startsWith("https://")){if($.includes("://localhost:8080/")&&!/\/(uploads|api|public)\//.test($)){const R=$.split("://localhost:8080/");if(R.length===2){const A=R[1];A.startsWith("uploads/")||($=`${R[0]}://localhost:8080/uploads/${A}`)}}return $}let w;return $.startsWith("/uploads/")?w=$:$.startsWith("uploads/")?w=`/${$}`:$.startsWith("/")?w=`/uploads${$}`:w=`/uploads/${$}`,`http://localhost:8080${w}`},N=(ue,$)=>{const w=O(ue);if(!w){B("Document URL not available","error");return}u.value=w,p.value=$||"Document",c.value=!0},L=(ue,$,w)=>{if(!ue){B("No file selected","error");return}g[w]||(g[w]=URL.createObjectURL(ue)),u.value=g[w],p.value=$||ue.name,c.value=!0},M=ue=>{var w;const $=(w=h.documents.additional)==null?void 0:w[ue];$&&(g.additional[ue]||(g.additional[ue]=URL.createObjectURL($)),u.value=g.additional[ue],p.value=`Additional Document ${ue+1}`,c.value=!0)},X=async()=>{try{v.viewer=!0;const ue=u.value,$=b((p.value||"document").replace(/\s+/g,"-"));if(ue.startsWith("blob:")){const w=document.createElement("a");w.href=ue,w.download=$,document.body.appendChild(w),w.click(),w.remove(),B("Document download started");return}await oe(ue,$,"viewer")}catch{B("Failed to download from viewer","error")}finally{v.viewer=!1}},ee=(ue,$="document")=>{if(!ue)return;const w=URL.createObjectURL(ue),R=document.createElement("a");R.href=w,R.download=b(ue.name||`${$}`),document.body.appendChild(R),R.click(),R.remove(),setTimeout(()=>URL.revokeObjectURL(w),0),B("Document download started")},oe=async(ue,$,w)=>{const R=O(ue);if(!R){B("Document URL not available","error");return}try{v[w]=!0}catch{}try{const A=localStorage.getItem("auth_token")||localStorage.getItem("authToken")||"",j=await fetch(R,{method:"GET",headers:{...A?{Authorization:`Bearer ${A}`}:{},Accept:"*/*"},credentials:"include"});if(!j.ok)throw new Error(`HTTP ${j.status}`);const ne=j.headers.get("Content-Disposition")||j.headers.get("content-disposition")||"",K=await j.blob(),q=E(`${$}`,R,ne),le=URL.createObjectURL(K),se=document.createElement("a");se.href=le,se.download=q,document.body.appendChild(se),se.click(),se.remove(),setTimeout(()=>URL.revokeObjectURL(le),0),B("Document downloaded successfully!"),v[w]=!1;return}catch(A){console.log("Blob download failed, falling back",A)}try{const A=document.createElement("a");A.href=R,A.download=b(`${$}`),A.target="_blank",document.body.appendChild(A),A.click(),A.remove(),B("Document download initiated"),v[w]=!1;return}catch(A){console.log("Direct link failed, trying iframe",A)}try{const A=document.createElement("iframe");A.style.display="none",A.src=R,document.body.appendChild(A),setTimeout(()=>{document.body.contains(A)&&document.body.removeChild(A)},5e3),B("Download attempted via alternative method")}catch(A){console.log("Iframe fallback failed, opening new tab",A),window.open(R,"_blank","noopener,noreferrer"),B("Opened in a new tab; use Save As")}finally{try{v[w]=!1}catch{}}},ae=ue=>{if(ue)try{URL.revokeObjectURL(ue)}catch{}},H=(ue,$)=>{const w=Array.from(ue.target.files||[]);$==="additional"?(h.documents.additional=w,g.additional.forEach(R=>ae(R)),g.additional=w.map(R=>URL.createObjectURL(R))):(h.documents[$]=w[0]||null,g[$]&&ae(g[$]),g[$]=h.documents[$]?URL.createObjectURL(h.documents[$]):"")},J=()=>{I()&&r.value++},z=()=>{r.value--},I=()=>{if(r.value===1){if(["name","mainDeity","templeType","phone"].filter(w=>!(h[w]||"").toString().trim()).length)return B("Please fill in all required fields","error"),!1}else if(r.value===2){if(["streetAddress","city","state","district","pincode"].filter(w=>!(h[w]||"").toString().trim()).length)return B("Please fill in all required address fields","error"),!1;if(!/^\d{6}$/.test(h.pincode||""))return B("PIN Code must be a 6-digit number","error"),!1}return!0},P=async()=>{if(I())try{i.value=!0;let ue=null;h.establishedYear&&!isNaN(parseInt(h.establishedYear))&&(ue=parseInt(h.establishedYear));const $={id:parseInt(_.value),name:(h.name||"").trim(),maindeity:(h.mainDeity||"").trim(),templetype:(h.templeType||"").trim(),establishedyear:ue,phone:(h.phone||"").trim(),email:(h.email||"").trim(),description:(h.description||"").trim(),streetaddress:(h.streetAddress||"").trim(),city:(h.city||"").trim(),state:(h.state||"").trim(),district:(h.district||"").trim(),pincode:(h.pincode||"").trim(),landmark:(h.landmark||"").trim(),maplink:(h.mapLink||"").trim()};await it.updateTemple(_.value,$),B("Temple information updated successfully!"),o.push("/tenant/dashboard")}catch(ue){console.error("Failed to update temple",ue);const $=typeof ue=="object"&&ue.message||"Failed to update temple information. Please try again.";B($,"error")}finally{i.value=!1}},W=(ue,$)=>{for(const w of $)if(ue&&typeof ue[w]=="string"&&ue[w])return ue[w];return""},we=async()=>{a.value=!0,l.value=null;try{const ue=await it.getTempleById(_.value),$=(ue==null?void 0:ue.data)||ue||{};h.name=$.name||$.Name||"",h.mainDeity=$.maindeity||$.mainDeity||$.MainDeity||"",h.templeType=$.templetype||$.templeType||$.TempleType||"",h.establishedYear=$.establishedyear||$.establishedYear||$.EstablishedYear||"",h.phone=$.phone||$.Phone||"",h.email=$.email||$.Email||"",h.description=$.description||$.Description||"",h.streetAddress=$.streetaddress||$.streetAddress||$.Address||"",h.city=$.city||$.City||"",h.state=$.state||$.State||"",h.district=$.district||$.District||"",h.pincode=$.pincode||$.Pincode||"",h.landmark=$.landmark||$.Landmark||"",h.mapLink=$.maplink||$.mapLink||"",h.status=($.status||$.Status||"PENDING").toString().toUpperCase(),h.rejectionReason=$.rejectionReason||$.RejectionReason||"",h.adminNotes=$.adminNotes||$.AdminNotes||"",D.registration=$.registrationCertName||$.registration_cert_name||$.registration_certificate_name||"",D.trustDeed=$.trustDeedName||$.trust_deed_name||"",D.property=$.propertyDocsName||$.property_docs_name||"",D.additional=Array.isArray($.additionalDocsNames||$.additional_docs_names)?$.additionalDocsNames||$.additional_docs_names:[];const w=(A,j)=>{const ne=W(A,j);return O(ne)};C.registration=w($,["registrationCertUrl","registration_cert_url","registrationUrl","registration_url","registrationCert","registration_cert"]),C.trustDeed=w($,["trustDeedUrl","trust_deed_url","trustDeed","trust_deed"]),C.property=w($,["propertyDocsUrl","property_docs_url","propertyUrl","property_url","propertyDocs","property_docs"]);const R=$.additionalDocuments||$.additional_documents||$.additionalDocs||$.additional_docs||[];C.additional=Array.isArray(R)?R.map(A=>{if(typeof A=="string")return O(A);if(A&&typeof A=="object"){const j=A.url||A.fileUrl||A.downloadUrl||A.path||"";return O(j)}return""}).filter(Boolean):[],!D.registration&&C.registration&&(D.registration=F(C.registration)),!D.trustDeed&&C.trustDeed&&(D.trustDeed=F(C.trustDeed)),!D.property&&C.property&&(D.property=F(C.property)),D.additional.length===0&&C.additional.length>0&&(D.additional=C.additional.map(A=>F(A))),a.value=!1}catch(ue){console.error("Failed to load temple data",ue),l.value=ue&&ue.message?ue.message:"Unable to load details",a.value=!1}},me=()=>{d.value=!1},De=()=>{c.value=!1,u.value="",p.value=""},ge=()=>{try{["registration","trustDeed","property"].forEach(ue=>ae(g[ue])),Array.isArray(g.additional)&&g.additional.forEach(ue=>ae(ue))}catch{}};return Ee(async()=>{await we()}),xa(()=>{ge()}),(ue,$)=>{const w=He("router-link");return m(),f("div",Nx,[e("div",Lx,[e("div",Bx,[e("div",Vx,[e("div",null,[e("nav",Ux,[re(w,{to:"/tenant/dashboard",class:"hover:text-indigo-600"},{default:fe(()=>[...$[37]||($[37]=[Q("Dashboard",-1)])]),_:1}),$[39]||($[39]=e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1)),re(w,{to:"/tenant/entities",class:"hover:text-indigo-600"},{default:fe(()=>[...$[38]||($[38]=[Q("Manage Temples",-1)])]),_:1}),$[40]||($[40]=e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1)),$[41]||($[41]=e("span",{class:"text-gray-900"},"Edit Temple",-1))]),$[42]||($[42]=e("h1",{class:"text-2xl font-bold text-gray-900"},"Edit Temple",-1)),$[43]||($[43]=e("p",{class:"text-gray-600 mt-1"},"Update temple information",-1))])])])]),e("div",Fx,[e("div",Ox,[e("div",zx,[e("span",Hx,"Step "+y(r.value)+" of 3",1),e("span",qx,y(Math.round(r.value/3*100))+"% Complete",1)]),e("div",Gx,[e("div",{class:"bg-indigo-600 h-2 rounded-full transition-all duration-300",style:Pt({width:`${r.value/3*100}%`})},null,4)])]),a.value?(m(),f("div",Wx,[...$[44]||($[44]=[e("div",{class:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-indigo-600"},null,-1),e("span",{class:"ml-3 text-gray-600"},"Loading temple data...",-1)])])):l.value?(m(),f("div",Jx,[$[45]||($[45]=e("svg",{class:"w-12 h-12 text-red-500 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})],-1)),$[46]||($[46]=e("h3",{class:"text-lg font-medium text-red-800 mb-2"},"Failed to load temple data",-1)),e("p",Yx,y(l.value),1),e("button",{onClick:we,class:"inline-flex items-center px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700"}," Try Again ")])):(m(),f("form",{key:2,class:"bg-white rounded-2xl shadow-sm border border-gray-200 overflow-hidden",onSubmit:Oe(P,["prevent"])},[de(e("div",Kx,[$[55]||($[55]=e("div",{class:"mb-6"},[e("h2",{class:"text-xl font-bold text-gray-900 mb-2"},"Temple Basic Information"),e("p",{class:"text-gray-600"},"Update the essential details about the temple")],-1)),e("div",Xx,[e("div",Zx,[$[47]||($[47]=e("label",{for:"templeName",class:"block text-sm font-medium text-gray-700 mb-2"},"Temple Name",-1)),de(e("input",{id:"templeName","onUpdate:modelValue":$[0]||($[0]=R=>h.name=R),type:"text",required:"",class:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-colors duration-200",placeholder:"Enter temple name"},null,512),[[xe,h.name]])]),e("div",null,[$[48]||($[48]=e("label",{for:"deity",class:"block text-sm font-medium text-gray-700 mb-2"},"Main Deity",-1)),de(e("input",{id:"deity","onUpdate:modelValue":$[1]||($[1]=R=>h.mainDeity=R),type:"text",required:"",class:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-colors duration-200",placeholder:"e.g., Lord Vishnu, Goddess Lakshmi"},null,512),[[xe,h.mainDeity]])]),e("div",null,[$[50]||($[50]=e("label",{for:"templeType",class:"block text-sm font-medium text-gray-700 mb-2"},"Temple Type",-1)),de(e("select",{id:"templeType","onUpdate:modelValue":$[2]||($[2]=R=>h.templeType=R),required:"",class:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-colors duration-200"},[...$[49]||($[49]=[$e('<option value="">Select temple type</option><option value="traditional">Traditional</option><option value="modern">Modern</option><option value="heritage">Heritage</option><option value="community">Community</option>',5)])],512),[[Ce,h.templeType]])]),e("div",null,[$[51]||($[51]=e("label",{for:"establishedYear",class:"block text-sm font-medium text-gray-700 mb-2"},"Established Year",-1)),de(e("input",{id:"establishedYear","onUpdate:modelValue":$[3]||($[3]=R=>h.establishedYear=R),type:"number",min:1800,max:new Date().getFullYear(),class:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-colors duration-200",placeholder:"YYYY"},null,8,Qx),[[xe,h.establishedYear]])]),e("div",null,[$[52]||($[52]=e("label",{for:"phone",class:"block text-sm font-medium text-gray-700 mb-2"},"Contact Phone",-1)),de(e("input",{id:"phone","onUpdate:modelValue":$[4]||($[4]=R=>h.phone=R),type:"tel",required:"",class:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-colors duration-200",placeholder:"+91 XXXXX XXXXX"},null,512),[[xe,h.phone]])]),e("div",eb,[$[53]||($[53]=e("label",{for:"email",class:"block text-sm font-medium text-gray-700 mb-2"},"Temple Email",-1)),de(e("input",{id:"email","onUpdate:modelValue":$[5]||($[5]=R=>h.email=R),type:"email",class:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-colors duration-200",placeholder:"temple@example.com"},null,512),[[xe,h.email]])]),e("div",tb,[$[54]||($[54]=e("label",{for:"description",class:"block text-sm font-medium text-gray-700 mb-2"},"Temple Description",-1)),de(e("textarea",{id:"description","onUpdate:modelValue":$[6]||($[6]=R=>h.description=R),rows:"4",class:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-colors duration-200",placeholder:"Brief description of the temple, its history, and significance..."},null,512),[[xe,h.description]])])])],512),[[us,r.value===1]]),de(e("div",ob,[$[64]||($[64]=e("div",{class:"mb-6"},[e("h2",{class:"text-xl font-bold text-gray-900 mb-2"},"Temple Address"),e("p",{class:"text-gray-600"},"Update the complete address details")],-1)),e("div",sb,[e("div",nb,[$[56]||($[56]=e("label",{for:"address",class:"block text-sm font-medium text-gray-700 mb-2"},"Street Address",-1)),de(e("input",{id:"address","onUpdate:modelValue":$[7]||($[7]=R=>h.streetAddress=R),type:"text",required:"",class:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-colors duration-200",placeholder:"Enter complete street address"},null,512),[[xe,h.streetAddress]])]),e("div",null,[$[57]||($[57]=e("label",{for:"city",class:"block text-sm font-medium text-gray-700 mb-2"},"City",-1)),de(e("input",{id:"city","onUpdate:modelValue":$[8]||($[8]=R=>h.city=R),type:"text",required:"",class:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-colors duration-200",placeholder:"Enter city name"},null,512),[[xe,h.city]])]),e("div",null,[$[59]||($[59]=e("label",{for:"state",class:"block text-sm font-medium text-gray-700 mb-2"},"State",-1)),de(e("select",{id:"state","onUpdate:modelValue":$[9]||($[9]=R=>h.state=R),required:"",class:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-colors duration-200"},[...$[58]||($[58]=[$e('<option value="">Select state</option><option value="Karnataka">Karnataka</option><option value="Tamil Nadu">Tamil Nadu</option><option value="Andhra Pradesh">Andhra Pradesh</option><option value="Kerala">Kerala</option><option value="Maharashtra">Maharashtra</option><option value="Gujarat">Gujarat</option><option value="Rajasthan">Rajasthan</option><option value="Uttar Pradesh">Uttar Pradesh</option><option value="West Bengal">West Bengal</option><option value="Odisha">Odisha</option>',11)])],512),[[Ce,h.state]])]),e("div",null,[$[60]||($[60]=e("label",{for:"district",class:"block text-sm font-medium text-gray-700 mb-2"},"District",-1)),de(e("input",{id:"district","onUpdate:modelValue":$[10]||($[10]=R=>h.district=R),type:"text",required:"",class:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-colors duration-200",placeholder:"Enter district name"},null,512),[[xe,h.district]])]),e("div",null,[$[61]||($[61]=e("label",{for:"pinCode",class:"block text-sm font-medium text-gray-700 mb-2"},"PIN Code",-1)),de(e("input",{id:"pinCode","onUpdate:modelValue":$[11]||($[11]=R=>h.pincode=R),type:"text",pattern:"[0-9]{6}",required:"",class:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-colors duration-200",placeholder:"Enter 6-digit PIN code"},null,512),[[xe,h.pincode]])]),e("div",rb,[$[62]||($[62]=e("label",{for:"landmark",class:"block text-sm font-medium text-gray-700 mb-2"},"Landmark (Optional)",-1)),de(e("input",{id:"landmark","onUpdate:modelValue":$[12]||($[12]=R=>h.landmark=R),type:"text",class:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-colors duration-200",placeholder:"Nearby landmark for easy identification"},null,512),[[xe,h.landmark]])]),e("div",ab,[$[63]||($[63]=e("label",{for:"googleMapsLink",class:"block text-sm font-medium text-gray-700 mb-2"},"Google Maps Link (Optional)",-1)),de(e("input",{id:"googleMapsLink","onUpdate:modelValue":$[13]||($[13]=R=>h.mapLink=R),type:"url",class:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-colors duration-200",placeholder:"https://maps.google.com/..."},null,512),[[xe,h.mapLink]])])])],512),[[us,r.value===2]]),de(e("div",ib,[e("div",lb,[$[66]||($[66]=e("div",null,[e("h2",{class:"text-xl font-bold text-gray-900 mb-2"},"Update Documents"),e("p",{class:"text-gray-600"},"Upload or update temple verification documents")],-1)),S.value?(m(),f("button",{key:0,type:"button",onClick:$[14]||($[14]=R=>d.value=!0),class:"inline-flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors duration-200"},[...$[65]||($[65]=[e("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})],-1),Q(" View Stored Documents ",-1)])])):Y("",!0)]),e("div",db,[e("div",ub,[e("div",cb,[$[67]||($[67]=e("svg",{class:"w-12 h-12 text-gray-400 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1)),$[68]||($[68]=e("h3",{class:"text-lg font-medium text-gray-900 mb-2"},"Registration Certificate",-1)),$[69]||($[69]=e("p",{class:"text-gray-600 mb-4"},"Upload temple registration certificate",-1)),e("div",pb,[e("label",mb,[e("span",null,y(D.registration?"Replace File":"Choose File"),1),e("input",{type:"file",class:"hidden",accept:".pdf,.jpg,.jpeg,.png",onChange:$[15]||($[15]=R=>H(R,"registration"))},null,32)]),h.documents.registration?(m(),f("div",gb,[e("p",fb,y(h.documents.registration.name),1),e("button",{type:"button",onClick:$[16]||($[16]=R=>L(h.documents.registration,"Registration Certificate","registration")),class:"text-xs bg-blue-100 text-blue-700 px-2 py-1 rounded hover:bg-blue-200"}," View "),e("button",{type:"button",onClick:$[17]||($[17]=R=>ee(h.documents.registration,"registration-certificate")),class:"text-xs bg-green-100 text-green-700 px-2 py-1 rounded hover:bg-green-200"}," Download ")])):D.registration?(m(),f("div",vb,[e("p",hb,"Current: "+y(D.registration),1),C.registration?(m(),f("button",{key:0,type:"button",onClick:$[18]||($[18]=R=>N(C.registration,"Registration Certificate")),class:"text-xs bg-blue-100 text-blue-700 px-2 py-1 rounded hover:bg-blue-200"}," View ")):Y("",!0),C.registration?(m(),f("button",{key:1,type:"button",disabled:v.registration,onClick:$[19]||($[19]=R=>oe(C.registration,"registration-certificate","registration")),class:"text-xs bg-green-100 text-green-700 px-2 py-1 rounded hover:bg-green-200 disabled:opacity-50 disabled:cursor-not-allowed"},[v.registration?(m(),f("span",xb,"Downloading...")):(m(),f("span",bb,"Download"))],8,yb)):Y("",!0)])):Y("",!0)])])]),e("div",wb,[e("div",kb,[$[70]||($[70]=e("svg",{class:"w-12 h-12 text-gray-400 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1)),$[71]||($[71]=e("h3",{class:"text-lg font-medium text-gray-900 mb-2"},"Trust Deed",-1)),$[72]||($[72]=e("p",{class:"text-gray-600 mb-4"},"Upload temple trust deed document",-1)),e("div",_b,[e("label",$b,[e("span",null,y(D.trustDeed?"Replace File":"Choose File"),1),e("input",{type:"file",class:"hidden",accept:".pdf,.jpg,.jpeg,.png",onChange:$[20]||($[20]=R=>H(R,"trustDeed"))},null,32)]),h.documents.trustDeed?(m(),f("div",Sb,[e("p",Db,y(h.documents.trustDeed.name),1),e("button",{type:"button",onClick:$[21]||($[21]=R=>L(h.documents.trustDeed,"Trust Deed","trustDeed")),class:"text-xs bg-blue-100 text-blue-700 px-2 py-1 rounded hover:bg-blue-200"}," View "),e("button",{type:"button",onClick:$[22]||($[22]=R=>ee(h.documents.trustDeed,"trust-deed")),class:"text-xs bg-green-100 text-green-700 px-2 py-1 rounded hover:bg-green-200"}," Download ")])):D.trustDeed?(m(),f("div",Cb,[e("p",Tb,"Current: "+y(D.trustDeed),1),C.trustDeed?(m(),f("button",{key:0,type:"button",onClick:$[23]||($[23]=R=>N(C.trustDeed,"Trust Deed")),class:"text-xs bg-blue-100 text-blue-700 px-2 py-1 rounded hover:bg-blue-200"}," View ")):Y("",!0),C.trustDeed?(m(),f("button",{key:1,type:"button",disabled:v.trustDeed,onClick:$[24]||($[24]=R=>oe(C.trustDeed,"trust-deed","trustDeed")),class:"text-xs bg-green-100 text-green-700 px-2 py-1 rounded hover:bg-green-200 disabled:opacity-50 disabled:cursor-not-allowed"},[v.trustDeed?(m(),f("span",Ab,"Downloading...")):(m(),f("span",Ib,"Download"))],8,Eb)):Y("",!0)])):Y("",!0)])])]),e("div",Mb,[e("div",Rb,[$[73]||($[73]=$e('<svg class="w-12 h-12 text-gray-400 mx-auto mb-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2H5a2 2 0 01-2-2z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 5a2 2 0 012-2h4a2 2 0 012 2v2H8V5z"></path></svg><h3 class="text-lg font-medium text-gray-900 mb-2">Property Documents</h3><p class="text-gray-600 mb-4">Upload property ownership documents (Optional)</p>',3)),e("div",Pb,[e("label",jb,[e("span",null,y(D.property?"Replace File":"Choose File"),1),e("input",{type:"file",class:"hidden",accept:".pdf,.jpg,.jpeg,.png",onChange:$[25]||($[25]=R=>H(R,"property"))},null,32)]),h.documents.property?(m(),f("div",Nb,[e("p",Lb,y(h.documents.property.name),1),e("button",{type:"button",onClick:$[26]||($[26]=R=>L(h.documents.property,"Property Documents","property")),class:"text-xs bg-blue-100 text-blue-700 px-2 py-1 rounded hover:bg-blue-200"}," View "),e("button",{type:"button",onClick:$[27]||($[27]=R=>ee(h.documents.property,"property-documents")),class:"text-xs bg-green-100 text-green-700 px-2 py-1 rounded hover:bg-green-200"}," Download ")])):D.property?(m(),f("div",Bb,[e("p",Vb,"Current: "+y(D.property),1),C.property?(m(),f("button",{key:0,type:"button",onClick:$[28]||($[28]=R=>N(C.property,"Property Documents")),class:"text-xs bg-blue-100 text-blue-700 px-2 py-1 rounded hover:bg-blue-200"}," View ")):Y("",!0),C.property?(m(),f("button",{key:1,type:"button",disabled:v.property,onClick:$[29]||($[29]=R=>oe(C.property,"property-documents","property")),class:"text-xs bg-green-100 text-green-700 px-2 py-1 rounded hover:bg-green-200 disabled:opacity-50 disabled:cursor-not-allowed"},[v.property?(m(),f("span",Fb,"Downloading...")):(m(),f("span",Ob,"Download"))],8,Ub)):Y("",!0)])):Y("",!0)])])]),e("div",zb,[e("div",Hb,[$[74]||($[74]=e("svg",{class:"w-12 h-12 text-gray-400 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15.172 7l-6.586 6.586a2 2 0 102.828 2.828l6.414-6.586a4 4 0 00-5.656-5.656l-6.415 6.585a6 6 0 108.486 8.486L20.5 13"})],-1)),$[75]||($[75]=e("h3",{class:"text-lg font-medium text-gray-900 mb-2"},"Additional Documents",-1)),$[76]||($[76]=e("p",{class:"text-gray-600 mb-4"},"Upload any additional supporting documents (Optional)",-1)),e("div",qb,[e("label",Gb,[e("span",null,y(D.additional&&D.additional.length>0?"Add More Files":"Choose Files"),1),e("input",{type:"file",class:"hidden",accept:".pdf,.jpg,.jpeg,.png",multiple:"",onChange:$[30]||($[30]=R=>H(R,"additional"))},null,32)]),h.documents.additional&&h.documents.additional.length>0?(m(),f("div",Wb,[(m(!0),f(he,null,ke(h.documents.additional,(R,A)=>(m(),f("p",{key:`new-${A}`,class:"text-sm text-green-600 flex items-center justify-center space-x-2 mt-1"},[e("span",null,y(R.name),1),e("button",{type:"button",onClick:j=>M(A),class:"text-xs bg-blue-100 text-blue-700 px-2 py-1 rounded hover:bg-blue-200"}," View ",8,Jb),e("button",{type:"button",onClick:j=>ee(R,`additional-document-${A+1}`),class:"text-xs bg-green-100 text-green-700 px-2 py-1 rounded hover:bg-green-200"}," Download ",8,Yb)]))),128))])):Y("",!0),D.additional&&D.additional.length>0?(m(),f("div",Kb,[(m(!0),f(he,null,ke(D.additional,(R,A)=>(m(),f("div",{key:`existing-${A}`,class:"flex items-center justify-center space-x-2 mt-1"},[e("p",Xb,"Current: "+y(R),1),C.additional&&C.additional[A]?(m(),f("button",{key:0,type:"button",onClick:j=>N(C.additional[A],`Additional Document ${A+1}`),class:"text-xs bg-blue-100 text-blue-700 px-2 py-1 rounded hover:bg-blue-200"}," View ",8,Zb)):Y("",!0),C.additional&&C.additional[A]?(m(),f("button",{key:1,type:"button",disabled:v[`additional-${A}`],onClick:j=>oe(C.additional[A],`additional-document-${A+1}`,`additional-${A}`),class:"text-xs bg-green-100 text-green-700 px-2 py-1 rounded hover:bg-green-200 disabled:opacity-50 disabled:cursor-not-allowed"},[v[`additional-${A}`]?(m(),f("span",ew,"Downloading...")):(m(),f("span",tw,"Download"))],8,Qb)):Y("",!0)]))),128))])):Y("",!0)])])]),e("div",ow,[e("div",sw,[$[80]||($[80]=e("svg",{class:"w-5 h-5 text-gray-600 mt-0.5 mr-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),e("div",null,[e("h3",nw,[$[77]||($[77]=Q("Current Status: ",-1)),e("span",{class:ie(T.value)},y(h.status||"PENDING"),3)]),h.rejectionReason?(m(),f("p",rw,[$[78]||($[78]=e("strong",null,"Rejection Reason",-1)),Q(": "+y(h.rejectionReason),1)])):Y("",!0),h.adminNotes?(m(),f("p",aw,[$[79]||($[79]=e("strong",null,"Admin Notes",-1)),Q(": "+y(h.adminNotes),1)])):Y("",!0)])])])])],512),[[us,r.value===3]]),e("div",iw,[r.value>1?(m(),f("button",{key:0,type:"button",onClick:z,class:"inline-flex items-center px-6 py-3 border border-gray-300 rounded-lg text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 transition-colors duration-200"},[...$[81]||($[81]=[e("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 19l-7-7 7-7"})],-1),Q(" Previous ",-1)])])):(m(),f("div",lw)),e("div",dw,[re(w,{to:"/tenant/entities",class:"inline-flex items-center px-6 py-3 border border-gray-300 rounded-lg text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 transition-colors duration-200"},{default:fe(()=>[...$[82]||($[82]=[Q(" Cancel ",-1)])]),_:1}),r.value<3?(m(),f("button",{key:0,type:"button",onClick:J,class:"inline-flex items-center px-6 py-3 bg-indigo-600 text-white rounded-lg text-sm font-medium hover:bg-indigo-700 transition-colors duration-200"},[...$[83]||($[83]=[Q(" Next ",-1),e("svg",{class:"w-4 h-4 ml-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})],-1)])])):(m(),f("button",{key:1,type:"submit",disabled:i.value,class:"inline-flex items-center px-6 py-3 bg-indigo-600 text-white rounded-lg text-sm font-medium hover:bg-indigo-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200"},[i.value?(m(),f("svg",cw,[...$[84]||($[84]=[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)])])):Y("",!0),Q(" "+y(i.value?"Saving Changes...":"Update Temple"),1)],8,uw))])])],32)),$[85]||($[85]=$e('<div class="mt-8 bg-blue-50 border border-blue-200 rounded-lg p-6"><div class="flex items-start"><svg class="w-6 h-6 text-blue-600 mt-0.5 mr-3 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg><div><h3 class="text-sm font-medium text-blue-800 mb-1">Need Help?</h3><p class="text-sm text-blue-700"> For assistance with updating temple information, contact support. </p></div></div></div>',1))]),d.value?(m(),f("div",pw,[e("div",mw,[e("div",{class:"flex items-center justify-between p-6 border-b border-gray-200"},[$[87]||($[87]=e("h3",{class:"text-lg font-semibold text-gray-900"},"Temple Documents",-1)),e("button",{onClick:me,class:"text-gray-400 hover:text-gray-600 transition-colors"},[...$[86]||($[86]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),e("div",gw,[e("div",fw,[C.registration?(m(),f("div",vw,[e("div",hw,[$[88]||($[88]=e("h4",{class:"text-md font-medium text-gray-900"},"Registration Certificate",-1)),e("div",yw,[e("button",{onClick:$[31]||($[31]=R=>N(C.registration,"Registration Certificate")),class:"text-sm bg-blue-100 text-blue-700 px-3 py-1 rounded hover:bg-blue-200 transition-colors"}," View "),e("button",{onClick:$[32]||($[32]=R=>oe(C.registration,"registration-certificate","registration")),disabled:v.registration,class:"text-sm bg-green-100 text-green-700 px-3 py-1 rounded hover:bg-green-200 transition-colors disabled:opacity-50 disabled:cursor-not-allowed"},[v.registration?(m(),f("span",bw,"Downloading...")):(m(),f("span",ww,"Download"))],8,xw)])]),e("p",kw,y(D.registration),1)])):Y("",!0),C.trustDeed?(m(),f("div",_w,[e("div",$w,[$[89]||($[89]=e("h4",{class:"text-md font-medium text-gray-900"},"Trust Deed",-1)),e("div",Sw,[e("button",{onClick:$[33]||($[33]=R=>N(C.trustDeed,"Trust Deed")),class:"text-sm bg-blue-100 text-blue-700 px-3 py-1 rounded hover:bg-blue-200 transition-colors"}," View "),e("button",{onClick:$[34]||($[34]=R=>oe(C.trustDeed,"trust-deed","trustDeed")),disabled:v.trustDeed,class:"text-sm bg-green-100 text-green-700 px-3 py-1 rounded hover:bg-green-200 transition-colors disabled:opacity-50 disabled:cursor-not-allowed"},[v.trustDeed?(m(),f("span",Cw,"Downloading...")):(m(),f("span",Tw,"Download"))],8,Dw)])]),e("p",Ew,y(D.trustDeed),1)])):Y("",!0),C.property?(m(),f("div",Aw,[e("div",Iw,[$[90]||($[90]=e("h4",{class:"text-md font-medium text-gray-900"},"Property Documents",-1)),e("div",Mw,[e("button",{onClick:$[35]||($[35]=R=>N(C.property,"Property Documents")),class:"text-sm bg-blue-100 text-blue-700 px-3 py-1 rounded hover:bg-blue-200 transition-colors"}," View "),e("button",{onClick:$[36]||($[36]=R=>oe(C.property,"property-documents","property")),disabled:v.property,class:"text-sm bg-green-100 text-green-700 px-3 py-1 rounded hover:bg-green-200 transition-colors disabled:opacity-50 disabled:cursor-not-allowed"},[v.property?(m(),f("span",Pw,"Downloading...")):(m(),f("span",jw,"Download"))],8,Rw)])]),e("p",Nw,y(D.property),1)])):Y("",!0),C.additional&&C.additional.length>0?(m(),f("div",Lw,[$[91]||($[91]=e("h4",{class:"text-md font-medium text-gray-900 mb-3"},"Additional Documents",-1)),e("div",Bw,[(m(!0),f(he,null,ke(C.additional,(R,A)=>(m(),f("div",{key:`additional-doc-${A}`,class:"border border-gray-200 rounded-lg p-4"},[e("div",Vw,[e("h5",Uw,"Additional Document "+y(A+1),1),e("div",Fw,[e("button",{onClick:j=>N(R,`Additional Document ${A+1}`),class:"text-xs bg-blue-100 text-blue-700 px-2 py-1 rounded hover:bg-blue-200 transition-colors"}," View ",8,Ow),e("button",{onClick:j=>oe(R,`additional-document-${A+1}`,`additional-${A}`),disabled:v[`additional-${A}`],class:"text-xs bg-green-100 text-green-700 px-2 py-1 rounded hover:bg-green-200 transition-colors disabled:opacity-50 disabled:cursor-not-allowed"},[v[`additional-${A}`]?(m(),f("span",Hw,"Downloading...")):(m(),f("span",qw,"Download"))],8,zw)])]),e("p",Gw,y(D.additional[A]),1)]))),128))])])):Y("",!0),S.value?Y("",!0):(m(),f("div",Ww,[...$[92]||($[92]=[e("svg",{class:"w-16 h-16 text-gray-300 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1),e("h3",{class:"text-lg font-medium text-gray-900 mb-2"},"No Documents Found",-1),e("p",{class:"text-gray-600"},"No documents have been uploaded for this temple yet.",-1)])]))])]),e("div",{class:"border-t border-gray-200 px-6 py-4"},[e("div",{class:"flex justify-end"},[e("button",{onClick:me,class:"px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors"}," Close ")])])])])):Y("",!0),c.value?(m(),f("div",Jw,[e("div",Yw,[e("div",Kw,[e("h3",Xw,y(p.value),1),e("div",Zw,[e("button",{onClick:X,disabled:v.viewer,class:"text-sm bg-green-100 text-green-700 px-3 py-2 rounded hover:bg-green-200 transition-colors disabled:opacity-50 disabled:cursor-not-allowed"},[v.viewer?(m(),f("span",e4,"Downloading...")):(m(),f("span",t4,"Download"))],8,Qw),e("button",{onClick:De,class:"text-gray-400 hover:text-gray-600 transition-colors"},[...$[93]||($[93]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])])]),e("div",o4,[k.value?(m(),f("iframe",{key:0,src:u.value,class:"w-full h-[75vh] border border-gray-300 rounded",type:"application/pdf"},null,8,s4)):(m(),f("img",{key:1,src:u.value,alt:p.value,class:"max-w-full h-auto mx-auto rounded border border-gray-300"},null,8,n4))])])])):Y("",!0)])}}};class a4{async getAllTenantDetails(){try{console.log(" Fetching all tenant details...");try{const o=await ce.get("/superadmin/tenant-details");return console.log(" Tenant details fetched successfully"),o.data}catch{return console.log(" New endpoint failed, trying fallback..."),(await ce.get("/superadmin/tenants")).data}}catch(o){throw console.error(" Error fetching tenant details:",o),o}}async getTenantDetailsById(o){if(!o)throw new Error("Tenant ID is required");try{console.log(` Fetching tenant details for ID: ${o}`);try{const s=await ce.get(`/superadmin/tenant-details/${o}`);return console.log(" Specific tenant details fetched successfully"),s.data}catch{console.log(" Specific endpoint failed, trying alternative...");const n=await ce.get("/entities",{params:{tenant_id:o},headers:{"X-Tenant-ID":o}});return{id:o,entities:n.data,temples:n.data}}}catch(s){throw console.error(` Error fetching tenant details for ${o}:`,s),s}}buildQueryParams(o){const s=new URLSearchParams;return o.dateRange&&s.append("date_range",o.dateRange),o.format&&s.append("format",o.format),o.status&&s.append("status",o.status),o.role&&["Tenant","Temple"].includes(o.role)&&s.append("role",o.role),o.dateRange==="custom"&&o.startDate&&o.endDate&&(s.append("start_date",o.startDate),s.append("end_date",o.endDate)),s}buildReportURL({isSuperAdmin:o,entityId:s,entityIds:n,endpoint:r,queryParams:i}){return r==="approval-status"?`/superadmin/reports/${r}?${i}`:r==="user-details"?`/superadmin/reports/${r}?${i}`:o?n&&n.length>1?`/superadmin/reports/${r}?${i}&entities=${n.join(",")}`:`/superadmin/entities/${s}/reports/${r}?${i}`:`/entities/${s}/reports/${r}?${i}`}async getApprovalStatusReport(o){const{entityId:s,entityIds:n,isSuperAdmin:r}=o;if(!s&&!n)throw new Error("Entity ID or Entity IDs are required");const i=this.buildQueryParams(o),a=this.buildReportURL({...o,endpoint:"approval-status",queryParams:i});return console.log(" Approval Status API request:",a),ce.get(a)}async downloadApprovalStatusReport(o){try{const{entityId:s,entityIds:n,format:r}=o;if(!s&&!n||!r)throw new Error("Entity ID (or IDs) and format are required");const i=this.buildQueryParams(o),a=this.buildReportURL({...o,endpoint:"approval-status",queryParams:i});return this.downloadReport(a,{format:r},"approval_status_report")}catch(s){throw console.error("Error downloading approval status report:",s),s}}async getApprovalStatusPreview(o){var i;const s=await this.getApprovalStatusReport(o),n=((i=s.data)==null?void 0:i.data)||s.data||[],r=[{key:"item_name",label:"Item Name"},{key:"item_type",label:"Type"},{key:"submitted_by",label:"Submitted By"},{key:"submitted_date",label:"Submitted Date"},{key:"status",label:"Status"},{key:"approved_by",label:"Approved By"},{key:"approval_date",label:"Approval Date"},{key:"comments",label:"Comments"}];return{data:Array.isArray(n)?n.map(a=>({...a,submitted_date:a.submitted_date?this.formatDate(a.submitted_date):"-",approval_date:a.approval_date?this.formatDate(a.approval_date):"-"})):[],columns:r,totalRecords:Array.isArray(n)?n.length:0}}async getUserDetailsReport(o){const{entityId:s,entityIds:n,role:r,status:i,dateRange:a="monthly",startDate:l,endDate:d,isSuperAdmin:c}=o;if(!s&&!n)throw new Error("Entity ID or Entity IDs are required");const u=new URLSearchParams({date_range:a});r&&r!=="all"&&u.append("role",r),i&&i!=="all"&&u.append("status",i),a==="custom"&&l&&d&&(u.append("start_date",l),u.append("end_date",d));let p;return c?n&&n.length>1?p=`/superadmin/reports/user-details?${u}&tenants=${n.join(",")}`:p=`/superadmin/reports/user-details?${u}&tenant_id=${s}`:p=`/superadmin/reports/user-details?${u}&tenant_id=${s}`,console.log(" User Details API request:",p),ce.get(p)}async getUserDetailsPreview(o){try{const s=await this.getUserDetailsReport(o);console.log("User Details preview response:",s);let n=s.data;n&&n.data&&(n=n.data);const r=[{key:"name",label:"User Name"},{key:"email",label:"Email"},{key:"entity_name",label:"Entity/Tenant"},{key:"role",label:"Role"},{key:"status",label:"Status"},{key:"created_at",label:"Created At"}];let i=[];return Array.isArray(n)?i=n:n&&n.user_details?i=n.user_details:n&&Array.isArray(n.data)?i=n.data:(console.warn(" No valid user details data found in response:",n),i=[]),i=i.map(a=>({...a,created_at:a.created_at?this.formatDate(a.created_at):"-"})),console.log(" Final preview data:",i),{data:i,columns:r,totalRecords:i.length||0}}catch(s){throw console.error(" Error getting user details preview:",s),s}}async downloadUserDetailsReport(o){const{entityId:s,entityIds:n,role:r,status:i,dateRange:a="monthly",startDate:l,endDate:d,format:c,isSuperAdmin:u}=o;if(!s&&!n||!c)throw new Error("Entity ID (or IDs) and format are required");const p=new URLSearchParams({date_range:a,format:c});if(r&&r!=="all"){const g=r==="tenant"?"templeadmin":r;p.append("role",g)}i&&i!=="all"&&p.append("status",i),a==="custom"&&l&&d&&(p.append("start_date",l),p.append("end_date",d));let v;u?n&&n.length>1?v=`/superadmin/reports/user-details?${p}&tenants=${n.join(",")}`:v=`/superadmin/reports/user-details?${p}&tenant_id=${s}`:v=`/superadmin/reports/user-details?${p}&tenant_id=${s}`;try{return console.log(" Downloading user details report:",v),await this.downloadReport(v,{format:c},"user_details_report",async()=>u?[n&&n.length>1?`/superadmin/user-details/report?${p}&tenants=${n.join(",")}`:`/superadmin/user-details/report?${p}&tenant_id=${s}`,n&&n.length>1?`/superadmin/entities/reports/user-details?${p}&tenants=${n.join(",")}`:`/entities/${s}/reports/user-details?${p}`]:null)}catch(g){throw console.error("Error downloading user details report:",g),g}}async getActivitiesReport(o){const{entityId:s,entityIds:n,type:r,dateRange:i="weekly",startDate:a,endDate:l,isSuperAdmin:d}=o;if(!s&&!n||!r)throw new Error("Entity ID (or IDs) and type are required");const c=new URLSearchParams({type:r,date_range:i});i==="custom"&&a&&l&&(c.append("start_date",a),c.append("end_date",l));let u,p;if(d)try{n&&n.length>1?u=`/superadmin/reports/activities?${c}&tenants=${n.join(",")}`:u=`/superadmin/tenants/${s}/reports/activities?${c}`,console.log("Making primary API request:",u),p=await ce.get(u)}catch(v){console.log("Primary API endpoint failed, trying fallback:",v.message);try{n&&n.length>1?u=`/superadmin/activities/report?${c}&tenants=${n.join(",")}`:u=`/superadmin/activities/report?${c}&tenant_id=${s}`,console.log("Making fallback API request:",u),p=await ce.get(u)}catch(g){console.log("Second fallback failed, trying third pattern:",g.message),n&&n.length>1?u=`/superadmin/entities/reports/activities?${c}&tenants=${n.join(",")}`:u=`/entities/${s}/reports/activities?${c}`,console.log("Making third fallback API request:",u),p=await ce.get(u)}}else u=`/entities/${s}/reports/activities?${c}`,console.log("Making API request:",u),p=await ce.get(u);return console.log("API Response received:",p),p}async downloadActivitiesReport(o){const{entityId:s,entityIds:n,type:r,format:i,dateRange:a="weekly",startDate:l,endDate:d,isSuperAdmin:c}=o;if(!s&&!n||!r||!i)throw new Error("Entity ID (or IDs), type, and format are required");const u=new URLSearchParams({type:r,date_range:a,format:i});a==="custom"&&l&&d&&(u.append("start_date",l),u.append("end_date",d));let p;c?n&&n.length>1?p=`/superadmin/reports/activities?${u}&tenants=${n.join(",")}`:p=`/superadmin/tenants/${s}/reports/activities?${u}`:p=`/entities/${s}/reports/activities?${u}`;try{return await this.downloadReport(p,{format:i},`${r}_report`,async()=>c?[n&&n.length>1?`/superadmin/activities/report?${u}&tenants=${n.join(",")}`:`/superadmin/activities/report?${u}&tenant_id=${s}`,n&&n.length>1?`/superadmin/entities/reports/activities?${u}&tenants=${n.join(",")}`:`/entities/${s}/reports/activities?${u}`]:null)}catch(v){throw console.error("Error downloading activities report:",v),v}}async getReportPreview(o){try{const s=await this.getActivitiesReport(o);console.log("API Response Structure:",s),console.log("Response Data:",s.data);let n=s.data;n&&n.data&&(n=n.data),n||(console.warn("No data found in response"),n={});let r=[],i=[];switch(o.type){case"events":i=[{key:"title",label:"Event Title"},{key:"event_type",label:"Type"},{key:"event_date",label:"Date"},{key:"location",label:"Location"},{key:"created_by",label:"Created By"}],r=n.events||n.Events||[];break;case"sevas":i=[{key:"name",label:"Seva Name"},{key:"seva_type",label:"Type"},{key:"price",label:"Price"},{key:"date",label:"Date"},{key:"status",label:"Status"}],r=n.sevas||n.Sevas||[];break;case"bookings":i=[{key:"seva_name",label:"Seva"},{key:"devotee_name",label:"Devotee"},{key:"devotee_phone",label:"Phone"},{key:"booking_time",label:"Booking Time"},{key:"status",label:"Status"}],r=n.bookings||n.Bookings||[];break;case"donations":i=[{key:"donor_name",label:"Donor Name"},{key:"amount",label:"Amount"},{key:"donation_type",label:"Type"},{key:"payment_method",label:"Payment Method"},{key:"status",label:"Status"},{key:"donation_date",label:"Donation Date"}],r=n.donations||n.Donations||[];break}return console.log("Extracted preview data:",r),console.log("Columns:",i),{data:r,columns:i,totalRecords:r.length}}catch(s){throw console.error("Error getting report preview:",s),s}}validateReportParams(o){const s=[];if(!o.entityId&&!o.entityIds&&s.push("Entity ID or Entity IDs are required"),(!o.type||!["events","sevas","bookings","donations","temple-registered","devotee-birthdays"].includes(o.type))&&s.push("Valid report type is required (events, sevas, bookings, donations, temple-registered, devotee-birthdays)"),o.type==="temple-registered"){const n=["approved","rejected","pending"];o.status&&!n.includes(o.status)&&s.push(`Invalid status filter. Allowed values: ${n.join(", ")}`)}return o.dateRange==="custom"&&(!o.startDate||!o.endDate?s.push("Start date and end date are required for custom date range"):new Date(o.startDate)>new Date(o.endDate)&&s.push("Start date must be before end date")),o.format&&!["pdf","csv","excel"].includes(o.format)&&s.push("Invalid format specified"),{isValid:s.length===0,errors:s}}async getTempleRegisteredReport(o){const{entityId:s,entityIds:n,status:r,dateRange:i="weekly",startDate:a,endDate:l,isSuperAdmin:d}=o;if(!s&&!n)throw new Error("Entity ID or Entity IDs are required");const c=new URLSearchParams({date_range:i});r&&c.append("status",r),i==="custom"&&a&&l&&(c.append("start_date",a),c.append("end_date",l));let u,p;if(d)try{n&&n.length>1?u=`/superadmin/reports/temple-registered?${c}&tenants=${n.join(",")}`:u=`/superadmin/tenants/${s}/reports/temple-registered?${c}`,console.log("Making primary API request:",u),p=await ce.get(u)}catch(v){console.log("Primary API endpoint failed, trying fallback:",v.message);try{n&&n.length>1?u=`/superadmin/temple-registered/report?${c}&tenants=${n.join(",")}`:u=`/superadmin/temple-registered/report?${c}&tenant_id=${s}`,console.log("Making fallback API request:",u),p=await ce.get(u)}catch(g){console.log("Second fallback failed, trying third pattern:",g.message),n&&n.length>1?u=`/superadmin/entities/reports/temple-registered?${c}&tenants=${n.join(",")}`:u=`/entities/${s}/reports/temple-registered?${c}`,console.log("Making third fallback API request:",u),p=await ce.get(u)}}else u=`/entities/${s}/reports/temple-registered?${c}`,console.log("Making API request:",u),p=await ce.get(u);return p}async downloadTempleRegisteredReport(o){const{entityId:s,entityIds:n,templeId:r,status:i,dateRange:a="weekly",startDate:l,endDate:d,format:c,isSuperAdmin:u}=o;if(!s&&!n||!c)throw new Error("Entity ID (or IDs) and format are required");console.log(" Temple Register Report Params:",{entityId:s,entityIds:n,templeId:r,isSuperAdmin:u,format:c});const p=new URLSearchParams({date_range:a,format:c});i&&p.append("status",i),a==="custom"&&l&&d&&(p.append("start_date",l),p.append("end_date",d));const v={Accept:this.getAcceptHeader(c),"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("auth_token")}`,"Cache-Control":"no-cache"};!u&&s&&(v["X-Tenant-ID"]=s.toString()),u&&n&&n.length>0?v["X-Tenant-ID"]=n[0].toString():u&&s&&(v["X-Tenant-ID"]=s.toString()),console.log(" Using headers:",JSON.stringify(v));const g=[];if(!u)r==="all"?g.push(`/entities/all/reports/temple-registered?${p}`):g.push(`/entities/${r}/reports/temple-registered?${p}`);else if(n&&n.length>0&&r==="all"){const k=n.join(",");g.push(`/superadmin/reports/all-temples?${p}&tenants=${k}`,`/superadmin/reports/temple-registered/all?${p}&tenants=${k}`),g.push(`/superadmin/reports/temple-registered?${p}&tenants=${k}&all_temples=true`,`/superadmin/reports/temple-registered?${p}&tenants=${k}&temple_id=all`),g.push(`/superadmin/temple-registered?${p}&tenant_ids=${k}&all=true`),g.push(`/superadmin/reports/temple-registered?${p}&tenants=${k}`);for(const b of n)g.push(`/superadmin/tenants/${b}/reports/temple-registered?${p}&include_all=true`)}else r==="all"?g.push(`/superadmin/tenants/${s}/reports/all-temples?${p}`,`/superadmin/tenants/${s}/reports/temple-registered?${p}&all=true`,`/superadmin/tenants/${s}/reports/temple-registered?${p}&temple_id=all`,`/superadmin/tenants/${s}/reports/temple-registered?${p}`):g.push(`/superadmin/tenants/${s}/reports/temple-registered?${p}&temple_id=${r}`,`/superadmin/tenants/${s}/temples/${r}/reports?${p}`);g.push(`/reports/temple-registered?${p}`,`/reports/temples?${p}`,`/entities/all/reports/temple-registered?${p}`),console.log(" URLs to try:",g);let h=null,D="";for(let k=0;k<g.length;k++){const b=g[k];console.log(` Attempt ${k+1}/${g.length}: ${b}`);try{if(h=await fetch(b,{method:"GET",headers:v}),h.ok){console.log(` Success with URL: ${b}`),D=b;break}else{const x=await h.text().catch(()=>"Unable to get error text");console.log(` URL failed with status ${h.status}: ${x}`)}}catch(x){console.log(` Error with URL: ${x.message}`)}}if(!h||!h.ok)throw new Error("All download attempts failed. Please check your permissions or contact support.");const C=await h.blob();if(C.size===0)throw console.error(" Success but empty file (0 bytes) from URL:",D),new Error("No data available for the selected criteria. The server returned an empty file.");console.log(` Successfully downloaded ${C.size} bytes of data from URL: ${D}`);const _=`temple_register_report_${new Date().toISOString().split("T")[0]}.${c}`,T=window.URL.createObjectURL(C),S=document.createElement("a");return S.href=T,S.setAttribute("download",_),document.body.appendChild(S),S.click(),document.body.removeChild(S),setTimeout(()=>window.URL.revokeObjectURL(T),1e3),{success:!0,filename:_,size:C.size}}async getTempleRegisteredPreview(o){try{let n=(await this.getTempleRegisteredReport(o)).data;n&&n.data&&(n=n.data);const r=[{key:"temple_name",label:"Temple Name"},{key:"registration_date",label:"Registration Date"},{key:"location",label:"Location"},{key:"status",label:"Status"}],i=n.temples||n||[];return{data:i,columns:r,totalRecords:i.length||0}}catch(s){throw console.error("Error getting temple-registered preview:",s),s}}async getDevoteeBirthdaysReport(o){const{entityId:s,entityIds:n,dateRange:r="monthly",startDate:i,endDate:a,isSuperAdmin:l}=o;if(!s&&!n)throw new Error("Entity ID or Entity IDs are required");const d=new URLSearchParams({date_range:r});if(r==="custom"&&i&&a)d.append("start_date",i),d.append("end_date",a);else{const p=new Date;let v,g;switch(r){case"weekly":v=new Date,g=new Date,g.setDate(g.getDate()+7);break;case"monthly":v=new Date,g=new Date,g.setDate(g.getDate()+30);break;case"yearly":v=new Date(p.getFullYear(),0,1),g=new Date(p.getFullYear(),11,31);break;default:v=new Date,g=new Date,g.setDate(g.getDate()+30)}d.append("start_date",v.toISOString().split("T")[0]),d.append("end_date",g.toISOString().split("T")[0])}let c,u;if(l)try{n&&n.length>1?c=`/superadmin/reports/devotee-birthdays?${d}&tenants=${n.join(",")}`:c=`/superadmin/tenants/${s}/reports/devotee-birthdays?${d}`,console.log(" Making primary devotee birthdays API request:",c),u=await ce.get(c)}catch(p){console.log("Primary API endpoint failed, trying fallback:",p.message);try{n&&n.length>1?c=`/superadmin/devotee-birthdays/report?${d}&tenants=${n.join(",")}`:c=`/superadmin/devotee-birthdays/report?${d}&tenant_id=${s}`,console.log(" Making fallback devotee birthdays API request:",c),u=await ce.get(c)}catch(v){console.log("Second fallback failed, trying third pattern:",v.message),n&&n.length>1?c=`/superadmin/entities/reports/devotee-birthdays?${d}&tenants=${n.join(",")}`:c=`/entities/${s}/reports/devotee-birthdays?${d}`,console.log(" Making third fallback devotee birthdays API request:",c),u=await ce.get(c)}}else c=`/entities/${s}/reports/devotee-birthdays?${d}`,console.log(" Making devotee birthdays API request:",c),u=await ce.get(c);return console.log(" Devotee birthdays API Response received:",u),u}async downloadDevoteeBirthdaysReport(o){const{entityId:s,entityIds:n,format:r,dateRange:i="monthly",startDate:a,endDate:l,isSuperAdmin:d}=o;if(!s&&!n||!r)throw new Error("Entity ID (or IDs) and format are required");const c=new URLSearchParams({date_range:i,format:r});if(i==="custom"&&a&&l)c.append("start_date",a),c.append("end_date",l);else{const p=new Date;let v,g;switch(i){case"weekly":v=new Date,g=new Date,g.setDate(g.getDate()+7);break;case"monthly":v=new Date,g=new Date,g.setDate(g.getDate()+30);break;case"yearly":v=new Date(p.getFullYear(),0,1),g=new Date(p.getFullYear(),11,31);break;default:v=new Date,g=new Date,g.setDate(g.getDate()+30)}c.append("start_date",v.toISOString().split("T")[0]),c.append("end_date",g.toISOString().split("T")[0])}let u;d?n&&n.length>1?u=`/superadmin/reports/devotee-birthdays?${c}&tenants=${n.join(",")}`:u=`/superadmin/tenants/${s}/reports/devotee-birthdays?${c}`:u=`/entities/${s}/reports/devotee-birthdays?${c}`;try{return await this.downloadReport(u,{format:r},"devotee_birthdays_report",async()=>d?[n&&n.length>1?`/superadmin/devotee-birthdays/report?${c}&tenants=${n.join(",")}`:`/superadmin/devotee-birthdays/report?${c}&tenant_id=${s}`,n&&n.length>1?`/superadmin/entities/reports/devotee-birthdays?${c}&tenants=${n.join(",")}`:`/entities/${s}/reports/devotee-birthdays?${c}`]:null)}catch(p){throw console.error("Error downloading devotee-birthdays report:",p),p}}async getDevoteeBirthdaysPreview(o){try{const s=await this.getDevoteeBirthdaysReport(o);console.log(" Devotee birthdays preview response:",s);let n=s.data;n&&n.data&&(n=n.data),console.log(" Processed response data:",n);const r=[{key:"full_name",label:"Full Name"},{key:"date_of_birth",label:"Date of Birth"},{key:"age",label:"Age"},{key:"gender",label:"Gender"},{key:"phone",label:"Phone"},{key:"email",label:"Email"},{key:"temple_name",label:"Temple"},{key:"upcoming_birthday",label:"Upcoming Birthday"}];let i=[];return Array.isArray(n)?i=n:n&&n.devotees?i=n.devotees:n&&n.birthdays?i=n.birthdays:n&&n.devotee_birthdays?i=n.devotee_birthdays:n&&Array.isArray(n.data)?i=n.data:(console.warn(" No valid devotee birthdays data found in response:",n),i=[]),i=i.map(a=>({...a,date_of_birth:a.date_of_birth?this.formatDate(a.date_of_birth):"-",upcoming_birthday:a.upcoming_birthday?this.formatDate(a.upcoming_birthday):"-"})),console.log(" Final preview data:",i),{data:i,columns:r,totalRecords:i.length||0}}catch(s){throw console.error(" Error getting devotee-birthdays preview:",s),s}}async getDevoteeList(o){const{entityId:s,entityIds:n,status:r="all",isSuperAdmin:i}=o;if(!s&&!n)throw new Error("Entity ID or Entity IDs are required");const a=["all","active","inactive"];if(!a.includes(r))throw new Error(`Invalid status. Allowed values: ${a.join(", ")}`);const l=new URLSearchParams;r!=="all"&&l.append("status",r);let d,c;if(i)try{n&&n.length>1?d=`/superadmin/reports/devotee-list?${l}&tenants=${n.join(",")}`:d=`/superadmin/tenants/${s}/reports/devotee-list?${l}`,console.log(" Making primary devotee list API request:",d),c=await ce.get(d)}catch(u){console.log("Primary API endpoint failed, trying fallback:",u.message);try{n&&n.length>1?d=`/superadmin/devotee-list/report?${l}&tenants=${n.join(",")}`:d=`/superadmin/devotee-list/report?${l}&tenant_id=${s}`,console.log(" Making fallback devotee list API request:",d),c=await ce.get(d)}catch(p){console.log("Second fallback failed, trying third pattern:",p.message),n&&n.length>1?d=`/superadmin/entities/reports/devotees?${l}&tenants=${n.join(",")}`:d=`/entities/${s}/reports/devotees?${l}`,console.log(" Making third fallback devotee list API request:",d),c=await ce.get(d)}}else d=`/entities/${s}/reports/devotee-list?${l}`,console.log(" Making devotee list API request:",d),c=await ce.get(d);return console.log(" Devotee list API Response received:",c),c}async downloadDevoteeListReport(o){const{entityId:s,entityIds:n,status:r="all",format:i,isSuperAdmin:a}=o;if(!s&&!n||!i)throw new Error("Entity ID (or IDs) and format are required");const l=new URLSearchParams({format:i});r!=="all"&&l.append("status",r);let d;a?n&&n.length>1?d=`/superadmin/reports/devotee-list?${l}&tenants=${n.join(",")}`:d=`/superadmin/tenants/${s}/reports/devotee-list?${l}`:d=`/entities/${s}/reports/devotee-list?${l}`;try{return await this.downloadReport(d,{format:i},`devotee_list_${r}_report`,async()=>a?[n&&n.length>1?`/superadmin/devotee-list/report?${l}&tenants=${n.join(",")}`:`/superadmin/devotee-list/report?${l}&tenant_id=${s}`,n&&n.length>1?`/superadmin/entities/reports/devotees?${l}&tenants=${n.join(",")}`:`/entities/${s}/reports/devotees?${l}`]:null)}catch(c){throw console.error("Error downloading devotee list report:",c),c}}async getDevoteeListPreview(o){try{let n=(await this.getDevoteeList(o)).data;n&&n.data&&(n=n.data);const r=n.devotees||n||[];return{data:r,columns:[{key:"full_name",label:"Full Name"},{key:"phone",label:"Phone"},{key:"email",label:"Email"},{key:"status",label:"Status"},{key:"registration_date",label:"Registration Date"},{key:"last_login",label:"Last Login"}],totalRecords:r.length||0}}catch(s){throw console.error("Error getting devotee list preview:",s),s}}async getDevoteeProfile(o){const{entityId:s,entityIds:n,isSuperAdmin:r}=o;if(!s&&!n)throw new Error("Entity ID or Entity IDs are required");let i,a;if(r)try{n&&n.length>1?i=`/superadmin/reports/devotee-profile?tenants=${n.join(",")}`:i=`/superadmin/tenants/${s}/reports/devotee-profile`,console.log(" Making primary devotee profile API request:",i),a=await ce.get(i)}catch(l){console.log("Primary API endpoint failed, trying fallback:",l.message);try{n&&n.length>1?i=`/superadmin/devotee-profile/report?tenants=${n.join(",")}`:i=`/superadmin/devotee-profile/report?tenant_id=${s}`,console.log(" Making fallback devotee profile API request:",i),a=await ce.get(i)}catch(d){console.log("Second fallback failed, trying third pattern:",d.message),n&&n.length>1?i=`/superadmin/entities/reports/devotee-profile?tenants=${n.join(",")}`:i=`/entities/${s}/reports/devotee-profile`,console.log(" Making third fallback devotee profile API request:",i),a=await ce.get(i)}}else i=`/entities/${s}/reports/devotee-profile`,console.log(" Making devotee profile API request:",i),a=await ce.get(i);return console.log(" Devotee profile API Response received:",a),a}async downloadDevoteeProfileReport(o){const{entityId:s,entityIds:n,format:r,isSuperAdmin:i}=o;if(!s&&!n||!r)throw new Error("Entity ID (or IDs) and format are required");const a=new URLSearchParams({format:r});let l;i?n&&n.length>1?l=`/superadmin/reports/devotee-profile?${a}&tenants=${n.join(",")}`:l=`/superadmin/tenants/${s}/reports/devotee-profile?${a}`:l=`/entities/${s}/reports/devotee-profile?${a}`;try{return await this.downloadReport(l,{format:r},"devotee_profile_report",async()=>i?[n&&n.length>1?`/superadmin/devotee-profile/report?${a}&tenants=${n.join(",")}`:`/superadmin/devotee-profile/report?${a}&tenant_id=${s}`,n&&n.length>1?`/superadmin/entities/reports/devotee-profile?${a}&tenants=${n.join(",")}`:`/entities/${s}/reports/devotee-profile?${a}`]:null)}catch(d){throw console.error("Error downloading devotee profile report:",d),d}}async getDevoteeProfilePreview(o){try{let n=(await this.getDevoteeProfile(o)).data;return n&&n.data&&(n=n.data),n.profile||n||{}}catch(s){throw console.error("Error getting devotee profile preview:",s),s}}async getAuditLogsReport(o){const{entityId:s,entityIds:n,dateRange:r="weekly",startDate:i,endDate:a,userId:l,actionType:d,isSuperAdmin:c}=o;if(!s&&!n)throw new Error("Entity ID or Entity IDs are required");const u=new URLSearchParams({date_range:r});let p,v;const g=new Date;if(r==="custom"&&i&&a)p=i,v=a;else{v=g.toISOString().split("T")[0];const C=new Date(g);switch(r){case"daily":break;case"weekly":C.setDate(g.getDate()-7);break;case"monthly":C.setMonth(g.getMonth()-1);break;default:C.setDate(g.getDate()-7)}p=C.toISOString().split("T")[0]}u.set("start_date",p),u.set("end_date",v),l&&u.set("user_id",l),d&&u.set("action_type",d);let h,D;if(c)try{n&&n.length>1?h=`/superadmin/reports/audit-logs?${u}&tenants=${n.join(",")}`:h=`/superadmin/tenants/${s}/reports/audit-logs?${u}`,console.log(" Making primary audit logs API request:",h),D=await ce.get(h)}catch(C){console.log("Primary API endpoint failed, trying fallback:",C.message);try{n&&n.length>1?h=`/superadmin/audit-logs/report?${u}&tenants=${n.join(",")}`:h=`/superadmin/audit-logs/report?${u}&tenant_id=${s}`,console.log(" Making fallback audit logs API request:",h),D=await ce.get(h)}catch(B){console.log("Second fallback failed, trying third pattern:",B.message),n&&n.length>1?h=`/superadmin/entities/reports/audit-logs?${u}&tenants=${n.join(",")}`:h=`/entities/${s}/reports/audit-logs?${u}`,console.log(" Making third fallback audit logs API request:",h),D=await ce.get(h)}}else h=`/entities/${s}/reports/audit-logs?${u}`,console.log(" Making audit logs API request:",h),D=await ce.get(h);return console.log(" Audit logs API Response received:",D),D}async downloadAuditLogsReport(o){const{entityId:s,entityIds:n,format:r="csv",dateRange:i="weekly",startDate:a,endDate:l,userId:d,actionType:c,isSuperAdmin:u}=o;if(!s&&!n||!r)throw new Error("Entity ID (or IDs) and format are required");const p=new URLSearchParams({date_range:i,format:r});let v,g;const h=new Date;if(i==="custom"&&a&&l)v=a,g=l;else{g=h.toISOString().split("T")[0];const C=new Date(h);switch(i){case"daily":break;case"weekly":C.setDate(h.getDate()-7);break;case"monthly":C.setMonth(h.getMonth()-1);break;default:C.setDate(h.getDate()-7)}v=C.toISOString().split("T")[0]}p.set("start_date",v),p.set("end_date",g),d&&p.set("user_id",d),c&&p.set("action_type",c);let D;u?n&&n.length>1?D=`/superadmin/reports/audit-logs?${p}&tenants=${n.join(",")}`:D=`/superadmin/tenants/${s}/reports/audit-logs?${p}`:D=`/entities/${s}/reports/audit-logs?${p}`;try{return await this.downloadReport(D,{format:r},"audit_logs_report",async()=>u?[n&&n.length>1?`/superadmin/audit-logs/report?${p}&tenants=${n.join(",")}`:`/superadmin/audit-logs/report?${p}&tenant_id=${s}`,n&&n.length>1?`/superadmin/entities/reports/audit-logs?${p}&tenants=${n.join(",")}`:`/entities/${s}/reports/audit-logs?${p}`]:null)}catch(C){throw console.error(" Error downloading audit logs report:",C),C}}async getAuditLogsPreview(o){try{const s=await this.getAuditLogsReport(o);console.log(" Audit logs preview response:",s);let n=s.data;n&&n.data&&(n=n.data),console.log(" Processed audit logs data:",n);const r=[{key:"timestamp",label:"Timestamp"},{key:"user_name",label:"User"},{key:"action_type",label:"Action"},{key:"resource_type",label:"Resource Type"},{key:"resource_id",label:"Resource ID"},{key:"description",label:"Description"},{key:"ip_address",label:"IP Address"},{key:"user_agent",label:"User Agent"}];let i=[];return Array.isArray(n)?i=n:n&&n.audit_logs?i=n.audit_logs:n&&n.logs?i=n.logs:n&&Array.isArray(n.data)?i=n.data:(console.warn(" No valid audit logs data found in response:",n),i=[]),i=i.map(a=>({...a,timestamp:a.timestamp?this.formatDateTime(a.timestamp):"-",description:a.description||a.details||"-",user_agent:a.user_agent?this.truncateText(a.user_agent,50):"-"})),console.log(" Final audit logs preview data:",i),{data:i,columns:r,totalRecords:i.length||0}}catch(s){throw console.error(" Error getting audit logs preview:",s),s}}formatDateTime(o){if(!o)return"-";try{return new Date(o).toLocaleString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit"})}catch{return console.warn("Invalid datetime format:",o),o}}truncateText(o,s){return!o||o.length<=s?o:o.substring(0,s)+"..."}async downloadReport(o,s,n,r=null){try{console.log(" Making download request:",o),console.log(" Request parameters:",s);try{const i=await ce.get(o,{responseType:"blob",headers:{Accept:this.getAcceptHeader(s.format),"Cache-Control":"no-cache"}});if(console.log(" Download response received:",{status:i.status,contentType:i.headers["content-type"],contentLength:i.headers["content-length"],contentDisposition:i.headers["content-disposition"]}),!i.data||i.data.size===0)throw new Error("Empty file received from server");const a=i.headers["content-type"];if(a!=null&&a.includes("text/html")||a!=null&&a.includes("application/json")){const v=await i.data.text();throw console.error(" Server returned error response:",v),new Error(`Server error: ${v.substring(0,200)}`)}let l=`${n}.${s.format}`;const d=i.headers["content-disposition"];if(d){const v=[/filename[^;=\n]*=\s*"([^"]+)"/i,/filename[^;=\n]*=\s*'([^']+)'/i,/filename[^;=\n]*=\s*([^;\n]+)/i,/filename\*=UTF-8''([^;\n]+)/i];for(const g of v){const h=d.match(g);if(h){l=decodeURIComponent(h[1].trim());break}}}const c=new Blob([i.data],{type:this.getBlobType(s.format)}),u=window.URL.createObjectURL(c),p=document.createElement("a");return p.href=u,p.setAttribute("download",l),p.style.display="none",document.body.appendChild(p),p.click(),document.body.removeChild(p),setTimeout(()=>{window.URL.revokeObjectURL(u)},1e3),console.log(" Download completed successfully"),{success:!0,filename:l,size:c.size,contentType:a}}catch(i){if(r){const a=await r();if(a&&a.length>0){console.log("Trying fallback URLs:",a);for(const l of a)try{console.log("Trying fallback URL:",l);const d=await ce.get(l,{responseType:"blob",headers:{Accept:this.getAcceptHeader(s.format),"Cache-Control":"no-cache"}});let c=`${n}.${s.format}`;const u=d.headers["content-disposition"];if(u){const h=[/filename[^;=\n]*=\s*"([^"]+)"/i,/filename[^;=\n]*=\s*'([^']+)'/i,/filename[^;=\n]*=\s*([^;\n]+)/i,/filename\*=UTF-8''([^;\n]+)/i];for(const D of h){const C=u.match(D);if(C){c=decodeURIComponent(C[1].trim());break}}}const p=new Blob([d.data],{type:this.getBlobType(s.format)}),v=window.URL.createObjectURL(p),g=document.createElement("a");return g.href=v,g.setAttribute("download",c),g.style.display="none",document.body.appendChild(g),g.click(),document.body.removeChild(g),setTimeout(()=>{window.URL.revokeObjectURL(v)},1e3),console.log(" Download completed successfully with fallback URL"),{success:!0,filename:c,size:p.size,contentType:d.headers["content-type"]}}catch(d){console.error(" Fallback URL failed:",l,d)}}}throw i}}catch(i){if(console.error(" Error in download:",i),i.response){if(console.error("Error response details:",{status:i.response.status,statusText:i.response.statusText,contentType:i.response.headers["content-type"]}),i.response.data instanceof Blob)try{const a=await i.response.data.text();throw new Error(`Server error (${i.response.status}): ${a}`)}catch(a){console.error("Failed to read error response:",a)}throw new Error(`Server returned ${i.response.status}: ${i.response.statusText}`)}throw i}}formatDate(o){if(!o)return"-";try{return new Date(o).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})}catch{return console.warn("Invalid date format:",o),o}}getAcceptHeader(o){switch(o==null?void 0:o.toLowerCase()){case"pdf":return"application/pdf";case"excel":case"xlsx":return"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet";case"csv":return"text/csv";default:return"application/octet-stream"}}getBlobType(o){switch(o==null?void 0:o.toLowerCase()){case"pdf":return"application/pdf";case"excel":case"xlsx":return"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet";case"csv":return"text/csv";default:return"application/octet-stream"}}}const Ne=new a4,i4={class:"min-h-screen bg-gray-50"},l4={key:0,class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 pt-4"},d4={class:"bg-white shadow-sm border-b border-gray-200 rounded-2xl"},u4={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6"},c4={class:"flex items-center justify-between"},p4={class:"text-gray-600 mt-1"},m4={key:0,class:"text-indigo-600 font-medium"},g4={key:1,class:"text-indigo-600 font-medium"},f4={class:"flex items-center space-x-4"},v4={class:"bg-indigo-50 px-4 py-2 rounded-lg border border-indigo-200"},h4={class:"text-indigo-800 font-medium"},y4={class:"text-indigo-600 text-sm ml-2"},x4={key:1,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},b4={class:"bg-white rounded-lg p-6 flex items-center space-x-3"},w4={class:"text-gray-900 font-medium"},k4={key:2,class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 pt-4"},_4={class:"bg-red-50 border border-red-200 rounded-md p-4"},$4={class:"flex"},S4={class:"ml-3"},D4={class:"mt-1 text-sm text-red-700"},C4={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},T4={class:"bg-white rounded-2xl shadow-sm border border-gray-200 overflow-hidden mb-8"},E4={class:"p-6"},A4={class:"mb-6"},I4={class:"relative"},M4=["disabled"],R4=["value"],P4={key:0,class:"mt-2 text-sm text-amber-600"},j4={key:1,class:"mt-2 text-sm text-gray-500"},N4={class:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6"},L4={class:"flex flex-wrap gap-2"},B4=["onClick","disabled"],V4={class:"flex flex-wrap gap-2"},U4=["onClick","disabled"],F4={key:0,class:"mb-6 p-4 bg-gray-50 border border-gray-200 rounded-lg"},O4={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},z4=["disabled","max"],H4=["disabled","min","max"],q4={class:"border-t border-gray-200 pt-6"},G4={class:"flex flex-col md:flex-row md:items-center md:justify-between"},W4={class:"flex items-center space-x-3"},J4={class:"relative"},Y4=["disabled"],K4=["value"],X4=["disabled"],Z4={key:0,class:"animate-spin -ml-1 mr-2 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},Q4={key:1,class:"mr-2 h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},e5={class:"bg-white rounded-2xl shadow-sm border border-gray-200 overflow-hidden"},t5={class:"p-6"},o5={class:"flex flex-wrap gap-2"},s5={key:0,class:"inline-flex items-center px-3 py-1.5 rounded-full text-sm bg-indigo-100 text-indigo-800"},n5={class:"inline-flex items-center px-3 py-1.5 rounded-full text-sm bg-indigo-100 text-indigo-800"},r5={class:"inline-flex items-center px-3 py-1.5 rounded-full text-sm bg-indigo-100 text-indigo-800"},a5={key:0},i5={class:"inline-flex items-center px-3 py-1.5 rounded-full text-sm bg-indigo-100 text-indigo-800"},l5={class:"inline-flex items-center px-3 py-1.5 rounded-full text-sm bg-indigo-100 text-indigo-800"},d5={class:"inline-flex items-center px-3 py-1.5 rounded-full text-sm bg-green-100 text-green-800"},u5={__name:"TempleRegisterReport",setup(t){const o=Ze();Ke();const s=Uo(),n=tt(),{showToast:r}=je(),i=V("all"),a=V("weekly"),l=V("all"),d=V("pdf"),c=V(""),u=V(""),p=V(!1),v=V(""),g=V(!1),h=()=>{const I=new Date,P=new Date;P.setDate(I.getDate()-7),u.value=I.toISOString().split("T")[0],c.value=P.toISOString().split("T")[0]},D=[{label:"Weekly",value:"weekly"},{label:"Monthly",value:"monthly"},{label:"Yearly",value:"yearly"},{label:"Custom Range",value:"custom"}],C=[{label:"All Status",value:"all"},{label:"Approved",value:"approved"},{label:"Pending",value:"pending"},{label:"Rejected",value:"rejected"}],B=[{label:"PDF",value:"pdf"},{label:"CSV",value:"csv"},{label:"Excel",value:"excel"}],_=te(()=>o.query.from==="superadmin"),T=te(()=>o.query.tenants?o.query.tenants.split(",").filter(I=>I&&I.trim()):[]),S=te(()=>{var P,W;if(_.value&&T.value.length===1)return T.value[0];if(o.params.tenantId)return o.params.tenantId;if((P=n.user)!=null&&P.assignedTenantId)return n.user.assignedTenantId.toString();const I=localStorage.getItem("current_tenant_id");return I||(ce.defaults.headers.common["X-Tenant-ID"]?ce.defaults.headers.common["X-Tenant-ID"].toString():(W=n.user)!=null&&W.id?n.user.id.toString():(console.warn("No tenant ID found, using fallback"),null))}),k=te(()=>new Date().toISOString().split("T")[0]),b=te(()=>a.value==="custom"?c.value&&u.value&&new Date(c.value)<=new Date(u.value):!0),x=te(()=>!s.temples||!Array.isArray(s.temples)?[]:s.temples.filter(I=>{if(!I)return!1;const P=(I.status||"").toLowerCase();return P==="approved"||P==="active"})),F=I=>{a.value=I,N();const P=new Date,W=new Date;I==="weekly"?W.setDate(P.getDate()-7):I==="monthly"?W.setDate(P.getDate()-30):I==="yearly"&&W.setDate(P.getDate()-365),I!=="custom"&&(c.value=W.toISOString().split("T")[0],u.value=P.toISOString().split("T")[0])},E=I=>{l.value=I,N()},O=()=>{N()},N=()=>{v.value=""},L=I=>{if(I==="all")return"All Temples";const P=s.temples.find(W=>{var we;return((we=W==null?void 0:W.id)==null?void 0:we.toString())===(I==null?void 0:I.toString())});return P?P.name:"Unknown Temple"},M=I=>{const P=D.find(W=>W.value===I);return P?P.label:"Unknown"},X=I=>{const P=C.find(W=>W.value===I);return P?P.label:"Unknown"},ee=I=>{const P=B.find(W=>W.value===I);return P?P.label:"Unknown"},oe=I=>{if(!I)return"";try{return new Date(I).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})}catch{return I||""}},ae=()=>{try{if(!S.value)throw new Error("No valid tenant ID available for report generation");const I={dateRange:a.value||"weekly",format:d.value||"pdf",startDate:c.value,endDate:u.value,isSuperAdmin:_.value,tenantId:S.value};return _.value&&T.value.length>1?(I.entityIds=T.value,I.entityId="multiple"):I.entityId=i.value==="all"?S.value:i.value,i.value&&i.value!=="all"?I.templeId=i.value.toString():I.templeId="all",l.value!=="all"&&(I.status=l.value),console.log("Built temple register report params:",I),I}catch(I){throw console.error("Error building report params:",I),I}},H=async()=>{g.value=!0,v.value="";try{if(!S.value)throw new Error("No tenant ID available to fetch temples");if(console.log("Fetching temples for tenant ID:",S.value),s.clearTempleData(),_.value&&T.value.length>1){console.log(`Fetching temples for ${T.value.length} tenants:`,T.value);const I=[];for(const P of T.value)try{const W=await J(P);I.push(...W)}catch(W){console.warn(`Failed to fetch temples for tenant ${P}:`,W)}s.temples=I,console.log(`Set ${s.temples.length} total temples for ${T.value.length} tenants`)}else{const I=S.value;console.log(`Fetching temples for single tenant ${I}`);try{const P=await ce.get("/v1/entities");let W=[];P.data&&Array.isArray(P.data)?W=P.data:P.data&&Array.isArray(P.data.data)&&(W=P.data.data);const we=W.filter(me=>String(me.created_by)===String(I)||String(me.tenant_id)===String(I));console.log(`Filtered ${we.length} temples from ${W.length} total entities for tenant ${I}`),s.temples=we.map(me=>it.normalizeTempleData(me)),s.temples.length===0&&(console.warn(`No temples found for tenant ID ${I}`),v.value=`No temples found for tenant ID ${I}. Please verify tenant access.`)}catch(P){console.error("Error fetching entities directly:",P),console.log("Using store method as fallback");try{_.value?await s.fetchTemplesForSuperAdmin(I):await s.fetchTemples(I)}catch(W){console.error("Fallback method also failed:",W),v.value=`Failed to load temples: ${W.message}`}}}console.log(`Successfully loaded ${s.temples.length} temples for tenant ${S.value}`)}catch(I){console.error("Error in fetchTemples:",I),v.value=`Failed to load temples: ${I.message}`,r(`Failed to load temple data: ${I.message}`,"error")}finally{g.value=!1}},J=async I=>{try{console.log(`Fetching temples for tenant ${I}`);const P=await ce.get("/v1/entities");let W=[];P.data&&Array.isArray(P.data)?W=P.data:P.data&&Array.isArray(P.data.data)&&(W=P.data.data);const we=W.filter(me=>String(me.created_by)===String(I)||String(me.tenant_id)===String(I));return console.log(`Found ${we.length} temples for tenant ${I}`),we.map(me=>it.normalizeTempleData(me))}catch(P){return console.error(`Error fetching temples for tenant ${I}:`,P),[]}},z=async()=>{var I,P,W,we;if(!(p.value||!b.value)){N(),p.value=!0;try{if(!S.value)throw new Error("No valid tenant ID available for download");const me=ae(),De=Ne.validateReportParams({...me,type:"temple-registered"});if(!De.isValid)throw new Error(De.errors.join(", "));console.log("Downloading temple register report with params:",me);const ge=await Ne.downloadTempleRegisteredReport(me);r(`Temple Register Report downloaded successfully: ${ge.filename||"report.pdf"}`,"success")}catch(me){console.error("Download failed:",me);let De="Failed to download report. Please try again.";(I=me.message)!=null&&I.toLowerCase().includes("network error")?De="Network error. Please check your connection and try again.":((P=me.response)==null?void 0:P.status)===404?De="Report endpoint not found. The report may not be available for this configuration.":((W=me.response)==null?void 0:W.status)===403?De="You do not have permission to download this report.":((we=me.response)==null?void 0:we.status)===400?De="Invalid report parameters. Please check your selections.":me.message&&(De=me.message),v.value=De,r(`Download failed: ${De}`,"error")}finally{p.value=!1}}};return Ee(async()=>{if(console.log("Temple Register Report mounted"),console.log("fromSuperadmin:",_.value),console.log("Tenant IDs from URL:",T.value),console.log("Effective tenant ID:",S.value),console.log("Route params:",o.params),console.log("User store:",n.user),console.log("Current X-Tenant-ID header:",ce.defaults.headers.common["X-Tenant-ID"]),h(),!S.value){v.value="No valid tenant ID found. Please check your access permissions.";return}s.clearTempleData(),await H()}),Ue(S,async(I,P)=>{I!==P&&I&&(console.log("Tenant ID changed, refetching temples:",I),s.clearTempleData(),await H())}),Ue(()=>o.params.tenantId,async(I,P)=>{I!==P&&I&&(console.log("Route tenant ID changed:",I),s.clearTempleData(),await H())}),Ue(()=>o.query.tenants,async(I,P)=>{I!==P&&I&&(console.log("Query tenants changed:",I),s.clearTempleData(),await H(),i.value="all")}),(I,P)=>{var we;const W=He("router-link");return m(),f("div",i4,[_.value?(m(),f("div",l4,[re(W,{to:"/superadmin/reports",class:"inline-flex items-center px-4 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition-colors"},{default:fe(()=>[...P[4]||(P[4]=[e("svg",{class:"mr-2 h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 19l-7-7m0 0l7-7m-7 7h18"})],-1),Q(" Back to SuperAdmin Reports ",-1)])]),_:1})])):Y("",!0),e("div",d4,[e("div",u4,[e("div",c4,[e("div",null,[P[6]||(P[6]=e("h1",{class:"text-2xl font-bold text-gray-900"},"Temple Register Report",-1)),e("p",p4,[P[5]||(P[5]=Q(" Download registration data for your temples ",-1)),_.value&&T.value.length>1?(m(),f("span",m4," (Multiple Tenants Selected: "+y(T.value.length)+") ",1)):S.value?(m(),f("span",g4," (Tenant ID: "+y(S.value)+") ",1)):Y("",!0)])]),e("div",f4,[e("div",v4,[e("span",h4,y(((we=_e(n).user)==null?void 0:we.name)||"Tenant User"),1),e("span",y4,y(_.value?"(Super Admin)":"(Tenant)"),1)])])])])]),g.value||p.value?(m(),f("div",x4,[e("div",b4,[P[7]||(P[7]=e("div",{class:"animate-spin rounded-full h-6 w-6 border-b-2 border-indigo-600"},null,-1)),e("span",w4,y(p.value?"Downloading...":"Loading data..."),1)])])):Y("",!0),v.value?(m(),f("div",k4,[e("div",_4,[e("div",$4,[P[10]||(P[10]=e("svg",{class:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor"},[e("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"})],-1)),e("div",S4,[P[8]||(P[8]=e("h3",{class:"text-sm font-medium text-red-800"},"Error",-1)),e("p",D4,y(v.value),1)]),e("div",{class:"ml-auto pl-3"},[e("button",{onClick:N,class:"text-red-400 hover:text-red-500"},[...P[9]||(P[9]=[e("span",{class:"sr-only"},"Dismiss",-1),e("svg",{class:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor"},[e("path",{"fill-rule":"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z","clip-rule":"evenodd"})],-1)])])])])])])):Y("",!0),e("div",C4,[e("div",T4,[P[20]||(P[20]=e("div",{class:"p-6 border-b border-gray-200"},[e("h3",{class:"text-xl font-bold text-gray-900"},"Temple Register"),e("p",{class:"text-gray-600 mt-1"},"Configure filters and download your temple registration data")],-1)),e("div",E4,[e("div",A4,[P[12]||(P[12]=e("label",{class:"block text-gray-700 font-medium mb-2"},"Select Temple",-1)),e("div",I4,[de(e("select",{"onUpdate:modelValue":P[0]||(P[0]=me=>i.value=me),onChange:O,disabled:g.value,class:"block w-full py-2 px-3 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 disabled:bg-gray-100 disabled:cursor-not-allowed"},[P[11]||(P[11]=e("option",{value:"all"},"All Temples",-1)),(m(!0),f(he,null,ke(x.value,me=>(m(),f("option",{key:me.id,value:me.id},y(me.name),9,R4))),128))],40,M4),[[Ce,i.value]])]),x.value.length===0&&!g.value?(m(),f("div",P4," No temples found for tenant ID "+y(S.value)+". Please verify tenant access. ",1)):(m(),f("div",j4," Found "+y(x.value.length)+" temples for tenant "+y(S.value),1))]),e("div",N4,[e("div",null,[P[13]||(P[13]=e("label",{class:"block text-gray-700 font-medium mb-2"},"Registration Date",-1)),e("div",L4,[(m(),f(he,null,ke(D,me=>e("button",{key:me.value,onClick:De=>F(me.value),disabled:g.value,class:ie(["px-4 py-2 rounded-md text-sm font-medium transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed",a.value===me.value?"bg-indigo-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"])},y(me.label),11,B4)),64))])]),e("div",null,[P[14]||(P[14]=e("label",{class:"block text-gray-700 font-medium mb-2"},"Temple Status",-1)),e("div",V4,[(m(),f(he,null,ke(C,me=>e("button",{key:me.value,onClick:De=>E(me.value),disabled:g.value,class:ie(["px-4 py-2 rounded-md text-sm font-medium transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed",l.value===me.value?"bg-indigo-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"])},y(me.label),11,U4)),64))])])]),a.value==="custom"?(m(),f("div",F4,[e("div",O4,[e("div",null,[P[15]||(P[15]=e("label",{class:"block text-gray-700 text-sm font-medium mb-2"},"Start Date",-1)),de(e("input",{type:"date","onUpdate:modelValue":P[1]||(P[1]=me=>c.value=me),disabled:g.value,max:u.value,class:"w-full py-2 px-3 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 disabled:opacity-50 disabled:cursor-not-allowed"},null,8,z4),[[xe,c.value]])]),e("div",null,[P[16]||(P[16]=e("label",{class:"block text-gray-700 text-sm font-medium mb-2"},"End Date",-1)),de(e("input",{type:"date","onUpdate:modelValue":P[2]||(P[2]=me=>u.value=me),disabled:g.value,min:c.value,max:k.value,class:"w-full py-2 px-3 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 disabled:opacity-50 disabled:cursor-not-allowed"},null,8,H4),[[xe,u.value]])])])])):Y("",!0),e("div",q4,[e("div",G4,[P[19]||(P[19]=e("div",{class:"mb-4 md:mb-0"},[e("h4",{class:"text-lg font-medium text-gray-900"},"Download Report"),e("p",{class:"text-sm text-gray-600"},"Select a format and click download")],-1)),e("div",W4,[e("div",J4,[de(e("select",{"onUpdate:modelValue":P[3]||(P[3]=me=>d.value=me),disabled:g.value,class:"block w-full py-2 px-3 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 disabled:opacity-50 disabled:cursor-not-allowed"},[(m(),f(he,null,ke(B,me=>e("option",{key:me.value,value:me.value},y(me.label),9,K4)),64))],8,Y4),[[Ce,d.value]])]),e("button",{onClick:z,disabled:g.value||!b.value,class:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200"},[p.value?(m(),f("svg",Z4,[...P[17]||(P[17]=[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)])])):(m(),f("svg",Q4,[...P[18]||(P[18]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"},null,-1)])])),Q(" "+y(p.value?"Downloading...":"Download"),1)],8,X4)])])])])]),e("div",e5,[e("div",t5,[P[27]||(P[27]=e("h3",{class:"text-lg font-medium text-gray-900 mb-4"},"Applied Filters",-1)),e("div",o5,[_.value&&T.value.length>1?(m(),f("div",s5,[P[21]||(P[21]=e("span",{class:"font-medium mr-1"},"Tenants:",-1)),Q(" "+y(T.value.length)+" selected ",1)])):Y("",!0),e("div",n5,[P[22]||(P[22]=e("span",{class:"font-medium mr-1"},"Temple:",-1)),Q(" "+y(i.value==="all"?"All Temples":L(i.value)),1)]),e("div",r5,[P[23]||(P[23]=e("span",{class:"font-medium mr-1"},"Period:",-1)),Q(" "+y(M(a.value))+" ",1),a.value==="custom"&&c.value&&u.value?(m(),f("span",a5," ("+y(oe(c.value))+" - "+y(oe(u.value))+") ",1)):Y("",!0)]),e("div",i5,[P[24]||(P[24]=e("span",{class:"font-medium mr-1"},"Status:",-1)),Q(" "+y(X(l.value)),1)]),e("div",l5,[P[25]||(P[25]=e("span",{class:"font-medium mr-1"},"Format:",-1)),Q(" "+y(ee(d.value)),1)]),e("div",d5,[P[26]||(P[26]=e("span",{class:"font-medium mr-1"},"Tenant ID:",-1)),Q(" "+y(S.value),1)])]),P[28]||(P[28]=e("p",{class:"mt-4 text-sm text-gray-600"}," Your report will include data based on the filters above. Click Download to generate and download the report. ",-1))])])])])}}},lp=Vo("reports",()=>{const t=V(!1),o=V(!1),s=V(null),n=V(null),r=V(null),i=V(null),a=V([]),l=V(null),d=V("all"),c=te(()=>r.value&&r.value.data&&r.value.data.length>0),u=te(()=>{var w,R,A;return r.value?{totalRecords:r.value.totalRecords||0,type:((w=i.value)==null?void 0:w.type)||"Unknown",dateRange:((R=i.value)==null?void 0:R.dateRange)||"Unknown",entityId:((A=i.value)==null?void 0:A.entityId)||"Unknown"}:null}),p=te(()=>!a.value||!Array.isArray(a.value)?[]:d.value==="all"?a.value:a.value.filter(w=>{if(!w)return!1;if(d.value==="active")return w.status==="active"||w.is_active===!0;if(d.value==="inactive")return w.status==="inactive"||w.is_active===!1;if(d.value==="new"){const R=new Date;return R.setDate(R.getDate()-30),new Date(w.created_at||w.join_date)>=R}return!0})),v=()=>{s.value=null},g=()=>{n.value=null,r.value=null,i.value=null,s.value=null,a.value=[],l.value=null,d.value="all"},h=async w=>{try{t.value=!0,s.value=null;const R=Ne.validateReportParams(w);if(!R.isValid)throw new Error(R.errors.join(", "));i.value={...w};const A=await Ne.getActivitiesReport(w);n.value=A;const j=await Ne.getReportPreview(w);return r.value=j,A}catch(R){throw s.value=R.message||"Failed to fetch activities report",console.error("Error in fetchActivitiesReport:",R),R}finally{t.value=!1}},D=async w=>{try{o.value=!0,s.value=null;const R=Ne.validateReportParams(w);if(!R.isValid)throw new Error(R.errors.join(", "));const A=await Ne.downloadActivitiesReport(w);return i.value={...w},A}catch(R){throw s.value=R.message||"Failed to download activities report",console.error("Error in downloadActivitiesReport:",R),R}finally{o.value=!1}},C=async w=>{try{t.value=!0,s.value=null;const R=await Ne.getReportPreview(w);return r.value=R,i.value={...w},R}catch(R){throw s.value=R.message||"Failed to get report preview",console.error("Error in getReportPreview:",R),R}finally{t.value=!1}},B=async w=>{try{t.value=!0,s.value=null,i.value={...w,type:"audit-logs"};const R=await Ne.getAuditLogsReport(w);n.value=R;const A=await Ne.getAuditLogsPreview(w);return r.value=A,R}catch(R){throw s.value=R.message||"Failed to fetch audit logs report",console.error("Error in fetchAuditLogsReport:",R),R}finally{t.value=!1}},_=async w=>{try{o.value=!0,s.value=null;const R=await Ne.downloadAuditLogsReport(w);return i.value={...w,type:"audit-logs"},R}catch(R){throw s.value=R.message||"Failed to download audit logs report",console.error("Error in downloadAuditLogsReport:",R),R}finally{o.value=!1}},T=async w=>{try{t.value=!0,s.value=null,console.log("Fetching approval status with params:",w),i.value={...w,type:"approval-status"},w.entityIds&&Array.isArray(w.entityIds)&&(w.isSuperAdmin=!0);const R=await Ne.getApprovalStatusReport(w);console.log("Approval status API response:",R),console.log("Response data structure:",R.data),n.value=R;const A=await Ne.getApprovalStatusPreview(w);return r.value=A,R}catch(R){throw s.value=R.message||"Failed to fetch approval status report",console.error("Error in fetchApprovalStatusReport:",R),R}finally{t.value=!1}},S=async w=>{try{o.value=!0,s.value=null,w.entityIds&&Array.isArray(w.entityIds)&&(w.isSuperAdmin=!0);const R=await Ne.downloadApprovalStatusReport(w);return i.value={...w,type:"approval-status"},R}catch(R){throw s.value=R.message||"Failed to download approval status report",console.error("Error in downloadApprovalStatusReport:",R),R}finally{o.value=!1}},k=async w=>{try{t.value=!0,s.value=null,w.entityIds&&Array.isArray(w.entityIds)&&(w.isSuperAdmin=!0);const R=await Ne.getApprovalStatusPreview(w);return r.value=R,i.value={...w,type:"approval-status"},R}catch(R){throw s.value=R.message||"Failed to get approval status preview",console.error("Error in getApprovalStatusPreview:",R),R}finally{t.value=!1}},b=async w=>{try{t.value=!0,s.value=null,i.value={...w,type:"user-details"},w.entityIds&&Array.isArray(w.entityIds)&&(w.isSuperAdmin=!0);const R=await Ne.getUserDetailsReport(w);n.value=R;const A=await Ne.getUserDetailsPreview(w);return r.value=A,R}catch(R){throw s.value=R.message||"Failed to fetch user details report",console.error("Error in fetchUserDetailsReport:",R),R}finally{t.value=!1}},x=async w=>{try{o.value=!0,s.value=null,w.entityIds&&Array.isArray(w.entityIds)&&(w.isSuperAdmin=!0);const R=await Ne.downloadUserDetailsReport(w);return i.value={...w,type:"user-details"},R}catch(R){throw s.value=R.message||"Failed to download user details report",console.error("Error in downloadUserDetailsReport:",R),R}finally{o.value=!1}},F=async w=>{try{t.value=!0,s.value=null,w.entityIds&&Array.isArray(w.entityIds)&&(w.isSuperAdmin=!0);const R=await Ne.getUserDetailsPreview(w);return r.value=R,i.value={...w,type:"user-details"},R}catch(R){throw s.value=R.message||"Failed to get user details preview",console.error("Error in getUserDetailsPreview:",R),R}finally{t.value=!1}},E=w=>{const{selectedTemple:R,selectedFormat:A,status:j,activeFilter:ne,startDate:K,endDate:q}=w;let le={startDate:K,endDate:q};return(ne!=="custom"||!K||!q)&&(le=we(ne)),{entityId:R==="all"?"all":R.toString(),status:j,dateRange:ne,format:A,startDate:le.startDate,endDate:le.endDate}},O=w=>{const{selectedTemple:R,selectedFormat:A,role:j,status:ne,activeFilter:K,startDate:q,endDate:le}=w;let se={startDate:q,endDate:le};return(K!=="custom"||!q||!le)&&(se=we(K)),{entityId:R==="all"?"all":R.toString(),role:j,status:ne,dateRange:K,format:A,startDate:se.startDate,endDate:se.endDate}},N=w=>{const R=[];!w.entityId&&!w.entityIds&&R.push("Entity ID or Entity IDs are required");const A=["events","sevas","bookings","donations","temple-registered","devotee-birthdays","devotee-list","devotee-profile","audit-logs","approval-status","user-details"];if((!w.type||!A.includes(w.type))&&R.push(`Valid report type is required (${A.join(", ")})`),w.type==="approval-status"){const j=["pending","approved","rejected","all"];w.status&&!j.includes(w.status)&&R.push(`Invalid status filter for approval-status. Allowed values: ${j.join(", ")}`)}if(w.type==="user-details"){const j=["admin","manager","devotee","priest","all"],ne=["active","inactive","pending","all"];w.role&&!j.includes(w.role)&&R.push(`Invalid role filter for user-details. Allowed values: ${j.join(", ")}`),w.status&&!ne.includes(w.status)&&R.push(`Invalid status filter for user-details. Allowed values: ${ne.join(", ")}`)}return w.dateRange==="custom"&&(!w.startDate||!w.endDate?R.push("Start date and end date are required for custom date range"):new Date(w.startDate)>new Date(w.endDate)&&R.push("Start date must be before end date")),w.format&&!["pdf","csv","excel"].includes(w.format)&&R.push("Invalid format specified"),{isValid:R.length===0,errors:R}},L=async w=>{try{t.value=!0,s.value=null,i.value={...w,type:"temple-registered"};const R=await Ne.getTempleRegisteredReport(w);n.value=R;const A=await Ne.getTempleRegisteredPreview(w);return r.value=A,R}catch(R){throw s.value=R.message||"Failed to fetch temple registered report",console.error("Error in fetchTempleRegisteredReport:",R),R}finally{t.value=!1}},M=async w=>{try{o.value=!0,s.value=null;const R=await Ne.downloadTempleRegisteredReport(w);return i.value={...w,type:"temple-registered"},R}catch(R){throw s.value=R.message||"Failed to download temple registered report",console.error("Error in downloadTempleRegisteredReport:",R),R}finally{o.value=!1}},X=async w=>{try{t.value=!0,s.value=null,i.value={...w,type:"devotee-birthdays"};const R=await Ne.getDevoteeBirthdaysReport(w);n.value=R;const A=await Ne.getDevoteeBirthdaysPreview(w);return r.value=A,R}catch(R){throw s.value=R.message||"Failed to fetch devotee birthdays report",console.error("Error in fetchDevoteeBirthdaysReport:",R),R}finally{t.value=!1}},ee=async w=>{try{o.value=!0,s.value=null,w.entityIds&&Array.isArray(w.entityIds)&&(w.isSuperAdmin=!0);const R=await Ne.downloadDevoteeBirthdaysReport(w);return i.value={...w,type:"devotee-birthdays"},R}catch(R){throw s.value=R.message||"Failed to download devotee birthdays report",console.error("Error in downloadDevoteeBirthdaysReport:",R),R}finally{o.value=!1}},oe=async w=>{try{t.value=!0,s.value=null,w.entityIds&&Array.isArray(w.entityIds)&&(w.isSuperAdmin=!0);const R=await Ne.getDevoteeBirthdaysPreview(w);return r.value=R,i.value={...w,type:"devotee-birthdays"},R}catch(R){throw s.value=R.message||"Failed to get devotee birthdays preview",console.error("Error in getDevoteeBirthdaysPreview:",R),R}finally{t.value=!1}},ae=async w=>{try{t.value=!0,s.value=null;const{entityId:R,entityIds:A,status:j="all"}=w;i.value={...w,type:"devotee-list"},A&&Array.isArray(A)&&(w.isSuperAdmin=!0);const ne=await Ne.getDevoteeList(w);n.value=ne;let K=null;ne&&ne.data&&(K=ne.data,K&&K.data&&(K=K.data)),Array.isArray(K)?a.value=K:K&&Array.isArray(K.devotees)?a.value=K.devotees:K&&Array.isArray(K.data)?a.value=K.data:ne&&ne.devotees&&Array.isArray(ne.devotees)?a.value=ne.devotees:(console.warn("No valid devotee data found in response:",ne),a.value=[]),d.value=j;const q=await Ne.getDevoteeListPreview(w);return r.value=q,ne}catch(R){throw s.value=R.message||"Failed to fetch devotee list report",console.error("Error in fetchDevoteeListReport:",R),a.value=[],R}finally{t.value=!1}},H=async w=>{try{o.value=!0,s.value=null;const{format:R}=w;if(!R)throw new Error("Format is required for download");w.entityIds&&Array.isArray(w.entityIds)&&(w.isSuperAdmin=!0);const A=await Ne.downloadDevoteeListReport(w);return i.value={...w,type:"devotee-list"},A}catch(R){throw s.value=R.message||"Failed to download devotee list report",console.error("Error in downloadDevoteeListReport:",R),R}finally{o.value=!1}},J=async(w,R)=>{try{t.value=!0,s.value=null,d.value=R,await ae({entityId:w,status:R})}catch(A){throw s.value=A.message||"Failed to filter devotee list",console.error("Error in setDevoteeListStatus:",A),A}finally{t.value=!1}},z=async w=>{try{t.value=!0,s.value=null;const{entityId:R}=w;i.value={...w,type:"devotee-profile"},w.entityIds&&Array.isArray(w.entityIds)&&(w.isSuperAdmin=!0);const A=await Ne.getDevoteeProfile(w);n.value=A;const j=await Ne.getDevoteeProfilePreview(w);return l.value=j,A}catch(R){throw s.value=R.message||"Failed to fetch devotee profile",console.error("Error in fetchDevoteeProfile:",R),R}finally{t.value=!1}},I=async w=>{try{o.value=!0,s.value=null;const{format:R}=w;if(!R)throw new Error("Format is required for download");w.entityIds&&Array.isArray(w.entityIds)&&(w.isSuperAdmin=!0);const A=await Ne.downloadDevoteeProfileReport(w);return i.value={...w,type:"devotee-profile"},A}catch(R){throw s.value=R.message||"Failed to download devotee profile report",console.error("Error in downloadDevoteeProfileReport:",R),R}finally{o.value=!1}},P=async w=>{try{t.value=!0,s.value=null,w.entityIds&&Array.isArray(w.entityIds)&&(w.isSuperAdmin=!0);const R=await Ne.getDevoteeListPreview(w);return r.value=R,i.value={...w,type:"devotee-list"},R}catch(R){throw s.value=R.message||"Failed to get devotee list preview",console.error("Error in getDevoteeListPreview:",R),R}finally{t.value=!1}},W=async w=>{try{t.value=!0,s.value=null,w.entityIds&&Array.isArray(w.entityIds)&&(w.isSuperAdmin=!0);const R=await Ne.getDevoteeProfilePreview(w);return r.value=R,i.value={...w,type:"devotee-profile"},R}catch(R){throw s.value=R.message||"Failed to get devotee profile preview",console.error("Error in getDevoteeProfilePreview:",R),R}finally{t.value=!1}},we=w=>{const R=new Date,A=new Date;switch(w){case"daily":A.setDate(R.getDate());break;case"weekly":A.setDate(R.getDate()-7);break;case"monthly":A.setDate(R.getDate()-30);break;case"yearly":A.setDate(R.getDate()-365);break;default:A.setDate(R.getDate()-7)}return{startDate:A.toISOString().split("T")[0],endDate:R.toISOString().split("T")[0]}};return{loading:t,downloadLoading:o,error:s,currentReport:n,reportPreview:r,lastReportParams:i,devoteeList:a,devoteeProfile:l,devoteeListStatus:d,hasReportData:c,reportSummary:u,filteredDevoteeList:p,fetchAuditLogsReport:B,downloadAuditLogsReport:_,clearError:v,clearReportData:g,fetchActivitiesReport:h,downloadActivitiesReport:D,getReportPreview:C,fetchTempleRegisteredReport:L,downloadTempleRegisteredReport:M,fetchDevoteeBirthdaysReport:X,downloadDevoteeBirthdaysReport:ee,getDevoteeBirthdaysPreview:oe,fetchDevoteeListReport:ae,downloadDevoteeListReport:H,getDevoteeListPreview:P,setDevoteeListStatus:J,fetchDevoteeProfile:z,downloadDevoteeProfileReport:I,getDevoteeProfilePreview:W,fetchApprovalStatusReport:T,downloadApprovalStatusReport:S,getApprovalStatusPreview:k,fetchUserDetailsReport:b,downloadUserDetailsReport:x,getUserDetailsPreview:F,buildApprovalStatusParams:E,buildUserDetailsParams:O,validateReportParams:N,getDefaultDateRange:we,buildReportParams:w=>{const{selectedTemple:R,activityType:A,activeFilter:j,selectedFormat:ne,startDate:K,endDate:q}=w;let le={startDate:K,endDate:q};return(j!=="custom"||!K||!q)&&(le=we(j)),{entityId:R==="all"?"all":R.toString(),type:A,dateRange:j,format:ne,startDate:le.startDate,endDate:le.endDate}},buildDevoteeBirthdaysParams:w=>{const{selectedTemple:R,activeFilter:A,selectedFormat:j,startDate:ne,endDate:K}=w;let q={startDate:ne,endDate:K};return(A!=="custom"||!ne||!K)&&(q=we(A)),{entityId:R==="all"?"all":R.toString(),dateRange:A,format:j,startDate:q.startDate,endDate:q.endDate}},formatReportData:(w,R)=>!w||!Array.isArray(w)?[]:w.map(A=>{const j={...A};switch(A.created_at&&(j.created_at=new Date(A.created_at).toLocaleDateString()),A.updated_at&&(j.updated_at=new Date(A.updated_at).toLocaleDateString()),R){case"events":A.event_date&&(j.event_date=new Date(A.event_date).toLocaleDateString());break;case"sevas":A.date&&(j.date=new Date(A.date).toLocaleDateString()),A.price&&(j.price=`${A.price.toFixed(2)}`);break;case"bookings":A.booking_time&&(j.booking_time=new Date(A.booking_time).toLocaleString());break;case"devotee-birthdays":A.date_of_birth&&(j.date_of_birth=new Date(A.date_of_birth).toLocaleDateString()),A.member_since&&(j.member_since=new Date(A.member_since).toLocaleDateString());break}return j}),buildDevoteeListParams:w=>{const{selectedTemple:R,selectedFormat:A,status:j="all"}=w;return{entityId:R==="all"?"all":R.toString(),status:j,format:A}},buildDevoteeProfileParams:w=>{const{selectedTemple:R,selectedFormat:A}=w;return{entityId:R==="all"?"all":R.toString(),format:A}}}}),c5={class:"min-h-screen bg-gray-50"},p5={key:0,class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 pt-4"},m5={class:"bg-white shadow-sm border-b border-gray-200 rounded-2xl"},g5={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6"},f5={class:"flex items-center justify-between"},v5={class:"text-gray-600 mt-1"},h5={key:0,class:"text-indigo-600 font-medium"},y5={key:1,class:"text-indigo-600 font-medium"},x5={class:"flex items-center space-x-4"},b5={class:"bg-indigo-50 px-4 py-2 rounded-lg border border-indigo-200"},w5={class:"text-indigo-800 font-medium"},k5={class:"text-indigo-600 text-sm ml-2"},_5={key:1,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},$5={key:2,class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 pt-4"},S5={class:"bg-red-50 border border-red-200 rounded-md p-4"},D5={class:"flex"},C5={class:"ml-3"},T5={class:"mt-1 text-sm text-red-700"},E5={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},A5={class:"bg-white rounded-2xl shadow-sm border border-gray-200 overflow-hidden mb-8"},I5={class:"p-6"},M5={class:"mb-6"},R5={class:"relative"},P5=["value"],j5={key:0,class:"mt-2 text-sm text-amber-600"},N5={key:1,class:"mt-2 text-sm text-gray-500"},L5={class:"mb-6"},B5={class:"flex flex-wrap gap-2"},V5=["onClick"],U5={class:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6"},F5={class:"flex flex-wrap gap-2"},O5=["onClick"],z5={key:0,class:"mb-6 p-4 bg-gray-50 border border-gray-200 rounded-lg"},H5={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},q5={class:"border-t border-gray-200 pt-6"},G5={class:"flex flex-col md:flex-row md:items-center md:justify-between"},W5={class:"flex items-center space-x-3"},J5={class:"relative"},Y5=["value"],K5=["disabled"],X5={key:0,class:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",fill:"none",viewBox:"0 0 24 24"},Z5={key:1,class:"mr-2 h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},Q5={class:"bg-white rounded-2xl shadow-sm border border-gray-200 overflow-hidden mb-8"},e3={class:"p-6"},t3={class:"flex flex-wrap gap-2"},o3={key:0,class:"inline-flex items-center px-3 py-1.5 rounded-full text-sm bg-indigo-100 text-indigo-800"},s3={key:1,class:"inline-flex items-center px-3 py-1.5 rounded-full text-sm bg-indigo-100 text-indigo-800"},n3={class:"inline-flex items-center px-3 py-1.5 rounded-full text-sm bg-indigo-100 text-indigo-800"},r3={class:"inline-flex items-center px-3 py-1.5 rounded-full text-sm bg-indigo-100 text-indigo-800"},a3={key:0},i3={class:"inline-flex items-center px-3 py-1.5 rounded-full text-sm bg-indigo-100 text-indigo-800"},l3={class:"inline-flex items-center px-3 py-1.5 rounded-full text-sm bg-green-100 text-green-800"},d3={key:0,class:"bg-white rounded-2xl shadow-sm border border-gray-200 overflow-hidden"},u3={class:"p-6 border-b border-gray-200"},c3={class:"text-gray-600 mt-1"},p3={class:"overflow-x-auto"},m3={key:0,class:"min-w-full divide-y divide-gray-200"},g3={class:"bg-gray-50"},f3={class:"bg-white divide-y divide-gray-200"},v3={key:0},h3=["colspan"],y3={key:1,class:"p-6 text-center text-gray-500"},x3={key:0,class:"p-4 border-t border-gray-200 bg-gray-50 text-center"},b3={class:"text-sm text-gray-600"},w3={__name:"TempleActivitiesReport",setup(t){const o=Ze();Ke();const s=Uo(),n=tt(),r=lp(),{showToast:i}=je(),a=V("all"),l=V("events"),d=V("monthly"),c=V("pdf"),u=V(new Date(new Date().setDate(new Date().getDate()-30)).toISOString().split("T")[0]),p=V(new Date().toISOString().split("T")[0]),v=V(!1),g=V(null),h=[{label:"Events Report",value:"events"},{label:"Seva Reports",value:"sevas"},{label:"Seva Bookings",value:"bookings"},{label:"Donations Reports",value:"donations"}],D=[{label:"Weekly",value:"weekly"},{label:"Monthly",value:"monthly"},{label:"Yearly",value:"yearly"},{label:"Custom Range",value:"custom"}],C=[{label:"PDF",value:"pdf"},{label:"CSV",value:"csv"},{label:"Excel",value:"excel"}],B=te(()=>o.query.from==="superadmin"),_=te(()=>o.query.tenants?o.query.tenants.split(","):[]),T=te(()=>{var z;if(B.value&&_.value.length===1)return _.value[0];if(o.params.tenantId)return console.log("Using route.params.tenantId:",o.params.tenantId),o.params.tenantId;if((z=n.user)!=null&&z.assignedTenantId)return console.log("Using user assignedTenantId:",n.user.assignedTenantId),n.user.assignedTenantId.toString();const J=localStorage.getItem("current_tenant_id");if(J)return console.log("Using localStorage tenant ID:",J),J;if(ce.defaults.headers.common["X-Tenant-ID"]){const I=ce.defaults.headers.common["X-Tenant-ID"];return console.log("Using X-Tenant-ID header:",I),I.toString()}return console.warn("No tenant ID found, using fallback"),null}),S=te(()=>{var J;return(J=r.reportPreview)!=null&&J.data?r.formatReportData(r.reportPreview.data.slice(0,5),l.value):[]}),k=async J=>{l.value=J,await ee()},b=J=>{if(d.value=J,J!=="custom"){const z=r.getDefaultDateRange(J);u.value=z.startDate,p.value=z.endDate}ee()},x=()=>{ee()},F=()=>{d.value==="custom"&&ee()},E=J=>{if(J==="all")return"All Temples";const z=s.temples.find(I=>I.id.toString()===J.toString());return z?z.name:"Unknown Temple"},O=J=>{const z=h.find(I=>I.value===J);return z?z.label:"Unknown"},N=J=>{const z=D.find(I=>I.value===J);return z?z.label:"Unknown"},L=J=>{const z=C.find(I=>I.value===J);return z?z.label:"Unknown"},M=J=>J?new Date(J).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):"",X=()=>{g.value=null,r.clearError()},ee=async()=>{try{if(!T.value)throw new Error("No valid tenant ID available");let J={type:l.value,dateRange:d.value,startDate:u.value,endDate:p.value,isSuperAdmin:B.value,tenantId:T.value};B.value&&_.value.length>1?(J.entityIds=_.value,J.entityId="multiple"):(J.entityId=a.value==="all"?"all":a.value,J.tenantId=T.value),console.log("Loading report preview with corrected params:",J),await r.getReportPreview(J)}catch(J){console.error("Error loading report preview:",J),i(`Failed to load report preview: ${J.message}`,"error")}},oe=async()=>{var J;v.value=!0,g.value=null;try{if(!T.value)throw new Error("No tenant ID available to fetch temples");if(console.log("Fetching temples for tenant ID:",T.value),s.clearTempleData(),B.value&&_.value.length>1){console.log(`Fetching temples for ${_.value.length} tenants:`,_.value);const z=[];for(const I of _.value)try{const P=await ae(I);z.push(...P)}catch(P){console.warn(`Failed to fetch temples for tenant ${I}:`,P)}s.temples=z,console.log(`Set ${s.temples.length} total temples for ${_.value.length} tenants`)}else{const z=T.value;console.log(`Fetching temples for single tenant ${z}`);try{const I=await ce.get("/v1/entities");let P=[];I.data&&Array.isArray(I.data)?P=I.data:I.data&&Array.isArray(I.data.data)&&(P=I.data.data);const W=P.filter(we=>String(we.created_by)===String(z)||String(we.tenant_id)===String(z)||String(we.id)===String(z));if(console.log(`Filtered ${W.length} temples from ${P.length} total entities for tenant ${z}`),W.length===0&&((J=n.user)!=null&&J.id)){console.log("No temples found with tenant filtering, trying user-specific filtering");const we=P.filter(me=>!0);console.log(`Found ${we.length} temples with user-specific filtering`),s.temples=we.map(me=>it.normalizeTempleData(me))}else s.temples=W.map(we=>it.normalizeTempleData(we))}catch(I){console.error("Error fetching entities directly:",I),console.log("Using store method as fallback"),B.value?await s.fetchTemplesForSuperAdmin(z):await s.fetchTemples(z)}}console.log(`Successfully loaded ${s.temples.length} temples for tenant ${T.value}`),s.temples.length===0&&(console.warn(`No temples found for tenant ID ${T.value}`),g.value=`No temples found for tenant ID ${T.value}. Please verify tenant access.`)}catch(z){console.error("Error in fetchTemples:",z),g.value=`Failed to load temples: ${z.message}`,i(`Failed to load temple data: ${z.message}`,"error")}finally{v.value=!1}},ae=async J=>{try{console.log(`Fetching temples for tenant ${J}`);let z=[];try{const I=await ce.get("/v1/entities");let P=[];if(I.data&&Array.isArray(I.data)?P=I.data:I.data&&Array.isArray(I.data.data)&&(P=I.data.data),z=P.filter(W=>String(W.created_by)===String(J)||String(W.tenant_id)===String(J)),console.log(`Method 1: Found ${z.length} temples for tenant ${J}`),z.length>0)return z.map(W=>it.normalizeTempleData(W))}catch(I){console.warn(`Method 1 failed for tenant ${J}:`,I)}try{const I=await ce.get(`/v1/entities?tenant_id=${J}`);let P=[];if(I.data&&Array.isArray(I.data)?P=I.data:I.data&&Array.isArray(I.data.data)&&(P=I.data.data),console.log(`Method 2: Found ${P.length} temples for tenant ${J}`),P.length>0)return P.map(W=>it.normalizeTempleData(W))}catch(I){console.warn(`Method 2 failed for tenant ${J}:`,I)}try{const I=await ce.get(`/v1/entities?created_by=${J}`);let P=[];if(I.data&&Array.isArray(I.data)?P=I.data:I.data&&Array.isArray(I.data.data)&&(P=I.data.data),console.log(`Method 3: Found ${P.length} temples for tenant ${J}`),P.length>0)return P.map(W=>it.normalizeTempleData(W))}catch(I){console.warn(`Method 3 failed for tenant ${J}:`,I)}return console.warn(`No temples found for tenant ${J} using any method`),[]}catch(z){return console.error(`Error fetching temples for tenant ${J}:`,z),[]}},H=async()=>{try{if(!T.value)throw new Error("No valid tenant ID available for download");let J={type:l.value,dateRange:d.value,format:c.value,startDate:u.value,endDate:p.value,isSuperAdmin:B.value,tenantId:T.value};B.value&&_.value.length>1?(J.entityIds=_.value,J.entityId="multiple"):J.entityId=a.value==="all"?"all":a.value,console.log("Downloading report with corrected params:",J);const z=await r.downloadActivitiesReport(J);if(z&&z.success)i(`${O(l.value)} downloaded successfully as ${L(c.value)}`,"success");else throw new Error((z==null?void 0:z.message)||"Failed to download report")}catch(J){console.error("Error downloading report:",J),i(`Failed to download report: ${J.message}`,"error")}};return Ee(async()=>{if(console.log("TempleActivitiesReport mounted"),console.log("fromSuperadmin:",B.value),console.log("Tenant IDs from URL:",_.value),console.log("Effective tenant ID:",T.value),console.log("Route params:",o.params),console.log("User store:",n.user),console.log("Current X-Tenant-ID header:",ce.defaults.headers.common["X-Tenant-ID"]),!T.value){g.value="No valid tenant ID found. Please check your access permissions.";return}s.clearTempleData(),await oe(),await ee()}),Ue(T,async(J,z)=>{J!==z&&J&&(console.log("Tenant ID changed, refetching temples:",J),s.clearTempleData(),await oe(),await ee())}),Ue(()=>o.params.tenantId,async(J,z)=>{J!==z&&J&&(console.log("Route tenant ID changed:",J),s.clearTempleData(),await oe(),await ee())}),Ee(()=>()=>{r.clearReportData()}),(J,z)=>{var P,W,we,me,De,ge;const I=He("router-link");return m(),f("div",c5,[B.value?(m(),f("div",p5,[re(I,{to:"/superadmin/reports",class:"inline-flex items-center px-4 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition-colors"},{default:fe(()=>[...z[4]||(z[4]=[e("svg",{class:"mr-2 h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 19l-7-7m0 0l7-7m-7 7h18"})],-1),Q(" Back to SuperAdmin Reports ",-1)])]),_:1})])):Y("",!0),e("div",m5,[e("div",g5,[e("div",f5,[e("div",null,[z[6]||(z[6]=e("h1",{class:"text-2xl font-bold text-gray-900"},"Temple Activities Report",-1)),e("p",v5,[z[5]||(z[5]=Q(" Download event, seva, and booking activity data for your temples ",-1)),B.value&&_.value.length>1?(m(),f("span",h5," (Multiple Tenants Selected) ")):T.value?(m(),f("span",y5," (Tenant ID: "+y(T.value)+") ",1)):Y("",!0)])]),e("div",x5,[e("div",b5,[e("span",w5,y(((P=_e(n).user)==null?void 0:P.name)||"Tenant User"),1),e("span",k5,y(B.value?"(Super Admin)":"(Tenant)"),1)])])])])]),v.value||_e(r).loading?(m(),f("div",_5,[...z[7]||(z[7]=[e("div",{class:"bg-white rounded-lg p-6 flex items-center space-x-3"},[e("div",{class:"animate-spin rounded-full h-6 w-6 border-b-2 border-indigo-600"}),e("span",{class:"text-gray-900 font-medium"},"Loading data...")],-1)])])):Y("",!0),g.value||_e(r).error?(m(),f("div",$5,[e("div",S5,[e("div",D5,[z[10]||(z[10]=e("svg",{class:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor"},[e("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"})],-1)),e("div",C5,[z[8]||(z[8]=e("h3",{class:"text-sm font-medium text-red-800"},"Error",-1)),e("p",T5,y(g.value||_e(r).error),1)]),e("div",{class:"ml-auto pl-3"},[e("button",{onClick:X,class:"text-red-400 hover:text-red-500"},[...z[9]||(z[9]=[e("span",{class:"sr-only"},"Dismiss",-1),e("svg",{class:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor"},[e("path",{"fill-rule":"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z","clip-rule":"evenodd"})],-1)])])])])])])):Y("",!0),e("div",E5,[e("div",A5,[z[20]||(z[20]=e("div",{class:"p-6 border-b border-gray-200"},[e("h3",{class:"text-xl font-bold text-gray-900"},"Temple Activities"),e("p",{class:"text-gray-600 mt-1"},"Configure filters and download your temple activity data")],-1)),e("div",I5,[e("div",M5,[z[12]||(z[12]=e("label",{class:"block text-gray-700 font-medium mb-2"},"Select Temple",-1)),e("div",R5,[de(e("select",{"onUpdate:modelValue":z[0]||(z[0]=ue=>a.value=ue),class:"block w-full py-2 px-3 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500",onChange:x},[z[11]||(z[11]=e("option",{value:"all"},"All Temples",-1)),(m(!0),f(he,null,ke(_e(s).temples,ue=>(m(),f("option",{key:ue.id,value:ue.id},y(ue.name),9,P5))),128))],544),[[Ce,a.value]])]),_e(s).temples.length===0&&!v.value?(m(),f("div",j5," No temples found for tenant ID "+y(T.value)+". Please verify tenant access. ",1)):(m(),f("div",N5," Found "+y(_e(s).temples.length)+" temples for tenant "+y(T.value),1))]),e("div",L5,[z[13]||(z[13]=e("label",{class:"block text-gray-700 font-medium mb-2"},"Activity Type",-1)),e("div",B5,[(m(),f(he,null,ke(h,ue=>e("button",{key:ue.value,onClick:$=>k(ue.value),class:ie(["px-4 py-2 rounded-md text-sm font-medium transition-colors duration-200",l.value===ue.value?"bg-indigo-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"])},y(ue.label),11,V5)),64))])]),e("div",U5,[e("div",null,[z[14]||(z[14]=e("label",{class:"block text-gray-700 font-medium mb-2"},"Date Range",-1)),e("div",F5,[(m(),f(he,null,ke(D,ue=>e("button",{key:ue.value,onClick:$=>b(ue.value),class:ie(["px-4 py-2 rounded-md text-sm font-medium transition-colors duration-200",d.value===ue.value?"bg-indigo-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"])},y(ue.label),11,O5)),64))])])]),d.value==="custom"?(m(),f("div",z5,[e("div",H5,[e("div",null,[z[15]||(z[15]=e("label",{class:"block text-gray-700 text-sm font-medium mb-2"},"Start Date",-1)),de(e("input",{type:"date","onUpdate:modelValue":z[1]||(z[1]=ue=>u.value=ue),class:"w-full py-2 px-3 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500",onChange:F},null,544),[[xe,u.value]])]),e("div",null,[z[16]||(z[16]=e("label",{class:"block text-gray-700 text-sm font-medium mb-2"},"End Date",-1)),de(e("input",{type:"date","onUpdate:modelValue":z[2]||(z[2]=ue=>p.value=ue),class:"w-full py-2 px-3 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500",onChange:F},null,544),[[xe,p.value]])])])])):Y("",!0),e("div",q5,[e("div",G5,[z[19]||(z[19]=e("div",{class:"mb-4 md:mb-0"},[e("h4",{class:"text-lg font-medium text-gray-900"},"Download Report"),e("p",{class:"text-sm text-gray-600"},"Select a format and click download")],-1)),e("div",W5,[e("div",J5,[de(e("select",{"onUpdate:modelValue":z[3]||(z[3]=ue=>c.value=ue),class:"block w-full py-2 px-3 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500"},[(m(),f(he,null,ke(C,ue=>e("option",{key:ue.value,value:ue.value},y(ue.label),9,Y5)),64))],512),[[Ce,c.value]])]),e("button",{onClick:H,disabled:_e(r).downloadLoading,class:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50 disabled:cursor-not-allowed"},[_e(r).downloadLoading?(m(),f("svg",X5,[...z[17]||(z[17]=[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)])])):(m(),f("svg",Z5,[...z[18]||(z[18]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"},null,-1)])])),Q(" "+y(_e(r).downloadLoading?"Downloading...":"Download"),1)],8,K5)])])])])]),e("div",Q5,[e("div",e3,[z[27]||(z[27]=e("h3",{class:"text-lg font-medium text-gray-900 mb-4"},"Applied Filters",-1)),e("div",t3,[B.value&&_.value.length>1?(m(),f("div",o3,[z[21]||(z[21]=e("span",{class:"font-medium mr-1"},"Tenants:",-1)),Q(" "+y(_.value.length)+" selected ",1)])):(m(),f("div",s3,[z[22]||(z[22]=e("span",{class:"font-medium mr-1"},"Temple:",-1)),Q(" "+y(a.value==="all"?"All Temples":E(a.value)),1)])),e("div",n3,[z[23]||(z[23]=e("span",{class:"font-medium mr-1"},"Activity:",-1)),Q(" "+y(O(l.value)),1)]),e("div",r3,[z[24]||(z[24]=e("span",{class:"font-medium mr-1"},"Period:",-1)),Q(" "+y(N(d.value))+" ",1),d.value==="custom"?(m(),f("span",a3," ("+y(M(u.value))+" - "+y(M(p.value))+") ",1)):Y("",!0)]),e("div",i3,[z[25]||(z[25]=e("span",{class:"font-medium mr-1"},"Format:",-1)),Q(" "+y(L(c.value)),1)]),e("div",l3,[z[26]||(z[26]=e("span",{class:"font-medium mr-1"},"Tenant ID:",-1)),Q(" "+y(T.value),1)])]),z[28]||(z[28]=e("p",{class:"mt-4 text-sm text-gray-600"}," Your report will include data based on the filters above. Click Download to generate and download the report. ",-1))])]),_e(r).hasReportData?(m(),f("div",d3,[e("div",u3,[z[29]||(z[29]=e("h3",{class:"text-xl font-bold text-gray-900"},"Report Preview",-1)),e("p",c3," Showing "+y(((W=_e(r).reportPreview)==null?void 0:W.totalRecords)||0)+" records ",1)]),e("div",p3,[(me=(we=_e(r).reportPreview)==null?void 0:we.columns)!=null&&me.length?(m(),f("table",m3,[e("thead",g3,[e("tr",null,[(m(!0),f(he,null,ke(_e(r).reportPreview.columns,ue=>(m(),f("th",{key:ue.key,class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},y(ue.label),1))),128))])]),e("tbody",f3,[(m(!0),f(he,null,ke(S.value,(ue,$)=>(m(),f("tr",{key:$},[(m(!0),f(he,null,ke(_e(r).reportPreview.columns,w=>(m(),f("td",{key:w.key,class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},y(ue[w.key]||"-"),1))),128))]))),128)),S.value.length===0?(m(),f("tr",v3,[e("td",{colspan:_e(r).reportPreview.columns.length,class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 text-center"}," No data available for the selected filters ",8,h3)])):Y("",!0)])])):(m(),f("div",y3," No data available for preview "))]),((ge=(De=_e(r).reportPreview)==null?void 0:De.data)==null?void 0:ge.length)>5?(m(),f("div",x3,[e("p",b3," Showing 5 of "+y(_e(r).reportPreview.totalRecords)+" records. Download the full report to see all data. ",1)])):Y("",!0)])):Y("",!0)])])}}},k3={class:"min-h-screen bg-gray-50"},_3={key:0,class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 pt-4"},$3={class:"bg-white shadow-sm border-b border-gray-200 rounded-2xl"},S3={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6"},D3={class:"flex items-center justify-between"},C3={class:"text-gray-600 mt-1"},T3={key:0,class:"text-indigo-600 font-medium"},E3={key:1,class:"text-indigo-600 font-medium"},A3={class:"flex items-center space-x-4"},I3={class:"bg-indigo-50 px-4 py-2 rounded-lg border border-indigo-200"},M3={class:"text-indigo-800 font-medium"},R3={class:"text-indigo-600 text-sm ml-2"},P3={key:1,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},j3={class:"bg-white rounded-lg p-6 flex items-center space-x-3"},N3={class:"text-gray-900 font-medium"},L3={key:2,class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 pt-4"},B3={class:"bg-red-50 border border-red-200 rounded-lg p-4"},V3={class:"flex"},U3={class:"ml-3"},F3={class:"mt-2 text-sm text-red-700"},O3={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},z3={class:"bg-white rounded-2xl shadow-sm border border-gray-200 overflow-hidden mb-8"},H3={class:"p-6"},q3={class:"flex space-x-4 flex-wrap"},G3={class:"bg-white rounded-2xl shadow-sm border border-gray-200 overflow-hidden mb-8"},W3={class:"p-6 border-b border-gray-200"},J3={class:"text-xl font-bold text-gray-900"},Y3={class:"text-gray-600 mt-1"},K3={class:"p-6"},X3={class:"mb-6"},Z3={class:"relative"},Q3=["disabled"],e6=["value"],t6={key:0,class:"mt-2 text-sm text-amber-600"},o6={key:1,class:"mt-2 text-sm text-gray-500"},s6={key:0},n6={class:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6"},r6={class:"flex flex-wrap gap-2"},a6=["onClick","disabled"],i6={key:1},l6={class:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6"},d6={class:"flex flex-wrap gap-2"},u6=["onClick","disabled"],c6={key:0},p6={class:"relative"},m6=["disabled"],g6={key:1},f6={class:"bg-gray-50 border border-gray-200 rounded-md px-3 py-2"},v6={class:"text-gray-700"},h6={key:2},y6={key:3,class:"mb-6 p-4 bg-gray-50 border border-gray-200 rounded-lg"},x6={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},b6=["disabled"],w6=["disabled"],k6={class:"border-t border-gray-200 pt-6"},_6={class:"flex flex-col md:flex-row md:items-center md:justify-between"},$6={class:"flex items-center space-x-3"},S6={class:"relative"},D6=["disabled"],C6=["value"],T6=["disabled"],E6={key:0,class:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",fill:"none",viewBox:"0 0 24 24"},A6={key:1,class:"mr-2 h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},I6={class:"bg-white rounded-2xl shadow-sm border border-gray-200 overflow-hidden mb-8"},M6={class:"p-6"},R6={class:"flex flex-wrap gap-2"},P6={class:"inline-flex items-center px-3 py-1.5 rounded-full text-sm bg-indigo-100 text-indigo-800"},j6={class:"inline-flex items-center px-3 py-1.5 rounded-full text-sm bg-purple-100 text-purple-800"},N6={class:"font-medium mr-1"},L6={key:0},B6={key:1},V6={key:2},U6={class:"inline-flex items-center px-3 py-1.5 rounded-full text-sm bg-indigo-100 text-indigo-800"},F6={class:"inline-flex items-center px-3 py-1.5 rounded-full text-sm bg-indigo-100 text-indigo-800"},O6={class:"font-medium mr-1"},z6={key:0},H6={class:"inline-flex items-center px-3 py-1.5 rounded-full text-sm bg-indigo-100 text-indigo-800"},q6={class:"inline-flex items-center px-3 py-1.5 rounded-full text-sm bg-indigo-100 text-indigo-800"},G6={class:"inline-flex items-center px-3 py-1.5 rounded-full text-sm bg-green-100 text-green-800"},W6={key:0,class:"bg-white rounded-2xl shadow-sm border border-gray-200 overflow-hidden"},J6={class:"p-6 border-b border-gray-200"},Y6={class:"text-sm text-gray-600 mt-1"},K6={class:"overflow-x-auto"},X6={class:"min-w-full divide-y divide-gray-200"},Z6={class:"bg-gray-50"},Q6={class:"bg-white divide-y divide-gray-200"},ek={key:0,class:"p-4 border-t border-gray-200 text-center text-sm text-gray-600"},tk={__name:"BirthdaysReport",setup(t){const o=Ze();Ke();const s=Uo(),n=tt(),r=lp(),{showToast:i}=je(),a=V("birthdays"),l=V("all"),d=V("monthly"),c=V("pdf"),u=V(new Date().toISOString().split("T")[0]),p=V(new Date(new Date().setDate(new Date().getDate()+30)).toISOString().split("T")[0]),v=V("all"),g=[{label:"Weekly",value:"weekly"},{label:"Monthly",value:"monthly"},{label:"Yearly",value:"yearly"},{label:"Custom Range",value:"custom"}],h=[{label:"PDF",value:"pdf"},{label:"CSV",value:"csv"},{label:"Excel",value:"excel"}],D=[{label:"All Statuses",value:"all"},{label:"Active",value:"active"},{label:"Inactive",value:"inactive"},{label:"New Members",value:"new"}],C=te(()=>o.query.from==="superadmin"),B=te(()=>o.query.tenants?o.query.tenants.split(",").filter($=>$&&$.trim()):[]),_=te(()=>{var w,R;if(C.value&&B.value.length===1)return B.value[0];if(o.params.tenantId)return o.params.tenantId;if((w=n.user)!=null&&w.assignedTenantId)return n.user.assignedTenantId.toString();const $=localStorage.getItem("current_tenant_id");return $||(ce.defaults.headers.common["X-Tenant-ID"]?ce.defaults.headers.common["X-Tenant-ID"].toString():(R=n.user)!=null&&R.id?n.user.id.toString():(console.warn("No tenant ID found, using fallback"),null))}),T=te(()=>{try{return(r==null?void 0:r.error)||null}catch($){return console.error("Error getting safe error:",$),null}}),S=te(()=>{try{return!(s!=null&&s.temples)||!Array.isArray(s.temples)?[]:s.temples.filter($=>{if(!$)return!1;const w=($.status||"").toLowerCase();return w==="approved"||w==="active"})}catch($){return console.error("Error getting safe temples:",$),[]}}),k=te(()=>{try{return(r==null?void 0:r.loading)||!1}catch($){return console.error("Error getting loading state:",$),!1}}),b=te(()=>{try{return(r==null?void 0:r.downloadLoading)||!1}catch($){return console.error("Error getting download loading state:",$),!1}}),x=te(()=>k.value||b.value),F=te(()=>{try{return(r==null?void 0:r.reportPreview)||{}}catch($){return console.error("Error getting safe report preview:",$),{}}}),E=te(()=>{try{const $=F.value;return $&&$.data&&Array.isArray($.data)&&$.data.length>0}catch($){return console.error("Error checking valid report data:",$),!1}}),O=te(()=>{var $;try{return(($=F.value)==null?void 0:$.columns)||[]}catch(w){return console.error("Error getting report preview columns:",w),[]}}),N=te(()=>{var $;try{return(($=F.value)==null?void 0:$.data)||[]}catch(w){return console.error("Error getting report preview data:",w),[]}}),L=()=>{try{r&&typeof r.clearError=="function"&&r.clearError()}catch($){console.error("Error clearing error:",$)}},M=async $=>{try{a.value=$,r&&typeof r.clearReportData=="function"&&r.clearReportData(),($==="statusActive"||$==="statusInactive")&&(v.value="all"),await ge()}catch(w){console.error("Error setting report type:",w),i("Failed to switch report type. Please try again.","error")}},X=async()=>{try{L(),await ge()}catch($){console.error("Error handling temple change:",$)}},ee=()=>{try{switch(a.value){case"birthdays":return"Devotee Birthdays";case"devotees":return"Devotee List";case"statusActive":return"Active Devotees";case"statusInactive":return"Inactive Devotees";case"profile":return"Devotee Profile";default:return"Report"}}catch($){return console.error("Error getting report type title:",$),"Report"}},oe=()=>{try{switch(a.value){case"birthdays":return"devotee birthday data";case"devotees":return"devotee list data";case"statusActive":return"active devotee data";case"statusInactive":return"inactive devotee data";case"profile":return"devotee profile data";default:return"report data"}}catch($){return console.error("Error getting report type description:",$),"report data"}},ae=()=>{try{switch(a.value){case"statusActive":return"Active Only";case"statusInactive":return"Inactive Only";case"devotees":return P(v.value);default:return"All"}}catch($){return console.error("Error getting active devotee status label:",$),"All"}},H=async $=>{try{d.value=$;const w=new Date;if($==="weekly"){u.value=new Date().toISOString().split("T")[0];const R=new Date;R.setDate(R.getDate()+30),p.value=R.toISOString().split("T")[0]}else if($==="yearly"){const R=w.getFullYear();u.value=new Date(R,0,1).toISOString().split("T")[0],p.value=new Date(R,11,31).toISOString().split("T")[0]}await ge()}catch(w){console.error("Error setting active filter:",w),i("Failed to set filter. Please try again.","error")}},J=$=>{try{if($==="all")return"All Temples";if(!S.value||!Array.isArray(S.value))return"Unknown Temple";const w=S.value.find(R=>{var A;return((A=R==null?void 0:R.id)==null?void 0:A.toString())===($==null?void 0:$.toString())});return(w==null?void 0:w.name)||"Unknown Temple"}catch(w){return console.error("Error getting temple name:",w),"Unknown Temple"}},z=$=>{try{const w=g.find(R=>R.value===$);return w?w.label:"Unknown"}catch(w){return console.error("Error getting time filter label:",w),"Unknown"}},I=$=>{try{const w=h.find(R=>R.value===$);return w?w.label:"Unknown"}catch(w){return console.error("Error getting format label:",w),"Unknown"}},P=$=>{try{const w=D.find(R=>R.value===$);return w?w.label:"Unknown"}catch(w){return console.error("Error getting devotee status label:",w),"Unknown"}},W=$=>{if(!$)return"";try{return new Date($).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})}catch(w){return console.error("Error formatting date:",w),$||""}},we=()=>{try{if(!_.value)throw new Error("No valid tenant ID available for report generation");const $={dateRange:d.value||"monthly",startDate:u.value,endDate:p.value,format:c.value||"pdf",isSuperAdmin:C.value,tenantId:_.value};return C.value&&B.value.length>1?($.entityIds=B.value,$.entityId="multiple"):$.entityId=l.value==="all"?_.value:l.value,l.value&&l.value!=="all"?$.templeId=l.value.toString():$.templeId="all",a.value==="statusActive"?$.status="active":a.value==="statusInactive"?$.status="inactive":a.value==="devotees"&&v.value&&v.value!=="all"&&($.status=v.value),console.log("Built devotee report params:",$),$}catch($){throw console.error("Error building report params:",$),$}},me=async()=>{try{if(!_.value)throw new Error("No tenant ID available to fetch temples");if(console.log("Fetching temples for tenant ID:",_.value),s.clearTempleData(),C.value&&B.value.length>1){console.log(`Fetching temples for ${B.value.length} tenants:`,B.value);const $=[];for(const w of B.value)try{const R=await De(w);$.push(...R)}catch(R){console.warn(`Failed to fetch temples for tenant ${w}:`,R)}s.temples=$,console.log(`Set ${s.temples.length} total temples for ${B.value.length} tenants`)}else{const $=_.value;console.log(`Fetching temples for single tenant ${$}`);try{const w=await ce.get("/v1/entities");let R=[];w.data&&Array.isArray(w.data)?R=w.data:w.data&&Array.isArray(w.data.data)&&(R=w.data.data);const A=R.filter(j=>String(j.created_by)===String($)||String(j.tenant_id)===String($));console.log(`Filtered ${A.length} temples from ${R.length} total entities for tenant ${$}`),s.temples=A.map(j=>it.normalizeTempleData(j))}catch(w){console.error("Error fetching entities directly:",w),console.log("Using store method as fallback"),C.value?await s.fetchTemplesForSuperAdmin($):await s.fetchTemples($)}}console.log(`Successfully loaded ${s.temples.length} temples for tenant ${_.value}`)}catch($){console.error("Error in fetchTemples:",$),i(`Failed to load temple data: ${$.message}`,"error")}},De=async $=>{try{console.log(`Fetching temples for tenant ${$}`);const w=await ce.get("/v1/entities");let R=[];w.data&&Array.isArray(w.data)?R=w.data:w.data&&Array.isArray(w.data.data)&&(R=w.data.data);const A=R.filter(j=>String(j.created_by)===String($)||String(j.tenant_id)===String($));return console.log(`Found ${A.length} temples for tenant ${$}`),A.map(j=>it.normalizeTempleData(j))}catch(w){return console.error(`Error fetching temples for tenant ${$}:`,w),[]}},ge=async()=>{try{if(!_.value){console.warn("No tenant ID available for preview"),i("Tenant information is missing. Please refresh the page.","error");return}if(C.value&&(!B.value||B.value.length===0)){console.warn("No tenant IDs available for superadmin preview"),i("No tenants selected. Please go back and select tenants.","error");return}let $;try{$={...we()},delete $.format}catch(R){console.error("Error building preview params:",R),i((R==null?void 0:R.message)||"Error building parameters","error");return}if(!r){i("Reports store is not available","error");return}let w=null;switch(a.value){case"birthdays":typeof r.getDevoteeBirthdaysPreview=="function"?w=await r.getDevoteeBirthdaysPreview($):(console.error("getDevoteeBirthdaysPreview method not found in reports store"),i("Birthday reports preview is not available","error"));break;case"devotees":case"statusActive":case"statusInactive":typeof r.getDevoteeListPreview=="function"?w=await r.getDevoteeListPreview($):(console.error("getDevoteeListPreview method not found in reports store"),i("Devotee list preview is not available","error"));break;case"profile":typeof r.getDevoteeProfilePreview=="function"?w=await r.getDevoteeProfilePreview($):(console.warn("getDevoteeProfilePreview method not available in reports store"),i("Devotee profile preview is not available yet","warning"));break;default:console.warn("Unknown report type:",a.value),i("Unknown report type selected","error");break}}catch($){console.error("Error fetching preview:",$);const w=($==null?void 0:$.message)||"Unknown error";i(`Failed to fetch report preview: ${w}`,"error")}},ue=async()=>{try{if(L(),!_.value){i("Tenant information is missing. Please refresh the page.","error");return}if(C.value&&(!B.value||B.value.length===0)){i("Tenant selection is required. Please go back and select tenants.","error");return}if(d.value==="custom"&&(!u.value||!p.value)){i("Please select both start and end dates for custom range","error");return}if(new Date(u.value)>new Date(p.value)){i("Start date must be before end date","error");return}if(!c.value){i("Please select a format for the report","error");return}let $;try{$=we()}catch(A){i((A==null?void 0:A.message)||"Error building parameters","error");return}if(!$.entityId&&!$.entityIds){i("Entity ID is required for report generation","error");return}if(!$.format){i("Format is required for report generation","error");return}if(!r){i("Reports store is not available","error");return}let w;try{switch(a.value){case"birthdays":if(typeof r.downloadDevoteeBirthdaysReport=="function")w=await r.downloadDevoteeBirthdaysReport($);else throw new Error("Birthday report download functionality is not available");break;case"devotees":case"statusActive":case"statusInactive":if(typeof r.downloadDevoteeListReport=="function")w=await r.downloadDevoteeListReport($);else throw new Error("Devotee list report download functionality is not available");break;case"profile":if(typeof r.downloadDevoteeProfileReport=="function")w=await r.downloadDevoteeProfileReport($);else throw new Error("Devotee profile download is not available yet");break;default:throw new Error("Unknown report type selected")}}catch(A){throw console.error("Download error details:",A),A}const R=ee();i(`${R} Report downloaded successfully in ${I(c.value)} format`,"success"),console.log("Download completed successfully:",w)}catch($){console.error("Error downloading report:",$);const w=($==null?void 0:$.message)||"Unknown error";i(`Failed to download report: ${w}`,"error")}};return Ue(a,()=>{console.log("Report type changed to:",a.value),r&&typeof r.clearReportData=="function"&&r.clearReportData(),ge()}),Ue([l,v],()=>{console.log("Filters changed - Temple:",l.value,"Status:",v.value),ge()}),Ue(_,async($,w)=>{$!==w&&$&&(console.log("Tenant ID changed, refetching temples:",$),s.clearTempleData(),await me(),await ge())}),Ue(()=>o.params.tenantId,async($,w)=>{$!==w&&$&&(console.log("Route tenant ID changed:",$),s.clearTempleData(),await me(),await ge())}),Ue(()=>o.query.tenants,async($,w)=>{$!==w&&$&&(console.log("Query tenants changed:",$),s.clearTempleData(),await me(),l.value="all",await ge())}),Ee(async()=>{if(console.log("Devotee Reports mounted"),console.log("fromSuperadmin:",C.value),console.log("Tenant ID:",_.value),console.log("Tenant IDs:",B.value),console.log("Route params:",o.params),console.log("Route query:",o.query),!r){i("Reports store is not available. Please refresh the page.","error");return}if(!s){i("Temple store is not available. Please refresh the page.","error");return}if(!n){i("User store is not available. Please refresh the page.","error");return}if(typeof r.clearReportData=="function"&&r.clearReportData(),!_.value){i("No valid tenant ID found. Please check your access permissions.","error");return}try{await me(),C.value&&B.value&&B.value.length>0||!C.value&&_.value?(console.log("Fetching initial preview..."),await ge()):(console.warn("Skipping initial preview - no valid tenant information"),i("Tenant information is missing. Please refresh the page or go back and select tenants.","warning"))}catch($){console.error("Error in component initialization:",$),i("Failed to initialize reports page. Please refresh and try again.","error")}}),($,w)=>{var A;const R=He("router-link");return m(),f("div",k3,[C.value?(m(),f("div",_3,[re(R,{to:"/superadmin/reports",class:"inline-flex items-center px-4 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition-colors"},{default:fe(()=>[...w[10]||(w[10]=[e("svg",{class:"mr-2 h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 19l-7-7m0 0l7-7m-7 7h18"})],-1),Q(" Back to SuperAdmin Reports ",-1)])]),_:1})])):Y("",!0),e("div",$3,[e("div",S3,[e("div",D3,[e("div",null,[w[12]||(w[12]=e("h1",{class:"text-2xl font-bold text-gray-900"},"Devotee Reports",-1)),e("p",C3,[w[11]||(w[11]=Q(" Download devotee data for your temples ",-1)),C.value&&B.value.length>1?(m(),f("span",T3," (Multiple Tenants Selected: "+y(B.value.length)+") ",1)):_.value?(m(),f("span",E3," (Tenant ID: "+y(_.value)+") ",1)):Y("",!0)])]),e("div",A3,[e("div",I3,[e("span",M3,y(((A=_e(n).user)==null?void 0:A.name)||"Tenant User"),1),e("span",R3,y(C.value?"(Super Admin)":"(Tenant)"),1)])])])])]),k.value||b.value?(m(),f("div",P3,[e("div",j3,[w[13]||(w[13]=e("div",{class:"animate-spin rounded-full h-6 w-6 border-b-2 border-indigo-600"},null,-1)),e("span",N3,y(b.value?"Downloading...":"Loading data..."),1)])])):Y("",!0),T.value?(m(),f("div",L3,[e("div",B3,[e("div",V3,[w[15]||(w[15]=e("div",{class:"flex-shrink-0"},[e("svg",{class:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor"},[e("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"})])],-1)),e("div",U3,[w[14]||(w[14]=e("h3",{class:"text-sm font-medium text-red-800"},"Error",-1)),e("div",F3,y(T.value),1),e("div",{class:"mt-4"},[e("button",{onClick:L,class:"text-sm bg-red-100 text-red-800 px-3 py-1 rounded hover:bg-red-200"}," Dismiss ")])])])])])):Y("",!0),e("div",O3,[e("div",z3,[e("div",H3,[w[16]||(w[16]=e("h3",{class:"text-lg font-medium text-gray-900 mb-4"},"Select Report Type",-1)),e("div",q3,[e("button",{onClick:w[0]||(w[0]=j=>M("birthdays")),class:ie(["px-4 py-2 rounded-md text-sm font-medium transition-colors duration-200",a.value==="birthdays"?"bg-indigo-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"])}," Devotee Birthdays ",2),e("button",{onClick:w[1]||(w[1]=j=>M("devotees")),class:ie(["px-4 py-2 rounded-md text-sm font-medium transition-colors duration-200",a.value==="devotees"?"bg-indigo-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"])}," Devotee List ",2),e("button",{onClick:w[2]||(w[2]=j=>M("statusActive")),class:ie(["px-4 py-2 rounded-md text-sm font-medium transition-colors duration-200",a.value==="statusActive"?"bg-indigo-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"])}," Active Devotees ",2),e("button",{onClick:w[3]||(w[3]=j=>M("statusInactive")),class:ie(["px-4 py-2 rounded-md text-sm font-medium transition-colors duration-200",a.value==="statusInactive"?"bg-indigo-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"])}," Inactive Devotees ",2),e("button",{onClick:w[4]||(w[4]=j=>M("profile")),class:ie(["px-4 py-2 rounded-md text-sm font-medium transition-colors duration-200",a.value==="profile"?"bg-indigo-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"])}," Devotee Profile ",2)])])]),e("div",G3,[e("div",W3,[e("h3",J3,y(ee()),1),e("p",Y3," Configure filters and download "+y(oe()),1)]),e("div",K3,[e("div",X3,[w[18]||(w[18]=e("label",{class:"block text-gray-700 font-medium mb-2"},"Select Temple",-1)),e("div",Z3,[de(e("select",{"onUpdate:modelValue":w[5]||(w[5]=j=>l.value=j),disabled:x.value,class:"block w-full py-2 px-3 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 disabled:bg-gray-100 disabled:cursor-not-allowed",onChange:X},[w[17]||(w[17]=e("option",{value:"all"},"All Temples",-1)),(m(!0),f(he,null,ke(S.value,j=>(m(),f("option",{key:j.id,value:j.id},y(j.name),9,e6))),128))],40,Q3),[[Ce,l.value]])]),S.value.length===0&&!x.value?(m(),f("div",t6," No temples found for tenant ID "+y(_.value)+". Please verify tenant access. ",1)):(m(),f("div",o6," Found "+y(S.value.length)+" temples for tenant "+y(_.value),1))]),a.value==="birthdays"?(m(),f("div",s6,[e("div",n6,[e("div",null,[w[19]||(w[19]=e("label",{class:"block text-gray-700 font-medium mb-2"},"Birthday Period",-1)),e("div",r6,[(m(),f(he,null,ke(g,j=>e("button",{key:j.value,onClick:ne=>H(j.value),disabled:x.value,class:ie(["px-4 py-2 rounded-md text-sm font-medium transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed",d.value===j.value?"bg-indigo-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"])},y(j.label),11,a6)),64))])])])])):["devotees","statusActive","statusInactive"].includes(a.value)?(m(),f("div",i6,[e("div",l6,[e("div",null,[w[20]||(w[20]=e("label",{class:"block text-gray-700 font-medium mb-2"},"Join Date Period",-1)),e("div",d6,[(m(),f(he,null,ke(g,j=>e("button",{key:j.value,onClick:ne=>H(j.value),disabled:x.value,class:ie(["px-4 py-2 rounded-md text-sm font-medium transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed",d.value===j.value?"bg-indigo-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"])},y(j.label),11,u6)),64))])]),a.value==="devotees"?(m(),f("div",c6,[w[22]||(w[22]=e("label",{class:"block text-gray-700 font-medium mb-2"},"Devotee Status",-1)),e("div",p6,[de(e("select",{"onUpdate:modelValue":w[6]||(w[6]=j=>v.value=j),disabled:x.value,class:"block w-full py-2 px-3 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 disabled:bg-gray-100 disabled:cursor-not-allowed"},[...w[21]||(w[21]=[e("option",{value:"all"},"All Statuses",-1),e("option",{value:"active"},"Active",-1),e("option",{value:"inactive"},"Inactive",-1),e("option",{value:"new"},"New Members",-1)])],8,m6),[[Ce,v.value]])])])):a.value==="statusActive"||a.value==="statusInactive"?(m(),f("div",g6,[w[23]||(w[23]=e("label",{class:"block text-gray-700 font-medium mb-2"},"Status Filter",-1)),e("div",f6,[e("span",v6,y(a.value==="statusActive"?"Active Devotees Only":"Inactive Devotees Only"),1)])])):Y("",!0)])])):a.value==="profile"?(m(),f("div",h6,[...w[24]||(w[24]=[e("p",{class:"text-gray-600 mb-6"},"This report includes detailed profile information for devotees.",-1)])])):Y("",!0),d.value==="custom"?(m(),f("div",y6,[e("div",x6,[e("div",null,[w[25]||(w[25]=e("label",{class:"block text-gray-700 text-sm font-medium mb-2"},"Start Date",-1)),de(e("input",{type:"date","onUpdate:modelValue":w[7]||(w[7]=j=>u.value=j),disabled:x.value,class:"w-full py-2 px-3 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 disabled:bg-gray-100 disabled:cursor-not-allowed"},null,8,b6),[[xe,u.value]])]),e("div",null,[w[26]||(w[26]=e("label",{class:"block text-gray-700 text-sm font-medium mb-2"},"End Date",-1)),de(e("input",{type:"date","onUpdate:modelValue":w[8]||(w[8]=j=>p.value=j),disabled:x.value,class:"w-full py-2 px-3 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 disabled:bg-gray-100 disabled:cursor-not-allowed"},null,8,w6),[[xe,p.value]])])])])):Y("",!0),e("div",k6,[e("div",_6,[w[29]||(w[29]=e("div",{class:"mb-4 md:mb-0"},[e("h4",{class:"text-lg font-medium text-gray-900"},"Download Report"),e("p",{class:"text-sm text-gray-600"},"Select a format and click download")],-1)),e("div",$6,[e("div",S6,[de(e("select",{"onUpdate:modelValue":w[9]||(w[9]=j=>c.value=j),disabled:x.value,class:"block w-full py-2 px-3 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 disabled:bg-gray-100 disabled:cursor-not-allowed"},[(m(),f(he,null,ke(h,j=>e("option",{key:j.value,value:j.value},y(j.label),9,C6)),64))],8,D6),[[Ce,c.value]])]),e("button",{onClick:ue,disabled:x.value,class:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50 disabled:cursor-not-allowed"},[b.value?(m(),f("svg",E6,[...w[27]||(w[27]=[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)])])):(m(),f("svg",A6,[...w[28]||(w[28]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"},null,-1)])])),Q(" "+y(b.value?"Downloading...":"Download"),1)],8,T6)])])])])]),e("div",I6,[e("div",M6,[w[35]||(w[35]=e("h3",{class:"text-lg font-medium text-gray-900 mb-4"},"Applied Filters",-1)),e("div",R6,[e("div",P6,[w[30]||(w[30]=e("span",{class:"font-medium mr-1"},"Report Type:",-1)),Q(" "+y(ee()),1)]),e("div",j6,[e("span",N6,y(C.value?"Tenant(s):":"Tenant:"),1),C.value&&B.value.length>1?(m(),f("span",L6,y(B.value.length)+" selected ",1)):C.value&&B.value.length===1?(m(),f("span",B6,y(B.value[0]),1)):(m(),f("span",V6,y(_.value),1))]),e("div",U6,[w[31]||(w[31]=e("span",{class:"font-medium mr-1"},"Temple:",-1)),Q(" "+y(l.value==="all"?"All Temples":J(l.value)),1)]),e("div",F6,[e("span",O6,y(["birthdays","profile"].includes(a.value)?"Birthday":"Join Date")+" Period:",1),Q(" "+y(z(d.value))+" ",1),d.value==="custom"?(m(),f("span",z6," ("+y(W(u.value))+" - "+y(W(p.value))+") ",1)):Y("",!0)]),e("div",H6,[w[32]||(w[32]=e("span",{class:"font-medium mr-1"},"Status:",-1)),Q(" "+y(ae()),1)]),e("div",q6,[w[33]||(w[33]=e("span",{class:"font-medium mr-1"},"Format:",-1)),Q(" "+y(I(c.value)),1)]),e("div",G6,[w[34]||(w[34]=e("span",{class:"font-medium mr-1"},"Tenant ID:",-1)),Q(" "+y(_.value),1)])]),w[36]||(w[36]=e("p",{class:"mt-4 text-sm text-gray-600"}," Your report will include data based on the filters above. Click Download to generate and download the report. ",-1))])]),E.value?(m(),f("div",W6,[e("div",J6,[w[37]||(w[37]=e("h3",{class:"text-lg font-medium text-gray-900"},"Report Preview",-1)),e("p",Y6," Showing "+y(F.value.totalRecords||N.value.length)+" records ",1)]),e("div",K6,[e("table",X6,[e("thead",Z6,[e("tr",null,[(m(!0),f(he,null,ke(O.value,j=>(m(),f("th",{key:j.key,class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},y(j.label),1))),128))])]),e("tbody",Q6,[(m(!0),f(he,null,ke(N.value.slice(0,10),(j,ne)=>(m(),f("tr",{key:ne},[(m(!0),f(he,null,ke(O.value,K=>(m(),f("td",{key:K.key,class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},y((j==null?void 0:j[K.key])||"-"),1))),128))]))),128))])])]),N.value.length>10?(m(),f("div",ek," Showing first 10 records. Download the full report to see all "+y(F.value.totalRecords||N.value.length)+" records. ",1)):Y("",!0)])):Y("",!0)])])}}},ok=async()=>{var t,o;try{console.log(" Fetching tenants for selection");const s=await ce.get("/tenants/selection");return console.log(" Tenants fetched:",s.data),Array.isArray(s.data)?s.data:(t=s.data)!=null&&t.data&&Array.isArray(s.data.data)?s.data.data:(console.warn(" Unexpected tenants response format:",s.data),[])}catch(s){return console.error(" Error fetching tenants for selection:",s),console.error("Error response:",(o=s.response)==null?void 0:o.data),[]}},sk=async t=>{var o;try{console.log(" Making API call to fetch available temples"),console.log(" Search params:",{tenantId:t,headers:ce.defaults.headers.common});const s=window.location.pathname;console.log(" Current path:",s),t&&(ce.defaults.headers.common["X-Tenant-ID"]=t);const r=(tt().userRole||"").toLowerCase(),i=r.includes("monitoring")||r.includes("monitoringuser"),a=r.includes("standard")||r.includes("standarduser");let l="/entities";(i||a)&&t?(console.log(" Standard/Monitoring user accessing temples for tenant ID:",t),l="/entities"):t?(console.log(" Using admin endpoint: /entities"),l="/entities"):(console.log(" Using user endpoint: /entities/available"),l="/entities/available"),console.log(` Making GET request to: ${l}`);const d=await ce.get(l);let c=d.data;return d.data&&d.data.data&&Array.isArray(d.data.data)?c=d.data.data:Array.isArray(c)||(console.warn(" Unexpected response format:",d.data),c=[]),console.log(` Received ${c.length} temples:`,c),c}catch(s){return console.error(" Error fetching temples:",s),console.error("Error response:",(o=s.response)==null?void 0:o.data),[]}},nk=async t=>{var o;try{console.log(` Fetching temple with ID: ${t}`);const s=await ce.get(`/entities/${t}`);return console.log(" Temple details response:",s.data),s.data}catch(s){throw console.error(` Error fetching temple ID ${t}:`,s),console.error("Error response:",(o=s.response)==null?void 0:o.data),s}},rk=async t=>{try{return(await ce.post("/entities",t)).data}catch(o){throw console.error("Error creating temple:",o),o}},ak=async(t,o)=>{try{return(await ce.put(`/entities/${t}`,o)).data}catch(s){throw console.error("Error updating temple:",s),s}},ik=async t=>{try{return(await ce.delete(`/entities/${t}`)).data}catch(o){throw console.error("Error deleting temple:",o),o}},lk=async(t,o={})=>{var s;try{console.log(" Fetching tenant users");const n=new URLSearchParams;o.role&&n.append("role",o.role),o.name&&n.append("name",o.name);const r=n.toString(),i=`/tenants/${t}/user/management${r?`?${r}`:""}`;console.log(` Making GET request to: ${i}`);const a=await ce.get(i);let l=a.data;a.data&&a.data.data&&Array.isArray(a.data.data)&&(l=a.data.data);const d=l.map(Ra);return console.log(` Received ${d.length} users:`,d),d}catch(n){return console.error(" Error fetching tenant users:",n),console.error("Error response:",(s=n.response)==null?void 0:s.data),[]}},dk=async(t,o)=>{var s;try{console.log(` Creating/updating user for tenant ${t}:`,o),ce.defaults.headers.common["X-Tenant-ID"]=t;const n={Name:o.name,Email:o.email,Phone:o.phone,Password:o.password,Role:o.role,Status:o.status||"active"},r=await ce.post(`/tenants/${t}/user`,n);console.log(" User creation response:",r.data);const i=r.data.user||r.data;return Ra(i)}catch(n){throw console.error(" Error creating/updating tenant user:",n),console.error("Error response:",(s=n.response)==null?void 0:s.data),n}},uk=async(t,o)=>{var s;try{console.log(` Updating user ${o.id} for tenant ${t}:`,o),ce.defaults.headers.common["X-Tenant-ID"]=t;const n=o.hasOwnProperty("status")&&Object.keys(o).filter(i=>i!=="id"&&i!=="status").length===0;let r;if(n)console.log(` Sending status update (${o.status}) for user ${o.id}`),r=await ce.put(`/tenants/${t}/user/${o.id}`,{Status:o.status});else{const i={Name:o.name,Email:o.email,Phone:o.phone,Role:o.role,Password:o.password||"password123",Status:o.status};console.log(` Sending full update for user ${o.id}:`,i),r=await ce.put(`/tenants/${t}/user/${o.id}`,i)}return console.log(" User update response:",r.data),r.data.user||r.data}catch(n){throw console.error(" Error updating tenant user:",n),console.error("Error response:",(s=n.response)==null?void 0:s.data),n}},ck=async(t,o,s)=>{var n;try{console.log(` Updating status to ${s} for user ${o} in tenant ${t}`),ce.defaults.headers.common["X-Tenant-ID"]=t;const r=await ce.put(`/tenants/${t}/user/${o}`,{Status:s});return console.log(" Status update response:",r.data),r.data.user||r.data}catch(r){throw console.error(" Error updating status:",r),console.error("Error response:",(n=r.response)==null?void 0:n.data),r}},Ra=t=>{if(!t)return t;const o={...t};return typeof o.role=="string"&&(o.role.toLowerCase()==="monitoringuser"?o.role="MonitoringUser":o.role.toLowerCase()==="standarduser"&&(o.role="StandardUser")),o},pk={getTenantsForSelection:ok,getTemples:sk,getTempleById:nk,createTemple:rk,updateTemple:ak,deleteTemple:ik,getTenantUsers:lk,createOrUpdateTenantUser:dk,updateTenantUser:uk,updateUserStatus:ck,standardizeUserData:Ra},mk={class:"tenant-selection-page"},gk={class:"bg-indigo-50 rounded-2xl shadow-md p-6 mb-6"},fk={class:"flex flex-col md:flex-row md:items-center justify-between"},vk={class:"text-2xl font-bold text-indigo-800 mb-2"},hk={class:"flex flex-wrap gap-3 items-center"},yk={class:"bg-indigo-600 text-white text-sm px-3 py-1 rounded-xl"},xk={class:"text-indigo-700"},bk={key:0,class:"mt-4 md:mt-0"},wk={class:"bg-white rounded-2xl shadow-md p-6"},kk={class:"text-xl font-bold text-indigo-700 mb-4"},_k={class:"text-gray-600 mb-6"},$k={key:0,class:"flex justify-center"},Sk={key:1},Dk={class:"mb-6"},Ck={class:"relative"},Tk={key:0,class:"flex justify-center py-12"},Ek={key:1,class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4"},Ak=["onClick"],Ik={class:"relative h-36 bg-indigo-100 overflow-hidden"},Mk=["src","alt"],Rk={key:1,class:"w-full h-full flex items-center justify-center"},Pk={class:"absolute top-2 right-2"},jk={class:"p-4"},Nk={class:"font-bold text-lg text-indigo-900 mb-1"},Lk={class:"text-gray-600 text-sm mb-3"},Bk={class:"flex items-center text-gray-500 text-sm mb-3"},Vk=["onClick"],Uk={key:2,class:"text-center py-8"},Fk={key:3,class:"mt-8 flex justify-center"},Ok={__name:"TenantSelectionView",setup(t){var C,B,_,T,S;const o=tt();Ke();const{showToast:s}=je(),n=V({id:((C=o.user)==null?void 0:C.id)||1,name:((B=o.user)==null?void 0:B.fullName)||((_=o.user)==null?void 0:_.name)||"User",email:((T=o.user)==null?void 0:T.email)||"user@example.com",role:o.userRole||((S=o.user)==null?void 0:S.role)||"standard_user"}),r=V(!1),i=V([]),a=V(null),l=V(""),d=te(()=>{var b;const k=((b=n.value.role)==null?void 0:b.toLowerCase())||"";return k==="superadmin"||k==="super_admin"}),c=te(()=>{var b;const k=((b=n.value.role)==null?void 0:b.toLowerCase())||"";return k==="monitoringuser"||k==="monitoring_user"}),u=V(!d.value),p=te(()=>d.value?"As a Super Admin, you can access and manage all tenant dashboards.":c.value?"Select a tenant to view their dashboard. As a Monitoring User, you have limited access to view data.":"Select a tenant to access their dashboard and management features."),v=te(()=>{if(!l.value)return i.value;const k=l.value.toLowerCase();return i.value.filter(b=>{var x,F,E;return((x=b.name)==null?void 0:x.toLowerCase().includes(k))||((F=b.location)==null?void 0:F.toLowerCase().includes(k))||((E=b.email)==null?void 0:E.toLowerCase().includes(k))})}),g=async()=>{r.value=!0,u.value=!0;try{const k=await pk.getTenantsForSelection();Array.isArray(k)&&k.length>0?i.value=k:(i.value=[],s("No tenants available for selection","warning"))}catch(k){console.error("Failed to load tenants:",k),s("Using development data while API is being set up","info")}finally{r.value=!1}},h=k=>{a.value=Number(k)},D=()=>{if(!a.value){s("Please select a tenant to proceed","warning");return}try{localStorage.setItem("selected_tenant_id",a.value),localStorage.setItem("current_tenant_id",a.value),localStorage.setItem("current_entity_id",a.value);const k=localStorage.getItem("auth_token");k&&(Te.defaults.headers.common.Authorization=`Bearer ${k}`,Te.defaults.headers.common["X-Tenant-ID"]=a.value);const b=i.value.find(F=>Number(F.id)===Number(a.value));b&&localStorage.setItem("selected_tenant_name",b.name);const x=`/tenant/${a.value}/dashboard`;window.location.href=x}catch(k){console.error("Navigation error:",k),s("Failed to navigate to dashboard. Please try again.","error")}};return Ee(()=>{d.value||g();const k=localStorage.getItem("selected_tenant_id");k&&(a.value=Number(k));const b=localStorage.getItem("auth_token");b&&(Te.defaults.headers.common.Authorization=`Bearer ${b}`)}),(k,b)=>(m(),f("div",mk,[e("div",gk,[e("div",fk,[e("div",null,[e("h1",vk,"Welcome, "+y(n.value.name),1),e("div",hk,[e("span",yk,y(n.value.role),1),e("span",xk,y(n.value.email),1)])]),d.value?(m(),f("div",bk,[...b[1]||(b[1]=[e("p",{class:"text-indigo-600 font-semibold"}," Super Admin Access ",-1)])])):Y("",!0)])]),e("div",wk,[e("h2",kk,y(d.value?"Tenant Management":"Select a Tenant"),1),e("p",_k,y(p.value),1),d.value&&!u.value?(m(),f("div",$k,[e("button",{onClick:g,class:"bg-indigo-600 hover:bg-indigo-700 text-white font-semibold py-3 px-6 rounded-xl shadow-md transition-all duration-200 flex items-center"},[...b[2]||(b[2]=[e("span",null,"Show Tenants",-1),e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 ml-2",viewBox:"0 0 20 20",fill:"currentColor"},[e("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm1-11a1 1 0 10-2 0v3.586L7.707 9.293a1 1 0 00-1.414 1.414l3 3a1 1 0 001.414 0l3-3a1 1 0 00-1.414-1.414L11 10.586V7z","clip-rule":"evenodd"})],-1)])])])):Y("",!0),u.value?(m(),f("div",Sk,[e("div",Dk,[e("div",Ck,[de(e("input",{"onUpdate:modelValue":b[0]||(b[0]=x=>l.value=x),type:"text",placeholder:"Search tenants...",class:"w-full pl-10 pr-4 py-2 border border-indigo-200 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-all duration-200"},null,512),[[xe,l.value]]),b[3]||(b[3]=e("div",{class:"absolute left-3 top-2.5 text-indigo-400"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor"},[e("path",{"fill-rule":"evenodd",d:"M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z","clip-rule":"evenodd"})])],-1))])]),r.value?(m(),f("div",Tk,[...b[4]||(b[4]=[e("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600"},null,-1)])])):v.value.length>0?(m(),f("div",Ek,[(m(!0),f(he,null,ke(v.value,x=>(m(),f("div",{key:x.id,onClick:F=>h(x.id),class:ie(["bg-white border rounded-xl overflow-hidden shadow-md hover:shadow-lg transition-all duration-200 cursor-pointer",{"border-indigo-500 ring-2 ring-indigo-500":a.value===x.id,"border-gray-200":a.value!==x.id}])},[e("div",Ik,[x.imageUrl?(m(),f("img",{key:0,src:x.imageUrl,alt:x.name,class:"w-full h-full object-cover"},null,8,Mk)):(m(),f("div",Rk,[...b[5]||(b[5]=[e("span",{class:"text-indigo-800 text-5xl opacity-30"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-16 w-16",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1",d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})])],-1)])])),e("div",Pk,[e("span",{class:ie(["px-2 py-1 text-xs font-semibold rounded-lg",{"bg-green-100 text-green-800":x.status==="active"||x.status==="approved","bg-yellow-100 text-yellow-800":x.status==="pending","bg-red-100 text-red-800":x.status==="inactive"}])},y(x.status),3)])]),e("div",jk,[e("h3",Nk,y(x.name),1),e("p",Lk,y(x.location||x.email),1),e("div",Bk,[b[6]||(b[6]=e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})],-1)),e("span",null,y(x.templesCount||0)+" temples",1)]),e("button",{onClick:Oe(F=>h(x.id),["stop"]),class:ie(["w-full py-2 px-4 flex justify-center items-center rounded-lg text-sm font-medium transition-all duration-200",a.value===x.id?"bg-indigo-600 text-white hover:bg-indigo-700":"border border-indigo-500 text-indigo-600 hover:bg-indigo-50"])},y(a.value===x.id?"Selected":"Select"),11,Vk)])],10,Ak))),128))])):(m(),f("div",Uk,[...b[7]||(b[7]=[$e('<div class="text-indigo-300 mb-4" data-v-699d0b47><svg xmlns="http://www.w3.org/2000/svg" class="h-16 w-16 mx-auto" fill="none" viewBox="0 0 24 24" stroke="currentColor" data-v-699d0b47><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1" d="M8 16l2.879-2.879m0 0a3 3 0 104.243-4.242 3 3 0 00-4.243 4.242zM21 12a9 9 0 11-18 0 9 9 0 0118 0z" data-v-699d0b47></path></svg></div><h3 class="text-lg font-medium text-gray-800 mb-1" data-v-699d0b47>No tenants found</h3><p class="text-gray-500" data-v-699d0b47>Try adjusting your search or filters</p>',3)])])),a.value&&v.value.length>0?(m(),f("div",Fk,[e("button",{onClick:D,class:"bg-indigo-600 hover:bg-indigo-700 text-white font-semibold py-3 px-8 rounded-xl shadow-md transition-all duration-200 flex items-center",id:"proceed-button"},[...b[8]||(b[8]=[e("span",null,"Proceed to Dashboard",-1),e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 ml-2",viewBox:"0 0 20 20",fill:"currentColor"},[e("path",{"fill-rule":"evenodd",d:"M10.293 5.293a1 1 0 011.414 0l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414-1.414L12.586 11H5a1 1 0 110-2h7.586l-2.293-2.293a1 1 0 010-1.414z","clip-rule":"evenodd"})],-1)])])])):Y("",!0)])):Y("",!0)])]))}},zk=Qe(Ok,[["__scopeId","data-v-699d0b47"]]),Hk={class:"min-h-screen bg-gradient-to-br from-indigo-50 via-white to-indigo-100"},qk={class:"flex-1"},dp={__name:"PublicLayout",setup(t){return V(!1),(o,s)=>{const n=He("router-view");return m(),f("div",Hk,[e("main",qk,[re(n)])])}}},Gk={class:"min-h-screen bg-gradient-to-br from-indigo-50 via-white to-indigo-100 flex flex-col"},Wk={class:"bg-white/80 backdrop-blur-sm border-b border-indigo-100"},Jk={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},Yk={class:"flex justify-between items-center h-16"},Kk={class:"flex-1 flex items-center justify-center px-4 sm:px-6 lg:px-8 py-12"},Xk={class:"w-full max-w-md"},Zk={class:"bg-white/90 backdrop-blur-sm rounded-2xl shadow-xl border border-white/20 p-8"},Qk={class:"bg-white/80 backdrop-blur-sm border-t border-indigo-100"},e_={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4"},t_={class:"flex flex-col sm:flex-row justify-between items-center space-y-2 sm:space-y-0"},o_={class:"flex items-center space-x-6"},s_={__name:"AuthLayout",setup(t){return(o,s)=>{const n=He("router-link"),r=He("router-view");return m(),f("div",Gk,[e("header",Wk,[e("div",Jk,[e("div",Yk,[re(n,{to:"/",class:"flex items-center space-x-3"},{default:fe(()=>[...s[0]||(s[0]=[e("div",{class:"flex items-center space-x-3"},[e("div",{class:"w-10 h-10 bg-gradient-to-br from-indigo-600 to-indigo-800 rounded-xl flex items-center justify-center"},[e("svg",{class:"w-6 h-6 text-white",fill:"currentColor",viewBox:"0 0 24 24"},[e("path",{d:"M12 2L2 7v10c0 5.55 3.84 9.739 9 11 5.16-1.261 9-5.45 9-11V7l-10-5z"})])]),e("span",{class:"text-xl font-bold text-gray-900"},"TempleSaaS")],-1)])]),_:1}),re(n,{to:"/",class:"text-gray-600 hover:text-indigo-600 transition-colors font-medium flex items-center space-x-2"},{default:fe(()=>[...s[1]||(s[1]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 19l-7-7m0 0l7-7m-7 7h18"})],-1),e("span",null,"Back to Home",-1)])]),_:1})])])]),e("main",Kk,[e("div",Xk,[e("div",Zk,[re(r)]),s[2]||(s[2]=e("div",{class:"mt-6 text-center"},[e("p",{class:"text-sm text-gray-600"},[Q(" Need help? "),e("a",{href:"mailto:support@templesync.com",class:"text-indigo-600 hover:text-indigo-700 font-medium transition-colors"}," Contact Support ")])],-1))])]),e("footer",Qk,[e("div",e_,[e("div",t_,[s[5]||(s[5]=e("p",{class:"text-sm text-gray-600"},"  2025 TempleSync. All rights reserved. ",-1)),e("div",o_,[re(n,{to:"/terms",class:"text-sm text-gray-600 hover:text-indigo-600 transition-colors"},{default:fe(()=>[...s[3]||(s[3]=[Q(" Terms ",-1)])]),_:1}),re(n,{to:"/privacy",class:"text-sm text-gray-600 hover:text-indigo-600 transition-colors"},{default:fe(()=>[...s[4]||(s[4]=[Q(" Privacy ",-1)])]),_:1})])])])]),s[6]||(s[6]=e("div",{class:"fixed inset-0 -z-10 overflow-hidden pointer-events-none"},[e("div",{class:"absolute -top-40 -right-40 w-80 h-80 bg-indigo-300 rounded-full mix-blend-multiply filter blur-xl opacity-20 animate-pulse"}),e("div",{class:"absolute -bottom-40 -left-40 w-80 h-80 bg-purple-300 rounded-full mix-blend-multiply filter blur-xl opacity-20 animate-pulse",style:{"animation-delay":"2s"}}),e("div",{class:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-80 h-80 bg-pink-300 rounded-full mix-blend-multiply filter blur-xl opacity-10 animate-pulse",style:{"animation-delay":"4s"}})],-1))])}}},up=Vo("notification",()=>{const t=V([]),o=V(0),s=V(!1),n=V(null),r={TEMPLE_APPROVED:"temple_approved",TEMPLE_REJECTED:"temple_rejected",TEMPLE_PENDING:"temple_pending",NEW_DEVOTEE_REGISTRATION:"new_devotee_registration",NEW_SEVA_BOOKING:"new_seva_booking",NEW_DONATION:"new_donation",EVENT_RSVP:"event_rsvp",PROFILE_INCOMPLETE:"profile_incomplete",SEVA_CONFIRMATION:"seva_confirmation",SEVA_REMINDER:"seva_reminder",DONATION_RECEIPT:"donation_receipt",EVENT_INVITATION:"event_invitation",EVENT_REMINDER:"event_reminder",TEMPLE_ANNOUNCEMENT:"temple_announcement",ASSIGNMENT_CREATED:"assignment_created",ASSIGNMENT_UPDATED:"assignment_updated",SCHEDULE_CHANGED:"schedule_changed",NEW_TENANT_REGISTRATION:"new_tenant_registration",TEMPLE_APPROVAL_REQUIRED:"temple_approval_required",SYSTEM_MAINTENANCE:"system_maintenance",SYSTEM_UPDATE:"system_update",WELCOME:"welcome",SUCCESS:"success",ERROR:"error",WARNING:"warning",INFO:"info"},i={LOW:"low",MEDIUM:"medium",HIGH:"high",URGENT:"urgent"},a={TEMPLE:"temple",SEVA:"seva",DONATION:"donation",EVENT:"event",PROFILE:"profile",SYSTEM:"system",APPROVAL:"approval",COMMUNICATION:"communication"},l=te(()=>t.value.filter(I=>!I.isRead)),d=te(()=>t.value.filter(I=>!I.isRead).sort((I,P)=>new Date(P.createdAt)-new Date(I.createdAt)).slice(0,5)),c=te(()=>{const I={};return t.value.forEach(P=>{const W=P.category||"general";I[W]||(I[W]=[]),I[W].push(P)}),I}),u=te(()=>t.value.filter(I=>I.priority===i.HIGH||I.priority===i.URGENT)),p=I=>{const P={id:Date.now()+Math.random(),title:I.title||"Notification",message:I.message||"",type:I.type||r.INFO,category:I.category||a.SYSTEM,priority:I.priority||i.MEDIUM,isRead:!1,isPersistent:I.isPersistent||!1,autoClose:I.autoClose!==!1,duration:I.duration||5e3,createdAt:new Date().toISOString(),readAt:null,userId:I.userId||null,entityId:I.entityId||null,actionUrl:I.actionUrl||null,actionText:I.actionText||null,metadata:I.metadata||{},icon:I.icon||N(I.type),color:I.color||L(I.type)};return t.value.unshift(P),P.isRead||o.value++,P.id},v=I=>{const P=t.value.find(W=>W.id===I);P&&!P.isRead&&(P.isRead=!0,P.readAt=new Date().toISOString(),o.value=Math.max(0,o.value-1))},g=()=>{t.value.forEach(I=>{I.isRead||(I.isRead=!0,I.readAt=new Date().toISOString())}),o.value=0},h=I=>{const P=t.value.findIndex(W=>W.id===I);P>-1&&(t.value[P].isRead||(o.value=Math.max(0,o.value-1)),t.value.splice(P,1))},D=()=>{t.value=[],o.value=0},C=()=>{t.value=t.value.filter(I=>!I.isRead)},B=(I,P="info",W={})=>p({title:W.title||M(P),message:I,type:P,category:a.SYSTEM,priority:W.priority||i.MEDIUM,autoClose:W.autoClose!==!1,duration:W.duration||X(P),isPersistent:!1,...W}),_=(I,P={})=>B(I,r.SUCCESS,P),T=(I,P={})=>B(I,r.ERROR,{duration:8e3,priority:i.HIGH,...P}),S=(I,P={})=>B(I,r.WARNING,P),k=(I,P={})=>B(I,r.INFO,P),b=(I,P)=>p({title:P?"Temple Approved!":"Temple Rejected",message:P?`Your temple "${I.name}" has been approved. You can now start managing your temple.`:`Your temple "${I.name}" was rejected. Please check the notes and resubmit.`,type:P?r.TEMPLE_APPROVED:r.TEMPLE_REJECTED,category:a.TEMPLE,priority:i.HIGH,isPersistent:!0,autoClose:!1,actionUrl:P?"/tenant/dashboard":"/tenant/entities/create",actionText:P?"View Dashboard":"Resubmit Temple",metadata:{templeId:I.id}}),x=(I,P)=>p({title:"New Seva Booking",message:`${P.name} has booked ${I.name} seva.`,type:r.NEW_SEVA_BOOKING,category:a.SEVA,priority:i.MEDIUM,isPersistent:!0,actionUrl:`/entity/${I.entityId}/sevas`,actionText:"View Seva",metadata:{sevaId:I.id,devoteeId:P.id}}),F=I=>p({title:"Donation Received",message:`New donation of ${I.amount} received from ${I.donorName}.`,type:r.NEW_DONATION,category:a.DONATION,priority:i.MEDIUM,isPersistent:!0,actionUrl:`/entity/${I.entityId}/donations`,actionText:"View Donation",metadata:{donationId:I.id}}),E=I=>p({title:"Complete Your Profile",message:"Please complete your profile to enjoy full temple services.",type:r.PROFILE_INCOMPLETE,category:a.PROFILE,priority:i.MEDIUM,isPersistent:!0,actionUrl:"/profile/complete",actionText:"Complete Profile",metadata:{devoteeId:I.id}}),O=I=>p({title:"Event Invitation",message:`You're invited to ${I.name} on ${new Date(I.date).toLocaleDateString()}.`,type:r.EVENT_INVITATION,category:a.EVENT,priority:i.MEDIUM,isPersistent:!0,actionUrl:`/entity/${I.entityId}/events/${I.id}`,actionText:"View Event",metadata:{eventId:I.id}}),N=I=>({[r.SUCCESS]:"CheckCircle",[r.ERROR]:"XCircle",[r.WARNING]:"AlertTriangle",[r.INFO]:"Info",[r.TEMPLE_APPROVED]:"CheckCircle",[r.TEMPLE_REJECTED]:"XCircle",[r.NEW_SEVA_BOOKING]:"Calendar",[r.NEW_DONATION]:"CreditCard",[r.EVENT_INVITATION]:"Calendar",[r.PROFILE_INCOMPLETE]:"User",[r.ASSIGNMENT_CREATED]:"UserCheck",[r.SYSTEM_MAINTENANCE]:"Settings"})[I]||"Bell",L=I=>({[r.SUCCESS]:"text-green-600 bg-green-50",[r.ERROR]:"text-red-600 bg-red-50",[r.WARNING]:"text-yellow-600 bg-yellow-50",[r.INFO]:"text-indigo-600 bg-indigo-50",[r.TEMPLE_APPROVED]:"text-green-600 bg-green-50",[r.TEMPLE_REJECTED]:"text-red-600 bg-red-50",[r.NEW_SEVA_BOOKING]:"text-indigo-600 bg-indigo-50",[r.NEW_DONATION]:"text-purple-600 bg-purple-50",[r.EVENT_INVITATION]:"text-blue-600 bg-blue-50"})[I]||"text-indigo-600 bg-indigo-50",M=I=>({[r.SUCCESS]:"Success",[r.ERROR]:"Error",[r.WARNING]:"Warning",[r.INFO]:"Information"})[I]||"Notification",X=I=>({[r.SUCCESS]:4e3,[r.ERROR]:8e3,[r.WARNING]:6e3,[r.INFO]:5e3})[I]||5e3,ee=async(I=20)=>{s.value=!0;try{const{data:P}=await Le.inapp.listInApp(I);t.value=(P||[]).map(W=>({id:W.id,title:W.title,message:W.message,category:W.category,isRead:W.is_read,createdAt:W.created_at})),o.value=t.value.filter(W=>!W.isRead).length,n.value=new Date().toISOString()}catch(P){console.error("Failed to fetch notifications:",P),T("Failed to load notifications")}finally{s.value=!1}},oe=async I=>{try{await Le.inapp.markInAppRead(I);const P=t.value.find(W=>W.id===I);P&&!P.isRead&&(P.isRead=!0,P.readAt=new Date().toISOString(),o.value=Math.max(0,o.value-1))}catch(P){console.error("Failed to mark notification as read:",P)}};let ae=null;const H=()=>{if(ae)return;const I="https://api.templecloud.in/api/v1",P=localStorage.getItem("auth_token"),W=P?`${I}/notifications/stream-token?token=${P}`:`${I}/v1/notifications/stream`;ae=new EventSource(W,{withCredentials:!0}),ae.addEventListener("inapp",we=>{try{const me=JSON.parse(we.data),De={id:me.id,title:me.title,message:me.message,category:me.category,isRead:me.is_read,createdAt:me.created_at};t.value.unshift(De),De.isRead||o.value++}catch(me){console.error("Failed to parse SSE notification:",me)}}),ae.onerror=()=>{J(),setTimeout(H,3e3)}},J=()=>{ae&&(ae.close(),ae=null)};return{notifications:t,unreadCount:o,isLoading:s,lastFetch:n,NOTIFICATION_TYPES:r,PRIORITY_LEVELS:i,CATEGORIES:a,unreadNotifications:l,recentNotifications:d,notificationsByCategory:c,highPriorityNotifications:u,addNotification:p,markAsRead:v,markAllAsRead:g,removeNotification:h,clearAll:D,clearRead:C,showToast:B,showSuccess:_,showError:T,showWarning:S,showInfo:k,showTempleApprovalNotification:b,showSevaBookingNotification:x,showDonationNotification:F,showProfileIncompleteReminder:E,showEventInvitation:O,fetchNotifications:ee,cleanupOldNotifications:(I=30)=>{const P=new Date;P.setDate(P.getDate()-I);const W=t.value.length;t.value=t.value.filter(me=>new Date(me.createdAt)>P||me.isPersistent),o.value=t.value.filter(me=>!me.isRead).length;const we=W-t.value.length;we>0&&console.log(`Cleaned up ${we} old notifications`)},markInAppAsRead:oe,connectStream:H,disconnectStream:J}}),n_={class:"relative"},r_={class:"relative"},a_=["src","alt"],i_={key:1,class:"w-8 h-8 rounded-full bg-gradient-to-br from-indigo-500 to-indigo-700 flex items-center justify-center shadow-sm"},l_={class:"text-white text-sm font-semibold"},d_={class:"hidden sm:block text-left"},u_={class:"text-gray-900 font-medium"},c_={class:"text-gray-500 text-xs capitalize"},p_={key:0,class:"absolute right-0 mt-2 w-72 bg-white rounded-xl shadow-2xl border border-gray-200 z-50 overflow-hidden"},m_={class:"p-4 bg-gradient-to-r from-indigo-50 to-purple-50 border-b border-gray-200"},g_={class:"flex items-center space-x-3"},f_={class:"relative"},v_=["src","alt"],h_={key:1,class:"w-12 h-12 rounded-full bg-gradient-to-br from-indigo-500 to-indigo-700 flex items-center justify-center shadow-lg"},y_={class:"text-white text-lg font-semibold"},x_={class:"flex-1 min-w-0"},b_={class:"text-lg font-semibold text-gray-900 truncate"},w_={class:"text-sm text-gray-600"},k_={class:"flex items-center mt-1"},__={class:"inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-indigo-100 text-indigo-800 capitalize"},$_={class:"py-2"},S_={class:"flex items-center space-x-2"},D_={class:"relative"},C_=["checked"],T_={__name:"AppProfileDropdown",props:{user:{type:Object,default:()=>({})},role:{type:String,default:"user"}},emits:["logout"],setup(t,{emit:o}){const s=t,n=o,r=Ze(),i=tt(),a=te(()=>i.user||s.user),l=te(()=>i.userRole||s.role),d=V(!1),c=V(!0);V(!1);const u=()=>{d.value=!d.value},p=()=>{d.value=!1},v=T=>T?T.split(" ").map(S=>S.charAt(0)).join("").toUpperCase().slice(0,2):"U",g=()=>{const T=l.value;console.log(" Profile dropdown - current role:",T);const k={standard_user:"Standard User",standarduser:"Standard User",monitoring_user:"Monitoring User",monitoringuser:"Monitoring User",superadmin:"Super Admin",super_admin:"Super Admin",templeadmin:"Tenant",tenant:"templeadmin",devotee:"Devotee",volunteer:"Volunteer",entity_admin:"Temple Manager",1:"Super Admin",2:"Temple Admin",3:"Devotee",4:"Volunteer",5:"Standard User",6:"Monitoring User"}[T]||"User";return console.log(" Profile dropdown - display name:",k),k},h=()=>{const T=r.params.entityId||r.params.id,S=l.value;switch(console.log(" Profile link - role:",S,"entityId:",T),S){case"superadmin":case"super_admin":return"/superadmin/profile";case"tenant":case"templeadmin":return"/tenant/profile";case"entity_admin":return T?`/entity/${T}/profile`:"/profile";case"devotee":return"/profile";case"volunteer":return T?`/entity/${T}/volunteer/profile`:"/profile";case"standard_user":case"standarduser":case"monitoring_user":case"monitoringuser":const k=localStorage.getItem("current_tenant_id")||localStorage.getItem("selected_tenant_id");return k?`/entity/${k}/profile`:"/profile";default:return"/profile"}},D=()=>{const T=r.params.entityId||r.params.id,S=l.value;switch(console.log(" Settings link - role:",S,"entityId:",T),S){case"superadmin":case"super_admin":return"/superadmin/settings";case"tenant":case"templeadmin":return"/tenant/settings";case"entity_admin":return T?`/entity/${T}/settings`:"/settings";case"devotee":return T?`/entity/${T}/devotee/settings`:"/settings";case"volunteer":return T?`/entity/${T}/volunteer/settings`:"/settings";case"standard_user":case"standarduser":case"monitoring_user":case"monitoringuser":const k=localStorage.getItem("current_tenant_id")||localStorage.getItem("selected_tenant_id");return k?`/entity/${k}/settings`:"/settings";default:return"/settings"}},C=()=>{c.value=!c.value},B=()=>{p(),i.logout?i.logout():n("logout")},_=T=>{d.value&&!T.target.closest(".relative")&&p()};return Ee(()=>{document.addEventListener("click",_)}),Ut(()=>{document.removeEventListener("click",_)}),(T,S)=>{var b,x,F,E,O,N,L,M,X,ee,oe;const k=He("router-link");return m(),f("div",n_,[e("button",{onClick:u,class:ie(["flex items-center space-x-3 p-2 text-sm rounded-xl hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 transition-all duration-200",{"bg-gray-50":d.value}])},[e("div",r_,[(b=a.value)!=null&&b.avatar?(m(),f("img",{key:0,src:a.value.avatar,alt:a.value.name||a.value.fullName,class:"w-8 h-8 rounded-full object-cover ring-2 ring-white shadow-sm"},null,8,a_)):(m(),f("div",i_,[e("span",l_,y(v(((x=a.value)==null?void 0:x.name)||((F=a.value)==null?void 0:F.fullName))),1)])),S[0]||(S[0]=e("div",{class:"absolute -bottom-0.5 -right-0.5 w-3 h-3 bg-green-400 rounded-full ring-2 ring-white"},null,-1))]),e("div",d_,[e("p",u_,y(((E=a.value)==null?void 0:E.name)||((O=a.value)==null?void 0:O.fullName)||"User"),1),e("p",c_,y(g()),1)]),(m(),f("svg",{class:ie(["w-4 h-4 text-gray-400 transition-transform duration-200",{"rotate-180":d.value}]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[...S[1]||(S[1]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"},null,-1)])],2))],2),d.value?(m(),f("div",p_,[e("div",m_,[e("div",g_,[e("div",f_,[(N=a.value)!=null&&N.avatar?(m(),f("img",{key:0,src:a.value.avatar,alt:a.value.name||a.value.fullName,class:"w-12 h-12 rounded-full object-cover ring-3 ring-white shadow-lg"},null,8,v_)):(m(),f("div",h_,[e("span",y_,y(v(((L=a.value)==null?void 0:L.name)||((M=a.value)==null?void 0:M.fullName))),1)])),S[2]||(S[2]=e("div",{class:"absolute -bottom-1 -right-1 w-4 h-4 bg-green-400 rounded-full ring-2 ring-white"},null,-1))]),e("div",x_,[e("h3",b_,y(((X=a.value)==null?void 0:X.name)||((ee=a.value)==null?void 0:ee.fullName)||"User"),1),e("p",w_,y(((oe=a.value)==null?void 0:oe.email)||"user@example.com"),1),e("div",k_,[e("span",__,y(g()),1)])])])]),e("div",$_,[re(k,{to:h(),onClick:p,class:"flex items-center px-4 py-3 text-sm text-gray-700 hover:bg-gray-50 hover:text-indigo-600 transition-colors duration-200"},{default:fe(()=>[...S[3]||(S[3]=[e("svg",{class:"mr-3 h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})],-1),Q(" My Profile ",-1)])]),_:1},8,["to"]),re(k,{to:D(),onClick:p,class:"flex items-center px-4 py-3 text-sm text-gray-700 hover:bg-gray-50 hover:text-indigo-600 transition-colors duration-200"},{default:fe(()=>[...S[4]||(S[4]=[e("svg",{class:"mr-3 h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})],-1),Q(" Account Settings ",-1)])]),_:1},8,["to"]),e("button",{onClick:C,class:"w-full flex items-center justify-between px-4 py-3 text-sm text-gray-700 hover:bg-gray-50 hover:text-indigo-600 transition-colors duration-200"},[S[6]||(S[6]=e("div",{class:"flex items-center"},[e("svg",{class:"mr-3 h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 17h5l-5 5v-5z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 19l9 2-9-18-9 18 9-2z"})]),Q(" Notifications ")],-1)),e("div",S_,[S[5]||(S[5]=e("span",{class:"text-xs text-gray-500"},"3 new",-1)),e("div",D_,[e("input",{type:"checkbox",checked:c.value,onChange:C,class:"sr-only"},null,40,C_),e("div",{class:ie(["w-9 h-5 bg-gray-200 rounded-full shadow-inner transition-colors duration-200",c.value?"bg-indigo-600":"bg-gray-200"])},[e("div",{class:ie(["w-4 h-4 bg-white rounded-full shadow transform transition-transform duration-200",c.value?"translate-x-4":"translate-x-0.5"]),style:{"margin-top":"2px"}},null,2)],2)])])]),S[9]||(S[9]=e("div",{class:"border-t border-gray-200 my-2"},null,-1)),re(k,{to:"/support",onClick:p,class:"flex items-center px-4 py-3 text-sm text-gray-700 hover:bg-gray-50 hover:text-indigo-600 transition-colors duration-200"},{default:fe(()=>[...S[7]||(S[7]=[e("svg",{class:"mr-3 h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.575-3.006 2.907-.542.104-.994.54-.994 1.093m0 3h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1),Q(" Help & Support ",-1)])]),_:1}),S[10]||(S[10]=e("div",{class:"border-t border-gray-200 my-2"},null,-1)),e("button",{onClick:B,class:"w-full flex items-center px-4 py-3 text-sm text-red-600 hover:bg-red-50 hover:text-red-700 transition-colors duration-200"},[...S[8]||(S[8]=[e("svg",{class:"mr-3 h-5 w-5 text-red-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})],-1),Q(" Sign Out ",-1)])])])])):Y("",!0),d.value?(m(),f("div",{key:1,onClick:p,class:"fixed inset-0 z-40"})):Y("",!0)])}}},E_={class:"bg-white shadow-lg border-b border-gray-200 sticky top-0 z-50"},A_={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},I_={class:"flex justify-between items-center h-16"},M_={class:"flex items-center space-x-4"},R_={class:"flex-shrink-0 flex items-center"},P_={class:"ml-3 hidden sm:block"},j_={class:"text-xl font-bold text-gray-900 hover:text-indigo-600 transition-colors"},N_={key:0,class:"text-sm text-gray-500 truncate max-w-48"},L_={class:"flex items-center space-x-4"},B_={key:0,class:"absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full h-5 w-5 flex items-center justify-center font-medium shadow-lg"},V_={class:"lg:hidden border-t border-gray-200 px-4 py-2 bg-gray-50"},U_={key:0,class:"notifications-container absolute top-16 right-4 w-80 bg-white rounded-xl shadow-2xl border border-gray-200 z-50 max-h-96 overflow-hidden"},F_={class:"max-h-64 overflow-y-auto"},O_={key:0,class:"p-6 text-center"},z_=["onClick"],H_={class:"flex items-start space-x-3"},q_={class:"flex-1 min-w-0"},G_={class:"text-sm font-medium text-gray-900"},W_={class:"text-sm text-gray-600 mt-1"},J_={class:"text-xs text-gray-400 mt-2"},Y_={__name:"AppHeader",props:{showSidebar:{type:Boolean,default:!0}},emits:["toggle-sidebar"],setup(t,{emit:o}){const s=o,n=tt(),r=up(),i=Ke(),a=Ze(),l=V(!1),d=te(()=>n.user),c=te(()=>{var k;return(k=n.user)==null?void 0:k.role}),u=te(()=>r.unreadCount),p=te(()=>r.notifications.slice(0,10)),v=te(()=>{switch(c.value){case"tenant":return"Temple Admin";case"entity_admin":return"Devotee Connect";case"devotee":return"Devotee Dashboard";case"volunteer":return"Volunteer Portal";default:return"Devotee Connect"}}),g=()=>{const k=a.params.entityId;switch(c.value){case"tenant":return"/tenant/dashboard";case"entity_admin":return`/entity/${k}/dashboard`;case"devotee":return`/entity/${k}/devotee/dashboard`;case"volunteer":return`/entity/${k}/volunteer/dashboard`;default:return"/"}},h=k=>{k.stopPropagation(),l.value=!l.value},D=()=>{s("toggle-sidebar")},C=async k=>{await r.markInAppAsRead(k),l.value=!1},B=async()=>{const k=p.value.filter(b=>!b.isRead).map(b=>b.id);for(const b of k)await r.markInAppAsRead(b);l.value=!1},_=k=>{const b=new Date,x=new Date(k),F=b-x;return F<60*1e3?"Just now":F<3600*1e3?`${Math.floor(F/6e4)}m ago`:F<1440*60*1e3?`${Math.floor(F/36e5)}h ago`:`${Math.floor(F/864e5)}d ago`},T=()=>{n.logout(),i.push("/login")},S=k=>{const b=k.target.closest(".notifications-bell"),x=k.target.closest(".notifications-container");l.value&&!x&&!b&&(l.value=!1)};return Ee(async()=>{document.addEventListener("click",S),await r.fetchNotifications(20),r.connectStream()}),Ut(()=>{r.disconnectStream(),document.removeEventListener("click",S)}),(k,b)=>{const x=He("router-link");return m(),f("header",E_,[e("div",A_,[e("div",I_,[e("div",M_,[e("div",R_,[re(x,{to:g(),class:"flex items-center"},{default:fe(()=>[b[1]||(b[1]=e("div",{class:"w-10 h-10 bg-gradient-to-br from-indigo-500 to-indigo-700 rounded-xl flex items-center justify-center shadow-lg"},[e("svg",{class:"w-6 h-6 text-white",fill:"currentColor",viewBox:"0 0 24 24"},[e("path",{d:"M12 2L2 7v10c0 5.55 3.84 9.74 9 11 5.16-1.26 9-5.45 9-11V7l-10-5z"})])],-1)),e("div",P_,[e("h1",j_,y(v.value),1),k.currentTemple?(m(),f("p",N_,y(k.currentTemple),1)):Y("",!0)])]),_:1},8,["to"])])]),e("div",L_,[e("button",{onClick:h,class:"relative p-2 text-gray-500 hover:text-indigo-600 hover:bg-indigo-50 rounded-lg transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 notifications-bell"},[b[2]||(b[2]=e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11c0-3.07-1.64-5.64-4.5-6.32V4a1.5 1.5 0 00-3 0v.68C7.64 5.36 6 7.929 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"})],-1)),u.value>0?(m(),f("span",B_,y(u.value>9?"9+":u.value),1)):Y("",!0)]),e("button",{onClick:D,class:"lg:hidden p-2 text-gray-500 hover:text-indigo-600 hover:bg-indigo-50 rounded-lg transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2"},[...b[3]||(b[3]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 6h16M4 12h16M4 18h16"})],-1)])]),re(T_,{user:d.value,role:c.value,onLogout:T},null,8,["user","role"])])])]),e("div",V_,[re(ip)]),l.value?(m(),f("div",U_,[e("div",{class:"p-4 border-b border-gray-200"},[e("div",{class:"flex items-center justify-between"},[b[4]||(b[4]=e("h3",{class:"text-lg font-semibold text-gray-900"},"Notifications",-1)),e("button",{onClick:B,class:"text-sm text-indigo-600 hover:text-indigo-800 font-medium"}," Mark all read ")])]),e("div",F_,[p.value.length===0?(m(),f("div",O_,[...b[5]||(b[5]=[e("svg",{class:"w-12 h-12 text-gray-300 mx-auto mb-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2-2v-5m16 0h-2M4 13h2m13-8V4a1 1 0 00-1-1H7a1 1 0 00-1 1v1m8 0V4.5"})],-1),e("p",{class:"text-gray-500"},"No new notifications",-1)])])):Y("",!0),(m(!0),f(he,null,ke(p.value,F=>(m(),f("div",{key:F.id,class:"p-4 border-b border-gray-100 hover:bg-gray-50 cursor-pointer transition-colors duration-150",onClick:E=>C(F.id)},[e("div",H_,[e("div",{class:ie(["flex-shrink-0 w-2 h-2 mt-2 rounded-full",F.isRead?"bg-gray-300":"bg-indigo-500"])},null,2),e("div",q_,[e("p",G_,y(F.title),1),e("p",W_,y(F.message),1),e("p",J_,y(_(F.createdAt)),1)])])],8,z_))),128))])])):Y("",!0),l.value?(m(),f("div",{key:1,onClick:b[0]||(b[0]=F=>l.value=!1),class:"fixed inset-0 z-40"})):Y("",!0)])}}},K_={class:"fixed left-0 top-0 bottom-0 w-72 bg-white border-r border-gray-200 overflow-y-auto shadow-md z-40",style:{"margin-top":"48px",display:"block !important"}},X_={class:"p-4 pt-8 border-b border-gray-200"},Z_={key:0,class:"text-sm text-gray-500"},Q_={class:"px-4 py-4"},e$={key:0,class:"space-y-1"},t$={class:"mt-3"},o$={class:"text-xs font-bold text-indigo-600"},s$={key:0,class:"mt-1 ml-5 space-y-1 bg-indigo-50 p-2 rounded-md"},n$={key:1,class:"space-y-1"},r$={key:2,class:"space-y-1"},a$={key:3,class:"space-y-1"},i$={key:4,class:"space-y-1"},l$={class:"mt-3"},d$={class:"text-xs font-bold text-indigo-600"},u$={key:0,class:"mt-1 ml-6 space-y-1 bg-indigo-50 p-2 rounded-md"},c$={key:5,class:"text-center py-6"},p$={class:"text-xs text-gray-400 mt-2"},m$={key:0,class:"text-xs text-gray-400 mt-1"},g$={class:"mt-6 px-4 py-4 border-t border-gray-200"},f$={__name:"AppSidebar",props:{isOpen:{type:Boolean,default:!0},user:{type:Object,default:null}},setup(t){const o=t,s=Ze(),n=tt(),r=te(()=>s.params.id||s.params.entityId||"1"),i=te(()=>{if(n.user&&n.user.role)return n.user.role.toLowerCase();if(o.user&&o.user.role)return o.user.role.toLowerCase();const p=s.path;return p.includes("/tenant/")?"tenant":p.includes("/entity/")&&p.includes("/devotee/")?"devotee":p.includes("/entity/")&&p.includes("/volunteer/")?"volunteer":p.includes("/entity/")&&!p.includes("/devotee/")&&!p.includes("/volunteer/")?"entity_admin":p.includes("/superadmin/")?"superadmin":""}),a=V(!1),l=V(!1),d=p=>(console.log("Path:= "+p),s.path.startsWith(p)),c=()=>{a.value=!a.value},u=()=>{l.value=!l.value};return(p,v)=>{const g=He("router-link");return m(),f("aside",K_,[e("div",X_,[v[0]||(v[0]=e("h3",{class:"text-lg font-semibold text-indigo-600"},"Temple Management",-1)),i.value?(m(),f("p",Z_,y(i.value),1)):Y("",!0)]),e("nav",Q_,[i.value==="tenant"?(m(),f("div",e$,[re(g,{to:"/tenant/dashboard",class:ie(["flex items-center px-3 py-2 text-sm font-medium rounded-md",d("/tenant/dashboard")?"bg-indigo-100 text-indigo-700":"text-gray-700 hover:bg-gray-50"])},{default:fe(()=>[(m(),f("svg",{class:ie(["mr-3 h-5 w-5",d("/tenant/dashboard")?"text-indigo-500":"text-gray-400"]),fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[...v[1]||(v[1]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"},null,-1)])],2)),v[2]||(v[2]=Q(" Dashboard ",-1))]),_:1},8,["class"]),re(g,{to:"/tenant/entities/create",class:ie(["flex items-center px-3 py-2 text-sm font-medium rounded-md",d("/tenant/entities/create")?"bg-indigo-100 text-indigo-700":"text-gray-700 hover:bg-gray-50"])},{default:fe(()=>[(m(),f("svg",{class:ie(["mr-3 h-5 w-5",d("/tenant/entities/create")?"text-indigo-500":"text-gray-400"]),fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[...v[3]||(v[3]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"},null,-1)])],2)),v[4]||(v[4]=Q(" Create Temple ",-1))]),_:1},8,["class"]),re(g,{to:"/tenant/user-management",class:ie(["flex items-center px-3 py-2 text-sm font-medium rounded-md",d("/tenant/user-management")?"bg-indigo-100 text-indigo-700":"text-gray-700 hover:bg-gray-50"])},{default:fe(()=>[(m(),f("svg",{class:ie(["mr-3 h-5 w-5",d("/tenant/user-management")?"text-indigo-500":"text-gray-400"]),fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[...v[5]||(v[5]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"},null,-1)])],2)),v[6]||(v[6]=Q(" Tenant User Management ",-1))]),_:1},8,["class"]),e("div",t$,[e("div",{class:"flex items-center justify-between px-3 py-2 text-sm font-medium rounded-md bg-indigo-50 text-indigo-700 cursor-pointer",onClick:c},[v[7]||(v[7]=e("div",{class:"flex items-center"},[e("svg",{class:"mr-3 h-5 w-5 text-indigo-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 17v-2m3 2v-4m3 4v-6m2 10H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})]),e("span",null,"Reports Dashboard")],-1)),e("span",o$,y(a.value?"":"+"),1)]),re(It,{name:"slide-down"},{default:fe(()=>[a.value?(m(),f("div",s$,[re(g,{to:"/tenant/reports/temple-register",class:ie(["px-3 py-2 text-sm rounded-md cursor-pointer flex items-center",d("/tenant/reports/temple-register")?"text-indigo-700 font-medium":"text-gray-700 hover:bg-indigo-100"])},{default:fe(()=>[(m(),f("svg",{class:ie(["mr-2 h-4 w-4",d("/tenant/reports/temple-register")?"text-indigo-600":"text-gray-500"]),fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[...v[8]||(v[8]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"},null,-1)])],2)),v[9]||(v[9]=e("span",null,"Temple Register Report",-1))]),_:1},8,["class"]),re(g,{to:"/tenant/reports/temple-activities",class:ie(["px-3 py-2 text-sm rounded-md cursor-pointer flex items-center",d("/tenant/reports/temple-activities")?"text-indigo-700 font-medium":"text-gray-700 hover:bg-indigo-100"])},{default:fe(()=>[(m(),f("svg",{class:ie(["mr-2 h-4 w-4",d("/tenant/reports/temple-activities")?"text-indigo-600":"text-gray-500"]),fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[...v[10]||(v[10]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"},null,-1)])],2)),v[11]||(v[11]=e("span",null,"Temple Activities Report",-1))]),_:1},8,["class"]),re(g,{to:"/tenant/reports/birthdays",class:ie(["px-3 py-2 text-sm rounded-md cursor-pointer flex items-center",d("/tenant/reports/birthdays")?"text-indigo-700 font-medium":"text-gray-700 hover:bg-indigo-100"])},{default:fe(()=>[(m(),f("svg",{class:ie(["mr-2 h-4 w-4",d("/tenant/reports/birthdays")?"text-indigo-600":"text-gray-500"]),fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[...v[12]||(v[12]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 15.546c-.523 0-1.046.151-1.5.454a2.704 2.704 0 01-3 0 2.704 2.704 0 00-3 0 2.704 2.704 0 01-3 0 2.704 2.704 0 00-3 0 2.704 2.704 0 01-3 0 2.701 2.701 0 00-1.5-.454M9 6v2m3-2v2m3-2v2M9 3h.01M12 3h.01M15 3h.01M21 21v-7a2 2 0 00-2-2H5a2 2 0 00-2 2v7h18zm-3-9v-2a2 2 0 00-2-2H8a2 2 0 00-2 2v2h12z"},null,-1)])],2)),v[13]||(v[13]=e("span",null,"Devotee & Birthday Report",-1))]),_:1},8,["class"]),re(g,{to:"/tenant/reports/audit-logs",class:ie(["px-3 py-2 text-sm rounded-md cursor-pointer flex items-center",d("/tenant/reports/audit-logs")?"text-indigo-700 font-medium":"text-gray-700 hover:bg-indigo-100"])},{default:fe(()=>[(m(),f("svg",{class:ie(["mr-2 h-4 w-4",d("/tenant/reports/audit-logs")?"text-indigo-600":"text-gray-500"]),fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[...v[14]||(v[14]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"},null,-1)])],2)),v[15]||(v[15]=e("span",null,"Audit Logs Report",-1))]),_:1},8,["class"])])):Y("",!0)]),_:1})])])):i.value==="entity_admin"?(m(),f("div",n$,[re(g,{to:`/entity/${r.value}/dashboard`,class:ie(["flex items-center px-3 py-2 text-sm font-medium rounded-md",d(`/entity/${r.value}/dashboard`)?"bg-indigo-100 text-indigo-700":"text-gray-700 hover:bg-gray-50"])},{default:fe(()=>[(m(),f("svg",{class:ie(["mr-3 h-5 w-5",d(`/entity/${r.value}/dashboard`)?"text-indigo-500":"text-gray-400"]),fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[...v[16]||(v[16]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"},null,-1)])],2)),v[17]||(v[17]=Q(" Dashboard ",-1))]),_:1},8,["to","class"]),re(g,{to:`/entity/${r.value}/devotees`,class:ie(["flex items-center px-3 py-2 text-sm font-medium rounded-md",d(`/entity/${r.value}/devotees`)?"bg-indigo-100 text-indigo-700":"text-gray-700 hover:bg-gray-50"])},{default:fe(()=>[(m(),f("svg",{class:ie(["mr-3 h-5 w-5",d(`/entity/${r.value}/devotees`)?"text-indigo-500":"text-gray-400"]),fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[...v[18]||(v[18]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"},null,-1)])],2)),v[19]||(v[19]=Q(" Devotees ",-1))]),_:1},8,["to","class"]),re(g,{to:`/entity/${r.value}/sevas`,class:ie(["flex items-center px-3 py-2 text-sm font-medium rounded-md",d(`/entity/${r.value}/sevas`)?"bg-indigo-100 text-indigo-700":"text-gray-700 hover:bg-gray-50"])},{default:fe(()=>[(m(),f("svg",{class:ie(["mr-3 h-5 w-5",d(`/entity/${r.value}/sevas`)?"text-indigo-500":"text-gray-400"]),fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[...v[20]||(v[20]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"},null,-1)])],2)),v[21]||(v[21]=Q(" Seva Management ",-1))]),_:1},8,["to","class"]),re(g,{to:`/entity/${r.value}/donations`,class:ie(["flex items-center px-3 py-2 text-sm font-medium rounded-md",d(`/entity/${r.value}/donations`)?"bg-indigo-100 text-indigo-700":"text-gray-700 hover:bg-gray-50"])},{default:fe(()=>[(m(),f("svg",{class:ie(["mr-3 h-5 w-5",d(`/entity/${r.value}/donations`)?"text-indigo-500":"text-gray-400"]),fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[...v[22]||(v[22]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"},null,-1)])],2)),v[23]||(v[23]=Q(" Donations ",-1))]),_:1},8,["to","class"]),re(g,{to:`/entity/${r.value}/events`,class:ie(["flex items-center px-3 py-2 text-sm font-medium rounded-md",d(`/entity/${r.value}/events`)?"bg-indigo-100 text-indigo-700":"text-gray-700 hover:bg-gray-50"])},{default:fe(()=>[(m(),f("svg",{class:ie(["mr-3 h-5 w-5",d(`/entity/${r.value}/events`)?"text-indigo-500":"text-gray-400"]),fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[...v[24]||(v[24]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"},null,-1)])],2)),v[25]||(v[25]=Q(" Events & Festivals ",-1))]),_:1},8,["to","class"]),re(g,{to:`/entity/${r.value}/communication`,class:ie(["flex items-center px-3 py-2 text-sm font-medium rounded-md",d(`/entity/${r.value}/communication`)?"bg-indigo-100 text-indigo-700":"text-gray-700 hover:bg-gray-50"])},{default:fe(()=>[(m(),f("svg",{class:ie(["mr-3 h-5 w-5",d(`/entity/${r.value}/communication`)?"text-indigo-500":"text-gray-400"]),fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[...v[26]||(v[26]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 10h.01M12 10h.01M16 10h.01M9 16H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-5l-5 5v-5z"},null,-1)])],2)),v[27]||(v[27]=Q(" Communication ",-1))]),_:1},8,["to","class"])])):i.value==="devotee"?(m(),f("div",r$,[re(g,{to:`/entity/${r.value}/devotee/dashboard`,class:ie(["flex items-center px-3 py-2 text-sm font-medium rounded-md",d(`/entity/${r.value}/devotee/dashboard`)?"bg-indigo-100 text-indigo-700":"text-gray-700 hover:bg-gray-50"])},{default:fe(()=>[(m(),f("svg",{class:ie(["mr-3 h-5 w-5",d(`/entity/${r.value}/devotee/dashboard`)?"text-indigo-500":"text-gray-400"]),fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[...v[28]||(v[28]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"},null,-1)])],2)),v[29]||(v[29]=Q(" Dashboard ",-1))]),_:1},8,["to","class"]),re(g,{to:`/entity/${r.value}/devotee/seva-booking`,class:ie(["flex items-center px-3 py-2 text-sm font-medium rounded-md",d(`/entity/${r.value}/devotee/seva-booking`)?"bg-indigo-100 text-indigo-700":"text-gray-700 hover:bg-gray-50"])},{default:fe(()=>[Q(y(r.value)+" ",1),(m(),f("svg",{class:ie(["mr-3 h-5 w-5",d(`/entity/${r.value}/devotee/seva-booking`)?"text-indigo-500":"text-gray-400"]),fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[...v[30]||(v[30]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"},null,-1)])],2)),v[31]||(v[31]=Q(" Book Seva ",-1))]),_:1},8,["to","class"]),re(g,{to:`/entity/${r.value}/devotee/donations`,class:ie(["flex items-center px-3 py-2 text-sm font-medium rounded-md",d(`/entity/${r.value}/devotee/donations`)?"bg-indigo-100 text-indigo-700":"text-gray-700 hover:bg-gray-50"])},{default:fe(()=>[(m(),f("svg",{class:ie(["mr-3 h-5 w-5",d(`/entity/${r.value}/devotee/donations`)?"text-indigo-500":"text-gray-400"]),fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[...v[32]||(v[32]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"},null,-1)])],2)),v[33]||(v[33]=Q(" My Donations ",-1))]),_:1},8,["to","class"]),re(g,{to:`/entity/${r.value}/devotee/events`,class:ie(["flex items-center px-3 py-2 text-sm font-medium rounded-md",d(`/entity/${r.value}/devotee/events`)?"bg-indigo-100 text-indigo-700":"text-gray-700 hover:bg-gray-50"])},{default:fe(()=>[(m(),f("svg",{class:ie(["mr-3 h-5 w-5",d(`/entity/${r.value}/devotee/events`)?"text-indigo-500":"text-gray-400"]),fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[...v[34]||(v[34]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"},null,-1)])],2)),v[35]||(v[35]=Q(" Temple Events ",-1))]),_:1},8,["to","class"]),re(g,{to:`/entity/${r.value}/devotee/profile/edit`,class:ie(["flex items-center px-3 py-2 text-sm font-medium rounded-md",d(`/entity/${r.value}/devotee/profile`)?"bg-indigo-100 text-indigo-700":"text-gray-700 hover:bg-gray-50"])},{default:fe(()=>[(m(),f("svg",{class:ie(["mr-3 h-5 w-5",d(`/entity/${r.value}/devotee/profile`)?"text-indigo-500":"text-gray-400"]),fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[...v[36]||(v[36]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"},null,-1)])],2)),v[37]||(v[37]=Q(" My Profile ",-1))]),_:1},8,["to","class"])])):i.value==="volunteer"?(m(),f("div",a$,[re(g,{to:`/entity/${r.value}/volunteer/dashboard`,class:ie(["flex items-center px-3 py-2 text-sm font-medium rounded-md",d(`/entity/${r.value}/volunteer/dashboard`)?"bg-indigo-100 text-indigo-700":"text-gray-700 hover:bg-gray-50"])},{default:fe(()=>[(m(),f("svg",{class:ie(["mr-3 h-5 w-5",d(`/entity/${r.value}/volunteer/dashboard`)?"text-indigo-500":"text-gray-400"]),fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[...v[38]||(v[38]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"},null,-1)])],2)),v[39]||(v[39]=Q(" Dashboard ",-1))]),_:1},8,["to","class"]),re(g,{to:`/entity/${r.value}/volunteer/assignments`,class:ie(["flex items-center px-3 py-2 text-sm font-medium rounded-md",d(`/entity/${r.value}/volunteer/assignments`)?"bg-indigo-100 text-indigo-700":"text-gray-700 hover:bg-gray-50"])},{default:fe(()=>[(m(),f("svg",{class:ie(["mr-3 h-5 w-5",d(`/entity/${r.value}/volunteer/assignments`)?"text-indigo-500":"text-gray-400"]),fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[...v[40]||(v[40]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"},null,-1)])],2)),v[41]||(v[41]=Q(" My Assignments ",-1))]),_:1},8,["to","class"]),re(g,{to:`/entity/${r.value}/volunteer/schedule`,class:ie(["flex items-center px-3 py-2 text-sm font-medium rounded-md",d(`/entity/${r.value}/volunteer/schedule`)?"bg-indigo-100 text-indigo-700":"text-gray-700 hover:bg-gray-50"])},{default:fe(()=>[(m(),f("svg",{class:ie(["mr-3 h-5 w-5",d(`/entity/${r.value}/volunteer/schedule`)?"text-indigo-500":"text-gray-400"]),fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[...v[42]||(v[42]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"},null,-1)])],2)),v[43]||(v[43]=Q(" My Schedule ",-1))]),_:1},8,["to","class"]),re(g,{to:`/entity/${r.value}/volunteer/events`,class:ie(["flex items-center px-3 py-2 text-sm font-medium rounded-md",d(`/entity/${r.value}/volunteer/events`)?"bg-indigo-100 text-indigo-700":"text-gray-700 hover:bg-gray-50"])},{default:fe(()=>[(m(),f("svg",{class:ie(["mr-3 h-5 w-5",d(`/entity/${r.value}/volunteer/events`)?"text-indigo-500":"text-gray-400"]),fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[...v[44]||(v[44]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"},null,-1)])],2)),v[45]||(v[45]=Q(" Temple Events ",-1))]),_:1},8,["to","class"])])):i.value==="superadmin"?(m(),f("div",i$,[re(g,{to:"/superadmin/dashboard",class:ie(["flex items-center px-3 py-2 text-sm font-medium rounded-md",d("/superadmin/dashboard")?"bg-indigo-100 text-indigo-700":"text-gray-700 hover:bg-gray-50"])},{default:fe(()=>[(m(),f("svg",{class:ie(["mr-3 h-5 w-5",d("/superadmin/dashboard")?"text-indigo-500":"text-gray-400"]),fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[...v[46]||(v[46]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"},null,-1)])],2)),v[47]||(v[47]=Q(" Super Admin Dashboard ",-1))]),_:1},8,["class"]),e("div",l$,[e("div",{class:"flex items-center justify-between px-3 py-2 text-sm font-medium rounded-md bg-indigo-50 text-indigo-700 cursor-pointer",onClick:u},[v[48]||(v[48]=e("div",{class:"flex items-center"},[e("svg",{class:"mr-3 h-5 w-5 text-indigo-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 17v-2m3 2v-4m3 4v-6m2 10H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})]),e("span",null,"Reports Management")],-1)),e("span",d$,y(l.value?"":"+"),1)]),re(It,{name:"slide-down"},{default:fe(()=>[l.value?(m(),f("div",u$,[re(g,{to:"/superadmin/reports",class:ie(["px-3 py-2 text-sm rounded-md cursor-pointer flex items-center",d("/superadmin/reports")?"text-indigo-700 font-medium":"text-gray-700 hover:bg-indigo-100"])},{default:fe(()=>[(m(),f("svg",{class:ie(["mr-2 h-4 w-4",d("/superadmin/reports")?"text-indigo-600":"text-gray-500"]),fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[...v[49]||(v[49]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"},null,-1)])],2)),v[50]||(v[50]=e("span",null,"Tenant Reports",-1))]),_:1},8,["class"]),re(g,{to:"/superadmin/reports/approval-status",class:ie(["px-3 py-2 text-sm rounded-md cursor-pointer flex items-center",d("/superadmin/reports/approval-status")?"text-indigo-700 font-medium":"text-gray-700 hover:bg-indigo-100"])},{default:fe(()=>[(m(),f("svg",{class:ie(["mr-2 h-4 w-4",d("/superadmin/reports/approval-status")?"text-indigo-600":"text-gray-500"]),fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[...v[51]||(v[51]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l6 3-6 3 9-3V9l-9-3z"},null,-1),e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 20l14-8"},null,-1)])],2)),v[52]||(v[52]=e("span",null,"Approval Status Report",-1))]),_:1},8,["class"]),re(g,{to:"/superadmin/reports/user-details",class:ie(["px-3 py-2 text-sm rounded-md cursor-pointer flex items-center",d("/superadmin/reports/user-details")?"text-indigo-700 font-medium":"text-gray-700 hover:bg-indigo-100"])},{default:fe(()=>[(m(),f("svg",{class:ie(["mr-2 h-4 w-4",d("/superadmin/reports/user-details")?"text-indigo-600":"text-gray-500"]),fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[...v[53]||(v[53]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"},null,-1)])],2)),v[54]||(v[54]=e("span",null,"User Details Report",-1))]),_:1},8,["class"])])):Y("",!0)]),_:1})]),re(g,{to:"/tenant-selection",class:ie(["flex items-center px-3 py-2 text-sm font-medium rounded-md",d("/tenant-selection")?"bg-indigo-100 text-indigo-700":"text-gray-700 hover:bg-gray-50"])},{default:fe(()=>[(m(),f("svg",{class:ie(["mr-3 h-5 w-5",d("/tenant-selection")?"text-indigo-500":"text-gray-400"]),fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[...v[55]||(v[55]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"},null,-1)])],2)),v[56]||(v[56]=Q(" Tenant Dashboard ",-1))]),_:1},8,["class"]),re(g,{to:"/superadmin/tenant-approvals",class:ie(["flex items-center px-3 py-2 text-sm font-medium rounded-md",d("/superadmin/tenant-approvals")?"bg-indigo-100 text-indigo-700":"text-gray-700 hover:bg-gray-50"])},{default:fe(()=>[(m(),f("svg",{class:ie(["mr-3 h-5 w-5",d("/superadmin/tenant-approvals")?"text-indigo-500":"text-gray-400"]),fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[...v[57]||(v[57]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"},null,-1)])],2)),v[58]||(v[58]=Q(" Tenant Approvals ",-1))]),_:1},8,["class"]),re(g,{to:"/superadmin/dashboard",class:ie(["flex items-center px-3 py-2 text-sm font-medium rounded-md",d("/superadmin/temples")?"bg-indigo-100 text-indigo-700":"text-gray-700 hover:bg-gray-50"])},{default:fe(()=>[(m(),f("svg",{class:ie(["mr-3 h-5 w-5",d("/superadmin/dashboard")?"text-indigo-500":"text-gray-400"]),fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[...v[59]||(v[59]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"},null,-1)])],2)),v[60]||(v[60]=Q(" Temple Approvals ",-1))]),_:1},8,["class"]),re(g,{to:"/superadmin/user-management",class:ie(["flex items-center px-3 py-2 text-sm font-medium rounded-md",d("/superadmin/user-management")?"bg-indigo-100 text-indigo-700":"text-gray-700 hover:bg-gray-50"])},{default:fe(()=>[(m(),f("svg",{class:ie(["mr-3 h-5 w-5",d("/superadmin/user-management")?"text-indigo-500":"text-gray-400"]),fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[...v[61]||(v[61]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"},null,-1)])],2)),v[62]||(v[62]=Q(" Tenant & User Management ",-1))]),_:1},8,["class"]),re(g,{to:"/superadmin/role-management",class:ie(["flex items-center px-3 py-2 text-sm font-medium rounded-md",d("/superadmin/role-management")?"bg-indigo-100 text-indigo-700":"text-gray-700 hover:bg-gray-50"])},{default:fe(()=>[(m(),f("svg",{class:ie(["mr-3 h-5 w-5",d("/superadmin/role-management")?"text-indigo-500":"text-gray-400"]),fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[...v[63]||(v[63]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"},null,-1)])],2)),v[64]||(v[64]=Q(" User Role Management ",-1))]),_:1},8,["class"]),re(g,{to:"/superadmin/reset-password",class:ie(["flex items-center px-3 py-2 text-sm font-medium rounded-md",d("/superadmin/reset-password")?"bg-indigo-100 text-indigo-700":"text-gray-700 hover:bg-gray-50"])},{default:fe(()=>[(m(),f("svg",{class:ie(["mr-3 h-5 w-5",d("/superadmin/reset-password")?"text-indigo-500":"text-gray-400"]),fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[...v[65]||(v[65]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 7a2 2 0 012 2m4 0a6 6 0 01-7.743 5.743L11 17H9v2H7v2H4a1 1 0 01-1-1v-2.586a1 1 0 01.293-.707l5.964-5.964A6 6 0 1121 9z"},null,-1)])],2)),v[66]||(v[66]=Q(" Reset Password ",-1))]),_:1},8,["class"]),re(g,{to:"/superadmin/audit-logs",class:ie(["flex items-center px-3 py-2 text-sm font-medium rounded-md",d("/superadmin/audit-logs")?"bg-indigo-100 text-indigo-700":"text-gray-700 hover:bg-gray-50"])},{default:fe(()=>[(m(),f("svg",{class:ie(["mr-3 h-5 w-5",d("/superadmin/audit-logs")?"text-indigo-500":"text-gray-400"]),fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[...v[67]||(v[67]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"},null,-1)])],2)),v[68]||(v[68]=Q(" Audit Logs ",-1))]),_:1},8,["class"])])):(m(),f("div",c$,[v[69]||(v[69]=e("div",{class:"mx-auto w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mb-4"},[e("svg",{class:"w-8 h-8 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})])],-1)),v[70]||(v[70]=e("p",{class:"text-sm text-gray-500"},"Menu will appear once your role is assigned.",-1)),e("p",p$,"Current path: "+y(_e(s).path),1),t.user?(m(),f("p",m$,"User role: "+y(t.user.role),1)):Y("",!0)]))]),e("div",g$,[re(g,{to:"/support",class:"flex items-center px-3 py-2 text-sm font-medium text-gray-700 rounded-md hover:bg-gray-50"},{default:fe(()=>[...v[71]||(v[71]=[e("svg",{class:"mr-3 h-5 w-5 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1),Q(" Help & Support ",-1)])]),_:1})])])}}},v$=Qe(f$,[["__scopeId","data-v-3f4fb4bb"]]);function h$(t,o){return m(),f("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"fill-rule":"evenodd",d:"M2.25 12c0-5.385 4.365-9.75 9.75-9.75s9.75 4.365 9.75 9.75-4.365 9.75-9.75 9.75S2.25 17.385 2.25 12Zm13.36-1.814a.75.75 0 1 0-1.22-.872l-3.236 4.53L9.53 12.22a.75.75 0 0 0-1.06 1.06l2.25 2.25a.75.75 0 0 0 1.14-.094l3.75-5.25Z","clip-rule":"evenodd"})])}function y$(t,o){return m(),f("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"fill-rule":"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003ZM12 8.25a.75.75 0 0 1 .75.75v3.75a.75.75 0 0 1-1.5 0V9a.75.75 0 0 1 .75-.75Zm0 8.25a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5Z","clip-rule":"evenodd"})])}function x$(t,o){return m(),f("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"fill-rule":"evenodd",d:"M2.25 12c0-5.385 4.365-9.75 9.75-9.75s9.75 4.365 9.75 9.75-4.365 9.75-9.75 9.75S2.25 17.385 2.25 12Zm8.706-1.442c1.146-.573 2.437.463 2.126 1.706l-.709 2.836.042-.02a.75.75 0 0 1 .67 1.34l-.04.022c-1.147.573-2.438-.463-2.127-1.706l.71-2.836-.042.02a.75.75 0 1 1-.671-1.34l.041-.022ZM12 9a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5Z","clip-rule":"evenodd"})])}function b$(t,o){return m(),f("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"fill-rule":"evenodd",d:"M12 2.25c-5.385 0-9.75 4.365-9.75 9.75s4.365 9.75 9.75 9.75 9.75-4.365 9.75-9.75S17.385 2.25 12 2.25Zm-1.72 6.97a.75.75 0 1 0-1.06 1.06L10.94 12l-1.72 1.72a.75.75 0 1 0 1.06 1.06L12 13.06l1.72 1.72a.75.75 0 1 0 1.06-1.06L13.06 12l1.72-1.72a.75.75 0 1 0-1.06-1.06L12 10.94l-1.72-1.72Z","clip-rule":"evenodd"})])}function w$(t,o){return m(),f("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"fill-rule":"evenodd",d:"M5.47 5.47a.75.75 0 0 1 1.06 0L12 10.94l5.47-5.47a.75.75 0 1 1 1.06 1.06L13.06 12l5.47 5.47a.75.75 0 1 1-1.06 1.06L12 13.06l-5.47 5.47a.75.75 0 0 1-1.06-1.06L10.94 12 5.47 6.53a.75.75 0 0 1 0-1.06Z","clip-rule":"evenodd"})])}const k$={class:"fixed top-4 right-4 z-50 space-y-2"},_$={class:"p-4"},$$={class:"flex items-center"},S$={class:"flex-shrink-0"},D$={class:"ml-3 flex-1"},C$={class:"ml-4 flex-shrink-0 flex"},T$=["onClick"],E$={key:0,class:"mt-3 flex space-x-2"},A$=["onClick"],I$={__name:"BaseToast",setup(t,{expose:o}){const s=V([]);let n=0;const r=b=>{const x=++n,F={id:x,type:"success",autoHide:!0,duration:5e3,startTime:Date.now(),...b};return s.value.push(F),F.autoHide&&setTimeout(()=>{i(x)},F.duration),x},i=b=>{const x=s.value.findIndex(F=>F.id===b);x>-1&&s.value.splice(x,1)},a=()=>{s.value=[]},l=b=>{const x={success:"bg-green-50 border-green-400",error:"bg-red-50 border-red-400",warning:"bg-yellow-50 border-yellow-400",info:"bg-blue-50 border-blue-400"};return x[b]||x.info},d=b=>{const x={success:h$,error:b$,warning:y$,info:x$};return x[b]||x.info},c=b=>{const x={success:"text-green-600",error:"text-red-600",warning:"text-yellow-600",info:"text-blue-600"};return x[b]||x.info},u=b=>{const x={success:"text-green-900",error:"text-red-900",warning:"text-yellow-900",info:"text-blue-900"};return x[b]||x.info},p=b=>{const x={success:"text-green-700",error:"text-red-700",warning:"text-yellow-700",info:"text-blue-700"};return x[b]||x.info},v=b=>{const x={success:"text-green-400 hover:text-green-600 focus:ring-green-500",error:"text-red-400 hover:text-red-600 focus:ring-red-500",warning:"text-yellow-400 hover:text-yellow-600 focus:ring-yellow-500",info:"text-blue-400 hover:text-blue-600 focus:ring-blue-500"};return x[b]||x.info},g=b=>{const x={success:"bg-green-100 text-green-800 hover:bg-green-200",error:"bg-red-100 text-red-800 hover:bg-red-200",warning:"bg-yellow-100 text-yellow-800 hover:bg-yellow-200",info:"bg-blue-100 text-blue-800 hover:bg-blue-200"};return x[b]||x.info},h=b=>{const x={success:"bg-green-400",error:"bg-red-400",warning:"bg-yellow-400",info:"bg-blue-400"};return x[b]||x.info},D=b=>{if(!b.autoHide||!b.duration)return 100;const x=Date.now()-b.startTime;return Math.max(0,100-x/b.duration*100)},C=(b,x)=>{b.handler&&b.handler(),b.closeOnClick!==!1&&i(x.id)},B=(b,x,F={})=>r({type:"success",title:b,message:x,...F}),_=(b,x,F={})=>r({type:"error",title:b,message:x,...F}),T=(b,x,F={})=>r({type:"warning",title:b,message:x,...F}),S=(b,x,F={})=>r({type:"info",title:b,message:x,...F});o({addToast:r,removeToast:i,clearAll:a,success:B,error:_,warning:T,info:S});let k=null;return Ee(()=>{k={success:B,error:_,warning:T,info:S,addToast:r,removeToast:i,clearAll:a},window.$toast=k}),Ut(()=>{window.$toast===k&&delete window.$toast}),(b,x)=>(m(),Re(jn,{to:"body"},[e("div",k$,[(m(!0),f(he,null,ke(s.value,F=>(m(),Re(It,{key:F.id,"enter-active-class":"transform transition-all duration-300 ease-out","enter-from-class":"translate-x-full opacity-0","enter-to-class":"translate-x-0 opacity-100","leave-active-class":"transform transition-all duration-200 ease-in","leave-from-class":"translate-x-0 opacity-100","leave-to-class":"translate-x-full opacity-0"},{default:fe(()=>[e("div",{class:ie(["max-w-sm w-full shadow-lg rounded-xl pointer-events-auto overflow-hidden border-l-4",l(F.type)])},[e("div",_$,[e("div",$$,[e("div",S$,[(m(),Re(xt(d(F.type)),{class:ie([c(F.type),"h-5 w-5"])},null,8,["class"]))]),e("div",D$,[e("p",{class:ie(["text-sm font-semibold",u(F.type)])},y(F.title),3),F.message?(m(),f("p",{key:0,class:ie(["mt-1 text-sm",p(F.type)])},y(F.message),3)):Y("",!0)]),e("div",C$,[e("button",{onClick:E=>i(F.id),class:ie(["inline-flex rounded-md focus:outline-none focus:ring-2 focus:ring-offset-2 transition-colors duration-200",v(F.type)])},[x[0]||(x[0]=e("span",{class:"sr-only"},"Close",-1)),re(_e(w$),{class:"h-4 w-4"})],10,T$)])]),F.actions&&F.actions.length?(m(),f("div",E$,[(m(!0),f(he,null,ke(F.actions,E=>(m(),f("button",{key:E.label,onClick:O=>C(E,F),class:ie(["text-xs font-medium px-3 py-1 rounded-md transition-colors duration-200",g(F.type)])},y(E.label),11,A$))),128))])):Y("",!0)]),F.autoHide&&F.duration?(m(),f("div",{key:0,class:ie(["h-1 transition-all duration-100 ease-linear",h(F.type)]),style:Pt({width:`${D(F)}%`})},null,6)):Y("",!0)],2)]),_:2},1024))),128))])]))}},M$=Qe(I$,[["__scopeId","data-v-255a3f3a"]]),R$={class:"min-h-screen bg-gray-50 flex flex-col font-sans"},P$={class:"flex flex-1 pt-0"},j$={class:"flex-1 p-4 lg:p-6 xl:p-8 pt-4 relative"},N$={class:"transition-all duration-200 ease-in-out"},Ao={__name:"DashboardLayout",setup(t){const o=Ke(),s=tt(),n=V(window.innerWidth>768);Ls("sidebarOpen",n);const r=()=>{n.value=!n.value},i=te(()=>s.user),a=async()=>{try{await s.logout(),o.push("/login")}catch(l){console.error("Logout failed:",l)}};return Ee(()=>{const l=()=>{window.innerWidth<768?n.value=!1:n.value=!0};return window.addEventListener("resize",l),()=>{window.removeEventListener("resize",l)}}),(l,d)=>{const c=He("router-view");return m(),f("div",R$,[re(Y_,{user:i.value,"sidebar-open":n.value,onToggleSidebar:r,onLogout:a,class:"z-30 transition-all duration-300 ease-in-out"},null,8,["user","sidebar-open"]),e("div",P$,[re(v$,{isOpen:n.value,user:i.value,class:"transition-all duration-300 ease-in-out shadow-lg"},null,8,["isOpen","user"]),e("div",{class:ie(["flex-1 flex flex-col min-w-0 transition-all duration-300 ease-in-out",n.value?"ml-72 md:ml-72 sm:ml-0":"ml-0"])},[e("main",j$,[e("div",N$,[re(c,null,{default:fe(({Component:u})=>[re(It,{name:"fade",mode:"out-in",appear:""},{default:fe(()=>[(m(),Re(xt(u)))]),_:2},1024)]),_:1})])])],2)]),re(M$),re(Ia)])}}},L$={class:"min-h-screen bg-gradient-to-br from-indigo-50 via-white to-indigo-100"},B$={class:"bg-white/80 backdrop-blur-md border-b border-indigo-100 sticky top-0 z-50"},V$={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},U$={class:"flex justify-between items-center h-16"},F$={class:"hidden md:flex items-center space-x-4"},O$={key:0,class:"md:hidden mt-4 bg-white shadow-lg rounded-xl border border-indigo-100 px-6 py-6 space-y-4 transition-all duration-300"},z$={class:"pt-4 border-t border-gray-200"},H$={class:"relative py-20 px-4 sm:px-6 lg:px-8"},q$={class:"max-w-7xl mx-auto"},G$={class:"text-center"},W$={class:"flex flex-col sm:flex-row gap-4 justify-center items-center"},J$={id:"features",class:"py-20 bg-white"},Y$={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},K$={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8"},X$={class:"w-14 h-14 bg-indigo-600 rounded-xl flex items-center justify-center mb-6"},Z$={class:"w-7 h-7 text-white",fill:"currentColor",viewBox:"0 0 24 24"},Q$=["d"],e7={class:"text-xl font-bold text-gray-900 mb-3"},t7={class:"text-gray-600 leading-relaxed"},o7={class:"py-20 bg-indigo-600"},s7={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},n7={class:"grid grid-cols-2 md:grid-cols-4 gap-8 text-center"},r7={class:"text-3xl md:text-4xl font-bold mb-2"},a7={class:"text-indigo-200"},i7={class:"bg-gray-900 text-white py-12"},l7={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},d7={class:"grid grid-cols-1 md:grid-cols-4 gap-8"},u7={class:"space-y-2 text-gray-400"},c7={__name:"LandingPage",setup(t){const o=V(!1),s=[{id:1,title:"Devotee Management",description:"Comprehensive devotee profiles with family lineage, spiritual information, and preferences management.",icon:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197m13.5-9a2.5 2.5 0 11-5 0 2.5 2.5 0 015 0z"},{id:2,title:"Seva Bookings",description:"Easy online seva booking system with calendar integration and automated confirmations.",icon:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"},{id:3,title:"Donation Tracking",description:"Secure donation processing with automated receipts and comprehensive financial reporting.",icon:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"},{id:4,title:"Event Management",description:"Organize festivals and events with RSVP tracking and automated devotee notifications.",icon:"M11 3.055A9.001 9.001 0 1020.945 13H11V3.055z M20.488 9H15V3.512A9.025 9.025 0 0120.488 9z"},{id:5,title:"Communication Hub",description:"Bulk messaging system with SMS, WhatsApp, and email integration for devotee outreach.",icon:"M7 8h10M7 12h4m1 8l-4-4H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-3l-4 4z"},{id:6,title:"Multi-Role Access",description:"Role-based permissions for temple admins, volunteers, and devotees with secure access control.",icon:"M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"}],n=[{value:"500+",label:"Active Temples"},{value:"50K+",label:"Devotees Managed"},{value:"1M+",label:"Sevas Booked"},{value:"99.9%",label:"Uptime"}],r=()=>{o.value=!1};Ee(()=>{document.addEventListener("click",i)}),Ut(()=>{document.removeEventListener("click",i)});const i=a=>{o.value&&!a.target.closest("nav")&&r()};return(a,l)=>{const d=He("router-link");return m(),f("div",L$,[e("nav",B$,[e("div",V$,[e("div",U$,[l[4]||(l[4]=$e('<div class="flex items-center space-x-3" data-v-5e77edb8><div class="w-10 h-10 bg-gradient-to-br from-indigo-600 to-indigo-800 rounded-xl flex items-center justify-center" data-v-5e77edb8><svg class="w-6 h-6 text-white" fill="currentColor" viewBox="0 0 24 24" data-v-5e77edb8><path d="M12 2L2 7v10c0 5.55 3.84 9.739 9 11 5.16-1.261 9-5.45 9-11V7l-10-5z" data-v-5e77edb8></path></svg></div><span class="text-xl font-bold text-gray-900" data-v-5e77edb8>Devotee Connect</span></div><div class="hidden md:flex items-center space-x-8" data-v-5e77edb8><a href="#features" class="text-gray-600 hover:text-indigo-600 transition-colors duration-200" data-v-5e77edb8>Features</a><a href="#about" class="text-gray-600 hover:text-indigo-600 transition-colors duration-200" data-v-5e77edb8>About</a><a href="#contact" class="text-gray-600 hover:text-indigo-600 transition-colors duration-200" data-v-5e77edb8>Contact</a></div>',2)),e("div",F$,[re(d,{to:"/login",class:"text-indigo-600 hover:text-indigo-700 font-medium transition-colors duration-200"},{default:fe(()=>[...l[1]||(l[1]=[Q(" Login ",-1)])]),_:1}),re(d,{to:"/register",class:"bg-indigo-600 hover:bg-indigo-700 text-white px-6 py-2 rounded-xl font-medium transition-all duration-200 hover:shadow-lg hover:shadow-indigo-500/25"},{default:fe(()=>[...l[2]||(l[2]=[Q(" Register ",-1)])]),_:1})]),e("button",{onClick:l[0]||(l[0]=c=>o.value=!o.value),class:"md:hidden p-2 rounded-lg hover:bg-gray-100 transition-colors duration-200"},[...l[3]||(l[3]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 6h16M4 12h16M4 18h16"})],-1)])])]),re(It,{name:"fade"},{default:fe(()=>[o.value?(m(),f("div",O$,[l[7]||(l[7]=e("a",{href:"#features",class:"block text-gray-700 font-medium hover:text-indigo-600 transition-colors duration-200"},"Features",-1)),l[8]||(l[8]=e("a",{href:"#about",class:"block text-gray-700 font-medium hover:text-indigo-600 transition-colors duration-200"},"About",-1)),l[9]||(l[9]=e("a",{href:"#contact",class:"block text-gray-700 font-medium hover:text-indigo-600 transition-colors duration-200"},"Contact",-1)),e("div",z$,[re(d,{to:"/login",class:"block text-indigo-600 hover:text-indigo-700 font-medium transition duration-200 mb-2"},{default:fe(()=>[...l[5]||(l[5]=[Q(" Login ",-1)])]),_:1}),re(d,{to:"/register",class:"block bg-indigo-600 hover:bg-indigo-700 text-white px-4 py-2 rounded-xl font-medium transition-all duration-200 text-center"},{default:fe(()=>[...l[6]||(l[6]=[Q(" Register ",-1)])]),_:1})])])):Y("",!0)]),_:1})])]),e("section",H$,[e("div",q$,[e("div",G$,[l[12]||(l[12]=$e('<div class="inline-flex items-center px-4 py-2 bg-indigo-100 rounded-full text-indigo-800 text-sm font-medium mb-8" data-v-5e77edb8><svg class="w-4 h-4 mr-2" fill="currentColor" viewBox="0 0 24 24" data-v-5e77edb8><path d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" data-v-5e77edb8></path></svg> Trusted by 500+ Temples Worldwide </div><h1 class="text-4xl md:text-6xl font-bold text-gray-900 mb-6 leading-tight" data-v-5e77edb8> Manage your temple, <span class="text-indigo-600" data-v-5e77edb8>devotees, sevas</span><br class="hidden sm:block" data-v-5e77edb8> &amp; donations with ease </h1><p class="text-xl text-gray-600 mb-10 max-w-3xl mx-auto leading-relaxed" data-v-5e77edb8> Streamline your temple operations with our comprehensive SaaS platform. From devotee management to seva bookings, donations, and events - all in one place. </p>',3)),e("div",W$,[re(d,{to:"/register",class:"bg-indigo-600 hover:bg-indigo-700 text-white px-8 py-4 rounded-xl text-lg font-semibold transition-all duration-200 hover:shadow-xl hover:shadow-indigo-500/25 hover:-translate-y-1"},{default:fe(()=>[...l[10]||(l[10]=[Q(" Get Started ",-1)])]),_:1}),re(d,{to:"/login",class:"border-2 border-indigo-600 text-indigo-600 hover:bg-indigo-600 hover:text-white px-8 py-4 rounded-xl text-lg font-semibold transition-all duration-200 hover:shadow-lg"},{default:fe(()=>[...l[11]||(l[11]=[Q(" Already User? ",-1)])]),_:1})])])]),l[13]||(l[13]=e("div",{class:"absolute top-20 left-10 w-20 h-20 bg-indigo-200 rounded-full opacity-50 animate-pulse"},null,-1)),l[14]||(l[14]=e("div",{class:"absolute bottom-20 right-10 w-16 h-16 bg-indigo-300 rounded-full opacity-60 animate-pulse delay-1000"},null,-1))]),e("section",J$,[e("div",Y$,[l[15]||(l[15]=e("div",{class:"text-center mb-16"},[e("h2",{class:"text-3xl md:text-4xl font-bold text-gray-900 mb-4"}," Everything you need to manage your temple "),e("p",{class:"text-xl text-gray-600 max-w-2xl mx-auto"}," Comprehensive tools designed specifically for temple administration and devotee engagement ")],-1)),e("div",K$,[(m(),f(he,null,ke(s,c=>e("div",{key:c.id,class:"bg-gradient-to-br from-white to-indigo-50 p-8 rounded-2xl border border-indigo-100 hover:shadow-xl hover:shadow-indigo-500/10 transition-all duration-300 hover:-translate-y-2"},[e("div",X$,[(m(),f("svg",Z$,[e("path",{d:c.icon},null,8,Q$)]))]),e("h3",e7,y(c.title),1),e("p",t7,y(c.description),1)])),64))])])]),e("section",o7,[e("div",s7,[e("div",n7,[(m(),f(he,null,ke(n,c=>e("div",{key:c.label,class:"text-white"},[e("div",r7,y(c.value),1),e("div",a7,y(c.label),1)])),64))])])]),e("footer",i7,[e("div",l7,[e("div",d7,[l[19]||(l[19]=$e('<div class="md:col-span-2" data-v-5e77edb8><div class="flex items-center space-x-3 mb-4" data-v-5e77edb8><div class="w-10 h-10 bg-indigo-600 rounded-xl flex items-center justify-center" data-v-5e77edb8><svg class="w-6 h-6 text-white" fill="currentColor" viewBox="0 0 24 24" data-v-5e77edb8><path d="M12 2L2 7v10c0 5.55 3.84 9.739 9 11 5.16-1.261 9-5.45 9-11V7l-10-5z" data-v-5e77edb8></path></svg></div><span class="text-xl font-bold" data-v-5e77edb8>Devotee Connect</span></div><p class="text-gray-400 mb-4 max-w-md" data-v-5e77edb8> Empowering temples worldwide with modern technology for better devotee management and spiritual community building. </p></div><div data-v-5e77edb8><h4 class="font-semibold mb-4" data-v-5e77edb8>Quick Links</h4><ul class="space-y-2 text-gray-400" data-v-5e77edb8><li data-v-5e77edb8><a href="#features" class="hover:text-white transition-colors duration-200" data-v-5e77edb8>Features</a></li><li data-v-5e77edb8><a href="#about" class="hover:text-white transition-colors duration-200" data-v-5e77edb8>About</a></li><li data-v-5e77edb8><a href="#contact" class="hover:text-white transition-colors duration-200" data-v-5e77edb8>Contact</a></li></ul></div>',2)),e("div",null,[l[18]||(l[18]=e("h4",{class:"font-semibold mb-4"},"Legal",-1)),e("ul",u7,[e("li",null,[re(d,{to:"/terms",class:"hover:text-white transition-colors duration-200"},{default:fe(()=>[...l[16]||(l[16]=[Q("Terms of Service",-1)])]),_:1})]),e("li",null,[re(d,{to:"/privacy",class:"hover:text-white transition-colors duration-200"},{default:fe(()=>[...l[17]||(l[17]=[Q("Privacy Policy",-1)])]),_:1})])])])]),l[20]||(l[20]=e("div",{class:"border-t border-gray-800 mt-8 pt-8 text-center text-gray-400"},[e("p",null," 2025 Devotee Connect. All rights reserved.")],-1))])])])}}},p7=Qe(c7,[["__scopeId","data-v-5e77edb8"]]),m7={class:"min-h-screen bg-gray-50"},g7={class:"bg-white shadow-sm border-b border-gray-200"},f7={class:"max-w-4xl mx-auto px-4 py-3"},v7={class:"flex items-center justify-between"},h7={class:"max-w-4xl mx-auto px-4 py-12"},y7={class:"bg-white rounded-2xl shadow-lg border border-gray-200 p-8 lg:p-12"},x7={class:"mb-8"},b7={class:"text-gray-600"},w7={class:"bg-white border-t border-gray-200 mt-12"},k7={class:"max-w-4xl mx-auto px-4 py-8"},_7={class:"flex items-center justify-between"},$7={class:"flex space-x-6"},S7={__name:"TermsPage",setup(t){const o=V("January 15, 2025");return(s,n)=>{const r=He("router-link");return m(),f("div",m7,[e("header",g7,[e("div",f7,[e("div",v7,[re(r,{to:"/",class:"inline-flex items-center"},{default:fe(()=>[...n[0]||(n[0]=[e("div",{class:"flex items-center space-x-3"},[e("div",{class:"w-10 h-10 bg-gradient-to-br from-indigo-600 to-indigo-800 rounded-xl flex items-center justify-center"},[e("svg",{class:"w-6 h-6 text-white",fill:"currentColor",viewBox:"0 0 24 24"},[e("path",{d:"M12 2L2 7v10c0 5.55 3.84 9.739 9 11 5.16-1.261 9-5.45 9-11V7l-10-5z"})])]),e("span",{class:"text-xl font-bold text-gray-900"},"TempleSaaS")],-1)])]),_:1}),re(r,{to:"/",class:"text-sm font-medium text-indigo-600 hover:text-indigo-500 transition-colors duration-200"},{default:fe(()=>[...n[1]||(n[1]=[Q(" Back to Home ",-1)])]),_:1})])])]),e("main",h7,[e("div",y7,[e("div",x7,[n[2]||(n[2]=e("h1",{class:"text-3xl font-bold text-gray-900 mb-4"},"Terms of Service",-1)),e("p",b7,"Last updated: "+y(o.value),1)]),n[3]||(n[3]=$e('<div class="prose prose-indigo max-w-none"><section class="mb-8"><h2 class="text-xl font-semibold text-gray-900 mb-4">1. Acceptance of Terms</h2><p class="text-gray-700 mb-4"> By accessing and using TempleSaaS (&quot;Service&quot;), you accept and agree to be bound by the terms and provision of this agreement. </p></section><section class="mb-8"><h2 class="text-xl font-semibold text-gray-900 mb-4">2. Description of Service</h2><p class="text-gray-700 mb-4"> TempleSaaS is a multi-tenant SaaS platform designed to help temples manage their activities including: </p><ul class="list-disc pl-6 text-gray-700 mb-4 space-y-2"><li>Devotee management and profile creation</li><li>Seva bookings and scheduling</li><li>Donation tracking and receipt generation</li><li>Event management and communication</li><li>Volunteer coordination</li></ul></section><section class="mb-8"><h2 class="text-xl font-semibold text-gray-900 mb-4">3. User Accounts and Registration</h2><p class="text-gray-700 mb-4"> To access certain features of the Service, you may be required to register for an account. You agree to: </p><ul class="list-disc pl-6 text-gray-700 mb-4 space-y-2"><li>Provide accurate, current, and complete information during registration</li><li>Maintain and promptly update your account information</li><li>Maintain the security of your password and account</li><li>Accept responsibility for all activities under your account</li></ul></section><section class="mb-8"><h2 class="text-xl font-semibold text-gray-900 mb-4">4. User Roles and Responsibilities</h2><div class="space-y-4"><div class="bg-indigo-50 rounded-lg p-4"><h3 class="font-medium text-indigo-900 mb-2">Temple Administrators (Tenants)</h3><p class="text-indigo-800 text-sm"> Responsible for temple registration, approval process, and managing temple operations including devotees, sevas, and events. </p></div><div class="bg-green-50 rounded-lg p-4"><h3 class="font-medium text-green-900 mb-2">Devotees</h3><p class="text-green-800 text-sm"> Can join approved temples, complete profiles, book sevas, make donations, and participate in temple events. </p></div><div class="bg-purple-50 rounded-lg p-4"><h3 class="font-medium text-purple-900 mb-2">Volunteers</h3><p class="text-purple-800 text-sm"> Can join approved temples, receive assignments, and support temple operations under admin guidance. </p></div></div></section><section class="mb-8"><h2 class="text-xl font-semibold text-gray-900 mb-4">5. Temple Approval Process</h2><p class="text-gray-700 mb-4"> Temple registrations are subject to administrative approval. We reserve the right to: </p><ul class="list-disc pl-6 text-gray-700 mb-4 space-y-2"><li>Review and verify temple documentation</li><li>Approve or reject temple applications</li><li>Request additional documentation as needed</li><li>Suspend or deactivate temple accounts for policy violations</li></ul></section><section class="mb-8"><h2 class="text-xl font-semibold text-gray-900 mb-4">6. Privacy and Data Protection</h2><p class="text-gray-700 mb-4"> Your privacy is important to us. Please review our Privacy Policy to understand how we collect, use, and protect your information. </p></section><section class="mb-8"><h2 class="text-xl font-semibold text-gray-900 mb-4">7. Prohibited Uses</h2><p class="text-gray-700 mb-4">You may not use our Service:</p><ul class="list-disc pl-6 text-gray-700 mb-4 space-y-2"><li>For any unlawful purpose or to solicit others to perform unlawful acts</li><li>To violate any international, federal, provincial, or state regulations, rules, laws, or local ordinances</li><li>To infringe upon or violate our intellectual property rights or the intellectual property rights of others</li><li>To harass, abuse, insult, harm, defame, slander, disparage, intimidate, or discriminate</li><li>To submit false or misleading information</li></ul></section><section class="mb-8"><h2 class="text-xl font-semibold text-gray-900 mb-4">8. Limitation of Liability</h2><p class="text-gray-700 mb-4"> In no event shall TempleSaaS, nor its directors, employees, partners, agents, suppliers, or affiliates, be liable for any indirect, incidental, special, consequential, or punitive damages, including without limitation, loss of profits, data, use, goodwill, or other intangible losses, resulting from your use of the Service. </p></section><section class="mb-8"><h2 class="text-xl font-semibold text-gray-900 mb-4">9. Termination</h2><p class="text-gray-700 mb-4"> We may terminate or suspend your account and bar access to the Service immediately, without prior notice or liability, under our sole discretion, for any reason whatsoever and without limitation, including but not limited to a breach of the Terms. </p></section><section class="mb-8"><h2 class="text-xl font-semibold text-gray-900 mb-4">10. Changes to Terms</h2><p class="text-gray-700 mb-4"> We reserve the right, at our sole discretion, to modify or replace these Terms at any time. If a revision is material, we will try to provide at least 30 days notice prior to any new terms taking effect. </p></section><section><h2 class="text-xl font-semibold text-gray-900 mb-4">11. Contact Information</h2><p class="text-gray-700 mb-4"> If you have any questions about these Terms of Service, please contact us at: </p><div class="bg-gray-50 rounded-lg p-4"><p class="text-gray-700"><strong>Email:</strong> support@TempleSaaS.com<br><strong>Address:</strong> Temple Management Solutions<br> 123 Spiritual Avenue, Sacred City, SC 12345 </p></div></section></div>',1))])]),e("footer",w7,[e("div",k7,[e("div",_7,[n[6]||(n[6]=e("p",{class:"text-sm text-gray-500"},"  2025 TempleSaaS. All rights reserved. ",-1)),e("div",$7,[re(r,{to:"/privacy",class:"text-sm text-gray-500 hover:text-indigo-600 transition-colors duration-200"},{default:fe(()=>[...n[4]||(n[4]=[Q(" Privacy Policy ",-1)])]),_:1}),re(r,{to:"/",class:"text-sm text-gray-500 hover:text-indigo-600 transition-colors duration-200"},{default:fe(()=>[...n[5]||(n[5]=[Q(" Home ",-1)])]),_:1})])])])])])}}},D7={class:"min-h-screen bg-gradient-to-br from-indigo-50 via-white to-indigo-100"},C7={class:"bg-white shadow-md border-b border-indigo-100"},T7={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},E7={class:"flex justify-between items-center h-16"},A7={class:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-12"},I7={class:"bg-white rounded-2xl shadow-lg border border-indigo-100 overflow-hidden"},M7={class:"bg-gradient-to-r from-indigo-600 to-indigo-800 px-8 py-12 text-center"},R7={class:"mt-6 text-indigo-200 text-sm"},P7={class:"px-8 py-12"},j7={class:"mb-12"},N7={class:"flex flex-wrap gap-2"},L7=["onClick"],B7={class:"space-y-12"},V7=["id"],U7=["id"],F7=["id"],O7=["id"],z7=["id"],H7={__name:"PrivacyPage",setup(t){const o=V("December 15, 2024"),s=V("information-collection"),n=[{id:"information-collection",title:"Information We Collect"},{id:"how-we-use",title:"How We Use Data"},{id:"data-security",title:"Data Security"},{id:"your-rights",title:"Your Rights"},{id:"contact-info",title:"Contact Us"}],r=a=>{const l=document.getElementById(a);l&&l.scrollIntoView({behavior:"smooth",block:"start"})},i=()=>{const a=window.scrollY+200;for(const l of n){const d=document.getElementById(l.id);if(d){const{offsetTop:c,offsetHeight:u}=d;if(a>=c&&a<c+u){s.value=l.id;break}}}};return Ee(()=>{window.addEventListener("scroll",i)}),Ut(()=>{window.removeEventListener("scroll",i)}),(a,l)=>{const d=He("router-link");return m(),f("div",D7,[e("header",C7,[e("div",T7,[e("div",E7,[l[1]||(l[1]=$e('<div class="flex items-center space-x-3"><div class="w-10 h-10 bg-gradient-to-br from-indigo-600 to-indigo-800 rounded-xl flex items-center justify-center"><svg class="w-6 h-6 text-white" fill="currentColor" viewBox="0 0 24 24"><path d="M12 2L2 7v10c0 5.55 3.84 9.739 9 11 5.16-1.261 9-5.45 9-11V7l-10-5z"></path></svg></div><span class="text-xl font-bold text-gray-900">TempleSaaS</span></div>',1)),re(d,{to:"/",class:"inline-flex items-center px-4 py-2 border border-indigo-200 rounded-xl text-sm font-medium text-indigo-700 bg-indigo-50 hover:bg-indigo-100 hover:border-indigo-300 transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2"},{default:fe(()=>[...l[0]||(l[0]=[e("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 19l-7-7m0 0l7-7m-7 7h18"})],-1),Q(" Back to Home ",-1)])]),_:1})])])]),e("main",A7,[e("div",I7,[e("div",M7,[l[2]||(l[2]=$e('<div class="w-16 h-16 bg-white bg-opacity-20 rounded-2xl flex items-center justify-center mx-auto mb-4"><svg class="w-8 h-8" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.031 9-11.622 0-1.042-.13-2.052-.382-3.016z"></path></svg></div><h1 class="text-3xl sm:text-4xl font-bold text-white mb-3">Privacy Policy</h1><p class="text-indigo-100 text-lg max-w-2xl mx-auto"> Your privacy and spiritual data security are sacred to us </p>',3)),e("div",R7," Last updated: "+y(o.value),1)]),e("div",P7,[e("nav",j7,[e("div",N7,[(m(),f(he,null,ke(n,c=>e("button",{key:c.id,onClick:u=>r(c.id),class:ie(["px-4 py-2 text-sm font-medium rounded-xl border transition-all duration-200",s.value===c.id?"bg-indigo-600 text-white border-indigo-600":"text-indigo-600 border-indigo-200 hover:bg-indigo-50"])},y(c.title),11,L7)),64))])]),e("div",B7,[e("section",{id:n[0].id,class:"scroll-mt-8"},[...l[3]||(l[3]=[$e('<div class="flex items-start space-x-4 mb-6"><div class="w-12 h-12 bg-indigo-100 rounded-xl flex items-center justify-center flex-shrink-0"><svg class="w-6 h-6 text-indigo-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg></div><div class="flex-1"><h2 class="text-2xl font-bold text-gray-900 mb-4">Information We Collect</h2><div class="prose prose-indigo max-w-none"><p class="text-gray-700 mb-4">We collect information to provide better spiritual services and temple management:</p><div class="grid md:grid-cols-2 gap-6 mb-6"><div class="bg-indigo-50 rounded-xl p-6 border borwhom:der-indigo-100"><h3 class="font-semibold text-indigo-900 mb-3">Personal Information</h3><ul class="text-sm text-indigo-800 space-y-2"><li> Full name and contact details</li><li> Spiritual information (Gotra, Nakshatra, Rashi)</li><li> Family lineage and relationships</li><li> Seva preferences and donations</li></ul></div><div class="bg-green-50 rounded-xl p-6 border border-green-100"><h3 class="font-semibold text-green-900 mb-3">Usage Information</h3><ul class="text-sm text-green-800 space-y-2"><li> Temple visits and seva bookings</li><li> Event participation and RSVPs</li><li> Communication preferences</li><li> Device and browser information</li></ul></div></div></div></div></div>',1)])],8,V7),e("section",{id:n[1].id,class:"scroll-mt-8"},[...l[4]||(l[4]=[$e('<div class="flex items-start space-x-4 mb-6"><div class="w-12 h-12 bg-green-100 rounded-xl flex items-center justify-center flex-shrink-0"><svg class="w-6 h-6 text-green-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"></path></svg></div><div class="flex-1"><h2 class="text-2xl font-bold text-gray-900 mb-4">How We Use Your Information</h2><div class="grid gap-4"><div class="bg-gradient-to-r from-indigo-50 to-purple-50 rounded-xl p-6 border border-indigo-100"><h3 class="font-semibold text-indigo-900 mb-2"> Spiritual Services</h3><p class="text-indigo-800 text-sm">Facilitate seva bookings, manage donations, and coordinate temple events according to your spiritual preferences.</p></div><div class="bg-gradient-to-r from-blue-50 to-indigo-50 rounded-xl p-6 border border-blue-100"><h3 class="font-semibold text-blue-900 mb-2"> Communications</h3><p class="text-blue-800 text-sm">Send you important temple announcements, event notifications, and seva reminders via your preferred communication channels.</p></div><div class="bg-gradient-to-r from-green-50 to-teal-50 rounded-xl p-6 border border-green-100"><h3 class="font-semibold text-green-900 mb-2"> Account Security</h3><p class="text-green-800 text-sm">Protect your account, prevent fraud, and ensure the security of your spiritual and financial data.</p></div></div></div></div>',1)])],8,U7),e("section",{id:n[2].id,class:"scroll-mt-8"},[...l[5]||(l[5]=[$e('<div class="flex items-start space-x-4 mb-6"><div class="w-12 h-12 bg-red-100 rounded-xl flex items-center justify-center flex-shrink-0"><svg class="w-6 h-6 text-red-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"></path></svg></div><div class="flex-1"><h2 class="text-2xl font-bold text-gray-900 mb-4">Data Security &amp; Storage</h2><div class="bg-red-50 rounded-xl p-6 border border-red-100 mb-6"><h3 class="font-semibold text-red-900 mb-3"> Security Measures</h3><div class="grid md:grid-cols-2 gap-4 text-sm text-red-800"><div> End-to-end encryption for all data</div><div> Secure cloud storage with backups</div><div> Multi-factor authentication</div><div> Regular security audits</div><div> Role-based access controls</div><div> GDPR compliance measures</div></div></div><div class="bg-yellow-50 rounded-xl p-6 border border-yellow-100"><h3 class="font-semibold text-yellow-900 mb-2"> Important Note</h3><p class="text-yellow-800 text-sm">Your spiritual data is treated with the utmost respect and confidentiality. We never share personal spiritual information with third parties without explicit consent.</p></div></div></div>',1)])],8,F7),e("section",{id:n[3].id,class:"scroll-mt-8"},[...l[6]||(l[6]=[$e('<div class="flex items-start space-x-4 mb-6"><div class="w-12 h-12 bg-purple-100 rounded-xl flex items-center justify-center flex-shrink-0"><svg class="w-6 h-6 text-purple-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"></path></svg></div><div class="flex-1"><h2 class="text-2xl font-bold text-gray-900 mb-4">Your Privacy Rights</h2><div class="grid gap-4"><div class="flex items-start space-x-4 p-4 bg-gray-50 rounded-xl border border-gray-200"><div class="w-8 h-8 bg-indigo-100 rounded-lg flex items-center justify-center flex-shrink-0"><span class="text-indigo-600 font-bold">1</span></div><div><h3 class="font-semibold text-gray-900 mb-1">Access &amp; Download</h3><p class="text-gray-700 text-sm">Request a copy of all your personal and spiritual data stored in our system.</p></div></div><div class="flex items-start space-x-4 p-4 bg-gray-50 rounded-xl border border-gray-200"><div class="w-8 h-8 bg-indigo-100 rounded-lg flex items-center justify-center flex-shrink-0"><span class="text-indigo-600 font-bold">2</span></div><div><h3 class="font-semibold text-gray-900 mb-1">Correction &amp; Updates</h3><p class="text-gray-700 text-sm">Update or correct any inaccurate information in your profile at any time.</p></div></div><div class="flex items-start space-x-4 p-4 bg-gray-50 rounded-xl border border-gray-200"><div class="w-8 h-8 bg-indigo-100 rounded-lg flex items-center justify-center flex-shrink-0"><span class="text-indigo-600 font-bold">3</span></div><div><h3 class="font-semibold text-gray-900 mb-1">Account Deletion</h3><p class="text-gray-700 text-sm">Request complete deletion of your account and associated data from our platform.</p></div></div></div></div></div>',1)])],8,O7),e("section",{id:n[4].id,class:"scroll-mt-8"},[...l[7]||(l[7]=[$e('<div class="bg-gradient-to-r from-indigo-600 to-purple-600 rounded-2xl p-8 text-white"><div class="text-center mb-8"><div class="w-16 h-16 bg-opacity-20 rounded-2xl flex items-center justify-center mx-auto mb-4"><svg class="w-8 h-8 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"></path></svg></div><h2 class="text-2xl font-bold mb-2">Questions About Privacy?</h2><p class="text-indigo-100">We&#39;re here to help with any privacy concerns</p></div><div class="grid md:grid-cols-2 gap-6"><div class="bg-opacity-10 rounded-xl p-6 backdrop-blur-sm"><h3 class="font-semibold mb-3 flex items-center"><svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"></path></svg> Email Support </h3><p class="text-indigo-100 text-sm">privacy@TempleSaaS.com</p></div><div class="bg-opacity-10 rounded-xl p-6 backdrop-blur-sm"><h3 class="font-semibold mb-3 flex items-center"><svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg> Response Time </h3><p class="text-indigo-100 text-sm">Within 48 hours</p></div></div></div>',1)])],8,z7)])])])]),l[8]||(l[8]=e("footer",{class:"bg-white border-t border-indigo-100 mt-12"},[e("div",{class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},[e("div",{class:"text-center text-gray-600 text-sm"},[e("p",null," 2024 TempleSaaS. All rights reserved. | Built with devotion for spiritual communities.")])])],-1))])}}},q7={class:"login-form"},G7={key:0,class:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative mb-4"},W7={class:"block sm:inline"},J7={class:"mt-1"},Y7=["disabled"],K7={class:"mt-1"},X7=["disabled"],Z7={class:"flex items-center justify-between"},Q7={class:"flex items-center"},e8=["disabled"],t8={class:"text-sm"},o8=["disabled"],s8={class:"text-center"},n8={__name:"LoginForm",setup(t){const o=Ke(),s=Ze(),n=tt(),r=V({email:"",password:""}),i=V(!1),a=V(!1),l=V(null);te(()=>s.query.redirect||"");const d=async()=>{var c,u;if(!r.value.email||!r.value.password){l.value="Please enter your email and password";return}a.value=!0,l.value=null;try{console.log(" Starting login process...");const p=await n.login({email:r.value.email,password:r.value.password});if(p.success){console.log(" Login successful!"),console.log(" User role:",n.userRole),console.log(" Redirect path from auth store:",p.redirectPath);const v=p.redirectPath;console.log(" Navigating to:",v),await o.push(v),console.log(" Navigation completed successfully")}else console.log(" Login failed:",p.error),l.value=p.error||"Login failed"}catch(p){console.error(" Login error:",p),p.response?p.response.status===401?l.value="Invalid email or password":p.response.status===403?l.value="Your account is locked or inactive":p.response.status>=500?l.value="Server error. Please try again later":l.value=((c=p.response.data)==null?void 0:c.message)||((u=p.response.data)==null?void 0:u.error)||"Login failed":p.request?l.value="Cannot connect to the server. Please check your internet connection":l.value=p.message||"An unexpected error occurred"}finally{a.value=!1}};return(c,u)=>{const p=He("router-link");return m(),f("div",q7,[l.value?(m(),f("div",G7,[e("span",W7,y(l.value),1),e("button",{onClick:u[0]||(u[0]=v=>l.value=null),class:"absolute top-0 right-0 p-2",type:"button"},[...u[4]||(u[4]=[e("span",{class:"text-red-700"},"",-1)])])])):Y("",!0),e("form",{onSubmit:Oe(d,["prevent"]),class:"space-y-6"},[e("div",null,[u[5]||(u[5]=e("label",{for:"email",class:"block text-sm font-medium text-gray-700"},"Email",-1)),e("div",J7,[de(e("input",{id:"email","onUpdate:modelValue":u[1]||(u[1]=v=>r.value.email=v),type:"email",required:"",autocomplete:"email",class:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500",placeholder:"Enter your email",disabled:a.value},null,8,Y7),[[xe,r.value.email]])])]),e("div",null,[u[6]||(u[6]=e("label",{for:"password",class:"block text-sm font-medium text-gray-700"},"Password",-1)),e("div",K7,[de(e("input",{id:"password","onUpdate:modelValue":u[2]||(u[2]=v=>r.value.password=v),type:"password",required:"",autocomplete:"current-password",class:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500",placeholder:"Enter your password",disabled:a.value},null,8,X7),[[xe,r.value.password]])])]),e("div",Z7,[e("div",Q7,[de(e("input",{id:"remember_me","onUpdate:modelValue":u[3]||(u[3]=v=>i.value=v),type:"checkbox",class:"h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded",disabled:a.value},null,8,e8),[[ot,i.value]]),u[7]||(u[7]=e("label",{for:"remember_me",class:"ml-2 block text-sm text-gray-900"},"Remember me",-1))]),e("div",t8,[re(p,{to:"/forgot-password",class:"font-medium text-indigo-600 hover:text-indigo-500"},{default:fe(()=>[...u[8]||(u[8]=[Q(" Forgot your password? ",-1)])]),_:1})])]),e("div",null,[e("button",{type:"submit",disabled:a.value,class:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50 disabled:cursor-not-allowed"},[a.value?(m(),f(he,{key:0},[u[9]||(u[9]=e("svg",{class:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1)),u[10]||(u[10]=Q(" Signing in... ",-1))],64)):(m(),f(he,{key:1},[Q(" Sign in ")],64))],8,o8)]),e("div",s8,[re(p,{to:"/register",class:"font-medium text-indigo-600 hover:text-indigo-500"},{default:fe(()=>[...u[11]||(u[11]=[Q(" Don't have an account? Register ",-1)])]),_:1})])],32)])}}},r8=Qe(n8,[["__scopeId","data-v-68ed44e9"]]),a8={class:"min-h-screen bg-gradient-to-br from-indigo-50 via-white to-indigo-100 flex items-center justify-center px-2 sm:px-4 lg:px-0"},i8={class:"relative w-full max-w-md z-10"},l8={class:"bg-white/80 backdrop-blur-sm rounded-2xl shadow-xl border border-white/20 p-8"},d8={__name:"LoginView",setup(t){document.title="Login - Temple SaaS";const o=Ke(),s=n=>{console.log("Login successful. User role:",n.role);const r=(n.role||"").toLowerCase();if(r==="standard_user"||r==="standarduser"||r==="monitoring_user"||r==="monitoringuser"){console.log("EMERGENCY REDIRECT: Forcing immediate redirect to tenant selection"),window.location.href=window.location.origin+"/tenant-selection";return}if(r==="superadmin"||r==="super_admin")o.push("/superadmin/dashboard");else if(r==="tenant"||r==="templeadmin"){const i=n.id||localStorage.getItem("current_tenant_id");o.push(i?`/tenant/${i}/dashboard`:"/tenant/dashboard")}else r==="devotee"?o.push("/devotee/temple-selection"):r==="volunteer"?o.push("/volunteer/temple-selection"):o.push("/")};return Ee(()=>{try{const n=JSON.parse(localStorage.getItem("user_data"));if(n&&n.role){const r=n.role.toLowerCase();console.log("LOGIN VIEW - Checking role on mount:",r),(r==="standard_user"||r==="standarduser"||r==="monitoring_user"||r==="monitoringuser")&&(console.log("LOGIN VIEW - Detected special role, force redirecting"),setTimeout(()=>{window.location.href=window.location.origin+"/tenant-selection"},100))}}catch(n){console.error("Error checking user role on mount:",n)}}),(n,r)=>(m(),f("div",a8,[r[2]||(r[2]=e("div",{class:"absolute inset-0 bg-white/50 backdrop-blur-sm"},[e("div",{class:"absolute inset-0 bg-[radial-gradient(circle_at_2px_2px,rgba(79,70,229,0.1)_1px,transparent_0)] [background-size:24px_24px]"})],-1)),e("div",i8,[r[0]||(r[0]=$e('<div class="text-center mb-8"><div class="inline-flex items-center justify-center w-16 h-16 bg-indigo-600 rounded-2xl shadow-lg mb-4"><svg class="w-8 h-8 text-white" fill="currentColor" viewBox="0 0 24 24"><path d="M12 2L2 7L12 12L22 7L12 2Z"></path><path d="M2 17L12 22L22 17"></path><path d="M2 12L12 17L22 12"></path></svg></div><h1 class="text-2xl font-bold text-indigo-900 mb-2">Temple SaaS</h1><p class="text-indigo-600 text-sm">Manage your temple with ease</p></div>',1)),e("div",l8,[re(r8,{onLoginSuccess:s})]),r[1]||(r[1]=e("div",{class:"text-center mt-8"},[e("p",{class:"text-sm text-indigo-600/80"},"  2025 Temple SaaS. All rights reserved. ")],-1))]),r[3]||(r[3]=e("div",{class:"absolute top-10 left-10 w-20 h-20 bg-indigo-200/30 rounded-full blur-xl"},null,-1)),r[4]||(r[4]=e("div",{class:"absolute bottom-10 right-10 w-32 h-32 bg-indigo-300/20 rounded-full blur-2xl"},null,-1)),r[5]||(r[5]=e("div",{class:"absolute top-1/2 left-1/4 w-4 h-4 bg-indigo-400/40 rounded-full"},null,-1)),r[6]||(r[6]=e("div",{class:"absolute top-1/3 right-1/3 w-6 h-6 bg-indigo-500/30 rounded-full"},null,-1))]))}},u8={key:0,class:"border-b border-gray-100 pb-4 mb-4"},c8={key:0,class:"flex items-center justify-between"},p8={class:"text-lg font-semibold text-gray-900"},m8={key:1,class:"border-t border-gray-100 pt-4 mt-4"},g8="bg-white rounded-xl shadow-md border border-gray-200 transition-all duration-200",vt={__name:"BaseCard",props:{title:{type:String,default:""},elevated:{type:Boolean,default:!1},hoverable:{type:Boolean,default:!1},clickable:{type:Boolean,default:!1},padding:{type:String,default:"default",validator:t=>["none","sm","default","lg"].includes(t)},contentClass:{type:String,default:""},customClass:{type:String,default:""}},emits:["click"],setup(t,{emit:o}){const s=t,n=o,r=xm(),i=te(()=>!!(r.header||s.title)),a=te(()=>!!r.footer),l={none:"",sm:"p-4",default:"p-6",lg:"p-8"},d=te(()=>{let u=g8;const p=l[s.padding]||l.default;return u+=` ${p}`,s.hoverable&&(u+=" hover:shadow-lg hover:border-indigo-200"),s.elevated&&(u+=" shadow-lg border-indigo-200"),s.clickable&&(u+=" cursor-pointer"),s.customClass&&(u+=` ${s.customClass}`),u}),c=u=>{s.clickable&&n("click",u)};return(u,p)=>(m(),f("div",{class:ie(d.value),onClick:c},[i.value?(m(),f("div",u8,[Dt(u.$slots,"header",{},()=>[t.title?(m(),f("div",c8,[e("h3",p8,y(t.title),1),Dt(u.$slots,"headerActions")])):Y("",!0)])])):Y("",!0),e("div",{class:ie(t.contentClass)},[Dt(u.$slots,"default")],2),a.value?(m(),f("div",m8,[Dt(u.$slots,"footer")])):Y("",!0)],2))}},f8={class:"space-y-1"},v8=["for"],h8={key:0,class:"text-red-500 ml-1"},y8={class:"relative"},x8={key:0,class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},b8=["id","type","value","placeholder","disabled","readonly","required","autocomplete"],w8={key:1,class:"absolute inset-y-0 right-0 pr-3 flex items-center"},k8={key:1,class:"text-sm text-gray-500"},_8={key:2,class:"text-sm text-red-600"},st={__name:"BaseInput",props:{modelValue:{type:[String,Number],default:""},type:{type:String,default:"text",validator:t=>["text","email","password","number","tel","url","search"].includes(t)},label:{type:String,default:""},placeholder:{type:String,default:""},helpText:{type:String,default:""},error:{type:String,default:""},required:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},readonly:{type:Boolean,default:!1},iconLeft:{type:[String,Object],default:null},iconRight:{type:[String,Object],default:null},autocomplete:{type:String,default:"off"},size:{type:String,default:"md",validator:t=>["sm","md","lg"].includes(t)}},emits:["update:modelValue","blur","focus","keydown"],setup(t,{emit:o}){const s=t,n=o,r=V(`input-${Math.random().toString(36).substr(2,9)}`),i=V(!1),a=te(()=>!!s.error),l=te(()=>s.type==="password"),d=te(()=>l.value?i.value?"text":"password":s.type),c=te(()=>{const D=["block w-full border rounded-md shadow-sm","placeholder-gray-400","focus:outline-none focus:ring-2 focus:ring-offset-2","transition-colors duration-200"],C={sm:"px-3 py-2 text-sm",md:"px-4 py-2.5 text-sm",lg:"px-4 py-3 text-base"};return D.push(C[s.size]||C.md),s.iconLeft&&D.push("pl-10"),(s.iconRight||l.value)&&D.push("pr-10"),a.value?D.push("border-red-300 text-red-900","focus:ring-red-500 focus:border-red-500"):D.push("border-gray-300 text-gray-900","focus:ring-indigo-500 focus:border-indigo-500"),s.disabled?D.push("bg-gray-50 text-gray-500 cursor-not-allowed"):s.readonly?D.push("bg-gray-50"):D.push("bg-white"),D.join(" ")}),u=D=>{n("update:modelValue",D.target.value)},p=D=>{n("blur",D)},v=D=>{n("focus",D)},g=D=>{n("keydown",D)},h=()=>{i.value=!i.value};return Ee(()=>{r.value.startsWith("input-")||(r.value=`input-${Math.random().toString(36).substr(2,9)}`)}),(D,C)=>(m(),f("div",f8,[t.label?(m(),f("label",{key:0,for:r.value,class:ie(["block text-sm font-medium text-gray-700",{"text-red-700":a.value}])},[Q(y(t.label)+" ",1),t.required?(m(),f("span",h8,"*")):Y("",!0)],10,v8)):Y("",!0),e("div",y8,[t.iconLeft?(m(),f("div",x8,[(m(),Re(xt(t.iconLeft),{class:ie(["h-5 w-5 text-gray-400",{"text-red-400":a.value}])},null,8,["class"]))])):Y("",!0),e("input",{id:r.value,type:d.value,value:t.modelValue,placeholder:t.placeholder,disabled:t.disabled,readonly:t.readonly,required:t.required,autocomplete:t.autocomplete,class:ie(c.value),onInput:u,onBlur:p,onFocus:v,onKeydown:g},null,42,b8),t.iconRight||l.value?(m(),f("div",w8,[l.value?(m(),f("button",{key:0,type:"button",class:"text-gray-400 hover:text-gray-600 focus:outline-none",onClick:h},[i.value?(m(),Re(_e(Ay),{key:0,class:"h-5 w-5"})):(m(),Re(_e(Ey),{key:1,class:"h-5 w-5"}))])):t.iconRight?(m(),Re(xt(t.iconRight),{key:1,class:ie(["h-5 w-5 text-gray-400",{"text-red-400":a.value}])},null,8,["class"])):Y("",!0)])):Y("",!0)]),t.helpText&&!a.value?(m(),f("p",k8,y(t.helpText),1)):Y("",!0),a.value?(m(),f("p",_8,y(t.error),1)):Y("",!0)]))}},$8=["type","disabled"],S8={key:0,class:"animate-spin -ml-1 mr-2 h-4 w-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},D8={key:2},lt={__name:"BaseButton",props:{variant:{type:String,default:"primary",validator:t=>["primary","secondary","outline","ghost","danger","success","warning"].includes(t)},size:{type:String,default:"md",validator:t=>["xs","sm","md","lg","xl"].includes(t)},type:{type:String,default:"button",validator:t=>["button","submit","reset"].includes(t)},text:{type:String,default:""},disabled:{type:Boolean,default:!1},loading:{type:Boolean,default:!1},iconLeft:{type:[String,Object],default:null},iconRight:{type:[String,Object],default:null},fullWidth:{type:Boolean,default:!1},rounded:{type:String,default:"md",validator:t=>["none","sm","md","lg","xl","full"].includes(t)}},emits:["click"],setup(t,{emit:o}){const s=t,n=o,r=te(()=>{const u={primary:"bg-indigo-600 text-white hover:bg-indigo-700 focus:ring-indigo-500 border-transparent",secondary:"bg-indigo-100 text-indigo-700 hover:bg-indigo-200 focus:ring-indigo-500 border-transparent",outline:"bg-transparent text-indigo-600 border-indigo-300 hover:bg-indigo-50 focus:ring-indigo-500",ghost:"bg-transparent text-gray-700 hover:bg-gray-100 focus:ring-gray-500 border-transparent",danger:"bg-red-600 text-white hover:bg-red-700 focus:ring-red-500 border-transparent",success:"bg-green-600 text-white hover:bg-green-700 focus:ring-green-500 border-transparent",warning:"bg-yellow-500 text-white hover:bg-yellow-600 focus:ring-yellow-400 border-transparent"};return u[s.variant]||u.primary}),i=te(()=>{const u={xs:"px-2.5 py-1.5 text-xs",sm:"px-3 py-2 text-sm",md:"px-4 py-2.5 text-sm",lg:"px-6 py-3 text-base",xl:"px-8 py-4 text-lg"};return u[s.size]||u.md}),a=te(()=>{const u={xs:"w-3 h-3",sm:"w-4 h-4",md:"w-4 h-4",lg:"w-5 h-5",xl:"w-6 h-6"};return u[s.size]||u.md}),l=te(()=>{const u={none:"rounded-none",sm:"rounded-sm",md:"rounded-md",lg:"rounded-lg",xl:"rounded-xl",full:"rounded-full"};return u[s.rounded]||u.md}),d=te(()=>{const u=["inline-flex items-center justify-center","font-medium","border","transition-all duration-200","focus:outline-none focus:ring-2 focus:ring-offset-2",l.value,r.value,i.value];return s.fullWidth&&u.push("w-full"),(s.disabled||s.loading)&&u.push("opacity-50 cursor-not-allowed"),s.iconLeft&&(s.text||s.$slots.default)&&u.push("space-x-2"),s.iconRight&&(s.text||s.$slots.default)&&u.push("space-x-2"),u.join(" ")}),c=u=>{!s.disabled&&!s.loading&&n("click",u)};return(u,p)=>(m(),f("button",{type:t.type,disabled:t.disabled||t.loading,class:ie(d.value),onClick:c},[t.loading?(m(),f("svg",S8,[...p[0]||(p[0]=[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)])])):Y("",!0),t.iconLeft&&!t.loading?(m(),Re(xt(t.iconLeft),{key:1,class:ie(a.value)},null,8,["class"])):Y("",!0),u.$slots.default||t.text?(m(),f("span",D8,[Dt(u.$slots,"default",{},()=>[Q(y(t.text),1)])])):Y("",!0),t.iconRight&&!t.loading?(m(),Re(xt(t.iconRight),{key:3,class:ie(a.value)},null,8,["class"])):Y("",!0)],10,$8))}},C8={key:0,class:"mt-2 space-y-2"},T8={class:"flex space-x-1"},E8={class:"flex items-center justify-between"},A8={class:"text-xs text-gray-500"},I8={class:"space-y-1"},M8={key:0,"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"},R8={key:1,cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"2"},P8={key:0,class:"bg-yellow-50 border border-yellow-200 rounded-lg p-3 mt-3"},j8={__name:"PasswordStrengthMeter",props:{password:{type:String,default:""}},setup(t,{expose:o}){const s=t,n=te(()=>{if(!s.password)return 0;let d=0;return s.password.length>=8&&(d+=1),s.password.length>=12&&(d+=1),/[a-z]/.test(s.password)&&(d+=1),/[A-Z]/.test(s.password)&&(d+=1),/\d/.test(s.password)&&(d+=1),/[^a-zA-Z\d]/.test(s.password)&&(d+=1),s.password.length>=16&&(d+=1),Math.min(d,4)}),r=te(()=>[{key:"length",text:"At least 8 characters",met:s.password.length>=8},{key:"lowercase",text:"One lowercase letter",met:/[a-z]/.test(s.password)},{key:"uppercase",text:"One uppercase letter",met:/[A-Z]/.test(s.password)},{key:"number",text:"One number",met:/\d/.test(s.password)},{key:"special",text:"One special character",met:/[^a-zA-Z\d]/.test(s.password)}]),i=te(()=>["Very Weak","Weak","Fair","Good","Strong"][n.value]||"Very Weak"),a=d=>{if(d<=n.value)switch(n.value){case 1:return"bg-red-500";case 2:return"bg-orange-500";case 3:return"bg-yellow-500";case 4:return"bg-green-500";default:return"bg-gray-200"}return"bg-gray-200"},l=()=>{switch(n.value){case 1:return"text-red-600";case 2:return"text-orange-600";case 3:return"text-yellow-600";case 4:return"text-green-600";default:return"text-gray-500"}};return o({strength:n,isValid:te(()=>n.value>=3)}),(d,c)=>t.password?(m(),f("div",C8,[e("div",T8,[(m(),f(he,null,ke(4,u=>e("div",{key:u,class:ie(["h-2 flex-1 rounded-full transition-all duration-300",a(u)])},null,2)),64))]),e("div",E8,[e("span",{class:ie(["text-sm font-medium",l()])},y(i.value),3),e("span",A8,y(t.password.length)+"/8+ characters ",1)]),e("div",I8,[(m(!0),f(he,null,ke(r.value,u=>(m(),f("div",{key:u.key,class:ie(["flex items-center text-xs transition-colors duration-200",u.met?"text-green-600":"text-gray-500"])},[(m(),f("svg",{class:ie(["w-3 h-3 mr-2 transition-colors duration-200",u.met?"text-green-500":"text-gray-400"]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[u.met?(m(),f("path",M8)):(m(),f("circle",R8))],2)),Q(" "+y(u.text),1)],2))),128))]),n.value<3?(m(),f("div",P8,[...c[0]||(c[0]=[$e('<div class="flex items-start"><svg class="w-4 h-4 text-yellow-600 mt-0.5 mr-2 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L5.082 16.5c-.77.833.192 2.5 1.732 2.5z"></path></svg><div><p class="text-sm text-yellow-800 font-medium">Security Tip</p><p class="text-xs text-yellow-700 mt-1"> Use a mix of uppercase, lowercase, numbers, and symbols for better security </p></div></div>',1)])])):Y("",!0)])):Y("",!0)}},N8={key:0,class:"mb-6 bg-green-50 border border-green-200 rounded-lg p-4"},L8={class:"flex items-center"},B8={class:"ml-3"},V8={class:"mt-1 text-sm text-green-700"},U8={key:0},F8={key:1},O8={class:"mt-3"},z8={class:"grid grid-cols-3 gap-4"},H8=["onClick"],q8={class:"flex flex-col items-center text-center"},G8={class:"w-7 h-7 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},W8={key:0,"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-2 8h2V9h-2v8z"},J8={key:1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"},Y8={key:2,"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"},K8={class:"font-medium text-gray-900"},X8={key:0,class:"absolute top-3 right-3 w-6 h-6 bg-indigo-600 rounded-full flex items-center justify-center"},Z8={key:0,class:"mt-2 text-sm text-red-600"},Q8={key:0,class:"mt-6 overflow-hidden bg-white rounded-lg border border-gray-200"},eS={class:"px-6 py-5 space-y-6"},tS={key:0,class:"mt-1 text-xs text-red-600"},oS={key:0,class:"mt-1 text-xs text-red-600"},sS={key:0,class:"mt-1 text-xs text-red-600"},nS={key:0,class:"mt-1 text-xs text-red-600"},rS={key:0,class:"mt-1 text-xs text-red-600"},aS={class:"flex items-start mt-6"},iS={for:"terms",class:"ml-3 text-sm text-gray-700"},lS={key:1,class:"text-red-600 text-sm -mt-4"},dS={class:"text-center pt-4 border-t border-gray-200"},uS={class:"text-sm text-gray-600"},cS={class:"py-4"},pS={key:0,class:"text-gray-600"},mS={key:1,class:"text-gray-600"},gS={__name:"RegisterView",setup(t){const o=Ke(),s=tt(),{success:n,error:r}=je(),i=V(!1),a=V(!1),l=V(!1),d=V(!1),c=V({}),u=[{value:"tenant",label:"Temple Admin"},{value:"devotee",label:"Devotee"},{value:"volunteer",label:"Volunteer"}],p=V({fullName:"",email:"",password:"",phone:"",role:"",acceptTerms:!1,templeDetails:null}),v=V({name:"",place:"",address:"",phoneNumber:"",description:""});Ue(()=>p.value.role,(S,k)=>{k==="tenant"&&S!=="tenant"&&["templeName","templePlace","templeAddress","templePhoneNo","templeDescription"].forEach(x=>{delete c.value[x]})});const g=te(()=>{const S=p.value.fullName&&p.value.email&&p.value.password&&p.value.phone&&p.value.role&&p.value.acceptTerms,k=p.value.role!=="tenant"||v.value.name&&v.value.place&&v.value.address&&v.value.phoneNumber&&v.value.description;return S&&k&&Object.keys(c.value).length===0}),h=S=>{c.value[S]&&(delete c.value[S],c.value={...c.value})},D=S=>{console.log("Role selected:",S),p.value.role=S,h("role"),S!=="tenant"&&(["templeName","templePlace","templeAddress","templePhoneNo","templeDescription"].forEach(b=>delete c.value[b]),c.value={...c.value})},C=()=>{const S={},k=/^[A-Za-z\s]+$/;return p.value.fullName.trim()?p.value.fullName.trim().length<2?S.fullName="Full name must be at least 2 characters":k.test(p.value.fullName.trim())||(S.fullName="Full name cannot contain numbers or special characters"):S.fullName="Full name is required",p.value.email?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(p.value.email)?p.value.email.endsWith("@gmail.com")||(S.email="Only @gmail.com email addresses are allowed"):S.email="Please enter a valid email address":S.email="Email is required",p.value.password?p.value.password.length<8&&(S.password="Password must be at least 8 characters"):S.password="Password is required",p.value.phone?/^[\+]?[1-9][\d]{0,15}$/.test(p.value.phone.replace(/\s/g,""))||(S.phone="Please enter a valid phone number"):S.phone="Phone number is required",p.value.role||(S.role="Please select your role"),p.value.role==="tenant"&&(v.value.name||(S.templeName="Temple name is required"),v.value.place||(S.templePlace="Temple place is required"),v.value.address||(S.templeAddress="Temple address is required"),v.value.phoneNumber||(S.templePhoneNo="Temple phone number is required"),v.value.description||(S.templeDescription="Temple description is required"),v.value.name&&v.value.place&&v.value.address&&v.value.phoneNumber&&v.value.description&&(p.value.templeDetails={...v.value})),p.value.acceptTerms||(S.acceptTerms="You must accept the terms and privacy policy"),c.value=S,Object.keys(S).length===0},B=async()=>{var S,k,b,x;if(c.value={},!C()){Qo(()=>{const F=document.querySelector(".text-red-600");F&&F.scrollIntoView({behavior:"smooth",block:"center"})});return}i.value=!0;try{const F={tenant:"templeadmin",devotee:"devotee",volunteer:"volunteer"},E={fullName:p.value.fullName,email:p.value.email,password:p.value.password,phone:p.value.phone,role:F[p.value.role]||p.value.role};p.value.role==="tenant"&&(E.templeName=v.value.name,E.templePlace=v.value.place,E.templeAddress=v.value.address,E.templePhoneNo=v.value.phoneNumber,E.templeDescription=v.value.description||"");try{const O=await Le.auth.register(E);l.value=p.value.role==="tenant",a.value=!0,d.value=!0,n(l.value?"Your temple admin account has been created! You'll be notified after approval.":"Your account has been created successfully!"),s&&typeof s.setRegistrationResult=="function"&&s.setRegistrationResult({success:!0,needsApproval:l.value,message:l.value?"Your temple admin account has been created. You'll be notified after approval.":"Your account has been created successfully."}),_(),setTimeout(()=>T(),3e3)}catch(O){if(console.error("API Error during registration:",O),(k=(S=O.response)==null?void 0:S.data)!=null&&k.error){const N=O.response.data.error;N==="Email is already registered"?(c.value.email="This email is already registered. Please login or use another email.",r(c.value.email)):r(N)}if((x=(b=O.response)==null?void 0:b.data)!=null&&x.errors){const N=O.response.data.errors;Object.keys(N).forEach(L=>{c.value[L]=N[L]})}c.value={...c.value}}}catch(F){console.error("Registration error:",F),r("An error occurred during registration. Please try again.")}finally{i.value=!1}},_=()=>{p.value={fullName:"",email:"",password:"",phone:"",role:"",acceptTerms:!1,templeDetails:null},v.value={name:"",place:"",address:"",phoneNumber:"",description:""},c.value={}},T=()=>{a.value=!1,Qo(()=>o.push("/login"))};return(S,k)=>{const b=He("router-link");return m(),Re(vt,{class:"w-full max-w-md mx-auto"},{default:fe(()=>[k[45]||(k[45]=e("div",{class:"text-center mb-8"},[e("h2",{class:"text-3xl font-bold text-gray-900 mb-2"},"Create Account"),e("p",{class:"text-gray-600"},"Join our temple management platform")],-1)),d.value?(m(),f("div",N8,[e("div",L8,[k[22]||(k[22]=e("div",{class:"flex-shrink-0"},[e("svg",{class:"h-5 w-5 text-green-500",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[e("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z","clip-rule":"evenodd"})])],-1)),e("div",B8,[k[21]||(k[21]=e("h3",{class:"text-sm font-medium text-green-800"},"Registration Successful!",-1)),e("div",V8,[l.value?(m(),f("p",U8," Your temple admin account has been created. You'll receive an email once your account is approved by our team. ")):(m(),f("p",F8," Your account has been created successfully. You can now login to access your dashboard. "))]),e("div",O8,[re(lt,{onClick:T,variant:"success",size:"sm"},{default:fe(()=>[...k[20]||(k[20]=[Q(" Go to Login ",-1)])]),_:1})])])])])):Y("",!0),d.value?Y("",!0):(m(),f("form",{key:1,onSubmit:Oe(B,["prevent"]),class:"space-y-6"},[e("div",null,[k[23]||(k[23]=e("label",{for:"fullName",class:"block text-sm font-medium text-gray-700 mb-2"},[Q(" Full Name "),e("span",{class:"text-red-500"},"*")],-1)),re(st,{id:"fullName",modelValue:p.value.fullName,"onUpdate:modelValue":k[0]||(k[0]=x=>p.value.fullName=x),type:"text",placeholder:"Enter your full name",error:c.value.fullName,required:"",autocomplete:"name",onInput:k[1]||(k[1]=x=>h("fullName"))},null,8,["modelValue","error"])]),e("div",null,[k[24]||(k[24]=e("label",{for:"email",class:"block text-sm font-medium text-gray-700 mb-2"},[Q(" Email Address "),e("span",{class:"text-red-500"},"*")],-1)),re(st,{id:"email",modelValue:p.value.email,"onUpdate:modelValue":k[2]||(k[2]=x=>p.value.email=x),type:"email",placeholder:"Enter your email",error:c.value.email,required:"",autocomplete:"email",onInput:k[3]||(k[3]=x=>h("email"))},null,8,["modelValue","error"])]),e("div",null,[k[25]||(k[25]=e("label",{for:"password",class:"block text-sm font-medium text-gray-700 mb-2"},[Q(" Password "),e("span",{class:"text-red-500"},"*")],-1)),re(st,{id:"password",modelValue:p.value.password,"onUpdate:modelValue":k[4]||(k[4]=x=>p.value.password=x),type:"password",placeholder:"Create a strong password",error:c.value.password,required:"",autocomplete:"new-password",onInput:k[5]||(k[5]=x=>h("password"))},null,8,["modelValue","error"]),re(j8,{password:p.value.password,class:"mt-2"},null,8,["password"])]),e("div",null,[k[26]||(k[26]=e("label",{for:"phone",class:"block text-sm font-medium text-gray-700 mb-2"},[Q(" Phone Number "),e("span",{class:"text-red-500"},"*")],-1)),re(st,{id:"phone",modelValue:p.value.phone,"onUpdate:modelValue":k[6]||(k[6]=x=>p.value.phone=x),type:"tel",placeholder:"Enter your phone number",error:c.value.phone,required:"",autocomplete:"tel",onInput:k[7]||(k[7]=x=>h("phone"))},null,8,["modelValue","error"])]),e("div",null,[k[28]||(k[28]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},[Q(" I want to join as "),e("span",{class:"text-red-500"},"*")],-1)),e("div",z8,[(m(),f(he,null,ke(u,x=>e("div",{key:x.value,class:ie(["relative border-2 rounded-lg cursor-pointer transition-all duration-200 p-4",p.value.role===x.value?"border-indigo-600 bg-indigo-50 shadow-md":"border-gray-200 hover:border-indigo-300 hover:bg-gray-50"]),onClick:F=>D(x.value)},[e("div",q8,[e("div",{class:ie(["w-14 h-14 rounded-full flex items-center justify-center mb-2 transition-colors duration-200",p.value.role===x.value?"bg-indigo-100":"bg-gray-200"])},[(m(),f("svg",G8,[x.value==="tenant"?(m(),f("path",W8)):x.value==="devotee"?(m(),f("path",J8)):x.value==="volunteer"?(m(),f("path",Y8)):Y("",!0)]))],2),e("h3",K8,y(x.label),1)]),p.value.role===x.value?(m(),f("div",X8,[...k[27]||(k[27]=[e("svg",{class:"w-4 h-4 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})],-1)])])):Y("",!0)],10,H8)),64))]),c.value.role?(m(),f("div",Z8,y(c.value.role),1)):Y("",!0)]),p.value.role==="tenant"?(m(),f("div",Q8,[k[34]||(k[34]=e("div",{class:"px-6 py-4 bg-indigo-600"},[e("div",{class:"flex items-center"},[e("h3",{class:"text-lg font-medium leading-6 text-white"},"Temple Details")]),e("p",{class:"mt-1 text-sm text-indigo-100"}," Please provide the following details about your temple ")],-1)),e("div",eS,[e("div",null,[k[29]||(k[29]=e("label",{for:"templeName",class:"block text-sm font-medium text-gray-700 mb-1"},[Q(" Temple Name "),e("span",{class:"text-red-500"},"*")],-1)),de(e("input",{id:"templeName","onUpdate:modelValue":k[8]||(k[8]=x=>v.value.name=x),type:"text",class:"block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",placeholder:"Enter temple name",required:"",onInput:k[9]||(k[9]=x=>h("templeName"))},null,544),[[xe,v.value.name]]),c.value.templeName?(m(),f("div",tS,y(c.value.templeName),1)):Y("",!0)]),e("div",null,[k[30]||(k[30]=e("label",{for:"templePlace",class:"block text-sm font-medium text-gray-700 mb-1"},[Q(" Temple Place "),e("span",{class:"text-red-500"},"*")],-1)),de(e("input",{id:"templePlace","onUpdate:modelValue":k[10]||(k[10]=x=>v.value.place=x),type:"text",class:"block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",placeholder:"Enter temple location",required:"",onInput:k[11]||(k[11]=x=>h("templePlace"))},null,544),[[xe,v.value.place]]),c.value.templePlace?(m(),f("div",oS,y(c.value.templePlace),1)):Y("",!0)]),e("div",null,[k[31]||(k[31]=e("label",{for:"templeAddress",class:"block text-sm font-medium text-gray-700 mb-1"},[Q(" Temple Address "),e("span",{class:"text-red-500"},"*")],-1)),de(e("textarea",{id:"templeAddress","onUpdate:modelValue":k[12]||(k[12]=x=>v.value.address=x),rows:"3",class:"block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",placeholder:"Enter complete temple address",required:"",onInput:k[13]||(k[13]=x=>h("templeAddress"))},null,544),[[xe,v.value.address]]),c.value.templeAddress?(m(),f("div",sS,y(c.value.templeAddress),1)):Y("",!0)]),e("div",null,[k[32]||(k[32]=e("label",{for:"templePhone",class:"block text-sm font-medium text-gray-700 mb-1"},[Q(" Temple Phone Number "),e("span",{class:"text-red-500"},"*")],-1)),de(e("input",{id:"templePhone","onUpdate:modelValue":k[14]||(k[14]=x=>v.value.phoneNumber=x),type:"tel",class:"block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",placeholder:"Enter temple contact number",required:"",onInput:k[15]||(k[15]=x=>h("templePhoneNo"))},null,544),[[xe,v.value.phoneNumber]]),c.value.templePhoneNo?(m(),f("div",nS,y(c.value.templePhoneNo),1)):Y("",!0)]),e("div",null,[k[33]||(k[33]=e("label",{for:"templeDescription",class:"block text-sm font-medium text-gray-700 mb-1"},[Q(" Description "),e("span",{class:"text-red-500"},"*")],-1)),de(e("textarea",{id:"templeDescription","onUpdate:modelValue":k[16]||(k[16]=x=>v.value.description=x),rows:"4",class:"block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",placeholder:"Provide additional details about your temple (history, services, etc.)",required:"",onInput:k[17]||(k[17]=x=>h("templeDescription"))},null,544),[[xe,v.value.description]]),c.value.templeDescription?(m(),f("div",rS,y(c.value.templeDescription),1)):Y("",!0)])])])):Y("",!0),e("div",aS,[de(e("input",{id:"terms","onUpdate:modelValue":k[18]||(k[18]=x=>p.value.acceptTerms=x),type:"checkbox",required:"",class:"mt-1 h-4 w-4 text-indigo-600 border-gray-300 rounded focus:ring-indigo-500 focus:ring-2",onChange:k[19]||(k[19]=x=>h("acceptTerms"))},null,544),[[ot,p.value.acceptTerms]]),e("label",iS,[k[37]||(k[37]=Q(" I agree to the ",-1)),re(b,{to:"/terms",class:"text-indigo-600 hover:text-indigo-800 font-medium"},{default:fe(()=>[...k[35]||(k[35]=[Q(" Terms of Service ",-1)])]),_:1}),k[38]||(k[38]=Q(" and ",-1)),re(b,{to:"/privacy",class:"text-indigo-600 hover:text-indigo-800 font-medium"},{default:fe(()=>[...k[36]||(k[36]=[Q(" Privacy Policy ",-1)])]),_:1}),k[39]||(k[39]=e("span",{class:"text-red-500"},"*",-1))])]),c.value.acceptTerms?(m(),f("div",lS,y(c.value.acceptTerms),1)):Y("",!0),re(lt,{type:"submit",variant:"primary",size:"lg",loading:i.value,disabled:!g.value,class:"w-full mt-6"},{default:fe(()=>[...k[40]||(k[40]=[Q(" Create Account ",-1)])]),_:1},8,["loading","disabled"]),e("div",dS,[e("p",uS,[k[42]||(k[42]=Q(" Already have an account? ",-1)),re(b,{to:"/login",class:"text-indigo-600 hover:text-indigo-800 font-medium transition-colors duration-200"},{default:fe(()=>[...k[41]||(k[41]=[Q(" Sign In ",-1)])]),_:1})])])],32)),a.value?(m(),Re(Ia,{key:2,onClose:T},{header:fe(()=>[...k[43]||(k[43]=[e("h3",{class:"text-lg font-medium text-gray-900"},"Registration Successful!",-1)])]),default:fe(()=>[e("div",cS,[l.value?(m(),f("p",pS," Your temple admin account has been created. You'll receive an email once your account is approved by our team. ")):(m(),f("p",mS," Your account has been created successfully. You can now login to access your dashboard. "))])]),footer:fe(()=>[re(lt,{onClick:T,variant:"primary",class:"w-full"},{default:fe(()=>[...k[44]||(k[44]=[Q(" Go to Login ",-1)])]),_:1})]),_:1})):Y("",!0)]),_:1})}}},fS={class:"text-center mb-8"},vS={class:"text-gray-600"},hS={key:0,class:"text-center space-y-6"},yS={class:"bg-green-50 border border-green-200 rounded-xl p-6"},xS={class:"text-green-700 text-sm mb-4"},bS={class:"space-y-3"},wS={class:"text-center pt-4 border-t border-gray-200"},kS={class:"text-sm text-gray-600"},_S={__name:"ForgotPasswordView",setup(t){const o=Ke(),s=tt(),{showToast:n}=je(),r=V(!1),i=V(!1),a=V({email:""}),l=V({email:""}),d=te(()=>a.value.email&&!l.value.email),c=()=>(l.value={},a.value.email?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(a.value.email)||(l.value.email="Please enter a valid email address"):l.value.email="Email is required",Object.keys(l.value).length===0),u=async()=>{if(c()){r.value=!0;try{const v=await s.forgotPassword(a.value.email);v.success?(i.value=!0,n("Password reset instructions sent to your email","success")):n(v.message||"Failed to send reset instructions. Please try again.","error")}catch(v){console.error("Forgot password error:",v),n("An error occurred. Please try again later.","error")}finally{r.value=!1}}},p=()=>{i.value=!1,a.value.email="",l.value={}};return(v,g)=>{const h=He("router-link");return m(),Re(vt,{class:"w-full max-w-md mx-auto"},{default:fe(()=>[e("div",fS,[g[2]||(g[2]=e("h2",{class:"text-3xl font-bold text-gray-900 mb-2"},"Reset Password",-1)),e("p",vS,y(i.value?"Check your email for reset instructions":"Enter your email to receive reset instructions"),1)]),i.value?(m(),f("div",hS,[e("div",yS,[g[4]||(g[4]=e("div",{class:"flex items-center justify-center w-12 h-12 mx-auto mb-4 bg-green-100 rounded-full"},[e("svg",{class:"w-6 h-6 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})])],-1)),g[5]||(g[5]=e("h3",{class:"text-lg font-semibold text-green-900 mb-2"},"Email Sent!",-1)),e("p",xS,[g[3]||(g[3]=Q(" We've sent password reset instructions to ",-1)),e("strong",null,y(a.value.email),1)]),g[6]||(g[6]=e("p",{class:"text-green-600 text-xs"}," Didn't receive the email? Check your spam folder or try again in a few minutes. ",-1))]),e("div",bS,[re(lt,{onClick:p,variant:"outline",size:"md",class:"w-full"},{default:fe(()=>[...g[7]||(g[7]=[Q(" Try Different Email ",-1)])]),_:1}),re(lt,{onClick:g[0]||(g[0]=D=>_e(o).push("/login")),variant:"primary",size:"md",class:"w-full"},{default:fe(()=>[...g[8]||(g[8]=[Q(" Back to Login ",-1)])]),_:1})])])):(m(),f("form",{key:1,onSubmit:Oe(u,["prevent"]),class:"space-y-6"},[e("div",null,[g[9]||(g[9]=e("label",{for:"email",class:"block text-sm font-medium text-gray-700 mb-2"}," Email Address ",-1)),re(st,{id:"email",modelValue:a.value.email,"onUpdate:modelValue":g[1]||(g[1]=D=>a.value.email=D),type:"email",placeholder:"Enter your registered email",error:l.value.email,required:"",autocomplete:"email"},null,8,["modelValue","error"]),g[10]||(g[10]=e("p",{class:"text-sm text-gray-500 mt-2"}," Enter the email address associated with your account ",-1))]),re(lt,{type:"submit",variant:"primary",size:"lg",loading:r.value,disabled:!d.value,class:"w-full"},{default:fe(()=>[...g[11]||(g[11]=[Q(" Send Reset Instructions ",-1)])]),_:1},8,["loading","disabled"]),e("div",wS,[e("p",kS,[g[13]||(g[13]=Q(" Remember your password? ",-1)),re(h,{to:"/login",class:"text-indigo-600 hover:text-indigo-800 font-medium transition-colors duration-200"},{default:fe(()=>[...g[12]||(g[12]=[Q(" Back to Login ",-1)])]),_:1})])])],32)),g[14]||(g[14]=e("div",{class:"mt-8 p-4 bg-gray-50 rounded-xl"},[e("h4",{class:"text-sm font-medium text-gray-900 mb-2"},"Need Help?"),e("p",{class:"text-xs text-gray-600 leading-relaxed"}," If you're having trouble accessing your account, please contact our support team. We're here to help you get back to managing your temple activities. ")],-1))]),_:1})}}},$S={class:"min-h-screen bg-gray-50 flex flex-col justify-center py-12 sm:px-6 lg:px-8"},SS={class:"mt-8 sm:mx-auto sm:w-full sm:max-w-md"},DS={key:0,class:"text-center py-4"},CS={key:1,class:"text-center py-4"},TS={class:"mt-2 text-sm text-gray-600"},ES={key:0},AS={class:"mt-2"},IS={class:"h-2 bg-gray-200 rounded-full overflow-hidden"},MS={class:"mt-2 grid grid-cols-1 gap-y-1 text-xs"},RS={key:3,class:"text-center space-y-6"},Tu={__name:"ResetPasswordView",setup(t){const o=Ze(),s=Ke(),n=tt(),{showToast:r}=je(),i=V(o.query.token||""),a=V(!0),l=V(""),d=V(!1),c=V(!1),u=V({password:"",confirmPassword:""}),p=V({password:"",confirmPassword:""}),v=te(()=>{const C=u.value.password,B={minLength:C.length>=8,hasUppercase:/[A-Z]/.test(C),hasLowercase:/[a-z]/.test(C),hasNumber:/\d/.test(C),hasSpecialChar:/[!@#$%^&*(),.?":{}|<>]/.test(C)},_=Object.values(B).filter(Boolean).length;return{criteria:B,score:_,strength:_<3?"weak":_<5?"medium":"strong"}}),g=te(()=>u.value.password&&u.value.confirmPassword&&u.value.password===u.value.confirmPassword&&v.value.score>=3);Ue(()=>o.query.token,C=>{i.value=C||"",h()});const h=async()=>{console.log("Validating token:",i.value),console.log("Current route path:",o.path),a.value=!0;try{return i.value?(setTimeout(()=>{a.value=!1},1e3),!0):(l.value="No reset token provided. Please check your email link.",console.error("No token provided in URL"),!1)}catch(C){return console.error("Token validation error:",C),l.value="Error validating token",!1}finally{}},D=async()=>{if(p.value={},u.value.password?u.value.password.length<8&&(p.value.password="Password must be at least 8 characters"):p.value.password="Password is required",u.value.confirmPassword?u.value.password!==u.value.confirmPassword&&(p.value.confirmPassword="Passwords do not match"):p.value.confirmPassword="Please confirm your password",!(Object.keys(p.value).length>0)){c.value=!0;try{console.log("Submitting reset password with token:",i.value);const C=await n.resetPassword(i.value,u.value.password);console.log("Password reset result:",C),C!=null&&C.success?(d.value=!0,r("Password has been reset successfully","success")):(l.value=(C==null?void 0:C.error)||"Failed to reset password",r(l.value,"error"))}catch(C){console.error("Password reset error:",C),l.value="An error occurred. Please try again later.",r(l.value,"error")}finally{c.value=!1}}};return Ee(()=>{console.log("ResetPasswordView mounted!"),console.log("Current route:",o.path),console.log("Route query params:",o.query),console.log("Token from query:",i.value),setTimeout(()=>{h()},100)}),(C,B)=>(m(),f("div",$S,[B[13]||(B[13]=e("div",{class:"sm:mx-auto sm:w-full sm:max-w-md"},[e("h2",{class:"mt-6 text-center text-3xl font-extrabold text-gray-900"},"Reset Your Password"),e("p",{class:"mt-2 text-center text-sm text-gray-600"},"Set a new password for your account")],-1)),e("div",SS,[re(vt,{class:"w-full max-w-md mx-auto"},{default:fe(()=>[a.value?(m(),f("div",DS,[...B[4]||(B[4]=[e("div",{class:"animate-spin rounded-full h-10 w-10 border-b-2 border-indigo-600 mx-auto"},null,-1),e("p",{class:"mt-2 text-gray-600"},"Validating your reset token...",-1)])])):l.value?(m(),f("div",CS,[B[6]||(B[6]=e("div",{class:"rounded-full bg-red-100 p-2 mx-auto w-12 h-12 flex items-center justify-center mb-4"},[e("svg",{class:"w-6 h-6 text-red-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})])],-1)),B[7]||(B[7]=e("h3",{class:"text-lg font-medium text-red-800"},"Invalid or Expired Link",-1)),e("p",TS,y(l.value||"The password reset link is invalid or has expired. Please request a new password reset link."),1),re(lt,{onClick:B[0]||(B[0]=_=>_e(s).push("/forgot-password")),variant:"primary",size:"lg",class:"mt-4 w-full"},{default:fe(()=>[...B[5]||(B[5]=[Q(" Request New Link ",-1)])]),_:1})])):d.value?(m(),f("div",RS,[B[12]||(B[12]=e("div",{class:"bg-green-50 border border-green-200 rounded-xl p-6"},[e("div",{class:"flex items-center justify-center w-12 h-12 mx-auto mb-4 bg-green-100 rounded-full"},[e("svg",{class:"w-6 h-6 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})])]),e("h3",{class:"text-lg font-semibold text-green-900 mb-2"},"Password Reset Successful!"),e("p",{class:"text-green-700 text-sm mb-4"}," Your password has been reset successfully. You can now log in with your new password. ")],-1)),re(lt,{onClick:B[3]||(B[3]=_=>_e(s).push("/login")),variant:"primary",size:"lg",class:"w-full"},{default:fe(()=>[...B[11]||(B[11]=[Q(" Go to Login ",-1)])]),_:1})])):(m(),f("form",{key:2,onSubmit:Oe(D,["prevent"]),class:"space-y-6"},[e("div",null,[B[8]||(B[8]=e("label",{for:"password",class:"block text-sm font-medium text-gray-700 mb-2"}," New Password ",-1)),re(st,{id:"password",modelValue:u.value.password,"onUpdate:modelValue":B[1]||(B[1]=_=>u.value.password=_),type:"password",placeholder:"Enter your new password",error:p.value.password,required:""},null,8,["modelValue","error"])]),e("div",null,[B[9]||(B[9]=e("label",{for:"confirmPassword",class:"block text-sm font-medium text-gray-700 mb-2"}," Confirm New Password ",-1)),re(st,{id:"confirmPassword",modelValue:u.value.confirmPassword,"onUpdate:modelValue":B[2]||(B[2]=_=>u.value.confirmPassword=_),type:"password",placeholder:"Confirm your new password",error:p.value.confirmPassword,required:""},null,8,["modelValue","error"])]),u.value.password?(m(),f("div",ES,[e("div",AS,[e("div",IS,[e("div",{class:ie(["h-full rounded-full transition-all duration-300",{"bg-red-500":v.value.score<3,"bg-yellow-500":v.value.score===3,"bg-green-500":v.value.score>3}]),style:Pt({width:`${v.value.score*20}%`})},null,6)]),e("div",MS,[e("div",{class:ie(v.value.criteria.minLength?"text-green-600":"text-gray-500")},"  At least 8 characters ",2),e("div",{class:ie(v.value.criteria.hasUppercase?"text-green-600":"text-gray-500")},"  At least 1 uppercase letter ",2),e("div",{class:ie(v.value.criteria.hasLowercase?"text-green-600":"text-gray-500")},"  At least 1 lowercase letter ",2),e("div",{class:ie(v.value.criteria.hasNumber?"text-green-600":"text-gray-500")},"  At least 1 number ",2),e("div",{class:ie(v.value.criteria.hasSpecialChar?"text-green-600":"text-gray-500")},"  At least 1 special character ",2)])])])):Y("",!0),re(lt,{type:"submit",variant:"primary",size:"lg",loading:c.value,disabled:!g.value,class:"w-full"},{default:fe(()=>[...B[10]||(B[10]=[Q(" Reset Password ",-1)])]),_:1},8,["loading","disabled"])],32))]),_:1})])]))}},PS={class:"min-h-screen bg-gray-50"},jS={class:"bg-white shadow-sm border-b border-gray-200 rounded-2xl"},NS={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6 flex justify-between items-center"},LS={class:"text-gray-600 mt-1"},BS={key:0,class:"text-indigo-600 font-medium"},VS={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 bg-white rounded-2xl shadow-sm border border-gray-200 mt-6"},US={class:"mb-4"},FS={class:"relative"},OS=["disabled"],zS=["value"],HS={key:0,class:"absolute right-3 top-3"},qS={class:"mb-4"},GS=["disabled"],WS={class:"mb-4"},JS={class:"flex space-x-2"},YS=["onClick","disabled"],KS={class:"mb-4"},XS={class:"flex space-x-2"},ZS=["onClick","disabled"],QS={key:0,class:"mb-4 grid grid-cols-1 md:grid-cols-2 gap-4"},e9=["disabled"],t9=["disabled"],o9={class:"flex flex-wrap items-center justify-between pt-4 border-t border-gray-200"},s9={class:"w-40"},n9=["disabled"],r9=["value"],a9=["disabled"],i9={key:0,class:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},l9={key:1,class:"mr-2 h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},d9={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 mt-6 bg-white rounded-2xl shadow-sm border border-gray-200 p-6"},u9={class:"flex flex-wrap gap-3"},c9={class:"inline-flex items-center bg-indigo-100 text-indigo-800 rounded-full px-3 py-1 text-sm font-semibold"},p9={class:"inline-flex items-center bg-indigo-100 text-indigo-800 rounded-full px-3 py-1 text-sm font-semibold"},m9={class:"inline-flex items-center bg-indigo-100 text-indigo-800 rounded-full px-3 py-1 text-sm font-semibold"},g9={key:0},f9={class:"inline-flex items-center bg-indigo-100 text-indigo-800 rounded-full px-3 py-1 text-sm font-semibold"},v9={class:"inline-flex items-center bg-indigo-100 text-indigo-800 rounded-full px-3 py-1 text-sm font-semibold"},h9={key:0,class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 mt-6 bg-white rounded-lg shadow-sm border border-gray-200 overflow-auto"},y9={class:"p-4 border-b border-gray-200"},x9={class:"text-lg font-medium"},b9={class:"overflow-x-auto"},w9={class:"min-w-full divide-y divide-gray-200"},k9={class:"bg-gray-50"},_9={class:"bg-white divide-y divide-gray-200"},$9={key:0,class:"p-4 border-t border-gray-200 bg-gray-50"},S9={class:"text-sm text-gray-600 text-center"},D9={key:1,class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 mt-6 bg-white rounded-lg shadow-sm border border-gray-200 p-12 text-center"},C9={key:2,class:"fixed inset-0 bg-black bg-opacity-30 flex items-center justify-center z-50"},T9="Tenant",E9="Administrator",A9={__name:"AuditLogsView",setup(t){const o=V([]),s=V(!1),n=V("all"),r=V({action:"",status:"",startDate:"",endDate:""}),i=V("weekly"),a=V(!1),l=V(!1),d=V("pdf"),c=V([]),u=V([]),{showToast:p}=je(),v=[{value:"REGISTRATION_SUCCESS",label:"Registration Success",group:"Authentication"},{value:"REGISTRATION_FAILED",label:"Registration Failed",group:"Authentication"},{value:"TEMPLEADMIN_REGISTRATION_SUCCESS",label:"Temple Admin Registration",group:"Authentication"},{value:"REGISTRATION_BLOCKED",label:"Registration Blocked",group:"Authentication"},{value:"LOGIN_SUCCESS",label:"Login Success",group:"Authentication"},{value:"LOGIN_FAILED",label:"Login Failed",group:"Authentication"},{value:"LOGOUT",label:"Logout",group:"Authentication"},{value:"PASSWORD_RESET_REQUESTED",label:"Password Reset Requested",group:"Authentication"},{value:"PASSWORD_RESET_SUCCESS",label:"Password Reset Success",group:"Authentication"},{value:"PASSWORD_RESET_FAILED",label:"Password Reset Failed",group:"Authentication"},{value:"TEMPLE_CREATED",label:"Temple Created",group:"Entity"},{value:"TEMPLE_UPDATED",label:"Temple Updated",group:"Entity"},{value:"TEMPLE_CREATE_FAILED",label:"Temple Create Failed",group:"Entity"},{value:"TEMPLE_UPDATE_FAILED",label:"Temple Update Failed",group:"Entity"},{value:"EVENT_CREATED",label:"Event Created",group:"Events"},{value:"EVENT_UPDATED",label:"Event Updated",group:"Events"},{value:"EVENT_DELETED",label:"Event Deleted",group:"Events"},{value:"SEVA_CREATED",label:"Seva Created",group:"Seva"},{value:"SEVA_UPDATED",label:"Seva Updated",group:"Seva"},{value:"SEVA_BOOKED",label:"Seva Booked",group:"Seva"},{value:"SEVA_BOOKING_APPROVED",label:"Seva Booking Approved",group:"Seva"},{value:"SEVA_BOOKING_REJECTED",label:"Seva Booking Rejected",group:"Seva"},{value:"DONATION_INITIATED",label:"Donation Initiated",group:"Donations"},{value:"DONATION_SUCCESS",label:"Donation Success",group:"Donations"},{value:"DONATION_FAILED",label:"Donation Failed",group:"Donations"},{value:"DONATION_VERIFICATION_FAILED",label:"Donation Verification Failed",group:"Donations"},{value:"TEMPLATE_CREATED",label:"Template Created",group:"Notifications"},{value:"TEMPLATE_UPDATED",label:"Template Updated",group:"Notifications"},{value:"TEMPLATE_DELETED",label:"Template Deleted",group:"Notifications"},{value:"EMAIL_SENT",label:"Email Sent",group:"Notifications"},{value:"SMS_SENT",label:"SMS Sent",group:"Notifications"},{value:"WHATSAPP_SENT",label:"WhatsApp Sent",group:"Notifications"},{value:"PROFILE_CREATED",label:"Profile Created",group:"User Profile"},{value:"PROFILE_UPDATED",label:"Profile Updated",group:"User Profile"},{value:"DEVOTEE_JOINED_TEMPLE",label:"Devotee Joined Temple",group:"User Profile"},{value:"VOLUNTEER_JOINED_TEMPLE",label:"Volunteer Joined Temple",group:"User Profile"},{value:"DEVOTEE_BIRTHDAYS_REPORT_VIEWED",label:"Birthday Report Viewed",group:"Reports"},{value:"DEVOTEE_BIRTHDAYS_REPORT_DOWNLOADED",label:"Birthday Report Downloaded",group:"Reports"},{value:"TEMPLE_REGISTER_REPORT_VIEWED",label:"Temple Register Report Viewed",group:"Reports"},{value:"TEMPLE_REGISTER_REPORT_DOWNLOADED",label:"Temple Register Report Downloaded",group:"Reports"},{value:"TEMPLE_ACTIVITIES_REPORT_VIEWED",label:"Activities Report Viewed",group:"Reports"},{value:"TEMPLE_ACTIVITIES_REPORT_DOWNLOADED",label:"Activities Report Downloaded",group:"Reports"}],g=[{value:"",label:"All"},{value:"success",label:"Success"},{value:"failure",label:"Failure"}],h=[{value:"daily",label:"Daily"},{value:"weekly",label:"Weekly"},{value:"monthly",label:"Monthly"},{value:"custom",label:"Custom Range"}],D=[{value:"pdf",label:"PDF"},{value:"csv",label:"CSV"},{value:"excel",label:"Excel"}];async function C(){s.value=!0;try{let E;try{E=await Ne.getTemples()}catch{console.log("ReportsService.getTemples() failed, trying alternatives...");try{E=await Ne.getEntities()}catch{E=await Ne.getTenantEntities()}}console.log("Raw API Response:",E);let O=[];E!=null&&E.data?O=E.data.data||E.data.temples||E.data.entities||E.data||[]:E!=null&&E.temples?O=E.temples:E!=null&&E.entities?O=E.entities:Array.isArray(E)&&(O=E),console.log("Extracted temples:",O),Array.isArray(O)&&O.length>0?(o.value=O.map(N=>(console.log("Processing temple:",N),{id:N.id||N._id||N.temple_id||N.entityId,name:N.name||N.temple_name||N.title||N.entity_name||`Temple ${N.id}`})),console.log("Mapped entities:",o.value),p(`${o.value.length} temples loaded successfully`,"success")):(console.warn("No temples found in response"),o.value=[],p("No temples found","warning"))}catch(E){console.error("Error fetching temples:",E),p("Failed to load temples: "+E.message,"error"),o.value=[{id:"1",name:"Default Temple 1"},{id:"2",name:"Default Temple 2"}]}finally{s.value=!1}}function B(E){i.value=E;const O=new Date;let N,L;E==="daily"?N=L=O:E==="weekly"?(N=new Date(O),N.setDate(N.getDate()-7),L=O):E==="monthly"&&(N=new Date(O),N.setMonth(N.getMonth()-1),L=O),E!=="custom"&&(r.value.startDate=N.toISOString().split("T")[0],r.value.endDate=L.toISOString().split("T")[0]),x()}const _=te(()=>{if(n.value==="all")return"All Entities";const E=o.value.find(O=>O.id===n.value);return E?E.name:"Unknown Entity"}),T=te(()=>{const E=h.find(O=>O.value===i.value);return E?E.label:i.value}),S=te(()=>{const E=D.find(O=>O.value===d.value);return E?E.label:d.value});function k(E){if(!E)return null;const O=v.find(N=>N.value===E);return O?O.label:E}function b(E){return E==null?"-":typeof E=="boolean"?E?"Yes":"No":typeof E=="object"?JSON.stringify(E):typeof E=="string"&&/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}/.test(E)?new Date(E).toLocaleString():String(E)}async function x(){var E;a.value=!0;try{const O={entityId:n.value,actionType:r.value.action||void 0,dateRange:i.value,startDate:i.value==="custom"?r.value.startDate:void 0,endDate:i.value==="custom"?r.value.endDate:void 0,status:r.value.status||void 0},N=await Ne.getAuditLogsReport(O);let L=((E=N.data)==null?void 0:E.data)||N.data||[];L.audit_logs&&(L=L.audit_logs),c.value=L,L.length>0?u.value=Object.keys(L[0]).map(M=>({key:M,label:M.replace(/_/g," ").toUpperCase()})):u.value=[]}catch(O){console.error("Error fetching audit logs:",O),p("Failed to load audit logs preview","error"),c.value=[],u.value=[]}finally{a.value=!1}}async function F(){l.value=!0;try{const E={entityId:n.value,dateRange:i.value,startDate:i.value==="custom"?r.value.startDate:void 0,endDate:i.value==="custom"?r.value.endDate:void 0,format:d.value,actionType:r.value.action||void 0,status:r.value.status||void 0};await Ne.downloadAuditLogsReport(E),p("Audit logs report downloaded successfully","success")}catch(E){console.error("Error downloading report:",E),p("Failed to download report","error")}finally{l.value=!1}}return Ee(async()=>{console.log("Available ReportsService methods:",Object.getOwnPropertyNames(Ne)),console.log("ReportsService object:",Ne),await C(),B("weekly")}),Ue([()=>r.value.action,()=>r.value.status,()=>n.value],()=>{x()}),(E,O)=>(m(),f("div",PS,[e("div",jS,[e("div",NS,[e("div",null,[O[6]||(O[6]=e("h1",{class:"text-2xl font-bold text-gray-900"},"Audit Logs Report",-1)),e("p",LS,[O[5]||(O[5]=Q(" Monitor audit activities within your temple system ",-1)),n.value&&n.value!=="all"?(m(),f("span",BS," (Entity ID: "+y(n.value)+") ",1)):Y("",!0)])]),e("div",{class:"bg-indigo-50 px-4 py-2 rounded-lg border border-indigo-200 flex items-center space-x-4"},[e("span",{class:"text-indigo-800 font-medium"},y(T9)),e("span",{class:"text-indigo-600 text-sm"},"("+y(E9)+")")])])]),e("div",VS,[O[19]||(O[19]=e("h3",{class:"text-xl font-bold mb-4"},"Filter Audit Logs",-1)),e("div",US,[O[9]||(O[9]=e("label",{class:"block text-gray-700 font-medium mb-2"},"Select Temple",-1)),e("div",FS,[de(e("select",{"onUpdate:modelValue":O[0]||(O[0]=N=>n.value=N),disabled:a.value||l.value||s.value,class:"w-full px-3 py-2 border border-gray-300 rounded-md"},[O[7]||(O[7]=e("option",{value:"all"},"All Temples",-1)),(m(!0),f(he,null,ke(o.value,N=>(m(),f("option",{key:N.id,value:N.id},y(N.name),9,zS))),128))],8,OS),[[Ce,n.value]]),s.value?(m(),f("div",HS,[...O[8]||(O[8]=[e("svg",{class:"animate-spin h-4 w-4 text-gray-500",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v8z"})],-1)])])):Y("",!0)])]),e("div",qS,[O[11]||(O[11]=e("label",{class:"block text-gray-700 font-medium mb-2"},"Action Type",-1)),de(e("select",{"onUpdate:modelValue":O[1]||(O[1]=N=>r.value.action=N),onChange:x,disabled:a.value||l.value,class:"w-full px-3 py-2 border border-gray-300 rounded-md"},[...O[10]||(O[10]=[$e('<option value="">All Actions</option><optgroup label="Authentication"><option value="REGISTRATION_SUCCESS">Registration Success</option><option value="REGISTRATION_FAILED">Registration Failed</option><option value="TENANT_REGISTRATION_SUCCESS">Temple Admin Registration</option><option value="REGISTRATION_BLOCKED">Registration Blocked</option><option value="LOGIN_SUCCESS">Login Success</option><option value="LOGIN_FAILED">Login Failed</option><option value="LOGOUT">Logout</option><option value="PASSWORD_RESET_REQUESTED">Password Reset Requested</option><option value="PASSWORD_RESET_SUCCESS">Password Reset Success</option><option value="PASSWORD_RESET_FAILED">Password Reset Failed</option></optgroup><optgroup label="Entity"><option value="TEMPLE_CREATED">Temple Created</option><option value="TEMPLE_UPDATED">Temple Updated</option><option value="TEMPLE_CREATE_FAILED">Temple Create Failed</option><option value="TEMPLE_UPDATE_FAILED">Temple Update Failed</option></optgroup><optgroup label="Events"><option value="EVENT_CREATED">Event Created</option><option value="EVENT_UPDATED">Event Updated</option><option value="EVENT_DELETED">Event Deleted</option></optgroup><optgroup label="Seva"><option value="SEVA_CREATED">Seva Created</option><option value="SEVA_UPDATED">Seva Updated</option><option value="SEVA_BOOKED">Seva Booked</option><option value="SEVA_BOOKING_APPROVED">Seva Booking Approved</option><option value="SEVA_BOOKING_REJECTED">Seva Booking Rejected</option></optgroup><optgroup label="Donations"><option value="DONATION_INITIATED">Donation Initiated</option><option value="DONATION_SUCCESS">Donation Success</option><option value="DONATION_FAILED">Donation Failed</option><option value="DONATION_VERIFICATION_FAILED">Donation Verification Failed</option></optgroup><optgroup label="Notifications"><option value="TEMPLATE_CREATED">Template Created</option><option value="TEMPLATE_UPDATED">Template Updated</option><option value="TEMPLATE_DELETED">Template Deleted</option><option value="EMAIL_SENT">Email Sent</option><option value="SMS_SENT">SMS Sent</option><option value="WHATSAPP_SENT">WhatsApp Sent</option></optgroup><optgroup label="User Profile"><option value="PROFILE_CREATED">Profile Created</option><option value="PROFILE_UPDATED">Profile Updated</option><option value="DEVOTEE_JOINED_TEMPLE">Devotee Joined Temple</option><option value="VOLUNTEER_JOINED_TEMPLE">Volunteer Joined Temple</option></optgroup><optgroup label="Reports"><option value="DEVOTEE_BIRTHDAYS_REPORT_VIEWED">Birthday Report Viewed</option><option value="DEVOTEE_BIRTHDAYS_REPORT_DOWNLOADED">Birthday Report Downloaded</option><option value="TEMPLE_REGISTER_REPORT_VIEWED">Temple Register Report Viewed</option><option value="TEMPLE_REGISTER_REPORT_DOWNLOADED">Temple Register Report Downloaded</option><option value="TEMPLE_ACTIVITIES_REPORT_VIEWED">Activities Report Viewed</option><option value="TEMPLE_ACTIVITIES_REPORT_DOWNLOADED">Activities Report Downloaded</option></optgroup>',9)])],40,GS),[[Ce,r.value.action]])]),e("div",WS,[O[12]||(O[12]=e("label",{class:"block text-gray-700 font-medium mb-2"},"Status",-1)),e("div",JS,[(m(),f(he,null,ke(g,N=>e("button",{key:N.value,onClick:L=>{r.value.status=N.value,x()},class:ie(["px-4 py-2 rounded-md text-sm font-medium",r.value.status===N.value?"bg-indigo-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"]),disabled:a.value||l.value},y(N.label),11,YS)),64))])]),e("div",KS,[O[13]||(O[13]=e("label",{class:"block text-gray-700 font-medium mb-2"},"Date Range",-1)),e("div",XS,[(m(),f(he,null,ke(h,N=>e("button",{key:N.value,onClick:L=>B(N.value),class:ie(["px-4 py-2 rounded-md text-sm font-medium",i.value===N.value?"bg-indigo-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"]),disabled:a.value||l.value},y(N.label),11,ZS)),64))])]),i.value==="custom"?(m(),f("div",QS,[e("div",null,[O[14]||(O[14]=e("label",{class:"block text-gray-700 font-medium mb-2"},"Start Date",-1)),de(e("input",{type:"date","onUpdate:modelValue":O[2]||(O[2]=N=>r.value.startDate=N),onChange:x,disabled:a.value||l.value,class:"w-full px-3 py-2 border border-gray-300 rounded-md"},null,40,e9),[[xe,r.value.startDate]])]),e("div",null,[O[15]||(O[15]=e("label",{class:"block text-gray-700 font-medium mb-2"},"End Date",-1)),de(e("input",{type:"date","onUpdate:modelValue":O[3]||(O[3]=N=>r.value.endDate=N),onChange:x,disabled:a.value||l.value,class:"w-full px-3 py-2 border border-gray-300 rounded-md"},null,40,t9),[[xe,r.value.endDate]])])])):Y("",!0),e("div",o9,[e("div",s9,[O[16]||(O[16]=e("label",{class:"block text-gray-700 font-medium mb-2"},"Export Format",-1)),de(e("select",{"onUpdate:modelValue":O[4]||(O[4]=N=>d.value=N),disabled:a.value||l.value,class:"w-full px-3 py-2 border border-gray-300 rounded-md"},[(m(),f(he,null,ke(D,N=>e("option",{key:N.value,value:N.value},y(N.label),9,r9)),64))],8,n9),[[Ce,d.value]])]),e("button",{onClick:F,disabled:a.value||l.value,class:"mt-4 md:mt-0 inline-flex items-center px-5 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700 disabled:opacity-50 disabled:cursor-not-allowed"},[l.value?(m(),f("svg",i9,[...O[17]||(O[17]=[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)])])):(m(),f("svg",l9,[...O[18]||(O[18]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"},null,-1)])])),Q(" "+y(l.value?"Downloading...":"Download Report"),1)],8,a9)])]),e("div",d9,[O[20]||(O[20]=e("h3",{class:"text-lg font-medium mb-4"},"Applied Filters",-1)),e("div",u9,[e("span",c9," Action: "+y(k(r.value.action)||"All"),1),e("span",p9," Status: "+y(r.value.status||"All"),1),e("span",m9,[Q(" Date Range: "+y(T.value)+" ",1),i.value==="custom"?(m(),f("span",g9," ("+y(r.value.startDate)+" - "+y(r.value.endDate)+") ",1)):Y("",!0)]),e("span",f9," Entity: "+y(_.value),1),e("span",v9," Format: "+y(S.value),1)])]),c.value.length?(m(),f("div",h9,[e("div",y9,[e("h3",x9,"Audit Logs Preview ("+y(c.value.length)+" records)",1)]),e("div",b9,[e("table",w9,[e("thead",k9,[e("tr",null,[(m(!0),f(he,null,ke(u.value,N=>(m(),f("th",{key:N.key,class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},y(N.label),1))),128))])]),e("tbody",_9,[(m(!0),f(he,null,ke(c.value.slice(0,100),(N,L)=>(m(),f("tr",{key:L,class:"hover:bg-gray-50"},[(m(!0),f(he,null,ke(u.value,M=>(m(),f("td",{key:M.key,class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},y(b(N[M.key])),1))),128))]))),128))])])]),c.value.length>100?(m(),f("div",$9,[e("p",S9," Showing first 100 records out of "+y(c.value.length)+". Download the full report to see all records. ",1)])):Y("",!0)])):!a.value&&u.value.length===0?(m(),f("div",D9,[...O[21]||(O[21]=[$e('<div class="mx-auto w-24 h-24 bg-gray-100 rounded-full flex items-center justify-center mb-4"><svg class="w-12 h-12 text-gray-400" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path></svg></div><h3 class="text-lg font-medium text-gray-900 mb-2">No Audit Logs Found</h3><p class="text-gray-600">No audit logs match the selected filters. Try adjusting your filter criteria.</p>',3)])])):Y("",!0),a.value?(m(),f("div",C9,[...O[22]||(O[22]=[$e('<div class="bg-white p-6 rounded-lg shadow-lg flex items-center space-x-3"><svg class="animate-spin h-6 w-6 text-indigo-600" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8v8z"></path></svg><span class="font-medium text-gray-900">Loading audit logs...</span></div>',1)])])):Y("",!0)]))}},I9={class:"min-h-screen bg-gray-50"},M9={class:"bg-white shadow-sm border-b border-gray-200"},R9={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},P9={class:"flex items-center justify-between h-16"},j9={class:"flex items-center space-x-4"},N9={class:"text-xl font-semibold text-gray-900"},L9={class:"text-sm text-gray-500"},B9={class:"flex items-center space-x-3"},V9={class:"relative p-2 text-gray-400 hover:text-gray-500 transition-colors duration-200"},U9={key:0,class:"absolute -top-1 -right-1 h-4 w-4 bg-red-500 rounded-full flex items-center justify-center text-xs text-white"},F9={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},O9={class:"bg-gradient-to-r from-indigo-500 to-indigo-600 rounded-2xl p-6 mb-8"},z9={class:"flex items-center justify-between"},H9={class:"text-2xl font-bold text-white mb-2"},q9={key:0,class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8"},G9={key:1,class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8"},W9={class:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 h-32 hover:shadow-md transition-shadow duration-200 cursor-pointer"},J9={class:"flex items-center"},Y9={class:"ml-4"},K9={class:"text-2xl font-bold text-gray-900"},X9={class:"text-xs text-green-600"},Z9={class:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 h-32 hover:shadow-md transition-shadow duration-200 cursor-pointer"},Q9={class:"flex items-center"},eD={class:"ml-4"},tD={class:"flex items-baseline"},oD={class:"text-2xl font-bold text-gray-900"},sD={class:"text-xs text-blue-600"},nD={class:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 h-32 hover:shadow-md transition-shadow duration-200 cursor-pointer"},rD={class:"flex items-center h-full"},aD={class:"ml-4 flex flex-col"},iD={class:"text-2xl font-bold text-gray-900"},lD={class:"text-xs text-green-600 mb-4"},dD={class:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 h-32 hover:shadow-md transition-shadow duration-200 cursor-pointer"},uD={class:"flex items-center"},cD={class:"ml-4"},pD={class:"text-2xl font-bold text-gray-900"},mD={class:"text-xs text-purple-600"},gD={class:"grid grid-cols-1 lg:grid-cols-3 gap-8"},fD={class:"lg:col-span-2"},vD={class:"bg-white rounded-xl shadow-sm border border-gray-200"},hD={class:"p-6"},yD={class:"grid grid-cols-1 sm:grid-cols-2 gap-4"},xD={class:"bg-white rounded-xl shadow-sm border border-gray-200"},bD={class:"p-6 border-b border-gray-200"},wD={class:"flex items-center justify-between"},kD={class:"p-6"},_D={key:0,class:"text-center py-4"},$D={key:1,class:"space-y-4"},SD={class:"flex-shrink-0"},DD={class:"h-10 w-10 bg-purple-100 rounded-lg flex items-center justify-center"},CD={class:"text-xs font-semibold text-purple-600"},TD={class:"flex-1 min-w-0"},ED={class:"text-sm font-medium text-gray-900"},AD={class:"text-xs text-gray-500"},ID={class:"flex items-center mt-1"},MD={class:"text-xs text-green-600"},RD={class:"mt-8 bg-white rounded-xl shadow-sm border border-gray-200"},PD={class:"p-6 border-b border-gray-200"},jD={class:"flex items-center justify-between"},ND={class:"p-6"},LD={key:0,class:"text-center py-4"},BD={key:1,class:"space-y-4"},VD={class:"flex-shrink-0"},UD={class:"h-8 w-8 bg-gradient-to-br from-green-400 to-green-600 rounded-full flex items-center justify-center"},FD={class:"text-xs font-bold text-white"},OD={class:"flex-1 min-w-0"},zD={class:"text-sm font-medium text-gray-900"},HD={class:"text-xs text-gray-500"},qD={class:"text-sm font-semibold text-green-600"},cp={__name:"EntityDashboard",setup(t){const o=Ze(),s=te(()=>o.params.id),n=tt(),r=Uo(),i=je(),a=te(()=>n.user),l=V(null),d=V(!0),c=V({devotees:{total:0,newThisMonth:0},sevas:{today:0,thisMonth:0},donations:{thisMonth:0,growth:0},events:{upcoming:0,thisWeek:0}}),u=V([]),p=V([]),v=V([]),g=async()=>{var B;try{d.value=!0,console.log("Loading entity data for ID:",s.value);const _=r.getTempleById(s.value);if(_)console.log("Found temple in store:",_),l.value=_;else{console.log("Temple not in store, fetching from API");try{const T=await ce.get(`/entities/${s.value}`);T.data&&(l.value=T.data)}catch(T){console.error("Failed to fetch temple details:",T),i.error("Failed to load temple details")}}try{const T=await ce.get(`/entities/dashboard-summary?entity_id=${s.value}`);T&&T.data&&(c.value={devotees:{total:T.data.registered_devotees.total||0,newThisMonth:T.data.registered_devotees.this_month||0},sevas:{today:T.data.seva_bookings.today||0,thisMonth:T.data.seva_bookings.this_month||0},donations:{thisMonth:T.data.month_donations.amount||0,growth:T.data.month_donations.percent_change||0},events:{upcoming:T.data.upcoming_events.total||0,thisWeek:T.data.upcoming_events.this_week||0}},console.log("Dashboard data loaded successfully:",c.value))}catch(T){console.error("Failed to fetch dashboard data:",T),i.error("Failed to load dashboard statistics")}try{const T=await ce.get(`/events/upcoming?entity_id=${s.value}&limit=3`);T&&T.data&&(p.value=T.data.map(S=>({...S,date:new Date(S.event_date||S.date||Date.now())})))}catch(T){console.error("Failed to fetch upcoming events:",T),p.value=[]}try{console.log("Fetching top donors...");const T=await ct.getTopDonors(5);console.log("Top donors response:",T),T&&T.success&&Array.isArray(T.data)?v.value=T.data.map(S=>({id:S.email||Math.random(),name:S.name||"Unknown Donor",email:S.email||"",amount:S.total_amount||S.totalAmount||0,totalDonations:S.donation_count||S.donationCount||0})):Array.isArray(T.data)?v.value=T.data.map(S=>({id:S.email||Math.random(),name:S.name||"Unknown Donor",email:S.email||"",amount:S.total_amount||S.totalAmount||0,totalDonations:S.donation_count||S.donationCount||0})):Array.isArray(T)?v.value=T.map(S=>({id:S.email||Math.random(),name:S.name||"Unknown Donor",email:S.email||"",amount:S.total_amount||S.totalAmount||0,totalDonations:S.donation_count||S.donationCount||0})):(console.warn("Unexpected top donors response format:",T),v.value=[]),console.log("Final top donors data:",v.value)}catch(T){console.error("Failed to fetch top donors:",T),v.value=[],((B=T.response)==null?void 0:B.status)!==404&&i.error("Failed to load top donors")}}catch(_){console.error("Error loading entity data:",_),i.error("Failed to load entity data")}finally{d.value=!1}},h=B=>new Intl.NumberFormat("en-IN").format(B),D=B=>B?B.getDate().toString():"",C=B=>B?B.toLocaleDateString("en-IN",{weekday:"short",month:"short",day:"numeric"}):"";return Ee(()=>{console.log("EntityDashboard mounted for entity:",s.value),g()}),(B,_)=>{const T=He("router-link");return m(),f("div",I9,[e("div",M9,[e("div",R9,[e("div",P9,[e("div",j9,[_[0]||(_[0]=e("div",{class:"h-10 w-10 rounded-full bg-indigo-100 flex items-center justify-center"},[e("svg",{class:"h-6 w-6 text-indigo-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-4m-2 0H3m2-16l9-9 9 9"})])],-1)),e("div",null,[e("h1",N9,y(l.value?l.value.name:"Loading..."),1),e("p",L9,y(l.value?`${l.value.city}, ${l.value.state}`:"Loading location..."),1)])]),e("div",B9,[_[2]||(_[2]=e("span",{class:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800"}," Active ",-1)),e("button",V9,[_[1]||(_[1]=e("svg",{class:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 17h5l-5 5v-5z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 19H3m6 0V5l-6 5m0 9h6"})],-1)),u.value.length>0?(m(),f("span",U9,y(u.value.length),1)):Y("",!0)])])])])]),e("div",F9,[e("div",O9,[e("div",z9,[e("div",null,[e("h2",H9,"Welcome back, "+y(a.value?a.value.fullName:"Admin")+"!",1),_[3]||(_[3]=e("p",{class:"text-indigo-100"},"Here's what's happening at your temple today",-1))]),_[4]||(_[4]=e("div",{class:"hidden md:block"},[e("svg",{class:"h-16 w-16 text-indigo-200",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1",d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-4m-2 0H3m2-16l9-9 9 9"})])],-1))])]),d.value?(m(),f("div",q9,[(m(),f(he,null,ke(4,S=>e("div",{key:S,class:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 h-32 hover:shadow-md transition-shadow duration-200"},[..._[5]||(_[5]=[$e('<div class="animate-pulse flex items-center"><div class="h-12 w-12 bg-gray-200 rounded-lg mr-4"></div><div class="space-y-2 flex-1"><div class="h-4 bg-gray-200 rounded w-1/3"></div><div class="h-6 bg-gray-200 rounded w-1/4"></div><div class="h-3 bg-gray-200 rounded w-1/2"></div></div></div>',1)])])),64))])):(m(),f("div",G9,[re(T,{to:{name:"DevoteeManagement",params:{id:B.$route.params.id}},class:"block"},{default:fe(()=>{var S,k;return[e("div",W9,[e("div",J9,[_[7]||(_[7]=e("div",{class:"flex-shrink-0"},[e("div",{class:"h-12 w-12 bg-blue-100 rounded-lg flex items-center justify-center"},[e("svg",{class:"h-6 w-6 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197m13.5-9a2.25 2.25 0 11-4.5 0 2.25 2.25 0 014.5 0z"})])])],-1)),e("div",Y9,[_[6]||(_[6]=e("p",{class:"text-sm font-medium text-gray-600"},"Registered Devotees",-1)),e("p",K9,y(((S=c.value.devotees)==null?void 0:S.total)||0),1),e("p",X9,"+"+y(((k=c.value.devotees)==null?void 0:k.newThisMonth)||0)+" this month",1)])])])]}),_:1},8,["to"]),re(T,{to:{name:"SevaManagement",params:{id:B.$route.params.id}},class:"block"},{default:fe(()=>{var S,k;return[e("div",Z9,[e("div",Q9,[_[10]||(_[10]=e("div",{class:"flex-shrink-0"},[e("div",{class:"h-12 w-12 bg-orange-100 rounded-lg flex items-center justify-center"},[e("svg",{class:"h-6 w-6 text-orange-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})])])],-1)),e("div",eD,[_[9]||(_[9]=e("p",{class:"text-sm font-medium text-gray-600"},"Seva Bookings",-1)),e("div",tD,[e("p",oD,y(((S=c.value.sevas)==null?void 0:S.today)||0),1),_[8]||(_[8]=e("span",{class:"text-sm text-gray-500 ml-1"},"today",-1))]),e("p",sD,y(((k=c.value.sevas)==null?void 0:k.thisMonth)||0)+" this month",1)])])])]}),_:1},8,["to"]),re(T,{to:{name:"DonationManagement",params:{id:B.$route.params.id}},class:"block"},{default:fe(()=>{var S,k;return[e("div",nD,[e("div",rD,[_[12]||(_[12]=e("div",{class:"flex-shrink-0"},[e("div",{class:"h-12 w-12 bg-green-100 rounded-lg flex items-center justify-center"},[e("svg",{class:"h-6 w-6 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"})])])],-1)),e("div",aD,[_[11]||(_[11]=e("p",{class:"text-sm font-medium text-gray-600 whitespace-nowrap"},"Month Donations",-1)),e("p",iD,""+y(h(((S=c.value.donations)==null?void 0:S.thisMonth)||0)),1),e("p",lD,"+"+y(((k=c.value.donations)==null?void 0:k.growth)||0)+"% from last month",1)])])])]}),_:1},8,["to"]),re(T,{to:{name:"EventManagement",params:{id:B.$route.params.id}},class:"block"},{default:fe(()=>{var S,k;return[e("div",dD,[e("div",uD,[_[14]||(_[14]=e("div",{class:"flex-shrink-0"},[e("div",{class:"h-12 w-12 bg-purple-100 rounded-lg flex items-center justify-center"},[e("svg",{class:"h-6 w-6 text-purple-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})])])],-1)),e("div",cD,[_[13]||(_[13]=e("p",{class:"text-sm font-medium text-gray-600"},"Upcoming Events",-1)),e("p",pD,y(((S=c.value.events)==null?void 0:S.upcoming)||0),1),e("p",mD,y(((k=c.value.events)==null?void 0:k.thisWeek)||0)+" this week",1)])])])]}),_:1},8,["to"])])),e("div",gD,[e("div",fD,[e("div",vD,[_[19]||(_[19]=e("div",{class:"p-6 border-b border-gray-200"},[e("h3",{class:"text-lg font-semibold text-gray-900"},"Quick Actions")],-1)),e("div",hD,[e("div",yD,[re(T,{to:`/entity/${s.value}/sevas`,class:"flex items-center p-4 border border-gray-200 rounded-xl hover:border-indigo-300 hover:shadow-md transition-all duration-200 group"},{default:fe(()=>[..._[15]||(_[15]=[e("div",{class:"h-10 w-10 bg-orange-100 rounded-lg flex items-center justify-center group-hover:bg-orange-200 transition-colors duration-200"},[e("svg",{class:"h-5 w-5 text-orange-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})])],-1),e("div",{class:"ml-3"},[e("p",{class:"text-sm font-medium text-gray-900"},"Manage Sevas"),e("p",{class:"text-xs text-gray-500"},"Create and approve sevas")],-1)])]),_:1},8,["to"]),re(T,{to:`/entity/${s.value}/events`,class:"flex items-center p-4 border border-gray-200 rounded-xl hover:border-indigo-300 hover:shadow-md transition-all duration-200 group"},{default:fe(()=>[..._[16]||(_[16]=[e("div",{class:"h-10 w-10 bg-purple-100 rounded-lg flex items-center justify-center group-hover:bg-purple-200 transition-colors duration-200"},[e("svg",{class:"h-5 w-5 text-purple-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})])],-1),e("div",{class:"ml-3"},[e("p",{class:"text-sm font-medium text-gray-900"},"Create Event"),e("p",{class:"text-xs text-gray-500"},"Schedule temple events")],-1)])]),_:1},8,["to"]),re(T,{to:`/entity/${s.value}/devotees`,class:"flex items-center p-4 border border-gray-200 rounded-xl hover:border-indigo-300 hover:shadow-md transition-all duration-200 group"},{default:fe(()=>[..._[17]||(_[17]=[e("div",{class:"h-10 w-10 bg-blue-100 rounded-lg flex items-center justify-center group-hover:bg-blue-200 transition-colors duration-200"},[e("svg",{class:"h-5 w-5 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197m13.5-9a2.25 2.25 0 11-4.5 0 2.25 2.25 0 014.5 0z"})])],-1),e("div",{class:"ml-3"},[e("p",{class:"text-sm font-medium text-gray-900"},"View Devotees"),e("p",{class:"text-xs text-gray-500"},"Manage devotee profiles")],-1)])]),_:1},8,["to"]),re(T,{to:`/entity/${s.value}/communication`,class:"flex items-center p-4 border border-gray-200 rounded-xl hover:border-indigo-300 hover:shadow-md transition-all duration-200 group"},{default:fe(()=>[..._[18]||(_[18]=[e("div",{class:"h-10 w-10 bg-green-100 rounded-lg flex items-center justify-center group-hover:bg-green-200 transition-colors duration-200"},[e("svg",{class:"h-5 w-5 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})])],-1),e("div",{class:"ml-3"},[e("p",{class:"text-sm font-medium text-gray-900"},"Send Message"),e("p",{class:"text-xs text-gray-500"},"Communicate with devotees")],-1)])]),_:1},8,["to"])])])])]),e("div",null,[e("div",xD,[e("div",bD,[e("div",wD,[_[21]||(_[21]=e("h3",{class:"text-lg font-semibold text-gray-900"},"Upcoming Events",-1)),re(T,{to:`/entity/${s.value}/events`,class:"text-sm text-indigo-600 hover:text-indigo-700 font-medium transition-colors duration-200"},{default:fe(()=>[..._[20]||(_[20]=[Q(" View All ",-1)])]),_:1},8,["to"])])]),e("div",kD,[p.value.length===0?(m(),f("div",_D,[_[23]||(_[23]=e("svg",{class:"mx-auto h-12 w-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})],-1)),_[24]||(_[24]=e("p",{class:"mt-2 text-sm text-gray-500"},"No upcoming events",-1)),re(T,{to:`/entity/${s.value}/events`,class:"mt-1 inline-flex items-center text-sm text-indigo-600 hover:text-indigo-700 font-medium"},{default:fe(()=>[..._[22]||(_[22]=[Q(" Create Event ",-1)])]),_:1},8,["to"])])):(m(),f("div",$D,[(m(!0),f(he,null,ke(p.value.slice(0,3),S=>(m(),f("div",{key:S.id,class:"flex items-start space-x-3 p-3 rounded-lg hover:bg-gray-50 transition-colors duration-200"},[e("div",SD,[e("div",DD,[e("span",CD,y(D(S.date)),1)])]),e("div",TD,[e("p",ED,y(S.title),1),e("p",AD,y(C(S.date)),1),e("div",ID,[e("span",MD,y(S.rsvpCount)+" RSVPs",1)])])]))),128))]))])])])]),e("div",RD,[e("div",PD,[e("div",jD,[_[26]||(_[26]=e("h3",{class:"text-lg font-semibold text-gray-900"},"Top Donors",-1)),re(T,{to:`/entity/${s.value}/donations`,class:"text-sm text-indigo-600 hover:text-indigo-700 font-medium transition-colors duration-200"},{default:fe(()=>[..._[25]||(_[25]=[Q(" View All ",-1)])]),_:1},8,["to"])])]),e("div",ND,[v.value.length===0?(m(),f("div",LD,[..._[27]||(_[27]=[e("svg",{class:"mx-auto h-12 w-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"})],-1),e("p",{class:"mt-2 text-sm text-gray-500"},"No donations yet",-1)])])):(m(),f("div",BD,[(m(!0),f(he,null,ke(v.value.slice(0,5),(S,k)=>(m(),f("div",{key:S.id||S.email||k,class:"flex items-center space-x-3"},[e("div",VD,[e("div",UD,[e("span",FD,y(k+1),1)])]),e("div",OD,[e("p",zD,y(S.name||"Unknown Donor"),1),e("p",HD,y(S.totalDonations||S.donation_count||0)+" donations",1)]),e("div",qD," "+y(h(S.amount||S.total_amount||0)),1)]))),128))]))])])])])}}},GD=Object.freeze(Object.defineProperty({__proto__:null,default:cp},Symbol.toStringTag,{value:"Module"})),WD={class:"bg-white rounded-xl shadow-md hover:shadow-lg transition-all duration-200 overflow-hidden"},JD={class:"p-6 pb-4"},YD={class:"flex items-start justify-between"},KD={class:"flex items-center space-x-4"},XD={class:"relative"},ZD={key:0,class:"w-16 h-16 rounded-full overflow-hidden"},QD=["src","alt"],eC={key:1,class:"w-16 h-16 rounded-full bg-indigo-100 flex items-center justify-center"},tC={class:"text-indigo-600 font-semibold text-xl"},oC={class:"absolute -bottom-1 -right-1"},sC={class:"flex-1"},nC={class:"text-lg font-semibold text-gray-900"},rC={class:"text-sm text-gray-600"},aC={class:"text-sm text-gray-600"},iC={key:0,class:"relative"},lC={key:0,class:"absolute right-0 mt-2 w-48 bg-white rounded-lg shadow-lg border border-gray-200 z-10"},dC={class:"py-1"},uC={key:0,class:"px-6 pb-4"},cC={class:"flex items-center justify-between mb-2"},pC={class:"text-sm font-semibold text-indigo-600"},mC={class:"w-full bg-gray-200 rounded-full h-2"},gC={class:"px-6 pb-4"},fC={class:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm"},vC={key:0,class:"flex items-center space-x-2"},hC={class:"text-gray-900 font-medium"},yC={key:1,class:"flex items-center space-x-2"},xC={class:"text-gray-900 font-medium"},bC={key:2,class:"flex items-center space-x-2"},wC={class:"text-gray-900 font-medium"},kC={key:3,class:"flex items-center space-x-2"},_C={class:"text-gray-900 font-medium"},$C={key:1,class:"px-6 pb-4"},SC={class:"space-y-1"},DC={class:"text-gray-400"},CC={class:"bg-gray-50 px-6 py-4"},TC={class:"grid grid-cols-3 gap-4 text-center"},EC={class:"text-lg font-semibold text-indigo-600"},AC={class:"text-lg font-semibold text-green-600"},IC={class:"text-lg font-semibold text-purple-600"},MC={class:"px-6 py-3 bg-gray-50 border-t border-gray-100"},RC={class:"flex items-center justify-between text-xs text-gray-600"},PC={key:0,class:"text-gray-500"},jC={__name:"DevoteeCard",props:{devotee:{type:Object,required:!0},showActions:{type:Boolean,default:!0}},emits:["view","edit","message","deactivate"],setup(t,{emit:o}){const s=t,n=V(!1),r=te(()=>{switch(s.devotee.status){case"active":return"bg-green-500";case"inactive":return"bg-gray-400";case"pending":return"bg-yellow-500";default:return"bg-gray-400"}}),i=u=>u.split(" ").map(p=>p.charAt(0)).join("").toUpperCase().slice(0,2),a=u=>new Date(u).toLocaleDateString("en-IN",{day:"numeric",month:"short",year:"numeric"}),l=u=>{const p=new Date,v=new Date(u),g=Math.floor((p-v)/1e3);return g<60?"just now":g<3600?`${Math.floor(g/60)}m ago`:g<86400?`${Math.floor(g/3600)}h ago`:g<2592e3?`${Math.floor(g/86400)}d ago`:a(u)},d=u=>u>=1e5?(u/1e5).toFixed(1)+"L":u>=1e3?(u/1e3).toFixed(1)+"K":u.toString(),c=u=>{u.target.closest(".relative")||(n.value=!1)};return Ee(()=>{document.addEventListener("click",c)}),Ut(()=>{document.removeEventListener("click",c)}),(u,p)=>(m(),f("div",WD,[e("div",JD,[e("div",YD,[e("div",KD,[e("div",XD,[t.devotee.avatar?(m(),f("div",ZD,[e("img",{src:t.devotee.avatar,alt:t.devotee.name,class:"w-full h-full object-cover"},null,8,QD)])):(m(),f("div",eC,[e("span",tC,y(i(t.devotee.name)),1)])),e("div",oC,[e("div",{class:ie([r.value,"w-5 h-5 rounded-full border-2 border-white"])},null,2)])]),e("div",sC,[e("h3",nC,y(t.devotee.name),1),e("p",rC,y(t.devotee.email),1),e("p",aC,y(t.devotee.phone),1)])]),t.showActions?(m(),f("div",iC,[e("button",{onClick:p[0]||(p[0]=v=>n.value=!n.value),class:"p-2 text-gray-400 hover:text-gray-600 rounded-lg hover:bg-gray-50 transition-colors"},[...p[5]||(p[5]=[e("svg",{class:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{d:"M10 6a2 2 0 110-4 2 2 0 010 4zM10 12a2 2 0 110-4 2 2 0 010 4zM10 18a2 2 0 110-4 2 2 0 010 4z"})],-1)])]),n.value?(m(),f("div",lC,[e("div",dC,[e("button",{onClick:p[1]||(p[1]=v=>u.$emit("view",t.devotee)),class:"w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-50 transition-colors"}," View Profile "),e("button",{onClick:p[2]||(p[2]=v=>u.$emit("edit",t.devotee)),class:"w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-50 transition-colors"}," Edit Details "),e("button",{onClick:p[3]||(p[3]=v=>u.$emit("message",t.devotee)),class:"w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-50 transition-colors"}," Send Message "),p[6]||(p[6]=e("hr",{class:"my-1"},null,-1)),e("button",{onClick:p[4]||(p[4]=v=>u.$emit("deactivate",t.devotee)),class:"w-full text-left px-4 py-2 text-sm text-red-600 hover:bg-red-50 transition-colors"},y(t.devotee.status==="active"?"Deactivate":"Activate"),1)])])):Y("",!0)])):Y("",!0)])]),t.devotee.profileCompletion!==void 0?(m(),f("div",uC,[e("div",cC,[p[7]||(p[7]=e("span",{class:"text-sm font-medium text-gray-700"},"Profile Completion",-1)),e("span",pC,y(t.devotee.profileCompletion)+"%",1)]),e("div",mC,[e("div",{class:"bg-indigo-600 h-2 rounded-full transition-all duration-300",style:Pt({width:`${t.devotee.profileCompletion}%`})},null,4)])])):Y("",!0),e("div",gC,[e("div",fC,[t.devotee.gotra?(m(),f("div",vC,[p[8]||(p[8]=e("span",{class:"text-gray-500"},"Gotra:",-1)),e("span",hC,y(t.devotee.gotra),1)])):Y("",!0),t.devotee.nativePlace?(m(),f("div",yC,[p[9]||(p[9]=e("span",{class:"text-gray-500"},"Native Place:",-1)),e("span",xC,y(t.devotee.nativePlace),1)])):Y("",!0),t.devotee.nakshatra?(m(),f("div",bC,[p[10]||(p[10]=e("span",{class:"text-gray-500"},"Nakshatra:",-1)),e("span",wC,y(t.devotee.nakshatra),1)])):Y("",!0),t.devotee.rashi?(m(),f("div",kC,[p[11]||(p[11]=e("span",{class:"text-gray-500"},"Rashi:",-1)),e("span",_C,y(t.devotee.rashi),1)])):Y("",!0)])]),t.devotee.recentActivity&&t.devotee.recentActivity.length>0?(m(),f("div",$C,[p[13]||(p[13]=e("h4",{class:"text-sm font-medium text-gray-700 mb-2"},"Recent Activity",-1)),e("div",SC,[(m(!0),f(he,null,ke(t.devotee.recentActivity.slice(0,2),v=>(m(),f("div",{key:v.id,class:"flex items-center space-x-2 text-xs text-gray-600"},[p[12]||(p[12]=e("div",{class:"w-1.5 h-1.5 bg-indigo-500 rounded-full"},null,-1)),e("span",null,y(v.description),1),e("span",DC,y(a(v.date)),1)]))),128))])])):Y("",!0),e("div",CC,[e("div",TC,[e("div",null,[e("div",EC,y(t.devotee.totalSevas||0),1),p[14]||(p[14]=e("div",{class:"text-xs text-gray-600"},"Sevas",-1))]),e("div",null,[e("div",AC,""+y(d(t.devotee.totalDonations||0)),1),p[15]||(p[15]=e("div",{class:"text-xs text-gray-600"},"Donations",-1))]),e("div",null,[e("div",IC,y(t.devotee.eventsAttended||0),1),p[16]||(p[16]=e("div",{class:"text-xs text-gray-600"},"Events",-1))])])]),e("div",MC,[e("div",RC,[e("span",null,"Joined on "+y(a(t.devotee.joinedDate)),1),t.devotee.lastActive?(m(),f("span",PC," Last active "+y(l(t.devotee.lastActive)),1)):Y("",!0)])])]))}},NC={name:"DevoteeStats",props:{stats:{type:Object,default:()=>({})},loading:{type:Boolean,default:!1}}},LC={class:"grid grid-cols-3 gap-4 p-4 bg-white rounded shadow"},BC={class:"stat-item"},VC={class:"text-2xl font-bold text-gray-900"},UC={class:"stat-item"},FC={class:"text-2xl font-bold text-green-600"},OC={class:"stat-item"},zC={class:"text-2xl font-bold text-indigo-600"};function HC(t,o,s,n,r,i){return m(),f("div",LC,[e("div",BC,[o[0]||(o[0]=e("h3",{class:"text-sm font-semibold text-gray-500"},"Total Devotees",-1)),e("p",VC,y(s.stats.total_devotees||0),1)]),e("div",UC,[o[1]||(o[1]=e("h3",{class:"text-sm font-semibold text-gray-500"},"Active Devotees",-1)),e("p",FC,y(s.stats.active_devotees||0),1)]),e("div",OC,[o[2]||(o[2]=e("h3",{class:"text-sm font-semibold text-gray-500"},"New This Month",-1)),e("p",zC,y(s.stats.new_this_month||0),1)])])}const qC=Qe(NC,[["render",HC],["__scopeId","data-v-e2ef163e"]]),GC={name:"DevoteeManagement",components:{DevoteeCard:jC,DevoteeStats:qC,BaseLoader:Ma},setup(){const t=Ze(),o=Ke(),s=je(),n=dn(),{devotees:r}=Xg(n),i=V(!1),a=V(null),l=V("table"),d=V(""),c=V(""),u=V({}),p=V(1),v=V(25),g=()=>{const oe=t.params.id||t.params.entityId;return oe||(console.error(" No entity ID found in route params"),s.error("Invalid entity ID"),null)},h=te(()=>{let oe=n.devotees||[];if(console.log(" Filtering devotees:",{totalDevotees:oe.length,searchQuery:d.value,statusFilter:c.value}),d.value){const ae=d.value.toLowerCase();oe=oe.filter(H=>{var J,z,I,P,W;return((J=S(H))==null?void 0:J.toLowerCase().includes(ae))||((z=H.email)==null?void 0:z.toLowerCase().includes(ae))||((I=H.phone)==null?void 0:I.toLowerCase().includes(ae))||((P=H.gotra)==null?void 0:P.toLowerCase().includes(ae))||((W=H.nativePlace)==null?void 0:W.toLowerCase().includes(ae))})}if(c.value&&(oe=oe.filter(ae=>(ae.status||"active")===c.value)),u.value.gotra&&(oe=oe.filter(ae=>ae.gotra===u.value.gotra)),u.value.profileCompletion){const ae=u.value.profileCompletion;oe=oe.filter(H=>{const J=H.profileCompletion||0;switch(ae){case"incomplete":return J<50;case"partial":return J>=50&&J<100;case"complete":return J===100;default:return!0}})}return console.log(" Filtered devotees result:",oe.length),oe}),D=te(()=>Math.ceil(h.value.length/v.value)),C=te(()=>{const oe=(p.value-1)*v.value,ae=oe+v.value;return h.value.slice(oe,ae)}),B=te(()=>{const oe=h.value.length===0?0:(p.value-1)*v.value+1,ae=Math.min(p.value*v.value,h.value.length),H=h.value.length;return{start:oe,end:ae,total:H}}),_=te(()=>{const oe=D.value,ae=p.value,H=2;if(oe<=7)return Array.from({length:oe},(P,W)=>W+1);const J=[];J.push(1),ae-H>2&&J.push("...");const z=Math.max(2,ae-H),I=Math.min(oe-1,ae+H);for(let P=z;P<=I;P++)J.push(P);return ae+H<oe-1&&J.push("..."),oe>1&&J.push(oe),J});Ue([d,c],()=>{p.value=1});const T=oe=>oe.user_id||oe.id||"unknown",S=oe=>oe.full_name||oe.fullName||"Unknown",k=oe=>{switch(oe||"active"){case"active":return"bg-green-100 text-green-800";case"inactive":return"bg-red-100 text-red-800";case"pending":return"bg-yellow-100 text-yellow-800";default:return"bg-gray-100 text-gray-800"}},b=oe=>(oe||"active")==="active"?"text-red-600 hover:text-red-900 hover:bg-red-50 border border-red-300":"text-green-600 hover:text-green-900 hover:bg-green-50 border border-green-300",x=oe=>(oe||"active")==="active"?"Deactivate":"Activate",F=oe=>{oe>=1&&oe<=D.value&&(p.value=oe)},E=()=>{p.value=1},O=async()=>{const oe=g();if(oe){i.value=!0;try{console.log(" Loading devotees for entity:",oe),await n.fetchDevoteesByEntity(oe),console.log(" Devotees loaded:",n.devotees.length)}catch(ae){console.error(" Error loading devotees:",ae),s.error("Failed to load devotees")}finally{i.value=!1}}},N=async()=>{const oe=g();if(oe)try{console.log(" Loading devotee stats for entity:",oe),await n.fetchDevoteeStats(oe),console.log(" Devotee stats loaded:",n.devoteeStats)}catch(ae){console.error(" Error loading devotee stats:",ae),s.error("Failed to load devotee statistics")}},L=async()=>{await Promise.all([O(),N()])},M=async oe=>{var I,P,W,we;const ae=g();if(!ae)return;const H=T(oe),J=oe.status||"active",z=J==="active"?"inactive":"active";if(console.log(" Toggling devotee status:",{devoteeId:H,currentStatus:J,newStatus:z,entityId:ae}),!H||H==="unknown"){s.error("Invalid devotee ID");return}a.value=H;try{await n.updateDevoteeStatus(ae,H,z),await N(),console.log(" Status updated successfully"),s.success(`Devotee ${z==="active"?"activated":"deactivated"} successfully`)}catch(me){console.error(" Error updating status:",me);const De=((P=(I=me.response)==null?void 0:I.data)==null?void 0:P.error)||((we=(W=me.response)==null?void 0:W.data)==null?void 0:we.message)||me.message||"Failed to update devotee status";s.error(De)}finally{a.value=null}},X=()=>{try{const oe=[["User ID","Full Name","Email","Phone","Status","Gotra","Created Date"],...h.value.map(z=>[T(z),S(z),z.email||"",z.phone||"",z.status||"active",z.gotra||"",z.created_at?new Date(z.created_at).toLocaleDateString():""])].map(z=>z.join(",")).join(`
`),ae=new Blob([oe],{type:"text/csv;charset=utf-8;"}),H=window.URL.createObjectURL(ae),J=document.createElement("a");J.href=H,J.download=`devotees_${new Date().toISOString().split("T")[0]}.csv`,document.body.appendChild(J),J.click(),document.body.removeChild(J),window.URL.revokeObjectURL(H),s.success("Devotee data exported successfully")}catch(oe){console.error(" Export error:",oe),s.error("Failed to export data")}},ee=()=>g()?!0:(console.error(" No entity ID in route, redirecting..."),o.push("/dashboard"),!1);return Ee(async()=>{console.log(" DevoteeManagement mounted"),console.log("Route params:",t.params),ee()&&await L()}),{devoteeStore:n,loading:i,statusUpdateLoading:a,viewMode:l,searchQuery:d,statusFilter:c,currentPage:p,itemsPerPage:v,totalPages:D,paginatedDevotees:C,paginationInfo:B,visiblePages:_,filteredDevotees:h,getDevoteeId:T,getDevoteeName:S,getStatusClass:k,getToggleButtonClass:b,getStatusToggleText:x,handleToggleStatus:M,exportData:X,refreshData:L,goToPage:F,resetPagination:E}}},WC={class:"min-h-screen bg-gray-50"},JC={class:"bg-white shadow-sm border-b border-gray-200"},YC={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},KC={class:"py-3"},XC={class:"flex items-center justify-between"},ZC={class:"flex items-center space-x-2"},QC=["disabled"],eT={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4"},tT={class:"mb-4"},oT={class:"bg-white rounded-xl shadow-sm border border-gray-100 mb-4"},sT={class:"p-3"},nT={class:"flex items-center space-x-3"},rT={class:"flex-1"},aT={class:"relative"},iT={class:"flex items-center space-x-2"},lT={class:"bg-white rounded-xl shadow-sm border border-gray-200"},dT={class:"p-3"},uT={class:"flex items-center justify-between mb-3"},cT={class:"text-sm text-gray-600"},pT={class:"flex items-center space-x-2"},mT={class:"flex bg-gray-100 rounded-lg p-0.5"},gT={key:0,class:"overflow-x-auto"},fT={class:"min-w-full divide-y divide-gray-200"},vT={class:"bg-white divide-y divide-gray-200"},hT={class:"px-3 py-2 whitespace-nowrap text-sm font-medium text-gray-900"},yT={class:"px-3 py-2 whitespace-nowrap"},xT={class:"flex items-center"},bT={class:"flex-shrink-0 h-7 w-7"},wT={class:"h-7 w-7 rounded-full bg-indigo-100 flex items-center justify-center"},kT={class:"text-xs font-medium text-indigo-600"},_T={class:"ml-2"},$T={class:"text-sm font-medium text-gray-900"},ST={class:"px-3 py-2 whitespace-nowrap text-sm text-gray-500"},DT={class:"px-3 py-2 whitespace-nowrap text-sm text-gray-500"},CT={class:"px-3 py-2 whitespace-nowrap"},TT={class:"px-3 py-2 whitespace-nowrap text-center text-sm font-medium"},ET={class:"flex items-center justify-center"},AT=["onClick","disabled","title"],IT={key:0,class:"flex items-center"},MT={key:1},RT={key:1,class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4"},PT={key:2,class:"flex items-center justify-between border-t border-gray-200 bg-white px-3 py-2 mt-3"},jT={class:"flex flex-1 justify-between sm:hidden"},NT=["disabled"],LT=["disabled"],BT={class:"hidden sm:flex sm:flex-1 sm:items-center sm:justify-between"},VT={class:"text-sm text-gray-700"},UT={class:"font-medium"},FT={class:"font-medium"},OT={class:"font-medium"},zT={class:"isolate inline-flex -space-x-px rounded-md shadow-sm","aria-label":"Pagination"},HT=["disabled"],qT=["onClick"],GT={key:1,class:"relative inline-flex items-center px-3 py-1.5 text-sm font-semibold text-gray-700 ring-1 ring-inset ring-gray-300"},WT=["disabled"],JT={key:3,class:"text-center py-6"},YT={class:"mt-1 text-sm text-gray-500"},KT={key:0,class:"fixed inset-0 bg-black bg-opacity-25 flex items-center justify-center z-50"},XT={class:"bg-white rounded-lg p-4 flex items-center space-x-3"};function ZT(t,o,s,n,r,i){const a=He("DevoteeStats"),l=He("DevoteeCard"),d=He("BaseLoader");return m(),f("div",WC,[e("div",JC,[e("div",YC,[e("div",KC,[e("div",XC,[o[11]||(o[11]=e("div",null,[e("h1",{class:"text-xl font-bold text-gray-900"},"Devotee Management"),e("p",{class:"mt-1 text-sm text-gray-600"},"Manage your temple's registered devotees")],-1)),e("div",ZC,[e("button",{onClick:o[0]||(o[0]=(...c)=>n.refreshData&&n.refreshData(...c)),disabled:n.loading,class:"inline-flex items-center px-3 py-1.5 border border-gray-300 rounded-lg text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 transition-all duration-200 disabled:opacity-50"},[...o[10]||(o[10]=[e("svg",{class:"w-4 h-4 mr-1.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})],-1),Q(" Refresh ",-1)])],8,QC)])])])])]),e("div",eT,[e("div",tT,[re(a,{stats:n.devoteeStore.devoteeStats,loading:n.loading},null,8,["stats","loading"])]),e("div",oT,[e("div",sT,[e("div",nT,[e("div",rT,[e("div",aT,[o[12]||(o[12]=e("div",{class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},[e("svg",{class:"h-4 w-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})])],-1)),de(e("input",{"onUpdate:modelValue":o[1]||(o[1]=c=>n.searchQuery=c),type:"text",placeholder:"Search devotees by name, email, or phone...",class:"block w-full pl-9 pr-3 py-2 border border-gray-300 rounded-lg focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"},null,512),[[xe,n.searchQuery]])])]),e("div",iT,[de(e("select",{"onUpdate:modelValue":o[2]||(o[2]=c=>n.statusFilter=c),class:"block w-32 px-3 py-2 border border-gray-300 rounded-lg focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"},[...o[13]||(o[13]=[e("option",{value:""},"All Status",-1),e("option",{value:"active"},"Active",-1),e("option",{value:"inactive"},"Inactive",-1)])],512),[[Ce,n.statusFilter]]),de(e("select",{"onUpdate:modelValue":o[3]||(o[3]=c=>n.itemsPerPage=c),onChange:o[4]||(o[4]=(...c)=>n.resetPagination&&n.resetPagination(...c)),class:"block w-20 px-3 py-2 border border-gray-300 rounded-lg focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"},[...o[14]||(o[14]=[e("option",{value:10},"10",-1),e("option",{value:25},"25",-1),e("option",{value:50},"50",-1),e("option",{value:100},"100",-1)])],544),[[Ce,n.itemsPerPage]])])])])]),e("div",lT,[e("div",dT,[e("div",uT,[e("div",null,[o[15]||(o[15]=e("h2",{class:"text-lg font-semibold text-gray-900"},"All Devotees",-1)),e("p",cT," Showing "+y(n.paginationInfo.start)+"-"+y(n.paginationInfo.end)+" of "+y(n.paginationInfo.total)+" devotees ",1)]),e("div",pT,[e("div",mT,[e("button",{onClick:o[5]||(o[5]=c=>n.viewMode="table"),class:ie(["px-2 py-1 text-sm font-medium rounded-md transition-all duration-200",n.viewMode==="table"?"bg-white text-indigo-600 shadow-sm":"text-gray-500 hover:text-gray-700"])},[...o[16]||(o[16]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 6h16M4 10h16M4 14h16M4 18h16"})],-1)])],2)])])]),n.viewMode==="table"?(m(),f("div",gT,[e("table",fT,[o[18]||(o[18]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{scope:"col",class:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"User ID"),e("th",{scope:"col",class:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Full Name"),e("th",{scope:"col",class:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Email"),e("th",{scope:"col",class:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Phone"),e("th",{scope:"col",class:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Status"),e("th",{scope:"col",class:"px-3 py-2 text-center text-xs font-medium text-gray-500 uppercase tracking-wider"},"Actions")])],-1)),e("tbody",vT,[(m(!0),f(he,null,ke(n.paginatedDevotees,c=>(m(),f("tr",{key:n.getDevoteeId(c),class:"hover:bg-gray-50"},[e("td",hT,"#"+y(n.getDevoteeId(c)),1),e("td",yT,[e("div",xT,[e("div",bT,[e("div",wT,[e("span",kT,y(n.getDevoteeName(c).charAt(0).toUpperCase()),1)])]),e("div",_T,[e("div",$T,y(n.getDevoteeName(c)),1)])])]),e("td",ST,y(c.email||"Not provided"),1),e("td",DT,y(c.phone||"Not provided"),1),e("td",CT,[e("span",{class:ie([n.getStatusClass(c.status),"inline-flex px-2 py-0.5 text-xs font-semibold rounded-full"])},y(c.status||"active"),3)]),e("td",TT,[e("div",ET,[e("button",{onClick:u=>n.handleToggleStatus(c),disabled:n.statusUpdateLoading===n.getDevoteeId(c),class:ie([n.getToggleButtonClass(c.status),"px-2 py-0.5 rounded text-xs transition-colors disabled:opacity-50 disabled:cursor-not-allowed"]),title:n.getStatusToggleText(c.status)},[n.statusUpdateLoading===n.getDevoteeId(c)?(m(),f("span",IT,[...o[17]||(o[17]=[e("svg",{class:"animate-spin -ml-1 mr-1 h-3 w-3 text-current",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),Q(" Updating... ",-1)])])):(m(),f("span",MT,y(n.getStatusToggleText(c.status)),1))],10,AT)])])]))),128))])])])):(m(),f("div",RT,[(m(!0),f(he,null,ke(n.paginatedDevotees,c=>(m(),Re(l,{key:n.getDevoteeId(c),devotee:c,loading:n.statusUpdateLoading===n.getDevoteeId(c),onToggleStatus:n.handleToggleStatus},null,8,["devotee","loading","onToggleStatus"]))),128))])),n.totalPages>1?(m(),f("div",PT,[e("div",jT,[e("button",{onClick:o[6]||(o[6]=c=>n.goToPage(n.currentPage-1)),disabled:n.currentPage===1,class:"relative inline-flex items-center rounded-md border border-gray-300 bg-white px-3 py-1.5 text-sm font-medium text-gray-700 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed"}," Previous ",8,NT),e("button",{onClick:o[7]||(o[7]=c=>n.goToPage(n.currentPage+1)),disabled:n.currentPage===n.totalPages,class:"relative ml-3 inline-flex items-center rounded-md border border-gray-300 bg-white px-3 py-1.5 text-sm font-medium text-gray-700 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed"}," Next ",8,LT)]),e("div",BT,[e("div",null,[e("p",VT,[o[19]||(o[19]=Q(" Showing ",-1)),e("span",UT,y(n.paginationInfo.start),1),o[20]||(o[20]=Q(" to ",-1)),e("span",FT,y(n.paginationInfo.end),1),o[21]||(o[21]=Q(" of ",-1)),e("span",OT,y(n.paginationInfo.total),1),o[22]||(o[22]=Q(" results ",-1))])]),e("div",null,[e("nav",zT,[e("button",{onClick:o[8]||(o[8]=c=>n.goToPage(n.currentPage-1)),disabled:n.currentPage===1,class:"relative inline-flex items-center rounded-l-md px-2 py-1.5 text-gray-400 ring-1 ring-inset ring-gray-300 hover:bg-gray-50 focus:z-20 focus:outline-offset-0 disabled:opacity-50 disabled:cursor-not-allowed"},[...o[23]||(o[23]=[e("span",{class:"sr-only"},"Previous",-1),e("svg",{class:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},[e("path",{"fill-rule":"evenodd",d:"M12.79 5.23a.75.75 0 01-.02 1.06L8.832 10l3.938 3.71a.75.75 0 11-1.04 1.08l-4.5-4.25a.75.75 0 010-1.08l4.5-4.25a.75.75 0 011.06.02z","clip-rule":"evenodd"})],-1)])],8,HT),(m(!0),f(he,null,ke(n.visiblePages,c=>(m(),f(he,{key:c},[c!=="..."?(m(),f("button",{key:0,onClick:u=>n.goToPage(c),class:ie(["relative inline-flex items-center px-3 py-1.5 text-sm font-semibold focus:z-20 focus:outline-offset-0",c===n.currentPage?"z-10 bg-indigo-600 text-white focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600":"text-gray-900 ring-1 ring-inset ring-gray-300 hover:bg-gray-50"])},y(c),11,qT)):(m(),f("span",GT," ... "))],64))),128)),e("button",{onClick:o[9]||(o[9]=c=>n.goToPage(n.currentPage+1)),disabled:n.currentPage===n.totalPages,class:"relative inline-flex items-center rounded-r-md px-2 py-1.5 text-gray-400 ring-1 ring-inset ring-gray-300 hover:bg-gray-50 focus:z-20 focus:outline-offset-0 disabled:opacity-50 disabled:cursor-not-allowed"},[...o[24]||(o[24]=[e("span",{class:"sr-only"},"Next",-1),e("svg",{class:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},[e("path",{"fill-rule":"evenodd",d:"M7.21 14.77a.75.75 0 01.02-1.06L11.168 10 7.23 6.29a.75.75 0 111.04-1.08l4.5 4.25a.75.75 0 010 1.08l-4.5 4.25a.75.75 0 01-1.06-.02z","clip-rule":"evenodd"})],-1)])],8,WT)])])])])):Y("",!0),n.paginatedDevotees.length===0&&!n.loading?(m(),f("div",JT,[o[25]||(o[25]=e("svg",{class:"mx-auto h-10 w-10 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})],-1)),o[26]||(o[26]=e("h3",{class:"mt-2 text-sm font-medium text-gray-900"},"No devotees found",-1)),e("p",YT,y(n.searchQuery||n.statusFilter?"Try adjusting your search criteria or status filter.":"No devotees have joined this temple yet."),1)])):Y("",!0)])])]),n.loading?(m(),f("div",KT,[e("div",XT,[re(d,{size:"sm"}),o[27]||(o[27]=e("span",{class:"text-gray-700"},"Loading devotees...",-1))])])):Y("",!0)])}const QT=Qe(GC,[["render",ZT],["__scopeId","data-v-5b3478ff"]]);class eE{async getSevas(o={}){var s,n,r,i,a,l;try{const d=this.getCurrentEntityId(),c=localStorage.getItem("current_tenant_id");console.log(`Fetching sevas for entity ID: ${d}, tenant ID: ${c}`),d&&localStorage.setItem("current_entity_id",d);const u=d?`/v1/sevas/entity-sevas?entity_id=${d}`:"/v1/sevas/entity-sevas",p={headers:{Authorization:`Bearer ${localStorage.getItem("auth_token")}`,"Content-Type":"application/json","X-Tenant-ID":c,"X-Entity-ID":d}};console.log(`Requesting sevas from: ${u} with headers:`,p),console.log("Requesting sevas with params:",o);const v={...o,entity_id:d},g=await Te.get(u,{...p,params:v});return console.log("Seva response:",g.data),{success:!0,data:((s=g.data)==null?void 0:s.sevas)||[],total:((n=g.data)==null?void 0:n.total)||0,pagination:((r=g.data)==null?void 0:r.pagination)||{}}}catch(d){return console.error("Error fetching sevas:",d),console.error("Error details:",((i=d.response)==null?void 0:i.data)||"No response data"),{success:!1,error:((l=(a=d.response)==null?void 0:a.data)==null?void 0:l.error)||"Failed to fetch sevas",data:[]}}}async getDevoteeSevas(o={}){var s,n,r,i;try{const a=this.getCurrentEntityId(),l=localStorage.getItem("current_tenant_id");console.log("Requesting devotee sevas with params:",o),console.log(`Devotee sevas for entity ID: ${a}, tenant ID: ${l}`);const d=a?`/v1/sevas?entity_id=${a}`:"/v1/sevas",c={headers:{Authorization:`Bearer ${localStorage.getItem("auth_token")}`,"Content-Type":"application/json","X-Tenant-ID":l,"X-Entity-ID":a}},u={...o,entity_id:a},p=await Te.get(d,{...c,params:u});return console.log("Devotee seva response:",p.data),{success:!0,data:((s=p.data)==null?void 0:s.sevas)||[],pagination:((n=p.data)==null?void 0:n.pagination)||{}}}catch(a){return console.error("Error fetching devotee sevas:",a),{success:!1,error:((i=(r=a.response)==null?void 0:r.data)==null?void 0:i.error)||"Failed to fetch sevas",data:[]}}}async getSevaById(o){var s,n;try{const r=this.getCurrentEntityId(),i=localStorage.getItem("current_tenant_id"),a={headers:{Authorization:`Bearer ${localStorage.getItem("auth_token")}`,"Content-Type":"application/json","X-Tenant-ID":i,"X-Entity-ID":r}};return console.log(`Fetching seva ${o} for entity ID: ${r}`),{success:!0,data:(await Te.get(`v1/sevas/${o}`,a)).data||null}}catch(r){return console.error("Error fetching seva:",r),{success:!1,error:((n=(s=r.response)==null?void 0:s.data)==null?void 0:n.error)||"Failed to fetch seva details",data:null}}}async getBookingCounts(){var o,s;try{const n=this.getCurrentEntityId(),r=localStorage.getItem("current_tenant_id");console.log(`Fetching booking counts for entity ID: ${n}, tenant ID: ${r}`);const i=n?`/v1/sevas/booking-counts?entity_id=${n}`:"/v1/sevas/booking-counts",a={headers:{Authorization:`Bearer ${localStorage.getItem("auth_token")}`,"Content-Type":"application/json","X-Tenant-ID":r,"X-Entity-ID":n}},l=await Te.get(i,a);return console.log("Booking counts response:",l.data),{success:!0,data:l.data||{}}}catch(n){return console.error("Error fetching booking counts:",n),{success:!1,error:((s=(o=n.response)==null?void 0:o.data)==null?void 0:s.error)||"Failed to fetch booking counts",data:{total:0,approved:0,pending:0,rejected:0}}}}async createSeva(o){var s,n,r,i;try{const a=this.getCurrentEntityId(),l=localStorage.getItem("current_tenant_id");if(!a)throw new Error("No entity ID available for seva creation");const d={name:o.name,seva_type:o.seva_type||o.sevaType,description:o.description||"",price:o.price||0,date:o.date||o.seva_date,start_time:o.start_time||o.startTime,end_time:o.end_time||o.endTime,duration:o.duration||30,max_bookings_per_day:o.max_bookings_per_day||o.maxBookingsPerDay||10,entity_id:parseInt(a)};console.log("Creating seva with data:",d),console.log("Entity ID being used:",a);const c={headers:{Authorization:`Bearer ${localStorage.getItem("auth_token")}`,"Content-Type":"application/json","X-Entity-ID":a,"X-Tenant-ID":l}},u=await Te.post("/v1/sevas",d,c);return console.log("Seva created successfully:",u.data),{success:!0,data:u.data,message:"Seva created successfully"}}catch(a){return console.error("Error creating seva:",a),{success:!1,error:((n=(s=a.response)==null?void 0:s.data)==null?void 0:n.error)||"Failed to create seva",errors:((i=(r=a.response)==null?void 0:r.data)==null?void 0:i.errors)||{}}}}async updateSeva(o,s){var n,r,i,a;try{const l=this.getCurrentEntityId(),d=localStorage.getItem("current_tenant_id"),c={name:s.name,seva_type:s.seva_type||s.sevaType,description:s.description||"",price:s.price||0,date:s.date||s.seva_date,start_time:s.start_time||s.startTime,end_time:s.end_time||s.endTime,duration:s.duration||30,max_bookings_per_day:s.max_bookings_per_day||s.maxBookingsPerDay||10,status:s.status},u={headers:{Authorization:`Bearer ${localStorage.getItem("auth_token")}`,"Content-Type":"application/json","X-Entity-ID":l,"X-Tenant-ID":d}};return console.log("Updating seva with ID:",o,"Data:",c),console.log("Entity ID context:",l),{success:!0,data:(await Te.put(`/v1/sevas/${o}`,c,u)).data,message:"Seva updated successfully",wasUpdate:!0,id:o}}catch(l){return console.error("Error updating seva:",l),{success:!1,error:((r=(n=l.response)==null?void 0:n.data)==null?void 0:r.error)||"Failed to update seva",errors:((a=(i=l.response)==null?void 0:i.data)==null?void 0:a.errors)||{}}}}async deleteSeva(o){var s,n,r,i,a,l,d;try{const c=this.getCurrentEntityId(),u=localStorage.getItem("current_tenant_id");console.log("Permanently deleting seva with ID:",o),console.log("Entity context:",c);const p={headers:{Authorization:`Bearer ${localStorage.getItem("auth_token")}`,"Content-Type":"application/json","X-Entity-ID":c,"X-Tenant-ID":u,"X-Force-Delete":"true"}},v=await Te.delete(`/v1/sevas/${o}`,{...p,params:{force:!0,permanent:!0}});return console.log("Delete response:",v.data),{success:!0,message:"Seva permanently deleted successfully",id:o}}catch(c){return console.error("Error deleting seva:",c),console.error("Delete error details:",(s=c.response)==null?void 0:s.data),((n=c.response)==null?void 0:n.status)===404?{success:!1,error:"Seva not found or already deleted"}:((r=c.response)==null?void 0:r.status)===409?{success:!1,error:"Cannot delete seva - it has existing bookings. Please contact administrator."}:{success:!1,error:((a=(i=c.response)==null?void 0:i.data)==null?void 0:a.error)||((d=(l=c.response)==null?void 0:l.data)==null?void 0:d.message)||"Failed to permanently delete seva"}}}async deactivateSeva(o){var s,n;try{const r=this.getCurrentEntityId(),i=localStorage.getItem("current_tenant_id");console.log("Deactivating seva with ID:",o);const a={headers:{Authorization:`Bearer ${localStorage.getItem("auth_token")}`,"Content-Type":"application/json","X-Entity-ID":r,"X-Tenant-ID":i}};return{success:!0,data:(await Te.patch(`/v1/sevas/${o}/deactivate`,{},a)).data,message:"Seva deactivated successfully"}}catch(r){return console.error("Error deactivating seva:",r),{success:!1,error:((n=(s=r.response)==null?void 0:s.data)==null?void 0:n.error)||"Failed to deactivate seva"}}}async bookSeva(o){var n,r,i;const s={seva_id:o};try{const a=this.getCurrentEntityId(),l=localStorage.getItem("current_tenant_id"),d={headers:{Authorization:`Bearer ${localStorage.getItem("auth_token")}`,"Content-Type":"application/json","X-Entity-ID":a,"X-Tenant-ID":l}};return console.log(`Booking seva ${o} for entity ${a}`),{success:!0,data:(await Te.post("/v1/sevas/bookings",s,d)).data,message:"Seva booked successfully"}}catch(a){return console.error("Error booking seva:",((n=a.response)==null?void 0:n.data)||a),{success:!1,error:((i=(r=a.response)==null?void 0:r.data)==null?void 0:i.error)||"Failed to book seva"}}}async getMyBookings(){var o,s,n,r;try{const i=this.getCurrentEntityId(),a=localStorage.getItem("current_tenant_id"),l={headers:{Authorization:`Bearer ${localStorage.getItem("auth_token")}`,"Content-Type":"application/json","X-Entity-ID":i,"X-Tenant-ID":a}};return console.log(`Fetching my bookings for entity ${i}`),{success:!0,data:((o=(await Te.get("/v1/sevas/my-bookings",l)).data)==null?void 0:o.bookings)||[]}}catch(i){return console.error("Error fetching my bookings:",((s=i.response)==null?void 0:s.data)||i),{success:!1,error:((r=(n=i.response)==null?void 0:n.data)==null?void 0:r.error)||"Failed to fetch booking history",data:[]}}}async getEntityBookings(o){var s,n;try{const r=o||this.getCurrentEntityId(),i=localStorage.getItem("current_tenant_id");console.log(`Fetching entity bookings for entity ID: ${r}, tenant ID: ${i}`);const a=r?`/v1/sevas/entity-bookings?entity_id=${r}`:"/v1/sevas/entity-bookings",l={headers:{Authorization:`Bearer ${localStorage.getItem("auth_token")}`,"Content-Type":"application/json","X-Entity-ID":r,"X-Tenant-ID":i}};console.log(`Requesting entity bookings from: ${a} with headers:`,l);const d=await Te.get(a,l);return console.log("Entity bookings response:",d.data),{success:!0,data:d.data.bookings||[],pagination:d.data.pagination||{},total:d.data.total||0}}catch(r){return console.error("Error fetching entity bookings:",r),{success:!1,error:((n=(s=r.response)==null?void 0:s.data)==null?void 0:n.error)||"Failed to fetch bookings",data:[]}}}async getBookingById(o){var s,n;try{const r=this.getCurrentEntityId(),i=localStorage.getItem("current_tenant_id"),a={headers:{Authorization:`Bearer ${localStorage.getItem("auth_token")}`,"Content-Type":"application/json","X-Entity-ID":r,"X-Tenant-ID":i}};return console.log(`Fetching booking ${o} for entity ${r}`),{success:!0,data:(await Te.get(`/v1/sevas/bookings/${o}`,a)).data||null}}catch(r){return console.error("Error fetching booking:",r),{success:!1,error:((n=(s=r.response)==null?void 0:s.data)==null?void 0:n.error)||"Failed to fetch booking details",data:null}}}async updateBookingStatus(o,s){var n,r;try{const i=this.getCurrentEntityId(),a=localStorage.getItem("current_tenant_id"),l={headers:{Authorization:`Bearer ${localStorage.getItem("auth_token")}`,"Content-Type":"application/json","X-Entity-ID":i,"X-Tenant-ID":a}};return console.log(`Updating booking ${o} status to ${s} for entity ${i}`),{success:!0,data:(await Te.patch(`/v1/sevas/bookings/${o}/status`,{status:s},l)).data,message:`Booking ${s} successfully`}}catch(i){return console.error("Error updating booking status:",i),{success:!1,error:((r=(n=i.response)==null?void 0:n.data)==null?void 0:r.error)||"Failed to update booking status"}}}getCurrentEntityId(){const s=window.location.pathname.match(/\/entity\/(\d+)/);if(s){const i=s[1];return console.log(`Entity ID from URL path: ${i}`),i}const n=localStorage.getItem("current_entity_id");if(n&&n!=="null"&&n!=="undefined")return console.log(`Entity ID from localStorage: ${n}`),n;const r=this.getUserInfo();if(r)switch(r.role){case"templeadmin":if(r.entityId)return console.log(`TempleAdmin entity ID: ${r.entityId}`),r.entityId.toString();break;case"standarduser":case"monitoringuser":if(r.assignedTenantId)return console.log(`StandardUser/MonitoringUser assigned tenant ID: ${r.assignedTenantId}`),r.assignedTenantId.toString();break}return console.warn("Could not resolve entity ID for seva service"),null}getUserInfo(){try{const o=localStorage.getItem("auth_token");if(o){const s=JSON.parse(atob(o.split(".")[1]));return{userId:s.user_id,role:s.role||s.role_name,entityId:s.entity_id,assignedTenantId:s.assigned_tenant_id}}}catch(o){console.warn("Error parsing user info from token:",o)}return null}handleError(o){var s,n,r,i;return(n=(s=o.response)==null?void 0:s.data)!=null&&n.message?new Error(o.response.data.message):(i=(r=o.response)==null?void 0:r.data)!=null&&i.error?new Error(o.response.data.error):o.message?new Error(o.message):new Error("An unexpected error occurred")}_saveBookingToLocalStorage(o){try{const s=JSON.parse(localStorage.getItem("user_bookings")||"[]");s.some(n=>n.seva_id===o)||(s.push({id:Math.floor(Math.random()*1e3),seva_id:o,status:"pending",created_at:new Date().toISOString()}),localStorage.setItem("user_bookings",JSON.stringify(s)))}catch(s){console.error("Error saving booking to localStorage:",s)}}}const nt=new eE,Pa=Vo("seva",()=>{const t=V([]),o=V([]),s=V(!1),n=V(null),r=V(""),i=V({status:"all",type:"all",dateRange:"all"}),a=V(null),l=V([]),d=V(!1),c=V({}),u=V(!1),p=V([]),v=V(!1),g=te(()=>{let ae=t.value;if(r.value){const H=r.value.toLowerCase();ae=ae.filter(J=>{var z,I;return((z=J.name)==null?void 0:z.toLowerCase().includes(H))||((I=J.description)==null?void 0:I.toLowerCase().includes(H))})}return i.value.status!=="all"&&(ae=ae.filter(H=>H.status===i.value.status)),i.value.type!=="all"&&(ae=ae.filter(H=>H.type===i.value.type)),ae}),h=te(()=>({total:t.value.length,active:t.value.filter(ae=>ae.is_active).length,pending:t.value.filter(ae=>ae.status==="pending").length})),D=async(ae={})=>{s.value=!0,n.value=null;try{const H=await nt.getSevas({page:ae.page||1,limit:ae.limit||10,seva_type:ae.seva_type||"",search:ae.search||""});return H.success?(t.value=H.data||[],t.value):(n.value=H.error,[])}catch(H){return console.error("Error fetching sevas:",H),n.value=H.message||"Failed to fetch sevas",[]}finally{s.value=!1}},C=async(ae={})=>{s.value=!0,n.value=null;try{const H=await nt.getDevoteeSevas({page:ae.page||1,limit:ae.limit||10,seva_type:ae.seva_type||"",search:ae.search||""});return H.success?(t.value=H.data||[],t.value):(n.value=H.error,[])}catch(H){return console.error("Error fetching devotee sevas:",H),n.value=H.message||"Failed to fetch sevas",[]}finally{s.value=!1}},B=async()=>{u.value=!0;try{const ae=await nt.getBookingCounts();return ae.success?(c.value=ae.data||{},c.value):(console.error("Failed to fetch booking counts:",ae.error),c.value={},{})}catch(ae){return console.error("Error fetching booking counts:",ae),c.value={},{}}finally{u.value=!1}},_=async()=>{v.value=!0;try{const ae=await nt.getSevas({page:1,limit:1e3,search:""});return ae.success?(p.value=ae.data||[],console.log("Seva catalog loaded:",p.value),p.value):(console.error("Failed to fetch seva catalog:",ae.error),p.value=[],[])}catch(ae){return console.error("Error fetching seva catalog:",ae),p.value=[],[]}finally{v.value=!1}};return{sevas:t,sevaBookings:o,loading:s,error:n,searchQuery:r,filters:i,selectedSeva:a,recentSevas:l,loadingRecentSevas:d,sevaCatalog:p,loadingCatalog:v,bookingCounts:c,loadingBookingCounts:u,filteredSevas:g,sevaStats:h,fetchSevas:D,fetchDevoteeSevas:C,fetchBookingCounts:B,fetchSevaCatalog:_,fetchEntityBookings:async(ae=null)=>{var H,J;s.value=!0,n.value=null;try{const z=await nt.getEntityBookings(ae);return z.success?(o.value=z.data||[],o.value):(n.value=z.error,o.value=[],[])}catch(z){return console.error("Error fetching seva bookings:",z),n.value=((J=(H=z.response)==null?void 0:H.data)==null?void 0:J.error)||"Failed to fetch bookings",o.value=[],[]}finally{s.value=!1}},fetchBookingById:async ae=>{var H,J;s.value=!0,n.value=null;try{const z=await nt.getBookingById(ae);return z.success?z.data:(n.value=z.error,null)}catch(z){return console.error("Error fetching booking:",z),n.value=((J=(H=z.response)==null?void 0:H.data)==null?void 0:J.error)||"Failed to fetch booking",null}finally{s.value=!1}},fetchRecentSevas:async()=>{d.value=!0;try{await _();const ae=await nt.getMyBookings();if(ae.success){let H=ae.data||[];H=H.map(z=>{const I=z.seva_id||z.SevaID,P=p.value.find(W=>W.id===I||W.ID===I);return{...z,seva_name:(P==null?void 0:P.name)||(P==null?void 0:P.Name)||`Seva ${I}`,seva_type:(P==null?void 0:P.type)||(P==null?void 0:P.Type)||(P==null?void 0:P.seva_type)||"",seva_description:(P==null?void 0:P.description)||(P==null?void 0:P.Description)||"",seva:P?{id:P.id||P.ID,name:P.name||P.Name,type:P.type||P.Type||P.seva_type,description:P.description||P.Description}:null}}),console.log("Bookings with seva names:",H);const J=[...H].sort((z,I)=>{const P=new Date(z.booking_time||z.BookingTime||z.created_at||Date.now());return new Date(I.booking_time||I.BookingTime||I.created_at||Date.now())-P});return l.value=J,l.value}else return l.value=[],[]}catch(ae){return console.error("Failed to fetch recent sevas:",ae),l.value=[],[]}finally{d.value=!1}},createSeva:async ae=>{var H,J;s.value=!0,n.value=null;try{console.log("Creating seva with data:",ae);const z=await nt.createSeva(ae);return z.success&&z.data&&(t.value.push(z.data),p.value.push(z.data)),{success:z.success,message:z.message||"Seva created successfully",data:z.data}}catch(z){return console.error("Error creating seva:",z),n.value=((J=(H=z.response)==null?void 0:H.data)==null?void 0:J.error)||"Failed to create seva",{success:!1,message:n.value}}finally{s.value=!1}},updateSeva:async(ae,H)=>{var J,z;s.value=!0,n.value=null;try{const I=await nt.updateSeva(ae,H);if(I.success&&I.data){const P=t.value.findIndex(we=>we.id===ae);P!==-1&&(t.value[P]=I.data);const W=p.value.findIndex(we=>we.id===ae);W!==-1&&(p.value[W]=I.data)}return{success:I.success,message:I.message||"Seva updated successfully",data:I.data}}catch(I){return console.error("Error updating seva:",I),n.value=((z=(J=I.response)==null?void 0:J.data)==null?void 0:z.error)||"Failed to update seva",{success:!1,message:n.value}}finally{s.value=!1}},deleteSeva:async ae=>{var H,J;s.value=!0,n.value=null;try{console.log("Permanently deleting seva with ID:",ae);const z=await nt.deleteSeva(ae);return z.success&&(t.value=t.value.filter(I=>(I.id||I.ID)!==ae),p.value=p.value.filter(I=>(I.id||I.ID)!==ae),o.value=o.value.filter(I=>(I.seva_id||I.SevaID)!==ae),l.value=l.value.filter(I=>(I.seva_id||I.SevaID)!==ae),console.log("Seva permanently removed from all local state")),{success:z.success,message:z.message||"Seva permanently deleted successfully"}}catch(z){return console.error("Error permanently deleting seva:",z),n.value=((J=(H=z.response)==null?void 0:H.data)==null?void 0:J.error)||"Failed to permanently delete seva",{success:!1,message:n.value}}finally{s.value=!1}},deactivateSeva:async ae=>{var H,J;s.value=!0,n.value=null;try{console.log("Deactivating seva with ID:",ae);const z=await nt.deactivateSeva(ae);if(z.success){const I=t.value.findIndex(W=>(W.id||W.ID)===ae);I!==-1&&(t.value[I].is_active=!1,t.value[I].status="inactive");const P=p.value.findIndex(W=>(W.id||W.ID)===ae);P!==-1&&(p.value[P].is_active=!1,p.value[P].status="inactive")}return{success:z.success,message:z.message||"Seva deactivated successfully"}}catch(z){return console.error("Error deactivating seva:",z),n.value=((J=(H=z.response)==null?void 0:H.data)==null?void 0:J.error)||"Failed to deactivate seva",{success:!1,message:n.value}}finally{s.value=!1}},bookSeva:async ae=>{var H,J;s.value=!0,n.value=null;try{const z=await nt.bookSeva(ae);return{success:z.success,message:z.message||"Seva booked successfully",data:z.data}}catch(z){return console.error("Error booking seva:",z),n.value=((J=(H=z.response)==null?void 0:H.data)==null?void 0:J.error)||"Failed to book seva",{success:!1,message:n.value}}finally{s.value=!1}},updateBookingStatus:async(ae,H)=>{var J,z;s.value=!0,n.value=null;try{const I=await nt.updateBookingStatus(ae,H);if(I.success){const P=o.value.findIndex(W=>(W.id||W.ID)===ae);P!==-1&&(o.value[P].status=H,o.value[P].Status=H)}return{success:I.success,message:I.message||`Booking ${H} successfully`}}catch(I){return console.error("Error updating booking status:",I),n.value=((z=(J=I.response)==null?void 0:J.data)==null?void 0:z.error)||"Failed to update booking status",{success:!1,message:n.value}}finally{s.value=!1}},getSevaById:async ae=>{var H,J;s.value=!0,n.value=null;try{const z=await nt.getSevaById(ae);return z.success?z.data:(n.value=z.error,null)}catch(z){return console.error("Error fetching seva:",z),n.value=((J=(H=z.response)==null?void 0:H.data)==null?void 0:J.error)||"Failed to fetch seva",null}finally{s.value=!1}},setSearchQuery:ae=>{r.value=ae},setFilters:ae=>{i.value={...i.value,...ae}},clearFilters:()=>{r.value="",i.value={status:"all",type:"all",dateRange:"all"}},setSelectedSeva:ae=>{a.value=ae}}}),tE={class:"min-h-screen bg-gray-50/90"},oE={class:"bg-white border-b border-gray-200 shadow-sm"},sE={class:"px-6 py-6"},nE={class:"flex items-center justify-between"},rE={class:"flex gap-3"},aE={class:"flex bg-gray-100 rounded-lg p-1"},iE={key:0,class:"px-6 py-6"},lE={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8"},dE={class:"bg-white p-6 rounded-xl shadow-sm border border-gray-200 hover:shadow-md transition-all duration-200"},uE={class:"flex items-center"},cE={class:"ml-4"},pE={class:"text-2xl font-bold text-gray-900"},mE={class:"bg-white p-6 rounded-xl shadow-sm border border-gray-200 hover:shadow-md transition-all duration-200"},gE={class:"flex items-center"},fE={class:"ml-4"},vE={class:"text-2xl font-bold text-gray-900"},hE={class:"bg-white p-6 rounded-xl shadow-sm border border-gray-200 hover:shadow-md transition-all duration-200"},yE={class:"flex items-center"},xE={class:"ml-4"},bE={class:"text-2xl font-bold text-gray-900"},wE={class:"bg-white p-6 rounded-xl shadow-sm border border-gray-200 hover:shadow-md transition-all duration-200"},kE={class:"flex items-center"},_E={class:"ml-4"},$E={class:"text-2xl font-bold text-gray-900"},SE={class:"bg-white p-6 rounded-xl shadow-sm border border-gray-200 mb-6 hover:shadow-md transition-all duration-200"},DE={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4"},CE={class:"relative"},TE={class:"flex justify-between items-center mt-4"},EE={class:"text-sm text-gray-500"},AE={key:0,class:"flex justify-center items-center py-12"},IE={key:1,class:"bg-white rounded-xl shadow-sm border border-gray-200 hover:shadow-md transition-all duration-200"},ME={key:0,class:"overflow-x-auto"},RE={class:"w-full"},PE={class:"bg-white divide-y divide-gray-200"},jE={class:"px-6 py-4"},NE={class:"text-sm font-medium text-gray-900"},LE={class:"text-sm text-gray-500"},BE={key:0,class:"text-xs text-gray-400 mt-1"},VE={class:"px-6 py-4"},UE={class:"text-sm font-medium text-gray-900"},FE={class:"text-xs text-gray-500"},OE={class:"px-6 py-4 whitespace-nowrap"},zE={class:"text-sm text-gray-900"},HE={class:"text-sm text-gray-500"},qE={class:"px-6 py-4 whitespace-nowrap"},GE={class:"px-6 py-4 whitespace-nowrap text-sm font-medium"},WE={class:"flex items-center gap-2"},JE=["onClick"],YE=["onClick"],KE=["onClick"],XE={key:1,class:"text-center py-12"},ZE={class:"mt-6"},QE={key:1,class:"px-6 py-6"},eA={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8"},tA={class:"bg-white p-6 rounded-xl shadow-sm border border-gray-200 hover:shadow-md transition-all duration-200"},oA={class:"flex items-center"},sA={class:"ml-4"},nA={class:"text-2xl font-bold text-gray-900"},rA={class:"bg-white p-6 rounded-xl shadow-sm border border-gray-200 hover:shadow-md transition-all duration-200"},aA={class:"flex items-center"},iA={class:"ml-4"},lA={class:"text-2xl font-bold text-gray-900"},dA={class:"bg-white p-6 rounded-xl shadow-sm border border-gray-200 hover:shadow-md transition-all duration-200"},uA={class:"flex items-center"},cA={class:"ml-4"},pA={class:"text-2xl font-bold text-gray-900"},mA={class:"bg-white p-6 rounded-xl shadow-sm border border-gray-200 hover:shadow-md transition-all duration-200"},gA={class:"flex items-center"},fA={class:"ml-4"},vA={class:"text-2xl font-bold text-gray-900"},hA={class:"bg-white p-6 rounded-xl shadow-sm border border-gray-200 mb-6 hover:shadow-md transition-all duration-200"},yA={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},xA={class:"relative"},bA={class:"flex justify-between items-center mt-4"},wA={class:"text-sm text-gray-500"},kA={key:0,class:"flex justify-center items-center py-12"},_A={key:1,class:"bg-white rounded-xl shadow-sm border border-gray-200 hover:shadow-md transition-all duration-200"},$A={key:0,class:"overflow-x-auto"},SA={class:"w-full"},DA={class:"bg-white divide-y divide-gray-200"},CA={class:"px-6 py-4"},TA={class:"text-sm font-medium text-gray-900"},EA={class:"text-sm text-gray-500 mt-1"},AA={class:"px-6 py-4"},IA={class:"text-sm text-gray-900"},MA={class:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800"},RA={class:"text-sm text-gray-500 mt-1"},PA={class:"px-6 py-4 whitespace-nowrap"},jA={class:"text-sm text-gray-900"},NA={class:"text-sm text-gray-500"},LA={key:0,class:"text-xs text-gray-400"},BA={class:"px-6 py-4 whitespace-nowrap"},VA={class:"px-6 py-4 whitespace-nowrap text-sm font-medium"},UA={class:"flex items-center gap-2"},FA=["onClick"],OA=["onClick"],zA={key:1,class:"text-center py-12"},HA={key:2,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50 backdrop-blur-sm"},qA={class:"bg-white rounded-xl shadow-xl max-w-md w-full"},GA={class:"p-6"},WA={class:"text-sm text-gray-500 text-center mb-6"},JA={class:"flex space-x-3"},YA=["disabled"],KA={key:0,class:"flex items-center justify-center"},XA={key:1},ZA={key:3,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50 backdrop-blur-sm"},QA={class:"bg-white rounded-xl shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto"},eI={class:"flex items-center justify-between p-6 border-b border-gray-200"},tI={class:"text-xl font-bold text-gray-900"},oI={class:"p-6"},sI={class:"space-y-5"},nI={class:"pb-3 mb-3 border-b border-gray-200"},rI={class:"space-y-4"},aI={class:"pb-3 mb-3 border-b border-gray-200"},iI={class:"space-y-4"},lI={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},dI={class:"mt-6 flex justify-end space-x-3"},uI=["disabled"],cI={key:0,class:"flex items-center"},pI={key:1},mI={key:4,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50 backdrop-blur-sm"},gI={class:"bg-white rounded-xl shadow-xl max-w-3xl w-full max-h-[90vh] overflow-y-auto"},fI={class:"flex items-center justify-between p-6 border-b border-gray-200"},vI={class:"p-6"},hI={class:"bg-gray-50 rounded-lg p-6 mb-6 border border-gray-100"},yI={class:"flex items-center justify-between mb-4"},xI={class:"text-lg font-semibold text-gray-900"},bI={class:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4"},wI={class:"text-base text-gray-900"},kI={class:"text-base text-gray-900"},_I={class:"text-base text-gray-900"},$I={class:"text-base text-gray-900"},SI={class:"text-base text-gray-900"},DI={class:"text-base text-gray-900"},CI={class:"text-base text-gray-900"},TI={key:0,class:"mb-4"},EI={class:"text-base text-gray-900"},AI={key:0,class:"flex justify-end space-x-3"},II={class:"flex items-center"},MI={class:"flex-shrink-0"},RI={key:0,class:"w-5 h-5 text-green-400",fill:"currentColor",viewBox:"0 0 20 20"},PI={key:1,class:"w-5 h-5 text-red-400",fill:"currentColor",viewBox:"0 0 20 20"},jI={class:"ml-3"},NI={class:"text-sm font-medium"},LI={__name:"SevaManagement",setup(t){const s=Ze().params.id;Pa();const n=V(!1),r=V(!1),i=V(!1),a=V(null),l=V(null),d=V([]),c=V(1),u=V([]);V({});const p=V("bookings"),v=V(!1),g=V([]),h=V(null),D=V(""),C=V(""),B=V(""),_=V(""),T=V(""),S=V(""),k=V(""),b={1:{name:"Archana Seva",type:"daily"},2:{name:"Anadhana Seva",type:"daily"},3:{name:"Archana Seva",type:"daily"}},x=G=>(G==null?void 0:G.ID)||(G==null?void 0:G.id)||0,F=G=>(G==null?void 0:G.SevaID)||(G==null?void 0:G.seva_id)||1,E=G=>(G==null?void 0:G.Status)||(G==null?void 0:G.status)||"pending",O=G=>(G==null?void 0:G.SpecialRequests)||(G==null?void 0:G.special_requests)||"",N=G=>(G==null?void 0:G.BookingTime)||(G==null?void 0:G.booking_time)||null,L=G=>(G==null?void 0:G.CreatedAt)||(G==null?void 0:G.created_at)||null,M=G=>(G==null?void 0:G.DevoteeName)||(G==null?void 0:G.devotee_name)||"Dileep",X=G=>(G==null?void 0:G.DevoteePhone)||(G==null?void 0:G.devotee_phone)||"8765453434",ee=G=>{if(!G)return"Unknown Seva";if(G.SevaName||G.seva_name)return G.SevaName||G.seva_name;const U=F(G);return b[U]?b[U].name:"Archana Seva"},oe=G=>{if(!G)return"Not Categorized";if(G.SevaType||G.seva_type)return G.SevaType||G.seva_type;const U=F(G);return b[U]?b[U].type:"daily"},ae=G=>{const U=N(G);if(!U)return"No Date";try{return new Date(U).toLocaleDateString("en-IN",{day:"2-digit",month:"short",year:"numeric"})}catch(Z){return console.error("Error formatting booking date:",Z,U),"No Date"}},H=G=>{const U=N(G);if(!U)return"";try{return new Date(U).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!0})}catch(Z){return console.error("Error formatting booking time:",Z,U),""}},J=te(()=>{let G=[...u.value];if(D.value){const U=D.value.toLowerCase();G=G.filter(Z=>{const ye=ee(Z).toLowerCase(),pe=oe(Z).toLowerCase();return ye.includes(U)||(O(Z)||"").toLowerCase().includes(U)||(M(Z)||"").toLowerCase().includes(U)||pe.includes(U)})}if(C.value&&(G=G.filter(U=>E(U)===C.value)),B.value&&(G=G.filter(U=>oe(U).toLowerCase()===B.value.toLowerCase())),_.value){const U=new Date;U.setHours(0,0,0,0);const Z=ye=>{const pe=N(ye);if(pe)return new Date(pe);const be=L(ye);return be?new Date(be):null};if(_.value==="today")G=G.filter(ye=>{const pe=Z(ye);if(!pe)return!1;const be=new Date(pe);return be.setHours(0,0,0,0),be.getTime()===U.getTime()});else if(_.value==="week"){const ye=new Date(U);ye.setDate(U.getDate()-U.getDay());const pe=new Date(ye);pe.setDate(ye.getDate()+6),G=G.filter(be=>{const Se=Z(be);return Se?Se>=ye&&Se<=pe:!1})}else if(_.value==="month"){const ye=new Date(U.getFullYear(),U.getMonth(),1),pe=new Date(U.getFullYear(),U.getMonth()+1,0);G=G.filter(be=>{const Se=Z(be);return Se?Se>=ye&&Se<=pe:!1})}}return G}),z=te(()=>{let G=[...g.value];if(T.value){const U=T.value.toLowerCase();G=G.filter(Z=>{const ye=(Z.name||Z.Name||"").toLowerCase(),pe=(Z.description||Z.Description||"").toLowerCase();return ye.includes(U)||pe.includes(U)})}return S.value&&(G=G.filter(U=>(U.seva_type||U.type||"").toLowerCase()===S.value.toLowerCase())),k.value&&(G=G.filter(U=>{const Z=U.is_active||U.status==="active";return k.value==="active"?Z:!Z})),G}),I=V({name:"",type:"",description:"",price:0,duration:30,date:"",startTime:"",endTime:"",max_bookings_per_day:10,is_active:!0}),P=(G,U="info")=>{const Z=c.value++,ye={id:Z,message:G,type:U,show:!0};return d.value.push(ye),setTimeout(()=>{const pe=d.value.findIndex(be=>be.id===Z);pe!==-1&&(d.value[pe].show=!1,setTimeout(()=>{d.value=d.value.filter(be=>be.id!==Z)},300))},3e3),Z},W=G=>{if(!G||G==="")return"No Date Set";try{const U=new Date(G);return isNaN(U.getTime())?"Invalid Date":U.toLocaleDateString("en-IN",{day:"2-digit",month:"short",year:"numeric"})}catch(U){return console.error("Error formatting date:",U,G),"Invalid Date"}},we=G=>{if(!G)return"";try{if(G.includes(" ")){const U=G.split(" ");if(U.length>1){const Z=U[1].split(".")[0],[ye,pe,be]=Z.split(":"),Se=parseInt(ye,10),Ie=Se>=12?"PM":"AM";return`${Se%12||12}:${pe} ${Ie}`}}if(G.includes("T"))return new Date(G).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!0});if(G.includes(":")){const[U,Z]=G.split(":"),ye=parseInt(U,10),pe=ye>=12?"PM":"AM";return`${ye%12||12}:${Z} ${pe}`}return G}catch(U){return console.error("Error formatting time:",U,G),G}},me=G=>({pending:"bg-yellow-100 text-yellow-800",approved:"bg-green-100 text-green-800",rejected:"bg-red-100 text-red-800",completed:"bg-blue-100 text-blue-800",success:"bg-green-100 text-green-800"})[G]||"bg-gray-100 text-gray-800",De=G=>({pending:"bg-yellow-400",approved:"bg-green-400",rejected:"bg-red-400",completed:"bg-blue-400",success:"bg-green-400"})[G]||"bg-gray-400",ge=async()=>{console.log("Loading seva bookings for entity ID:",s);try{n.value=!0;const G=await nt.getEntityBookings(s),U=G==null?void 0:G.data;u.value=Array.isArray(U)?U:[],console.log("First booking object fields:",u.value.length>0?Object.keys(u.value[0]):"No bookings"),console.log("Sample booking data:",u.value.length>0?u.value[0]:"No bookings")}catch(G){console.error("Error loading seva bookings:",G),P("Failed to load seva bookings. Please try again.","error")}finally{n.value=!1}},ue=async()=>{console.log("Loading seva catalog");try{v.value=!0;const G=await nt.getSevas({limit:1e3});G.success?(g.value=G.data||[],console.log("Seva catalog loaded:",g.value)):(console.error("Failed to load seva catalog:",G.error),P("Failed to load seva catalog","error"))}catch(G){console.error("Error loading seva catalog:",G),P("Failed to load seva catalog. Please try again.","error")}finally{v.value=!1}},$=async G=>{const U=x(G);console.log("Approving booking:",U);try{const Z=await nt.updateBookingStatus(U,"approved");Z.success?(await ge(),P("Booking approved successfully","success"),l.value&&x(l.value)===U&&(l.value=null)):P(Z.message||"Failed to approve booking","error")}catch(Z){console.error("Error approving booking:",Z),P("Failed to approve booking. Please try again.","error")}},w=async G=>{const U=x(G);console.log("Rejecting booking:",U);try{const Z=await nt.updateBookingStatus(U,"rejected");Z.success?(await ge(),P("Booking rejected","warning"),l.value&&x(l.value)===U&&(l.value=null)):P(Z.message||"Failed to reject booking","error")}catch(Z){console.error("Error rejecting booking:",Z),P("Failed to reject booking. Please try again.","error")}},R=G=>{console.log("Editing seva:",G),I.value={name:G.name||G.Name||"",type:G.seva_type||G.type||G.SevaType||"",description:G.description||G.Description||"",price:G.price||G.Price||0,duration:G.duration||G.Duration||30,date:G.date||G.Date||"",startTime:G.start_time||G.StartTime||"",endTime:G.end_time||G.EndTime||"",max_bookings_per_day:G.max_bookings_per_day||G.MaxBookingsPerDay||10,is_active:G.is_active!==void 0?G.is_active:G.status==="active"||!0},a.value=G},A=G=>{h.value=G},j=async()=>{var G;if(h.value){r.value=!0;try{const U=h.value.id||h.value.ID;console.log("Deleting seva ID:",U);const Z=await nt.deleteSeva(U);Z&&Z.success?(await ue(),P(`Seva "${h.value.name||h.value.Name}" deleted successfully`,"success"),h.value=null):(console.error("Delete failed:",Z),P((Z==null?void 0:Z.message)||(Z==null?void 0:Z.error)||"Failed to delete seva","error"))}catch(U){console.error("Error deleting seva:",U),U!=null&&U.response?P(`Error (${U.response.status}): ${((G=U.response.data)==null?void 0:G.message)||"Failed to delete seva"}`,"error"):P("Failed to delete seva. Please try again.","error")}finally{r.value=!1}}},ne=async()=>{if(!I.value.name||!I.value.type||!I.value.description){P("Please fill in all required fields","error");return}if(!a.value&&!s){P("Missing entity ID. Please try again.","error");return}r.value=!0;try{const G={name:I.value.name.trim(),seva_type:I.value.type,description:I.value.description.trim(),price:parseFloat(I.value.price)||0,duration:parseInt(I.value.duration)||30,max_bookings_per_day:parseInt(I.value.max_bookings_per_day)||10,status:"upcoming",is_active:!0};if(I.value.date&&I.value.date.trim()&&(G.date=I.value.date),I.value.startTime&&I.value.startTime.trim()&&(G.start_time=I.value.startTime),I.value.endTime&&I.value.endTime.trim()&&(G.end_time=I.value.endTime),console.log("Base payload:",G),a.value){const U=a.value.id||a.value.ID;console.log("Updating seva ID:",U);const Z=Object.fromEntries(Object.entries(G).filter(([pe,be])=>be!=null&&be!==""));console.log("Final update payload:",Z);const ye=await nt.updateSeva(U,Z);if(ye&&ye.success)await Promise.all([ge(),ue()]),P(`Seva "${I.value.name}" updated successfully`,"success"),q();else{console.error("Update failed:",ye);const pe=(ye==null?void 0:ye.message)||(ye==null?void 0:ye.error)||"Failed to update seva";P(pe,"error")}}else{console.log("Creating new seva"),G.entity_id=parseInt(s),console.log("Final create payload:",G);const U=await nt.createSeva(G);if(U&&U.success)await Promise.all([ge(),ue()]),P(`Seva "${I.value.name}" created successfully`,"success"),q();else if(console.error("Create failed:",U),U!=null&&U.errors&&Object.keys(U.errors).length>0){const Z=Object.keys(U.errors)[0],ye=U.errors[Z];P(`Validation error: ${Z} - ${ye}`,"error")}else{const Z=(U==null?void 0:U.message)||(U==null?void 0:U.error)||"Failed to create seva";P(Z,"error")}}}catch(G){if(console.error("Error saving seva:",G),G!=null&&G.response){const U=G.response.status,Z=G.response.data;console.error("API Error Response:",Z);let ye=`Error (${U})`;Z!=null&&Z.message?ye+=`: ${Z.message}`:Z!=null&&Z.error?ye+=`: ${Z.error}`:ye+=": Failed to save seva",P(ye,"error")}else G!=null&&G.message?P(`Error: ${G.message}`,"error"):P("Failed to save seva. Please try again.","error")}finally{r.value=!1}},K=G=>{console.log("Viewing booking details:",G),l.value=G},q=()=>{i.value=!1,a.value=null,I.value={name:"",type:"",description:"",price:0,duration:30,date:"",startTime:"",endTime:"",max_bookings_per_day:10,is_active:!0}},le=()=>{D.value="",C.value="",B.value="",_.value=""},se=()=>{T.value="",S.value="",k.value=""};return Ee(()=>{console.log("SevaManagement component mounted for entity:",s),ge(),ue()}),(G,U)=>(m(),f("div",tE,[e("div",oE,[e("div",sE,[e("div",nE,[U[25]||(U[25]=e("div",null,[e("h1",{class:"text-2xl font-bold text-gray-900"},"Seva Management"),e("p",{class:"mt-1 text-sm text-gray-500"}," Manage seva bookings, approvals, and scheduling ")],-1)),e("div",rE,[e("div",aE,[e("button",{onClick:U[0]||(U[0]=Z=>p.value="bookings"),class:ie([p.value==="bookings"?"bg-white text-indigo-600 shadow-sm":"text-gray-500 hover:text-gray-700","px-4 py-2 text-sm font-medium rounded-md transition-all duration-200"])}," Bookings ",2),e("button",{onClick:U[1]||(U[1]=Z=>p.value="sevas"),class:ie([p.value==="sevas"?"bg-white text-indigo-600 shadow-sm":"text-gray-500 hover:text-gray-700","px-4 py-2 text-sm font-medium rounded-md transition-all duration-200"])}," View Sevas ",2)]),e("button",{onClick:U[2]||(U[2]=Z=>i.value=!0),class:"inline-flex items-center px-4 py-2.5 bg-indigo-600 text-white text-sm font-medium rounded-lg hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 transition-all duration-200 shadow-sm"},[...U[24]||(U[24]=[e("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),Q(" Create Seva ",-1)])])])])])]),p.value==="bookings"?(m(),f("div",iE,[e("div",lE,[e("div",dE,[e("div",uE,[U[27]||(U[27]=e("div",{class:"p-3 bg-indigo-100 rounded-lg"},[e("svg",{class:"w-6 h-6 text-indigo-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})])],-1)),e("div",cE,[U[26]||(U[26]=e("p",{class:"text-sm font-medium text-gray-500"},"Total Bookings",-1)),e("p",pE,y(u.value.length),1)])])]),e("div",mE,[e("div",gE,[U[29]||(U[29]=e("div",{class:"p-3 bg-green-100 rounded-lg"},[e("svg",{class:"w-6 h-6 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1)),e("div",fE,[U[28]||(U[28]=e("p",{class:"text-sm font-medium text-gray-500"},"Approved",-1)),e("p",vE,y(u.value.filter(Z=>E(Z)==="approved").length),1)])])]),e("div",hE,[e("div",yE,[U[31]||(U[31]=e("div",{class:"p-3 bg-yellow-100 rounded-lg"},[e("svg",{class:"w-6 h-6 text-yellow-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1)),e("div",xE,[U[30]||(U[30]=e("p",{class:"text-sm font-medium text-gray-500"},"Pending",-1)),e("p",bE,y(u.value.filter(Z=>E(Z)==="pending").length),1)])])]),e("div",wE,[e("div",kE,[U[33]||(U[33]=e("div",{class:"p-3 bg-red-100 rounded-lg"},[e("svg",{class:"w-6 h-6 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1)),e("div",_E,[U[32]||(U[32]=e("p",{class:"text-sm font-medium text-gray-500"},"Rejected",-1)),e("p",$E,y(u.value.filter(Z=>E(Z)==="rejected").length),1)])])])]),e("div",SE,[e("div",DE,[e("div",null,[U[35]||(U[35]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Search Bookings",-1)),e("div",CE,[de(e("input",{"onUpdate:modelValue":U[3]||(U[3]=Z=>D.value=Z),type:"text",placeholder:"Search by name, devotee, or type...",class:"w-full pl-10 pr-4 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-all duration-200"},null,512),[[xe,D.value]]),U[34]||(U[34]=e("div",{class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},[e("svg",{class:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})])],-1))])]),e("div",null,[U[37]||(U[37]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Status",-1)),de(e("select",{"onUpdate:modelValue":U[4]||(U[4]=Z=>C.value=Z),class:"w-full px-3 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-all duration-200"},[...U[36]||(U[36]=[e("option",{value:""},"All Status",-1),e("option",{value:"pending"},"Pending",-1),e("option",{value:"approved"},"Approved",-1),e("option",{value:"rejected"},"Rejected",-1)])],512),[[Ce,C.value]])]),e("div",null,[U[39]||(U[39]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Date Range",-1)),de(e("select",{"onUpdate:modelValue":U[5]||(U[5]=Z=>_.value=Z),class:"w-full px-3 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-all duration-200"},[...U[38]||(U[38]=[e("option",{value:""},"All Dates",-1),e("option",{value:"today"},"Today",-1),e("option",{value:"week"},"This Week",-1),e("option",{value:"month"},"This Month",-1)])],512),[[Ce,_.value]])]),e("div",null,[U[41]||(U[41]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Seva Type",-1)),de(e("select",{"onUpdate:modelValue":U[6]||(U[6]=Z=>B.value=Z),class:"w-full px-3 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-all duration-200"},[...U[40]||(U[40]=[$e('<option value="" data-v-b30a4077>All Types</option><option value="daily" data-v-b30a4077>Daily Sevas</option><option value="special" data-v-b30a4077>Special Sevas</option><option value="festival" data-v-b30a4077>Festival Sevas</option><option value="personal" data-v-b30a4077>Personal Sevas</option>',5)])],512),[[Ce,B.value]])])]),e("div",TE,[e("div",EE," Showing "+y(J.value.length)+" of "+y(u.value.length)+" bookings ",1),e("button",{onClick:le,class:"text-sm text-indigo-600 hover:text-indigo-700 font-medium transition-colors duration-200"}," Clear Filters ")])]),n.value?(m(),f("div",AE,[...U[42]||(U[42]=[e("svg",{class:"animate-spin h-8 w-8 text-indigo-600",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1)])])):(m(),f("div",IE,[J.value.length>0?(m(),f("div",ME,[e("table",RE,[U[46]||(U[46]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Booking Details "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Devotee "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Date & Time "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Status "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Actions ")])],-1)),e("tbody",PE,[(m(!0),f(he,null,ke(J.value,Z=>(m(),f("tr",{key:x(Z),class:"hover:bg-gray-50 transition-colors duration-150"},[e("td",jE,[e("div",NE,y(ee(Z)),1),e("div",LE,y(oe(Z)),1),O(Z)?(m(),f("div",BE,y(O(Z)),1)):Y("",!0)]),e("td",VE,[e("div",UE,y(M(Z)),1),e("div",FE,y(X(Z)),1)]),e("td",OE,[e("div",zE,y(ae(Z)),1),e("div",HE,y(H(Z)),1)]),e("td",qE,[e("span",{class:ie([me(E(Z)),"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium"])},[e("span",{class:ie([De(E(Z)),"w-1.5 h-1.5 rounded-full mr-1.5"])},null,2),Q(" "+y(E(Z).charAt(0).toUpperCase()+E(Z).slice(1)),1)],2)]),e("td",GE,[e("div",WE,[e("button",{onClick:ye=>K(Z),class:"text-indigo-600 hover:text-indigo-900 transition-colors duration-150",title:"View Details"},[...U[43]||(U[43]=[e("svg",{class:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})],-1)])],8,JE),E(Z)==="pending"?(m(),f(he,{key:0},[e("button",{onClick:ye=>$(Z),class:"text-green-600 hover:text-green-900 transition-colors duration-150",title:"Approve"},[...U[44]||(U[44]=[e("svg",{class:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})],-1)])],8,YE),e("button",{onClick:ye=>w(Z),class:"text-red-600 hover:text-red-900 transition-colors duration-150",title:"Reject"},[...U[45]||(U[45]=[e("svg",{class:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])],8,KE)],64)):Y("",!0)])])]))),128))])])])):Y("",!0),J.value.length===0?(m(),f("div",XE,[U[48]||(U[48]=e("svg",{class:"mx-auto h-12 w-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})],-1)),U[49]||(U[49]=e("h3",{class:"mt-2 text-sm font-medium text-gray-900"},"No bookings found",-1)),U[50]||(U[50]=e("p",{class:"mt-1 text-sm text-gray-500"},"Get started by creating a new seva.",-1)),e("div",ZE,[e("button",{onClick:U[7]||(U[7]=Z=>i.value=!0),class:"inline-flex items-center px-4 py-2.5 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 transition-all duration-200 shadow-sm"},[...U[47]||(U[47]=[e("svg",{class:"h-4 w-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),Q(" Add New Seva ",-1)])])])])):Y("",!0)]))])):Y("",!0),p.value==="sevas"?(m(),f("div",QE,[e("div",eA,[e("div",tA,[e("div",oA,[U[52]||(U[52]=e("div",{class:"p-3 bg-purple-100 rounded-lg"},[e("svg",{class:"w-6 h-6 text-purple-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 11H5m14-5a2 2 0 00-2-2H7a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2V6z"})])],-1)),e("div",sA,[U[51]||(U[51]=e("p",{class:"text-sm font-medium text-gray-500"},"Total Sevas",-1)),e("p",nA,y(g.value.length),1)])])]),e("div",rA,[e("div",aA,[U[54]||(U[54]=e("div",{class:"p-3 bg-green-100 rounded-lg"},[e("svg",{class:"w-6 h-6 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1)),e("div",iA,[U[53]||(U[53]=e("p",{class:"text-sm font-medium text-gray-500"},"Active Sevas",-1)),e("p",lA,y(g.value.filter(Z=>Z.is_active||Z.status==="active").length),1)])])]),e("div",dA,[e("div",uA,[U[56]||(U[56]=e("div",{class:"p-3 bg-blue-100 rounded-lg"},[e("svg",{class:"w-6 h-6 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"})])],-1)),e("div",cA,[U[55]||(U[55]=e("p",{class:"text-sm font-medium text-gray-500"},"Daily Sevas",-1)),e("p",pA,y(g.value.filter(Z=>(Z.seva_type||Z.type)==="daily").length),1)])])]),e("div",mA,[e("div",gA,[U[58]||(U[58]=e("div",{class:"p-3 bg-yellow-100 rounded-lg"},[e("svg",{class:"w-6 h-6 text-yellow-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11.049 2.927c.3-.921 1.603-.921 1.902 0l1.519 4.674a1 1 0 00.95.69h4.915c.969 0 1.371 1.24.588 1.81l-3.976 2.888a1 1 0 00-.363 1.118l1.518 4.674c.3.922-.755 1.688-1.538 1.118l-3.976-2.888a1 1 0 00-1.176 0l-3.976 2.888c-.783.57-1.838-.197-1.538-1.118l1.518-4.674a1 1 0 00-.363-1.118l-3.976-2.888c-.784-.57-.38-1.81.588-1.81h4.914a1 1 0 00.951-.69l1.519-4.674z"})])],-1)),e("div",fA,[U[57]||(U[57]=e("p",{class:"text-sm font-medium text-gray-500"},"Special Sevas",-1)),e("p",vA,y(g.value.filter(Z=>(Z.seva_type||Z.type)==="special").length),1)])])])]),e("div",hA,[e("div",yA,[e("div",null,[U[60]||(U[60]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Search Sevas",-1)),e("div",xA,[de(e("input",{"onUpdate:modelValue":U[8]||(U[8]=Z=>T.value=Z),type:"text",placeholder:"Search by name or description...",class:"w-full pl-10 pr-4 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-all duration-200"},null,512),[[xe,T.value]]),U[59]||(U[59]=e("div",{class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},[e("svg",{class:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})])],-1))])]),e("div",null,[U[62]||(U[62]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Seva Type",-1)),de(e("select",{"onUpdate:modelValue":U[9]||(U[9]=Z=>S.value=Z),class:"w-full px-3 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-all duration-200"},[...U[61]||(U[61]=[$e('<option value="" data-v-b30a4077>All Types</option><option value="daily" data-v-b30a4077>Daily</option><option value="special" data-v-b30a4077>Special</option><option value="festival" data-v-b30a4077>Festival</option><option value="personal" data-v-b30a4077>Personal</option>',5)])],512),[[Ce,S.value]])]),e("div",null,[U[64]||(U[64]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Status",-1)),de(e("select",{"onUpdate:modelValue":U[10]||(U[10]=Z=>k.value=Z),class:"w-full px-3 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-all duration-200"},[...U[63]||(U[63]=[e("option",{value:""},"All Status",-1),e("option",{value:"active"},"Active",-1),e("option",{value:"inactive"},"Inactive",-1)])],512),[[Ce,k.value]])])]),e("div",bA,[e("div",wA,"Showing "+y(z.value.length)+" of "+y(g.value.length)+" sevas",1),e("button",{onClick:se,class:"text-sm text-indigo-600 hover:text-indigo-700 font-medium transition-colors duration-200"},"Clear Filters")])]),v.value?(m(),f("div",kA,[...U[65]||(U[65]=[e("svg",{class:"animate-spin h-8 w-8 text-indigo-600",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1)])])):(m(),f("div",_A,[z.value.length>0?(m(),f("div",$A,[e("table",SA,[U[68]||(U[68]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Seva Details"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Type & Price"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Schedule"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Status"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Actions")])],-1)),e("tbody",DA,[(m(!0),f(he,null,ke(z.value,Z=>(m(),f("tr",{key:Z.id||Z.ID,class:"hover:bg-gray-50 transition-colors duration-150"},[e("td",CA,[e("div",TA,y(Z.name||Z.Name),1),e("div",EA,y(Z.description||Z.Description||"No description"),1)]),e("td",AA,[e("div",IA,[e("span",MA,y((Z.seva_type||Z.type||"Unknown").charAt(0).toUpperCase()+(Z.seva_type||Z.type||"Unknown").slice(1)),1)]),e("div",RA,""+y(Z.price||"0"),1)]),e("td",PA,[e("div",jA,y(W(Z.date)),1),e("div",NA,y(Z.start_time&&Z.end_time?`${we(Z.start_time)} - ${we(Z.end_time)}`:"No time set"),1),Z.duration?(m(),f("div",LA,"Duration: "+y(Z.duration)+"min",1)):Y("",!0)]),e("td",BA,[e("span",{class:ie([Z.is_active||Z.status==="active"?"bg-green-100 text-green-800":"bg-red-100 text-red-800","inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium"])},[e("span",{class:ie([Z.is_active||Z.status==="active"?"bg-green-400":"bg-red-400","w-1.5 h-1.5 rounded-full mr-1.5"])},null,2),Q(" "+y(Z.is_active||Z.status==="active"?"Active":"Inactive"),1)],2)]),e("td",VA,[e("div",UA,[e("button",{onClick:ye=>R(Z),class:"text-blue-600 hover:text-blue-900 transition-colors duration-150",title:"Edit Seva"},[...U[66]||(U[66]=[e("svg",{class:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})],-1)])],8,FA),e("button",{onClick:ye=>A(Z),class:"text-red-600 hover:text-red-900 transition-colors duration-150",title:"Delete Seva"},[...U[67]||(U[67]=[e("svg",{class:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)])],8,OA)])])]))),128))])])])):(m(),f("div",zA,[...U[69]||(U[69]=[e("svg",{class:"mx-auto h-12 w-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 11H5m14-5a2 2 0 00-2-2H7a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2V6z"})],-1),e("h3",{class:"mt-2 text-sm font-medium text-gray-900"},"No sevas found",-1),e("p",{class:"mt-1 text-sm text-gray-500"},"Get started by creating a new seva.",-1)])]))]))])):Y("",!0),h.value?(m(),f("div",HA,[e("div",qA,[e("div",GA,[U[71]||(U[71]=e("div",{class:"flex items-center justify-center w-12 h-12 mx-auto mb-4 bg-red-100 rounded-full"},[e("svg",{class:"w-6 h-6 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.082 16.5c-.77.833.192 2.5 1.732 2.5z"})])],-1)),U[72]||(U[72]=e("h3",{class:"text-lg font-medium text-gray-900 text-center mb-2"},"Delete Seva",-1)),e("p",WA,' Are you sure you want to delete "'+y(h.value.name||h.value.Name)+'"? This action cannot be undone. ',1),e("div",JA,[e("button",{onClick:U[11]||(U[11]=Z=>h.value=null),class:"flex-1 px-4 py-2.5 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-all duration-200"},"Cancel"),e("button",{onClick:j,disabled:r.value,class:"flex-1 px-4 py-2.5 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-all duration-200 shadow-sm"},[r.value?(m(),f("span",KA,[...U[70]||(U[70]=[e("svg",{class:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),Q(" Deleting... ",-1)])])):(m(),f("span",XA,"Delete"))],8,YA)])])])])):Y("",!0),i.value||a.value?(m(),f("div",ZA,[e("div",QA,[e("div",eI,[e("h2",tI,y(a.value?"Edit Seva":"Create New Seva"),1),e("button",{onClick:q,class:"p-2 hover:bg-gray-100 rounded-lg transition-colors duration-200"},[...U[73]||(U[73]=[e("svg",{class:"w-5 h-5 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),e("div",oI,[e("div",sI,[e("div",nI,[U[79]||(U[79]=e("h3",{class:"text-md font-semibold text-gray-700 mb-3"},"Basic Details",-1)),e("div",rI,[e("div",null,[U[74]||(U[74]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Seva Name*",-1)),de(e("input",{"onUpdate:modelValue":U[12]||(U[12]=Z=>I.value.name=Z),type:"text",class:"w-full px-3 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-all duration-200",placeholder:"Enter seva name"},null,512),[[xe,I.value.name]])]),e("div",null,[U[76]||(U[76]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Seva Type*",-1)),de(e("select",{"onUpdate:modelValue":U[13]||(U[13]=Z=>I.value.type=Z),class:"w-full px-3 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-all duration-200"},[...U[75]||(U[75]=[$e('<option value="" disabled data-v-b30a4077>Select Seva Type</option><option value="daily" data-v-b30a4077>Daily Seva</option><option value="special" data-v-b30a4077>Special Seva</option><option value="festival" data-v-b30a4077>Festival Seva</option><option value="personal" data-v-b30a4077>Personal Seva</option>',5)])],512),[[Ce,I.value.type]])]),e("div",null,[U[77]||(U[77]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Description*",-1)),de(e("textarea",{"onUpdate:modelValue":U[14]||(U[14]=Z=>I.value.description=Z),rows:"3",class:"w-full px-3 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-all duration-200",placeholder:"Add any additional details about this seva"},null,512),[[xe,I.value.description]])]),e("div",null,[U[78]||(U[78]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Price ()*",-1)),de(e("input",{"onUpdate:modelValue":U[15]||(U[15]=Z=>I.value.price=Z),type:"number",min:"0",class:"w-full px-3 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-all duration-200",placeholder:"Enter amount in "},null,512),[[xe,I.value.price]])])])]),e("div",aI,[U[85]||(U[85]=e("h3",{class:"text-md font-semibold text-gray-700 mb-3"},"Scheduling",-1)),e("div",iI,[e("div",null,[U[80]||(U[80]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Seva Date*",-1)),de(e("input",{"onUpdate:modelValue":U[16]||(U[16]=Z=>I.value.date=Z),type:"date",class:"w-full px-3 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-all duration-200"},null,512),[[xe,I.value.date]])]),e("div",lI,[e("div",null,[U[81]||(U[81]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Start Time",-1)),de(e("input",{"onUpdate:modelValue":U[17]||(U[17]=Z=>I.value.startTime=Z),type:"time",class:"w-full px-3 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-all duration-200"},null,512),[[xe,I.value.startTime]])]),e("div",null,[U[82]||(U[82]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"End Time",-1)),de(e("input",{"onUpdate:modelValue":U[18]||(U[18]=Z=>I.value.endTime=Z),type:"time",class:"w-full px-3 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-all duration-200"},null,512),[[xe,I.value.endTime]])])]),e("div",null,[U[83]||(U[83]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Duration (minutes)",-1)),de(e("input",{"onUpdate:modelValue":U[19]||(U[19]=Z=>I.value.duration=Z),type:"number",min:"1",class:"w-full px-3 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-all duration-200",placeholder:"e.g. 30, 60, 120"},null,512),[[xe,I.value.duration]])]),e("div",null,[U[84]||(U[84]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Maximum Bookings Per Day",-1)),de(e("input",{"onUpdate:modelValue":U[20]||(U[20]=Z=>I.value.max_bookings_per_day=Z),type:"number",min:"1",class:"w-full px-3 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-all duration-200",placeholder:"Enter maximum slots available per day"},null,512),[[xe,I.value.max_bookings_per_day]])])])])]),e("div",dI,[e("button",{type:"button",onClick:q,class:"px-4 py-2.5 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-all duration-200"}," Cancel "),e("button",{type:"button",onClick:ne,disabled:r.value,class:"px-4 py-2.5 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-all duration-200 shadow-sm"},[r.value?(m(),f("span",cI,[...U[86]||(U[86]=[e("svg",{class:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),Q(" Processing... ",-1)])])):(m(),f("span",pI,y(a.value?"Update Seva":"Create Seva"),1))],8,uI)])])])])):Y("",!0),l.value?(m(),f("div",mI,[e("div",gI,[e("div",fI,[U[88]||(U[88]=e("h2",{class:"text-xl font-bold text-gray-900"},"Booking Details",-1)),e("button",{onClick:U[21]||(U[21]=Z=>l.value=null),class:"p-2 hover:bg-gray-100 rounded-lg transition-colors duration-200"},[...U[87]||(U[87]=[e("svg",{class:"w-5 h-5 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),e("div",vI,[e("div",hI,[e("div",yI,[e("h3",xI,y(ee(l.value)),1),e("span",{class:ie([me(E(l.value)),"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium"])},[e("span",{class:ie([De(E(l.value)),"w-1.5 h-1.5 rounded-full mr-1.5"])},null,2),Q(" "+y(E(l.value).charAt(0).toUpperCase()+E(l.value).slice(1)),1)],2)]),e("div",bI,[e("div",null,[U[89]||(U[89]=e("p",{class:"text-sm font-medium text-gray-500"},"Seva Type",-1)),e("p",wI,y(oe(l.value)),1)]),e("div",null,[U[90]||(U[90]=e("p",{class:"text-sm font-medium text-gray-500"},"Devotee",-1)),e("p",kI,y(M(l.value)),1)]),e("div",null,[U[91]||(U[91]=e("p",{class:"text-sm font-medium text-gray-500"},"Contact",-1)),e("p",_I,y(X(l.value)),1)]),e("div",null,[U[92]||(U[92]=e("p",{class:"text-sm font-medium text-gray-500"},"Date",-1)),e("p",$I,y(ae(l.value)),1)]),e("div",null,[U[93]||(U[93]=e("p",{class:"text-sm font-medium text-gray-500"},"Time",-1)),e("p",SI,y(H(l.value)),1)]),e("div",null,[U[94]||(U[94]=e("p",{class:"text-sm font-medium text-gray-500"},"Booking ID",-1)),e("p",DI,y(x(l.value)||"Not available"),1)]),e("div",null,[U[95]||(U[95]=e("p",{class:"text-sm font-medium text-gray-500"},"Booking Date",-1)),e("p",CI,y(W(L(l.value))),1)])]),O(l.value)?(m(),f("div",TI,[U[96]||(U[96]=e("p",{class:"text-sm font-medium text-gray-500"},"Special Requests",-1)),e("p",EI,y(O(l.value)),1)])):Y("",!0)]),E(l.value)==="pending"?(m(),f("div",AI,[e("button",{onClick:U[22]||(U[22]=Z=>w(l.value)),class:"px-4 py-2.5 bg-white border border-red-300 text-red-700 rounded-lg hover:bg-red-50 transition-all duration-200"}," Reject Booking "),e("button",{onClick:U[23]||(U[23]=Z=>$(l.value)),class:"px-4 py-2.5 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-all duration-200 shadow-sm"}," Approve Booking ")])):Y("",!0)])])])):Y("",!0),(m(!0),f(he,null,ke(d.value,Z=>(m(),f("div",{key:Z.id,class:ie(["fixed top-4 right-4 z-50 transform transition-all duration-300",Z.show?"translate-x-0 opacity-100":"translate-x-full opacity-0"])},[e("div",{class:ie(["px-4 py-3 rounded-lg shadow-lg border-l-4 max-w-sm",{"bg-green-50 border-green-400 text-green-800":Z.type==="success","bg-red-50 border-red-400 text-red-800":Z.type==="error","bg-yellow-50 border-yellow-400 text-yellow-800":Z.type==="warning","bg-blue-50 border-blue-400 text-blue-800":Z.type==="info"}])},[e("div",II,[e("div",MI,[Z.type==="success"?(m(),f("svg",RI,[...U[97]||(U[97]=[e("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z","clip-rule":"evenodd"},null,-1)])])):Z.type==="error"?(m(),f("svg",PI,[...U[98]||(U[98]=[e("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"},null,-1)])])):Y("",!0)]),e("div",jI,[e("p",NI,y(Z.message),1)])])],2)],2))),128))]))}},BI=Qe(LI,[["__scopeId","data-v-b30a4077"]]),dr=Vo("donation",()=>{const t=V([]),o=V([]),s=V(!1),n=V(!1),r=V(null),i=V(null),a=V({currentPage:1,totalPages:1,totalItems:0,itemsPerPage:10,hasNext:!1,hasPrevious:!1}),l=V({dateRange:"all",minAmount:null,maxAmount:null,donationType:"all",paymentMethod:"all",devoteeId:null,status:"all",search:"",startDate:null,endDate:null}),d=V({totalAmount:0,averageAmount:0,thisMonth:0,totalDonors:0,completed:0,pending:0,failed:0,totalCount:0}),c=V([]),u=V({trends:[],byType:[],byMethod:[]}),p=M=>({id:M.id||M.ID||Math.random(),amount:M.amount||M.Amount||0,donation_type:M.donation_type||M.DonationType||M.type,donationType:M.donation_type||M.DonationType||M.type,type:M.donation_type||M.DonationType||M.type,method:M.method||M.Method||"online",paymentMethod:M.paymentMethod||M.method||M.Method||"online",status:M.status||M.Status||"pending",date:M.donated_at||M.DonatedAt||M.date||M.donation_date,donation_date:M.donated_at||M.DonatedAt||M.donation_date,donated_at:M.donated_at||M.DonatedAt,created_at:M.created_at||M.CreatedAt,updated_at:M.updated_at||M.UpdatedAt,note:M.note||M.Note||M.purpose||"",purpose:M.note||M.Note||M.purpose||"",userName:M.userName||M.UserName||M.username||"",userEmail:M.userEmail||M.UserEmail||M.email||"",donorName:M.donorName||M.DonorName||"",donorEmail:M.donorEmail||M.DonorEmail||"",entityName:M.entityName||M.EntityName||"",devotee_name:M.devotee_name||M.DevoteeName,payment_id:M.payment_id||M.PaymentID||M.paymentId,order_id:M.order_id||M.OrderID||M.transactionId,transactionId:M.transactionId||M.TransactionId||M.txn_id}),v=te(()=>({total:d.value.totalCount||0,completed:d.value.completed||0,pending:d.value.pending||0,failed:d.value.failed||0,totalAmount:d.value.totalAmount||0,averageAmount:d.value.averageAmount||0,thisMonth:d.value.thisMonth||0,totalDonors:d.value.totalDonors||0})),g=te(()=>o.value&&o.value.length>0?o.value.slice(0,5):t.value.filter(M=>["success","completed","SUCCESS","COMPLETED"].includes((M.status||"").toUpperCase())).sort((M,X)=>{const ee=new Date(M.donated_at||M.date||M.donation_date||0);return new Date(X.donated_at||X.date||X.donation_date||0)-ee}).slice(0,5));async function h(){var M;n.value=!0,r.value=null;try{const X=await ct.getMyRecentDonations();return Array.isArray(X)?o.value=X.map(p):o.value=[],o.value}catch(X){if(r.value=X.message||"Error fetching recent donations",o.value=[],((M=X.response)==null?void 0:M.status)!==404)throw X;return[]}finally{n.value=!1}}async function D(){var M;s.value=!0,r.value=null;try{const X=await ct.getMyDonations();let ee=[];return Array.isArray(X)?ee=X:X&&X.data&&Array.isArray(X.data)?(ee=X.data,X.pagination?a.value={...a.value,...X.pagination}:X.total!==void 0&&(a.value.totalItems=X.total)):X&&X.success&&Array.isArray(X.data)?(ee=X.data,a.value.totalItems=X.total||X.data.length):ee=[],t.value=ee.map(p),a.value.totalItems||(a.value.totalItems=t.value.length),t.value}catch(X){if(r.value=X.message||"Error fetching donations",t.value=[],((M=X.response)==null?void 0:M.status)!==404)throw X;return[]}finally{s.value=!1}}async function C(){s.value=!0,r.value=null;try{const M={page:a.value.currentPage,limit:a.value.itemsPerPage,...l.value.status!=="all"&&{status:l.value.status},...l.value.donationType!=="all"&&{type:l.value.donationType},...l.value.paymentMethod!=="all"&&{method:l.value.paymentMethod},...l.value.search&&{search:l.value.search.trim()},...l.value.minAmount!=null&&l.value.minAmount!==""&&{min:l.value.minAmount},...l.value.maxAmount!=null&&l.value.maxAmount!==""&&{max:l.value.maxAmount},...l.value.dateRange!=="all"&&{dateRange:l.value.dateRange},...l.value.startDate&&{from:l.value.startDate},...l.value.endDate&&{to:l.value.endDate},...l.value.devoteeId&&{devoteeId:l.value.devoteeId}},X=await ct.getDonations(M);if(X&&typeof X=="object"){const ee=X.data||X.donations||[];t.value=ee.map(p),a.value={currentPage:X.currentPage||X.page||a.value.currentPage,totalPages:X.totalPages||Math.ceil((X.total||0)/a.value.itemsPerPage),totalItems:X.total||X.totalItems||0,itemsPerPage:X.limit||X.perPage||a.value.itemsPerPage,hasNext:X.hasNext||a.value.currentPage<a.value.totalPages,hasPrevious:X.hasPrevious||a.value.currentPage>1},X.stats&&(d.value={...d.value,...X.stats})}return X}catch(M){throw r.value=M.message||"Error fetching donations",t.value=[],M}finally{s.value=!1}}async function B(){s.value=!0,r.value=null;try{const M=await ct.getDashboard(),X=M.data||M;return d.value={totalAmount:X.totalAmount||X.TotalAmount||0,averageAmount:X.averageAmount||X.AverageAmount||0,thisMonth:X.thisMonth||X.ThisMonth||0,totalDonors:X.totalDonors||X.TotalDonors||X.uniqueDonors||0,completed:X.completed||X.Completed||X.success||0,pending:X.pending||X.Pending||0,failed:X.failed||X.Failed||0,totalCount:X.totalCount||X.TotalCount||X.total||0},M}catch(M){throw r.value=M.message||"Error fetching dashboard",d.value={totalAmount:0,averageAmount:0,thisMonth:0,totalDonors:0,completed:0,pending:0,failed:0,totalCount:0},M}finally{s.value=!1}}async function _(M=5){try{const X=await ct.getTopDonors(M);return c.value=X.data||X||[],X}catch(X){throw r.value=X.message||"Error fetching top donors",c.value=[],X}}async function T(M=30){try{const X=await ct.getAnalytics(M);return u.value=X.data||X||{trends:[],byType:[],byMethod:[]},X}catch(X){throw r.value=X.message||"Error fetching analytics",u.value={trends:[],byType:[],byMethod:[]},X}}async function S(M){s.value=!0,r.value=null;try{return await ct.createDonation(M)}catch(X){throw r.value=X.message||"Error creating donation",X}finally{s.value=!1}}async function k(M){s.value=!0,r.value=null;try{const X=await ct.verifyDonation(M);return await Promise.all([D(),h()]),X}catch(X){throw r.value=X.message||"Error verifying donation",X}finally{s.value=!1}}async function b(M={},X="csv"){s.value=!0,r.value=null;try{return await ct.exportDonations(M,X)}catch(ee){throw r.value=ee.message||"Error exporting donations",ee}finally{s.value=!1}}function x(M){l.value={...l.value,...M},M.page||(a.value.currentPage=1)}function F(M){a.value.currentPage=M}function E(M){a.value.itemsPerPage=M,a.value.currentPage=1}function O(){l.value={dateRange:"all",minAmount:null,maxAmount:null,donationType:"all",paymentMethod:"all",devoteeId:null,status:"all",search:"",startDate:null,endDate:null},a.value.currentPage=1}function N(M){i.value=M}function L(){t.value=[],o.value=[],s.value=!1,n.value=!1,r.value=null,i.value=null,O(),a.value={currentPage:1,totalPages:1,totalItems:0,itemsPerPage:10,hasNext:!1,hasPrevious:!1},d.value={totalAmount:0,averageAmount:0,thisMonth:0,totalDonors:0,completed:0,pending:0,failed:0,totalCount:0},c.value=[],u.value={trends:[],byType:[],byMethod:[]}}return{donations:t,recentDonationsData:o,loading:s,loadingRecent:n,error:r,selectedDonation:i,filters:l,pagination:a,dashboardData:d,topDonors:c,analytics:u,donationStats:v,recentDonations:g,fetchRecentDonations:h,fetchMyDonations:D,fetchDonations:C,fetchDashboard:B,fetchTopDonors:_,fetchAnalytics:T,createDonation:S,verifyDonation:k,exportDonations:b,setFilters:x,setPage:F,setItemsPerPage:E,resetFilters:O,setSelectedDonation:N,resetStore:L}}),VI={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-6"},UI={class:"bg-gradient-to-r from-blue-500 to-blue-600 rounded-xl p-6 text-white"},FI={class:"flex items-center justify-between"},OI={class:"text-3xl font-bold"},zI={class:"text-blue-200 text-xs mt-1"},HI={class:"bg-gradient-to-r from-green-500 to-green-600 rounded-xl p-6 text-white"},qI={class:"flex items-center justify-between"},GI={class:"text-3xl font-bold"},WI={class:"bg-gradient-to-r from-purple-500 to-purple-600 rounded-xl p-6 text-white"},JI={class:"flex items-center justify-between"},YI={class:"text-3xl font-bold"},KI={class:"bg-gradient-to-r from-orange-500 to-orange-600 rounded-xl p-6 text-white"},XI={class:"flex items-center justify-between"},ZI={class:"text-3xl font-bold"},QI={class:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6"},eM={class:"bg-white rounded-lg shadow-sm border border-gray-200 p-4"},tM={class:"flex items-center"},oM={class:"ml-4"},sM={class:"text-2xl font-bold text-gray-900"},nM={class:"bg-white rounded-lg shadow-sm border border-gray-200 p-4"},rM={class:"flex items-center"},aM={class:"ml-4"},iM={class:"text-2xl font-bold text-gray-900"},lM={class:"bg-white rounded-lg shadow-sm border border-gray-200 p-4"},dM={class:"flex items-center"},uM={class:"ml-4"},cM={class:"text-2xl font-bold text-gray-900"},pM={__name:"DonationStats",setup(t){const o=dr(),s=te(()=>o.donationStats),n=r=>new Intl.NumberFormat("en-IN").format(r||0);return(r,i)=>(m(),f(he,null,[e("div",VI,[e("div",UI,[e("div",FI,[e("div",null,[i[0]||(i[0]=e("p",{class:"text-blue-200 text-sm font-medium"},"Total Amount",-1)),e("p",OI,""+y(n(s.value.totalAmount||0)),1),e("p",zI,y(s.value.totalCount||0)+" donations",1)]),i[1]||(i[1]=e("div",{class:"bg-white bg-opacity-20 rounded-lg p-3"},[e("svg",{class:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3-.895 3-2-1.343-2-3-2z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 14v8"})])],-1))])]),e("div",HI,[e("div",qI,[e("div",null,[i[2]||(i[2]=e("p",{class:"text-green-200 text-sm font-medium"},"Average Donation",-1)),e("p",GI,""+y(n(s.value.averageAmount||0)),1),i[3]||(i[3]=e("p",{class:"text-green-200 text-xs mt-1"},"per transaction",-1))]),i[4]||(i[4]=e("div",{class:"bg-white bg-opacity-20 rounded-lg p-3"},[e("svg",{class:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2-2V7a2 2 0 012-2h2a2 2 0 002 2v2a2 2 0 002 2h2a2 2 0 002-2V7a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 00-2 2h-2a2 2 0 00-2 2v6"})])],-1))])]),e("div",WI,[e("div",JI,[e("div",null,[i[5]||(i[5]=e("p",{class:"text-purple-200 text-sm font-medium"},"This Month",-1)),e("p",YI,""+y(n(s.value.thisMonth||0)),1),i[6]||(i[6]=e("p",{class:"text-purple-200 text-xs mt-1"},"current month",-1))]),i[7]||(i[7]=e("div",{class:"bg-white bg-opacity-20 rounded-lg p-3"},[e("svg",{class:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2-2z"})])],-1))])]),e("div",KI,[e("div",XI,[e("div",null,[i[8]||(i[8]=e("p",{class:"text-orange-200 text-sm font-medium"},"Total Donors",-1)),e("p",ZI,y(s.value.totalDonors||0),1),i[9]||(i[9]=e("p",{class:"text-orange-200 text-xs mt-1"},"unique devotees",-1))]),i[10]||(i[10]=e("div",{class:"bg-white bg-opacity-20 rounded-lg p-3"},[e("svg",{class:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-1.657-1.343-3-3-3H9c-1.657 0-3 1.343-3 3v2m4-10a3 3 0 11-6 0 3 3 0 016 0z"})])],-1))])])]),e("div",QI,[e("div",eM,[e("div",tM,[i[12]||(i[12]=e("div",{class:"flex-shrink-0"},[e("div",{class:"w-10 h-10 bg-green-100 rounded-full flex items-center justify-center"},[e("svg",{class:"w-6 h-6 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})])])],-1)),e("div",oM,[i[11]||(i[11]=e("p",{class:"text-sm font-medium text-gray-600"},"Successful",-1)),e("p",sM,y(s.value.completedCount||0),1)])])]),e("div",nM,[e("div",rM,[i[14]||(i[14]=e("div",{class:"flex-shrink-0"},[e("div",{class:"w-10 h-10 bg-yellow-100 rounded-full flex items-center justify-center"},[e("svg",{class:"w-6 h-6 text-yellow-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})])])],-1)),e("div",aM,[i[13]||(i[13]=e("p",{class:"text-sm font-medium text-gray-600"},"Pending",-1)),e("p",iM,y(s.value.pendingCount||0),1)])])]),e("div",lM,[e("div",dM,[i[16]||(i[16]=e("div",{class:"flex-shrink-0"},[e("div",{class:"w-10 h-10 bg-red-100 rounded-full flex items-center justify-center"},[e("svg",{class:"w-6 h-6 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})])])],-1)),e("div",uM,[i[15]||(i[15]=e("p",{class:"text-sm font-medium text-gray-600"},"Failed",-1)),e("p",cM,y(s.value.failedCount||0),1)])])])])],64))}},mM={class:"bg-white rounded-xl shadow-lg p-6"},gM={class:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-6"},fM={class:"flex flex-col sm:flex-row gap-3"},vM=["disabled"],hM={key:0,class:"animate-spin -ml-1 mr-3 h-5 w-5 text-white inline",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},yM={class:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6 p-4 bg-gray-50 rounded-lg"},xM={key:0,class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 mb-6"},bM={class:"bg-gradient-to-r from-indigo-500 to-indigo-600 rounded-xl p-4 text-white"},wM={class:"flex items-center justify-between"},kM={class:"text-2xl font-bold text-white"},_M={class:"bg-gradient-to-r from-green-500 to-green-600 rounded-xl p-4 text-white"},$M={class:"flex items-center justify-between"},SM={class:"text-2xl font-bold text-white"},DM={class:"bg-gradient-to-r from-amber-500 to-amber-600 rounded-xl p-4 text-white"},CM={class:"flex items-center justify-between"},TM={class:"text-2xl font-bold text-white"},EM={key:1,class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 mb-6"},AM={class:"mb-6"},IM={class:"relative"},MM={key:0,class:"absolute inset-y-0 right-0 flex items-center pr-3"},RM={class:"overflow-x-auto bg-white border border-gray-200 rounded-lg"},PM={class:"min-w-full divide-y divide-gray-200"},jM={key:0,class:"bg-white divide-y divide-gray-200"},NM={class:"px-6 py-4 whitespace-nowrap"},LM={class:"text-sm font-medium text-gray-900"},BM={class:"text-sm text-gray-500 font-mono"},VM={class:"px-6 py-4"},UM={class:"flex items-center"},FM={class:"flex-shrink-0"},OM={class:"flex items-center justify-center w-10 h-10 rounded-full bg-gradient-to-r from-indigo-400 to-indigo-600 text-white"},zM={class:"text-sm font-medium"},HM={class:"ml-4"},qM={class:"text-sm font-medium text-gray-900"},GM={class:"text-sm text-gray-500"},WM={class:"px-6 py-4 whitespace-nowrap"},JM={class:"px-6 py-4 whitespace-nowrap"},YM={class:"text-sm text-gray-900 capitalize"},KM={class:"px-6 py-4 whitespace-nowrap"},XM={class:"text-lg font-bold text-gray-900"},ZM={class:"px-6 py-4 whitespace-nowrap"},QM={key:1,class:"bg-white divide-y divide-gray-200"},eR={key:2},tR={class:"flex items-center justify-between mt-6 px-4 py-3 bg-gray-50 rounded-lg"},oR={class:"text-sm text-gray-700"},sR={class:"flex items-center space-x-2"},nR=["disabled"],rR={class:"flex space-x-1"},aR=["onClick"],iR=["disabled"],lR={__name:"DonationLedger",setup(t){const o=dr(),s=te(()=>o.loading),n=te(()=>o.donationStats),r=te(()=>o.donations||[]),i=te(()=>o.totalItems||0),a=te(()=>o.totalPages||1),l=V(""),d=V(1),c=V(20),u=V({dateRange:"all",donationType:"all",status:"all",amountRange:"all"});function p(H,J=""){return typeof H=="string"&&H.trim()!==""?H.trim():J}function v(H){return p(H.fullName)||H.donor&&p(H.donor.name)||p(H.userName)||p(H.donorName)||p(H.user_name)||p(H.name)||"Anonymous"}function g(H){return p(H.emailAddress)||H.donor&&p(H.donor.email)||p(H.userEmail)||p(H.donorEmail)||p(H.user_email)||p(H.email)||"N/A"}function h(H){return p(H.transactionId)||p(H.order_id)||p(H.payment_id)||p(H.paymentId)||`DON-${H.id}`||"N/A"}function D(H){return H==="Anonymous"||H==="N/A"?"AN":H.trim().split(/\s+/).map(J=>J[0]).join("").toUpperCase().substring(0,2)}function C(H){return new Intl.NumberFormat("en-IN").format(Math.floor(H||0))}function B(H){if(!H)return"N/A";try{return new Date(H).toLocaleDateString("en-IN",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}catch{return"Invalid Date"}}function _(H){return H?H.charAt(0).toUpperCase()+H.slice(1).toLowerCase():"General"}function T(H){return H?{upi:"UPI",card:"Card",netbanking:"Net Banking",wallet:"Wallet",pending:"Pending"}[H.toLowerCase()]||H:"Online"}function S(H){if(!H)return"Pending";const J=H.toUpperCase();return{SUCCESS:"Success",PENDING:"Pending",FAILED:"Failed",CANCELLED:"Cancelled"}[J]||H.charAt(0).toUpperCase()+H.slice(1).toLowerCase()}function k(H){const J={general:"bg-gray-100 text-gray-800",seva:"bg-green-100 text-green-800",festival:"bg-yellow-100 text-yellow-800",construction:"bg-blue-100 text-blue-800",annadanam:"bg-orange-100 text-orange-800",education:"bg-purple-100 text-purple-800",maintenance:"bg-red-100 text-red-800",event:"bg-pink-100 text-pink-800"};return J[(H||"general").toLowerCase()]||J.general}function b(H){if(!H)return"bg-yellow-100 text-yellow-800";const J=H.toLowerCase(),z={success:"bg-green-100 text-green-800",pending:"bg-yellow-100 text-yellow-800",failed:"bg-red-100 text-red-800",cancelled:"bg-gray-100 text-gray-600"};return z[J]||z.pending}function x(H){if(!H)return"bg-yellow-400";const J=H.toLowerCase(),z={success:"bg-green-400",pending:"bg-yellow-400",failed:"bg-red-400",cancelled:"bg-gray-400"};return z[J]||z.pending}function F(){if(!r.value.length)return"0-0";const H=(d.value-1)*c.value+1,J=Math.min(d.value*c.value,i.value);return`${H}-${J}`}function E(){l.value=""}const O=te(()=>r.value),N=te(()=>{const H=[];let z=Math.max(1,d.value-Math.floor(2.5)),I=Math.min(a.value,z+5-1);I-z+1<5&&(z=Math.max(1,I-5+1));for(let P=z;P<=I;P++)H.push(P);return H}),L=H=>{H<1||H>a.value||H===d.value||(d.value=H,ee())},M=()=>{const H={page:d.value,limit:c.value,search:l.value.trim()};if(u.value.dateRange!=="all"&&(H.dateRange=u.value.dateRange),u.value.donationType!=="all"&&(H.type=u.value.donationType),u.value.status!=="all"&&(H.status=u.value.status),u.value.amountRange!=="all"){const[J,z]=u.value.amountRange.split("-").map(I=>I.replace(/[+,]/g,""));J&&(H.min=parseInt(J)),z&&z!==""&&(H.max=parseInt(z))}return H};let X;Ue([u,l],()=>{clearTimeout(X),X=setTimeout(()=>{d.value=1,ee()},300)},{deep:!0});const ee=async()=>{try{const H=M();o.setFilters(H),await o.fetchDonations()}catch(H){console.error("Error fetching donations:",H)}},oe=async()=>{try{await o.fetchDashboard()}catch(H){console.error("Error fetching donation dashboard:",H)}},ae=async()=>{await Promise.all([oe(),ee()])};return Ee(async()=>{await ae()}),(H,J)=>{var z,I,P;return m(),f("div",mM,[e("div",gM,[J[8]||(J[8]=e("div",null,[e("h2",{class:"text-2xl font-bold text-gray-900 mb-2"},"Donation Ledger"),e("p",{class:"text-gray-600"},"Complete financial record")],-1)),e("div",fM,[e("button",{onClick:ae,disabled:s.value,class:"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 disabled:opacity-50 transition-colors duration-200"},[s.value?(m(),f("svg",hM,[...J[7]||(J[7]=[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)])])):Y("",!0),Q(" "+y(s.value?"Refreshing...":"Refresh"),1)],8,vM)])]),e("div",yM,[e("div",null,[J[10]||(J[10]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Date Range",-1)),de(e("select",{"onUpdate:modelValue":J[0]||(J[0]=W=>u.value.dateRange=W),class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"},[...J[9]||(J[9]=[$e('<option value="all">All Time</option><option value="today">Today</option><option value="week">This Week</option><option value="month">This Month</option><option value="year">This Year</option><option value="custom">Custom Range</option>',6)])],512),[[Ce,u.value.dateRange]])]),e("div",null,[J[12]||(J[12]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Donation Type",-1)),de(e("select",{"onUpdate:modelValue":J[1]||(J[1]=W=>u.value.donationType=W),class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"},[...J[11]||(J[11]=[$e('<option value="all">All Types</option><option value="general">General</option><option value="seva">Seva</option><option value="festival">Festival</option><option value="construction">Construction</option><option value="annadanam">Annadanam</option><option value="education">Education</option><option value="maintenance">Maintenance</option><option value="event">Event</option>',9)])],512),[[Ce,u.value.donationType]])]),e("div",null,[J[14]||(J[14]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Payment Status",-1)),de(e("select",{"onUpdate:modelValue":J[2]||(J[2]=W=>u.value.status=W),class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"},[...J[13]||(J[13]=[e("option",{value:"all"},"All Status",-1),e("option",{value:"success"},"Success",-1),e("option",{value:"pending"},"Pending",-1),e("option",{value:"failed"},"Failed",-1)])],512),[[Ce,u.value.status]])]),e("div",null,[J[16]||(J[16]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Amount Range",-1)),de(e("select",{"onUpdate:modelValue":J[3]||(J[3]=W=>u.value.amountRange=W),class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"},[...J[15]||(J[15]=[$e('<option value="all">All Amounts</option><option value="0-500">0 - 500</option><option value="500-1000">500 - 1,000</option><option value="1000-5000">1,000 - 5,000</option><option value="5000+">5,000+</option>',5)])],512),[[Ce,u.value.amountRange]])])]),s.value?(m(),f("div",EM,[(m(),f(he,null,ke(3,W=>e("div",{key:W,class:"animate-pulse bg-gray-200 h-20 rounded-xl"})),64))])):(m(),f("div",xM,[e("div",bM,[e("div",wM,[e("div",null,[J[17]||(J[17]=e("p",{class:"text-indigo-200 text-sm"},"Total Amount",-1)),e("p",kM,""+y(C(((z=n.value)==null?void 0:z.totalAmount)||0)),1)]),J[18]||(J[18]=e("div",{class:"bg-white bg-opacity-20 rounded-lg p-2"},[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3-.895 3-2-1.343-2-3-2z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8V7m0 1v8m0-8c1.657 0 3 .895 3 2s-1.343 2-3 2-3-.895-3-2 1.343-2 3-2z"})])],-1))])]),e("div",_M,[e("div",$M,[e("div",null,[J[19]||(J[19]=e("p",{class:"text-green-200 text-sm"},"Total Donors",-1)),e("p",SM,y(((I=n.value)==null?void 0:I.totalDonors)||0),1)]),J[20]||(J[20]=e("div",{class:"bg-white bg-opacity-20 rounded-lg p-2"},[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-3.313-2.687-6-6-6s-6 2.687-6 6v2m2-10a4 4 0 118 0 4 4 0 01-8 0z"})])],-1))])]),e("div",DM,[e("div",CM,[e("div",null,[J[21]||(J[21]=e("p",{class:"text-amber-200 text-sm"},"This Month",-1)),e("p",TM,""+y(C(((P=n.value)==null?void 0:P.thisMonth)||0)),1)]),J[22]||(J[22]=e("div",{class:"bg-white bg-opacity-20 rounded-lg p-2"},[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 002 2z"})])],-1))])])])),e("div",AM,[e("div",IM,[J[24]||(J[24]=e("div",{class:"absolute inset-y-0 left-0 flex items-center pl-3 pointer-events-none"},[e("svg",{class:"w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})])],-1)),de(e("input",{"onUpdate:modelValue":J[4]||(J[4]=W=>l.value=W),type:"text",placeholder:"Search by donor name, email, transaction ID...",class:"w-full px-4 py-3 pl-10 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"},null,512),[[xe,l.value]]),l.value?(m(),f("div",MM,[e("button",{onClick:E,class:"text-gray-400 hover:text-gray-600"},[...J[23]||(J[23]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])])):Y("",!0)])]),e("div",RM,[e("table",PM,[J[27]||(J[27]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Date & ID"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Donor Info"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Type"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Method"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Amount"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Status")])],-1)),!s.value&&O.value.length?(m(),f("tbody",jM,[(m(!0),f(he,null,ke(O.value,W=>(m(),f("tr",{key:W.id,class:"hover:bg-gray-50 transition-colors duration-200"},[e("td",NM,[e("div",LM,y(B(W.donatedAt||W.created_at)),1),e("div",BM,"#"+y(h(W)),1)]),e("td",VM,[e("div",UM,[e("div",FM,[e("div",OM,[e("span",zM,y(D(v(W))),1)])]),e("div",HM,[e("div",qM,y(v(W)),1),e("div",GM,y(g(W)),1)])])]),e("td",WM,[e("span",{class:ie([k(W.donationType||W.type),"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium capitalize"])},y(_(W.donationType||W.type)),3)]),e("td",JM,[e("div",YM,y(T(W.method||W.paymentMethod)),1)]),e("td",KM,[e("div",XM,""+y(C(W.amount||0)),1)]),e("td",ZM,[e("span",{class:ie([b(W.status),"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium capitalize"])},[e("span",{class:ie(["w-1.5 h-1.5 rounded-full mr-1.5",x(W.status)])},null,2),Q(" "+y(S(W.status)),1)],2)])]))),128))])):s.value?(m(),f("tbody",QM,[(m(),f(he,null,ke(5,W=>e("tr",{key:W,class:"animate-pulse"},[...J[25]||(J[25]=[e("td",{colspan:"6",class:"px-6 py-4"},[e("div",{class:"h-16 bg-gray-200 rounded"})],-1)])])),64))])):(m(),f("tbody",eR,[...J[26]||(J[26]=[e("tr",null,[e("td",{colspan:"6",class:"px-6 py-10 text-center"},[e("div",{class:"text-gray-400 text-lg mb-2"},[e("svg",{class:"mx-auto h-12 w-12",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})])]),e("p",{class:"text-gray-500 font-medium"},"No donations found"),e("p",{class:"text-gray-400 text-sm"},"Try adjusting your filters or search terms")])],-1)])]))])]),e("div",tR,[e("div",oR," Showing "+y(F())+" of "+y(i.value)+" donations ",1),e("div",sR,[e("button",{disabled:d.value===1||s.value,onClick:J[5]||(J[5]=W=>L(d.value-1)),class:"px-3 py-1 border border-gray-300 rounded-md text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors"}," Previous ",8,nR),e("div",rR,[(m(!0),f(he,null,ke(N.value,W=>(m(),f("button",{key:W,class:ie([W===d.value?"bg-indigo-600 text-white":"bg-white text-gray-700 hover:bg-gray-50","px-3 py-1 border border-gray-300 rounded-md text-sm font-medium transition-colors"]),onClick:we=>L(W)},y(W),11,aR))),128))]),e("button",{disabled:d.value===a.value||s.value,onClick:J[6]||(J[6]=W=>L(d.value+1)),class:"px-3 py-1 border border-gray-300 rounded-md text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors"}," Next ",8,iR)])])])}}},dR={name:"DonationForm",emits:["donation-submitted"],setup(t,{emit:o}){const s=V(!1),n=Je({donationType:"",amount:"",donorName:"",phone:"",email:"",address:"",paymentMethod:"online",purpose:"",needReceipt:!0,anonymous:!1}),r=Je({}),i=[100,500,1e3,2500,5e3,1e4],a=[{value:"online",label:"Online Payment",icon:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"},{value:"cash",label:"Cash",icon:"M17 9V7a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2m2 4h10a2 2 0 002-2v-6a2 2 0 00-2-2H9a2 2 0 00-2 2v6a2 2 0 002 2zm7-5a2 2 0 11-4 0 2 2 0 014 0z"},{value:"cheque",label:"Cheque",icon:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"}],l=()=>(Object.keys(r).forEach(u=>delete r[u]),n.donationType||(r.donationType="Please select a donation type"),(!n.amount||n.amount<=0)&&(r.amount="Please enter a valid amount"),n.donorName.trim()||(r.donorName="Please enter donor name"),Object.keys(r).length===0);return{form:n,errors:r,isSubmitting:s,quickAmounts:i,paymentMethods:a,submitDonation:async()=>{if(l()){s.value=!0;try{await new Promise(p=>setTimeout(p,2e3));const u={...n,id:Date.now(),date:new Date().toISOString(),status:"pending"};o("donation-submitted",u),console.log("Donation submitted:",u)}catch(u){console.error("Error submitting donation:",u)}finally{s.value=!1}}},resetForm:()=>{Object.keys(n).forEach(u=>{typeof n[u]=="boolean"?n[u]=u==="needReceipt":n[u]=""}),n.paymentMethod="online",Object.keys(r).forEach(u=>delete r[u])}}}},uR={class:"max-w-2xl mx-auto p-6"},cR={class:"bg-white rounded-2xl shadow-lg border border-gray-100 overflow-hidden"},pR={class:"space-y-2"},mR={key:0,class:"text-red-600 text-sm"},gR={class:"space-y-2"},fR={class:"relative"},vR={key:0,class:"text-red-600 text-sm"},hR={class:"flex flex-wrap gap-2 mt-3"},yR=["onClick"],xR={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},bR={class:"space-y-2"},wR={key:0,class:"text-red-600 text-sm"},kR={class:"space-y-2"},_R={class:"space-y-2"},$R={class:"space-y-2"},SR={class:"space-y-2"},DR={class:"grid grid-cols-1 md:grid-cols-3 gap-3"},CR=["onClick"],TR={class:"flex items-center justify-center mb-2"},ER={class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},AR=["d"],IR={class:"text-sm font-medium"},MR={class:"space-y-2"},RR={class:"space-y-3"},PR={class:"flex items-center space-x-3"},jR={class:"flex items-center space-x-3"},NR={class:"flex flex-col sm:flex-row gap-3 pt-4"},LR=["disabled"],BR={key:0,class:"animate-spin w-5 h-5",fill:"none",viewBox:"0 0 24 24"};function VR(t,o,s,n,r,i){return m(),f("div",uR,[e("div",cR,[o[24]||(o[24]=$e('<div class="bg-gradient-to-r from-indigo-600 to-indigo-800 px-6 py-4"><h2 class="text-xl font-semibold text-white flex items-center gap-2"><svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"></path></svg> Make a Donation </h2><p class="text-indigo-100 text-sm mt-1">Support the temple with your generous contribution</p></div>',1)),e("form",{onSubmit:o[10]||(o[10]=Oe((...a)=>n.submitDonation&&n.submitDonation(...a),["prevent"])),class:"p-6 space-y-6"},[e("div",pR,[o[12]||(o[12]=e("label",{class:"block text-sm font-medium text-gray-900"},[Q(" Donation Type "),e("span",{class:"text-red-500"},"*")],-1)),de(e("select",{"onUpdate:modelValue":o[0]||(o[0]=a=>n.form.donationType=a),class:ie(["w-full px-4 py-3 rounded-xl border transition-all duration-200","focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",n.errors.donationType?"border-red-300 bg-red-50":"border-gray-300 hover:border-gray-400"]),required:""},[...o[11]||(o[11]=[$e('<option value="">Select donation type</option><option value="general">General Donation</option><option value="seva">Seva Donation</option><option value="festival">Festival Donation</option><option value="construction">Construction Fund</option><option value="annadanam">Annadanam</option><option value="education">Education Fund</option><option value="maintenance">Maintenance</option>',8)])],2),[[Ce,n.form.donationType]]),n.errors.donationType?(m(),f("p",mR,y(n.errors.donationType),1)):Y("",!0)]),e("div",gR,[o[14]||(o[14]=e("label",{class:"block text-sm font-medium text-gray-900"},[Q(" Donation Amount "),e("span",{class:"text-red-500"},"*")],-1)),e("div",fR,[o[13]||(o[13]=e("span",{class:"absolute left-4 top-1/2 transform -translate-y-1/2 text-gray-500 font-medium"},"",-1)),de(e("input",{"onUpdate:modelValue":o[1]||(o[1]=a=>n.form.amount=a),type:"number",min:"1",step:"0.01",placeholder:"Enter amount",class:ie(["w-full pl-8 pr-4 py-3 rounded-xl border transition-all duration-200","focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",n.errors.amount?"border-red-300 bg-red-50":"border-gray-300 hover:border-gray-400"]),required:""},null,2),[[xe,n.form.amount]])]),n.errors.amount?(m(),f("p",vR,y(n.errors.amount),1)):Y("",!0),e("div",hR,[(m(!0),f(he,null,ke(n.quickAmounts,a=>(m(),f("button",{key:a,type:"button",onClick:l=>n.form.amount=a,class:"px-4 py-2 text-sm rounded-lg border border-indigo-200 text-indigo-700 hover:bg-indigo-50 hover:border-indigo-300 transition-all duration-200"}," "+y(a),9,yR))),128))])]),e("div",xR,[e("div",bR,[o[15]||(o[15]=e("label",{class:"block text-sm font-medium text-gray-900"},[Q(" Donor Name "),e("span",{class:"text-red-500"},"*")],-1)),de(e("input",{"onUpdate:modelValue":o[2]||(o[2]=a=>n.form.donorName=a),type:"text",placeholder:"Enter donor name",class:ie(["w-full px-4 py-3 rounded-xl border transition-all duration-200","focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",n.errors.donorName?"border-red-300 bg-red-50":"border-gray-300 hover:border-gray-400"]),required:""},null,2),[[xe,n.form.donorName]]),n.errors.donorName?(m(),f("p",wR,y(n.errors.donorName),1)):Y("",!0)]),e("div",kR,[o[16]||(o[16]=e("label",{class:"block text-sm font-medium text-gray-900"}," Phone Number ",-1)),de(e("input",{"onUpdate:modelValue":o[3]||(o[3]=a=>n.form.phone=a),type:"tel",placeholder:"Enter phone number",class:"w-full px-4 py-3 rounded-xl border border-gray-300 hover:border-gray-400 focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-all duration-200"},null,512),[[xe,n.form.phone]])])]),e("div",_R,[o[17]||(o[17]=e("label",{class:"block text-sm font-medium text-gray-900"}," Email Address ",-1)),de(e("input",{"onUpdate:modelValue":o[4]||(o[4]=a=>n.form.email=a),type:"email",placeholder:"Enter email address",class:"w-full px-4 py-3 rounded-xl border border-gray-300 hover:border-gray-400 focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-all duration-200"},null,512),[[xe,n.form.email]])]),e("div",$R,[o[18]||(o[18]=e("label",{class:"block text-sm font-medium text-gray-900"}," Address ",-1)),de(e("textarea",{"onUpdate:modelValue":o[5]||(o[5]=a=>n.form.address=a),rows:"3",placeholder:"Enter donor address",class:"w-full px-4 py-3 rounded-xl border border-gray-300 hover:border-gray-400 focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-all duration-200 resize-none"},null,512),[[xe,n.form.address]])]),e("div",SR,[o[19]||(o[19]=e("label",{class:"block text-sm font-medium text-gray-900"},[Q(" Payment Method "),e("span",{class:"text-red-500"},"*")],-1)),e("div",DR,[(m(!0),f(he,null,ke(n.paymentMethods,a=>(m(),f("button",{key:a.value,type:"button",onClick:l=>n.form.paymentMethod=a.value,class:ie(["p-4 rounded-xl border-2 transition-all duration-200 text-center",n.form.paymentMethod===a.value?"border-indigo-500 bg-indigo-50 text-indigo-700":"border-gray-200 hover:border-gray-300 text-gray-700"])},[e("div",TR,[(m(),f("svg",ER,[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:a.icon},null,8,AR)]))]),e("span",IR,y(a.label),1)],10,CR))),128))])]),e("div",MR,[o[20]||(o[20]=e("label",{class:"block text-sm font-medium text-gray-900"}," Purpose/Notes ",-1)),de(e("textarea",{"onUpdate:modelValue":o[6]||(o[6]=a=>n.form.purpose=a),rows:"3",placeholder:"Enter purpose or special notes for this donation",class:"w-full px-4 py-3 rounded-xl border border-gray-300 hover:border-gray-400 focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-all duration-200 resize-none"},null,512),[[xe,n.form.purpose]])]),e("div",RR,[e("div",PR,[de(e("input",{id:"needReceipt","onUpdate:modelValue":o[7]||(o[7]=a=>n.form.needReceipt=a),type:"checkbox",class:"w-4 h-4 text-indigo-600 border-gray-300 rounded focus:ring-indigo-500"},null,512),[[ot,n.form.needReceipt]]),o[21]||(o[21]=e("label",{for:"needReceipt",class:"text-sm text-gray-700"}," I need a donation receipt ",-1))]),e("div",jR,[de(e("input",{id:"anonymous","onUpdate:modelValue":o[8]||(o[8]=a=>n.form.anonymous=a),type:"checkbox",class:"w-4 h-4 text-indigo-600 border-gray-300 rounded focus:ring-indigo-500"},null,512),[[ot,n.form.anonymous]]),o[22]||(o[22]=e("label",{for:"anonymous",class:"text-sm text-gray-700"}," Make this donation anonymous ",-1))])]),e("div",NR,[e("button",{type:"button",onClick:o[9]||(o[9]=(...a)=>n.resetForm&&n.resetForm(...a)),class:"flex-1 px-6 py-3 text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-xl font-medium transition-all duration-200"}," Reset Form "),e("button",{type:"submit",disabled:n.isSubmitting,class:ie(["flex-1 px-6 py-3 rounded-xl font-medium transition-all duration-200","flex items-center justify-center gap-2",n.isSubmitting?"bg-gray-400 cursor-not-allowed text-white":"bg-gradient-to-r from-indigo-600 to-indigo-700 hover:from-indigo-700 hover:to-indigo-800 text-white shadow-lg hover:shadow-xl"])},[n.isSubmitting?(m(),f("svg",BR,[...o[23]||(o[23]=[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)])])):Y("",!0),e("span",null,y(n.isSubmitting?"Processing...":"Proceed to Payment"),1)],10,LR)])],32)])])}const UR=Qe(dR,[["render",VR]]),FR={class:"bg-white"},OR={class:"flex items-center justify-between mb-8"},zR={class:"flex space-x-3"},HR=["disabled"],qR={class:"bg-gradient-to-r from-indigo-600 to-indigo-800 px-8 py-6 text-white"},GR={class:"flex items-center justify-between"},WR={class:"text-2xl font-bold"},JR={class:"text-indigo-100 mt-1"},YR={class:"text-indigo-100"},KR={class:"text-right"},XR={class:"bg-white/20 rounded-lg px-4 py-2"},ZR={class:"text-xl font-bold"},QR={class:"px-8 py-6"},eP={class:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-8"},tP={class:"space-y-4"},oP={class:"space-y-2"},sP={class:"font-medium text-gray-900"},nP={class:"font-medium text-gray-900"},rP={class:"font-medium text-gray-900"},aP={class:"font-medium text-gray-900"},iP={key:0},lP={class:"font-medium text-gray-900"},dP={class:"space-y-4"},uP={class:"space-y-2"},cP={class:"font-medium text-gray-900"},pP={class:"font-medium text-gray-900"},mP={key:0},gP={class:"font-medium text-gray-900"},fP={class:"font-medium text-gray-900"},vP={key:1},hP={class:"font-medium text-gray-900"},yP={class:"bg-gray-50 rounded-xl p-6 mb-8"},xP={class:"space-y-3"},bP={class:"flex justify-between items-center py-2 border-b border-gray-200"},wP={class:"font-medium text-gray-900"},kP={key:0,class:"flex justify-between items-center py-2 border-b border-gray-200"},_P={class:"font-medium text-gray-900"},$P={class:"flex justify-between items-center py-3 bg-indigo-50 rounded-lg px-4"},SP={class:"text-2xl font-bold text-indigo-900"},DP={class:"mt-4 pt-4 border-t border-gray-200"},CP={class:"font-medium text-gray-900 capitalize"},TP={class:"bg-green-50 border border-green-200 rounded-xl p-6 mb-8"},EP={class:"flex items-start space-x-3"},AP={class:"flex-1"},IP={class:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm"},MP={class:"text-green-900"},RP={class:"text-green-900"},PP={class:"text-center space-y-4 pt-6 border-t border-gray-200"},jP={class:"flex items-center justify-center space-x-2 text-xs text-gray-500"},NP={__name:"DonationReceipt",props:{donation:{type:Object,required:!0}},setup(t){const o=t,s=V(null),n=V(!1),r=V({receiptNumber:"RCT-2024-001234",templeName:"Sri Venkateswara Temple",templeAddress:"123 Temple Street, Bengaluru, Karnataka 560001",templePhone:"+91 80 1234 5678",templeEmail:"info@srivenkateswaratemple.org",donorName:"Rajesh Kumar",donorAddress:"456 MG Road, Bengaluru, Karnataka 560025",donorPhone:"+91 98765 43210",donorEmail:"rajesh.kumar@email.com",panNumber:"ABCDE1234F",donationDate:"2024-01-15",paymentMethod:"Online Transfer",transactionId:"TXN123456789",purpose:"General Donation",sevaName:"Abhishekam",amount:5e3,processingFee:50,totalAmount:5050,taxRegistrationNumber:"12A-0001234-56789",taxExemptionPercentage:50}),i=te(()=>r.value.totalAmount===5050?"Five Thousand Fifty Only":"Amount in words conversion needed"),a=u=>new Date(u).toLocaleDateString("en-IN",{year:"numeric",month:"long",day:"numeric"}),l=u=>new Intl.NumberFormat("en-IN").format(u),d=async()=>{n.value=!0;try{await new Promise(p=>setTimeout(p,2e3));const u=document.createElement("a");u.href="#",u.download=`donation-receipt-${r.value.receiptNumber}.pdf`,u.click(),console.log("PDF download initiated")}catch(u){console.error("Error generating PDF:",u)}finally{n.value=!1}},c=()=>{window.print()};return Ee(()=>{o.donation&&(r.value={...r.value,...o.donation})}),(u,p)=>(m(),f("div",FR,[e("div",OR,[p[2]||(p[2]=$e('<div class="flex items-center space-x-4" data-v-14d10140><div class="w-16 h-16 bg-indigo-100 rounded-xl flex items-center justify-center" data-v-14d10140><svg class="w-8 h-8 text-indigo-600" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-14d10140><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" data-v-14d10140></path></svg></div><div data-v-14d10140><h2 class="text-2xl font-bold text-gray-900" data-v-14d10140>Donation Receipt</h2><p class="text-sm text-gray-600" data-v-14d10140>Tax-deductible donation receipt</p></div></div>',1)),e("div",zR,[e("button",{onClick:d,disabled:n.value,class:"inline-flex items-center px-4 py-2 border border-gray-300 rounded-lg text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200"},[p[0]||(p[0]=e("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1)),Q(" "+y(n.value?"Generating...":"Download PDF"),1)],8,HR),e("button",{onClick:c,class:"inline-flex items-center px-4 py-2 bg-indigo-600 border border-transparent rounded-lg text-sm font-medium text-white hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 transition-all duration-200"},[...p[1]||(p[1]=[e("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 17h2a2 2 0 002-2v-4a2 2 0 00-2-2H5a2 2 0 00-2 2v4a2 2 0 002 2h2m2 4h6a2 2 0 002-2v-4a2 2 0 00-2-2H9a2 2 0 00-2 2v4a2 2 0 002 2zm8-12V5a2 2 0 00-2-2H9a2 2 0 00-2 2v4h10z"})],-1),Q(" Print Receipt ",-1)])])])]),e("div",{ref_key:"receiptContent",ref:s,class:"max-w-2xl mx-auto bg-white border border-gray-200 rounded-2xl shadow-lg overflow-hidden"},[e("div",qR,[e("div",GR,[e("div",null,[e("h1",WR,y(r.value.templeName),1),e("p",JR,y(r.value.templeAddress),1),e("p",YR,"Phone: "+y(r.value.templePhone)+" | Email: "+y(r.value.templeEmail),1)]),e("div",KR,[e("div",XR,[p[3]||(p[3]=e("p",{class:"text-sm font-medium"},"Receipt #",-1)),e("p",ZR,y(r.value.receiptNumber),1)])])])]),e("div",QR,[e("div",eP,[e("div",tP,[p[9]||(p[9]=e("h3",{class:"text-lg font-semibold text-gray-900 border-b border-gray-200 pb-2"},"Donor Information",-1)),e("div",oP,[e("div",null,[p[4]||(p[4]=e("p",{class:"text-sm text-gray-600"},"Full Name",-1)),e("p",sP,y(r.value.donorName),1)]),e("div",null,[p[5]||(p[5]=e("p",{class:"text-sm text-gray-600"},"Address",-1)),e("p",nP,y(r.value.donorAddress),1)]),e("div",null,[p[6]||(p[6]=e("p",{class:"text-sm text-gray-600"},"Phone",-1)),e("p",rP,y(r.value.donorPhone),1)]),e("div",null,[p[7]||(p[7]=e("p",{class:"text-sm text-gray-600"},"Email",-1)),e("p",aP,y(r.value.donorEmail),1)]),r.value.panNumber?(m(),f("div",iP,[p[8]||(p[8]=e("p",{class:"text-sm text-gray-600"},"PAN Number",-1)),e("p",lP,y(r.value.panNumber),1)])):Y("",!0)])]),e("div",dP,[p[15]||(p[15]=e("h3",{class:"text-lg font-semibold text-gray-900 border-b border-gray-200 pb-2"},"Donation Details",-1)),e("div",uP,[e("div",null,[p[10]||(p[10]=e("p",{class:"text-sm text-gray-600"},"Date of Donation",-1)),e("p",cP,y(a(r.value.donationDate)),1)]),e("div",null,[p[11]||(p[11]=e("p",{class:"text-sm text-gray-600"},"Payment Method",-1)),e("p",pP,y(r.value.paymentMethod),1)]),r.value.transactionId?(m(),f("div",mP,[p[12]||(p[12]=e("p",{class:"text-sm text-gray-600"},"Transaction ID",-1)),e("p",gP,y(r.value.transactionId),1)])):Y("",!0),e("div",null,[p[13]||(p[13]=e("p",{class:"text-sm text-gray-600"},"Purpose",-1)),e("p",fP,y(r.value.purpose),1)]),r.value.sevaName?(m(),f("div",vP,[p[14]||(p[14]=e("p",{class:"text-sm text-gray-600"},"Seva Name",-1)),e("p",hP,y(r.value.sevaName),1)])):Y("",!0)])])]),e("div",yP,[p[20]||(p[20]=e("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Amount Details",-1)),e("div",xP,[e("div",bP,[p[16]||(p[16]=e("span",{class:"text-gray-600"},"Donation Amount",-1)),e("span",wP,""+y(l(r.value.amount)),1)]),r.value.processingFee?(m(),f("div",kP,[p[17]||(p[17]=e("span",{class:"text-gray-600"},"Processing Fee",-1)),e("span",_P,""+y(l(r.value.processingFee)),1)])):Y("",!0),e("div",$P,[p[18]||(p[18]=e("span",{class:"text-lg font-semibold text-indigo-900"},"Total Amount",-1)),e("span",SP,""+y(l(r.value.totalAmount)),1)])]),e("div",DP,[p[19]||(p[19]=e("p",{class:"text-sm text-gray-600"},"Amount in Words:",-1)),e("p",CP,y(i.value),1)])]),e("div",TP,[e("div",EP,[p[25]||(p[25]=e("div",{class:"flex-shrink-0"},[e("svg",{class:"w-6 h-6 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1)),e("div",AP,[p[23]||(p[23]=e("h4",{class:"text-lg font-semibold text-green-900 mb-2"},"Tax Deduction Information",-1)),p[24]||(p[24]=e("p",{class:"text-sm text-green-800 mb-2"}," This donation is eligible for tax deduction under Section 80G of Income Tax Act, 1961. ",-1)),e("div",IP,[e("div",null,[p[21]||(p[21]=e("p",{class:"text-green-700 font-medium"},"80G Registration Number:",-1)),e("p",MP,y(r.value.taxRegistrationNumber),1)]),e("div",null,[p[22]||(p[22]=e("p",{class:"text-green-700 font-medium"},"Exemption Percentage:",-1)),e("p",RP,y(r.value.taxExemptionPercentage)+"% deduction available",1)])])])])]),e("div",PP,[p[28]||(p[28]=e("p",{class:"text-sm text-gray-600"}," This is a computer-generated receipt and does not require a signature. ",-1)),e("div",jP,[e("span",null,"Generated on "+y(a(new Date)),1),p[26]||(p[26]=e("span",null,"",-1)),p[27]||(p[27]=e("span",null,"Valid for tax purposes",-1))]),p[29]||(p[29]=$e('<div class="flex justify-center mt-6" data-v-14d10140><div class="w-20 h-20 bg-gray-200 rounded-lg flex items-center justify-center" data-v-14d10140><svg class="w-8 h-8 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-14d10140><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v1m6 11h2m-6 0h-2v4m0-11v3m0 0h.01M12 12h4.01M16 20h4M4 12h4m12 0h.01M5 8h2a1 1 0 001-1V5a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1zm12 0h2a1 1 0 001-1V5a1 1 0 00-1-1h-2a1 1 0 00-1 1v2a1 1 0 001 1zM5 20h2a1 1 0 001-1v-2a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1z" data-v-14d10140></path></svg></div></div><p class="text-xs text-gray-500" data-v-14d10140>Scan for receipt verification</p>',2))])])],512)]))}},LP=Qe(NP,[["__scopeId","data-v-14d10140"]]),BP={name:"DonationManagement",components:{DonationStats:pM,DonationLedger:lR,DonationForm:UR,DonationReceipt:LP},setup(){const t=Ze(),{showToast:o}=je(),s=dr(),n=V(!1),r=V(!1),i=V(!1),a=V("month"),l=V(""),d=V(null);te(()=>t.params.id);const c=D=>{r.value=!1,o("Donation added successfully","success"),h()},u=async()=>{try{n.value=!0,console.log("Starting donation fetch..."),await s.fetchDonations();const D=s.donations||[];console.log("Original store donations:",D),D.length>0&&s.$patch({donations:D})}catch(D){console.error("Error loading donations:",D),o("Failed to load donations","error")}finally{n.value=!1}},p=async()=>{try{await s.fetchDashboard()}catch(D){console.error("Error loading donation stats:",D)}},v=async D=>{try{n.value=!0,d.value=D,await ct.generateReceipt(D.id),i.value=!0}catch{o("Failed to generate receipt","error")}finally{n.value=!1}},g=async()=>{n.value=!0;try{await new Promise(D=>setTimeout(D,1500)),o("Report exported successfully","success")}catch{o("Failed to export report","error")}finally{n.value=!1}},h=()=>{u(),p()};return Ee(()=>{h()}),{loading:n,showAddDonationModal:r,showReceiptModal:i,selectedDateRange:a,searchQuery:l,selectedDonation:d,donations:te(()=>s.donations),handleDonationSubmitted:c,handleReceiptDownload:v,exportReport:g,refreshData:h}}},VP={class:"min-h-screen bg-gray-50"},UP={class:"px-6 pb-10"},FP={class:"bg-white rounded-2xl shadow-md border border-gray-200"},OP={class:"bg-white rounded-xl shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto"},zP={class:"flex items-center justify-between p-6 border-b border-gray-200"},HP={class:"p-6"},qP={class:"bg-white rounded-xl shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto"},GP={class:"flex items-center justify-between p-6 border-b border-gray-200"},WP={class:"p-6"},JP={key:2,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50","aria-live":"assertive","aria-busy":"true"};function YP(t,o,s,n,r,i){const a=He("DonationLedger"),l=He("DonationForm"),d=He("DonationReceipt");return m(),f("div",VP,[o[10]||(o[10]=$e('<div class="bg-white border-b border-gray-200 px-6 py-4"><div class="flex items-center justify-between flex-wrap gap-y-2"><div><h1 class="text-2xl font-bold text-indigo-700">Donation Management</h1><p class="text-gray-600 mt-1">Track donations, generate receipts, and view financial reports</p></div><div class="flex flex-wrap items-center gap-3"></div></div></div>',1)),e("div",UP,[e("div",FP,[re(a,{donations:n.donations,"date-range":n.selectedDateRange,"search-query":n.searchQuery,onReceiptDownload:n.handleReceiptDownload},null,8,["donations","date-range","search-query","onReceiptDownload"])])]),n.showAddDonationModal?(m(),f("div",{key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",onClick:o[2]||(o[2]=Oe(c=>n.showAddDonationModal=!1,["self"]))},[e("div",OP,[e("div",zP,[o[6]||(o[6]=e("h3",{class:"text-xl font-semibold text-gray-900"},"Add New Donation",-1)),e("button",{onClick:o[0]||(o[0]=c=>n.showAddDonationModal=!1),class:"text-gray-400 hover:text-gray-600 transition-colors duration-200","aria-label":"Close Add Donation Modal"},[...o[5]||(o[5]=[e("svg",{class:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),e("div",HP,[re(l,{onSubmitted:n.handleDonationSubmitted,onCancelled:o[1]||(o[1]=c=>n.showAddDonationModal=!1)},null,8,["onSubmitted"])])])])):Y("",!0),n.showReceiptModal?(m(),f("div",{key:1,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",onClick:o[4]||(o[4]=Oe(c=>n.showReceiptModal=!1,["self"]))},[e("div",qP,[e("div",GP,[o[8]||(o[8]=e("h3",{class:"text-xl font-semibold text-gray-900"},"Donation Receipt",-1)),e("button",{onClick:o[3]||(o[3]=c=>n.showReceiptModal=!1),class:"text-gray-400 hover:text-gray-600 transition-colors duration-200","aria-label":"Close Receipt Modal"},[...o[7]||(o[7]=[e("svg",{class:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),e("div",WP,[re(d,{donation:n.selectedDonation},null,8,["donation"])])])])):Y("",!0),n.loading?(m(),f("div",JP,[...o[9]||(o[9]=[e("div",{class:"bg-white rounded-lg p-6 flex items-center space-x-3"},[e("div",{class:"animate-spin rounded-full h-6 w-6 border-2 border-indigo-600 border-t-transparent"}),e("span",{class:"text-gray-700"},"Processing...")],-1)])])):Y("",!0)])}const KP=Qe(BP,[["render",YP]]),ro={async getEvents(){try{const t=this.getCurrentEntityId(),o=localStorage.getItem("current_tenant_id");console.log(`Fetching events for entity ID: ${t}, tenant ID: ${o}`),t&&localStorage.setItem("current_entity_id",t);const s=t?`/events?entity_id=${t}`:"/v1/events",n={headers:{Authorization:`Bearer ${localStorage.getItem("auth_token")}`,"Content-Type":"application/json","X-Tenant-ID":o,"X-Entity-ID":t}};console.log(`Requesting events from: ${s} with headers:`,n);const r=await Te.get(s,n);return console.log("Events API response:",r.data),r.data||[]}catch(t){throw this.handleError(t)}},async getUpcomingEvents(){try{const t=this.getCurrentEntityId(),o=localStorage.getItem("current_tenant_id");console.log(`Fetching upcoming events for entity ID: ${t}, tenant ID: ${o}`);const s={Authorization:`Bearer ${localStorage.getItem("auth_token")}`,"Content-Type":"application/json"};o&&(s["X-Tenant-ID"]=o),t&&(s["X-Entity-ID"]=t);const n={headers:s},r=t?`/events/upcoming?entity_id=${t}`:"/events/upcoming";console.log(`Requesting upcoming events from: ${r} with headers:`,n);const i=await Te.get(r,n);return console.log("Upcoming events API response:",i.data),i.data||[]}catch(t){throw console.error("Error fetching upcoming events:",t),this.handleError(t)}},async getEventById(t){try{return(await Le.event.getById(t)).data}catch(o){throw this.handleError(o)}},async getEventStats(){try{const t=this.getCurrentEntityId(),o={};t&&(o["X-Entity-ID"]=t);const s=Object.keys(o).length>0?{headers:o}:{};return(await Le.event.getStats(s)).data}catch(t){return console.error("Error fetching event stats:",t),{total_events:0,upcoming_events:0,this_month_events:0,total_rsvps:0}}},async createEvent(t){try{const o=this.getCurrentEntityId();if(!o)throw new Error("No entity ID available for event creation");const s={title:t.title,description:t.description||"",event_type:t.event_type||t.type||t.eventType,event_date:t.event_date||t.date,event_time:t.event_time||t.time,location:t.location||"Temple Premises",is_active:t.isActive!==void 0?t.isActive:!0,entity_id:parseInt(o)};console.log("Creating event with data:",s),console.log("Entity ID being used:",o);const n={};o&&(n["X-Entity-ID"]=o);const r=localStorage.getItem("current_tenant_id");r&&(n["X-Tenant-ID"]=r);const i=Object.keys(n).length>0?{headers:n}:{},a=await Le.event.create(s,i);return console.log("Event created successfully:",a.data),a.data}catch(o){throw console.error("Error creating event:",o),this.handleError(o)}},async updateEvent(t,o){try{const s=this.getCurrentEntityId(),n={title:o.title,description:o.description||"",event_type:o.event_type||o.type||o.eventType,event_date:o.event_date||o.date,event_time:o.event_time||o.time,location:o.location||"Temple Premises",is_active:o.isActive!==void 0?o.isActive:!0},r={};s&&(r["X-Entity-ID"]=s);const i=Object.keys(r).length>0?{headers:r}:{};return console.log("Updating event with data:",n),{...(await Le.event.update(t,n,i)).data,message:"Event updated successfully",wasUpdate:!0,id:t}}catch(s){throw this.handleError(s)}},async deleteEvent(t){try{const o=await Le.event.delete(t);return{message:"Event deleted successfully",id:t}}catch(o){throw this.handleError(o)}},async registerForEvent(t){try{return(await Le.event.createRSVP(t)).data}catch(o){throw this.handleError(o)}},async cancelRegistration(t){try{throw console.warn("CANCEL RSVP: No endpoint exists."),new Error("RSVP cancellation not supported by backend API")}catch(o){throw this.handleError(o)}},async getEventRSVPs(t){try{return(await Le.event.getRSVPs(t)).data}catch(o){throw this.handleError(o)}},getCurrentEntityId(){const o=window.location.pathname.match(/\/entity\/(\d+)/);if(o){const r=o[1];return console.log(`Entity ID from URL path: ${r}`),r}const s=localStorage.getItem("current_entity_id");if(s&&s!=="null"&&s!=="undefined")return console.log(`Entity ID from localStorage: ${s}`),s;const n=this.getUserInfo();if(n)switch(n.role){case"templeadmin":if(n.entityId)return console.log(`TempleAdmin entity ID: ${n.entityId}`),n.entityId.toString();break;case"standarduser":case"monitoringuser":if(n.assignedTenantId)return console.log(`StandardUser/MonitoringUser assigned tenant ID: ${n.assignedTenantId}`),n.assignedTenantId.toString();break}return console.warn("Could not resolve entity ID"),null},getUserInfo(){try{const t=localStorage.getItem("auth_token");if(t){const o=JSON.parse(atob(t.split(".")[1]));return{userId:o.user_id,role:o.role||o.role_name,entityId:o.entity_id,assignedTenantId:o.assigned_tenant_id}}}catch(t){console.warn("Error parsing user info from token:",t)}return null},handleError(t){var o,s,n,r;return(s=(o=t.response)==null?void 0:o.data)!=null&&s.message?new Error(t.response.data.message):(r=(n=t.response)==null?void 0:n.data)!=null&&r.error?new Error(t.response.data.error):t.message?new Error(t.message):new Error("An unexpected error occurred")}},pp=Vo("event",()=>{const t=V([]),o=V(!1),s=V(null),n=V(null),r=V({category:"all",status:"all",dateRange:"upcoming",rsvpStatus:"all"}),i=V({total:0,upcoming:0,thisMonth:0,totalRSVPs:0}),a=je(),l=te(()=>{const x=new Date().toISOString().split("T")[0];return t.value.filter(F=>new Date(F.event_date||F.eventDate)>=new Date(x)&&F.is_active!==!1).sort((F,E)=>{const O=new Date(F.event_date||F.eventDate),N=new Date(E.event_date||E.eventDate);return O-N})}),d=te(()=>{const x=new Date().toISOString().split("T")[0];return t.value.filter(F=>new Date(F.event_date||F.eventDate)<new Date(x)).sort((F,E)=>{const O=new Date(F.event_date||F.eventDate);return new Date(E.event_date||E.eventDate)-O})}),c=te(()=>{let x=t.value;return r.value.category!=="all"&&(x=x.filter(F=>(F.event_type||F.type||"").toLowerCase()===r.value.category.toLowerCase())),r.value.status!=="all"&&(x=x.filter(F=>{const E=new Date(F.event_date||F.eventDate),O=new Date;return r.value.status==="upcoming"?E>=O:r.value.status==="ongoing"?E.toDateString()===O.toDateString():r.value.status==="completed"?E<O:!0})),x.sort((F,E)=>{const O=new Date(F.event_date||F.eventDate),N=new Date(E.event_date||E.eventDate);return O-N})}),u=async()=>{o.value=!0,s.value=null;try{const x=await ro.getEvents();return t.value=k(x),await p(),t.value}catch(x){throw s.value=x.message||"Failed to fetch events",a.error(s.value),console.error("Error fetching events:",x),x}finally{o.value=!1}},p=async()=>{try{const x=await ro.getEventStats();return i.value={total:x.total_events||0,upcoming:x.upcoming_events||0,thisMonth:x.this_month_events||0,totalRSVPs:x.total_rsvps||0},i.value}catch(x){return console.error("Error fetching event stats:",x),i.value}},v=async()=>{o.value=!0,s.value=null;try{const x=await ro.getUpcomingEvents();return k(x)}catch(x){throw s.value=x.message||"Failed to fetch upcoming events",console.error("Error fetching upcoming events:",x),x}finally{o.value=!1}},g=async x=>{o.value=!0,s.value=null;try{const F=await ro.getEventById(x);return n.value=S(F),n.value}catch(F){throw s.value=F.message||`Failed to fetch event with ID: ${x}`,a.error(s.value),console.error("Error fetching event:",F),F}finally{o.value=!1}},h=async x=>{o.value=!0,s.value=null;try{const F=await ro.createEvent(x);return await u(),a.success("Event created successfully"),F}catch(F){throw s.value=F.message||"Failed to create event",a.error(s.value),console.error("Error creating event:",F),F}finally{o.value=!1}},D=async(x,F)=>{o.value=!0,s.value=null;try{const E=await ro.updateEvent(x,F),O=S(E),N=t.value.findIndex(L=>L.id===Number(x));return N!==-1&&(t.value[N]=O),a.success("Event updated successfully"),E}catch(E){throw s.value=E.message||`Failed to update event with ID: ${x}`,a.error(s.value),console.error("Error updating event:",E),E}finally{o.value=!1}},C=async x=>{o.value=!0,s.value=null;try{const F=await ro.deleteEvent(x);return t.value=t.value.filter(E=>E.id!==Number(x)),a.success("Event deleted successfully"),F}catch(F){throw s.value=F.message||`Failed to delete event with ID: ${x}`,a.error(s.value),console.error("Error deleting event:",F),F}finally{o.value=!1}},B=x=>{r.value={...r.value,...x}},_=()=>{r.value={category:"all",status:"all",dateRange:"upcoming",rsvpStatus:"all"}},T=x=>{n.value=x},S=x=>{if(!x)return null;let F="00:00";if(x.event_time)try{const M=x.event_time.toString().match(/(\d{1,2}):(\d{2}):(\d{2})/);if(M){const X=String(M[1]).padStart(2,"0"),ee=String(M[2]).padStart(2,"0");F=`${X}:${ee}`}else{const X=new Date(x.event_time);if(!isNaN(X.getTime())){const ee=String(X.getHours()).padStart(2,"0"),oe=String(X.getMinutes()).padStart(2,"0");F=`${ee}:${oe}`}}}catch(L){console.warn("Error parsing event_time:",x.event_time,L),F="00:00"}let E=x.event_date||x.eventDate||"",O="";E?O=`${E.toString().split("T")[0]}T${F}:00`:O=new Date().toISOString();let N="";try{const L=new Date(O);if(isNaN(L.getTime()))throw new Error("Invalid Date");N=L.toISOString()}catch(L){console.warn("Invalid date-time during normalizeEvent:",O,L),N=new Date().toISOString()}return{id:x.id,title:x.title,description:x.description,type:x.event_type||x.eventType||x.type,eventDate:N,eventTime:F,location:x.location,isActive:x.is_active!==!1,createdBy:x.created_by||x.createdBy,createdAt:x.created_at||x.createdAt,entityId:x.entity_id||x.entityId,currentAttendees:x.rsvp_count||x.RSVPCount||0,status:b(N)}},k=x=>!x||!Array.isArray(x)?[]:x.map(F=>S(F)),b=x=>{const F=new Date(x),E=new Date,O=new Date(E.getFullYear(),E.getMonth(),E.getDate()),N=new Date(F.getFullYear(),F.getMonth(),F.getDate());return N>O?"upcoming":N.getTime()===O.getTime()?"ongoing":"completed"};return{events:t,loading:o,error:s,selectedEvent:n,filters:r,eventStats:i,upcomingEvents:l,pastEvents:d,filteredEvents:c,fetchEvents:u,fetchUpcomingEvents:v,fetchEventById:g,fetchEventStats:p,createEvent:h,updateEvent:D,deleteEvent:C,setFilters:B,clearFilters:_,setSelectedEvent:T}}),XP={class:"bg-white rounded-xl shadow-lg"},ZP={class:"px-6 py-4 border-b border-gray-200"},QP={class:"flex items-center justify-between"},ej={class:"text-xl font-bold text-gray-900"},tj={class:"text-sm text-gray-600 mt-1"},oj={key:0,class:"flex items-center space-x-2"},sj={class:"grid grid-cols-1 lg:grid-cols-2 gap-6"},nj={class:"lg:col-span-2"},rj={key:0,class:"mt-1 text-sm text-red-600"},aj={key:0,class:"mt-1 text-sm text-red-600"},ij={key:0},lj={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},dj={key:0,class:"mt-1 text-sm text-red-600"},uj={key:0,class:"mt-1 text-sm text-red-600"},cj={key:0,class:"mt-1 text-sm text-red-600"},pj={class:"flex items-center justify-end space-x-4 pt-6 border-t border-gray-200"},mj=["disabled"],gj={key:0,xmlns:"http://www.w3.org/2000/svg",class:"animate-spin h-4 w-4 mr-2",viewBox:"0 0 24 24"},fj={__name:"EventForm",props:{event:{type:Object,default:null},isEdit:{type:Boolean,default:!1}},emits:["submit","cancel"],setup(t,{emit:o}){const s=t,n=o,r=pp(),i=je(),a=V(!1),l=Je({}),d=Je({title:"",type:"",status:"upcoming",date:"",time:"",location:"",description:"",isActive:!0}),c=te(()=>{var h;switch((h=d.status)==null?void 0:h.toLowerCase()){case"upcoming":return"bg-blue-100 text-blue-800";case"ongoing":return"bg-green-100 text-green-800";case"completed":return"bg-gray-100 text-gray-700";case"cancelled":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-700"}});Ee(()=>{if(s.event){let g="",h="",D="";if(s.event.event_type?D=s.event.event_type:s.event.type?D=s.event.type:s.event.eventType&&(D=s.event.eventType),["festival","ceremony","spiritual","cultural","community","special"].includes(D.toLowerCase())||(D=""),s.event.eventDate)try{const T=new Date(s.event.eventDate);if(!isNaN(T.getTime())){g=T.toISOString().split("T")[0];const S=String(T.getHours()).padStart(2,"0"),k=String(T.getMinutes()).padStart(2,"0");h=`${S}:${k}`}}catch(T){console.warn("Invalid eventDate format:",s.event.eventDate,T)}if(!g&&s.event.event_date&&(g=s.event.event_date),!h&&s.event.event_time)if(typeof s.event.event_time=="string")if(/^\d{2}:\d{2}$/.test(s.event.event_time))h=s.event.event_time;else try{const T=new Date(s.event.event_time);if(!isNaN(T.getTime())){const S=String(T.getHours()).padStart(2,"0"),k=String(T.getMinutes()).padStart(2,"0");h=`${S}:${k}`}}catch{console.warn("Could not parse event_time as date:",s.event.event_time)}else try{const T=new Date(s.event.event_time);if(!isNaN(T.getTime())){const S=String(T.getHours()).padStart(2,"0"),k=String(T.getMinutes()).padStart(2,"0");h=`${S}:${k}`}}catch{console.warn("Invalid event_time object:",s.event.event_time)}h||(h="18:00");const B=s.event.isActive!==void 0?s.event.isActive:s.event.is_active!==void 0?s.event.is_active:!0;let _=s.event.status||"upcoming";_==="cancelled"&&(_="upcoming"),Object.assign(d,{title:s.event.title||"",type:D.toLowerCase(),status:_,date:g,time:h,location:s.event.location||"",description:s.event.description||"",isActive:B})}else{const g=new Date;g.setDate(g.getDate()+1),d.date=g.toISOString().split("T")[0],d.time="18:00"}});const u=()=>{Object.keys(l).forEach(h=>delete l[h]);let g=!0;if(d.title.trim()||(l.title="Event title is required",g=!1),d.type||(l.type="Event type is required",g=!1),!d.date)l.date="Event date is required",g=!1;else{const h=new Date(d.date),D=new Date;D.setHours(0,0,0,0),h<D&&!s.isEdit&&(l.date="Event date cannot be in the past",g=!1)}return d.time||(l.time="Event time is required",g=!1),d.description.trim()?d.description.length<10&&(l.description="Description is too short (minimum 10 characters)",g=!1):(l.description="Event description is required",g=!1),g},p=async()=>{var g;if(!u()){i.error("Please fix the form errors before submitting");return}a.value=!0;try{const h={title:d.title.trim(),description:d.description.trim(),event_type:d.type,event_date:d.date,event_time:d.time,location:d.location||"Temple Premises",is_active:d.status!=="cancelled"&&d.isActive};let D;s.isEdit&&((g=s.event)!=null&&g.id)?D=await r.updateEvent(s.event.id,h):D=await r.createEvent(h),n("submit",D)}catch(h){console.error("Error submitting form:",h),i.error("Failed to save event. Please try again.")}finally{a.value=!1}},v=()=>{n("cancel")};return(g,h)=>(m(),f("div",XP,[e("div",ZP,[e("div",QP,[e("div",null,[e("h2",ej,y(t.isEdit?"Edit Event":"Create New Event"),1),e("p",tj,y(t.isEdit?"Update event details and notify devotees":"Plan a new temple event or festival"),1)]),t.isEdit?(m(),f("div",oj,[e("span",{class:ie([c.value,"px-3 py-1 rounded-full text-xs font-medium"])},y(d.status),3)])):Y("",!0)])]),e("form",{onSubmit:Oe(p,["prevent"]),class:"p-6 space-y-6"},[e("div",sj,[e("div",nj,[h[6]||(h[6]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},[Q(" Event Title "),e("span",{class:"text-red-500"},"*")],-1)),de(e("input",{"onUpdate:modelValue":h[0]||(h[0]=D=>d.title=D),type:"text",placeholder:"e.g., Maha Shivaratri Celebration",class:ie(["w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-colors",{"border-red-300 focus:ring-red-500 focus:border-red-500":l.title}])},null,2),[[xe,d.title]]),l.title?(m(),f("p",rj,y(l.title),1)):Y("",!0)]),e("div",null,[h[8]||(h[8]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},[Q(" Event Type "),e("span",{class:"text-red-500"},"*")],-1)),de(e("select",{"onUpdate:modelValue":h[1]||(h[1]=D=>d.type=D),class:ie(["w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-colors",{"border-red-300 focus:ring-red-500 focus:border-red-500":l.type}])},[...h[7]||(h[7]=[$e('<option value="">Select Event Type</option><option value="festival">Festival</option><option value="ceremony">Ceremony</option><option value="spiritual">Spiritual Discourse</option><option value="cultural">Cultural Program</option><option value="community">Community Gathering</option><option value="special">Special Occasion</option>',7)])],2),[[Ce,d.type]]),l.type?(m(),f("p",aj,y(l.type),1)):Y("",!0)]),t.isEdit?(m(),f("div",ij)):Y("",!0)]),e("div",lj,[e("div",null,[h[9]||(h[9]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},[Q(" Event Date "),e("span",{class:"text-red-500"},"*")],-1)),de(e("input",{"onUpdate:modelValue":h[2]||(h[2]=D=>d.date=D),type:"date",class:ie(["w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-colors",{"border-red-300 focus:ring-red-500 focus:border-red-500":l.date}])},null,2),[[xe,d.date]]),l.date?(m(),f("p",dj,y(l.date),1)):Y("",!0)]),e("div",null,[h[10]||(h[10]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},[Q(" Event Time "),e("span",{class:"text-red-500"},"*")],-1)),de(e("input",{"onUpdate:modelValue":h[3]||(h[3]=D=>d.time=D),type:"time",class:ie(["w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-colors",{"border-red-300 focus:ring-red-500 focus:border-red-500":l.time}])},null,2),[[xe,d.time]]),l.time?(m(),f("p",uj,y(l.time),1)):Y("",!0)])]),e("div",null,[h[11]||(h[11]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Location ",-1)),de(e("input",{"onUpdate:modelValue":h[4]||(h[4]=D=>d.location=D),type:"text",placeholder:"e.g., Main Temple Hall, Garden Area",class:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-colors"},null,512),[[xe,d.location]]),h[12]||(h[12]=e("p",{class:"mt-1 text-sm text-gray-500"},'Leave empty to default to "Temple Premises"',-1))]),e("div",null,[h[13]||(h[13]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},[Q(" Event Description "),e("span",{class:"text-red-500"},"*")],-1)),de(e("textarea",{"onUpdate:modelValue":h[5]||(h[5]=D=>d.description=D),rows:"4",placeholder:"Describe the event, its significance, schedule, and what devotees can expect...",class:ie(["w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-colors resize-none",{"border-red-300 focus:ring-red-500 focus:border-red-500":l.description}])},null,2),[[xe,d.description]]),l.description?(m(),f("p",cj,y(l.description),1)):Y("",!0)]),e("div",pj,[e("button",{type:"button",onClick:v,class:"px-6 py-3 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors font-medium"}," Cancel "),e("button",{type:"submit",disabled:a.value,class:"px-6 py-3 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors font-medium flex items-center"},[a.value?(m(),f("svg",gj,[...h[14]||(h[14]=[e("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 22c5.523 0 10-4.477 10-10h-2c0 4.418-3.582 8-8 8s-8-3.582-8-8 3.582-8 8-8v2M18.59 13.51l2.12-2.12-2.12-2.12M5.41 8.59l-2.12 2.12 2.12 2.12"},null,-1)])])):Y("",!0),Q(" "+y(t.isEdit?"Update Event":"Create Event"),1)],8,mj)])],32)]))}},vj={class:"min-h-screen bg-gray-50"},hj={class:"bg-white border-b border-gray-200"},yj={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},xj={class:"flex justify-between items-center py-6"},bj={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},wj={class:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8"},kj={class:"bg-white rounded-xl shadow-sm p-6 border border-gray-100"},_j={class:"flex items-center"},$j={class:"ml-4"},Sj={class:"text-2xl font-bold text-gray-900"},Dj={class:"bg-white rounded-xl shadow-sm p-6 border border-gray-100"},Cj={class:"flex items-center"},Tj={class:"ml-4"},Ej={class:"text-2xl font-bold text-gray-900"},Aj={class:"bg-white rounded-xl shadow-sm p-6 border border-gray-100"},Ij={class:"flex items-center"},Mj={class:"ml-4"},Rj={class:"text-2xl font-bold text-gray-900"},Pj={class:"bg-white rounded-xl shadow-sm p-6 border border-gray-100"},jj={class:"flex items-center"},Nj={class:"ml-4"},Lj={class:"text-2xl font-bold text-gray-900"},Bj={class:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 mb-6"},Vj={class:"flex bg-gray-100 rounded-lg p-1"},Uj={class:"flex flex-wrap gap-3"},Fj={class:"relative"},Oj={key:0,class:"bg-white rounded-xl shadow-sm border border-gray-100 p-8 text-center"},zj={key:1,class:"bg-white rounded-xl shadow-sm border border-gray-100 p-12 text-center"},Hj={class:"mt-1 text-gray-500"},qj={key:2,class:"bg-white rounded-xl shadow-sm border border-gray-100"},Gj={key:0,class:"overflow-x-auto"},Wj={class:"min-w-full divide-y divide-gray-200"},Jj={class:"bg-white divide-y divide-gray-200"},Yj={class:"px-6 py-4 whitespace-nowrap"},Kj={class:"flex items-center"},Xj={class:"flex-shrink-0 h-10 w-10 rounded-full bg-gray-200 overflow-hidden"},Zj=["src"],Qj={key:1,class:"h-full w-full flex items-center justify-center bg-indigo-100 text-indigo-700"},eN={class:"ml-4"},tN={class:"text-sm font-medium text-gray-900"},oN={class:"text-sm text-gray-500"},sN={class:"px-6 py-4 whitespace-nowrap"},nN={class:"text-sm text-gray-900"},rN={class:"text-sm text-gray-500"},aN={class:"px-6 py-4 whitespace-nowrap"},iN={class:"px-6 py-4 whitespace-nowrap"},lN={class:"px-6 py-4 whitespace-nowrap text-sm font-medium"},dN={class:"flex space-x-3"},uN=["onClick"],cN=["onClick"],pN={key:1,class:"p-6"},mN={class:"p-6"},gN={class:"text-gray-600 mb-6"},fN={class:"flex justify-end space-x-3"},vN=["disabled"],hN={key:0,class:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",fill:"none",viewBox:"0 0 24 24"},yN={class:"p-6"},xN={class:"flex items-center justify-between mb-4"},bN={class:"space-y-4"},wN={class:"space-y-2"},kN={class:"flex items-center"},_N={class:"flex items-center"},$N={class:"flex items-center"},SN={class:"flex justify-end space-x-3 pt-4"},DN=["disabled"],CN={key:0,class:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",fill:"none",viewBox:"0 0 24 24"},TN={__name:"EventManagement",setup(t){const o=Ze(),s=pp(),n=je(),r=te(()=>o.params.templeId||o.query.templeId||localStorage.getItem("current_entity_id")),i=V(!1),a=V("list"),l=V(!1),d=V(!1),c=V(!1),u=V(!1),p=V(!1),v=V(!1),g=V(null),h=V(null),D=V(""),C=V({status:"all",category:"all"}),B=V({sms:!0,whatsapp:!0,email:!0}),_=V(""),T=te(()=>s.eventStats),S=te(()=>s.events),k=te(()=>{let P=S.value;if(D.value.trim()){const W=D.value.toLowerCase();P=P.filter(we=>{var me,De,ge;return((me=we.title)==null?void 0:me.toLowerCase().includes(W))||((De=we.description)==null?void 0:De.toLowerCase().includes(W))||((ge=we.location)==null?void 0:ge.toLowerCase().includes(W))})}return C.value.status!=="all"&&(P=P.filter(W=>H(W).toLowerCase()===C.value.status)),C.value.category!=="all"&&(P=P.filter(W=>{var we;return((we=W.type||W.eventType)==null?void 0:we.toLowerCase())===C.value.category.toLowerCase()})),P});Ee(async()=>{try{i.value=!0,await s.fetchEvents(r.value)}catch(P){console.error("Error loading events:",P),n.error("Failed to load events")}finally{i.value=!1}});const b=()=>{s.setFilters(C.value)},x=()=>{b()},F=P=>{g.value={...P},d.value=!0},E=P=>{h.value=P,c.value=!0},O=async()=>{if(h.value){p.value=!0;try{await s.deleteEvent(h.value.id),n.success("Event deleted successfully"),c.value=!1}catch{n.error("Failed to delete event")}finally{p.value=!1}}},N=async()=>{if(!_.value.trim()){n.error("Please enter a notification message");return}const P=[];if(B.value.sms&&P.push("SMS"),B.value.whatsapp&&P.push("WhatsApp"),B.value.email&&P.push("Email"),P.length===0){n.error("Please select at least one notification method");return}v.value=!0;try{await new Promise(W=>setTimeout(W,1e3)),n.success(`Notifications sent via ${P.join(", ")}`),u.value=!1}catch{n.error("Failed to send notifications")}finally{v.value=!1}},L=async P=>{M(),setTimeout(async()=>{try{await s.fetchEvents(r.value)}catch(W){console.error("Error refreshing events:",W)}},500)},M=()=>{l.value=!1,d.value=!1,g.value=null},X=P=>P?new Date(P).toLocaleDateString("en-IN",{year:"numeric",month:"short",day:"numeric"}):"",ee=P=>P?new Date(P).toLocaleTimeString("en-IN",{hour:"2-digit",minute:"2-digit",hour12:!0}):"",oe=P=>P?P.replace(/_/g," ").replace(/-/g," ").replace(/\w\S*/g,W=>W.charAt(0).toUpperCase()+W.substr(1).toLowerCase()):"Other",ae=P=>({festival:"bg-purple-100 text-purple-800",ceremony:"bg-blue-100 text-blue-800",spiritual:"bg-yellow-100 text-yellow-800",cultural:"bg-pink-100 text-pink-800",community:"bg-green-100 text-green-800",special:"bg-red-100 text-red-800"})[P==null?void 0:P.toLowerCase()]||"bg-gray-100 text-gray-800",H=P=>{if(!P||!P.eventDate)return"Unknown";const W=new Date,we=new Date(P.eventDate),me=P.endDate?new Date(P.endDate):new Date(we);return me.setHours(23,59,59),W<we?"Upcoming":W>=we&&W<=me?"Ongoing":"Completed"},J=P=>{const W=H(P);return{Upcoming:"bg-blue-100 text-blue-800",Ongoing:"bg-green-100 text-green-800",Completed:"bg-gray-100 text-gray-700"}[W]||"bg-gray-100 text-gray-800"},z=P=>{if(P.eventTime&&P.eventTime!=="00:00"){const[W,we]=P.eventTime.split(":"),me=parseInt(W),De=me===0?12:me>12?me-12:me,ge=me>=12?"PM":"AM";return`${De}:${we} ${ge}`}return ee(P.eventDate)},I=(P,W)=>P?P.length>W?P.slice(0,W)+"...":P:"";return(P,W)=>{var we;return m(),f("div",vj,[e("div",hj,[e("div",yj,[e("div",xj,[W[19]||(W[19]=e("div",null,[e("h1",{class:"text-2xl font-bold text-gray-900"},"Events & Festivals"),e("p",{class:"mt-1 text-sm text-gray-600"}," Create and manage temple events, festivals, and special occasions ")],-1)),e("button",{onClick:W[0]||(W[0]=me=>l.value=!0),class:"inline-flex items-center px-4 py-2 border border-transparent rounded-lg shadow-sm text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 transition-colors duration-200"},[...W[18]||(W[18]=[e("svg",{class:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})],-1),Q(" Create Event ",-1)])])])])]),e("div",bj,[e("div",wj,[e("div",kj,[e("div",_j,[W[21]||(W[21]=e("div",{class:"flex-shrink-0"},[e("div",{class:"w-8 h-8 bg-indigo-100 rounded-lg flex items-center justify-center"},[e("svg",{class:"w-5 h-5 text-indigo-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})])])],-1)),e("div",$j,[W[20]||(W[20]=e("p",{class:"text-sm font-medium text-gray-600"},"Total Events",-1)),e("p",Sj,y(T.value.total||0),1)])])]),e("div",Dj,[e("div",Cj,[W[23]||(W[23]=e("div",{class:"flex-shrink-0"},[e("div",{class:"w-8 h-8 bg-green-100 rounded-lg flex items-center justify-center"},[e("svg",{class:"w-5 h-5 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})])])],-1)),e("div",Tj,[W[22]||(W[22]=e("p",{class:"text-sm font-medium text-gray-600"},"This Month",-1)),e("p",Ej,y(T.value.thisMonth||0),1)])])]),e("div",Aj,[e("div",Ij,[W[25]||(W[25]=e("div",{class:"flex-shrink-0"},[e("div",{class:"w-8 h-8 bg-blue-100 rounded-lg flex items-center justify-center"},[e("svg",{class:"w-5 h-5 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})])])],-1)),e("div",Mj,[W[24]||(W[24]=e("p",{class:"text-sm font-medium text-gray-600"},"Total RSVPs",-1)),e("p",Rj,y(T.value.totalRSVPs||0),1)])])]),e("div",Pj,[e("div",jj,[W[27]||(W[27]=e("div",{class:"flex-shrink-0"},[e("div",{class:"w-8 h-8 bg-purple-100 rounded-lg flex items-center justify-center"},[e("svg",{class:"w-5 h-5 text-purple-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})])])],-1)),e("div",Nj,[W[26]||(W[26]=e("p",{class:"text-sm font-medium text-gray-600"},"Upcoming",-1)),e("p",Lj,y(T.value.upcoming||0),1)])])])]),e("div",Bj,[e("div",Vj,[e("button",{onClick:W[1]||(W[1]=me=>a.value="list"),class:ie(["px-4 py-2 text-sm font-medium rounded-md transition-all duration-200",a.value==="list"?"bg-white text-indigo-600 shadow-sm":"text-gray-600 hover:text-gray-900"])},[...W[28]||(W[28]=[e("svg",{class:"w-4 h-4 mr-2 inline",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 6h16M4 10h16M4 14h16M4 18h16"})],-1),Q(" List View ",-1)])],2)]),e("div",Uj,[de(e("select",{"onUpdate:modelValue":W[2]||(W[2]=me=>C.value.status=me),class:"px-3 py-2 border border-gray-300 rounded-lg text-sm bg-white focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",onChange:b},[...W[29]||(W[29]=[e("option",{value:"all"},"All Status",-1),e("option",{value:"upcoming"},"Upcoming",-1),e("option",{value:"ongoing"},"Ongoing",-1),e("option",{value:"completed"},"Completed",-1)])],544),[[Ce,C.value.status]]),de(e("select",{"onUpdate:modelValue":W[3]||(W[3]=me=>C.value.category=me),class:"px-3 py-2 border border-gray-300 rounded-lg text-sm bg-white focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",onChange:b},[...W[30]||(W[30]=[$e('<option value="all">All Categories</option><option value="festival">Festival</option><option value="ceremony">Ceremony</option><option value="spiritual">Spiritual Discourse</option><option value="cultural">Cultural Program</option><option value="community">Community Gathering</option>',6)])],544),[[Ce,C.value.category]]),e("div",Fj,[de(e("input",{"onUpdate:modelValue":W[4]||(W[4]=me=>D.value=me),type:"text",placeholder:"Search events...",class:"pl-10 pr-4 py-2 border border-gray-300 rounded-lg text-sm bg-white focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 w-64",onInput:x},null,544),[[xe,D.value]]),W[31]||(W[31]=e("svg",{class:"w-4 h-4 text-gray-400 absolute left-3 top-1/2 transform -translate-y-1/2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})],-1))])])]),i.value?(m(),f("div",Oj,[...W[32]||(W[32]=[e("svg",{class:"animate-spin h-10 w-10 mx-auto text-indigo-500",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),e("p",{class:"mt-4 text-gray-600"},"Loading events...",-1)])])):!i.value&&k.value.length===0?(m(),f("div",zj,[W[34]||(W[34]=e("svg",{class:"w-16 h-16 mx-auto text-gray-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})],-1)),W[35]||(W[35]=e("h3",{class:"mt-4 text-lg font-medium text-gray-900"},"No events found",-1)),e("p",Hj,y(D.value||C.value.status!=="all"||C.value.category!=="all"?"Try adjusting your filters or search terms":"Create your first event to get started"),1),e("button",{onClick:W[5]||(W[5]=me=>l.value=!0),class:"mt-6 inline-flex items-center px-4 py-2 border border-transparent rounded-lg shadow-sm text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700"},[...W[33]||(W[33]=[e("svg",{class:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})],-1),Q(" Create Event ",-1)])])])):(m(),f("div",qj,[a.value==="list"?(m(),f("div",Gj,[e("table",Wj,[W[37]||(W[37]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Event"),e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Date & Time"),e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Type"),e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Status"),e("th",{scope:"col",class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Actions")])],-1)),e("tbody",Jj,[(m(!0),f(he,null,ke(k.value,me=>(m(),f("tr",{key:me.id},[e("td",Yj,[e("div",Kj,[e("div",Xj,[me.imageURL?(m(),f("img",{key:0,src:me.imageURL,class:"h-full w-full object-cover",alt:"Event"},null,8,Zj)):(m(),f("div",Qj,[...W[36]||(W[36]=[e("svg",{class:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})],-1)])]))]),e("div",eN,[e("div",tN,y(me.title),1),e("div",oN,y(I(me.description,40)),1)])])]),e("td",sN,[e("div",nN,y(X(me.eventDate)),1),e("div",rN,y(z(me)),1)]),e("td",aN,[e("span",{class:ie(["px-2 inline-flex text-xs leading-5 font-semibold rounded-full",ae(me.type)])},y(oe(me.type)),3)]),e("td",iN,[e("span",{class:ie(["px-2 inline-flex text-xs leading-5 font-semibold rounded-full",J(me)])},y(H(me)),3)]),e("td",lN,[e("div",dN,[e("button",{onClick:De=>F(me),class:"text-indigo-600 hover:text-indigo-900 transition-colors"}," Edit ",8,uN),e("button",{onClick:De=>E(me),class:"text-red-600 hover:text-red-900 transition-colors"}," Delete ",8,cN)])])]))),128))])])])):a.value==="calendar"?(m(),f("div",pN,[...W[38]||(W[38]=[e("p",{class:"text-center text-gray-500"},"Calendar view will be integrated here",-1)])])):Y("",!0)]))]),l.value||d.value?(m(),f("div",{key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",onClick:M},[e("div",{class:"bg-white rounded-xl shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",onClick:W[6]||(W[6]=Oe(()=>{},["stop"]))},[re(fj,{event:g.value,"is-edit":d.value,onSubmit:L,onCancel:M},null,8,["event","is-edit"])])])):Y("",!0),c.value?(m(),f("div",{key:1,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",onClick:W[9]||(W[9]=me=>c.value=!1)},[e("div",{class:"bg-white rounded-xl shadow-xl max-w-lg w-full",onClick:W[8]||(W[8]=Oe(()=>{},["stop"]))},[e("div",mN,[W[41]||(W[41]=e("h3",{class:"text-lg font-medium text-gray-900 mb-4"},"Confirm Delete",-1)),e("p",gN,'Are you sure you want to delete the event "'+y((we=h.value)==null?void 0:we.title)+'"? This action cannot be undone.',1),e("div",fN,[e("button",{onClick:W[7]||(W[7]=me=>c.value=!1),class:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200"}," Cancel "),e("button",{onClick:O,disabled:p.value,class:"px-4 py-2 text-sm font-medium text-white bg-red-600 rounded-lg hover:bg-red-700 disabled:opacity-50 flex items-center"},[p.value?(m(),f("svg",hN,[...W[39]||(W[39]=[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)])])):Y("",!0),W[40]||(W[40]=Q(" Delete ",-1))],8,vN)])])])])):Y("",!0),u.value?(m(),f("div",{key:2,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",onClick:W[17]||(W[17]=me=>u.value=!1)},[e("div",{class:"bg-white rounded-xl shadow-xl max-w-lg w-full",onClick:W[16]||(W[16]=Oe(()=>{},["stop"]))},[e("div",yN,[e("div",xN,[W[43]||(W[43]=e("h3",{class:"text-lg font-semibold text-gray-900"},"Notify Devotees",-1)),e("button",{onClick:W[10]||(W[10]=me=>u.value=!1),class:"text-gray-400 hover:text-gray-600"},[...W[42]||(W[42]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),e("div",bN,[e("div",null,[W[47]||(W[47]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Notification Type ",-1)),e("div",wN,[e("label",kN,[de(e("input",{"onUpdate:modelValue":W[11]||(W[11]=me=>B.value.sms=me),type:"checkbox",class:"rounded border-gray-300 text-indigo-600 focus:ring-indigo-500"},null,512),[[ot,B.value.sms]]),W[44]||(W[44]=e("span",{class:"ml-2 text-sm text-gray-700"},"SMS",-1))]),e("label",_N,[de(e("input",{"onUpdate:modelValue":W[12]||(W[12]=me=>B.value.whatsapp=me),type:"checkbox",class:"rounded border-gray-300 text-indigo-600 focus:ring-indigo-500"},null,512),[[ot,B.value.whatsapp]]),W[45]||(W[45]=e("span",{class:"ml-2 text-sm text-gray-700"},"WhatsApp",-1))]),e("label",$N,[de(e("input",{"onUpdate:modelValue":W[13]||(W[13]=me=>B.value.email=me),type:"checkbox",class:"rounded border-gray-300 text-indigo-600 focus:ring-indigo-500"},null,512),[[ot,B.value.email]]),W[46]||(W[46]=e("span",{class:"ml-2 text-sm text-gray-700"},"Email",-1))])])]),e("div",null,[W[48]||(W[48]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Message Template ",-1)),de(e("textarea",{"onUpdate:modelValue":W[14]||(W[14]=me=>_.value=me),rows:"4",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",placeholder:"Enter your message to devotees..."},null,512),[[xe,_.value]])]),e("div",SN,[e("button",{onClick:W[15]||(W[15]=me=>u.value=!1),class:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors duration-200"}," Cancel "),e("button",{onClick:N,disabled:v.value,class:"px-4 py-2 text-sm font-medium text-white bg-indigo-600 rounded-lg hover:bg-indigo-700 transition-colors duration-200 disabled:opacity-50 flex items-center"},[v.value?(m(),f("svg",CN,[...W[49]||(W[49]=[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)])])):Y("",!0),W[50]||(W[50]=Q(" Send Notifications ",-1))],8,DN)])])])])])):Y("",!0)])}}};/**
 * @license lucide-vue-next v0.516.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Eu=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),EN=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(o,s,n)=>n?n.toUpperCase():s.toLowerCase()),AN=t=>{const o=EN(t);return o.charAt(0).toUpperCase()+o.slice(1)},IN=(...t)=>t.filter((o,s,n)=>!!o&&o.trim()!==""&&n.indexOf(o)===s).join(" ").trim();/**
 * @license lucide-vue-next v0.516.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var xn={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":2,"stroke-linecap":"round","stroke-linejoin":"round"};/**
 * @license lucide-vue-next v0.516.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MN=({size:t,strokeWidth:o=2,absoluteStrokeWidth:s,color:n,iconNode:r,name:i,class:a,...l},{slots:d})=>zt("svg",{...xn,width:t||xn.width,height:t||xn.height,stroke:n||xn.stroke,"stroke-width":s?Number(o)*24/Number(t):o,class:IN("lucide",...i?[`lucide-${Eu(AN(i))}-icon`,`lucide-${Eu(i)}`]:["lucide-icon"]),...l},[...r.map(c=>zt(...c)),...d.default?[d.default()]:[]]);/**
 * @license lucide-vue-next v0.516.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jt=(t,o)=>(s,{slots:n})=>zt(MN,{...s,iconNode:o,name:t},n);/**
 * @license lucide-vue-next v0.516.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ar=Jt("bell",[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]]);/**
 * @license lucide-vue-next v0.516.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ir=Jt("calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-vue-next v0.516.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RN=Jt("check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-vue-next v0.516.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PN=Jt("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-vue-next v0.516.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const na=Jt("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-vue-next v0.516.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Au=Jt("clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-vue-next v0.516.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jN=Jt("file-text",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-vue-next v0.516.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Iu=Jt("mail",[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]]);/**
 * @license lucide-vue-next v0.516.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mu=Jt("map-pin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-vue-next v0.516.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NN=Jt("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]]);/**
 * @license lucide-vue-next v0.516.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LN=Jt("trash-2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-vue-next v0.516.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BN=Jt("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),VN={class:"bg-white rounded-xl shadow-lg p-6"},UN={class:"flex items-center justify-between mb-6"},FN={class:"flex flex-col md:flex-row gap-4 mb-6"},ON={class:"flex-1"},zN={class:"relative"},HN={key:0,class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},qN={class:"flex items-start justify-between mb-3"},GN={class:"flex-1"},WN={class:"font-semibold text-gray-900 mb-1"},JN={class:"flex items-center gap-2"},YN=["onClick"],KN=["onClick"],XN={class:"mb-3"},ZN={class:"text-sm text-gray-600 line-clamp-3"},QN={class:"flex items-center justify-between text-xs text-gray-500"},eL={class:"flex gap-2 mt-3"},tL=["onClick"],oL=["onClick"],sL={key:1,class:"text-center py-12"},nL={class:"mt-6"},rL={key:2,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50"},aL={class:"bg-white rounded-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto"},iL={class:"p-6"},lL={class:"flex items-center justify-between mb-6"},dL={class:"text-lg font-semibold text-gray-900"},uL={class:"flex justify-end gap-3 pt-4"},cL={type:"submit",class:"px-4 py-2 bg-indigo-600 hover:bg-indigo-700 text-white rounded-lg transition-colors"},pL={key:3,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50"},mL={class:"bg-white rounded-xl max-w-lg w-full"},gL={class:"p-6"},fL={class:"flex items-center justify-between mb-4"},vL={class:"space-y-4"},hL={class:"text-gray-900"},yL={class:"bg-gray-50 rounded-lg p-4"},xL={class:"text-gray-900 whitespace-pre-wrap"},bL={class:"flex justify-end gap-3 mt-6"},wL={__name:"MessageTemplates",setup(t){var T;const o=V([]),s=V(""),n=V(""),r=V(!1),i=V(null),a=V(null),l=tt();(T=l.user)==null||T.entityId;const d=Ke(),c=V({name:"",category:"",subject:"",content:""});V(["{devotee_name}","{temple_name}","{seva_name}","{event_name}","{date}","{time}","{amount}","{receipt_number}"]);const u=te(()=>{let S=o.value||[];if(s.value){const k=s.value.toLowerCase();S=S.filter(b=>{var E,O;const x=((E=b.name)==null?void 0:E.toLowerCase())||"",F=((O=b.content)==null?void 0:O.toLowerCase())||"";return x.includes(k)||F.includes(k)})}return n.value&&(S=S.filter(k=>k.category===n.value)),S}),p=S=>({seva:"bg-blue-100 text-blue-800",event:"bg-green-100 text-green-800",donation:"bg-yellow-100 text-yellow-800",general:"bg-gray-100 text-gray-800",festival:"bg-purple-100 text-purple-800"})[S]||"bg-gray-100 text-gray-800",v=S=>S?new Date(S).toLocaleDateString():"Never used",g=S=>{i.value=S,c.value={...S},r.value=!1},h=S=>{confirm("Are you sure you want to delete this template?")&&(o.value=o.value.filter(k=>k.id!==S))},D=S=>{a.value={...S,content:S.content||S.body}},C=S=>{d.push({name:"MessageComposer",query:{subject:S.subject,content:S.content||S.body}}),a.value=null,r.value=!1,i.value=null},B=async()=>{var k,b;const S={name:c.value.name,subject:c.value.subject,body:c.value.content,category:c.value.category,userId:(k=l.user)==null?void 0:k.id,entityId:(b=l.user)==null?void 0:b.entity_id};try{let x;i.value?console.warn("Edit functionality is not wired to backend yet"):x=await ta.createTemplate(S),x!=null&&x.success?(o.value.push(x.data),_()):alert((x==null?void 0:x.error)||"Something went wrong while saving the template.")}catch(x){console.error("Error saving template:",x),alert("Unexpected error occurred.")}},_=()=>{r.value=!1,i.value=null,c.value={name:"",category:"",subject:"",content:""}};return Ee(async()=>{const S=await ta.getTemplates();S.success?o.value=S.data:console.error("Failed to load templates:",S.error)}),(S,k)=>(m(),f("div",VN,[e("div",UN,[k[12]||(k[12]=e("div",null,[e("h2",{class:"text-2xl font-bold text-gray-900"},"Message Templates"),e("p",{class:"text-gray-600 mt-1"},"Create and manage reusable message templates")],-1)),e("button",{onClick:k[0]||(k[0]=b=>r.value=!0),class:"bg-indigo-600 hover:bg-indigo-700 text-white px-4 py-2 rounded-lg font-medium transition-all duration-200 flex items-center gap-2"},[...k[11]||(k[11]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),Q(" Create Template ",-1)])])]),e("div",FN,[e("div",ON,[e("div",zN,[k[13]||(k[13]=e("svg",{class:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})],-1)),de(e("input",{"onUpdate:modelValue":k[1]||(k[1]=b=>s.value=b),type:"text",placeholder:"Search templates...",class:"pl-10 pr-4 py-2 w-full border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-colors"},null,512),[[xe,s.value]])])]),de(e("select",{"onUpdate:modelValue":k[2]||(k[2]=b=>n.value=b),class:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-colors"},[...k[14]||(k[14]=[$e('<option value="">All Categories</option><option value="seva">Seva Notifications</option><option value="event">Event Announcements</option><option value="donation">Donation Receipts</option><option value="general">General Messages</option><option value="festival">Festival Greetings</option>',6)])],512),[[Ce,n.value]])]),u.value.length>0?(m(),f("div",HN,[(m(!0),f(he,null,ke(u.value,b=>(m(),f("div",{key:b.id,class:"bg-gray-50 rounded-lg p-4 hover:shadow-md transition-all duration-200 border border-gray-200"},[e("div",qN,[e("div",GN,[e("h3",WN,y(b.name),1),e("span",{class:ie([p(b.category),"px-2 py-1 rounded-full text-xs font-medium"])},y(b.category),3)]),e("div",JN,[e("button",{onClick:x=>g(b),class:"text-gray-400 hover:text-indigo-600 transition-colors",title:"Edit Template"},[...k[15]||(k[15]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})],-1)])],8,YN),e("button",{onClick:x=>h(b.id),class:"text-gray-400 hover:text-red-600 transition-colors",title:"Delete Template"},[...k[16]||(k[16]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)])],8,KN)])]),e("div",XN,[e("p",ZN,y(b.content),1)]),e("div",QN,[e("span",null,y(b.usageCount)+" times used",1),e("span",null,y(v(b.lastUsed)),1)]),e("div",eL,[e("button",{onClick:x=>D(b),class:"flex-1 bg-white hover:bg-gray-50 text-gray-700 border border-gray-300 px-3 py-2 rounded-lg text-sm font-medium transition-colors"}," Preview ",8,tL),e("button",{onClick:x=>C(b),class:"flex-1 bg-indigo-600 hover:bg-indigo-700 text-white px-3 py-2 rounded-lg text-sm font-medium transition-colors"}," Use Template ",8,oL)])]))),128))])):(m(),f("div",sL,[k[17]||(k[17]=e("svg",{class:"mx-auto h-12 w-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1)),k[18]||(k[18]=e("h3",{class:"mt-2 text-sm font-medium text-gray-900"},"No templates found",-1)),k[19]||(k[19]=e("p",{class:"mt-1 text-sm text-gray-500"},"Get started by creating your first message template.",-1)),e("div",nL,[e("button",{onClick:k[3]||(k[3]=b=>r.value=!0),class:"bg-indigo-600 hover:bg-indigo-700 text-white px-4 py-2 rounded-lg font-medium transition-colors"}," Create Template ")])])),r.value||i.value?(m(),f("div",rL,[e("div",aL,[e("div",iL,[e("div",lL,[e("h3",dL,y(i.value?"Edit Template":"Create New Template"),1),e("button",{onClick:_,class:"text-gray-400 hover:text-gray-600 transition-colors"},[...k[20]||(k[20]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),e("form",{onSubmit:Oe(B,["prevent"]),class:"space-y-4"},[e("div",null,[k[21]||(k[21]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Template Name",-1)),de(e("input",{"onUpdate:modelValue":k[4]||(k[4]=b=>c.value.name=b),type:"text",required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-colors",placeholder:"Enter template name"},null,512),[[xe,c.value.name]])]),e("div",null,[k[23]||(k[23]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Category",-1)),de(e("select",{"onUpdate:modelValue":k[5]||(k[5]=b=>c.value.category=b),required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-colors"},[...k[22]||(k[22]=[$e('<option value="">Select Category</option><option value="seva">Seva Notifications</option><option value="event">Event Announcements</option><option value="donation">Donation Receipts</option><option value="general">General Messages</option><option value="festival">Festival Greetings</option>',6)])],512),[[Ce,c.value.category]])]),e("div",null,[k[24]||(k[24]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Subject",-1)),de(e("input",{"onUpdate:modelValue":k[6]||(k[6]=b=>c.value.subject=b),type:"text",required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-colors",placeholder:"Enter message subject"},null,512),[[xe,c.value.subject]])]),e("div",null,[k[25]||(k[25]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Message Content",-1)),de(e("textarea",{"onUpdate:modelValue":k[7]||(k[7]=b=>c.value.content=b),rows:"6",required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-colors resize-none",placeholder:"Enter your message content..."},null,512),[[xe,c.value.content]])]),e("div",uL,[e("button",{type:"button",onClick:_,class:"px-4 py-2 text-gray-700 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors"}," Cancel "),e("button",cL,y(i.value?"Update Template":"Create Template"),1)])],32)])])])):Y("",!0),a.value?(m(),f("div",pL,[e("div",mL,[e("div",gL,[e("div",fL,[k[27]||(k[27]=e("h3",{class:"text-lg font-semibold text-gray-900"},"Template Preview",-1)),e("button",{onClick:k[8]||(k[8]=b=>a.value=null),class:"text-gray-400 hover:text-gray-600 transition-colors"},[...k[26]||(k[26]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),e("div",vL,[e("div",null,[k[28]||(k[28]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Subject:",-1)),e("p",hL,y(a.value.subject),1)]),e("div",null,[k[29]||(k[29]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Content:",-1)),e("div",yL,[e("p",xL,y(a.value.content),1)])])]),e("div",bL,[e("button",{onClick:k[9]||(k[9]=b=>a.value=null),class:"px-4 py-2 text-gray-700 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors"}," Close "),e("button",{onClick:k[10]||(k[10]=b=>C(a.value)),class:"px-4 py-2 bg-indigo-600 hover:bg-indigo-700 text-white rounded-lg transition-colors"}," Use This Template ")])])])])):Y("",!0)]))}},kL={name:"BulkMessage",setup(){const t=V(""),o=V(""),s=V(""),n=V([]),r=V(!1),i=V("sms"),a=V(""),l=V(""),d=V(""),c=V(!1),u=V(""),p=V(""),v=V([{id:1,name:"Rajesh Kumar",phone:"+91 98765 43210",location:"Bangalore",status:"active",group:"active",ageGroup:"adult"},{id:2,name:"Priya Sharma",phone:"+91 98765 43211",location:"Mumbai",status:"active",group:"volunteers",ageGroup:"youth"},{id:3,name:"Amit Patel",phone:"+91 98765 43212",location:"Delhi",status:"inactive",group:"donors",ageGroup:"senior"},{id:4,name:"Sunita Devi",phone:"+91 98765 43213",location:"Chennai",status:"active",group:"seva_participants",ageGroup:"adult"},{id:5,name:"Vikram Singh",phone:"+91 98765 43214",location:"Pune",status:"active",group:"active",ageGroup:"youth"}]),g=V({festival_greeting:{subject:"Festival Greetings from {temple}",content:`Dear {name},

Warm festival greetings from {temple}! May this auspicious occasion bring joy, peace, and prosperity to you and your family.

With divine blessings,
{temple} Team`},seva_reminder:{subject:"Seva Reminder - {temple}",content:`Dear {name},

This is a gentle reminder about your upcoming seva at {temple}. Please arrive 15 minutes early for preparation.

Thank you for your devotion.

With regards,
{temple} Team`},donation_thank_you:{subject:"Thank You for Your Donation - {temple}",content:`Dear {name},

Thank you for your generous donation to {temple}. Your contribution helps us serve the community better.

May the divine bless you abundantly.

With gratitude,
{temple} Team`}}),h=te(()=>v.value.filter(L=>{const M=!t.value||L.group===t.value,X=!o.value||L.location.toLowerCase().includes(o.value.toLowerCase()),ee=!s.value||L.ageGroup===s.value;return M&&X&&ee})),D=te(()=>n.value.length),C=te(()=>i.value==="sms"?160:i.value==="whatsapp"?4096:1e4),B=te(()=>d.value.replace(/{name}/g,"Devotee Name").replace(/{temple}/g,"Temple Name")),_=te(()=>n.value.length>0&&d.value.trim()!==""&&(!c.value||u.value&&p.value)),T=()=>{n.value=h.value.map(L=>L.id),r.value=!0},S=()=>{n.value=[],r.value=!1};return{selectedGroup:t,selectedLocation:o,selectedAgeGroup:s,selectedDevotees:n,selectAllChecked:r,messageType:i,selectedTemplate:a,messageSubject:l,messageContent:d,scheduleMessage:c,scheduleDate:u,scheduleTime:p,filteredDevotees:h,selectedCount:D,maxLength:C,previewMessage:B,canSendMessage:_,selectAll:T,clearSelection:S,selectActiveOnly:()=>{n.value=h.value.filter(L=>L.status==="active").map(L=>L.id)},toggleSelectAll:()=>{r.value?T():S()},loadTemplate:()=>{if(a.value&&g.value[a.value]){const L=g.value[a.value];i.value==="email"&&(l.value=L.subject),d.value=L.content}},insertVariable:L=>{const M=document.querySelector("textarea"),X=M.selectionStart,ee=M.selectionEnd,oe=d.value;d.value=oe.substring(0,X)+`{${L}}`+oe.substring(ee)},saveDraft:()=>{console.log("Saving draft...")},sendPreview:()=>{console.log("Sending preview...")},sendMessage:()=>{console.log("Sending message to:",n.value),console.log("Message:",d.value),console.log("Type:",i.value),c.value&&console.log("Scheduled for:",u.value,p.value)}}}},_L={class:"bg-white rounded-2xl shadow-lg p-6"},$L={class:"flex items-center justify-between mb-6"},SL={class:"flex items-center space-x-2"},DL={class:"text-sm text-gray-500"},CL={class:"mb-6"},TL={class:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4"},EL={class:"flex flex-wrap gap-2 mb-4"},AL={class:"border border-gray-200 rounded-lg max-h-64 overflow-y-auto"},IL={class:"p-3 bg-gray-50 border-b border-gray-200 flex items-center space-x-3"},ML={class:"text-sm font-medium text-gray-700"},RL={class:"divide-y divide-gray-200"},PL={class:"flex items-center space-x-3 cursor-pointer"},jL=["value"],NL={class:"flex items-center space-x-3 flex-1"},LL={class:"w-8 h-8 bg-indigo-100 rounded-full flex items-center justify-center"},BL={class:"text-sm font-medium text-indigo-600"},VL={class:"flex-1"},UL={class:"text-sm font-medium text-gray-900"},FL={class:"text-xs text-gray-500"},OL={class:"flex items-center space-x-2"},zL={class:"mb-6"},HL={class:"flex space-x-4 mb-4"},qL={class:"flex items-center space-x-2 cursor-pointer"},GL={class:"flex items-center space-x-2 cursor-pointer"},WL={class:"flex items-center space-x-2 cursor-pointer"},JL={class:"mb-4"},YL={key:0,class:"mb-4"},KL={class:"mb-4"},XL={class:"flex justify-between items-center mt-2"},ZL={class:"text-xs text-gray-500"},QL={class:"mb-4"},eB={key:0,class:"grid grid-cols-1 md:grid-cols-2 gap-4"},tB={key:0,class:"mb-6"},oB={class:"bg-gray-50 border border-gray-200 rounded-lg p-4"},sB={class:"flex items-center space-x-2 mb-3"},nB={class:"text-sm font-medium text-gray-700"},rB={key:0,class:"mb-2"},aB={class:"text-sm font-medium text-gray-900"},iB={class:"text-sm text-gray-800 whitespace-pre-wrap"},lB={class:"flex flex-col sm:flex-row gap-3 sm:justify-end"},dB=["disabled"];function uB(t,o,s,n,r,i){return m(),f("div",_L,[e("div",$L,[o[18]||(o[18]=$e('<div class="flex items-center space-x-3"><div class="p-2 bg-indigo-100 rounded-lg"><svg class="w-6 h-6 text-indigo-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"></path></svg></div><div><h2 class="text-xl font-semibold text-gray-900">Bulk Message</h2><p class="text-sm text-gray-600">Send messages to multiple devotees at once</p></div></div>',1)),e("div",SL,[e("span",DL,"Selected: "+y(n.selectedCount),1),o[17]||(o[17]=e("div",{class:"w-2 h-2 bg-indigo-500 rounded-full"},null,-1))])]),e("div",CL,[o[21]||(o[21]=e("h3",{class:"text-lg font-medium text-gray-900 mb-4"},"Select Recipients",-1)),e("div",TL,[e("div",null,[o[20]||(o[20]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Filter by Group",-1)),de(e("select",{"onUpdate:modelValue":o[0]||(o[0]=a=>n.selectedGroup=a),class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-all duration-200"},[...o[19]||(o[19]=[e("option",{value:""},"All Devotees",-1),e("option",{value:"active"},"Active Devotees",-1),e("option",{value:"volunteers"},"Volunteers",-1)])],512),[[Ce,n.selectedGroup]])])]),e("div",EL,[e("button",{onClick:o[1]||(o[1]=(...a)=>n.selectAll&&n.selectAll(...a)),class:"px-4 py-2 bg-indigo-100 text-indigo-700 rounded-lg hover:bg-indigo-200 transition-all duration-200 text-sm font-medium"}," Select All "),e("button",{onClick:o[2]||(o[2]=(...a)=>n.clearSelection&&n.clearSelection(...a)),class:"px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-all duration-200 text-sm font-medium"}," Clear Selection "),e("button",{onClick:o[3]||(o[3]=(...a)=>n.selectActiveOnly&&n.selectActiveOnly(...a)),class:"px-4 py-2 bg-green-100 text-green-700 rounded-lg hover:bg-green-200 transition-all duration-200 text-sm font-medium"}," Active Only ")]),e("div",AL,[e("div",IL,[de(e("input",{type:"checkbox","onUpdate:modelValue":o[4]||(o[4]=a=>n.selectAllChecked=a),onChange:o[5]||(o[5]=(...a)=>n.toggleSelectAll&&n.toggleSelectAll(...a)),class:"w-4 h-4 text-indigo-600 border-gray-300 rounded focus:ring-indigo-500"},null,544),[[ot,n.selectAllChecked]]),e("span",ML,"Select All ("+y(n.filteredDevotees.length)+")",1)]),e("div",RL,[(m(!0),f(he,null,ke(n.filteredDevotees,a=>(m(),f("div",{key:a.id,class:"p-3 hover:bg-gray-50 transition-colors duration-150"},[e("label",PL,[de(e("input",{type:"checkbox","onUpdate:modelValue":o[6]||(o[6]=l=>n.selectedDevotees=l),value:a.id,class:"w-4 h-4 text-indigo-600 border-gray-300 rounded focus:ring-indigo-500"},null,8,jL),[[ot,n.selectedDevotees]]),e("div",NL,[e("div",LL,[e("span",BL,y(a.name.charAt(0)),1)]),e("div",VL,[e("p",UL,y(a.name),1),e("p",FL,y(a.phone)+"  "+y(a.location),1)]),e("div",OL,[e("span",{class:ie(["px-2 py-1 rounded-full text-xs font-medium",a.status==="active"?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"])},y(a.status),3)])])])]))),128))])])]),e("div",zL,[o[32]||(o[32]=e("h3",{class:"text-lg font-medium text-gray-900 mb-4"},"Compose Message",-1)),e("div",HL,[e("label",qL,[de(e("input",{type:"radio","onUpdate:modelValue":o[7]||(o[7]=a=>n.messageType=a),value:"sms",class:"w-4 h-4 text-indigo-600 border-gray-300 focus:ring-indigo-500"},null,512),[[cs,n.messageType]]),o[22]||(o[22]=e("span",{class:"text-sm font-medium text-gray-700"},"SMS",-1))]),e("label",GL,[de(e("input",{type:"radio","onUpdate:modelValue":o[8]||(o[8]=a=>n.messageType=a),value:"whatsapp",class:"w-4 h-4 text-indigo-600 border-gray-300 focus:ring-indigo-500"},null,512),[[cs,n.messageType]]),o[23]||(o[23]=e("span",{class:"text-sm font-medium text-gray-700"},"WhatsApp",-1))]),e("label",WL,[de(e("input",{type:"radio","onUpdate:modelValue":o[9]||(o[9]=a=>n.messageType=a),value:"email",class:"w-4 h-4 text-indigo-600 border-gray-300 focus:ring-indigo-500"},null,512),[[cs,n.messageType]]),o[24]||(o[24]=e("span",{class:"text-sm font-medium text-gray-700"},"Email",-1))])]),e("div",JL,[o[26]||(o[26]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Use Template (Optional)",-1)),de(e("select",{"onUpdate:modelValue":o[10]||(o[10]=a=>n.selectedTemplate=a),onChange:o[11]||(o[11]=(...a)=>n.loadTemplate&&n.loadTemplate(...a)),class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-all duration-200"},[...o[25]||(o[25]=[$e('<option value="">Select a template...</option><option value="festival_greeting">Festival Greeting</option><option value="seva_reminder">Seva Reminder</option><option value="donation_thank_you">Donation Thank You</option><option value="event_announcement">Event Announcement</option><option value="general_announcement">General Announcement</option>',6)])],544),[[Ce,n.selectedTemplate]])]),n.messageType==="email"?(m(),f("div",YL,[o[27]||(o[27]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Subject",-1)),de(e("input",{"onUpdate:modelValue":o[12]||(o[12]=a=>n.messageSubject=a),type:"text",placeholder:"Enter email subject...",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-all duration-200"},null,512),[[xe,n.messageSubject]])])):Y("",!0),e("div",KL,[o[29]||(o[29]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Message Content",-1)),de(e("textarea",{"onUpdate:modelValue":o[13]||(o[13]=a=>n.messageContent=a),rows:"6",placeholder:"Type your message here...",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-all duration-200 resize-none"},null,512),[[xe,n.messageContent]]),e("div",XL,[e("p",ZL,y(n.messageContent.length)+"/"+y(n.maxLength)+" characters",1),o[28]||(o[28]=e("div",{class:"flex space-x-2"},null,-1))])]),e("div",QL,[n.scheduleMessage?(m(),f("div",eB,[e("div",null,[o[30]||(o[30]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Date",-1)),de(e("input",{"onUpdate:modelValue":o[14]||(o[14]=a=>n.scheduleDate=a),type:"date",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-all duration-200"},null,512),[[xe,n.scheduleDate]])]),e("div",null,[o[31]||(o[31]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Time",-1)),de(e("input",{"onUpdate:modelValue":o[15]||(o[15]=a=>n.scheduleTime=a),type:"time",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-all duration-200"},null,512),[[xe,n.scheduleTime]])])])):Y("",!0)])]),n.messageContent?(m(),f("div",tB,[o[34]||(o[34]=e("h3",{class:"text-lg font-medium text-gray-900 mb-4"},"Message Preview",-1)),e("div",oB,[e("div",sB,[o[33]||(o[33]=e("div",{class:"w-2 h-2 bg-indigo-500 rounded-full"},null,-1)),e("span",nB,y(n.messageType.toUpperCase())+" Message",1)]),n.messageType==="email"?(m(),f("div",rB,[e("p",aB,"Subject: "+y(n.messageSubject||"No Subject"),1)])):Y("",!0),e("p",iB,y(n.previewMessage),1)])])):Y("",!0),e("div",lB,[e("button",{onClick:o[16]||(o[16]=(...a)=>n.sendMessage&&n.sendMessage(...a)),disabled:!n.canSendMessage,class:ie(["px-6 py-2 rounded-lg font-medium transition-all duration-200",n.canSendMessage?"bg-indigo-600 text-white hover:bg-indigo-700 shadow-md hover:shadow-lg":"bg-gray-300 text-gray-500 cursor-not-allowed"])},y(n.scheduleMessage?"Schedule Message":"Send Message"),11,dB)])])}const cB=Qe(kL,[["render",uB]]),pB={class:"bg-white rounded-xl shadow-md"},mB={class:"px-6 py-4 border-b border-gray-200 bg-gray-50"},gB={class:"grid grid-cols-1 md:grid-cols-4 gap-4"},fB={class:"mt-4"},vB={class:"relative"},hB={class:"overflow-x-auto"},yB={class:"w-full"},xB={class:"bg-white divide-y divide-gray-200"},bB={class:"px-6 py-4"},wB={class:"max-w-xs"},kB={class:"text-sm font-medium text-gray-900 truncate"},_B={class:"text-sm text-gray-600 truncate"},$B={class:"flex items-center mt-1 space-x-2"},SB={class:"px-6 py-4"},DB={class:"text-sm text-gray-900"},CB={class:"flex items-center space-x-2"},TB={class:"font-medium"},EB={key:0,class:"text-xs text-gray-500 mt-1"},AB={class:"px-6 py-4"},IB={class:"flex items-center space-x-2"},MB={class:"text-sm text-gray-900 capitalize"},RB={class:"px-6 py-4"},PB={class:"space-y-1"},jB={class:"text-xs text-gray-500"},NB={class:"px-6 py-4 text-sm text-gray-900"},LB={class:"text-xs text-gray-500"},BB={class:"px-6 py-4"},VB={class:"flex items-center space-x-2"},UB=["onClick"],FB=["onClick"],OB=["onClick"],zB={key:0,class:"text-center py-12"},HB={key:1,class:"px-6 py-4 border-t border-gray-200 bg-gray-50"},qB={class:"flex items-center justify-between"},GB={class:"text-sm text-gray-700"},WB={class:"flex items-center space-x-2"},JB=["disabled"],YB={class:"text-sm text-gray-700"},KB=["disabled"],XB={key:0,class:"fixed inset-0 z-50 overflow-y-auto","aria-labelledby":"modal-title",role:"dialog","aria-modal":"true"},ZB={class:"flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0"},QB={class:"inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-4xl sm:w-full"},eV={class:"bg-white px-6 py-4"},tV={class:"mt-6 grid grid-cols-1 lg:grid-cols-2 gap-6"},oV={class:"space-y-3"},sV={class:"text-sm text-gray-900 font-medium"},nV={class:"text-sm text-gray-900"},rV={class:"text-sm text-gray-900 capitalize"},aV={class:"text-sm text-gray-900"},iV={class:"space-y-3"},lV={class:"text-sm text-gray-900 font-medium"},dV={class:"text-sm text-green-600 font-medium"},uV={class:"text-sm text-red-600 font-medium"},cV={class:"text-sm text-yellow-600 font-medium"},pV={class:"text-sm text-gray-900 font-medium"},mV={__name:"MessageHistory",props:{filter:String,dateFilter:String},emits:["resendMessage","viewDetails"],setup(t){const o=V([]),s=V(!1),n=V(""),r=V(null),i=V(1),a=V(10),l=V({dateRange:"all",messageType:"all",status:"all",channel:"all"}),d=te(()=>{let F=o.value;if(n.value){const E=n.value.toLowerCase();F=F.filter(O=>{var N,L;return((N=O.subject)==null?void 0:N.toLowerCase().includes(E))||((L=O.title)==null?void 0:L.toLowerCase().includes(E))||O.content.toLowerCase().includes(E)})}return l.value.messageType!=="all"&&(F=F.filter(E=>E.type===l.value.messageType)),l.value.status!=="all"&&(F=F.filter(E=>E.deliveryStatus===l.value.status)),l.value.channel!=="all"&&(F=F.filter(E=>E.channel===l.value.channel)),F}),c=te(()=>Math.ceil(d.value.length/a.value)),u=F=>({bulk:"bg-blue-100 text-blue-800",event:"bg-purple-100 text-purple-800",seva:"bg-orange-100 text-orange-800",donation:"bg-green-100 text-green-800",announcement:"bg-indigo-100 text-indigo-800"})[F]||"bg-gray-100 text-gray-800",p=F=>({bulk:"Bulk Message",event:"Event Notification",seva:"Seva Reminder",donation:"Donation Receipt",announcement:"Announcement"})[F]||"Message",v=F=>({email:"bg-blue-100 text-blue-600",sms:"bg-green-100 text-green-600",whatsapp:"bg-green-100 text-green-600",push:"bg-purple-100 text-purple-600"})[F]||"bg-gray-100 text-gray-600",g=F=>"svg",h=F=>({sent:"bg-blue-100 text-blue-800",delivered:"bg-green-100 text-green-800",failed:"bg-red-100 text-red-800",pending:"bg-yellow-100 text-yellow-800"})[F]||"bg-gray-100 text-gray-800",D=F=>({sent:"Sent",delivered:"Delivered",failed:"Failed",pending:"Pending"})[F]||"Unknown",C=F=>new Date(F).toLocaleDateString(),B=F=>new Date(F).toLocaleTimeString(),_=F=>new Date(F).toLocaleString(),T=F=>{r.value=F},S=()=>{r.value=null},k=F=>{console.log("Resending message:",F.id)},b=F=>{console.log("Downloading report for message:",F.id)},x=()=>{console.log("Exporting message history")};return Ee(()=>{s.value=!0,o.value=[{id:1,subject:"Ganesha Chaturthi Celebration",content:"Join us for the grand Ganesha Chaturthi celebration on August 31st...",type:"event",channel:"email",deliveryStatus:"delivered",recipientCount:245,deliveredCount:242,failedCount:3,pendingCount:0,recipientGroups:["All Devotees","Volunteers"],sentAt:"2024-08-25T10:30:00Z",sentBy:"Temple Admin"},{id:2,title:"Weekly Seva Reminder",content:"This is a reminder for your upcoming seva booking...",type:"seva",channel:"sms",deliveryStatus:"delivered",recipientCount:89,deliveredCount:87,failedCount:2,pendingCount:0,recipientGroups:["Seva Participants"],sentAt:"2024-08-24T08:00:00Z",sentBy:"System"},{id:3,subject:"Donation Receipt",content:"Thank you for your generous donation of 5,000...",type:"donation",channel:"email",deliveryStatus:"delivered",recipientCount:1,deliveredCount:1,failedCount:0,pendingCount:0,recipientGroups:["Individual"],sentAt:"2024-08-23T14:15:00Z",sentBy:"System"},{id:4,title:"Temple Announcement",content:"Important announcement regarding temple timings...",type:"announcement",channel:"whatsapp",deliveryStatus:"failed",recipientCount:156,deliveredCount:0,failedCount:156,pendingCount:0,recipientGroups:["All Devotees"],sentAt:"2024-08-22T16:45:00Z",sentBy:"Temple Admin"},{id:5,subject:"Monthly Newsletter",content:"Read about this month's temple activities and upcoming events...",type:"bulk",channel:"email",deliveryStatus:"pending",recipientCount:324,deliveredCount:298,failedCount:12,pendingCount:14,recipientGroups:["All Devotees","Volunteers","Donors"],sentAt:"2024-08-21T09:00:00Z",sentBy:"Temple Admin"}],s.value=!1}),(F,E)=>(m(),f(he,null,[e("div",pB,[e("div",{class:"px-6 py-4 border-b border-gray-200"},[e("div",{class:"flex items-center justify-between"},[E[8]||(E[8]=e("div",null,[e("h3",{class:"text-lg font-semibold text-gray-900"},"Message History"),e("p",{class:"text-sm text-gray-600"},"View all sent messages and their delivery status")],-1)),e("div",{class:"flex items-center space-x-3"},[e("button",{onClick:x,class:"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors duration-200 flex items-center space-x-2"},[...E[7]||(E[7]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1),e("span",null,"Export",-1)])])])])]),e("div",mB,[e("div",gB,[e("div",null,[E[10]||(E[10]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Date Range",-1)),de(e("select",{"onUpdate:modelValue":E[0]||(E[0]=O=>l.value.dateRange=O),class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"},[...E[9]||(E[9]=[$e('<option value="all">All Time</option><option value="today">Today</option><option value="week">This Week</option><option value="month">This Month</option><option value="custom">Custom Range</option>',5)])],512),[[Ce,l.value.dateRange]])]),e("div",null,[E[12]||(E[12]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Message Type",-1)),de(e("select",{"onUpdate:modelValue":E[1]||(E[1]=O=>l.value.messageType=O),class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"},[...E[11]||(E[11]=[$e('<option value="all">All Types</option><option value="bulk">Bulk Message</option><option value="event">Event Notification</option><option value="seva">Seva Reminder</option><option value="donation">Donation Receipt</option><option value="announcement">Announcement</option>',6)])],512),[[Ce,l.value.messageType]])]),e("div",null,[E[14]||(E[14]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Delivery Status",-1)),de(e("select",{"onUpdate:modelValue":E[2]||(E[2]=O=>l.value.status=O),class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"},[...E[13]||(E[13]=[$e('<option value="all">All Status</option><option value="sent">Sent</option><option value="delivered">Delivered</option><option value="failed">Failed</option><option value="pending">Pending</option>',5)])],512),[[Ce,l.value.status]])]),e("div",null,[E[16]||(E[16]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Channel",-1)),de(e("select",{"onUpdate:modelValue":E[3]||(E[3]=O=>l.value.channel=O),class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"},[...E[15]||(E[15]=[$e('<option value="all">All Channels</option><option value="email">Email</option><option value="sms">SMS</option><option value="whatsapp">WhatsApp</option><option value="push">Push Notification</option>',5)])],512),[[Ce,l.value.channel]])])]),e("div",fB,[e("div",vB,[de(e("input",{"onUpdate:modelValue":E[4]||(E[4]=O=>n.value=O),type:"text",placeholder:"Search by message content, recipient name, or subject...",class:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"},null,512),[[xe,n.value]]),E[17]||(E[17]=e("svg",{class:"absolute left-3 top-2.5 h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})],-1))])])]),e("div",hB,[e("table",yB,[E[22]||(E[22]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Message"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Recipients"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Channel"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Status"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Sent Date"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Actions")])],-1)),e("tbody",xB,[(m(!0),f(he,null,ke(d.value,O=>(m(),f("tr",{key:O.id,class:"hover:bg-gray-50 transition-colors duration-150"},[e("td",bB,[e("div",wB,[e("p",kB,y(O.subject||O.title),1),e("p",_B,y(O.content),1),e("div",$B,[e("span",{class:ie([u(O.type),"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium"])},y(p(O.type)),3)])])]),e("td",SB,[e("div",DB,[e("div",CB,[e("span",TB,y(O.recipientCount),1),E[18]||(E[18]=e("span",{class:"text-gray-600"},"recipients",-1))]),O.recipientGroups?(m(),f("div",EB,y(O.recipientGroups.join(", ")),1)):Y("",!0)])]),e("td",AB,[e("div",IB,[e("div",{class:ie([v(O.channel),"w-8 h-8 rounded-full flex items-center justify-center"])},[(m(),Re(xt(g(O.channel)),{class:"w-4 h-4"}))],2),e("span",MB,y(O.channel),1)])]),e("td",RB,[e("div",PB,[e("span",{class:ie([h(O.deliveryStatus),"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium"])},y(D(O.deliveryStatus)),3),e("div",jB,y(O.deliveredCount)+"/"+y(O.recipientCount)+" delivered ",1)])]),e("td",NB,[e("div",null,y(C(O.sentAt)),1),e("div",LB,y(B(O.sentAt)),1)]),e("td",BB,[e("div",VB,[e("button",{onClick:N=>T(O),class:"text-indigo-600 hover:text-indigo-800 transition-colors duration-200",title:"View Details"},[...E[19]||(E[19]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})],-1)])],8,UB),O.deliveryStatus==="failed"?(m(),f("button",{key:0,onClick:N=>k(O),class:"text-green-600 hover:text-green-800 transition-colors duration-200",title:"Resend Message"},[...E[20]||(E[20]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})],-1)])],8,FB)):Y("",!0),e("button",{onClick:N=>b(O),class:"text-gray-600 hover:text-gray-800 transition-colors duration-200",title:"Download Report"},[...E[21]||(E[21]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1)])],8,OB)])])]))),128))])])]),d.value.length===0?(m(),f("div",zB,[...E[23]||(E[23]=[e("svg",{class:"mx-auto h-12 w-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-3.582 8-8 8a8.959 8.959 0 01-4.906-1.456A3.975 3.975 0 000 16c0-1.105.895-2 2-2h1.09a8.969 8.969 0 000-4H2c-1.105 0-2-.895-2-2 0-1.105.895-2 2-2h1.09a8.969 8.969 0 000-4H2c-1.105 0-2-.895-2-2s.895-2 2-2h1.09C5.456 2.59 8.646 0 12.01 0 17.424 0 21.818 3.582 21.818 8c0 1.105-.895 2-2 2h-1.09a8.969 8.969 0 000 4h1.09c1.105 0 2 .895 2 2z"})],-1),e("h3",{class:"mt-2 text-sm font-medium text-gray-900"},"No messages found",-1),e("p",{class:"mt-1 text-sm text-gray-500"},"No messages match your current filters.",-1)])])):Y("",!0),d.value.length>0?(m(),f("div",HB,[e("div",qB,[e("div",GB," Showing "+y((i.value-1)*a.value+1)+" to "+y(Math.min(i.value*a.value,d.value.length))+" of "+y(d.value.length)+" messages ",1),e("div",WB,[e("button",{onClick:E[5]||(E[5]=O=>i.value=Math.max(1,i.value-1)),disabled:i.value===1,class:"px-3 py-1 border border-gray-300 rounded-md text-sm text-gray-700 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed"}," Previous ",8,JB),e("span",YB,y(i.value)+" of "+y(c.value),1),e("button",{onClick:E[6]||(E[6]=O=>i.value=Math.min(c.value,i.value+1)),disabled:i.value===c.value,class:"px-3 py-1 border border-gray-300 rounded-md text-sm text-gray-700 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed"}," Next ",8,KB)])])])):Y("",!0)]),r.value?(m(),f("div",XB,[e("div",ZB,[e("div",{class:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity",onClick:S}),e("div",QB,[e("div",eV,[e("div",{class:"flex items-center justify-between border-b border-gray-200 pb-4"},[E[25]||(E[25]=e("h3",{class:"text-lg font-semibold text-gray-900"},"Message Details",-1)),e("button",{onClick:S,class:"text-gray-400 hover:text-gray-600"},[...E[24]||(E[24]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),e("div",tV,[e("div",null,[E[31]||(E[31]=e("h4",{class:"text-sm font-medium text-gray-900 mb-3"},"Message Information",-1)),e("dl",oV,[e("div",null,[E[26]||(E[26]=e("dt",{class:"text-sm text-gray-500"},"Subject/Title",-1)),e("dd",sV,y(r.value.subject||r.value.title),1)]),e("div",null,[E[27]||(E[27]=e("dt",{class:"text-sm text-gray-500"},"Content",-1)),e("dd",nV,y(r.value.content),1)]),e("div",null,[E[28]||(E[28]=e("dt",{class:"text-sm text-gray-500"},"Type",-1)),e("dd",null,[e("span",{class:ie([u(r.value.type),"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium"])},y(p(r.value.type)),3)])]),e("div",null,[E[29]||(E[29]=e("dt",{class:"text-sm text-gray-500"},"Channel",-1)),e("dd",rV,y(r.value.channel),1)]),e("div",null,[E[30]||(E[30]=e("dt",{class:"text-sm text-gray-500"},"Sent Date",-1)),e("dd",aV,y(_(r.value.sentAt)),1)])])]),e("div",null,[E[37]||(E[37]=e("h4",{class:"text-sm font-medium text-gray-900 mb-3"},"Delivery Statistics",-1)),e("dl",iV,[e("div",null,[E[32]||(E[32]=e("dt",{class:"text-sm text-gray-500"},"Total Recipients",-1)),e("dd",lV,y(r.value.recipientCount),1)]),e("div",null,[E[33]||(E[33]=e("dt",{class:"text-sm text-gray-500"},"Delivered",-1)),e("dd",dV,y(r.value.deliveredCount),1)]),e("div",null,[E[34]||(E[34]=e("dt",{class:"text-sm text-gray-500"},"Failed",-1)),e("dd",uV,y(r.value.failedCount||0),1)]),e("div",null,[E[35]||(E[35]=e("dt",{class:"text-sm text-gray-500"},"Pending",-1)),e("dd",cV,y(r.value.pendingCount||0),1)]),e("div",null,[E[36]||(E[36]=e("dt",{class:"text-sm text-gray-500"},"Delivery Rate",-1)),e("dd",pV,y((r.value.deliveredCount/r.value.recipientCount*100).toFixed(1))+"%",1)])])])])])])])])):Y("",!0)],64))}},gV={class:"min-h-screen bg-gray-50"},fV={class:"bg-white border-b border-gray-200"},vV={class:"flex space-x-8 px-4 sm:px-6"},hV=["onClick"],yV={class:"flex items-center space-x-2"},xV={key:0,class:"bg-gray-100 text-gray-900 py-0.5 px-2 rounded-full text-xs"},bV={class:"p-4 sm:p-6"},wV={key:0,class:"space-y-6"},kV={class:"bg-white rounded-xl shadow-sm border border-gray-200"},_V={class:"p-6"},$V={key:1,class:"space-y-6"},SV={class:"bg-white rounded-xl shadow-sm border border-gray-200"},DV={class:"p-6"},CV={key:2,class:"space-y-6"},TV={class:"bg-white rounded-xl shadow-sm border border-gray-200"},EV={class:"p-6"},AV={key:3,class:"space-y-6"},IV={class:"bg-white rounded-xl shadow-sm border border-gray-200"},MV={class:"p-6"},RV={key:4,class:"space-y-6"},PV={class:"grid grid-cols-1 lg:grid-cols-2 gap-6"},jV={class:"bg-white rounded-xl shadow-sm border border-gray-200 p-6"},NV={class:"space-y-4"},LV={class:"flex items-center justify-between"},BV={class:"font-semibold text-gray-900"},VV={class:"flex items-center justify-between"},UV={class:"font-semibold text-gray-900"},FV={class:"flex items-center justify-between"},OV={class:"font-semibold text-gray-900"},zV={class:"flex items-center justify-between"},HV={class:"font-semibold text-green-600"},qV={class:"bg-white rounded-xl shadow-sm border border-gray-200 p-6"},GV={class:"space-y-3"},WV={class:"font-medium text-gray-900"},JV={class:"text-sm text-gray-500"},YV={class:"text-sm font-medium text-indigo-600"},KV={class:"bg-white rounded-xl shadow-sm border border-gray-200 p-6"},XV={class:"space-y-4"},ZV={class:"flex-1"},QV={class:"font-medium text-gray-900"},eU={class:"text-sm text-gray-500"},tU={key:0,class:"fixed bottom-4 right-4 bg-green-500 text-white px-6 py-3 rounded-lg shadow-lg transition-all duration-300 z-50"},oU={class:"flex items-center space-x-2"},sU={__name:"CommunicationCenter",setup(t){const s=Ze().params.id,n=V("compose"),r=V("all"),i=V("");V(!1);const a=V(!1),l=V(""),d=Je({totalMessages:1247,deliveredMessages:1195,activeTemplates:12}),c=Je({today:23,week:156,month:678,deliveryRate:95.8}),u=te(()=>[{id:"compose",name:"Compose",icon:Iu,count:null},{id:"templates",name:"Templates",icon:jN,count:d.activeTemplates}]),p=V([{id:1,name:"Seva Reminder",category:"Seva",usage:89},{id:2,name:"Festival Invitation",category:"Event",usage:67},{id:3,name:"Donation Receipt",category:"Finance",usage:45},{id:4,name:"Welcome Message",category:"General",usage:34}]),v=V([{id:1,message:"Bulk message sent to 45 devotees about upcoming Diwali celebration",time:"2 hours ago",type:"sent",status:"Sent"},{id:2,message:"Seva reminder delivered to all registered volunteers",time:"4 hours ago",type:"delivered",status:"Delivered"},{id:3,message:"Welcome message sent to new devotee registrations",time:"6 hours ago",type:"delivered",status:"Delivered"},{id:4,message:"Event notification failed to deliver to 3 recipients",time:"1 day ago",type:"failed",status:"Failed"}]),g=x=>{d.totalMessages++,d.deliveredMessages++,b("Message sent successfully!")},h=x=>{d.totalMessages+=x.recipientCount,d.deliveredMessages+=x.deliveredCount,b(`Bulk message sent to ${x.recipientCount} recipients!`)},D=x=>{d.activeTemplates++,b("Template saved successfully!")},C=x=>{n.value="compose"},B=x=>{b("Template updated successfully!")},_=x=>{d.activeTemplates--,b("Template deleted successfully!")},T=x=>{console.log("Preview requested:",x)},S=x=>{b("Message resent successfully!")},k=x=>{console.log("View details for message:",x)},b=x=>{l.value=x,a.value=!0,setTimeout(()=>{a.value=!1},3e3)};return Ee(()=>{console.log("Communication Center loaded for temple:",s)}),(x,F)=>(m(),f("div",gV,[F[9]||(F[9]=e("div",{class:"bg-white border-b border-gray-200 px-4 py-6 sm:px-6"},[e("div",{class:"flex items-center justify-between"},[e("div",null,[e("h1",{class:"text-2xl font-bold text-gray-900"},"Communication Center"),e("p",{class:"mt-1 text-sm text-gray-600"}," Send messages, manage templates, and track communication history ")])])],-1)),e("div",fV,[e("nav",vV,[(m(!0),f(he,null,ke(u.value,E=>(m(),f("button",{key:E.id,onClick:O=>n.value=E.id,class:ie(["py-4 px-1 border-b-2 font-medium text-sm transition-colors duration-200",n.value===E.id?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"])},[e("div",yV,[(m(),Re(xt(E.icon),{class:"w-5 h-5"})),e("span",null,y(E.name),1),E.count?(m(),f("span",xV,y(E.count),1)):Y("",!0)])],10,hV))),128))])]),e("div",bV,[n.value==="compose"?(m(),f("div",wV,[e("div",kV,[e("div",_V,[F[0]||(F[0]=e("h2",{class:"text-lg font-semibold text-gray-900 mb-4"},"Compose New Message",-1)),re(op,{onMessageSent:g,onSaveTemplate:D})])])])):Y("",!0),n.value==="bulk"?(m(),f("div",$V,[e("div",SV,[e("div",DV,[F[1]||(F[1]=e("h2",{class:"text-lg font-semibold text-gray-900 mb-4"},"Bulk Messaging",-1)),re(cB,{onBulkSent:h,onPreviewRequested:T})])])])):Y("",!0),n.value==="templates"?(m(),f("div",CV,[e("div",TV,[e("div",EV,[re(wL,{onTemplateSelected:C,onTemplateEdited:B,onTemplateDeleted:_})])])])):Y("",!0),n.value==="history"?(m(),f("div",AV,[e("div",IV,[e("div",MV,[re(mV,{filter:r.value,"date-filter":i.value,onResendMessage:S,onViewDetails:k},null,8,["filter","date-filter"])])])])):Y("",!0),n.value==="analytics"?(m(),f("div",RV,[e("div",PV,[e("div",jV,[F[6]||(F[6]=e("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Message Statistics",-1)),e("div",NV,[e("div",LV,[F[2]||(F[2]=e("span",{class:"text-gray-600"},"Messages Sent Today",-1)),e("span",BV,y(c.today),1)]),e("div",VV,[F[3]||(F[3]=e("span",{class:"text-gray-600"},"This Week",-1)),e("span",UV,y(c.week),1)]),e("div",FV,[F[4]||(F[4]=e("span",{class:"text-gray-600"},"This Month",-1)),e("span",OV,y(c.month),1)]),e("div",zV,[F[5]||(F[5]=e("span",{class:"text-gray-600"},"Delivery Rate",-1)),e("span",HV,y(c.deliveryRate)+"%",1)])])]),e("div",qV,[F[7]||(F[7]=e("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Popular Templates",-1)),e("div",GV,[(m(!0),f(he,null,ke(p.value,E=>(m(),f("div",{key:E.id,class:"flex items-center justify-between p-3 bg-gray-50 rounded-lg"},[e("div",null,[e("div",WV,y(E.name),1),e("div",JV,y(E.category),1)]),e("div",YV,y(E.usage)+" uses ",1)]))),128))])])]),e("div",KV,[F[8]||(F[8]=e("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Recent Activity",-1)),e("div",XV,[(m(!0),f(he,null,ke(v.value,E=>(m(),f("div",{key:E.id,class:"flex items-center space-x-4 p-4 bg-gray-50 rounded-lg"},[e("div",{class:ie(["w-10 h-10 rounded-full flex items-center justify-center",E.type==="sent"?"bg-blue-100 text-blue-600":E.type==="delivered"?"bg-green-100 text-green-600":"bg-red-100 text-red-600"])},[re(_e(Iu),{class:"w-5 h-5"})],2),e("div",ZV,[e("div",QV,y(E.message),1),e("div",eU,y(E.time),1)]),e("div",{class:ie(["px-3 py-1 rounded-full text-xs font-medium",E.type==="sent"?"bg-blue-100 text-blue-800":E.type==="delivered"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"])},y(E.status),3)]))),128))])])])):Y("",!0)]),a.value?(m(),f("div",tU,[e("div",oU,[re(_e(na),{class:"w-5 h-5"}),e("span",null,y(l.value),1)])])):Y("",!0)]))}},nU={class:"min-h-screen bg-gray-50"},rU={class:"bg-white shadow-sm border-b border-gray-200"},aU={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},iU={class:"py-6"},lU={class:"flex items-center justify-between"},dU={class:"mt-1 text-sm text-gray-600"},uU={class:"flex space-x-3"},cU={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},pU={class:"grid grid-cols-1 lg:grid-cols-4 gap-8"},mU={class:"lg:col-span-4"},gU={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8"},fU={class:"bg-white rounded-xl shadow-sm border border-gray-200 p-6"},vU={class:"flex items-center"},hU={class:"ml-4"},yU={class:"text-2xl font-bold text-gray-900"},xU={class:"bg-white rounded-xl shadow-sm border border-gray-200 p-6"},bU={class:"flex items-center"},wU={class:"ml-4"},kU={class:"text-2xl font-bold text-gray-900"},_U={class:"bg-white rounded-xl shadow-sm border border-gray-200 p-6"},$U={class:"flex items-center"},SU={class:"ml-4"},DU={class:"text-2xl font-bold text-gray-900"},CU={class:"bg-white rounded-xl shadow-sm border border-gray-200 p-6"},TU={class:"flex items-center"},EU={class:"ml-4"},AU={class:"text-2xl font-bold text-gray-900"},IU={class:"lg:col-span-4"},MU={class:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 mb-6"},RU={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4"},PU={class:"relative"},jU={class:"lg:col-span-4"},NU={class:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden"},LU={class:"px-6 py-4 border-b border-gray-200"},BU={class:"text-lg font-medium text-gray-900"},VU={key:0,class:"p-8 text-center"},UU={key:1,class:"p-8 text-center"},FU={class:"mt-1 text-sm text-gray-500"},OU={key:2,class:"overflow-x-auto"},zU={class:"min-w-full divide-y divide-gray-200"},HU={class:"bg-white divide-y divide-gray-200"},qU={class:"px-6 py-4 whitespace-nowrap"},GU={class:"flex items-center"},WU={class:"flex-shrink-0 h-10 w-10"},JU=["src","alt"],YU={key:1,class:"h-10 w-10 rounded-full bg-indigo-100 flex items-center justify-center"},KU={class:"text-sm font-medium text-indigo-600"},XU={class:"ml-4"},ZU={class:"text-sm font-medium text-gray-900"},QU={class:"text-sm text-gray-500"},eF={class:"px-6 py-4 whitespace-nowrap"},tF={class:"text-sm text-gray-900"},oF={class:"text-sm text-gray-500"},sF={class:"px-6 py-4 whitespace-nowrap"},nF={class:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800"},rF={class:"px-6 py-4 whitespace-nowrap"},aF={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},iF={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},lF={class:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium"},dF={class:"flex items-center justify-end space-x-2"},uF=["onClick"],cF=["onClick"],pF=["onClick","title"],mF={key:0,class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},gF={key:1,class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},fF={key:3,class:"bg-white px-4 py-3 border-t border-gray-200 sm:px-6"},vF={class:"flex items-center justify-between"},hF={class:"flex-1 flex justify-between sm:hidden"},yF=["disabled"],xF=["disabled"],bF={class:"hidden sm:flex-1 sm:flex sm:items-center sm:justify-between"},wF={class:"text-sm text-gray-700"},kF={class:"font-medium"},_F={class:"font-medium"},$F={class:"font-medium"},SF={class:"relative z-0 inline-flex rounded-md shadow-sm -space-x-px","aria-label":"Pagination"},DF=["disabled"],CF=["onClick"],TF=["disabled"],EF={key:0,class:"fixed inset-0 bg-gray-600 bg-opacity-50 flex items-center justify-center p-4 z-50"},AF={class:"bg-white rounded-xl shadow-xl max-w-md w-full p-6"},IF={class:"flex items-center justify-between mb-4"},MF={class:"space-y-4"},RF={class:"flex justify-end space-x-3 mt-6"},PF={__name:"VolunteerManagement",setup(t){Ze();const{showToast:o}=je(),s=V(!1),n=V(""),r=V(""),i=V(""),a=V(1),l=V(10),d=V(!1),c=V({department:"",type:"",description:""}),u=V([{id:1,name:"Rajesh Kumar",email:"rajesh@email.com",phone:"+91 98765 43210",role:"Senior Volunteer",department:"seva",status:"active",activeAssignments:3,totalAssignments:5,lastActive:"2024-06-17T10:30:00Z",avatar:null},{id:2,name:"Priya Sharma",email:"priya@email.com",phone:"+91 98765 43211",role:"Event Coordinator",department:"events",status:"active",activeAssignments:2,totalAssignments:3,lastActive:"2024-06-16T14:20:00Z",avatar:null},{id:3,name:"Amit Patel",email:"amit@email.com",phone:"+91 98765 43212",role:"Security Volunteer",department:"security",status:"inactive",activeAssignments:0,totalAssignments:2,lastActive:"2024-06-10T09:15:00Z",avatar:null},{id:4,name:"Sunita Devi",email:"sunita@email.com",phone:"+91 98765 43213",role:"Reception Volunteer",department:"reception",status:"on-leave",activeAssignments:1,totalAssignments:4,lastActive:"2024-06-15T16:45:00Z",avatar:null},{id:5,name:"Vikram Singh",email:"vikram@email.com",phone:"+91 98765 43214",role:"Maintenance Volunteer",department:"maintenance",status:"active",activeAssignments:2,totalAssignments:2,lastActive:"2024-06-17T08:30:00Z",avatar:null}]),p=V("Sri Lakshmi Temple"),v=te(()=>({total:u.value.length,activeToday:u.value.filter(X=>X.status==="active").length,assignments:u.value.reduce((X,ee)=>X+ee.activeAssignments,0),hoursThisMonth:248})),g=te(()=>{let X=u.value;if(n.value){const ee=n.value.toLowerCase();X=X.filter(oe=>oe.name.toLowerCase().includes(ee)||oe.email.toLowerCase().includes(ee)||oe.phone.includes(ee))}return r.value&&(X=X.filter(ee=>ee.status===r.value)),i.value&&(X=X.filter(ee=>ee.department===i.value)),X}),h=te(()=>Math.ceil(g.value.length/l.value)),D=te(()=>{const X=(a.value-1)*l.value,ee=X+l.value;return g.value.slice(X,ee)}),C=te(()=>(a.value-1)*l.value),B=te(()=>Math.min(C.value+l.value,g.value.length)),_=te(()=>{const X=[],ee=Math.max(1,a.value-2),oe=Math.min(h.value,a.value+2);for(let ae=ee;ae<=oe;ae++)X.push(ae);return X}),T=X=>{switch(X){case"active":return"bg-green-100 text-green-800";case"inactive":return"bg-red-100 text-red-800";case"on-leave":return"bg-yellow-100 text-yellow-800";default:return"bg-gray-100 text-gray-800"}},S=X=>{const ee=new Date(X),ae=Math.abs(new Date-ee),H=Math.ceil(ae/(1e3*60*60*24));return H===1?"Today":H===2?"Yesterday":H<=7?`${H-1} days ago`:ee.toLocaleDateString("en-IN",{day:"2-digit",month:"short",year:"numeric"})},k=()=>{n.value="",r.value="",i.value="",a.value=1},b=()=>{a.value>1&&a.value--},x=()=>{a.value<h.value&&a.value++},F=X=>{a.value=X},E=X=>{o(`Viewing details for ${X.name}`,"info")},O=X=>{o(`Editing assignments for ${X.name}`,"info")},N=X=>{const ee=X.status==="active"?"inactive":"active",oe=u.value.findIndex(ae=>ae.id===X.id);oe!==-1&&(u.value[oe].status=ee,o(`${X.name} has been ${ee==="active"?"activated":"deactivated"}`,"success"))},L=()=>{if(!c.value.department||!c.value.type){o("Please fill in all required fields","error");return}o("Bulk assignment processed successfully","success"),d.value=!1,c.value={department:"",type:"",description:""}},M=()=>{o("Exporting volunteer data...","info"),setTimeout(()=>{o("Volunteer data exported successfully","success")},2e3)};return Ee(async()=>{s.value=!0;try{await new Promise(X=>setTimeout(X,1e3))}catch{o("Failed to load volunteers","error")}finally{s.value=!1}}),(X,ee)=>(m(),f("div",nU,[e("div",rU,[e("div",aU,[e("div",iU,[e("div",lU,[e("div",null,[ee[9]||(ee[9]=e("h1",{class:"text-2xl font-bold text-gray-900"},"Volunteer Management",-1)),e("p",dU," Manage volunteers, assignments, and schedules for "+y(p.value),1)]),e("div",uU,[e("button",{onClick:ee[0]||(ee[0]=oe=>d.value=!0),class:"inline-flex items-center px-4 py-2 border border-indigo-300 rounded-lg text-sm font-medium text-indigo-700 bg-indigo-50 hover:bg-indigo-100 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 transition-colors duration-200"},[...ee[10]||(ee[10]=[e("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),Q(" Bulk Assignment ",-1)])]),e("button",{onClick:M,class:"inline-flex items-center px-4 py-2 border border-gray-300 rounded-lg text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 transition-colors duration-200"},[...ee[11]||(ee[11]=[e("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1),Q(" Export ",-1)])])])])])])]),e("div",cU,[e("div",pU,[e("div",mU,[e("div",gU,[e("div",fU,[e("div",vU,[ee[13]||(ee[13]=e("div",{class:"flex-shrink-0"},[e("div",{class:"w-8 h-8 bg-indigo-100 rounded-lg flex items-center justify-center"},[e("svg",{class:"w-5 h-5 text-indigo-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})])])],-1)),e("div",hU,[ee[12]||(ee[12]=e("p",{class:"text-sm font-medium text-gray-600"},"Total Volunteers",-1)),e("p",yU,y(v.value.total),1)])])]),e("div",xU,[e("div",bU,[ee[15]||(ee[15]=e("div",{class:"flex-shrink-0"},[e("div",{class:"w-8 h-8 bg-green-100 rounded-lg flex items-center justify-center"},[e("svg",{class:"w-5 h-5 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})])])],-1)),e("div",wU,[ee[14]||(ee[14]=e("p",{class:"text-sm font-medium text-gray-600"},"Active Today",-1)),e("p",kU,y(v.value.activeToday),1)])])]),e("div",_U,[e("div",$U,[ee[17]||(ee[17]=e("div",{class:"flex-shrink-0"},[e("div",{class:"w-8 h-8 bg-yellow-100 rounded-lg flex items-center justify-center"},[e("svg",{class:"w-5 h-5 text-yellow-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})])])],-1)),e("div",SU,[ee[16]||(ee[16]=e("p",{class:"text-sm font-medium text-gray-600"},"Assignments",-1)),e("p",DU,y(v.value.assignments),1)])])]),e("div",CU,[e("div",TU,[ee[19]||(ee[19]=e("div",{class:"flex-shrink-0"},[e("div",{class:"w-8 h-8 bg-purple-100 rounded-lg flex items-center justify-center"},[e("svg",{class:"w-5 h-5 text-purple-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"})])])],-1)),e("div",EU,[ee[18]||(ee[18]=e("p",{class:"text-sm font-medium text-gray-600"},"Hours This Month",-1)),e("p",AU,y(v.value.hoursThisMonth),1)])])])])]),e("div",IU,[e("div",MU,[e("div",RU,[e("div",PU,[ee[20]||(ee[20]=e("div",{class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},[e("svg",{class:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})])],-1)),de(e("input",{"onUpdate:modelValue":ee[1]||(ee[1]=oe=>n.value=oe),type:"text",placeholder:"Search volunteers...",class:"block w-full pl-10 pr-3 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm transition-colors duration-200"},null,512),[[xe,n.value]])]),de(e("select",{"onUpdate:modelValue":ee[2]||(ee[2]=oe=>r.value=oe),class:"block w-full px-3 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm transition-colors duration-200"},[...ee[21]||(ee[21]=[e("option",{value:""},"All Status",-1),e("option",{value:"active"},"Active",-1),e("option",{value:"inactive"},"Inactive",-1),e("option",{value:"on-leave"},"On Leave",-1)])],512),[[Ce,r.value]]),de(e("select",{"onUpdate:modelValue":ee[3]||(ee[3]=oe=>i.value=oe),class:"block w-full px-3 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm transition-colors duration-200"},[...ee[22]||(ee[22]=[$e('<option value="">All Departments</option><option value="seva">Seva Management</option><option value="events">Events</option><option value="maintenance">Maintenance</option><option value="security">Security</option><option value="reception">Reception</option>',6)])],512),[[Ce,i.value]]),e("button",{onClick:k,class:"inline-flex items-center justify-center px-4 py-2.5 border border-gray-300 rounded-lg text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 transition-colors duration-200"},[...ee[23]||(ee[23]=[e("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})],-1),Q(" Clear ",-1)])])])])]),e("div",jU,[e("div",NU,[e("div",LU,[e("h3",BU,"Volunteers ("+y(g.value.length)+")",1)]),s.value?(m(),f("div",VU,[...ee[24]||(ee[24]=[e("div",{class:"inline-flex items-center px-4 py-2 font-semibold leading-6 text-sm shadow rounded-md text-indigo-500 bg-white"},[e("svg",{class:"animate-spin -ml-1 mr-3 h-5 w-5 text-indigo-500",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]),Q(" Loading volunteers... ")],-1)])])):g.value.length===0?(m(),f("div",UU,[ee[25]||(ee[25]=e("svg",{class:"mx-auto h-12 w-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})],-1)),ee[26]||(ee[26]=e("h3",{class:"mt-2 text-sm font-medium text-gray-900"},"No volunteers found",-1)),e("p",FU,y(n.value||r.value||i.value?"Try adjusting your search or filters.":"No volunteers have joined this temple yet."),1)])):(m(),f("div",OU,[e("table",zU,[ee[31]||(ee[31]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Volunteer"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Contact"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Department"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Status"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Assignments"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Last Active"),e("th",{class:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"},"Actions")])],-1)),e("tbody",HU,[(m(!0),f(he,null,ke(D.value,oe=>(m(),f("tr",{key:oe.id,class:"hover:bg-gray-50 transition-colors duration-150"},[e("td",qU,[e("div",GU,[e("div",WU,[oe.avatar?(m(),f("img",{key:0,src:oe.avatar,alt:oe.name,class:"h-10 w-10 rounded-full object-cover"},null,8,JU)):(m(),f("div",YU,[e("span",KU,y(oe.name.charAt(0)),1)]))]),e("div",XU,[e("div",ZU,y(oe.name),1),e("div",QU,y(oe.role),1)])])]),e("td",eF,[e("div",tF,y(oe.email),1),e("div",oF,y(oe.phone),1)]),e("td",sF,[e("span",nF,y(oe.department),1)]),e("td",rF,[e("span",{class:ie([T(oe.status),"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium"])},y(oe.status),3)]),e("td",aF,y(oe.activeAssignments)+"/"+y(oe.totalAssignments),1),e("td",iF,y(S(oe.lastActive)),1),e("td",lF,[e("div",dF,[e("button",{onClick:ae=>E(oe),class:"text-indigo-600 hover:text-indigo-900 transition-colors duration-150",title:"View Details"},[...ee[27]||(ee[27]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})],-1)])],8,uF),e("button",{onClick:ae=>O(oe),class:"text-blue-600 hover:text-blue-900 transition-colors duration-150",title:"Edit Assignments"},[...ee[28]||(ee[28]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})],-1)])],8,cF),e("button",{onClick:ae=>N(oe),class:ie([oe.status==="active"?"text-yellow-600 hover:text-yellow-900":"text-green-600 hover:text-green-900","transition-colors duration-150"]),title:oe.status==="active"?"Deactivate":"Activate"},[oe.status==="active"?(m(),f("svg",mF,[...ee[29]||(ee[29]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 9v6m4-6v6m7-3a9 9 0 11-18 0 9 9 0 0118 0z"},null,-1)])])):(m(),f("svg",gF,[...ee[30]||(ee[30]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M14.828 14.828a4 4 0 01-5.656 0M9 10h1m4 0h1m-6 4h.01M19 10a9 9 0 11-18 0 9 9 0 0118 0z"},null,-1)])]))],10,pF)])])]))),128))])])])),g.value.length>l.value?(m(),f("div",fF,[e("div",vF,[e("div",hF,[e("button",{onClick:b,disabled:a.value===1,class:"relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed"}," Previous ",8,yF),e("button",{onClick:x,disabled:a.value===h.value,class:"ml-3 relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed"}," Next ",8,xF)]),e("div",bF,[e("div",null,[e("p",wF,[ee[32]||(ee[32]=Q(" Showing ",-1)),e("span",kF,y(C.value+1),1),ee[33]||(ee[33]=Q(" to ",-1)),e("span",_F,y(B.value),1),ee[34]||(ee[34]=Q(" of ",-1)),e("span",$F,y(g.value.length),1),ee[35]||(ee[35]=Q(" results ",-1))])]),e("div",null,[e("nav",SF,[e("button",{onClick:b,disabled:a.value===1,class:"relative inline-flex items-center px-2 py-2 rounded-l-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed"},[...ee[36]||(ee[36]=[e("svg",{class:"h-5 w-5",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z","clip-rule":"evenodd"})],-1)])],8,DF),(m(!0),f(he,null,ke(_.value,oe=>(m(),f("button",{key:oe,onClick:ae=>F(oe),class:ie([oe===a.value?"bg-indigo-50 border-indigo-500 text-indigo-600":"bg-white border-gray-300 text-gray-500 hover:bg-gray-50","relative inline-flex items-center px-4 py-2 border text-sm font-medium"])},y(oe),11,CF))),128)),e("button",{onClick:x,disabled:a.value===h.value,class:"relative inline-flex items-center px-2 py-2 rounded-r-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed"},[...ee[37]||(ee[37]=[e("svg",{class:"h-5 w-5",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z","clip-rule":"evenodd"})],-1)])],8,TF)])])])])])):Y("",!0)])])])]),d.value?(m(),f("div",EF,[e("div",AF,[e("div",IF,[ee[39]||(ee[39]=e("h3",{class:"text-lg font-medium text-gray-900"},"Bulk Assignment",-1)),e("button",{onClick:ee[4]||(ee[4]=oe=>d.value=!1),class:"text-gray-400 hover:text-gray-600"},[...ee[38]||(ee[38]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),e("div",MF,[e("div",null,[ee[41]||(ee[41]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Select Department",-1)),de(e("select",{"onUpdate:modelValue":ee[5]||(ee[5]=oe=>c.value.department=oe),class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"},[...ee[40]||(ee[40]=[$e('<option value="">Choose department</option><option value="seva">Seva Management</option><option value="events">Events</option><option value="maintenance">Maintenance</option><option value="security">Security</option><option value="reception">Reception</option>',6)])],512),[[Ce,c.value.department]])]),e("div",null,[ee[43]||(ee[43]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Assignment Type",-1)),de(e("select",{"onUpdate:modelValue":ee[6]||(ee[6]=oe=>c.value.type=oe),class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"},[...ee[42]||(ee[42]=[$e('<option value="">Choose type</option><option value="daily">Daily Task</option><option value="weekly">Weekly Task</option><option value="event">Event Assignment</option><option value="special">Special Duty</option>',5)])],512),[[Ce,c.value.type]])]),e("div",null,[ee[44]||(ee[44]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Description",-1)),de(e("textarea",{"onUpdate:modelValue":ee[7]||(ee[7]=oe=>c.value.description=oe),rows:"3",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",placeholder:"Assignment details..."},null,512),[[xe,c.value.description]])])]),e("div",RF,[e("button",{onClick:ee[8]||(ee[8]=oe=>d.value=!1),class:"px-4 py-2 border border-gray-300 rounded-lg text-sm font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500"}," Cancel "),e("button",{onClick:L,class:"px-4 py-2 bg-indigo-600 border border-transparent rounded-lg text-sm font-medium text-white hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500"}," Assign ")])])])):Y("",!0)]))}},jF={class:"min-h-screen bg-gradient-to-b from-indigo-50 via-white to-indigo-50"},NF={class:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},LF={class:"bg-white rounded-xl shadow-lg border border-indigo-100 p-5 mb-8"},BF={class:"flex flex-col sm:flex-row gap-4"},VF={class:"flex-1"},UF={class:"relative"},FF={class:"flex flex-col sm:flex-row gap-3"},OF={key:0,class:"flex flex-col items-center justify-center py-12"},zF={key:1,class:"text-center py-12 bg-white rounded-xl shadow-lg"},HF={key:2,class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},qF={class:"p-5"},GF={class:"text-lg font-bold text-gray-900 mb-2 font-heading"},WF={class:"space-y-2 mb-4"},JF={class:"flex items-center text-sm text-gray-700 font-side"},YF={key:0,class:"flex items-center text-sm text-gray-700 font-side"},KF={class:"px-2 py-0.5 bg-gray-100 rounded-md text-gray-700 text-xs font-medium"},XF={key:0,class:"text-sm text-gray-600 mb-4 line-clamp-2 font-side"},ZF=["onClick"],QF=["onClick","disabled"],eO={key:0,class:"flex items-center"},tO={key:1},oO={class:"text-center"},sO={class:"text-xl font-bold text-indigo-900 mb-2 font-heading"},nO={class:"text-indigo-700 mb-6 font-side"},rO={key:0,class:"mb-6"},aO={key:1,class:"flex flex-col sm:flex-row gap-3"},iO=["disabled"],lO={key:0,class:"flex items-center justify-center"},dO={key:1},uO={__name:"TempleSelection",setup(t){Ke();const{showToast:o}=je(),{user:s}=ln(),n=V(""),r=V(""),i=V(""),a=V(!0),l=V(null),d=V(!1),c=V(!1),u=V(null),p=V([]),v=V([]),g=V(!1),h=async()=>{try{console.log("Fetching user memberships from backend...");const L=await ce.get("/v1/memberships");console.log("Memberships response:",L);let M=L.data||L;Array.isArray(M)||(M.data&&Array.isArray(M.data)?M=M.data:M.memberships&&Array.isArray(M.memberships)?M=M.memberships:M.items&&Array.isArray(M.items)?M=M.items:M=[]);const X=M.map(ee=>ee.entity_id||ee.entityId||ee.temple_id||ee.templeId).filter(ee=>ee!=null).map(ee=>String(ee));return console.log("User joined temple IDs from backend:",X),v.value=X,C(),X}catch(L){return console.error("Error fetching user memberships:",L),D(),v.value}},D=()=>{try{const L=localStorage.getItem("devoteeJoinedTemples");if(L){const X=JSON.parse(L);v.value=Array.isArray(X)?X.map(ee=>String(ee)):[],console.log("Loaded joined temples from localStorage:",v.value)}const M=localStorage.getItem("selectedEntityId")||localStorage.getItem("current_entity_id")||localStorage.getItem("current_tenant_id");M&&!v.value.includes(String(M))&&(v.value.push(String(M)),C())}catch(L){console.error("Error loading joined temples from localStorage:",L),v.value=[]}},C=()=>{try{const L=v.value.map(M=>String(M));localStorage.setItem("devoteeJoinedTemples",JSON.stringify(L)),console.log("Saved joined temples to localStorage:",L)}catch(L){console.error("Error saving joined temples to localStorage:",L)}},B=L=>{if(!L)return!1;const M=String(L);return v.value.includes(M)},_=L=>{try{const M=L.id||L.ID;if(!M){console.error("Cannot navigate to dashboard: No temple ID available"),o("Temple information is missing.","error");return}console.log("Navigating to dashboard for temple ID:",M),F(M,L),window.location.href=`/entity/${M}/devotee/dashboard`}catch(M){console.error("Error navigating to dashboard:",M),o("Navigation error. Please try again.","error")}},T=te(()=>{if(!p.value)return[];let L=p.value.filter(M=>M.status==="approved"||M.status==="APPROVED"||M.Status==="approved"||M.Status==="APPROVED"||!M.status);if(n.value.trim()){const M=n.value.toLowerCase();L=L.filter(X=>{const ee=(X.name||X.Name||"").toLowerCase(),oe=(X.city||X.City||"").toLowerCase(),ae=(X.state||X.State||"").toLowerCase();return ee.includes(M)||oe.includes(M)||ae.includes(M)})}return r.value&&(L=L.filter(M=>(M.state||M.State)===r.value)),i.value&&(L=L.filter(M=>(M.category||M.templeType||M.TempleType)===i.value)),L}),S=()=>{n.value="",r.value="",i.value=""},k=L=>{u.value=L,d.value=!0,g.value=!1},b=()=>{d.value=!1,g.value=!1,u.value=null},x=async()=>{var M;if(!u.value)return;const L=u.value.id||u.value.ID;c.value=!0,l.value=L;try{console.log(`Joining temple with ID: ${L}`),await ce.post("/v1/memberships",{entity_id:L}),console.log("Successfully joined temple via API");const X=String(L);v.value.includes(X)||(v.value.push(X),C()),F(L,u.value),g.value=!0,o("Successfully joined temple!","success")}catch(X){if(console.error("Error joining temple:",X),X.message.includes("Network Error")||((M=X.response)==null?void 0:M.status)===404){console.log("Using localStorage fallback for development");const ee=String(L);v.value.includes(ee)||(v.value.push(ee),C()),F(L,u.value),g.value=!0,o("Successfully joined temple! (Development mode)","success")}else o("Failed to join temple. Please try again.","error"),b()}finally{c.value=!1,l.value=null}},F=(L,M=null)=>{if(!L)return;const X=M||u.value,ee=(X==null?void 0:X.name)||(X==null?void 0:X.Name)||"Selected Temple",oe=String(L);console.log("Saving temple ID to all localStorage keys:",oe),localStorage.setItem("selectedEntityId",oe),localStorage.setItem("current_entity_id",oe),localStorage.setItem("current_tenant_id",oe),localStorage.setItem("selectedTempleName",ee);try{const ae=JSON.parse(localStorage.getItem("user_data")||"{}");ae.current_entity={id:L,name:ee},ae.entityId=L,localStorage.setItem("user_data",JSON.stringify(ae))}catch(ae){console.error("Error updating user data in localStorage:",ae)}},E=()=>{var L,M;try{const X=((L=u.value)==null?void 0:L.id)||((M=u.value)==null?void 0:M.ID);if(!X){console.error("Cannot navigate to profile creation: No temple ID available"),o("Temple information is missing. Please try rejoining the temple.","error");return}F(X,u.value),window.location.href=`/entity/${X}/devotee/profile/create`}catch(X){console.error("Error navigating to profile creation:",X),o("Navigation error. Please try again.","error")}},O=()=>{var L,M;try{const X=((L=u.value)==null?void 0:L.id)||((M=u.value)==null?void 0:M.ID);if(!X){console.error("Cannot navigate to dashboard: No temple ID available"),o("Temple information is missing. Please try rejoining the temple.","error");return}F(X,u.value),window.location.href=`/entity/${X}/devotee/dashboard`}catch(X){console.error("Error navigating to dashboard:",X),o("Navigation error. Please try again.","error")}},N=async()=>{a.value=!0;try{console.log("Fetching temples from API");const L=await it.getTemples();console.log("Temples fetched from API:",L),p.value=L||[],console.log(`Successfully processed ${p.value.length} temples`)}catch(L){console.error("Error fetching temple data:",L),o("Error loading temples. Please try again later.","error"),p.value=[]}finally{a.value=!1}};return Ee(async()=>{console.log("Component mounted - Loading data..."),await h(),await N()}),(L,M)=>{var X,ee,oe,ae;return m(),f("div",jF,[M[23]||(M[23]=$e('<div class="bg-indigo-600"><div class="max-w-5xl mx-auto px-4 sm:px-6 lg:px-8 py-8 relative z-10"><div class="text-center"><h1 class="text-3xl md:text-4xl font-bold text-white mb-3 font-heading">Find Your Spiritual Home</h1><p class="text-indigo-100 text-base md:text-lg font-light font-sans"> Begin your spiritual journey by joining an approved temple. </p></div></div></div>',1)),e("div",NF,[e("div",LF,[e("div",BF,[e("div",VF,[M[5]||(M[5]=e("label",{for:"search",class:"block text-sm font-semibold text-indigo-900 mb-2 font-side"}," Find Your Temple ",-1)),e("div",UF,[M[4]||(M[4]=e("div",{class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},[e("svg",{class:"h-5 w-5 text-indigo-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})])],-1)),de(e("input",{id:"search","onUpdate:modelValue":M[0]||(M[0]=H=>n.value=H),type:"text",placeholder:"Search by temple name, city, or state...",class:"block w-full pl-10 pr-3 py-3 border border-indigo-200 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 bg-white text-indigo-800"},null,512),[[xe,n.value]])])]),e("div",FF,[e("div",null,[M[7]||(M[7]=e("label",{class:"block text-sm font-semibold text-indigo-900 mb-2 font-side"},"State",-1)),de(e("select",{"onUpdate:modelValue":M[1]||(M[1]=H=>r.value=H),class:"px-4 py-3 border border-indigo-200 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 bg-white text-indigo-800 min-w-[140px] appearance-none"},[...M[6]||(M[6]=[$e('<option value="">All States</option><option value="Karnataka">Karnataka</option><option value="Tamil Nadu">Tamil Nadu</option><option value="Kerala">Kerala</option><option value="Andhra Pradesh">Andhra Pradesh</option><option value="Maharashtra">Maharashtra</option>',6)])],512),[[Ce,r.value]])]),e("div",null,[M[9]||(M[9]=e("label",{class:"block text-sm font-semibold text-indigo-900 mb-2 font-side"},"Type",-1)),de(e("select",{"onUpdate:modelValue":M[2]||(M[2]=H=>i.value=H),class:"px-4 py-3 border border-indigo-200 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 bg-white text-indigo-800 min-w-[140px] appearance-none"},[...M[8]||(M[8]=[e("option",{value:""},"All Types",-1),e("option",{value:"traditional"},"Traditional",-1),e("option",{value:"modern"},"Modern",-1),e("option",{value:"heritage"},"Heritage",-1)])],512),[[Ce,i.value]])])])])]),a.value?(m(),f("div",OF,[...M[10]||(M[10]=[e("div",{class:"animate-spin rounded-full h-12 w-12 border-4 border-indigo-100 border-t-indigo-600"},null,-1),e("p",{class:"text-indigo-600 font-medium mt-4"},"Discovering sacred spaces...",-1)])])):T.value.length===0&&!a.value?(m(),f("div",zF,[e("div",{class:"max-w-md mx-auto px-6"},[M[11]||(M[11]=e("svg",{class:"h-12 w-12 text-indigo-400 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})],-1)),M[12]||(M[12]=e("h3",{class:"text-xl font-bold text-indigo-900 mb-3 font-heading"},"No Temples Found",-1)),M[13]||(M[13]=e("p",{class:"text-indigo-700 mb-6 font-side"}," We couldn't find any temples matching your criteria. Please try different search terms. ",-1)),e("button",{onClick:S,class:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-lg text-white bg-indigo-600 hover:bg-indigo-700"}," Reset Filters ")])])):(m(),f("div",HF,[(m(!0),f(he,null,ke(T.value,H=>(m(),f("div",{key:H.id||H.ID,class:"bg-white rounded-xl shadow-lg border border-gray-200 overflow-hidden"},[M[18]||(M[18]=e("div",{class:"h-28 bg-gray-50 border-b border-gray-100 flex items-center justify-center"},[e("div",{class:"bg-white rounded-full p-3 shadow-sm border border-gray-200"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-10 w-10 text-indigo-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1.5",d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})])])],-1)),e("div",qF,[e("h3",GF,y(H.name||H.Name),1),e("div",WF,[e("div",JF,[M[14]||(M[14]=e("svg",{class:"h-4 w-4 mr-2 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})],-1)),Q(" "+y(H.city||H.City||"Unknown")+", "+y(H.state||H.State||"Unknown"),1)]),H.category||H.templeType||H.TempleType?(m(),f("div",YF,[M[15]||(M[15]=e("svg",{class:"h-4 w-4 mr-2 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 7h.01M7 3h5c.512 0 1.024.195 1.414.586l7 7a2 2 0 010 2.828l-7 7a2 2 0 01-2.828 0l-7-7A1.994 1.994 0 013 12V7a4 4 0 014-4z"})],-1)),e("span",KF,y(H.category||H.templeType||H.TempleType),1)])):Y("",!0)]),H.description||H.Description?(m(),f("p",XF,y(H.description||H.Description),1)):Y("",!0),B(H.id||H.ID)?(m(),f("button",{key:1,onClick:J=>_(H),class:"w-full bg-green-600 hover:bg-green-700 text-white font-medium py-2.5 px-4 rounded-lg flex items-center justify-center transition-colors"},[...M[16]||(M[16]=[e("svg",{class:"h-5 w-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})],-1),Q(" Go to Dashboard ",-1)])],8,ZF)):(m(),f("button",{key:2,onClick:J=>k(H),disabled:l.value===(H.id||H.ID),class:"w-full bg-indigo-600 hover:bg-indigo-700 text-white font-medium py-2.5 px-4 rounded-lg flex items-center justify-center transition-colors disabled:opacity-50 disabled:cursor-not-allowed"},[l.value===(H.id||H.ID)?(m(),f("div",eO,[...M[17]||(M[17]=[e("div",{class:"animate-spin rounded-full h-4 w-4 border-2 border-white border-t-transparent mr-2"},null,-1),Q(" Joining... ",-1)])])):(m(),f("span",tO,"Join Temple"))],8,QF))])]))),128))]))]),d.value?(m(),f("div",{key:0,class:"fixed inset-0 bg-gray-500 bg-opacity-75 flex items-center justify-center p-4 z-50",onClick:b},[e("div",{class:"bg-white rounded-xl shadow-xl max-w-md w-full p-6",onClick:M[3]||(M[3]=Oe(()=>{},["stop"]))},[e("div",oO,[M[22]||(M[22]=e("div",{class:"mx-auto flex items-center justify-center h-14 w-14 rounded-full bg-indigo-100 mb-4"},[e("svg",{class:"h-8 w-8 text-indigo-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})])],-1)),e("h3",sO," Join "+y(((X=u.value)==null?void 0:X.name)||((ee=u.value)==null?void 0:ee.Name))+"? ",1),e("p",nO," You're about to join "+y(((oe=u.value)==null?void 0:oe.name)||((ae=u.value)==null?void 0:ae.Name))+" as a devotee. You'll be able to book sevas, make donations, and participate in temple events. ",1),g.value?(m(),f("div",rO,[M[19]||(M[19]=e("div",{class:"bg-green-50 text-green-800 p-4 rounded-lg mb-4"},[e("svg",{class:"w-5 h-5 inline mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})]),Q(" Successfully joined temple! ")],-1)),M[20]||(M[20]=e("p",{class:"text-gray-700 mb-4"},"What would you like to do next?",-1)),e("div",{class:"flex flex-col sm:flex-row gap-3"},[e("button",{onClick:E,class:"flex-1 bg-indigo-100 hover:bg-indigo-200 text-indigo-700 font-medium py-2 px-4 rounded-lg transition-colors"}," Complete Profile "),e("button",{onClick:O,class:"flex-1 bg-indigo-600 hover:bg-indigo-700 text-white font-medium py-2 px-4 rounded-lg transition-colors"}," Go to Dashboard ")])])):(m(),f("div",aO,[e("button",{onClick:b,class:"flex-1 bg-white hover:bg-gray-50 text-indigo-700 font-medium py-2 px-4 rounded-lg border border-indigo-200 transition-colors"}," Cancel "),e("button",{onClick:x,disabled:c.value,class:"flex-1 bg-indigo-600 hover:bg-indigo-700 text-white font-medium py-2 px-4 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed"},[c.value?(m(),f("span",lO,[...M[21]||(M[21]=[e("div",{class:"animate-spin rounded-full h-4 w-4 border-2 border-white border-t-transparent mr-2"},null,-1),Q(" Joining... ",-1)])])):(m(),f("span",dO,"Join Temple"))],8,iO)]))])])])):Y("",!0)])}}},cO={class:"bg-white rounded-2xl shadow-md p-6"},pO={key:0,class:"mt-1 text-sm text-red-600"},mO={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},gO={key:0,class:"mt-1 text-sm text-red-600"},fO={key:0,class:"mt-1 text-sm text-red-600"},vO={class:"border-t pt-6"},hO={class:"mb-6"},yO={key:0,class:"mt-1 text-sm text-red-600"},xO={class:"grid grid-cols-1 md:grid-cols-3 gap-6"},bO={key:0,class:"mt-1 text-sm text-red-600"},wO=["value"],kO={key:0,class:"mt-1 text-sm text-red-600"},_O={key:0,class:"mt-1 text-sm text-red-600"},$O={class:"mt-6"},SO={__name:"PersonalDetailsForm",props:{data:{type:Object,default:()=>({})}},emits:["update","next"],setup(t,{emit:o}){const s=t,n=o,r=je();dn();const i=V({fullName:"",dateOfBirth:"",gender:"",address:{street:"",city:"",state:"",pincode:"",country:"India"}}),a=V({}),l=["Andhra Pradesh","Arunachal Pradesh","Assam","Bihar","Chhattisgarh","Goa","Gujarat","Haryana","Himachal Pradesh","Jharkhand","Karnataka","Kerala","Madhya Pradesh","Maharashtra","Manipur","Meghalaya","Mizoram","Nagaland","Odisha","Punjab","Rajasthan","Sikkim","Tamil Nadu","Telangana","Tripura","Uttar Pradesh","Uttarakhand","West Bengal","Delhi","Jammu and Kashmir","Ladakh"];function d(){if(a.value={},i.value.fullName.trim()||(a.value.fullName="Full name is required"),!i.value.dateOfBirth)a.value.dateOfBirth="Date of birth is required";else{const u=new Date(i.value.dateOfBirth),v=new Date().getFullYear()-u.getFullYear();(v<5||v>120)&&(a.value.dateOfBirth="Please enter a valid date of birth")}return i.value.gender||(a.value.gender="Gender is required"),i.value.address.street.trim()||(a.value["address.street"]="Street address is required"),i.value.address.city.trim()||(a.value["address.city"]="City is required"),i.value.address.state||(a.value["address.state"]="State is required"),i.value.address.pincode&&!/^[0-9]{6}$/.test(i.value.address.pincode)&&(a.value["address.pincode"]="Pincode must be 6 digits"),Object.keys(a.value).length===0}function c(){d()?(n("update",i.value),n("next")):r.error("Please fix the errors before continuing")}return Ee(()=>{var u,p,v,g,h;s.data&&(i.value={fullName:s.data.full_name||s.data.fullName||"",dateOfBirth:s.data.dob||s.data.dateOfBirth||"",gender:s.data.gender||"",address:{street:s.data.street_address||((u=s.data.address)==null?void 0:u.street)||"",city:s.data.city||((p=s.data.address)==null?void 0:p.city)||"",state:s.data.state||((v=s.data.address)==null?void 0:v.state)||"",pincode:s.data.pincode||((g=s.data.address)==null?void 0:g.pincode)||"",country:s.data.country||((h=s.data.address)==null?void 0:h.country)||"India"}})}),Ue(i,()=>{Object.keys(a.value).length>0&&d(),n("update",i.value)},{deep:!0}),(u,p)=>(m(),f("div",cO,[p[20]||(p[20]=e("div",{class:"mb-6"},[e("h2",{class:"text-xl font-semibold text-gray-900 mb-2"},"Personal Details"),e("p",{class:"text-gray-600"},"Let us know more about you to personalize your temple experience")],-1)),e("form",{onSubmit:Oe(c,["prevent"]),class:"space-y-6"},[e("div",null,[p[8]||(p[8]=e("label",{for:"fullName",class:"block text-sm font-medium text-gray-700 mb-2"},[Q(" Full Name "),e("span",{class:"text-red-500"},"*")],-1)),de(e("input",{id:"fullName","onUpdate:modelValue":p[0]||(p[0]=v=>i.value.fullName=v),type:"text",required:"",class:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-colors duration-200",placeholder:"Enter your full name"},null,512),[[xe,i.value.fullName]]),a.value.fullName?(m(),f("p",pO,y(a.value.fullName),1)):Y("",!0)]),e("div",mO,[e("div",null,[p[9]||(p[9]=e("label",{for:"dateOfBirth",class:"block text-sm font-medium text-gray-700 mb-2"},[Q(" Date of Birth "),e("span",{class:"text-red-500"},"*")],-1)),de(e("input",{id:"dateOfBirth","onUpdate:modelValue":p[1]||(p[1]=v=>i.value.dateOfBirth=v),type:"date",required:"",class:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-colors duration-200"},null,512),[[xe,i.value.dateOfBirth]]),a.value.dateOfBirth?(m(),f("p",gO,y(a.value.dateOfBirth),1)):Y("",!0)]),e("div",null,[p[11]||(p[11]=e("label",{for:"gender",class:"block text-sm font-medium text-gray-700 mb-2"},[Q(" Gender "),e("span",{class:"text-red-500"},"*")],-1)),de(e("select",{id:"gender","onUpdate:modelValue":p[2]||(p[2]=v=>i.value.gender=v),required:"",class:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-colors duration-200"},[...p[10]||(p[10]=[e("option",{value:""},"Select Gender",-1),e("option",{value:"male"},"Male",-1),e("option",{value:"female"},"Female",-1),e("option",{value:"other"},"Other",-1)])],512),[[Ce,i.value.gender]]),a.value.gender?(m(),f("p",fO,y(a.value.gender),1)):Y("",!0)])]),p[19]||(p[19]=e("div",{class:"grid grid-cols-1 md:grid-cols-2 gap-6"},null,-1)),e("div",vO,[p[18]||(p[18]=e("h3",{class:"text-lg font-medium text-gray-900 mb-4"},"Address Information",-1)),e("div",hO,[p[12]||(p[12]=e("label",{for:"street",class:"block text-sm font-medium text-gray-700 mb-2"},[Q(" Street Address "),e("span",{class:"text-red-500"},"*")],-1)),de(e("textarea",{id:"street","onUpdate:modelValue":p[3]||(p[3]=v=>i.value.address.street=v),rows:"2",required:"",class:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-colors duration-200 resize-none",placeholder:"Enter your full address"},null,512),[[xe,i.value.address.street]]),a.value["address.street"]?(m(),f("p",yO,y(a.value["address.street"]),1)):Y("",!0)]),e("div",xO,[e("div",null,[p[13]||(p[13]=e("label",{for:"city",class:"block text-sm font-medium text-gray-700 mb-2"},[Q(" City "),e("span",{class:"text-red-500"},"*")],-1)),de(e("input",{id:"city","onUpdate:modelValue":p[4]||(p[4]=v=>i.value.address.city=v),type:"text",required:"",class:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-colors duration-200",placeholder:"City"},null,512),[[xe,i.value.address.city]]),a.value["address.city"]?(m(),f("p",bO,y(a.value["address.city"]),1)):Y("",!0)]),e("div",null,[p[15]||(p[15]=e("label",{for:"state",class:"block text-sm font-medium text-gray-700 mb-2"},[Q(" State "),e("span",{class:"text-red-500"},"*")],-1)),de(e("select",{id:"state","onUpdate:modelValue":p[5]||(p[5]=v=>i.value.address.state=v),required:"",class:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-colors duration-200"},[p[14]||(p[14]=e("option",{value:""},"Select State",-1)),(m(),f(he,null,ke(l,v=>e("option",{key:v,value:v},y(v),9,wO)),64))],512),[[Ce,i.value.address.state]]),a.value["address.state"]?(m(),f("p",kO,y(a.value["address.state"]),1)):Y("",!0)]),e("div",null,[p[16]||(p[16]=e("label",{for:"pincode",class:"block text-sm font-medium text-gray-700 mb-2"}," Pincode ",-1)),de(e("input",{id:"pincode","onUpdate:modelValue":p[6]||(p[6]=v=>i.value.address.pincode=v),type:"text",pattern:"[0-9]{6}",class:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-colors duration-200",placeholder:"000000",maxlength:"6"},null,512),[[xe,i.value.address.pincode]]),a.value["address.pincode"]?(m(),f("p",_O,y(a.value["address.pincode"]),1)):Y("",!0)])]),e("div",$O,[p[17]||(p[17]=e("label",{for:"country",class:"block text-sm font-medium text-gray-700 mb-2"}," Country ",-1)),de(e("input",{id:"country","onUpdate:modelValue":p[7]||(p[7]=v=>i.value.address.country=v),type:"text",readonly:"",class:"w-full px-4 py-3 border border-gray-300 rounded-xl bg-gray-50 text-gray-500"},null,512),[[xe,i.value.address.country]])])])],32)]))}},DO={class:"bg-white rounded-2xl shadow-md p-6"},CO={id:"gotra-suggestions"},TO=["value"],EO={key:0,class:"mt-1 text-sm text-red-600"},AO={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},IO=["value"],MO={key:0,class:"mt-1 text-sm text-red-600"},RO=["value"],PO={key:0,class:"mt-1 text-sm text-red-600"},jO=["value"],NO={key:0,class:"mt-1 text-sm text-red-600"},LO=["value"],BO={key:0,class:"mt-1 text-sm text-red-600"},VO={__name:"SpiritualInfoForm",props:{data:{type:Object,default:()=>({gotra:"",nakshatra:"",rashi:"",lagna:"",vedaShaka:""})}},emits:["skip","next","previous","save-draft","update-data"],setup(t,{emit:o}){const s=t,n=o;dn();const r=V({gotra:"",nakshatra:"",rashi:"",lagna:"",vedaShaka:""}),i=V({}),a=["Bharadwaja","Kashyapa","Vasishtha","Vishwamitra","Jamadagni","Atri","Gautama","Agastya","Kaundinya","Kaushika","Bhargava","Shandilya","Angirasa","Harita","Mudgala","Parasara","Vatsya","Garga","Shaktri","Pulastya"],l=["Ashwini","Bharani","Krittika","Rohini","Mrigashirsha","Ardra","Punarvasu","Pushya","Ashlesha","Magha","Purva Phalguni","Uttara Phalguni","Hasta","Chitra","Swati","Vishakha","Anuradha","Jyeshtha","Mula","Purva Ashadha","Uttara Ashadha","Shravana","Dhanishta","Shatabhisha","Purva Bhadrapada","Uttara Bhadrapada","Revati"],d=["Mesha (Aries)","Vrishabha (Taurus)","Mithuna (Gemini)","Karka (Cancer)","Simha (Leo)","Kanya (Virgo)","Tula (Libra)","Vrishchika (Scorpio)","Dhanu (Sagittarius)","Makara (Capricorn)","Kumbha (Aquarius)","Meena (Pisces)"],c=["Rig Veda - Shankhayana","Rig Veda - Kaushitaki","Sama Veda - Kauthuma","Sama Veda - Jaiminiya","Yajur Veda - Madhyandina","Yajur Veda - Kanva","Yajur Veda - Taittiriya","Yajur Veda - Maitrayani","Atharva Veda - Shaunaka","Atharva Veda - Paippalada"];te(()=>r.value.gotra||r.value.nakshatra||r.value.rashi||r.value.lagna||r.value.vedaShaka),te(()=>s.data?r.value.gotra!==(s.data.gotra||"")||r.value.nakshatra!==(s.data.nakshatra||"")||r.value.rashi!==(s.data.rashi||"")||r.value.lagna!==(s.data.lagna||"")||r.value.vedaShaka!==(s.data.vedaShaka||""):!1);function u(){return i.value={},!0}function p(){u()&&(n("update-data",r.value),n("next"))}return Ee(()=>{s.data&&(r.value={gotra:s.data.gotra||"",nakshatra:s.data.nakshatra||"",rashi:s.data.rashi||"",lagna:s.data.lagna||"",vedaShaka:s.data.vedaShaka||""})}),Ue(r,()=>{Object.keys(i.value).length>0&&u(),n("update-data",r.value)},{deep:!0}),(v,g)=>(m(),f("div",DO,[g[15]||(g[15]=e("div",{class:"mb-6"},[e("h2",{class:"text-xl font-semibold text-gray-900 mb-2"},"Spiritual Information"),e("p",{class:"text-gray-600"},"Help us understand your spiritual background and traditions")],-1)),e("form",{onSubmit:Oe(p,["prevent"]),class:"space-y-6"},[e("div",null,[g[5]||(g[5]=e("label",{for:"gotra",class:"block text-sm font-medium text-gray-700 mb-2"},[Q(" Gotra "),e("span",{class:"text-gray-400 text-xs ml-1"},"(Your family lineage)")],-1)),de(e("input",{id:"gotra","onUpdate:modelValue":g[0]||(g[0]=h=>r.value.gotra=h),type:"text",class:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-colors duration-200",placeholder:"e.g., Bharadwaja, Kashyapa, Vasishtha",list:"gotra-suggestions"},null,512),[[xe,r.value.gotra]]),e("datalist",CO,[(m(),f(he,null,ke(a,h=>e("option",{key:h,value:h},y(h),9,TO)),64))]),i.value.gotra?(m(),f("p",EO,y(i.value.gotra),1)):Y("",!0)]),e("div",AO,[e("div",null,[g[7]||(g[7]=e("label",{for:"nakshatra",class:"block text-sm font-medium text-gray-700 mb-2"},[Q(" Nakshatra "),e("span",{class:"text-gray-400 text-xs ml-1"},"(Birth star)")],-1)),de(e("select",{id:"nakshatra","onUpdate:modelValue":g[1]||(g[1]=h=>r.value.nakshatra=h),class:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-colors duration-200"},[g[6]||(g[6]=e("option",{value:""},"Select Nakshatra",-1)),(m(),f(he,null,ke(l,h=>e("option",{key:h,value:h},y(h),9,IO)),64))],512),[[Ce,r.value.nakshatra]]),i.value.nakshatra?(m(),f("p",MO,y(i.value.nakshatra),1)):Y("",!0)]),e("div",null,[g[9]||(g[9]=e("label",{for:"rashi",class:"block text-sm font-medium text-gray-700 mb-2"},[Q(" Rashi "),e("span",{class:"text-gray-400 text-xs ml-1"},"(Zodiac sign)")],-1)),de(e("select",{id:"rashi","onUpdate:modelValue":g[2]||(g[2]=h=>r.value.rashi=h),class:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-colors duration-200"},[g[8]||(g[8]=e("option",{value:""},"Select Rashi",-1)),(m(),f(he,null,ke(d,h=>e("option",{key:h,value:h},y(h),9,RO)),64))],512),[[Ce,r.value.rashi]]),i.value.rashi?(m(),f("p",PO,y(i.value.rashi),1)):Y("",!0)])]),e("div",null,[g[11]||(g[11]=e("label",{for:"lagna",class:"block text-sm font-medium text-gray-700 mb-2"},[Q(" Lagna (Ascendant) "),e("span",{class:"text-gray-400 text-xs ml-1"},"(Rising sign at birth)")],-1)),de(e("select",{id:"lagna","onUpdate:modelValue":g[3]||(g[3]=h=>r.value.lagna=h),class:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-colors duration-200"},[g[10]||(g[10]=e("option",{value:""},"Select Lagna",-1)),(m(),f(he,null,ke(d,h=>e("option",{key:h,value:h},y(h),9,jO)),64))],512),[[Ce,r.value.lagna]]),i.value.lagna?(m(),f("p",NO,y(i.value.lagna),1)):Y("",!0)]),e("div",null,[g[13]||(g[13]=e("label",{for:"vedaShaka",class:"block text-sm font-medium text-gray-700 mb-2"},[Q(" Veda Shaka "),e("span",{class:"text-gray-400 text-xs ml-1"},"(Vedic branch/tradition)")],-1)),de(e("select",{id:"vedaShaka","onUpdate:modelValue":g[4]||(g[4]=h=>r.value.vedaShaka=h),class:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-colors duration-200"},[g[12]||(g[12]=e("option",{value:""},"Select Veda Shaka",-1)),(m(),f(he,null,ke(c,h=>e("option",{key:h,value:h},y(h),9,LO)),64))],512),[[Ce,r.value.vedaShaka]]),i.value.vedaShaka?(m(),f("p",BO,y(i.value.vedaShaka),1)):Y("",!0)]),g[14]||(g[14]=$e('<div class="bg-indigo-50 rounded-xl p-4 border border-indigo-200"><div class="flex items-start"><div class="flex-shrink-0"><svg class="h-5 w-5 text-indigo-400 mt-0.5" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"></path></svg></div><div class="ml-3"><h3 class="text-sm font-medium text-indigo-800">Optional Information</h3><p class="text-sm text-indigo-700 mt-1"> This information helps us provide personalized spiritual guidance and appropriate rituals. All fields are optional and can be filled later. </p></div></div></div><div class="flex flex-col sm:flex-row gap-4 pt-6 border-t"></div>',2))],32)]))}},UO={class:"bg-white rounded-xl shadow-lg p-6 md:p-8"},FO={class:"bg-indigo-50 rounded-xl p-6"},OO={class:"grid grid-cols-1 lg:grid-cols-2 gap-6"},zO={class:"space-y-4"},HO={class:"space-y-4"},qO={class:"bg-amber-50 rounded-xl p-6"},GO={class:"grid grid-cols-1 lg:grid-cols-2 gap-8"},WO={class:"space-y-4"},JO={class:"grid grid-cols-1 sm:grid-cols-2 gap-4"},YO={class:"space-y-4"},KO={class:"grid grid-cols-1 sm:grid-cols-2 gap-4"},XO={__name:"FamilyLineageForm",props:{data:{type:Object,default:()=>({})}},emits:["next","skip","update"],setup(t,{emit:o}){const s=o,n=V(!1);V(null),V([]);const r=t,i=Je({father:{name:"",gotra:"",nativePlace:"",vedaShaka:""},mother:{name:"",maidenGotra:"",nativePlace:"",fatherName:""},paternalGrandfather:"",paternalGrandmother:"",maternalGrandfather:"",maternalGrandmother:"",familyTreeFiles:[]}),a=async()=>{n.value=!0;try{s("update",i),s("next")}catch(l){console.error("Error saving family lineage:",l)}finally{n.value=!1}};return Ue(i,()=>{s("update",i)},{deep:!0}),Ee(()=>{r.data&&(i.father=r.data.father||{name:"",gotra:"",nativePlace:"",vedaShaka:""},i.mother=r.data.mother||{name:"",maidenGotra:"",nativePlace:"",fatherName:""},i.paternalGrandfather=r.data.paternalGrandfather||"",i.paternalGrandmother=r.data.paternalGrandmother||"",i.maternalGrandfather=r.data.maternalGrandfather||"",i.maternalGrandmother=r.data.maternalGrandmother||"")}),(l,d)=>(m(),f("div",UO,[d[32]||(d[32]=$e('<div class="mb-8"><div class="flex items-center gap-3 mb-4"><div class="w-10 h-10 bg-indigo-100 rounded-lg flex items-center justify-center"><svg class="w-5 h-5 text-indigo-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"></path></svg></div><div><h2 class="text-2xl font-bold text-gray-900">Family Lineage</h2><p class="text-gray-600">Build your family tree and heritage</p></div></div><div class="w-full bg-gray-200 rounded-full h-2"><div class="bg-indigo-600 h-2 rounded-full transition-all duration-300" style="width:60%;"></div></div><p class="text-sm text-gray-500 mt-2">Step 3 of 6 - 60% Complete</p></div>',1)),e("form",{onSubmit:Oe(a,["prevent"]),class:"space-y-8"},[e("div",FO,[d[23]||(d[23]=e("h3",{class:"text-lg font-semibold text-gray-900 mb-6 flex items-center gap-2"},[e("svg",{class:"w-5 h-5 text-indigo-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})]),Q(" Parents ")],-1)),e("div",OO,[e("div",zO,[d[17]||(d[17]=e("h4",{class:"font-medium text-gray-800 border-b border-indigo-200 pb-2"},"Father's Details",-1)),e("div",null,[d[12]||(d[12]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Full Name",-1)),de(e("input",{"onUpdate:modelValue":d[0]||(d[0]=c=>i.father.name=c),type:"text",placeholder:"Enter father's full name",class:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-colors"},null,512),[[xe,i.father.name]])]),e("div",null,[d[13]||(d[13]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Gotra",-1)),de(e("input",{"onUpdate:modelValue":d[1]||(d[1]=c=>i.father.gotra=c),type:"text",placeholder:"Enter father's gotra",class:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-colors"},null,512),[[xe,i.father.gotra]])]),e("div",null,[d[14]||(d[14]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Native Place",-1)),de(e("input",{"onUpdate:modelValue":d[2]||(d[2]=c=>i.father.nativePlace=c),type:"text",placeholder:"Enter father's native place",class:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-colors"},null,512),[[xe,i.father.nativePlace]])]),e("div",null,[d[16]||(d[16]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Veda Shaka",-1)),de(e("select",{"onUpdate:modelValue":d[3]||(d[3]=c=>i.father.vedaShaka=c),class:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-colors"},[...d[15]||(d[15]=[$e('<option value="">Select Veda Shaka</option><option value="Rigveda">Rigveda</option><option value="Yajurveda">Yajurveda</option><option value="Samaveda">Samaveda</option><option value="Atharvaveda">Atharvaveda</option>',5)])],512),[[Ce,i.father.vedaShaka]])])]),e("div",HO,[d[22]||(d[22]=e("h4",{class:"font-medium text-gray-800 border-b border-indigo-200 pb-2"},"Mother's Details",-1)),e("div",null,[d[18]||(d[18]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Full Name",-1)),de(e("input",{"onUpdate:modelValue":d[4]||(d[4]=c=>i.mother.name=c),type:"text",placeholder:"Enter mother's full name",class:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-colors"},null,512),[[xe,i.mother.name]])]),e("div",null,[d[19]||(d[19]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Maiden Gotra",-1)),de(e("input",{"onUpdate:modelValue":d[5]||(d[5]=c=>i.mother.maidenGotra=c),type:"text",placeholder:"Enter mother's maiden gotra",class:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-colors"},null,512),[[xe,i.mother.maidenGotra]])]),e("div",null,[d[20]||(d[20]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Native Place",-1)),de(e("input",{"onUpdate:modelValue":d[6]||(d[6]=c=>i.mother.nativePlace=c),type:"text",placeholder:"Enter mother's native place",class:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-colors"},null,512),[[xe,i.mother.nativePlace]])]),e("div",null,[d[21]||(d[21]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Father's Name",-1)),de(e("input",{"onUpdate:modelValue":d[7]||(d[7]=c=>i.mother.fatherName=c),type:"text",placeholder:"Enter maternal grandfather's name",class:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-colors"},null,512),[[xe,i.mother.fatherName]])])])])]),e("div",qO,[d[30]||(d[30]=e("h3",{class:"text-lg font-semibold text-gray-900 mb-6 flex items-center gap-2"},[e("svg",{class:"w-5 h-5 text-amber-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197m13.5-9a2.5 2.5 0 11-5 0 2.5 2.5 0 015 0z"})]),Q(" Grandparents (Optional) ")],-1)),e("div",GO,[e("div",WO,[d[26]||(d[26]=e("h4",{class:"font-medium text-gray-800 border-b border-amber-200 pb-2"},"Paternal Grandparents",-1)),e("div",JO,[e("div",null,[d[24]||(d[24]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Grandfather",-1)),de(e("input",{"onUpdate:modelValue":d[8]||(d[8]=c=>i.paternalGrandfather=c),type:"text",placeholder:"Name",class:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-amber-500 transition-colors"},null,512),[[xe,i.paternalGrandfather]])]),e("div",null,[d[25]||(d[25]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Grandmother",-1)),de(e("input",{"onUpdate:modelValue":d[9]||(d[9]=c=>i.paternalGrandmother=c),type:"text",placeholder:"Name",class:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-amber-500 transition-colors"},null,512),[[xe,i.paternalGrandmother]])])])]),e("div",YO,[d[29]||(d[29]=e("h4",{class:"font-medium text-gray-800 border-b border-amber-200 pb-2"},"Maternal Grandparents",-1)),e("div",KO,[e("div",null,[d[27]||(d[27]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Grandfather",-1)),de(e("input",{"onUpdate:modelValue":d[10]||(d[10]=c=>i.maternalGrandfather=c),type:"text",placeholder:"Name",class:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-amber-500 transition-colors"},null,512),[[xe,i.maternalGrandfather]])]),e("div",null,[d[28]||(d[28]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Grandmother",-1)),de(e("input",{"onUpdate:modelValue":d[11]||(d[11]=c=>i.maternalGrandmother=c),type:"text",placeholder:"Name",class:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-amber-500 transition-colors"},null,512),[[xe,i.maternalGrandmother]])])])])])]),d[31]||(d[31]=e("div",{class:"flex flex-col sm:flex-row gap-4 pt-6 border-t border-gray-200"},null,-1))],32)]))}},ZO={class:"bg-white rounded-xl shadow-lg p-8"},QO={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4"},ez=["id","value"],tz=["for"],oz={class:"flex-1"},sz={class:"flex items-center mb-2"},nz={class:"font-semibold text-gray-900 text-sm"},rz={class:"text-xs text-gray-600"},az={class:"mt-2 flex items-center text-xs text-indigo-600"},iz={class:"bg-indigo-100 px-2 py-1 rounded-full"},lz={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},dz=["id","value"],uz=["for"],cz={class:"flex-1"},pz={class:"font-semibold text-gray-900 text-sm mb-1"},mz={class:"text-xs text-gray-600"},gz={__name:"SevaPreferencesForm",props:{data:{type:Object,default:()=>({})}},emits:["next","previous","skip","update"],setup(t,{emit:o}){const s=o,n=t,r=V(!1),i=Je({favoriteSevas:[],donationInterests:[],preferredFrequency:"",specialInterests:""}),a=[{id:"abhisheka",name:"Abhisheka",description:"Sacred bathing ritual of the deity",icon:Su,minAmount:51},{id:"arti",name:"Arti",description:"Divine light ceremony",icon:Du,minAmount:21},{id:"annadana",name:"Annadana",description:"Food donation service",icon:sa,minAmount:101},{id:"archana",name:"Archana",description:"Personal prayer offering",icon:Iy,minAmount:11},{id:"kalyanam",name:"Kalyanam",description:"Divine marriage ceremony",icon:_u,minAmount:501},{id:"homam",name:"Homam",description:"Sacred fire ritual",icon:Du,minAmount:251}],l=[{id:"temple-maintenance",name:"Temple Maintenance",description:"Upkeep and renovation of temple premises",icon:My},{id:"annadana",name:"Annadana Program",description:"Free food distribution to devotees",icon:sa},{id:"festivals",name:"Festival Celebrations",description:"Special occasions and religious festivals",icon:Su},{id:"education",name:"Religious Education",description:"Vedic studies and spiritual learning programs",icon:Dy},{id:"construction",name:"Temple Construction",description:"New building projects and expansions",icon:Cy},{id:"general",name:"General Donations",description:"Flexible contributions for temple needs",icon:_u}],d=async()=>{r.value=!0;try{s("update",i),s("next")}catch(c){console.error("Error saving seva preferences:",c)}finally{r.value=!1}};return Ue(i,()=>{s("update",i)},{deep:!0}),Ee(()=>{n.data&&(i.favoriteSevas=n.data.favoriteSevas||[],i.donationInterests=n.data.donationInterests||[],i.preferredFrequency=n.data.preferredFrequency||"",i.specialInterests=n.data.specialInterests||"")}),(c,u)=>(m(),f("div",ZO,[u[9]||(u[9]=e("div",{class:"mb-8"},[e("h2",{class:"text-2xl font-bold text-gray-900 mb-2"}," Seva Preferences "),e("p",{class:"text-gray-600"}," Select your preferred sevas and donation interests to personalize your temple experience. ")],-1)),e("form",{onSubmit:Oe(d,["prevent"]),class:"space-y-8"},[e("div",null,[u[4]||(u[4]=e("label",{class:"block text-sm font-semibold text-gray-900 mb-4"},[Q(" Favorite Sevas "),e("span",{class:"text-gray-500 font-normal"},"(Select multiple)")],-1)),e("div",QO,[(m(),f(he,null,ke(a,p=>e("div",{key:p.id,class:"relative"},[de(e("input",{id:`seva-${p.id}`,"onUpdate:modelValue":u[0]||(u[0]=v=>i.favoriteSevas=v),value:p.id,type:"checkbox",class:"sr-only peer"},null,8,ez),[[ot,i.favoriteSevas]]),e("label",{for:`seva-${p.id}`,class:"flex items-start p-4 border-2 border-gray-200 rounded-xl cursor-pointer transition-all duration-200 hover:border-indigo-300 peer-checked:border-indigo-600 peer-checked:bg-indigo-50"},[e("div",oz,[e("div",sz,[(m(),Re(xt(p.icon),{class:"w-5 h-5 text-indigo-600 mr-2 flex-shrink-0"})),e("h3",nz,y(p.name),1)]),e("p",rz,y(p.description),1),e("div",az,[e("span",iz," "+y(p.minAmount)+"+ ",1)])]),u[3]||(u[3]=e("div",{class:"ml-3 flex items-center"},[e("div",{class:"w-5 h-5 border-2 border-gray-300 rounded peer-checked:border-indigo-600 peer-checked:bg-indigo-600 peer-checked:text-white flex items-center justify-center"},[e("svg",{class:"w-3 h-3 hidden peer-checked:block",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z","clip-rule":"evenodd"})])])],-1))],8,tz)])),64))])]),e("div",null,[u[6]||(u[6]=e("label",{class:"block text-sm font-semibold text-gray-900 mb-4"},[Q(" Donation Interests "),e("span",{class:"text-gray-500 font-normal"},"(Select categories you're interested in)")],-1)),e("div",lz,[(m(),f(he,null,ke(l,p=>e("div",{key:p.id,class:"relative"},[de(e("input",{id:`donation-${p.id}`,"onUpdate:modelValue":u[1]||(u[1]=v=>i.donationInterests=v),value:p.id,type:"checkbox",class:"sr-only peer"},null,8,dz),[[ot,i.donationInterests]]),e("label",{for:`donation-${p.id}`,class:"flex items-center p-4 border-2 border-gray-200 rounded-xl cursor-pointer transition-all duration-200 hover:border-indigo-300 peer-checked:border-indigo-600 peer-checked:bg-indigo-50"},[(m(),Re(xt(p.icon),{class:"w-6 h-6 text-indigo-600 mr-4 flex-shrink-0"})),e("div",cz,[e("h3",pz,y(p.name),1),e("p",mz,y(p.description),1)]),u[5]||(u[5]=e("div",{class:"w-5 h-5 border-2 border-gray-300 rounded peer-checked:border-indigo-600 peer-checked:bg-indigo-600 peer-checked:text-white flex items-center justify-center"},[e("svg",{class:"w-3 h-3 hidden peer-checked:block",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z","clip-rule":"evenodd"})])],-1))],8,uz)])),64))])]),e("div",null,[u[7]||(u[7]=e("label",{for:"specialInterests",class:"block text-sm font-semibold text-gray-900 mb-2"}," Special Interests or Notes ",-1)),de(e("textarea",{id:"specialInterests","onUpdate:modelValue":u[2]||(u[2]=p=>i.specialInterests=p),rows:"4",class:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-colors duration-200 resize-none",placeholder:"Any specific festivals, rituals, or temple activities you're particularly interested in..."},null,512),[[xe,i.specialInterests]])]),u[8]||(u[8]=e("div",{class:"flex flex-col sm:flex-row gap-4 pt-6 border-t border-gray-200"},[e("div",{class:"flex gap-4 flex-1"})],-1))],32)]))}},fz={class:"relative w-full"},vz=["for"],hz={key:0,class:"text-red-500 ml-1"},yz={class:"relative"},xz=["id","disabled"],bz={class:"absolute inset-y-0 right-0 flex items-center pr-3 pointer-events-none"},wz={key:0,class:"absolute z-50 mt-2 w-full bg-white shadow-lg rounded-xl border border-gray-200 py-1 max-h-60 overflow-auto"},kz={key:0,class:"p-2 border-b border-gray-100"},_z=["placeholder"],$z={class:"max-h-48 overflow-y-auto"},Sz={key:0,class:"px-4 py-3 text-sm text-gray-500 text-center"},Dz=["onClick"],Cz={class:"block truncate"},Tz={key:0,class:"absolute inset-y-0 right-0 flex items-center pr-4"},Ez={key:1,class:"mt-2 text-sm text-red-600"},Az={key:2,class:"mt-2 text-sm text-gray-500"},zn={__name:"BaseSelect",props:{modelValue:{type:[String,Number,Object],default:null},options:{type:Array,default:()=>[]},label:{type:String,default:""},placeholder:{type:String,default:"Select an option"},error:{type:String,default:""},helpText:{type:String,default:""},disabled:{type:Boolean,default:!1},required:{type:Boolean,default:!1},searchable:{type:Boolean,default:!1},clearable:{type:Boolean,default:!1}},emits:["update:modelValue","change"],setup(t,{emit:o}){const s=t,n=o,r=V(!1),i=V(""),a=V(`select-${Math.random().toString(36).substr(2,9)}`),l=te(()=>s.modelValue?s.options.find(g=>g.value===s.modelValue):null),d=te(()=>!s.searchable||!i.value?s.options:s.options.filter(g=>g.label.toLowerCase().includes(i.value.toLowerCase()))),c=()=>{s.disabled||(r.value=!r.value)},u=g=>{n("update:modelValue",g.value),n("change",g),r.value=!1,i.value=""},p=g=>{setTimeout(()=>{var h;(h=g.relatedTarget)!=null&&h.closest(".relative")||(r.value=!1)},100)},v=g=>{var h;(h=g.target.closest(`#${a.value}`))!=null&&h.parentElement||(r.value=!1)};return Ee(()=>{document.addEventListener("click",v)}),Ut(()=>{document.removeEventListener("click",v)}),(g,h)=>(m(),f("div",fz,[t.label?(m(),f("label",{key:0,for:a.value,class:"block text-sm font-medium text-gray-900 mb-2"},[Q(y(t.label)+" ",1),t.required?(m(),f("span",hz,"*")):Y("",!0)],8,vz)):Y("",!0),e("div",yz,[e("button",{id:a.value,type:"button",class:ie(["relative w-full bg-white border rounded-xl px-4 py-3 text-left cursor-pointer focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-all duration-200",[t.error?"border-red-300 focus:ring-red-500 focus:border-red-500":"border-gray-300 hover:border-gray-400",t.disabled?"bg-gray-100 cursor-not-allowed opacity-50":"hover:bg-gray-50"]]),disabled:t.disabled,onClick:c,onBlur:p},[e("span",{class:ie(["block truncate text-sm",l.value?"text-gray-900":"text-gray-500"])},y(l.value?l.value.label:t.placeholder),3),e("span",bz,[(m(),f("svg",{class:ie(["h-5 w-5 text-gray-400 transition-transform duration-200",{"rotate-180":r.value}]),xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[...h[2]||(h[2]=[e("path",{"fill-rule":"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z","clip-rule":"evenodd"},null,-1)])],2))])],42,xz),re(It,{"enter-active-class":"transition ease-out duration-200","enter-from-class":"opacity-0 translate-y-1","enter-to-class":"opacity-100 translate-y-0","leave-active-class":"transition ease-in duration-150","leave-from-class":"opacity-100 translate-y-0","leave-to-class":"opacity-0 translate-y-1"},{default:fe(()=>{var D;return[r.value?(m(),f("div",wz,[t.searchable?(m(),f("div",kz,[de(e("input",{"onUpdate:modelValue":h[0]||(h[0]=C=>i.value=C),type:"text",class:"w-full px-3 py-2 text-sm border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",placeholder:`Search ${((D=t.label)==null?void 0:D.toLowerCase())||"options"}...`,onClick:h[1]||(h[1]=Oe(()=>{},["stop"]))},null,8,_z),[[xe,i.value]])])):Y("",!0),e("div",$z,[d.value.length===0?(m(),f("div",Sz,y(i.value?"No matches found":"No options available"),1)):Y("",!0),(m(!0),f(he,null,ke(d.value,C=>{var B,_,T;return m(),f("button",{key:C.value,type:"button",class:ie(["relative w-full text-left px-4 py-3 text-sm hover:bg-indigo-50 focus:outline-none focus:bg-indigo-50 transition-colors duration-150",{"bg-indigo-100 text-indigo-900":((B=l.value)==null?void 0:B.value)===C.value,"text-gray-900":((_=l.value)==null?void 0:_.value)!==C.value}]),onClick:S=>u(C)},[e("span",Cz,y(C.label),1),((T=l.value)==null?void 0:T.value)===C.value?(m(),f("span",Tz,[...h[3]||(h[3]=[e("svg",{class:"h-5 w-5 text-indigo-600",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},[e("path",{"fill-rule":"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z","clip-rule":"evenodd"})],-1)])])):Y("",!0)],10,Dz)}),128))])])):Y("",!0)]}),_:1})]),t.error?(m(),f("p",Ez,y(t.error),1)):Y("",!0),t.helpText&&!t.error?(m(),f("p",Az,y(t.helpText),1)):Y("",!0)]))}},Iz={class:"bg-white rounded-xl shadow-lg p-8"},Mz={class:"bg-gray-50 rounded-xl p-6"},Rz={class:"flex items-center mb-6"},Pz={class:"ml-auto flex items-center cursor-pointer"},jz={class:"relative"},Nz={class:"ml-3 text-sm text-gray-600"},Lz={key:0,class:"grid grid-cols-1 md:grid-cols-2 gap-6"},Bz=["value"],Vz={class:"bg-gray-50 rounded-xl p-6"},Uz={class:"flex items-center justify-between mb-6"},Fz={class:"flex items-center"},Oz={key:0,class:"text-center py-8 text-gray-500"},zz={key:1,class:"space-y-6"},Hz={class:"flex items-center justify-between mb-4"},qz={class:"font-semibold text-gray-900"},Gz=["onClick"],Wz={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4"},Jz=["value","onInput"],Yz={class:"bg-red-50 rounded-xl p-6"},Kz={class:"flex items-center justify-between mb-6"},Xz={class:"flex items-center"},Zz={key:0,class:"text-center py-8 text-gray-500"},Qz={key:1,class:"space-y-6"},eH={class:"flex items-center justify-between mb-4"},tH={class:"font-semibold text-gray-900"},oH=["onClick"],sH={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4"},nH={__name:"FamilyMembersForm",props:{data:{type:Object,default:()=>({spouse:{name:"",email:"",phone:"",dateOfBirth:"",gotra:"",nakshatra:""},children:[],emergencyContacts:[],hasSpouse:!1})}},emits:["next","previous","skip","update","updateData"],setup(t,{emit:o}){const s=t,n=o,r=V(!1),i=V(s.data.hasSpouse||!1),a=Je({spouse:{...s.data.spouse},children:s.data.children?[...s.data.children]:[],emergencyContacts:s.data.emergencyContacts?[...s.data.emergencyContacts]:[]}),l=[{value:"bharadvaja",label:"Bharadvaja"},{value:"kashyapa",label:"Kashyapa"},{value:"atri",label:"Atri"},{value:"vasishta",label:"Vasishta"},{value:"gautama",label:"Gautama"},{value:"jamadagni",label:"Jamadagni"},{value:"vishvamitra",label:"Vishvamitra"}],d=[{value:"male",label:"Male"},{value:"female",label:"Female"}],c=T=>{if(!T)return"";try{if(typeof T=="string"&&T.includes("T")){const S=new Date(T);return isNaN(S.getTime())?"":S.toISOString().split("T")[0]}return T instanceof Date?isNaN(T.getTime())?"":T.toISOString().split("T")[0]:typeof T=="string"&&/^\d{4}-\d{2}-\d{2}$/.test(T)?T:""}catch(S){return console.warn("Date formatting error:",S),""}},u=T=>{if(!T)return"";try{const S=new Date(T+"T00:00:00Z");return isNaN(S.getTime())?"":S.toISOString()}catch(S){return console.warn("Date conversion error:",S),""}},p=T=>{a.spouse.dateOfBirth=u(T),B()},v=(T,S)=>{a.children[T]&&(a.children[T].dateOfBirth=u(S),B())},g=()=>{a.children.push({name:"",dateOfBirth:"",gender:"",education:"",interests:""}),B()},h=T=>{a.children.splice(T,1),B()},D=()=>{a.emergencyContacts.push({name:"",relationship:"",phone:"",address:""}),B()},C=T=>{a.emergencyContacts.splice(T,1),B()},B=()=>{const T={...a,hasSpouse:i.value};n("update",T),n("updateData",T)},_=async()=>{r.value=!0;try{const T={...a,hasSpouse:i.value};n("update",T),n("updateData",T),n("next")}catch(T){console.error("Error saving family details:",T)}finally{r.value=!1}};return Ue([()=>a.spouse.name,()=>a.spouse.email,()=>a.spouse.phone,()=>a.spouse.gotra,()=>a.spouse.nakshatra,i],()=>{B()},{deep:!0}),Ue(()=>a.children.map(T=>({name:T.name,gender:T.gender,education:T.education,interests:T.interests})),()=>{B()},{deep:!0}),Ue(()=>a.emergencyContacts,()=>{B()},{deep:!0}),Ue(i,()=>{B()}),(T,S)=>(m(),f("div",Iz,[S[22]||(S[22]=e("div",{class:"mb-8"},[e("h2",{class:"text-2xl font-bold text-gray-900 mb-2"}," Family Members "),e("p",{class:"text-gray-600"}," Add your family members and emergency contacts for better temple community engagement. ")],-1)),e("form",{onSubmit:Oe(_,["prevent"]),class:"space-y-8"},[e("div",Mz,[e("div",Rz,[re(_e(sa),{class:"w-6 h-6 text-indigo-600 mr-3"}),S[8]||(S[8]=e("h3",{class:"text-lg font-semibold text-gray-900"},"Spouse Details",-1)),e("label",Pz,[de(e("input",{"onUpdate:modelValue":S[0]||(S[0]=k=>i.value=k),type:"checkbox",class:"sr-only"},null,512),[[ot,i.value]]),e("div",jz,[S[7]||(S[7]=e("div",{class:"block bg-gray-300 w-10 h-6 rounded-full"},null,-1)),e("div",{class:ie(["absolute left-1 top-1 bg-white w-4 h-4 rounded-full transition-transform duration-200",i.value?"transform translate-x-4 bg-indigo-600":""])},null,2)]),e("span",Nz,y(i.value?"Married":"Single"),1)])]),i.value?(m(),f("div",Lz,[re(st,{modelValue:a.spouse.name,"onUpdate:modelValue":S[1]||(S[1]=k=>a.spouse.name=k),label:"Spouse Name",placeholder:"Enter spouse's full name",required:""},null,8,["modelValue"]),re(st,{modelValue:a.spouse.email,"onUpdate:modelValue":S[2]||(S[2]=k=>a.spouse.email=k),type:"email",label:"Spouse Email",placeholder:"spouse@example.com"},null,8,["modelValue"]),re(st,{modelValue:a.spouse.phone,"onUpdate:modelValue":S[3]||(S[3]=k=>a.spouse.phone=k),type:"tel",label:"Spouse Phone",placeholder:"+91 00000 00000"},null,8,["modelValue"]),e("div",null,[S[9]||(S[9]=e("label",{class:"block text-sm font-semibold text-gray-900 mb-2"}," Date of Birth ",-1)),e("input",{value:c(a.spouse.dateOfBirth),onInput:S[4]||(S[4]=k=>p(k.target.value)),type:"date",class:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-colors duration-200"},null,40,Bz)]),e("div",null,[S[10]||(S[10]=e("label",{class:"block text-sm font-semibold text-gray-900 mb-2"}," Gotra ",-1)),re(zn,{modelValue:a.spouse.gotra,"onUpdate:modelValue":S[5]||(S[5]=k=>a.spouse.gotra=k),options:l,placeholder:"Select gotra"},null,8,["modelValue"])]),re(st,{modelValue:a.spouse.nakshatra,"onUpdate:modelValue":S[6]||(S[6]=k=>a.spouse.nakshatra=k),label:"Nakshatra",placeholder:"Enter nakshatra"},null,8,["modelValue"])])):Y("",!0)]),e("div",Vz,[e("div",Uz,[e("div",Fz,[re(_e(jy),{class:"w-6 h-6 text-indigo-600 mr-3"}),S[11]||(S[11]=e("h3",{class:"text-lg font-semibold text-gray-900"},"Children",-1))]),e("button",{type:"button",onClick:g,class:"flex items-center px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors duration-200"},[re(_e($u),{class:"w-4 h-4 mr-2"}),S[12]||(S[12]=Q(" Add Child ",-1))])]),a.children.length===0?(m(),f("div",Oz,[re(_e(Py),{class:"w-12 h-12 mx-auto mb-4 text-gray-300"}),S[13]||(S[13]=e("p",null,"No children added yet",-1)),S[14]||(S[14]=e("p",{class:"text-sm"},'Click "Add Child" to include family members',-1))])):(m(),f("div",zz,[(m(!0),f(he,null,ke(a.children,(k,b)=>(m(),f("div",{key:b,class:"bg-white rounded-lg p-6 border-2 border-gray-200"},[e("div",Hz,[e("h4",qz,"Child "+y(b+1),1),e("button",{type:"button",onClick:x=>h(b),class:"text-red-600 hover:text-red-800 p-1"},[re(_e(Cu),{class:"w-5 h-5"})],8,Gz)]),e("div",Wz,[re(st,{modelValue:k.name,"onUpdate:modelValue":x=>k.name=x,label:"Name",placeholder:"Child's name",required:""},null,8,["modelValue","onUpdate:modelValue"]),e("div",null,[S[15]||(S[15]=e("label",{class:"block text-sm font-semibold text-gray-900 mb-2"}," Date of Birth * ",-1)),e("input",{value:c(k.dateOfBirth),onInput:x=>v(b,x.target.value),type:"date",required:"",class:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-colors duration-200"},null,40,Jz)]),e("div",null,[S[16]||(S[16]=e("label",{class:"block text-sm font-semibold text-gray-900 mb-2"}," Gender ",-1)),re(zn,{modelValue:k.gender,"onUpdate:modelValue":x=>k.gender=x,options:d,placeholder:"Select gender"},null,8,["modelValue","onUpdate:modelValue"])]),re(st,{modelValue:k.education,"onUpdate:modelValue":x=>k.education=x,label:"Education/Class",placeholder:"Current class or qualification"},null,8,["modelValue","onUpdate:modelValue"]),re(st,{modelValue:k.interests,"onUpdate:modelValue":x=>k.interests=x,label:"Interests",placeholder:"Hobbies, sports, etc."},null,8,["modelValue","onUpdate:modelValue"])])]))),128))]))]),e("div",Yz,[e("div",Kz,[e("div",Xz,[re(_e(Ry),{class:"w-6 h-6 text-red-600 mr-3"}),S[17]||(S[17]=e("h3",{class:"text-lg font-semibold text-gray-900"},"Emergency Contacts",-1))]),e("button",{type:"button",onClick:D,class:"flex items-center px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors duration-200"},[re(_e($u),{class:"w-4 h-4 mr-2"}),S[18]||(S[18]=Q(" Add Contact ",-1))])]),a.emergencyContacts.length===0?(m(),f("div",Zz,[re(_e(Ea),{class:"w-12 h-12 mx-auto mb-4 text-gray-300"}),S[19]||(S[19]=e("p",null,"No emergency contacts added",-1)),S[20]||(S[20]=e("p",{class:"text-sm"},"Add at least one emergency contact for safety",-1))])):(m(),f("div",Qz,[(m(!0),f(he,null,ke(a.emergencyContacts,(k,b)=>(m(),f("div",{key:b,class:"bg-white rounded-lg p-6 border-2 border-gray-200"},[e("div",eH,[e("h4",tH,"Emergency Contact "+y(b+1),1),e("button",{type:"button",onClick:x=>C(b),class:"text-red-600 hover:text-red-800 p-1"},[re(_e(Cu),{class:"w-5 h-5"})],8,oH)]),e("div",sH,[re(st,{modelValue:k.name,"onUpdate:modelValue":x=>k.name=x,label:"Name",placeholder:"Contact name",required:""},null,8,["modelValue","onUpdate:modelValue"]),re(st,{modelValue:k.relationship,"onUpdate:modelValue":x=>k.relationship=x,label:"Relationship",placeholder:"Brother, Sister, Friend",required:""},null,8,["modelValue","onUpdate:modelValue"]),re(st,{modelValue:k.phone,"onUpdate:modelValue":x=>k.phone=x,type:"tel",label:"Phone",placeholder:"+91 00000 00000",required:""},null,8,["modelValue","onUpdate:modelValue"]),re(st,{modelValue:k.address,"onUpdate:modelValue":x=>k.address=x,label:"Address",placeholder:"City, State"},null,8,["modelValue","onUpdate:modelValue"])])]))),128))]))]),S[21]||(S[21]=e("div",{class:"flex flex-col sm:flex-row gap-4 pt-6 border-t border-gray-200"},null,-1))],32)]))}},rH={class:"bg-white rounded-xl shadow-lg p-6 border border-indigo-100"},aH={class:"space-y-4"},iH={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},lH={class:"space-y-4"},dH={class:"space-y-6"},uH={__name:"NotesAttachmentsForm",props:{data:{type:Object,default:()=>({})}},emits:["previous","skip","submit","update","update-data"],setup(t,{emit:o}){const s=o,{showToast:n}=je(),r=V(!1);V(null),V(null),V(null);const i=t,a=Je({allergies:"",dietaryRestrictions:"",sankalpa:"",additionalNotes:"",shareProfile:!0,receiveNotifications:!0}),l=async()=>{try{r.value=!0,await new Promise(d=>setTimeout(d,2e3)),n("Profile completed successfully!","success"),s("submit",a)}catch{n("Error completing profile. Please try again.","error")}finally{r.value=!1}};return Ue(a,()=>{s("update",a)},{deep:!0}),Ee(()=>{i.data&&(a.healthNotes=i.data.healthNotes||"",a.allergies=i.data.allergies||"",a.dietaryRestrictions=i.data.dietaryRestrictions||"",a.sankalpa=i.data.sankalpa||"",a.additionalNotes=i.data.additionalNotes||"")}),(d,c)=>(m(),f("div",rH,[c[11]||(c[11]=$e('<div class="flex items-center justify-between mb-6"><div><h3 class="text-xl font-semibold text-gray-900">Notes &amp; Attachments</h3><p class="text-sm text-gray-600 mt-1">Add photos, health information, and personal notes</p></div><div class="text-right"><span class="text-xs font-medium text-indigo-600 bg-indigo-50 px-2 py-1 rounded-full"> Step 6 of 6 </span></div></div>',1)),e("form",{onSubmit:Oe(l,["prevent"]),class:"space-y-8"},[e("div",aH,[c[6]||(c[6]=e("div",{class:"flex items-center space-x-2"},[e("svg",{class:"w-5 h-5 text-indigo-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})]),e("h4",{class:"text-lg font-medium text-gray-900"},"Health Information")],-1)),e("div",iH,[e("div",null,[c[4]||(c[4]=e("label",{for:"allergies",class:"block text-sm font-medium text-gray-700 mb-2"}," Allergies/Medical Conditions ",-1)),de(e("textarea",{id:"allergies","onUpdate:modelValue":c[0]||(c[0]=u=>a.allergies=u),rows:"4",placeholder:"List any allergies or medical conditions...",class:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-colors resize-none"},null,512),[[xe,a.allergies]])]),e("div",null,[c[5]||(c[5]=e("label",{for:"dietaryRestrictions",class:"block text-sm font-medium text-gray-700 mb-2"}," Dietary Restrictions ",-1)),de(e("textarea",{id:"dietaryRestrictions","onUpdate:modelValue":c[1]||(c[1]=u=>a.dietaryRestrictions=u),rows:"4",placeholder:"Vegetarian, vegan, specific food restrictions...",class:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-colors resize-none"},null,512),[[xe,a.dietaryRestrictions]])])])]),e("div",lH,[c[9]||(c[9]=e("div",{class:"flex items-center space-x-2"},[e("svg",{class:"w-5 h-5 text-indigo-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11.049 2.927c.3-.921 1.603-.921 1.902 0l1.519 4.674a1 1 0 00.95.69h4.915c.969 0 1.371 1.24.588 1.81l-3.976 2.888a1 1 0 00-.363 1.118l1.518 4.674c.3.922-.755 1.688-1.538 1.118l-3.976-2.888a1 1 0 00-1.176 0l-3.976 2.888c-.783.57-1.838-.197-1.538-1.118l1.518-4.674a1 1 0 00-.363-1.118l-3.976-2.888c-.784-.57-.38-1.81.588-1.81h4.914a1 1 0 00.951-.69l1.519-4.674z"})]),e("h4",{class:"text-lg font-medium text-gray-900"},"Sankalpa & Personal Notes")],-1)),e("div",dH,[e("div",null,[c[7]||(c[7]=e("label",{for:"sankalpa",class:"block text-sm font-medium text-gray-700 mb-2"}," Personal Sankalpa/Intentions ",-1)),de(e("textarea",{id:"sankalpa","onUpdate:modelValue":c[2]||(c[2]=u=>a.sankalpa=u),rows:"4",placeholder:"Share your spiritual intentions, goals, or personal sankalpa...",class:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-colors resize-none"},null,512),[[xe,a.sankalpa]])]),e("div",null,[c[8]||(c[8]=e("label",{for:"additionalNotes",class:"block text-sm font-medium text-gray-700 mb-2"}," Additional Notes ",-1)),de(e("textarea",{id:"additionalNotes","onUpdate:modelValue":c[3]||(c[3]=u=>a.additionalNotes=u),rows:"4",placeholder:"Any other information you'd like to share with the temple...",class:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-colors resize-none"},null,512),[[xe,a.additionalNotes]])])])]),c[10]||(c[10]=e("div",{class:"flex flex-col sm:flex-row justify-between items-center pt-6 border-t border-gray-200 space-y-4 sm:space-y-0"},[e("div",{class:"flex space-x-4"})],-1))],32)]))}},cH={class:"min-h-screen bg-gray-50 py-8"},pH={class:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8"},mH={class:"bg-white rounded-xl shadow-sm border border-gray-200 mb-8 p-6"},gH={class:"flex items-center justify-between text-sm mb-2"},fH={class:"font-medium text-indigo-600"},vH={class:"text-gray-600"},hH={class:"w-full bg-gray-200 rounded-full h-2"},yH={class:"bg-white rounded-xl shadow-sm border border-gray-200 mb-6"},xH={class:"px-6 py-4 border-b border-gray-100"},bH={class:"flex space-x-8 overflow-x-auto"},wH=["onClick"],kH={key:0,xmlns:"http://www.w3.org/2000/svg",class:"w-3 h-3",viewBox:"0 0 20 20",fill:"currentColor"},_H={key:1},$H={class:"bg-white rounded-xl shadow-sm border border-gray-200"},SH={class:"p-6"},DH={key:0,class:"flex flex-col items-center justify-center py-12"},CH={key:1,class:"bg-red-50 p-4 rounded-lg"},TH={class:"flex"},EH={class:"ml-3"},AH={class:"mt-2 text-sm text-red-700"},IH={key:2,class:"min-h-[400px]"},MH={key:0},RH={key:1},PH={key:2},jH={key:3},NH={key:4},LH={key:5},BH={key:3,class:"flex items-center justify-between pt-6 border-t border-gray-100 mt-8"},VH=["disabled"],UH={class:"flex items-center space-x-3"},FH=["disabled"],OH={key:0},zH={key:1},HH={key:2},qH={key:3,xmlns:"http://www.w3.org/2000/svg",class:"w-4 h-4",viewBox:"0 0 20 20",fill:"currentColor"},Ru={__name:"ProfileCreation",setup(t){const o=Ke(),s=dn(),n=je(),r=V(!0),i=V(null),a=V(0),l=V(!1),d=V({personal:{},spiritual:{},lineage:{father:{name:"",gotra:"",nativePlace:"",vedaShaka:""},mother:{name:"",maidenGotra:"",nativePlace:"",fatherName:""},paternalGrandfather:"",paternalGrandmother:"",maternalGrandfather:"",maternalGrandmother:""},preferences:{favoriteSevas:[],donationInterests:[],preferredFrequency:"",specialInterests:""},family:{spouse:{name:"",email:"",phone:"",dateOfBirth:"",gotra:"",nakshatra:""},children:[],emergencyContacts:[]},notes:{healthNotes:"",allergies:"",dietaryRestrictions:"",sankalpa:"",additionalNotes:"",documents:[],profilePhoto:null,familyPhoto:null,shareProfile:!0,receiveNotifications:!0}}),c=V([{id:"personal",title:"Personal Details",component:"PersonalDetailsForm",completed:!1},{id:"spiritual",title:"Spiritual Info",component:"SpiritualInfoForm",completed:!1},{id:"lineage",title:"Family Lineage",component:"FamilyLineageForm",completed:!1},{id:"preferences",title:"Seva Preferences",component:"SevaPreferencesForm",completed:!1},{id:"family",title:"Family Members",component:"FamilyMembersForm",completed:!1},{id:"notes",title:"Notes & Attachments",component:"NotesAttachmentsForm",completed:!1}]),u=te(()=>c.value.length),p=te(()=>{const b=c.value.filter(x=>x.completed).length;return Math.round(b/u.value*100)}),v=te(()=>c.value),g=b=>{b>=0&&b<u.value&&(a.value=b)},h=async()=>{l.value=!0;try{const b=c.value[a.value].id;console.log(` Moving to next step, saving data for ${b}:`,d.value[b]),await s.updateProfileStep(b,d.value[b]),c.value[a.value].completed=!0,a.value<u.value-1?a.value++:await T()}catch(b){n.error("Failed to save step data"),console.error("Error saving step:",b)}finally{l.value=!1}},D=()=>{a.value>0&&a.value--},C=()=>{a.value<u.value-1?a.value++:B()},B=async()=>{try{l.value=!0;const b=await s.completeProfile();if(b&&b.redirectPath)o.push(b.redirectPath);else{const x=s.getCurrentEntityId();x?o.push(`/entity/${x}/devotee/dashboard`):o.push("/devotee/dashboard")}}catch(b){n.error("Failed to complete profile"),console.error("Error skipping to end:",b)}finally{l.value=!1}},_=(b,x)=>{console.log(` UPDATING STEP DATA for ${b}:`,x),d.value[b]=x},T=async()=>{l.value=!0;try{console.log(" Current stepData before completion:",JSON.stringify(d.value,null,2));const b={personal:d.value.personal||{},spiritual:d.value.spiritual||{},lineage:d.value.lineage||{},preferences:d.value.preferences||{},family:d.value.family||{},notes:d.value.notes||{}};console.log(" COMPLETE PROFILE DATA GOING TO STORE:",JSON.stringify(b,null,2));const x=await s.completeProfile();if(console.log(" Profile completion result:",x),x&&x.success)if(x.redirectPath)o.push(x.redirectPath);else{const F=s.getCurrentEntityId();F?o.push(`/entity/${F}/devotee/dashboard`):o.push("/devotee/dashboard")}}catch(b){n.error("Failed to complete profile"),console.error("Error completing profile:",b)}finally{l.value=!1}},S=async()=>{i.value=null,r.value=!0;try{await k()}catch{i.value="Failed to load profile data. Please try again."}finally{r.value=!1}},k=async()=>{var b;try{r.value=!0,i.value=null;const x=await s.loadProfileData();x&&(d.value={personal:x.personal||{},spiritual:x.spiritual||{},lineage:x.lineage||{},preferences:x.preferences||{},family:x.family||{},notes:x.notes||{}},c.value.forEach((F,E)=>{const O=F.id,N=d.value[O]&&Object.keys(d.value[O]).length>0;c.value[E].completed=N}))}catch(x){((b=x==null?void 0:x.response)==null?void 0:b.status)!==404&&(i.value="Failed to load profile data. Please try again."),console.error("Error loading profile data:",x)}finally{r.value=!1}};return Ee(async()=>{await k()}),(b,x)=>(m(),f("div",cH,[e("div",pH,[e("div",mH,[e("div",{class:"flex items-center justify-between mb-4"},[x[12]||(x[12]=e("div",null,[e("h1",{class:"text-2xl font-bold text-gray-900"},"Complete Your Profile"),e("p",{class:"text-gray-600 mt-1"},"Build your spiritual profile step by step")],-1)),e("button",{onClick:B,class:"text-indigo-600 hover:text-indigo-500 font-medium text-sm"}," Skip All  ")]),e("div",null,[e("div",gH,[e("span",fH,y(v.value.filter(F=>F.completed).length)+" of "+y(u.value)+" completed ",1),e("span",vH,y(p.value)+"% Complete",1)]),e("div",hH,[e("div",{class:"bg-indigo-600 h-2 rounded-full transition-all duration-300",style:Pt({width:`${p.value}%`})},null,4)])])]),e("div",yH,[e("div",xH,[e("nav",bH,[(m(!0),f(he,null,ke(c.value,(F,E)=>(m(),f("button",{key:F.id,onClick:O=>g(E),class:ie(["flex items-center space-x-2 py-2 px-3 rounded-lg text-sm font-medium whitespace-nowrap transition-colors",a.value===E?"bg-indigo-100 text-indigo-700":F.completed?"text-green-600 hover:bg-green-50":"text-gray-500 hover:bg-gray-50"])},[e("div",{class:ie(["w-5 h-5 rounded-full flex items-center justify-center text-xs",a.value===E?"bg-indigo-600 text-white":F.completed?"bg-green-100 text-green-600":"bg-gray-200 text-gray-500"])},[F.completed?(m(),f("svg",kH,[...x[13]||(x[13]=[e("path",{"fill-rule":"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z","clip-rule":"evenodd"},null,-1)])])):(m(),f("span",_H,y(E+1),1))],2),e("span",null,y(F.title),1)],10,wH))),128))])])]),e("div",$H,[e("div",SH,[r.value?(m(),f("div",DH,[...x[14]||(x[14]=[e("svg",{class:"animate-spin h-10 w-10 text-indigo-500",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),e("p",{class:"mt-4 text-gray-600"},"Loading...",-1)])])):i.value?(m(),f("div",CH,[e("div",TH,[x[16]||(x[16]=e("svg",{class:"h-5 w-5 text-red-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})],-1)),e("div",EH,[x[15]||(x[15]=e("h3",{class:"text-sm font-medium text-red-800"},"An error occurred",-1)),e("p",AH,y(i.value),1),e("div",{class:"mt-4"},[e("button",{onClick:S,class:"text-sm font-medium text-red-700 hover:text-red-600"}," Try again ")])])])])):(m(),f("div",IH,[a.value===0?(m(),f("div",MH,[re(SO,{data:d.value.personal,onUpdate:x[0]||(x[0]=F=>_("personal",F)),onUpdateData:x[1]||(x[1]=F=>_("personal",F)),onNext:h},null,8,["data"])])):a.value===1?(m(),f("div",RH,[re(VO,{data:d.value.spiritual,onUpdate:x[2]||(x[2]=F=>_("spiritual",F)),onUpdateData:x[3]||(x[3]=F=>_("spiritual",F)),onNext:h},null,8,["data"])])):a.value===2?(m(),f("div",PH,[re(XO,{data:d.value.lineage,onUpdate:x[4]||(x[4]=F=>_("lineage",F)),onUpdateData:x[5]||(x[5]=F=>_("lineage",F)),onNext:h},null,8,["data"])])):a.value===3?(m(),f("div",jH,[re(gz,{data:d.value.preferences,onUpdate:x[6]||(x[6]=F=>_("preferences",F)),onUpdateData:x[7]||(x[7]=F=>_("preferences",F)),onNext:h},null,8,["data"])])):a.value===4?(m(),f("div",NH,[re(nH,{data:d.value.family,onUpdate:x[8]||(x[8]=F=>_("family",F)),onUpdateData:x[9]||(x[9]=F=>_("family",F)),onNext:h},null,8,["data"])])):a.value===5?(m(),f("div",LH,[re(uH,{data:d.value.notes,onUpdate:x[10]||(x[10]=F=>_("notes",F)),onUpdateData:x[11]||(x[11]=F=>_("notes",F)),onSubmit:T},null,8,["data"])])):Y("",!0)])),!r.value&&!i.value?(m(),f("div",BH,[e("button",{onClick:D,disabled:a.value===0,class:"flex items-center space-x-2 px-4 py-2 text-gray-600 hover:text-gray-900 disabled:opacity-50 disabled:cursor-not-allowed"},[...x[17]||(x[17]=[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"w-4 h-4",viewBox:"0 0 20 20",fill:"currentColor"},[e("path",{"fill-rule":"evenodd",d:"M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z","clip-rule":"evenodd"})],-1),e("span",null,"Previous",-1)])],8,VH),e("div",UH,[e("button",{onClick:C,class:"px-4 py-2 text-gray-500 hover:text-gray-700 font-medium"}," Skip This Step "),e("button",{onClick:h,disabled:l.value,class:"flex items-center space-x-2 bg-indigo-600 hover:bg-indigo-700 disabled:bg-indigo-400 text-white px-6 py-2 rounded-lg font-medium transition-colors"},[l.value?(m(),f("span",OH,"Saving...")):a.value===u.value-1?(m(),f("span",zH,"Complete Profile")):(m(),f("span",HH,"Next Step")),l.value?Y("",!0):(m(),f("svg",qH,[...x[18]||(x[18]=[e("path",{"fill-rule":"evenodd",d:"M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z","clip-rule":"evenodd"},null,-1)])]))],8,FH)])])):Y("",!0)])]),x[19]||(x[19]=$e('<div class="mt-6 bg-indigo-50 rounded-xl p-6"><div class="flex items-start space-x-3"><svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5 text-indigo-500 mt-0.5" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"></path></svg><div><h3 class="text-sm font-medium text-indigo-900 mb-1">Need Help?</h3><p class="text-sm text-indigo-700 mb-3"> All steps are optional and can be completed later from your dashboard. However, a complete profile helps temple administrators serve you better. </p><button class="text-sm text-indigo-600 hover:text-indigo-500 font-medium"> Contact Support  </button></div></div></div>',1))])]))}};function GH(){const t=V(!1),o=V(null),s=Je({events:[],sevas:[],donations:[],announcements:[]}),n=Je({totalEvents:0,upcomingEvents:0,totalSevas:0,upcomingSevas:0,totalDonations:0,recentDonations:0}),r=()=>({headers:{Authorization:`Bearer ${localStorage.getItem("auth_token")}`,"Content-Type":"application/json"}}),i=h=>{var D,C,B,_;return console.error("API Error:",h),(C=(D=h.response)==null?void 0:D.data)!=null&&C.message?new Error(h.response.data.message):(_=(B=h.response)==null?void 0:B.data)!=null&&_.error?new Error(h.response.data.error):h.message?new Error(h.message):new Error("An unexpected error occurred")},a=async h=>{if(!h){console.error("Entity ID is required");return}t.value=!0,o.value=null;try{const[D,C]=await Promise.all([l(h),c(h)]);return p(),{events:s.events,sevas:s.sevas}}catch(D){throw o.value=i(D),o.value}finally{t.value=!1}},l=async h=>{try{localStorage.setItem("current_entity_id",h);const D=await Te.get("v1/events",r());return s.events=D.data,n.totalEvents=s.events.length,n.upcomingEvents=s.events.filter(C=>new Date(C.event_date)>=new Date).length,s.events}catch(D){return console.error("Error fetching events:",D),[]}},d=async h=>{try{localStorage.setItem("current_entity_id",h),console.log(`Fetching upcoming events for entity ID: ${h}`);const D=localStorage.getItem("current_tenant_id")||h;console.log(`Using tenant ID: ${D}`);const C=r();C.headers["X-Entity-ID"]=h.toString();const B=await Te.get("/events/upcoming",C);return Array.isArray(B.data)?(s.upcomingEvents=B.data,s.upcomingEvents):(console.warn("Unexpected response format from events/upcoming:",B.data),[])}catch(D){return console.error("Error fetching upcoming events:",D),[]}},c=async h=>{try{const D=await Te.get(`/v1/sevas?entity_id=${h}`,r());return s.sevas=D.data,n.totalSevas=s.sevas.length,n.upcomingSevas=s.sevas.filter(C=>C.active===!0).length,s.sevas}catch(D){return console.error("Error fetching sevas:",D),[]}},u=async()=>{try{const h=await Te.get("/v1/sevas/my-bookings",r());return s.myBookings=h.data,s.myBookings}catch(h){return console.error("Error fetching seva bookings:",h),[]}},p=()=>{n.totalEvents=s.events.length,n.upcomingEvents=s.events.filter(h=>new Date(h.event_date)>=new Date).length,n.totalSevas=s.sevas.length,n.upcomingSevas=s.sevas.filter(h=>h.active===!0).length};return{loading:t,error:o,activities:s,stats:n,fetchAllActivities:a,fetchEvents:l,fetchUpcomingEvents:d,fetchSevas:c,fetchMySevaBookings:u,fetchEntityDetails:async h=>{try{return(await Te.get(`/entities/${h}`,r())).data}catch(D){throw console.error("Error fetching entity details:",D),i(D)}},fetchUserProfile:async()=>{try{const D=(await Te.get("/auth/me",r())).data.id,C=await Te.get(`/profiles/${D}`,r()),B=await Te.get("/memberships",r());return{profile:C.data,memberships:B.data}}catch(h){throw console.error("Error fetching user profile:",h),i(h)}}}}const WH={class:"relative flex items-center justify-between"},JH={class:"flex items-center space-x-4"},YH={class:"text-2xl md:text-3xl font-bold text-white mb-1"},KH={class:"text-base md:text-lg text-white/90"},XH={key:0,class:"flex flex-wrap items-center gap-4 mt-3"},ZH={key:0,class:"flex items-center text-white/80 text-sm"},QH={key:1,class:"flex items-center text-white/80 text-sm"},eq={key:2,class:"flex items-center text-white/80 text-sm"},tq={key:0,class:"hidden md:flex items-center space-x-3"},oq={key:0,class:"md:hidden mt-4 pt-4 border-t border-white/20"},sq={class:"flex flex-wrap gap-2"},mp={__name:"WelcomeBanner",props:{userRole:{type:String,required:!0,validator:t=>["tenant","entity_admin","devotee","volunteer","super_admin"].includes(t)},userName:{type:String,required:!0},entityName:String,lastLogin:[String,Date],profileCompletion:{type:Number,default:null},showActions:{type:Boolean,default:!0},variant:{type:String,default:"gradient",validator:t=>["gradient","solid","minimal"].includes(t)}},emits:["create-temple","complete-profile","quick-action"],setup(t,{emit:o}){const s=t,n=te(()=>{const h={tenant:{title:"Temple Administrator",icon:"BuildingOfficeIcon",gradient:"from-indigo-600 to-purple-600",solid:"bg-indigo-600"},entity_admin:{title:"Temple Manager",icon:"CogIcon",gradient:"from-blue-600 to-indigo-600",solid:"bg-blue-600"},devotee:{title:"Devotee",icon:"UserIcon",gradient:"from-green-600 to-blue-600",solid:"bg-green-600"},volunteer:{title:"Volunteer",icon:"HandRaisedIcon",gradient:"from-orange-600 to-red-600",solid:"bg-orange-600"},super_admin:{title:"System Administrator",icon:"ShieldCheckIcon",gradient:"from-red-600 to-pink-600",solid:"bg-red-600"}};return h[s.userRole]||h.devotee}),r=te(()=>{const h=new Date().getHours();let D="Hello";return h<12?D="Good Morning":h<17?D="Good Afternoon":D="Good Evening",`${D}, ${s.userName}!`}),i=te(()=>({tenant:"Manage your temples and oversee operations",entity_admin:s.entityName?`Welcome back to ${s.entityName}`:"Manage your temple operations",devotee:"Continue your spiritual journey",volunteer:"Thank you for your service",super_admin:"System overview and administration"})[s.userRole]||"Welcome to your dashboard"),a=te(()=>({tenant:"div",entity_admin:"div",devotee:"div",volunteer:"div",super_admin:"div"})[s.userRole]),l=te(()=>s.entityName||s.lastLogin||s.profileCompletion!==null),d=te(()=>{const h="relative p-6 md:p-8 rounded-xl overflow-hidden";return s.variant==="gradient"?`${h} bg-gradient-to-r ${n.value.gradient}`:s.variant==="solid"?`${h} ${n.value.solid}`:`${h} bg-white border-2 border-gray-200`}),c=te(()=>s.variant==="minimal"?"flex items-center justify-center w-16 h-16 bg-indigo-100 rounded-xl":"flex items-center justify-center w-16 h-16 bg-white/20 backdrop-blur-sm rounded-xl"),u=te(()=>s.variant==="minimal"?"w-8 h-8 text-indigo-600":"w-8 h-8 text-white"),p=te(()=>s.variant==="minimal"?"inline-flex items-center px-4 py-2 bg-indigo-600 text-white text-sm font-medium rounded-lg hover:bg-indigo-700 transition-colors duration-200":"inline-flex items-center px-4 py-2 bg-white/20 backdrop-blur-sm text-white text-sm font-medium rounded-lg hover:bg-white/30 transition-all duration-200"),v=te(()=>s.variant==="minimal"?"inline-flex items-center px-3 py-2 bg-indigo-600 text-white text-sm font-medium rounded-lg hover:bg-indigo-700 transition-colors duration-200":"inline-flex items-center px-3 py-2 bg-white/20 backdrop-blur-sm text-white text-sm font-medium rounded-lg hover:bg-white/30 transition-all duration-200"),g=h=>h?new Date(h).toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"";return(h,D)=>(m(),f("div",{class:ie(d.value)},[D[9]||(D[9]=$e('<div class="absolute inset-0 bg-gradient-to-r opacity-10"><svg class="absolute inset-0 w-full h-full" viewBox="0 0 100 100" preserveAspectRatio="none"><defs><pattern id="welcome-pattern" x="0" y="0" width="20" height="20" patternUnits="userSpaceOnUse"><circle cx="2" cy="2" r="1" fill="currentColor" opacity="0.5"></circle></pattern></defs><rect width="100%" height="100%" fill="url(#welcome-pattern)"></rect></svg></div>',1)),e("div",WH,[e("div",JH,[e("div",{class:ie(c.value)},[(m(),Re(xt(a.value),{class:ie(u.value)},null,8,["class"]))],2),e("div",null,[e("h1",YH,y(r.value),1),e("p",KH,y(i.value),1),l.value?(m(),f("div",XH,[t.entityName?(m(),f("div",ZH,[D[3]||(D[3]=e("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})],-1)),Q(" "+y(t.entityName),1)])):Y("",!0),t.lastLogin?(m(),f("div",QH,[D[4]||(D[4]=e("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),Q(" Last login: "+y(g(t.lastLogin)),1)])):Y("",!0),t.profileCompletion!==null?(m(),f("div",eq,[D[5]||(D[5]=e("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})],-1)),Q(" Profile "+y(t.profileCompletion)+"% complete ",1)])):Y("",!0)])):Y("",!0)])]),t.showActions?(m(),f("div",tq,[Dt(h.$slots,"actions",{},()=>[t.userRole==="tenant"?(m(),f("button",{key:0,onClick:D[0]||(D[0]=C=>h.$emit("create-temple")),class:ie(p.value)},[...D[6]||(D[6]=[e("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),Q(" Create Temple ",-1)])],2)):Y("",!0),t.userRole==="entity_admin"?(m(),f("button",{key:1,onClick:D[1]||(D[1]=C=>h.$emit("quick-action")),class:ie(p.value)},[...D[7]||(D[7]=[e("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 10V3L4 14h7v7l9-11h-7z"})],-1),Q(" Quick Actions ",-1)])],2)):Y("",!0)])])):Y("",!0)]),t.showActions?(m(),f("div",oq,[e("div",sq,[Dt(h.$slots,"mobile-actions",{},()=>[t.userRole==="tenant"?(m(),f("button",{key:0,onClick:D[2]||(D[2]=C=>h.$emit("create-temple")),class:ie(v.value)},[...D[8]||(D[8]=[e("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),Q(" Create Temple ",-1)])],2)):Y("",!0)])])])):Y("",!0)],2))}},nq={key:0,class:"flex items-center justify-between mb-6"},rq={class:"flex items-center"},aq={key:0,class:"text-lg font-semibold text-gray-900"},iq={key:1,class:"text-sm text-gray-500 mt-1"},lq={key:0,class:"flex items-center space-x-2"},dq={key:1,class:"flex items-center space-x-2"},uq=["disabled"],cq={key:2,class:"relative"},pq={key:0,class:"absolute right-0 mt-2 w-48 bg-white rounded-lg shadow-lg border border-gray-200 py-2 z-50"},mq={key:1,class:"flex items-center justify-center py-12"},gq={class:"flex items-center space-x-3"},fq={class:"text-gray-500"},vq={key:2,class:"flex items-center justify-center py-12"},hq={class:"text-center"},yq={class:"text-gray-500 mb-4"},xq={key:3,class:"flex items-center justify-center py-12"},bq={class:"text-center"},wq={class:"text-gray-500 mb-2"},kq={class:"text-sm text-gray-400"},_q={key:4},$q={key:5,class:"mt-6 pt-4 border-t border-gray-100"},bn={__name:"DashboardWidget",props:{title:String,subtitle:String,icon:[String,Object],iconBg:{type:String,default:"bg-indigo-100"},iconColor:{type:String,default:"text-indigo-600"},loading:{type:Boolean,default:!1},loadingText:{type:String,default:"Loading..."},error:String,empty:{type:Boolean,default:!1},emptyText:{type:String,default:"No data available"},emptySubtext:{type:String,default:"Data will appear here when available"},refreshable:{type:Boolean,default:!1},expandable:{type:Boolean,default:!1},hasMenu:{type:Boolean,default:!1},padding:{type:String,default:"normal",validator:t=>["none","sm","normal","lg"].includes(t)},height:{type:String,default:"auto",validator:t=>["auto","sm","md","lg","full"].includes(t)}},emits:["refresh","expand","retry"],setup(t,{emit:o}){const s=t,n=V(!1),r=te(()=>({none:"p-0",sm:"p-4",normal:"p-6",lg:"p-8"})[s.padding]),i=te(()=>({auto:"",sm:"h-64",md:"h-80",lg:"h-96",full:"h-full"})[s.height]),a=te(()=>s.refreshable||s.expandable||s.hasMenu),l={mounted(d,c){d.clickOutsideEvent=u=>{d===u.target||d.contains(u.target)||c.value()},document.addEventListener("click",d.clickOutsideEvent)},unmounted(d){document.removeEventListener("click",d.clickOutsideEvent)}};return(d,c)=>(m(),f("div",{class:ie(["bg-white rounded-xl shadow-md border border-gray-100 hover:shadow-lg transition-all duration-200",r.value,i.value])},[t.title||d.$slots.header?(m(),f("div",nq,[e("div",rq,[t.icon?(m(),f("div",{key:0,class:ie(["flex items-center justify-center w-10 h-10 rounded-lg mr-3",t.iconBg])},[t.icon==="profile"||t.icon==="user"?(m(),f("svg",{key:0,class:ie(["w-5 h-5",t.iconColor]),viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[...c[4]||(c[4]=[e("path",{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"},null,-1),e("circle",{cx:"12",cy:"7",r:"4"},null,-1)])],2)):t.icon==="bookings"||t.icon==="calendar"?(m(),f("svg",{key:1,class:ie(["w-5 h-5",t.iconColor]),viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[...c[5]||(c[5]=[$e('<rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect><line x1="16" y1="2" x2="16" y2="6"></line><line x1="8" y1="2" x2="8" y2="6"></line><line x1="3" y1="10" x2="21" y2="10"></line><path d="M8 14h.01"></path><path d="M12 14h.01"></path><path d="M16 14h.01"></path><path d="M8 18h.01"></path><path d="M12 18h.01"></path><path d="M16 18h.01"></path>',10)])],2)):t.icon==="donations"||t.icon==="heart"?(m(),f("svg",{key:2,class:ie(["w-5 h-5",t.iconColor]),viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[...c[6]||(c[6]=[e("path",{d:"M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"},null,-1)])],2)):t.icon==="events"||t.icon==="lightning"?(m(),f("svg",{key:3,class:ie(["w-5 h-5",t.iconColor]),viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[...c[7]||(c[7]=[e("path",{d:"M13 2L3 14h9l-1 8 10-12h-9l1-8z"},null,-1)])],2)):(m(),f("svg",{key:4,class:ie(["w-5 h-5",t.iconColor]),viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[...c[8]||(c[8]=[e("circle",{cx:"12",cy:"12",r:"10"},null,-1),e("path",{d:"M12 6v6l4 2"},null,-1)])],2))],2)):Y("",!0),e("div",null,[t.title?(m(),f("h3",aq,y(t.title),1)):Y("",!0),t.subtitle?(m(),f("p",iq,y(t.subtitle),1)):Y("",!0)])]),d.$slots.header?(m(),f("div",lq,[Dt(d.$slots,"header")])):a.value?(m(),f("div",dq,[t.refreshable?(m(),f("button",{key:0,onClick:c[0]||(c[0]=u=>d.$emit("refresh")),class:"p-2 text-gray-400 hover:text-indigo-600 hover:bg-indigo-50 rounded-lg transition-colors duration-200",disabled:t.loading},[(m(),f("svg",{class:ie(["w-4 h-4",t.loading?"animate-spin":""]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[...c[9]||(c[9]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"},null,-1)])],2))],8,uq)):Y("",!0),t.expandable?(m(),f("button",{key:1,onClick:c[1]||(c[1]=u=>d.$emit("expand")),class:"p-2 text-gray-400 hover:text-indigo-600 hover:bg-indigo-50 rounded-lg transition-colors duration-200"},[...c[10]||(c[10]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 8V4m0 0h4M4 4l5 5m11-1V4m0 0h-4m4 0l-5 5M4 16v4m0 0h4m-4 0l5-5m11 5l-5-5m5 5v-4m0 4h-4"})],-1)])])):Y("",!0),t.hasMenu?(m(),f("div",cq,[e("button",{onClick:c[2]||(c[2]=u=>n.value=!n.value),class:"p-2 text-gray-400 hover:text-indigo-600 hover:bg-indigo-50 rounded-lg transition-colors duration-200"},[...c[11]||(c[11]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 5v.01M12 12v.01M12 19v.01M12 6a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2z"})],-1)])]),n.value?de((m(),f("div",pq,[Dt(d.$slots,"menu")])),[[l,()=>n.value=!1]]):Y("",!0)])):Y("",!0)])):Y("",!0)])):Y("",!0),t.loading?(m(),f("div",mq,[e("div",gq,[c[12]||(c[12]=e("svg",{class:"animate-spin w-6 h-6 text-indigo-600",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1)),e("span",fq,y(t.loadingText),1)])])):t.error?(m(),f("div",vq,[e("div",hq,[c[13]||(c[13]=e("svg",{class:"w-12 h-12 text-red-400 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),e("p",yq,y(t.error),1),e("button",{onClick:c[3]||(c[3]=u=>d.$emit("retry")),class:"text-indigo-600 hover:text-indigo-800 font-medium transition-colors duration-200"}," Try Again ")])])):t.empty?(m(),f("div",xq,[e("div",bq,[c[14]||(c[14]=e("svg",{class:"w-12 h-12 text-gray-300 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})],-1)),e("p",wq,y(t.emptyText),1),e("p",kq,y(t.emptySubtext),1)])])):(m(),f("div",_q,[Dt(d.$slots,"default")])),d.$slots.footer?(m(),f("div",$q,[Dt(d.$slots,"footer")])):Y("",!0)],2))}},Sq={key:1,class:"mb-6"},Dq={class:"bg-amber-50 border border-amber-200 rounded-xl p-4"},Cq={class:"flex items-center"},Tq={class:"ml-3 flex-1"},Eq={class:"text-sm text-amber-700 mt-1"},Aq={class:"ml-4"},Iq={class:"w-16 h-2 bg-amber-200 rounded-full"},Mq={key:2,class:"flex items-center justify-center py-12"},Rq={key:3,class:"bg-white rounded-xl shadow-md p-8 text-center"},Pq={class:"mt-1 text-sm text-red-600"},jq={key:4},Nq={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8"},Lq={class:"grid grid-cols-1 lg:grid-cols-3 gap-8"},Bq={class:"lg:col-span-2 space-y-6"},Vq={class:"flex items-center justify-between mb-4"},Uq={key:0,class:"space-y-3"},Fq={class:"flex items-center space-x-4"},Oq={class:"text-sm font-medium text-gray-900"},zq={class:"text-xs text-gray-500"},Hq={key:1,class:"text-center py-8"},qq={class:"mt-6"},Gq={class:"flex items-center justify-between mb-4"},Wq={key:0,class:"text-center py-8"},Jq={key:1,class:"space-y-3"},Yq={class:"flex items-center space-x-4"},Kq={class:"text-sm font-medium text-gray-900"},Xq={class:"text-xs text-gray-500"},Zq={class:"text-right"},Qq={key:2,class:"space-y-3"},eG={class:"flex items-center space-x-4"},tG={class:"text-sm font-medium text-gray-900"},oG={class:"text-xs text-gray-500"},sG={class:"text-right"},nG={key:3,class:"text-center py-8"},rG={class:"mt-6"},aG={class:"flex items-center justify-between mb-4"},iG={class:"text-sm font-medium text-indigo-600"},lG={class:"space-y-4"},dG={class:"flex items-start"},uG={class:"ml-4"},cG={class:"text-sm text-gray-500 mt-1"},pG={class:"flex items-start"},mG={class:"ml-4"},gG={class:"text-sm text-gray-500 mt-1"},fG={class:"flex items-start"},vG={class:"ml-4"},hG={class:"text-sm text-gray-500 mt-1"},yG={class:"space-y-6"},xG={class:"flex items-center justify-between mb-4"},bG={key:0,class:"space-y-4"},wG={class:"flex items-start space-x-3"},kG={class:"flex-shrink-0"},_G={class:"w-12 h-12 bg-gradient-to-br from-indigo-500 to-purple-600 rounded-lg flex items-center justify-center"},$G={class:"text-white font-semibold"},SG={class:"flex-1 min-w-0"},DG={class:"text-sm font-medium text-gray-900 truncate"},CG={class:"text-xs text-gray-500 mt-1"},TG={class:"mt-2 flex items-center space-x-2"},EG={class:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-green-100 text-green-800"},AG={key:1,class:"text-center py-6"},IG={class:"space-y-3"},MG={class:"flex-1 min-w-0"},RG={class:"text-sm text-gray-900"},PG={class:"text-xs text-gray-500 mt-1"},jG={class:"space-y-3"},NG={class:"space-y-4"},LG={class:"flex items-center gap-2"},BG={class:"text-sm text-gray-900"},VG={class:"flex items-center gap-2"},UG={class:"text-sm text-gray-900"},FG={class:"text-sm text-gray-900"},OG={key:0},zG=["href"],HG={__name:"DevoteeDashboard",props:{id:{type:[String,Number],default:null}},setup(t){const o=Ze();Ke();const s=tt(),n=dn(),r=Uo(),i=Pa(),a=dr(),{stats:l,fetchMySevaBookings:d,fetchEntityDetails:c}=GH(),u=V(!0),p=V(null),v=V([]),g=V([]),h=V(null),D=Je({profile:!1,entity:!1,sevas:!1,events:!1,donations:!1}),C=Je({}),B=Je({sevaCount:0,upcomingSevaCount:0,eventCount:0,upcomingEventCount:0,countsInitialized:!1}),_=Je({recentSevas:[],recentDonations:[],upcomingEvents:[]}),T=te(()=>{var q,le,se,G;if(B.countsInitialized&&B.sevaCount>0)return B.sevaCount;const K=_.recentSevas.length||((q=i.recentSevas)==null?void 0:q.length)||((le=v.value)==null?void 0:le.length)||((G=(se=n.dashboardData)==null?void 0:se.summary)==null?void 0:G.totalSevaBookings)||0;return K>0&&!B.countsInitialized&&(B.sevaCount=K),K}),S=te(()=>{var se,G,U;if(B.countsInitialized&&B.upcomingSevaCount>0)return B.upcomingSevaCount;const le=((se=(_.recentSevas.length>0?_.recentSevas:i.recentSevas||[]).filter(Z=>{var ye,pe;return((ye=Z.status)==null?void 0:ye.toLowerCase())==="pending"||((pe=Z.Status)==null?void 0:pe.toLowerCase())==="pending"}))==null?void 0:se.length)||0||((U=(G=n.dashboardData)==null?void 0:G.summary)==null?void 0:U.upcomingSevas)||0;return le>0&&!B.countsInitialized&&(B.upcomingSevaCount=le),le}),k=te(()=>{var q,le,se;if(B.countsInitialized&&B.eventCount>0)return B.eventCount;const K=_.upcomingEvents.length>0?_.upcomingEvents.length:((q=g.value)==null?void 0:q.length)||l.totalEvents||((se=(le=n.dashboardData)==null?void 0:le.summary)==null?void 0:se.eventsAttended)||0;return K>0&&!B.countsInitialized&&(B.eventCount=K),K}),b=te(()=>{var q,le,se;if(B.countsInitialized&&B.upcomingEventCount>0)return B.upcomingEventCount;const K=_.upcomingEvents.length>0?_.upcomingEvents.length:((q=g.value)==null?void 0:q.length)||l.upcomingEvents||((se=(le=n.dashboardData)==null?void 0:le.summary)==null?void 0:se.upcomingEvents)||0;return K>0&&!B.countsInitialized&&(B.upcomingEventCount=K),K}),x=()=>{if(!B.countsInitialized&&(T.value>0||k.value>0)){console.log(" Locking dashboard counters:"),console.log(`- Seva count: ${T.value}`),console.log(`- Upcoming seva count: ${S.value}`),console.log(`- Event count: ${k.value}`),console.log(`- Upcoming event count: ${b.value}`),B.sevaCount=T.value,B.upcomingSevaCount=S.value,B.eventCount=k.value,B.upcomingEventCount=b.value,B.countsInitialized=!0;try{localStorage.setItem("dashboard_counts",JSON.stringify({sevaCount:B.sevaCount,upcomingSevaCount:B.upcomingSevaCount,eventCount:B.eventCount,upcomingEventCount:B.upcomingEventCount,timestamp:Date.now()}))}catch(K){console.warn("Could not save dashboard counts to localStorage",K)}}},F=te(()=>s.user),E=te(()=>{var K;return h.value?h.value:((K=r.temples)==null?void 0:K.find(q=>q.id===parseInt(o.params.id)))||r.currentTemple}),O=te(()=>n.completionPercentage||0),N=te(()=>n.profile||s.user||{}),L=te(()=>a.recentDonations&&a.recentDonations.length>0?a.recentDonations:_.recentDonations&&_.recentDonations.length>0?_.recentDonations:[]);te(()=>a.loadingRecent&&!D.donations),te(()=>{var K,q,le,se,G;return{totalSevaBookings:n.totalSevaBookings||0,upcomingSevas:((K=n.upcomingSevas)==null?void 0:K.length)||0,totalDonations:((q=a.donationStats)==null?void 0:q.total)||n.totalDonations||0,donationCount:((le=a.donations)==null?void 0:le.length)||((se=n.donations)==null?void 0:se.length)||0,eventsAttended:n.eventsAttended||0,upcomingEvents:((G=n.upcomingEvents)==null?void 0:G.length)||0}}),te(()=>{var K;return((K=n.upcomingSevas)==null?void 0:K.slice(0,3))||[]});const M=te(()=>{var K;return((K=n.notifications)==null?void 0:K.slice(0,5))||[]}),X=te(()=>{const K=_.recentSevas.length>0?_.recentSevas:i.recentSevas||[];return K.length>0&&K.forEach(q=>{const le=q.seva_id||q.SevaID||q.id||q.ID;le&&(q.seva_name||q.SevaName||q.name||q.Name)&&(C[le]=q.seva_name||q.SevaName||q.name||q.Name)}),K}),ee=te(()=>i.loadingRecentSevas&&!D.sevas),oe=()=>{try{const K=localStorage.getItem("dashboard_counts");if(K){const se=JSON.parse(K),G=Date.now()-3600*1e3;se.timestamp&&se.timestamp>G&&(console.log(" Restoring saved dashboard counts:",se),B.sevaCount=se.sevaCount||0,B.upcomingSevaCount=se.upcomingSevaCount||0,B.eventCount=se.eventCount||0,B.upcomingEventCount=se.upcomingEventCount||0,B.countsInitialized=!0)}const q=localStorage.getItem("dashboard_local_data");if(q){const se=JSON.parse(q),G=Date.now()-3600*1e3;se.timestamp&&se.timestamp>G&&(console.log(" Restoring saved local data"),se.recentSevas&&Array.isArray(se.recentSevas)&&(_.recentSevas=se.recentSevas),se.recentDonations&&Array.isArray(se.recentDonations)&&(_.recentDonations=se.recentDonations),se.upcomingEvents&&Array.isArray(se.upcomingEvents)&&(_.upcomingEvents=se.upcomingEvents,g.value=se.upcomingEvents))}const le=localStorage.getItem("dashboard_seva_names");if(le)try{const se=JSON.parse(le);Object.assign(C,se),console.log(" Restored seva name cache with",Object.keys(se).length,"entries")}catch(se){console.warn("Error parsing saved seva names:",se)}}catch(K){console.warn("Error restoring saved data:",K)}},ae=()=>(localStorage.setItem("events_tenant_id","2"),console.log(" Forcing event tenant ID to: 2"),"2"),H=()=>{try{localStorage.setItem("dashboard_seva_names",JSON.stringify(C))}catch(K){console.warn("Could not save seva name cache to localStorage",K)}},J=K=>(K==null?void 0:K.ID)||(K==null?void 0:K.id)||0,z=K=>(K==null?void 0:K.SevaID)||(K==null?void 0:K.seva_id)||0,I=K=>(K==null?void 0:K.Status)||(K==null?void 0:K.status)||"pending",P=K=>(K==null?void 0:K.BookingTime)||(K==null?void 0:K.booking_time)||null,W=K=>{if(!K)return"Unknown Seva";const q=z(K);if(q&&C[q])return C[q];if(K.SevaName||K.seva_name){const se=K.SevaName||K.seva_name;return q&&(C[q]=se,H()),se}if(K.seva&&K.seva.name){const se=K.seva.name;return q&&(C[q]=se,H()),se}if(q&&i.sevaCatalog&&Array.isArray(i.sevaCatalog)){const se=i.sevaCatalog.find(G=>G.id===q||G.ID===q);if(se&&(se.name||se.Name)){const G=se.name||se.Name;return C[q]=G,H(),G}}if(q&&i.sevaList&&Array.isArray(i.sevaList)){const se=i.sevaList.find(G=>G.id===q||G.ID===q);if(se&&(se.name||se.Name)){const G=se.name||se.Name;return C[q]=G,H(),G}}if(K.name||K.Name){const se=K.name||K.Name;return q&&(C[q]=se,H()),se}if(i.getSevaNameById&&typeof i.getSevaNameById=="function")try{const se=i.getSevaNameById(q);if(se&&q)return C[q]=se,H(),se}catch(se){console.warn(`Error getting seva name for ID ${q}:`,se)}const le=`Seva ${q||K.id||"Unknown"}`;return q&&(C[q]=le,H()),le},we=K=>{const q=P(K);if(!q)return"";try{return new Date(q).toLocaleDateString("en-IN",{day:"2-digit",month:"short",year:"numeric"})}catch(le){return console.error("Error formatting booking date:",le),""}},me=K=>({pending:"bg-yellow-100 text-yellow-800",approved:"bg-green-100 text-green-800",rejected:"bg-red-100 text-red-800",completed:"bg-blue-100 text-blue-800",cancelled:"bg-red-100 text-red-800"})[K.toLowerCase()]||"bg-gray-100 text-gray-800",De=()=>{var le;const K=N.value,q=((le=K.personal)==null?void 0:le.dateOfBirth)||K.dob||K.date_of_birth||K.birthday;if(!q)return"Not Set";try{const se=new Date(q);return isNaN(se.getTime())?"Invalid Date":se.toLocaleDateString("en-IN",{day:"numeric",month:"short"})}catch{return"Invalid Date"}},ge=()=>{var le;const K=N.value,q=((le=K.personal)==null?void 0:le.dateOfBirth)||K.dob||K.date_of_birth||K.birthday;if(!q)return"Add your birthday in profile";try{const se=new Date(q);if(isNaN(se.getTime()))return"Add your birthday in profile";const G=new Date,U=G.getFullYear(),Z=new Date(U,se.getMonth(),se.getDate());Z<G&&Z.setFullYear(U+1);const ye=Z-G,pe=Math.ceil(ye/(1e3*60*60*24));let be=U-se.getFullYear();if(Z>G?be=be:be=be+1,pe===0)return` Happy ${be}th Birthday!`;if(pe===1)return` Tomorrow! Turning ${be}`;if(pe<=7)return` In ${pe} days (${be}th)`;if(pe<=30)return`In ${pe} days  ${be} years`;if(pe<=100){const Se=Math.floor(pe/30),Ie=pe%30;return Ie===0?`In ${Se} month${Se===1?"":"s"}`:`In ${Se}m ${Ie}d  Turning ${be}`}else{const Se=Z.getFullYear();return`${se.toLocaleDateString("en-IN",{month:"short",day:"numeric"})}, ${Se}  Age ${be}`}}catch{return"Add your birthday in profile"}},ue=K=>{if(!K)return"N/A";try{return new Intl.DateTimeFormat("en-IN",{year:"numeric",month:"short",day:"numeric"}).format(new Date(K))}catch{return"Invalid Date"}},$=K=>{if(!K)return"N/A";try{return typeof K=="string"&&K.includes(":")?K:new Date(K).toLocaleTimeString("en-IN",{hour:"2-digit",minute:"2-digit"})}catch{return"Invalid Time"}},w=K=>{if(!K)return"?";try{return new Intl.DateTimeFormat("en-IN",{day:"numeric"}).format(new Date(K))}catch{return"?"}},R=async K=>{if(!K||!Array.isArray(K)||K.length===0)return K;const q=JSON.parse(JSON.stringify(K));if(console.log(" Enriching",q.length,"sevas with names"),i.sevaCatalog&&Array.isArray(i.sevaCatalog)){const le={};i.sevaCatalog.forEach(se=>{const G=se.id||se.ID;G&&(se.name||se.Name)&&(le[G]=se.name||se.Name)}),q.forEach(se=>{const G=se.seva_id||se.SevaID||se.id||se.ID;G&&le[G]&&(se.seva_name=le[G],se.SevaName=le[G],se.name||(se.name=le[G]),se.Name||(se.Name=le[G]),se.seva&&typeof se.seva=="object"&&(se.seva.name=le[G]),C[G]=le[G])})}if(q.forEach(le=>{const se=le.seva_id||le.SevaID||le.id||le.ID;se&&C[se]&&(le.seva_name=C[se],le.SevaName=C[se],le.name||(le.name=C[se]),le.Name||(le.Name=C[se]),le.seva&&typeof le.seva=="object"&&(le.seva.name=C[se]))}),i.getSevaDetails&&typeof i.getSevaDetails=="function"){const le=q.filter(se=>{const G=se.seva_id||se.SevaID||se.id||se.ID;return G&&!se.seva_name&&!se.SevaName&&!se.name&&!se.Name&&!C[G]});if(le.length>0){console.log(" Fetching names for",le.length,"sevas");for(const se of le){const G=se.seva_id||se.SevaID||se.id||se.ID;if(G)try{const U=await i.getSevaDetails(G);if(U&&(U.name||U.Name)){const Z=U.name||U.Name,ye=q.find(pe=>(pe.seva_id||pe.SevaID||pe.id||pe.ID)===G);ye&&(ye.seva_name=Z,ye.SevaName=Z,ye.name||(ye.name=Z),ye.Name||(ye.Name=Z),ye.seva&&typeof ye.seva=="object"&&(ye.seva.name=Z),C[G]=Z)}}catch(U){console.warn(` Error fetching details for seva ${G}:`,U)}}H()}}return H(),q},A=async()=>{try{const K=o.params.id,le={headers:{Authorization:`Bearer ${localStorage.getItem("auth_token")}`,"Content-Type":"application/json","X-Entity-ID":K}};console.log(` Fetching upcoming events for entity ID: ${K}`);const se=await Te.get("/events/upcoming",le);if(se.data&&Array.isArray(se.data)){const G=new Date;G.setHours(0,0,0,0);const U=se.data.filter(Z=>{const ye=new Date(Z.event_date||Z.date);return ye.setHours(0,0,0,0),ye>=G});console.log(`Dashboard: Found ${U.length} upcoming events after filtering for entity ID ${K}`),g.value=U.slice(0,4),_.upcomingEvents=JSON.parse(JSON.stringify(U.slice(0,4)));try{localStorage.setItem("dashboard_local_data",JSON.stringify({...JSON.parse(localStorage.getItem("dashboard_local_data")||"{}"),upcomingEvents:_.upcomingEvents,timestamp:Date.now()}))}catch(Z){console.warn("Could not save events to localStorage",Z)}return U}return[]}catch(K){return console.error("Error loading dashboard upcoming events:",K),[]}},j=async()=>{var q;const K=o.params.id;if(!K){p.value="Entity ID is missing",u.value=!1;return}oe(),B.countsInitialized?u.value=!1:u.value=!0,p.value=null;try{localStorage.setItem("current_entity_id",K);const le=[];console.log(" Loading seva catalog first...");try{i.fetchSevaCatalog&&(await i.fetchSevaCatalog(),console.log(" Seva catalog loaded with",((q=i.sevaCatalog)==null?void 0:q.length)||0,"items"),i.sevaCatalog&&Array.isArray(i.sevaCatalog)&&(i.sevaCatalog.forEach(pe=>{const be=pe.id||pe.ID,Se=pe.name||pe.Name;be&&Se&&(C[be]=Se)}),H()))}catch(pe){console.warn(" Error loading seva catalog:",pe)}try{i.fetchSevaList&&typeof i.fetchSevaList=="function"&&(await i.fetchSevaList(),i.sevaList&&Array.isArray(i.sevaList)&&(i.sevaList.forEach(pe=>{const be=pe.id||pe.ID,Se=pe.name||pe.Name;be&&Se&&(C[be]=Se,console.log(` Cached seva name: ID ${be} = "${Se}"`))}),H()))}catch(pe){console.warn(" Error loading seva list:",pe)}console.log(" Loading profile data...");const se=(async()=>{try{if(n.loadProfileData)await n.loadProfileData();else{const pe=await no.getProfile();pe&&pe.data&&(n.profile=pe.data)}D.profile=!0}catch(pe){console.warn(" Could not load profile:",pe),D.profile=!0}})();le.push(se),console.log(" Loading entity details...");const G=(async()=>{try{const pe=await c(K);pe&&(h.value=pe),D.entity=!0}catch(pe){console.warn(" Could not load entity details:",pe);try{r.fetchTemples&&await r.fetchTemples()}catch(be){console.warn(" Could not load temples as fallback:",be)}D.entity=!0}})();le.push(G),B.countsInitialized&&(u.value=!1),console.log(" Loading seva bookings...");const U=(async()=>{try{if(_.recentSevas.length===0)if(i.fetchRecentSevas&&(await i.fetchRecentSevas(),await new Promise(pe=>setTimeout(pe,100))),!i.recentSevas||i.recentSevas.length===0){const pe=await d();if(Array.isArray(pe)&&pe.length>0){const be=await R(pe);v.value=be.slice(0,3),_.recentSevas=JSON.parse(JSON.stringify(be.slice(0,3)));try{localStorage.setItem("dashboard_local_data",JSON.stringify({...JSON.parse(localStorage.getItem("dashboard_local_data")||"{}"),recentSevas:_.recentSevas,timestamp:Date.now()}))}catch(Se){console.warn("Could not save sevas to localStorage",Se)}}}else{const pe=await R(i.recentSevas);if(pe&&pe.length>0){Array.isArray(i.recentSevas)&&(i.recentSevas=pe),_.recentSevas=JSON.parse(JSON.stringify(pe));try{localStorage.setItem("dashboard_local_data",JSON.stringify({...JSON.parse(localStorage.getItem("dashboard_local_data")||"{}"),recentSevas:_.recentSevas,timestamp:Date.now()}))}catch(be){console.warn("Could not save sevas to localStorage",be)}}}else{const pe=await R(_.recentSevas);_.recentSevas=JSON.parse(JSON.stringify(pe))}D.sevas=!0}catch(pe){console.warn(" Error loading seva data:",pe),D.sevas=!0}})();le.push(U),console.log(" Loading event data...");const Z=(async()=>{try{ae();const pe=await A();Array.isArray(pe)&&pe.length>0&&(console.log(` Successfully loaded ${pe.length} upcoming events directly`),g.value=pe.slice(0,3),_.upcomingEvents=pe.slice(0,3)),D.events=!0}catch(pe){console.warn(" Error loading event data:",pe),D.events=!0}})();le.push(Z),console.log(" Loading donation data...");const ye=(async()=>{try{if(_.recentDonations.length===0&&a.fetchRecentDonations)try{if(await a.fetchRecentDonations(),await new Promise(pe=>setTimeout(pe,200)),(!a.recentDonations||a.recentDonations.length===0)&&(console.log(" No donations loaded on first attempt, retrying..."),await a.fetchRecentDonations(),await new Promise(pe=>setTimeout(pe,200))),a.recentDonations&&a.recentDonations.length>0){_.recentDonations=JSON.parse(JSON.stringify(a.recentDonations)),console.log(" Successfully loaded",_.recentDonations.length,"donations");try{localStorage.setItem("dashboard_local_data",JSON.stringify({...JSON.parse(localStorage.getItem("dashboard_local_data")||"{}"),recentDonations:_.recentDonations,timestamp:Date.now()}))}catch(pe){console.warn("Could not save donations to localStorage",pe)}}else console.warn(" No donations available after two attempts")}catch(pe){if(console.warn(" Error in fetchRecentDonations:",pe),a.getDonations&&typeof a.getDonations=="function")try{const be=await a.getDonations();be&&Array.isArray(be)&&be.length>0&&(_.recentDonations=JSON.parse(JSON.stringify(be)),console.log(" Loaded donations via alternative method"))}catch(be){console.warn(" Alternative donation loading also failed:",be)}}D.donations=!0}catch(pe){console.warn(" Error loading donation data:",pe),D.donations=!0}})();if(le.unshift(ye),n.fetchDashboardData){const pe=(async()=>{try{await n.fetchDashboardData(K)}catch(be){console.warn(" Error loading dashboard data:",be)}})();le.push(pe)}Promise.all(le).then(()=>{console.log(" All data loaded successfully"),u.value=!1,x()}).catch(pe=>{console.error(" Error loading dashboard data:",pe),u.value=!1,x()})}catch(le){console.error(" Error in dashboard data loading:",le),p.value=le.message||"Failed to load dashboard data",u.value=!1}},ne=()=>{const K={};!D.donations&&_.recentDonations.length===0&&(!a.recentDonations||a.recentDonations.length===0)&&(console.log(" Donations data missing, scheduling reload"),K.donations=!0),!D.events&&_.upcomingEvents.length===0&&g.value.length===0&&(console.log(" Events data missing, scheduling reload"),K.events=!0),(!D.sevas||_.recentSevas.length===0||v.value.length===0||v.value.length>0&&!W(v.value[0]).includes("Archana"))&&(console.log(" Seva names missing or incorrect, scheduling reload"),K.sevas=!0),Object.keys(K).length>0&&(console.log(" Reloading missing data:",K),K.donations&&setTimeout(async()=>{try{if(a.fetchRecentDonations){if(console.log(" Reloading donations from checkAndReloadMissingData..."),await a.fetchRecentDonations(),await new Promise(q=>setTimeout(q,200)),a.recentDonations&&a.recentDonations.length>0){_.recentDonations=JSON.parse(JSON.stringify(a.recentDonations)),console.log(" Donations reloaded successfully:",_.recentDonations.length);const q=[..._.recentDonations];_.recentDonations=[],setTimeout(()=>{_.recentDonations=q},10);try{localStorage.setItem("dashboard_local_data",JSON.stringify({...JSON.parse(localStorage.getItem("dashboard_local_data")||"{}"),recentDonations:_.recentDonations,timestamp:Date.now()}))}catch(le){console.warn("Could not save donations to localStorage",le)}}else if(console.warn(" No donations found after reload attempt"),a.getDonationsByApi&&typeof a.getDonationsByApi=="function")try{const q=await a.getDonationsByApi();q&&Array.isArray(q)&&q.length>0&&(_.recentDonations=JSON.parse(JSON.stringify(q)),console.log(" Retrieved donations via direct API"))}catch(q){console.warn(" Direct API donation retrieval failed:",q)}}}catch(q){console.warn(" Failed to reload donations:",q)}},500),K.events&&setTimeout(async()=>{try{ae(),await A(),console.log(" Events reloaded successfully")}catch(q){console.warn(" Failed to reload events:",q)}},700),K.sevas&&setTimeout(async()=>{try{if(i.fetchRecentSevas){if(await i.fetchRecentSevas(),await new Promise(q=>setTimeout(q,100)),i.recentSevas&&i.recentSevas.length>0){const q=await R(i.recentSevas);v.value=q.slice(0,3),_.recentSevas=JSON.parse(JSON.stringify(q)),console.log(" Sevas reloaded and enriched successfully");const le=[...v.value];v.value=[],setTimeout(()=>{v.value=le},10)}}else{const q=await d();if(Array.isArray(q)&&q.length>0){const le=await R(q);v.value=le.slice(0,3),_.recentSevas=JSON.parse(JSON.stringify(le)),console.log(" Sevas reloaded directly and enriched successfully")}}try{localStorage.setItem("dashboard_local_data",JSON.stringify({...JSON.parse(localStorage.getItem("dashboard_local_data")||"{}"),recentSevas:_.recentSevas,timestamp:Date.now()}))}catch(q){console.warn("Could not save sevas to localStorage",q)}}catch(q){console.warn(" Failed to reload sevas:",q)}},1e3))};return Ee(async()=>{if(console.log(" FORCING TENANT ID 2 FOR EVENT FETCHING"),localStorage.setItem("current_tenant_id","2"),await j(),_.recentDonations.length===0&&(!a.recentDonations||a.recentDonations.length===0)){console.log(" Donation data not loaded after initial load, forcing reload...");try{if(a.fetchRecentDonations)if(console.log(" Forcing donation reload..."),await a.fetchRecentDonations(),await new Promise(K=>setTimeout(K,300)),a.recentDonations&&a.recentDonations.length>0){_.recentDonations=JSON.parse(JSON.stringify(a.recentDonations)),console.log(" Successfully forced donation reload with",_.recentDonations.length,"items");const K=[..._.recentDonations];_.recentDonations=[],setTimeout(()=>{_.recentDonations=K},10);try{localStorage.setItem("dashboard_local_data",JSON.stringify({...JSON.parse(localStorage.getItem("dashboard_local_data")||"{}"),recentDonations:_.recentDonations,timestamp:Date.now()}))}catch(q){console.warn("Could not save donations to localStorage",q)}}else console.warn(" Still no donations after forced reload")}catch(K){console.warn(" Error in forced donation reload:",K)}}g.value.length===0&&(console.log(" Events not loaded after initial load, forcing reload..."),await A()),setTimeout(()=>{ne()},1500),setTimeout(async()=>{if(v.value.length>0){const K=v.value[0],q=W(K);if(q.includes("Seva ")&&!q.includes("Archana")){console.log(" Found generic seva names, applying enrichment...");const le=await R(v.value);v.value=le,_.recentSevas=JSON.parse(JSON.stringify(le));try{localStorage.setItem("dashboard_local_data",JSON.stringify({...JSON.parse(localStorage.getItem("dashboard_local_data")||"{}"),recentSevas:_.recentSevas,timestamp:Date.now()}))}catch(se){console.warn("Could not save enriched sevas to localStorage",se)}console.log(" Applied seva name enrichment on second pass")}}},2500),setTimeout(async()=>{if(_.recentDonations.length===0&&(!a.recentDonations||a.recentDonations.length===0)){console.log(" Donations still missing after delay, attempting final reload...");try{if(a.fetchRecentDonations&&(await a.fetchRecentDonations(),a.recentDonations&&a.recentDonations.length>0)){_.recentDonations=JSON.parse(JSON.stringify(a.recentDonations)),console.log(" Final donation reload successful");const K=[..._.recentDonations];_.recentDonations=[],setTimeout(()=>{_.recentDonations=K},10)}}catch(K){console.warn(" Final donation reload failed:",K)}}},3500),setTimeout(async()=>{g.value.length===0&&(console.log(" Events still missing after delays, trying one final time"),await A())},4e3),setTimeout(()=>{x()},5e3)}),Ue(()=>o.params.id,K=>{K&&(console.log(` Route changed to entity ${K}, reloading dashboard...`),j())}),Ue(()=>g.value,K=>{if(K&&Array.isArray(K)&&K.length>0){_.upcomingEvents=JSON.parse(JSON.stringify(K));try{localStorage.setItem("dashboard_local_data",JSON.stringify({...JSON.parse(localStorage.getItem("dashboard_local_data")||"{}"),upcomingEvents:_.upcomingEvents,timestamp:Date.now()}))}catch(q){console.warn("Could not save events to localStorage",q)}}},{deep:!0}),(K,q)=>{const le=He("router-link");return m(),f(he,null,[F.value&&E.value?(m(),Re(mp,{key:0,user:F.value,temple:E.value,role:"devotee",class:"mb-8"},null,8,["user","temple"])):Y("",!0),O.value<100?(m(),f("div",Sq,[e("div",Dq,[e("div",Cq,[q[2]||(q[2]=e("div",{class:"flex-shrink-0"},[e("svg",{class:"h-5 w-5 text-amber-400",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z","clip-rule":"evenodd"})])],-1)),e("div",Tq,[q[1]||(q[1]=e("h3",{class:"text-sm font-medium text-amber-800"},"Complete Your Profile",-1)),e("p",Eq,[Q(" Your profile is "+y(O.value)+"% complete. ",1),re(le,{to:`/entity/${_e(o).params.id}/devotee/profile/create`,class:"font-medium text-amber-800 hover:text-amber-900 underline"},{default:fe(()=>[...q[0]||(q[0]=[Q(" Complete now ",-1)])]),_:1},8,["to"])])]),e("div",Aq,[e("div",Iq,[e("div",{class:"h-2 bg-amber-500 rounded-full transition-all duration-300",style:Pt({width:`${O.value}%`})},null,4)])])])])])):Y("",!0),u.value?(m(),f("div",Mq,[...q[3]||(q[3]=[e("div",{class:"animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600"},null,-1),e("span",{class:"ml-3 text-gray-600"},"Loading dashboard...",-1)])])):p.value?(m(),f("div",Rq,[q[4]||(q[4]=e("svg",{class:"mx-auto h-12 w-12 text-red-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})],-1)),q[5]||(q[5]=e("h3",{class:"mt-2 text-lg font-medium text-gray-900"},"Unable to load dashboard",-1)),e("p",Pq,y(p.value),1),e("button",{onClick:j,class:"mt-4 inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500"}," Try Again ")])):(m(),f("div",jq,[e("div",Nq,[re(le,{to:{name:"DevoteeMySevaBookings",params:{id:K.$route.params.id}},class:"block"},{default:fe(()=>[re(bn,{title:"Seva Bookings",value:T.value,icon:"calendar",color:"indigo",subtitle:`${S.value} upcoming`},null,8,["value","subtitle"])]),_:1},8,["to"]),re(le,{to:{name:"DevoteeMyEvents",params:{id:K.$route.params.id}},class:"block"},{default:fe(()=>[re(bn,{title:"Total Events",value:k.value,icon:"calendar-days",color:"emerald",subtitle:`${b.value} upcoming`},null,8,["value","subtitle"])]),_:1},8,["to"]),re(bn,{title:"My Birthday",value:De(),icon:"cake",color:"purple",subtitle:ge()},null,8,["value","subtitle"]),re(le,{to:{name:"DevoteeTempleSelection"},class:"block transition-transform hover:scale-105 focus:outline-none focus:ring-2 focus:ring-rose-500 focus:ring-offset-2 rounded-lg"},{default:fe(()=>[re(bn,{title:"Temple Profile",value:E.value?"Active":"Select Temple",icon:"building-library",color:"rose",subtitle:E.value?E.value.name:"Join a temple",class:"cursor-pointer hover:shadow-lg transition-shadow duration-200"},null,8,["value","subtitle"])]),_:1})]),e("div",Lq,[e("div",Bq,[re(vt,{class:"p-6"},{default:fe(()=>[e("div",Vq,[q[7]||(q[7]=e("h3",{class:"text-lg font-semibold text-gray-900"},"Recent Donations",-1)),re(le,{to:`/entity/${_e(o).params.id}/devotee/donations`,class:"text-sm font-medium text-indigo-600 hover:text-indigo-700"},{default:fe(()=>[...q[6]||(q[6]=[Q(" View All ",-1)])]),_:1},8,["to"])]),L.value&&L.value.length>0?(m(),f("div",Uq,[(m(!0),f(he,null,ke(L.value,se=>(m(),f("div",{key:se.id,class:"flex items-center justify-between p-4 bg-gray-50 rounded-lg"},[e("div",Fq,[q[8]||(q[8]=e("div",{class:"flex-shrink-0"},[e("div",{class:"w-10 h-10 bg-rose-100 rounded-full flex items-center justify-center"},[e("svg",{class:"w-5 h-5 text-rose-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"})])])],-1)),e("div",null,[e("p",Oq,""+y(se.amount||0),1),e("p",zq,y(ue(se.created_at||se.date)),1)])]),q[9]||(q[9]=e("div",{class:"text-right"},null,-1))]))),128))])):(m(),f("div",Hq,[q[11]||(q[11]=e("svg",{class:"mx-auto h-12 w-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"})],-1)),q[12]||(q[12]=e("h3",{class:"mt-2 text-sm font-medium text-gray-900"},"No recent donations",-1)),q[13]||(q[13]=e("p",{class:"mt-1 text-sm text-gray-500"},"Make your first donation to support the temple.",-1)),e("div",qq,[re(le,{to:`/entity/${_e(o).params.id}/devotee/donations`,class:"inline-flex items-center px-4 py-2 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500"},{default:fe(()=>[...q[10]||(q[10]=[Q(" Donate Now ",-1)])]),_:1},8,["to"])])]))]),_:1}),re(vt,{class:"p-6"},{default:fe(()=>[e("div",Gq,[q[15]||(q[15]=e("h3",{class:"text-lg font-semibold text-gray-900"},"My Seva Bookings",-1)),re(le,{to:`/entity/${_e(o).params.id}/devotee/my-seva-bookings`,class:"text-sm font-medium text-indigo-600 hover:text-indigo-700"},{default:fe(()=>[...q[14]||(q[14]=[Q(" View All ",-1)])]),_:1},8,["to"])]),ee.value?(m(),f("div",Wq,[...q[16]||(q[16]=[e("div",{class:"animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600 mx-auto"},null,-1),e("span",{class:"mt-2 text-sm text-gray-500 block"},"Loading seva bookings...",-1)])])):X.value&&X.value.length>0?(m(),f("div",Jq,[(m(!0),f(he,null,ke(X.value.slice(0,3),se=>(m(),f("div",{key:J(se),class:"flex items-center justify-between p-4 bg-gray-50 rounded-lg"},[e("div",Yq,[q[17]||(q[17]=e("div",{class:"flex-shrink-0"},[e("div",{class:"w-10 h-10 bg-indigo-100 rounded-full flex items-center justify-center"},[e("svg",{class:"w-5 h-5 text-indigo-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})])])],-1)),e("div",null,[e("p",Kq,y(W(se)),1),e("p",Xq,y(we(se)),1)])]),e("div",Zq,[e("span",{class:ie([me(I(se)),"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium"])},y(I(se).charAt(0).toUpperCase()+I(se).slice(1)),3)])]))),128))])):v.value&&v.value.length>0?(m(),f("div",Qq,[(m(!0),f(he,null,ke(v.value.slice(0,3),se=>{var G;return m(),f("div",{key:se.id,class:"flex items-center justify-between p-4 bg-gray-50 rounded-lg"},[e("div",eG,[q[18]||(q[18]=e("div",{class:"flex-shrink-0"},[e("div",{class:"w-10 h-10 bg-indigo-100 rounded-full flex items-center justify-center"},[e("svg",{class:"w-5 h-5 text-indigo-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})])])],-1)),e("div",null,[e("p",tG,y(((G=se.seva)==null?void 0:G.name)||se.name),1),e("p",oG,y(ue(se.booking_date))+" at "+y($(se.booking_time)),1)])]),e("div",sG,[e("span",{class:ie([me(se.status||"pending"),"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium"])},y(se.status||"Pending"),3)])])}),128))])):(m(),f("div",nG,[q[20]||(q[20]=e("svg",{class:"mx-auto h-12 w-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})],-1)),q[21]||(q[21]=e("h3",{class:"mt-2 text-sm font-medium text-gray-900"},"No upcoming sevas",-1)),q[22]||(q[22]=e("p",{class:"mt-1 text-sm text-gray-500"},"Book your first seva to get started.",-1)),e("div",rG,[re(le,{to:`/entity/${_e(o).params.id}/devotee/seva-booking`,class:"inline-flex items-center px-4 py-2 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500"},{default:fe(()=>[...q[19]||(q[19]=[Q(" Book Seva ",-1)])]),_:1},8,["to"])])]))]),_:1}),E.value?(m(),Re(vt,{key:0,class:"p-6"},{default:fe(()=>[e("div",aG,[q[23]||(q[23]=e("h3",{class:"text-lg font-semibold text-gray-900"},"Temple Information",-1)),e("span",iG,y(E.value.status||"Active"),1)]),e("div",lG,[e("div",dG,[q[26]||(q[26]=e("div",{class:"flex-shrink-0 w-12 h-12 bg-indigo-100 rounded-lg flex items-center justify-center"},[e("svg",{class:"w-6 h-6 text-indigo-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})])],-1)),e("div",uG,[q[25]||(q[25]=e("h4",{class:"text-sm font-medium text-gray-900"},"Address",-1)),e("p",cG,[Q(y(E.value.address||"No address available"),1),q[24]||(q[24]=e("br",null,null,-1)),Q(" "+y([E.value.city,E.value.state,E.value.pincode].filter(Boolean).join(", ")),1)])])]),e("div",pG,[q[29]||(q[29]=e("div",{class:"flex-shrink-0 w-12 h-12 bg-indigo-100 rounded-lg flex items-center justify-center"},[e("svg",{class:"w-6 h-6 text-indigo-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"})])],-1)),e("div",mG,[q[28]||(q[28]=e("h4",{class:"text-sm font-medium text-gray-900"},"Contact Information",-1)),e("p",gG,[Q(y(E.value.phone||"No phone available"),1),q[27]||(q[27]=e("br",null,null,-1)),Q(" "+y(E.value.email||"No email available"),1)])])]),e("div",fG,[q[31]||(q[31]=e("div",{class:"flex-shrink-0 w-12 h-12 bg-indigo-100 rounded-lg flex items-center justify-center"},[e("svg",{class:"w-6 h-6 text-indigo-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1)),e("div",vG,[q[30]||(q[30]=e("h4",{class:"text-sm font-medium text-gray-900"},"Temple Hours",-1)),e("p",hG,y(E.value.operating_hours||"Hours not specified"),1)])])])]),_:1})):Y("",!0)]),e("div",yG,[re(vt,{class:"p-6"},{default:fe(()=>[e("div",xG,[q[33]||(q[33]=e("h3",{class:"text-lg font-semibold text-gray-900"},"Upcoming Events",-1)),re(le,{to:`/entity/${_e(o).params.id}/devotee/events`,class:"text-sm font-medium text-indigo-600 hover:text-indigo-700"},{default:fe(()=>[...q[32]||(q[32]=[Q(" View All ",-1)])]),_:1},8,["to"])]),g.value&&g.value.length>0?(m(),f("div",bG,[(m(!0),f(he,null,ke(g.value,se=>(m(),f("div",{key:se.id,class:"border border-gray-200 rounded-lg p-4 hover:border-indigo-300 transition-colors"},[e("div",wG,[e("div",kG,[e("div",_G,[e("span",$G,y(w(se.event_date||se.date)),1)])]),e("div",SG,[e("p",DG,y(se.title||se.name),1),e("p",CG,y(ue(se.event_date||se.date)),1),e("div",TG,[e("span",EG,y(se.status||"Upcoming"),1)])])])]))),128))])):(m(),f("div",AG,[...q[34]||(q[34]=[e("svg",{class:"mx-auto h-10 w-10 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})],-1),e("p",{class:"mt-2 text-sm text-gray-500"},"No upcoming events",-1)])]))]),_:1}),M.value&&M.value.length>0?(m(),Re(vt,{key:0,class:"p-6"},{default:fe(()=>[q[36]||(q[36]=e("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Notifications",-1)),e("div",IG,[(m(!0),f(he,null,ke(M.value,se=>(m(),f("div",{key:se.id,class:"flex items-start space-x-3 p-3 bg-gray-50 rounded-lg"},[q[35]||(q[35]=e("div",{class:"flex-shrink-0"},[e("div",{class:"w-2 h-2 bg-indigo-500 rounded-full mt-2"})],-1)),e("div",MG,[e("p",RG,y(se.message),1),e("p",PG,y(ue(se.date)),1)])]))),128))])]),_:1})):Y("",!0),re(vt,{class:"p-6"},{default:fe(()=>[q[40]||(q[40]=e("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"Quick Actions",-1)),e("div",jG,[re(le,{to:`/entity/${_e(o).params.id}/devotee/donations`,class:"inline-flex items-center justify-center w-full px-4 py-2 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500"},{default:fe(()=>[...q[37]||(q[37]=[e("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"})],-1),Q(" Donate Now ",-1)])]),_:1},8,["to"]),re(le,{to:`/entity/${_e(o).params.id}/devotee/seva-booking`,class:"inline-flex items-center justify-center w-full px-4 py-2 border border-indigo-300 shadow-sm text-sm font-medium rounded-md text-indigo-700 bg-indigo-50 hover:bg-indigo-100 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500"},{default:fe(()=>[...q[38]||(q[38]=[e("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})],-1),Q(" Book Seva ",-1)])]),_:1},8,["to"]),re(le,{to:`/entity/${_e(o).params.id}/devotee/profile/create`,class:"inline-flex items-center justify-center w-full px-4 py-2 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500"},{default:fe(()=>[...q[39]||(q[39]=[e("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})],-1),Q(" Edit Profile ",-1)])]),_:1},8,["to"])])]),_:1}),E.value?(m(),Re(vt,{key:1,class:"p-6"},{default:fe(()=>[q[45]||(q[45]=e("h3",{class:"text-lg font-semibold text-gray-900 mb-4"},"About Temple",-1)),e("div",NG,[e("div",LG,[q[41]||(q[41]=e("div",{class:"text-sm font-medium text-gray-500"},"Type:",-1)),e("div",BG,y(E.value.temple_type||"Not specified"),1)]),e("div",VG,[q[42]||(q[42]=e("div",{class:"text-sm font-medium text-gray-500"},"Established:",-1)),e("div",UG,y(E.value.established_year||"Unknown"),1)]),e("div",null,[q[43]||(q[43]=e("div",{class:"text-sm font-medium text-gray-500 mb-1"},"Description:",-1)),e("div",FG,y(E.value.description||"No description available"),1)]),E.value.website?(m(),f("div",OG,[e("a",{href:E.value.website,target:"_blank",class:"inline-flex items-center text-sm text-indigo-600 hover:text-indigo-800"},[...q[44]||(q[44]=[e("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"})],-1),Q(" Visit Website ",-1)])],8,zG)])):Y("",!0)])]),_:1})):Y("",!0)])])]))],64)}}},qG={class:"min-h-screen bg-gray-50"},GG={class:"bg-white shadow-sm border-b border-gray-200"},WG={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},JG={class:"py-6"},YG={class:"flex items-center justify-between"},KG={class:"flex items-center space-x-4"},XG={class:"text-right"},ZG={class:"font-semibold text-indigo-600"},QG={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},eW={class:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 mb-8"},tW={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},oW={key:0,class:"flex justify-center py-12"},sW={key:1,class:"text-center py-12"},nW={key:2,class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},rW={class:"h-48 bg-gradient-to-br from-indigo-500 to-purple-600 relative"},aW=["src","alt"],iW={class:"absolute top-4 right-4"},lW={class:"p-6"},dW={class:"flex justify-between items-start mb-3"},uW={class:"text-lg font-semibold text-gray-900"},cW={class:"text-right"},pW={class:"text-xl font-bold text-indigo-600"},mW={key:0,class:"text-sm text-gray-500 line-through"},gW={class:"text-gray-600 text-sm mb-4 line-clamp-2"},fW={class:"space-y-2 mb-4"},vW={class:"flex items-center text-sm text-gray-600"},hW={class:"flex items-center text-sm text-gray-600"},yW={key:0,class:"flex items-center text-sm text-gray-600"},xW={key:1,class:"flex items-center text-sm text-gray-600"},bW=["onClick","disabled"],wW={__name:"SevaBooking",setup(t){Ze(),Ke();const o=Pa(),s=je(),n=V(!0),r=V(""),i=V(""),a=V(""),l=V(""),d=V({}),c=Je({}),u=Je({}),p=V({name:"Temple Name",location:"Location"});te(()=>new Date().toISOString().split("T")[0]);const v=te(()=>{let _=o.sevas;if(r.value){const T=r.value.toLowerCase();_=_.filter(S=>{var k,b;return((k=S.name)==null?void 0:k.toLowerCase().includes(T))||((b=S.description)==null?void 0:b.toLowerCase().includes(T))})}return i.value&&(_=_.filter(T=>T.seva_type===i.value)),l.value&&(_=_.filter(T=>{const S=T.price;switch(l.value){case"0-500":return S<=500;case"500-1000":return S>500&&S<=1e3;case"1000-5000":return S>1e3&&S<=5e3;case"5000+":return S>5e3;default:return!0}})),_}),g=_=>_?new Date(_).toLocaleDateString("en-IN",{day:"numeric",month:"short",year:"numeric"}):"",h=()=>{r.value="",i.value="",a.value="",l.value=""},D=async _=>{var T;if(!(c[_.id]||u[_.id]||_.max_bookings_per_day-(d.value[_.id]||0)<=0)){u[_.id]=!0;try{console.log("Sending booking request:",{seva_id:_.id});const S=await nt.bookSeva(_.id);if(console.log("Booking response:",S),S.success){const k=_.id.toString();c[k]=!0,d.value[_.id]||(d.value[_.id]=0),d.value[_.id]=d.value[_.id]+1,s.success("Seva booked successfully!")}else s.error(S.error||"Failed to book seva")}catch(S){console.error("Booking failed:",S),console.error("Error details:",((T=S.response)==null?void 0:T.data)||"No response data"),s.error("Booking failed. Please try again.")}finally{u[_.id]=!1}}},C=async()=>{n.value=!0;try{const _={search:r.value,seva_type:i.value};await o.fetchSevas(_),o.sevas.length>0&&o.sevas.forEach(T=>{d.value[T.id]=Math.floor(Math.random()*T.max_bookings_per_day)}),B()}catch(_){console.error("Failed to load sevas:",_),_.toString&&_.toString().includes("Availability: unsupported relations")?s.error("Database schema issue. Please contact the administrator."):s.error("Failed to load sevas. Please try again.")}finally{n.value=!1}},B=async()=>{try{const _=await nt.getMyBookings();_.success&&_.data&&(console.log("User bookings response:",_.data),Object.keys(c).forEach(T=>{delete c[T]}),_.data.forEach(T=>{const S=T.seva_id||T.SevaID;S&&(console.log("Marking seva as booked:",S),c[S]=!0)}),console.log("Updated bookedSevas:",c))}catch(_){console.error("Failed to fetch user bookings:",_)}};return Ee(async()=>{try{await C(),await B(),console.log("Component mounted - Seva IDs:",o.sevas.map(_=>_.id),"Booked sevas:",c)}catch(_){console.error("Error during component initialization:",_)}}),Ee(async()=>{await C()}),(_,T)=>(m(),f("div",qG,[e("div",GG,[e("div",WG,[e("div",JG,[e("div",YG,[T[4]||(T[4]=e("div",null,[e("h1",{class:"text-3xl font-bold text-gray-900"},"Book Seva"),e("p",{class:"mt-2 text-sm text-gray-600"},"Choose from available sevas and book your preferred time slots")],-1)),e("div",KG,[e("div",XG,[T[3]||(T[3]=e("p",{class:"text-sm text-gray-500"},"Current Temple",-1)),e("p",ZG,y(p.value.name),1)])])])])])]),e("div",QG,[e("div",eW,[e("div",tW,[e("div",null,[T[5]||(T[5]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Search Sevas",-1)),de(e("input",{"onUpdate:modelValue":T[0]||(T[0]=S=>r.value=S),type:"text",placeholder:"Search by seva name...",class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-colors"},null,512),[[xe,r.value]])]),e("div",null,[T[7]||(T[7]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Seva Type",-1)),de(e("select",{"onUpdate:modelValue":T[1]||(T[1]=S=>i.value=S),class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-colors"},[...T[6]||(T[6]=[$e('<option value="" data-v-eccc674c>Select Seva Type</option><option value="daily" data-v-eccc674c>Daily Seva</option><option value="special" data-v-eccc674c>Special Seva</option><option value="festival" data-v-eccc674c>Festival Seva</option><option value="personal" data-v-eccc674c>Personal Seva</option>',5)])],512),[[Ce,i.value]])]),e("div",null,[T[9]||(T[9]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Price Range",-1)),de(e("select",{"onUpdate:modelValue":T[2]||(T[2]=S=>l.value=S),class:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-colors"},[...T[8]||(T[8]=[$e('<option value="" data-v-eccc674c>All Prices</option><option value="0-500" data-v-eccc674c>0 - 500</option><option value="500-1000" data-v-eccc674c>500 - 1,000</option><option value="1000-5000" data-v-eccc674c>1,000 - 5,000</option><option value="5000+" data-v-eccc674c>5,000+</option>',5)])],512),[[Ce,l.value]])])])]),n.value?(m(),f("div",oW,[...T[10]||(T[10]=[e("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600"},null,-1)])])):v.value.length===0?(m(),f("div",sW,[T[11]||(T[11]=$e('<div class="mx-auto w-24 h-24 bg-gray-100 rounded-full flex items-center justify-center mb-4" data-v-eccc674c><svg class="w-12 h-12 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-eccc674c><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10" data-v-eccc674c></path></svg></div><h3 class="text-lg font-medium text-gray-900 mb-2" data-v-eccc674c>No Sevas Available</h3><p class="text-gray-500 mb-4" data-v-eccc674c>No sevas match your current filters or none have been added by the temple yet.</p>',3)),e("button",{onClick:h,class:"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors"}," Clear Filters ")])):(m(),f("div",nW,[(m(!0),f(he,null,ke(v.value,S=>(m(),f("div",{key:S.id,class:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden hover:shadow-md transition-shadow"},[e("div",rW,[S.image?(m(),f("img",{key:0,src:S.image,alt:S.name,class:"w-full h-full object-cover"},null,8,aW)):Y("",!0),T[12]||(T[12]=e("div",{class:"absolute inset-0 bg-black bg-opacity-20"},null,-1)),e("div",iW,[e("span",{class:ie(["px-3 py-1 rounded-full text-xs font-medium",S.seva_type==="daily"?"bg-green-100 text-green-800":S.seva_type==="special"?"bg-blue-100 text-blue-800":S.seva_type==="festival"?"bg-purple-100 text-purple-800":"bg-yellow-100 text-yellow-800"])},y(S.seva_type),3)])]),e("div",lW,[e("div",dW,[e("h3",uW,y(S.name),1),e("div",cW,[e("p",pW,""+y(S.price.toLocaleString()),1),S.originalPrice&&S.originalPrice>S.price?(m(),f("p",mW," "+y(S.originalPrice.toLocaleString()),1)):Y("",!0)])]),e("p",gW,y(S.description),1),e("div",fW,[e("div",vW,[T[13]||(T[13]=e("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),Q(" Duration: "+y(S.duration)+" minutes ",1)]),e("div",hW,[T[14]||(T[14]=e("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})],-1)),Q(" Available: "+y(S.max_bookings_per_day-(d.value[S.id]||0))+" slots ",1)]),S.date?(m(),f("div",yW,[T[15]||(T[15]=e("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})],-1)),Q(" Date: "+y(g(S.date)),1)])):Y("",!0),S.start_time&&S.end_time?(m(),f("div",xW,[T[16]||(T[16]=e("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),Q(" Time: "+y(S.start_time)+" - "+y(S.end_time),1)])):Y("",!0)]),e("button",{onClick:k=>D(S),disabled:c[S.id]||u[S.id]||S.max_bookings_per_day-(d.value[S.id]||0)===0,class:ie(["w-full py-3 px-4 rounded-lg font-medium transition-colors",u[S.id]?"bg-gray-400 text-white cursor-wait":c[S.id]?"bg-green-600 text-white cursor-default":S.max_bookings_per_day-(d.value[S.id]||0)>0?"bg-indigo-600 text-white hover:bg-indigo-700":"bg-gray-300 text-gray-500 cursor-not-allowed"])},y(u[S.id]?"Booking...":c[S.id]?"Seva Booked":S.max_bookings_per_day-(d.value[S.id]||0)>0?"Book Now":"Fully Booked"),11,bW)])]))),128))]))])]))}},kW=Qe(wW,[["__scopeId","data-v-eccc674c"]]),_W={class:"min-h-screen bg-gray-50"},$W={class:"bg-white border-b border-gray-200"},SW={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},DW={class:"py-6"},CW={class:"flex items-center justify-between"},TW={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},EW={class:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8"},AW={class:"bg-white rounded-xl shadow-sm border border-gray-200 p-6"},IW={class:"flex items-center"},MW={class:"ml-4"},RW={class:"text-2xl font-bold text-gray-900"},PW={class:"bg-white rounded-xl shadow-sm border border-gray-200 p-6"},jW={class:"flex items-center"},NW={class:"ml-4"},LW={class:"text-2xl font-bold text-gray-900"},BW={class:"bg-white rounded-xl shadow-sm border border-gray-200 p-6"},VW={class:"flex items-center"},UW={class:"ml-4"},FW={class:"text-2xl font-bold text-gray-900"},OW={class:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 mb-8"},zW={class:"grid grid-cols-1 md:grid-cols-4 gap-4"},HW={class:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden"},qW={class:"overflow-x-auto"},GW={class:"min-w-full divide-y divide-gray-200"},WW={class:"bg-white divide-y divide-gray-200"},JW={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-900"},YW={class:"px-6 py-4 whitespace-nowrap"},KW={class:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900"},XW={class:"px-6 py-4 whitespace-nowrap"},ZW={key:0,class:"text-center py-12"},QW={key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50"},eJ={class:"bg-white rounded-xl max-w-md w-full p-6"},tJ={class:"flex items-center justify-between mb-4"},oJ={class:"flex gap-3 pt-4"},sJ=["disabled"],nJ={__name:"DonationHistory",setup(t){const o=()=>new Promise(k=>{const b=document.createElement("script");b.src="https://checkout.razorpay.com/v1/checkout.js",b.onload=()=>k(!0),b.onerror=()=>k(!1),document.body.appendChild(b)}),s=V(!1),n=V([]),r=V(!0),i=V(!1),a=V(null),l=V({dateRange:"all",donationType:"all",amountRange:"all"}),d=V({type:"",amount:"",purpose:""}),c=te(()=>n.value.reduce((k,b)=>k+b.amount,0)),u=te(()=>{const k=new Date().getMonth(),b=new Date().getFullYear();return n.value.filter(x=>{const F=new Date(x.date||x.donated_at||x.donation_date);return F.getMonth()===k&&F.getFullYear()===b}).reduce((x,F)=>x+F.amount,0)}),p=te(()=>{let k=[...n.value];if(l.value.dateRange!=="all"){const b=new Date;k=k.filter(x=>{const F=new Date(x.date||x.donated_at||x.donation_date);switch(l.value.dateRange){case"this-month":return F.getMonth()===b.getMonth()&&F.getFullYear()===b.getFullYear();case"last-month":const E=new Date(b.getFullYear(),b.getMonth()-1,1);return F.getMonth()===E.getMonth()&&F.getFullYear()===E.getFullYear();case"this-year":return F.getFullYear()===b.getFullYear();default:return!0}})}return l.value.donationType!=="all"&&(k=k.filter(b=>(b.type||b.donation_type)===l.value.donationType)),l.value.amountRange!=="all"&&(k=k.filter(b=>{const x=b.amount;switch(l.value.amountRange){case"0-500":return x>=0&&x<=500;case"501-1000":return x>=501&&x<=1e3;case"1001-5000":return x>=1001&&x<=5e3;case"5000+":return x>5e3;default:return!0}})),k.sort((b,x)=>{const F=new Date(b.date||b.donated_at||b.donation_date);return new Date(x.date||x.donated_at||x.donation_date)-F})}),v=k=>{var F,E,O,N,L,M,X;console.log("=== DONATION RESPONSE DEBUG ==="),console.log("Full response object:",k),console.log("Response type:",typeof k),console.log("Response keys:",Object.keys(k||{})),k.data&&(console.log("response.data:",k.data),console.log("response.data keys:",Object.keys(k.data||{})));const b=[k.order_id,k.OrderID,k.orderId,(F=k.data)==null?void 0:F.order_id,(E=k.data)==null?void 0:E.OrderID,(O=k.data)==null?void 0:O.orderId].filter(Boolean),x=[k.razorpay_key,k.RazorpayKey,k.razorpayKey,k.key,(N=k.data)==null?void 0:N.razorpay_key,(L=k.data)==null?void 0:L.RazorpayKey,(M=k.data)==null?void 0:M.razorpayKey,(X=k.data)==null?void 0:X.key].filter(Boolean);console.log("Found possible order_id values:",b),console.log("Found possible razorpay_key values:",x),console.log("JSON stringified response:",JSON.stringify(k,null,2)),console.log("=== END DEBUG ===")},g=k=>{const b=[k,k.data,k.result,k.payload,k.order,k.razorpay].filter(O=>O&&typeof O=="object");let x,F,E;for(const O of b)x=x||O.order_id||O.OrderID||O.orderId||O.order_id||O.razorpay_order_id||O.RazorpayOrderID||O.orderID||O.id,F=F||O.razorpay_key||O.RazorpayKey||O.razorpayKey||O.key||O.Key||O.api_key||O.ApiKey||O.razorpay_api_key||O.RazorpayApiKey,E=E||O.amount||O.Amount||O.total||O.Total||O.payment_amount||O.PaymentAmount;return E=E||Number(d.value.amount),{order_id:x,razorpay_key:F,amount:E}},h=async()=>{try{console.log("Getting user context for entity association...");const k=await ct.getCurrentUserContext();k.success&&k.data?(a.value=k.data,console.log("User context loaded:",{user_id:k.data.id,user_type:k.data.user_type,temple_id:k.data.temple_id,entity_id:k.data.entity_id,temple_name:k.data.temple_name||k.data.entity_name})):console.warn("Failed to get user context:",k)}catch(k){console.error("Error getting user context:",k)}},D=k=>k?new Date(k).toLocaleDateString("en-IN",{day:"2-digit",month:"short",year:"numeric"}):"N/A",C=k=>({general:"bg-blue-100 text-blue-800",seva:"bg-green-100 text-green-800",festival:"bg-amber-100 text-amber-800",construction:"bg-purple-100 text-purple-800",event:"bg-pink-100 text-pink-800"})[k]||"bg-gray-100 text-gray-800",B=k=>{const b=(k||"").toLowerCase();return{completed:"bg-green-100 text-green-800",success:"bg-green-100 text-green-800",pending:"bg-amber-100 text-amber-800",processing:"bg-amber-100 text-amber-800",failed:"bg-red-100 text-red-800",error:"bg-red-100 text-red-800"}[b]||"bg-gray-100 text-gray-800"},_=()=>{l.value={dateRange:"all",donationType:"all",amountRange:"all"}},T=async()=>{var k,b,x,F,E,O;if(!i.value)try{if(i.value=!0,!d.value.type||!d.value.amount){alert("Please fill in all required fields");return}if(a.value||await h(),!await o()){alert("Razorpay SDK failed to load. Please check your internet connection.");return}const L={amount:Number(d.value.amount),donationType:d.value.type,note:d.value.purpose};a.value?(a.value.entity_id?(L.entityId=a.value.entity_id,L.entity_id=a.value.entity_id):a.value.temple_id&&(L.templeId=a.value.temple_id,L.temple_id=a.value.temple_id,L.entityId=a.value.temple_id,L.entity_id=a.value.temple_id),console.log("Donation data with entity context:",L)):console.warn("No user context available - donation may not be associated with correct temple"),console.log("Creating donation with data:",L);const M=await ct.createDonation(L);v(M);const{order_id:X,razorpay_key:ee,amount:oe}=g(M);if(console.log("Extracted values:",{order_id:X,razorpay_key:ee,amount:oe}),!X||!ee){console.error("Missing required fields in response:",M);const J=[];X||J.push("order_id/OrderID/orderId"),ee||J.push("razorpay_key/RazorpayKey/key");const z=`Server response missing required fields: ${J.join(", ")}. 
      
Available response fields: ${Object.keys(M||{}).join(", ")}
${M.data?"Data fields: "+Object.keys(M.data).join(", "):""}

Please check backend implementation or contact support.`;throw alert(z),new Error(`Server response missing required fields: ${J.join(", ")}`)}const ae={key:ee,amount:oe*100,currency:"INR",name:"Temple Donation",description:"Thank you for your generosity!",order_id:X,handler:async function(J){try{console.log("Payment successful, verifying...",J),await ct.verifyDonation({razorpay_payment_id:J.razorpay_payment_id,razorpay_order_id:J.razorpay_order_id,razorpay_signature:J.razorpay_signature}),alert("Donation successful! Thank you for your generosity."),s.value=!1,d.value={type:"",amount:"",purpose:""},await S()}catch(z){console.error("Verification failed:",z),alert("Payment verification failed. Please contact support if amount was deducted.")}},prefill:{name:localStorage.getItem("user_name")||((k=a.value)==null?void 0:k.name)||"Donor",email:localStorage.getItem("user_email")||((b=a.value)==null?void 0:b.email)||"donor@example.com"},theme:{color:"#6366f1"},modal:{ondismiss:function(){console.log("Payment modal dismissed")}}};console.log("Opening Razorpay with options:",ae),new window.Razorpay(ae).open()}catch(N){console.error("Donation Flow Error:",N);const L=((F=(x=N.response)==null?void 0:x.data)==null?void 0:F.error)||((O=(E=N.response)==null?void 0:E.data)==null?void 0:O.message)||N.message||"Something went wrong while processing your donation";alert("Error: "+L)}finally{i.value=!1}},S=async()=>{var k,b,x;try{r.value=!0,console.log("Fetching donation history...");const F=await ct.getMyDonations();if(console.log("Donation history response:",F),n.value=Array.isArray(F)?F:[],n.value.length>0&&a.value){const E=a.value.temple_id||a.value.entity_id,O=[...new Set(n.value.map(N=>N.temple_id||N.entity_id).filter(Boolean))];console.log("Temple filtering validation:",{user_temple_id:E,donation_temple_ids:O,all_donations_count:n.value.length})}}catch(F){console.error("Error fetching donation history:",F),n.value=[],((k=F.response)==null?void 0:k.status)!==404&&alert("Failed to load donation history: "+(((x=(b=F.response)==null?void 0:b.data)==null?void 0:x.error)||F.message))}finally{r.value=!1}};return Ee(async()=>{await h(),await S()}),(k,b)=>(m(),f("div",_W,[e("div",$W,[e("div",SW,[e("div",DW,[e("div",CW,[b[10]||(b[10]=e("div",null,[e("h1",{class:"text-2xl font-bold text-gray-900"},"My Donations"),e("p",{class:"mt-1 text-sm text-gray-600"},"Track your donation history and receipts")],-1)),e("button",{onClick:b[0]||(b[0]=x=>s.value=!0),class:"bg-indigo-600 hover:bg-indigo-700 text-white px-4 py-2 rounded-lg font-medium transition-colors duration-200 flex items-center gap-2"},[...b[9]||(b[9]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})],-1),Q(" Donate Now ",-1)])])])])])]),e("div",TW,[e("div",EW,[e("div",AW,[e("div",IW,[b[12]||(b[12]=e("div",{class:"p-3 bg-indigo-100 rounded-lg"},[e("svg",{class:"w-6 h-6 text-indigo-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"})])],-1)),e("div",MW,[b[11]||(b[11]=e("p",{class:"text-sm font-medium text-gray-600"},"Total Donated",-1)),e("p",RW,""+y(c.value.toLocaleString()),1)])])]),e("div",PW,[e("div",jW,[b[14]||(b[14]=e("div",{class:"p-3 bg-green-100 rounded-lg"},[e("svg",{class:"w-6 h-6 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1)),e("div",NW,[b[13]||(b[13]=e("p",{class:"text-sm font-medium text-gray-600"},"Total Donations",-1)),e("p",LW,y(n.value.length),1)])])]),e("div",BW,[e("div",VW,[b[16]||(b[16]=e("div",{class:"p-3 bg-amber-100 rounded-lg"},[e("svg",{class:"w-6 h-6 text-amber-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7V3a4 4 0 118 0v4m-4 8a4 4 0 11-8 0v-4m4-8a4 4 0 118 0v4"})])],-1)),e("div",UW,[b[15]||(b[15]=e("p",{class:"text-sm font-medium text-gray-600"},"This Month",-1)),e("p",FW,""+y(u.value.toLocaleString()),1)])])])]),e("div",OW,[e("div",zW,[e("div",null,[b[18]||(b[18]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Date Range",-1)),de(e("select",{"onUpdate:modelValue":b[1]||(b[1]=x=>l.value.dateRange=x),class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"},[...b[17]||(b[17]=[e("option",{value:"all"},"All Time",-1),e("option",{value:"this-month"},"This Month",-1),e("option",{value:"last-month"},"Last Month",-1),e("option",{value:"this-year"},"This Year",-1)])],512),[[Ce,l.value.dateRange]])]),e("div",null,[b[20]||(b[20]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Donation Type",-1)),de(e("select",{"onUpdate:modelValue":b[2]||(b[2]=x=>l.value.donationType=x),class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"},[...b[19]||(b[19]=[$e('<option value="all">All Types</option><option value="general">General Donation</option><option value="seva">Seva Donation</option><option value="festival">Festival Donation</option><option value="construction">Construction Fund</option>',5)])],512),[[Ce,l.value.donationType]])]),e("div",null,[b[22]||(b[22]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Amount Range",-1)),de(e("select",{"onUpdate:modelValue":b[3]||(b[3]=x=>l.value.amountRange=x),class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"},[...b[21]||(b[21]=[$e('<option value="all">All Amounts</option><option value="0-500">0 - 500</option><option value="501-1000">501 - 1,000</option><option value="1001-5000">1,001 - 5,000</option><option value="5000+">5,000+</option>',5)])],512),[[Ce,l.value.amountRange]])]),e("div",{class:"flex items-end"},[e("button",{onClick:_,class:"w-full px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors duration-200"}," Reset Filters ")])])]),e("div",HW,[b[25]||(b[25]=e("div",{class:"px-6 py-4 border-b border-gray-200"},[e("div",{class:"flex items-center justify-between"},[e("h3",{class:"text-lg font-semibold text-gray-900"},"Donation History")])],-1)),e("div",qW,[e("table",GW,[b[23]||(b[23]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Date"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Type"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Amount"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Status")])],-1)),e("tbody",WW,[(m(!0),f(he,null,ke(p.value,x=>(m(),f("tr",{key:x.id,class:"hover:bg-gray-50"},[e("td",JW,y(D(x.created_at||x.donated_at||x.donation_date)),1),e("td",YW,[e("span",{class:ie([C(x.type||x.donation_type),"px-2 py-1 text-xs font-medium rounded-full"])},y(x.type||x.donation_type),3)]),e("td",KW," "+y(x.amount.toLocaleString()),1),e("td",XW,[e("span",{class:ie([B(x.status),"px-2 py-1 text-xs font-medium rounded-full"])},y(x.status),3)])]))),128))])])]),p.value.length===0?(m(),f("div",ZW,[...b[24]||(b[24]=[e("svg",{class:"mx-auto h-12 w-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"})],-1),e("h3",{class:"mt-2 text-sm font-medium text-gray-900"},"No donations found",-1),e("p",{class:"mt-1 text-sm text-gray-500"},"No donations match your current filters.",-1)])])):Y("",!0)])]),s.value?(m(),f("div",QW,[e("div",eJ,[e("div",tJ,[b[27]||(b[27]=e("h3",{class:"text-lg font-semibold text-gray-900"},"Make a Donation",-1)),e("button",{onClick:b[4]||(b[4]=x=>s.value=!1),class:"text-gray-400 hover:text-gray-600"},[...b[26]||(b[26]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),e("form",{onSubmit:Oe(T,["prevent"]),class:"space-y-4"},[e("div",null,[b[29]||(b[29]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Donation Type",-1)),de(e("select",{"onUpdate:modelValue":b[5]||(b[5]=x=>d.value.type=x),required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"},[...b[28]||(b[28]=[$e('<option value="">Select Type</option><option value="general">General Donation</option><option value="seva">Seva Donation</option><option value="festival">Festival Donation</option><option value="event">Event Donation</option>',5)])],512),[[Ce,d.value.type]])]),e("div",null,[b[30]||(b[30]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Amount ()",-1)),de(e("input",{type:"number","onUpdate:modelValue":b[6]||(b[6]=x=>d.value.amount=x),required:"",min:"1",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",placeholder:"Enter amount"},null,512),[[xe,d.value.amount]])]),e("div",null,[b[31]||(b[31]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Purpose",-1)),de(e("textarea",{"onUpdate:modelValue":b[7]||(b[7]=x=>d.value.purpose=x),rows:"3",class:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",placeholder:"Purpose of donation (optional)"},null,512),[[xe,d.value.purpose]])]),e("div",oJ,[e("button",{type:"button",onClick:b[8]||(b[8]=x=>s.value=!1),class:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors duration-200"}," Cancel "),e("button",{type:"submit",disabled:i.value,class:"flex-1 bg-indigo-600 hover:bg-indigo-700 disabled:opacity-50 text-white px-4 py-2 rounded-lg font-medium transition-colors duration-200"},y(i.value?"Processing...":"Proceed to Payment"),9,sJ)])],32)])])):Y("",!0)]))}},rJ={class:"space-y-6"},aJ={class:"flex flex-col sm:flex-row gap-4 items-start sm:items-center justify-between"},iJ={class:"flex flex-col sm:flex-row gap-4 items-start sm:items-center flex-1"},lJ={class:"relative flex-1 min-w-0"},dJ={class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},uJ={key:0,class:"flex justify-center py-12"},cJ={key:1,class:"space-y-4"},pJ={class:"flex flex-col"},mJ={class:"flex-1 min-w-0"},gJ={class:"flex flex-col sm:flex-row gap-4 justify-between"},fJ={class:"flex-1"},vJ={class:"text-xl font-bold text-gray-900 mb-2"},hJ={class:"text-gray-600 mb-3 line-clamp-2"},yJ={class:"flex flex-wrap gap-4 text-sm text-gray-500"},xJ={class:"flex items-center gap-1"},bJ={class:"flex items-center gap-1"},wJ={class:"flex items-center gap-1"},kJ={class:"flex flex-col gap-2 items-start sm:items-end"},_J={class:"flex items-center gap-2"},$J={key:2,class:"text-center py-12"},SJ={class:"text-gray-600 mb-6"},DJ={class:"p-6"},CJ={class:"flex justify-between items-start mb-6"},TJ={class:"text-2xl font-bold text-gray-900 mb-2"},EJ={class:"flex flex-wrap gap-4 text-sm text-gray-500"},AJ={class:"flex items-center gap-1"},IJ={class:"flex items-center gap-1"},MJ={class:"flex items-center gap-1"},RJ={class:"mb-6"},PJ={class:"text-gray-700 leading-relaxed"},jJ={key:0,class:"mb-6"},NJ={class:"grid grid-cols-1 sm:grid-cols-2 gap-3"},LJ={class:"font-medium text-gray-900"},BJ={class:"text-sm text-gray-600"},VJ={class:"flex flex-col sm:flex-row gap-4 justify-between items-start sm:items-center pt-6 border-t border-gray-200"},UJ={class:"flex gap-3"},FJ={__name:"MyEvents",setup(t){Ze();const{currentUser:o}=ln(),{showToast:s}=je(),n=V(!0),r=V(""),i=V("all");V("list");const a=V(!1),l=V(null),d=V("Sri Venkateswara Temple"),c=V([]),u=V(new Set),p=te(()=>{let E=c.value;if(r.value){const O=r.value.toLowerCase();E=E.filter(N=>N.title.toLowerCase().includes(O)||N.description.toLowerCase().includes(O))}switch(i.value){case"upcoming":E=E.filter(O=>O.status==="upcoming");break;case"attending":E=E.filter(O=>u.value.has(O.id));break;case"past":E=E.filter(O=>O.status==="past");break;case"all":default:E=E.filter(O=>O.status);break}return E});te(()=>{const E=c.value.filter(L=>u.value.has(L.id)&&L.status==="upcoming").length,O=c.value.filter(L=>u.value.has(L.id)&&L.status==="past").length,N=c.value.filter(L=>L.status==="upcoming").length;return{attending:E,attended:O,upcoming:N}});const v=async()=>{try{n.value=!0;const E=await ro.getUpcomingEvents();console.log(" Events Response:",E);const O=new Date;c.value=(Array.isArray(E)?E:[]).map(N=>{const L=new Date(N.event_date);let M="upcoming";return isNaN(L)||(M=L<O?"past":"upcoming"),{id:N.id,title:N.title,description:N.description,date:N.event_date,time:N.event_time||null,venue:N.location||"Temple Premises",status:M,attendees:N.rsvp_count||0,eventType:N.event_type,maxAttendees:200}}),console.log(" Mapped Events:",c.value),console.log(" User RSVPs:",u.value)}catch(E){console.error(" Error fetching events:",E),s("Failed to load events","error")}finally{n.value=!1}},g=async(E,O)=>{try{if(O)typeof ro.registerForEvent=="function"?(await ro.registerForEvent(E),u.value.add(E),s("RSVP confirmed successfully!","success")):s("RSVP functionality not available","error");else{s("RSVP cancellation is not supported yet","error");return}}catch(N){console.error("Error updating RSVP:",N),s("Failed to update RSVP","error")}},h=E=>{l.value=E,a.value=!0},D=()=>{a.value=!1,l.value=null},C=E=>u.value.has(E),B=E=>E.status==="upcoming"&&(!E.maxAttendees||E.attendees<E.maxAttendees),_=E=>E.status==="past"?"Completed":E.maxAttendees&&E.attendees>=E.maxAttendees?"Full":"Open",T=E=>{const O=_(E),N="px-2 py-1 rounded-lg text-xs font-medium";switch(O){case"Completed":return`${N} bg-gray-100 text-gray-800`;case"Full":return`${N} bg-red-100 text-red-800`;default:return`${N} bg-green-100 text-green-800`}},S=E=>{const O="px-3 py-1 rounded-lg text-sm font-medium";return C(E)?`${O} bg-green-100 text-green-800`:`${O} bg-gray-100 text-gray-800`},k=E=>{if(!E)return"No date available";const O=new Date(E);return isNaN(O.getTime())?E:O.toLocaleDateString("en-IN",{weekday:"long",year:"numeric",month:"long",day:"numeric"})},b=E=>{if(!E)return"Time not specified";if(E.includes("T")){const O=new Date(E);if(!isNaN(O.getTime()))return O.toLocaleTimeString("en-IN",{hour:"2-digit",minute:"2-digit",hour12:!0})}if(E.includes(":")){const O=E.split(":");if(O.length>=2){const N=parseInt(O[0],10),L=parseInt(O[1],10);if(!isNaN(N)&&!isNaN(L)){const M=new Date;return M.setHours(N,L,0),M.toLocaleTimeString("en-IN",{hour:"2-digit",minute:"2-digit",hour12:!0})}}}return E},x=()=>{switch(i.value){case"upcoming":return"No upcoming events found. Check back later for new events.";case"attending":return"You haven't RSVP'd to any events yet. Browse upcoming events to participate.";case"past":return"No past events to display.";default:return"No events match your search criteria."}},F=()=>{r.value="",i.value="all"};return Ee(()=>{v()}),(E,O)=>{var N,L;return m(),f(he,null,[e("div",rJ,[re(mp,{user:_e(o),userName:((N=_e(o))==null?void 0:N.fullName)||"",userRole:((L=_e(o))==null?void 0:L.role)||"devotee",title:"My Temple Events",subtitle:`Explore upcoming events and festivals at ${d.value}`},null,8,["user","userName","userRole","subtitle"]),re(vt,{class:"p-6"},{default:fe(()=>[e("div",aJ,[e("div",iJ,[e("div",lJ,[e("div",dJ,[re(_e(NN),{class:"h-5 w-5 text-gray-400"})]),de(e("input",{"onUpdate:modelValue":O[0]||(O[0]=M=>r.value=M),type:"text",placeholder:"Search events...",class:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-all duration-200"},null,512),[[xe,r.value]])]),de(e("select",{"onUpdate:modelValue":O[1]||(O[1]=M=>i.value=M),class:"px-4 py-2 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 bg-white transition-all duration-200"},[...O[3]||(O[3]=[e("option",{value:"all"},"All Events",-1),e("option",{value:"upcoming"},"Upcoming",-1),e("option",{value:"past"},"Past Events",-1)])],512),[[Ce,i.value]])])])]),_:1}),n.value?(m(),f("div",uJ,[re(Ma)])):p.value.length>0?(m(),f("div",cJ,[(m(!0),f(he,null,ke(p.value,M=>(m(),Re(vt,{key:M.id,class:"p-6 hover:shadow-lg transition-all duration-200 cursor-pointer",onClick:X=>h(M)},{default:fe(()=>[e("div",pJ,[e("div",mJ,[e("div",gJ,[e("div",fJ,[e("h3",vJ,y(M.title),1),e("p",hJ,y(M.description),1),e("div",yJ,[e("div",xJ,[re(_e(Ir),{class:"h-4 w-4"}),Q(" "+y(k(M.date)),1)]),e("div",bJ,[re(_e(Au),{class:"h-4 w-4"}),Q(" "+y(b(M.time)),1)]),e("div",wJ,[re(_e(Mu),{class:"h-4 w-4"}),Q(" "+y(M.venue||"Temple Premises"),1)])])]),e("div",kJ,[e("div",_J,[e("span",{class:ie(T(M))},y(_(M)),3)])])])])])]),_:2},1032,["onClick"]))),128))])):(m(),f("div",$J,[re(vt,{class:"p-8"},{default:fe(()=>[re(_e(Ir),{class:"h-16 w-16 text-gray-300 mx-auto mb-4"}),O[5]||(O[5]=e("h3",{class:"text-xl font-semibold text-gray-900 mb-2"},"No Events Found",-1)),e("p",SJ,y(x()),1),re(lt,{variant:"outline",onClick:F},{default:fe(()=>[...O[4]||(O[4]=[Q(" View All Events ",-1)])]),_:1})]),_:1})]))]),l.value?(m(),Re(Ia,{key:0,show:a.value,onClose:D,size:"lg"},{default:fe(()=>[e("div",DJ,[e("div",CJ,[e("div",null,[e("h2",TJ,y(l.value.title),1),e("div",EJ,[e("div",AJ,[re(_e(Ir),{class:"h-4 w-4"}),Q(" "+y(k(l.value.date)),1)]),e("div",IJ,[re(_e(Au),{class:"h-4 w-4"}),Q(" "+y(b(l.value.time)),1)]),e("div",MJ,[re(_e(Mu),{class:"h-4 w-4"}),Q(" "+y(l.value.venue||"Temple Premises"),1)])])]),e("button",{onClick:D,class:"text-gray-400 hover:text-gray-600 transition-colors duration-200"},[re(_e(BN),{class:"h-6 w-6"})])]),e("div",RJ,[O[6]||(O[6]=e("h3",{class:"text-lg font-semibold text-gray-900 mb-3"},"About This Event",-1)),e("p",PJ,y(l.value.description),1)]),l.value.sevas&&l.value.sevas.length>0?(m(),f("div",jJ,[O[8]||(O[8]=e("h3",{class:"text-lg font-semibold text-gray-900 mb-3"},"Available Sevas",-1)),e("div",NJ,[(m(!0),f(he,null,ke(l.value.sevas,M=>(m(),f("div",{key:M.id,class:"flex items-center justify-between p-3 bg-gray-50 rounded-lg"},[e("div",null,[e("div",LJ,y(M.name),1),e("div",BJ,""+y(M.amount),1)]),re(lt,{size:"sm",variant:"outline"},{default:fe(()=>[...O[7]||(O[7]=[Q(" Book Now ",-1)])]),_:1})]))),128))])])):Y("",!0),e("div",VJ,[e("div",null,[O[9]||(O[9]=e("div",{class:"text-sm text-gray-600 mb-1"},"RSVP Status",-1)),e("span",{class:ie(S(l.value.id))},y(C(l.value.id)?"Attending":"Not Attending"),3)]),e("div",UJ,[re(lt,{variant:"outline",onClick:D},{default:fe(()=>[...O[10]||(O[10]=[Q(" Close ",-1)])]),_:1}),B(l.value)?(m(),Re(lt,{key:0,variant:C(l.value.id)?"danger":"primary",onClick:O[2]||(O[2]=M=>g(l.value.id,!C(l.value.id)))},{default:fe(()=>[Q(y(C(l.value.id)?"Cancel RSVP":"RSVP Now"),1)]),_:1},8,["variant"])):Y("",!0)])])])]),_:1},8,["show"])):Y("",!0)],64)}}},OJ=Qe(FJ,[["__scopeId","data-v-cbc0551c"]]),zJ={class:"profile-edit-container"},HJ={class:"max-w-4xl mx-auto py-8 px-4"},qJ={class:"mb-8"},GJ={class:"flex items-center justify-between mb-2"},WJ={class:"text-sm text-gray-500"},JJ={class:"w-full bg-gray-200 rounded-full h-2"},YJ={class:"bg-white rounded-lg shadow-sm border"},KJ={class:"border-b border-gray-200 px-6 py-4"},XJ={class:"flex space-x-8"},ZJ=["onClick"],QJ={class:"p-6"},eY={key:0,class:"space-y-6"},tY={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},oY={key:1,class:"space-y-6"},sY={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},nY={key:2,class:"space-y-6"},rY={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},aY={key:3,class:"space-y-6"},iY={class:"grid grid-cols-2 md:grid-cols-3 gap-3"},lY=["value"],dY={class:"text-sm text-gray-700"},uY={class:"space-y-3"},cY={class:"flex items-center space-x-3"},pY={class:"flex items-center space-x-3"},mY={class:"flex items-center space-x-3"},gY={class:"border-t border-gray-200 px-6 py-4 flex justify-between"},fY={key:1},vY={class:"flex space-x-3"},hY=["disabled"],yY={key:0},xY={key:1},bY={__name:"ProfileEdit",setup(t){const o=Ze(),s=Ke(),{showToast:n}=je(),r=V(0),i=V(!1),a=V([{id:"personal",title:"Personal"},{id:"spiritual",title:"Spiritual"},{id:"family",title:"Family"},{id:"preferences",title:"Preferences"}]),l=V({fullName:"",dateOfBirth:"",phone:"",gender:"",address:"",gotra:"",nakshatra:"",rashi:"",preferredLanguage:"",fatherName:"",motherName:"",spouseName:"",numberOfChildren:0,preferredSevas:[],emailNotifications:!0,smsNotifications:!0,whatsappNotifications:!1}),d=V([{id:1,name:"Abhisheka"},{id:2,name:"Archana"},{id:3,name:"Annadana"},{id:4,name:"Pradakshina"},{id:5,name:"Bhajan"},{id:6,name:"Cleaning"}]),c=te(()=>{const v=[l.value.fullName,l.value.dateOfBirth,l.value.phone,l.value.gender,l.value.address,l.value.gotra,l.value.preferredLanguage],g=v.filter(h=>h&&h.toString().trim()!=="").length;return Math.round(g/v.length*100)}),u=async()=>{try{const v={fullName:"John Devotee",dateOfBirth:"1990-01-01",phone:"+91 9876543210",gender:"male",address:"123 Temple Street, Bengaluru",gotra:"Bharadvaja",nakshatra:"Rohini",rashi:"Vrishabha",preferredLanguage:"kannada",fatherName:"Father Name",motherName:"Mother Name",spouseName:"",numberOfChildren:0,preferredSevas:[1,2],emailNotifications:!0,smsNotifications:!0,whatsappNotifications:!1};Object.assign(l.value,v)}catch(v){console.error("Error loading profile:",v),n("Error loading profile data","error")}},p=async()=>{try{i.value=!0,await new Promise(v=>setTimeout(v,1e3)),n("Profile updated successfully!","success"),s.push(`/entity/${o.params.id}/devotee/dashboard`)}catch(v){console.error("Error saving profile:",v),n("Error saving profile","error")}finally{i.value=!1}};return Ee(()=>{u()}),(v,g)=>(m(),f("div",zJ,[e("div",HJ,[g[44]||(g[44]=e("div",{class:"mb-8"},[e("h1",{class:"text-3xl font-bold text-gray-900 mb-2"},"Edit Profile"),e("p",{class:"text-gray-600"},"Update your personal and spiritual information")],-1)),e("div",qJ,[e("div",GJ,[g[19]||(g[19]=e("span",{class:"text-sm font-medium text-indigo-600"},"Profile Completion",-1)),e("span",WJ,y(c.value)+"%",1)]),e("div",JJ,[e("div",{class:"bg-indigo-600 h-2 rounded-full transition-all duration-300",style:Pt({width:c.value+"%"})},null,4)])]),e("div",YJ,[e("div",KJ,[e("nav",XJ,[(m(!0),f(he,null,ke(a.value,(h,D)=>(m(),f("button",{key:h.id,onClick:C=>r.value=D,class:ie(["py-2 px-1 border-b-2 font-medium text-sm transition-colors",r.value===D?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"])},y(h.title),11,ZJ))),128))])]),e("div",QJ,[r.value===0?(m(),f("div",eY,[g[26]||(g[26]=e("h3",{class:"text-lg font-medium text-gray-900 mb-4"},"Personal Information",-1)),e("div",tY,[e("div",null,[g[20]||(g[20]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Full Name",-1)),de(e("input",{"onUpdate:modelValue":g[0]||(g[0]=h=>l.value.fullName=h),type:"text",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500",placeholder:"Enter your full name"},null,512),[[xe,l.value.fullName]])]),e("div",null,[g[21]||(g[21]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Date of Birth",-1)),de(e("input",{"onUpdate:modelValue":g[1]||(g[1]=h=>l.value.dateOfBirth=h),type:"date",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500"},null,512),[[xe,l.value.dateOfBirth]])]),e("div",null,[g[22]||(g[22]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Phone Number",-1)),de(e("input",{"onUpdate:modelValue":g[2]||(g[2]=h=>l.value.phone=h),type:"tel",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500",placeholder:"+91 9876543210"},null,512),[[xe,l.value.phone]])]),e("div",null,[g[24]||(g[24]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Gender",-1)),de(e("select",{"onUpdate:modelValue":g[3]||(g[3]=h=>l.value.gender=h),class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500"},[...g[23]||(g[23]=[e("option",{value:""},"Select Gender",-1),e("option",{value:"male"},"Male",-1),e("option",{value:"female"},"Female",-1),e("option",{value:"other"},"Other",-1)])],512),[[Ce,l.value.gender]])])]),e("div",null,[g[25]||(g[25]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Address",-1)),de(e("textarea",{"onUpdate:modelValue":g[4]||(g[4]=h=>l.value.address=h),rows:"3",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500",placeholder:"Enter your complete address"},null,512),[[xe,l.value.address]])])])):Y("",!0),r.value===1?(m(),f("div",oY,[g[32]||(g[32]=e("h3",{class:"text-lg font-medium text-gray-900 mb-4"},"Spiritual Information",-1)),e("div",sY,[e("div",null,[g[27]||(g[27]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Gotra",-1)),de(e("input",{"onUpdate:modelValue":g[5]||(g[5]=h=>l.value.gotra=h),type:"text",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500",placeholder:"Enter your gotra"},null,512),[[xe,l.value.gotra]])]),e("div",null,[g[28]||(g[28]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Nakshatra",-1)),de(e("input",{"onUpdate:modelValue":g[6]||(g[6]=h=>l.value.nakshatra=h),type:"text",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500",placeholder:"Enter your nakshatra"},null,512),[[xe,l.value.nakshatra]])]),e("div",null,[g[29]||(g[29]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Rashi",-1)),de(e("input",{"onUpdate:modelValue":g[7]||(g[7]=h=>l.value.rashi=h),type:"text",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500",placeholder:"Enter your rashi"},null,512),[[xe,l.value.rashi]])]),e("div",null,[g[31]||(g[31]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Preferred Language",-1)),de(e("select",{"onUpdate:modelValue":g[8]||(g[8]=h=>l.value.preferredLanguage=h),class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500"},[...g[30]||(g[30]=[$e('<option value="" data-v-b7043b85>Select Language</option><option value="kannada" data-v-b7043b85>Kannada</option><option value="hindi" data-v-b7043b85>Hindi</option><option value="sanskrit" data-v-b7043b85>Sanskrit</option><option value="tamil" data-v-b7043b85>Tamil</option><option value="telugu" data-v-b7043b85>Telugu</option><option value="english" data-v-b7043b85>English</option>',7)])],512),[[Ce,l.value.preferredLanguage]])])])])):Y("",!0),r.value===2?(m(),f("div",nY,[g[37]||(g[37]=e("h3",{class:"text-lg font-medium text-gray-900 mb-4"},"Family Information",-1)),e("div",rY,[e("div",null,[g[33]||(g[33]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Father's Name",-1)),de(e("input",{"onUpdate:modelValue":g[9]||(g[9]=h=>l.value.fatherName=h),type:"text",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500",placeholder:"Enter father's name"},null,512),[[xe,l.value.fatherName]])]),e("div",null,[g[34]||(g[34]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Mother's Name",-1)),de(e("input",{"onUpdate:modelValue":g[10]||(g[10]=h=>l.value.motherName=h),type:"text",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500",placeholder:"Enter mother's name"},null,512),[[xe,l.value.motherName]])]),e("div",null,[g[35]||(g[35]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Spouse Name",-1)),de(e("input",{"onUpdate:modelValue":g[11]||(g[11]=h=>l.value.spouseName=h),type:"text",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500",placeholder:"Enter spouse name (if applicable)"},null,512),[[xe,l.value.spouseName]])]),e("div",null,[g[36]||(g[36]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Number of Children",-1)),de(e("input",{"onUpdate:modelValue":g[12]||(g[12]=h=>l.value.numberOfChildren=h),type:"number",min:"0",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500",placeholder:"0"},null,512),[[xe,l.value.numberOfChildren]])])])])):Y("",!0),r.value===3?(m(),f("div",aY,[g[43]||(g[43]=e("h3",{class:"text-lg font-medium text-gray-900 mb-4"},"Seva Preferences",-1)),e("div",null,[g[38]||(g[38]=e("label",{class:"block text-sm font-medium text-gray-700 mb-3"},"Preferred Sevas",-1)),e("div",iY,[(m(!0),f(he,null,ke(d.value,h=>(m(),f("label",{key:h.id,class:"flex items-center space-x-2 p-3 border border-gray-200 rounded-lg hover:bg-gray-50 cursor-pointer"},[de(e("input",{type:"checkbox",value:h.id,"onUpdate:modelValue":g[13]||(g[13]=D=>l.value.preferredSevas=D),class:"h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded"},null,8,lY),[[ot,l.value.preferredSevas]]),e("span",dY,y(h.name),1)]))),128))])]),e("div",null,[g[42]||(g[42]=e("label",{class:"block text-sm font-medium text-gray-700 mb-3"},"Notification Preferences",-1)),e("div",uY,[e("label",cY,[de(e("input",{type:"checkbox","onUpdate:modelValue":g[14]||(g[14]=h=>l.value.emailNotifications=h),class:"h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded"},null,512),[[ot,l.value.emailNotifications]]),g[39]||(g[39]=e("span",{class:"text-sm text-gray-700"},"Email notifications for events and sevas",-1))]),e("label",pY,[de(e("input",{type:"checkbox","onUpdate:modelValue":g[15]||(g[15]=h=>l.value.smsNotifications=h),class:"h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded"},null,512),[[ot,l.value.smsNotifications]]),g[40]||(g[40]=e("span",{class:"text-sm text-gray-700"},"SMS notifications for important updates",-1))]),e("label",mY,[de(e("input",{type:"checkbox","onUpdate:modelValue":g[16]||(g[16]=h=>l.value.whatsappNotifications=h),class:"h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded"},null,512),[[ot,l.value.whatsappNotifications]]),g[41]||(g[41]=e("span",{class:"text-sm text-gray-700"},"WhatsApp notifications",-1))])])])])):Y("",!0)]),e("div",gY,[r.value>0?(m(),f("button",{key:0,onClick:g[17]||(g[17]=h=>r.value--),class:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-indigo-500"}," Previous ")):(m(),f("div",fY)),e("div",vY,[e("button",{onClick:p,disabled:i.value,class:"px-4 py-2 text-sm font-medium text-white bg-indigo-600 border border-transparent rounded-md hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 disabled:opacity-50"},[i.value?(m(),f("span",yY,"Saving...")):(m(),f("span",xY,"Save Changes"))],8,hY),r.value<a.value.length-1?(m(),f("button",{key:0,onClick:g[18]||(g[18]=h=>r.value++),class:"px-4 py-2 text-sm font-medium text-white bg-indigo-600 border border-transparent rounded-md hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500"}," Next ")):Y("",!0)])])])])]))}},Pu=Qe(bY,[["__scopeId","data-v-b7043b85"]]);class wY{constructor(){this.baseURL="/volunteers",this.entityBaseURL="/entities",this.membershipURL="/memberships"}async joinTemple(o){var s,n,r;try{console.log(`Attempting to join temple with ID: ${o}`);let i;try{i=await Co.post(this.membershipURL,{entity_id:o})}catch{console.log("First join attempt failed, trying alternative endpoint...");try{i=await Co.post("/userprofile/join-temple",{entity_id:o})}catch{i=await Co.post(`${this.entityBaseURL}/${o}/join`,{})}}return console.log("Join temple response:",i.data),{success:!0,data:i.data,message:"Temple joined successfully"}}catch(i){return console.error("Error joining temple:",i.response||i),{success:!1,message:((n=(s=i.response)==null?void 0:s.data)==null?void 0:n.error)||"Failed to join temple",error:((r=i.response)==null?void 0:r.data)||i.message}}}async getUserMemberships(){var o,s,n;try{console.log("Fetching user memberships...");let r;try{r=await Co.get(this.membershipURL)}catch{console.log("First membership attempt failed, trying alternative endpoint...");try{r=await Co.get("/userprofile/memberships")}catch{r=await Co.get("/user/joined-entities")}}console.log("User memberships response:",r.data);let i=r.data;return Array.isArray(r.data.memberships)?i=r.data.memberships:Array.isArray(r.data.data)?i=r.data.data:typeof r.data=="object"&&!Array.isArray(r.data)&&(i=Object.keys(r.data).map(a=>({entity_id:parseInt(a),...r.data[a]}))),{success:!0,data:i||[],message:"User memberships fetched successfully"}}catch(r){return console.error("Error fetching memberships:",r.response||r),{success:!1,message:((s=(o=r.response)==null?void 0:o.data)==null?void 0:s.error)||"Failed to fetch user memberships",error:((n=r.response)==null?void 0:n.data)||r.message}}}async getVolunteersByEntity(o,s={}){var n,r,i;try{const a=new URLSearchParams({page:s.page||1,limit:s.limit||10,search:s.search||"",status:s.status||"",joinedFrom:s.joinedFrom||"",joinedTo:s.joinedTo||"",sortBy:s.sortBy||"createdAt",sortOrder:s.sortOrder||"desc"}).toString(),l=await Co.get(`${this.entityBaseURL}/${o}/volunteers?${a}`);return{success:!0,data:l.data.volunteers||[],meta:l.data.meta||{},message:"Volunteers fetched successfully"}}catch(a){return{success:!1,message:((r=(n=a.response)==null?void 0:n.data)==null?void 0:r.message)||"Failed to fetch volunteers",error:((i=a.response)==null?void 0:i.data)||a.message}}}async getVolunteerDashboard(o){var s,n,r;try{return{success:!0,data:(await Co.get(`${this.baseURL}/${o}/dashboard`)).data.dashboard,message:"Volunteer dashboard data fetched successfully"}}catch(i){return{success:!1,message:((n=(s=i.response)==null?void 0:s.data)==null?void 0:n.message)||"Failed to fetch volunteer dashboard data",error:((r=i.response)==null?void 0:r.data)||i.message}}}}const ju=new wY,kY={class:"min-h-screen bg-gray-50 py-8"},_Y={class:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8"},$Y={class:"bg-white rounded-xl shadow-md p-6 mb-8"},SY={class:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6"},DY={class:"md:col-span-2"},CY={class:"relative"},TY={class:"flex items-center justify-between text-sm text-gray-600 border-t pt-4"},EY={style:{"font-family":"sans-serif"}},AY={key:0,class:"flex justify-center items-center py-12"},IY={key:1,class:"text-center py-12"},MY={key:2,class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},RY=["onClick"],PY={class:"relative h-48 bg-gradient-to-br from-indigo-100 to-indigo-200"},jY=["src","alt"],NY={key:1,class:"w-full h-full flex items-center justify-center"},LY={class:"p-6"},BY={class:"text-lg font-semibold text-gray-900 mb-2 group-hover:text-indigo-600 transition-colors duration-200",style:{"font-family":"sans-serif"}},VY={class:"space-y-2 mb-4"},UY={class:"flex items-center text-sm text-gray-600"},FY={key:0,class:"flex items-center text-sm text-gray-600"},OY={class:"flex items-center text-sm text-gray-600"},zY=["onClick","disabled"],HY={key:0},qY={key:1},GY={class:"text-center"},WY={class:"text-lg font-semibold text-gray-900 mb-2",style:{"font-family":"sans-serif"}},JY={class:"text-gray-600 text-sm mb-6"},YY={class:"flex space-x-3"},KY=["disabled"],XY={key:0,class:"flex items-center justify-center"},ZY={key:1},QY={__name:"TempleSelection",setup(t){const o=je(),s=tt(),n=V(""),r=V(""),i=V(!0),a=V(!1),l=V(null),d=V(!1),c=V([]),u=V([]),p=()=>{var x,F;return`joinedTemples_${((x=s.user)==null?void 0:x.id)||((F=s.user)==null?void 0:F.email)||"anonymous"}`},v=()=>{try{const b=p(),x=localStorage.getItem(b);x?u.value=JSON.parse(x):u.value=[],console.log("Loaded joined temples from localStorage:",u.value)}catch(b){console.error("Error loading joined temples from localStorage:",b),u.value=[]}},g=()=>{try{const b=p();localStorage.setItem(b,JSON.stringify(u.value)),console.log("Saved joined temples:",u.value)}catch(b){console.error("Error saving joined temples to localStorage:",b)}},h=async()=>{try{console.log("Fetching user memberships from API...");const b=await ju.getUserMemberships();if(b.success&&Array.isArray(b.data)){const x=b.data.map(F=>F.entity_id||F.EntityID||F.entityId||F.id).filter(F=>F!=null);u.value=x,g(),console.log("User memberships fetched from API:",x)}else console.warn("No memberships found or API error, falling back to localStorage"),v()}catch(b){console.error("Error fetching user memberships from API:",b),v()}},D=b=>{if(!b)return!1;const x=Number(b);return u.value.map(E=>Number(E)).includes(x)},C=te(()=>{let b=c.value;if(n.value){const x=n.value.toLowerCase();b=b.filter(F=>{var E,O,N;return((E=F.name)==null?void 0:E.toLowerCase().includes(x))||((O=F.city)==null?void 0:O.toLowerCase().includes(x))||((N=F.state)==null?void 0:N.toLowerCase().includes(x))})}return r.value&&(b=b.filter(x=>{var F;return((F=x.city)==null?void 0:F.toLowerCase())===r.value.toLowerCase()})),b}),B=()=>{n.value="",r.value=""},_=b=>{if(D(b.id)){o.info(`You are already a volunteer at ${b.name}`);return}l.value=b,a.value=!0},T=()=>{a.value=!1,l.value=null},S=async()=>{if(l.value){d.value=!0;try{console.log(`Joining temple with ID ${l.value.id}...`),u.value.includes(l.value.id)||(u.value.push(l.value.id),g());try{localStorage.setItem("selectedEntityId",l.value.id.toString()),localStorage.setItem("selectedTempleName",l.value.name)}catch(x){console.error("localStorage error:",x)}const b=await ju.joinTemple(l.value.id);b.success?(console.log("API join temple success:",b),o.success(`Successfully joined ${l.value.name} as a volunteer!`)):console.error("API join temple failed, but UI already updated:",b)}catch(b){console.error("Error joining temple:",b),o.success(`Joined ${l.value.name} as a volunteer! (local only)`)}finally{d.value=!1,T()}}},k=async()=>{i.value=!0;try{console.log("Fetching temples from API...");const b=await it.getTemples();Array.isArray(b)&&b.length>0?(c.value=b,console.log(`Successfully processed ${c.value.length} temples from API`)):(console.warn("No temples found or invalid response, using mock data"),c.value=it.getMockTemples()),c.value.length===0&&o.info("No approved temples found. Please check back later.")}catch(b){console.error("Error fetching temple data from API:",b),c.value=it.getMockTemples(),o.info("Using demo temple data.")}finally{i.value=!1}};return Ee(async()=>{s.isAuthenticated||await s.initialize(),await h(),await k()}),(b,x)=>{var F,E;return m(),f("div",kY,[e("div",_Y,[x[16]||(x[16]=$e('<div class="text-center mb-8"><h1 class="text-3xl font-bold text-gray-900 mb-4" style="font-family:&#39;Roboto&#39;, sans-serif;"> Welcome, Volunteer! </h1><p class="text-lg text-gray-600 max-w-2xl mx-auto" style="font-family:sans-serif;"> Select a temple to begin your volunteer journey. You&#39;ll be able to view assigned sevas, upcoming events, and receive notifications from the temple administration. </p></div><div class="bg-indigo-50 border border-indigo-200 rounded-xl p-6 mb-8"><div class="flex items-start space-x-4"><div class="flex-shrink-0"><div class="w-12 h-12 bg-indigo-600 rounded-full flex items-center justify-center"><svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197m13.5-9a2.25 2.25 0 11-4.5 0 2.25 2.25 0 014.5 0z"></path></svg></div></div><div class="flex-1"><h3 class="text-lg font-semibold text-indigo-800 mb-2" style="font-family:sans-serif;"> Ready to Serve? </h3><p class="text-indigo-700 text-sm leading-relaxed"> As a volunteer, you&#39;ll have access to view seva assignments, upcoming temple events, and receive important notifications. Choose your temple below to get started. </p></div></div></div>',2)),e("div",$Y,[e("div",SY,[e("div",DY,[x[4]||(x[4]=e("label",{for:"search",class:"block text-sm font-medium text-gray-700 mb-2",style:{"font-family":"sans-serif"}}," Search Temples ",-1)),e("div",CY,[x[3]||(x[3]=e("div",{class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},[e("svg",{class:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})])],-1)),de(e("input",{"onUpdate:modelValue":x[0]||(x[0]=O=>n.value=O),type:"text",id:"search",placeholder:"Search by temple name, city, or location...",class:"block w-full pl-10 pr-3 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-all duration-200"},null,512),[[xe,n.value]])])]),e("div",null,[x[6]||(x[6]=e("label",{for:"location",class:"block text-sm font-medium text-gray-700 mb-2",style:{"font-family":"sans-serif"}}," Filter by Location ",-1)),de(e("select",{"onUpdate:modelValue":x[1]||(x[1]=O=>r.value=O),id:"location",class:"block w-full px-3 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-all duration-200"},[...x[5]||(x[5]=[$e('<option value="">All Locations</option><option value="bengaluru">Bengaluru</option><option value="mumbai">Mumbai</option><option value="delhi">Delhi</option><option value="chennai">Chennai</option><option value="hyderabad">Hyderabad</option>',6)])],512),[[Ce,r.value]])])]),e("div",TY,[e("span",EY,y(C.value.length)+" temple"+y(C.value.length!==1?"s":"")+" found ",1),n.value||r.value?(m(),f("button",{key:0,onClick:B,class:"text-indigo-600 hover:text-indigo-800 font-medium transition-colors duration-200"}," Clear filters ")):Y("",!0)])]),i.value?(m(),f("div",AY,[...x[7]||(x[7]=[e("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600"},null,-1)])])):C.value.length===0?(m(),f("div",IY,[x[8]||(x[8]=$e('<div class="w-24 h-24 mx-auto mb-4 text-gray-300"><svg fill="currentColor" viewBox="0 0 24 24"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"></path></svg></div><h3 class="text-lg font-medium text-gray-900 mb-2" style="font-family:sans-serif;"> No temples found </h3><p class="text-gray-600 mb-4"> No approved temples match your search criteria. Please try different filters or check back later. </p>',3)),e("button",{onClick:B,class:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-lg text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 transition-all duration-200"}," View All Temples ")])):(m(),f("div",MY,[(m(!0),f(he,null,ke(C.value,O=>(m(),f("div",{key:O.id,class:"bg-white rounded-xl shadow-md hover:shadow-lg transition-all duration-200 overflow-hidden group cursor-pointer",onClick:N=>_(O)},[e("div",PY,[O.image?(m(),f("img",{key:0,src:O.image,alt:O.name,class:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-200"},null,8,jY)):(m(),f("div",NY,[...x[9]||(x[9]=[e("svg",{class:"w-16 h-16 text-indigo-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})],-1)])])),x[10]||(x[10]=e("div",{class:"absolute top-3 right-3"},[e("span",{class:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800"},[e("svg",{class:"w-3 h-3 mr-1",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z","clip-rule":"evenodd"})]),Q(" Active ")])],-1))]),e("div",LY,[e("h3",BY,y(O.name),1),e("div",VY,[e("div",UY,[x[11]||(x[11]=e("svg",{class:"w-4 h-4 mr-2 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})],-1)),Q(" "+y(O.city)+", "+y(O.state),1)]),O.phone?(m(),f("div",FY,[x[12]||(x[12]=e("svg",{class:"w-4 h-4 mr-2 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"})],-1)),Q(" "+y(O.phone),1)])):Y("",!0),e("div",OY,[x[13]||(x[13]=e("svg",{class:"w-4 h-4 mr-2 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197m13.5-9a2.25 2.25 0 11-4.5 0 2.25 2.25 0 014.5 0z"})],-1)),Q(" "+y(O.volunteersCount||0)+" volunteers ",1)])]),e("button",{onClick:Oe(N=>_(O),["stop"]),disabled:D(O.id),class:ie(["w-full inline-flex items-center justify-center px-4 py-2 border border-transparent text-sm font-medium rounded-lg text-white transition-all duration-200",D(O.id)?"bg-green-600 cursor-not-allowed opacity-80":"bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 group-hover:bg-indigo-700"])},[D(O.id)?(m(),f("span",HY,[...x[14]||(x[14]=[e("svg",{class:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})],-1),Q(" Joined Successfully ",-1)])])):(m(),f("span",qY,[...x[15]||(x[15]=[Q(" Join as Volunteer ",-1),e("svg",{class:"w-4 h-4 ml-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 7l5 5m0 0l-5 5m5-5H6"})],-1)])]))],10,zY)])],8,RY))),128))]))]),a.value?(m(),f("div",{key:0,class:"fixed inset-0 bg-gray-500 bg-opacity-75 flex items-center justify-center p-4 z-50",onClick:T},[e("div",{class:"bg-white rounded-xl shadow-xl max-w-md w-full p-6",onClick:x[2]||(x[2]=Oe(()=>{},["stop"]))},[e("div",GY,[x[18]||(x[18]=e("div",{class:"w-16 h-16 mx-auto mb-4 bg-indigo-100 rounded-full flex items-center justify-center"},[e("svg",{class:"w-8 h-8 text-indigo-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})])],-1)),e("h3",WY," Join "+y((F=l.value)==null?void 0:F.name)+"? ",1),e("p",JY," You're about to join "+y((E=l.value)==null?void 0:E.name)+" as a volunteer. You'll receive access to view seva assignments and temple notifications. ",1),e("div",YY,[e("button",{onClick:T,class:"flex-1 px-4 py-2 border border-gray-300 text-sm font-medium rounded-lg text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 transition-all duration-200"}," Cancel "),e("button",{onClick:S,disabled:d.value,class:"flex-1 px-4 py-2 border border-transparent text-sm font-medium rounded-lg text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed"},[d.value?(m(),f("span",XY,[...x[17]||(x[17]=[e("svg",{class:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1),Q(" Joining... ",-1)])])):(m(),f("span",ZY,"Join Temple"))],8,KY)])])])])):Y("",!0)])}}},eK={class:"min-h-screen bg-gray-50"},tK={class:"bg-gradient-to-r from-indigo-600 to-indigo-800 text-white"},oK={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},sK={class:"flex items-center justify-between"},nK={class:"text-3xl font-bold font-roboto"},rK={class:"mt-2 text-indigo-100 text-lg"},aK={class:"hidden md:flex items-center space-x-4"},iK={class:"bg-white/10 backdrop-blur-sm rounded-xl p-4 text-center"},lK={class:"text-2xl font-bold"},dK={class:"bg-white/10 backdrop-blur-sm rounded-xl p-4 text-center"},uK={class:"text-2xl font-bold"},cK={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},pK={class:"grid grid-cols-2 gap-4 md:hidden mb-6"},mK={class:"bg-white rounded-xl shadow-md p-4 text-center border-l-4 border-indigo-500"},gK={class:"text-2xl font-bold text-gray-900"},fK={class:"bg-white rounded-xl shadow-md p-4 text-center border-l-4 border-indigo-500"},vK={class:"text-2xl font-bold text-gray-900"},hK={class:"mb-8"},yK={class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4"},xK={key:0,class:"absolute -top-2 -right-2 bg-red-500 text-white text-xs rounded-full w-6 h-6 flex items-center justify-center"},bK={class:"grid grid-cols-1 lg:grid-cols-3 gap-8"},wK={class:"lg:col-span-2"},kK={class:"bg-white rounded-xl shadow-md border border-gray-200"},_K={class:"p-6"},$K={key:0,class:"text-center py-8"},SK={key:1,class:"space-y-4"},DK={class:"flex items-start justify-between"},CK={class:"flex-1"},TK={class:"font-semibold text-gray-900"},EK={class:"text-sm text-gray-600 mt-1"},AK={class:"flex items-center mt-3 space-x-4 text-sm"},IK={class:"flex items-center text-gray-500"},MK={class:"flex items-center text-gray-500"},RK={class:"ml-4"},PK={class:"space-y-6"},jK={class:"bg-white rounded-xl shadow-md border border-gray-200"},NK={class:"p-6"},LK={key:0,class:"text-center py-6"},BK={key:1,class:"space-y-3"},VK={class:"font-semibold text-gray-900 text-sm"},UK={class:"flex items-center mt-2 text-xs text-gray-600"},FK={class:"p-6 overflow-y-auto max-h-[60vh]"},OK={key:0,class:"text-center py-8"},zK={key:1,class:"space-y-4"},HK={class:"flex items-start justify-between"},qK={class:"flex-1"},GK={class:"text-gray-900"},WK={class:"text-sm text-gray-500 mt-2"},JK={class:"ml-4"},YK={key:0,class:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800"},KK={class:"p-6 overflow-y-auto max-h-[60vh]"},XK={class:"space-y-6"},ZK={class:"bg-gray-50 rounded-lg p-4 space-y-3"},QK={class:"text-gray-900"},eX={class:"text-gray-900"},tX={class:"grid grid-cols-1 sm:grid-cols-2 gap-4"},oX={class:"text-gray-900"},sX={class:"text-gray-900"},nX={__name:"VolunteerDashboard",setup(t){const o=Ke(),s=V(!1),n=V(!1),r=V({fullName:"Ravi Kumar",email:"ravi.volunteer@temple.com",phone:"+91 98765 43210"}),i=V({name:"Sri Venkateswara Temple",address:"Temple Street, Bangalore, Karnataka 560001",phone:"+91 80 2345 6789",email:"info@srivenkateswara.temple"}),a=V([{id:1,name:"Abhishekam",description:"Assist with morning abhishekam ritual",scheduledDate:"2025-06-25",timeSlot:"6:00 AM - 8:00 AM",status:"Scheduled"},{id:2,name:"Decoration",description:"Flower decoration for evening aarti",scheduledDate:"2025-06-27",timeSlot:"5:00 PM - 6:00 PM",status:"Pending"},{id:3,name:"Prasadam Distribution",description:"Help distribute prasadam after evening prayers",scheduledDate:"2025-06-23",timeSlot:"7:00 PM - 8:00 PM",status:"Completed"}]),l=V([{id:1,name:"Janmashtami Celebration",date:"2025-08-16",description:"Grand celebration of Lord Krishna's birthday"},{id:2,name:"Monthly Satsang",date:"2025-06-30",description:"Community gathering and spiritual discourse"}]),d=V([{id:1,message:"New seva assignment: Abhishekam on June 25th",isRead:!1,createdAt:"2025-06-20T10:30:00Z"},{id:2,message:"Janmashtami celebration planning meeting on June 22nd",isRead:!1,createdAt:"2025-06-19T14:15:00Z"},{id:3,message:"Thank you for your service during last weekend's event",isRead:!0,createdAt:"2025-06-18T09:00:00Z"},{id:4,message:"Reminder: Monthly volunteer meeting tomorrow at 6 PM",isRead:!1,createdAt:"2025-06-17T16:45:00Z"},{id:5,message:"New temple guidelines have been updated",isRead:!0,createdAt:"2025-06-15T11:20:00Z"}]),c=te(()=>({assignedSevas:a.value.filter(k=>k.status!=="Completed").length,upcomingEvents:l.value.length})),u=te(()=>d.value.filter(k=>!k.isRead).length),p=()=>{o.push("/entity/1/volunteer/assignments")},v=()=>{o.push("/entity/1/volunteer/schedule")},g=()=>{s.value=!0},h=()=>{s.value=!1},D=()=>{n.value=!0},C=()=>{n.value=!1},B=()=>{d.value.forEach(k=>k.isRead=!0)},_=k=>({Scheduled:"bg-blue-100 text-blue-800",Pending:"bg-yellow-100 text-yellow-800",Completed:"bg-green-100 text-green-800",Cancelled:"bg-red-100 text-red-800"})[k]||"bg-gray-100 text-gray-800",T=k=>new Date(k).toLocaleDateString("en-IN",{day:"numeric",month:"short",year:"numeric"}),S=k=>new Date(k).toLocaleDateString("en-IN",{day:"numeric",month:"long",year:"numeric",hour:"2-digit",minute:"2-digit"});return Ee(()=>{console.log("Volunteer dashboard mounted")}),(k,b)=>(m(),f("div",eK,[e("div",tK,[e("div",oK,[e("div",sK,[e("div",null,[e("h1",nK,"Welcome back, "+y(r.value.fullName)+"!",1),e("p",rK,y(i.value.name)+" - Volunteer Dashboard",1)]),e("div",aK,[e("div",iK,[e("div",lK,y(c.value.assignedSevas),1),b[2]||(b[2]=e("div",{class:"text-sm text-indigo-200"},"Assigned Sevas",-1))]),e("div",dK,[e("div",uK,y(c.value.upcomingEvents),1),b[3]||(b[3]=e("div",{class:"text-sm text-indigo-200"},"Upcoming Events",-1))])])])])]),e("div",cK,[e("div",pK,[e("div",mK,[e("div",gK,y(c.value.assignedSevas),1),b[4]||(b[4]=e("div",{class:"text-sm text-gray-600"},"Assigned Sevas",-1))]),e("div",fK,[e("div",vK,y(c.value.upcomingEvents),1),b[5]||(b[5]=e("div",{class:"text-sm text-gray-600"},"Upcoming Events",-1))])]),e("div",hK,[b[10]||(b[10]=e("h2",{class:"text-xl font-bold text-gray-900 mb-4 font-roboto"},"Quick Actions",-1)),e("div",yK,[e("button",{onClick:p,class:"bg-white hover:bg-indigo-50 border border-gray-200 rounded-xl p-6 text-left transition-all duration-200 hover:shadow-lg hover:border-indigo-300"},[...b[6]||(b[6]=[$e('<div class="flex items-center" data-v-03a61261><div class="bg-indigo-100 rounded-lg p-3" data-v-03a61261><svg class="w-6 h-6 text-indigo-600" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-03a61261><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2" data-v-03a61261></path></svg></div><div class="ml-4" data-v-03a61261><h3 class="font-semibold text-gray-900" data-v-03a61261>My Assignments</h3><p class="text-sm text-gray-600" data-v-03a61261>View seva assignments</p></div></div>',1)])]),e("button",{onClick:v,class:"bg-white hover:bg-indigo-50 border border-gray-200 rounded-xl p-6 text-left transition-all duration-200 hover:shadow-lg hover:border-indigo-300"},[...b[7]||(b[7]=[$e('<div class="flex items-center" data-v-03a61261><div class="bg-indigo-100 rounded-lg p-3" data-v-03a61261><svg class="w-6 h-6 text-indigo-600" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-03a61261><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z" data-v-03a61261></path></svg></div><div class="ml-4" data-v-03a61261><h3 class="font-semibold text-gray-900" data-v-03a61261>My Schedule</h3><p class="text-sm text-gray-600" data-v-03a61261>Check upcoming tasks</p></div></div>',1)])]),e("button",{onClick:g,class:"bg-white hover:bg-indigo-50 border border-gray-200 rounded-xl p-6 text-left transition-all duration-200 hover:shadow-lg hover:border-indigo-300 relative"},[b[8]||(b[8]=$e('<div class="flex items-center" data-v-03a61261><div class="bg-indigo-100 rounded-lg p-3" data-v-03a61261><svg class="w-6 h-6 text-indigo-600" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-03a61261><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 17h5l-5 5v-5z" data-v-03a61261></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 19H6.5a2.5 2.5 0 010-5H9" data-v-03a61261></path></svg></div><div class="ml-4" data-v-03a61261><h3 class="font-semibold text-gray-900" data-v-03a61261>Notifications</h3><p class="text-sm text-gray-600" data-v-03a61261>Temple updates</p></div></div>',1)),u.value>0?(m(),f("span",xK,y(u.value),1)):Y("",!0)]),e("button",{onClick:D,class:"bg-white hover:bg-indigo-50 border border-gray-200 rounded-xl p-6 text-left transition-all duration-200 hover:shadow-lg hover:border-indigo-300"},[...b[9]||(b[9]=[$e('<div class="flex items-center" data-v-03a61261><div class="bg-indigo-100 rounded-lg p-3" data-v-03a61261><svg class="w-6 h-6 text-indigo-600" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-03a61261><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4" data-v-03a61261></path></svg></div><div class="ml-4" data-v-03a61261><h3 class="font-semibold text-gray-900" data-v-03a61261>Temple Info</h3><p class="text-sm text-gray-600" data-v-03a61261>View temple details</p></div></div>',1)])])])]),e("div",bK,[e("div",wK,[e("div",kK,[b[14]||(b[14]=e("div",{class:"px-6 py-4 border-b border-gray-200"},[e("h3",{class:"text-lg font-semibold text-gray-900 font-roboto"},"My Assigned Sevas")],-1)),e("div",_K,[a.value.length===0?(m(),f("div",$K,[...b[11]||(b[11]=[$e('<div class="text-gray-400 mb-4" data-v-03a61261><svg class="w-16 h-16 mx-auto" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-03a61261><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2" data-v-03a61261></path></svg></div><p class="text-gray-600" data-v-03a61261>No sevas assigned yet</p><p class="text-sm text-gray-500 mt-2" data-v-03a61261>Check back later for new assignments</p>',3)])])):(m(),f("div",SK,[(m(!0),f(he,null,ke(a.value,x=>(m(),f("div",{key:x.id,class:"border border-gray-200 rounded-lg p-4 hover:bg-gray-50 transition-colors duration-200"},[e("div",DK,[e("div",CK,[e("h4",TK,y(x.name),1),e("p",EK,y(x.description),1),e("div",AK,[e("div",IK,[b[12]||(b[12]=e("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})],-1)),Q(" "+y(T(x.scheduledDate)),1)]),e("div",MK,[b[13]||(b[13]=e("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),Q(" "+y(x.timeSlot),1)])])]),e("div",RK,[e("span",{class:ie([_(x.status),"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium"])},y(x.status),3)])])]))),128))]))])])]),e("div",PK,[e("div",jK,[b[17]||(b[17]=e("div",{class:"px-6 py-4 border-b border-gray-200"},[e("h3",{class:"text-lg font-semibold text-gray-900 font-roboto"},"Upcoming Events")],-1)),e("div",NK,[l.value.length===0?(m(),f("div",LK,[...b[15]||(b[15]=[e("div",{class:"text-gray-400 mb-3"},[e("svg",{class:"w-12 h-12 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})])],-1),e("p",{class:"text-sm text-gray-600"},"No upcoming events",-1)])])):(m(),f("div",BK,[(m(!0),f(he,null,ke(l.value,x=>(m(),f("div",{key:x.id,class:"border-l-4 border-indigo-500 bg-indigo-50 p-4 rounded-r-lg"},[e("h4",VK,y(x.name),1),e("div",UK,[b[16]||(b[16]=e("svg",{class:"w-3 h-3 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})],-1)),Q(" "+y(T(x.date)),1)])]))),128))]))])])])])]),s.value?(m(),f("div",{key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",onClick:h},[e("div",{class:"bg-white rounded-xl shadow-xl max-w-2xl w-full mx-4 max-h-[80vh] overflow-hidden",onClick:b[0]||(b[0]=Oe(()=>{},["stop"]))},[e("div",{class:"px-6 py-4 border-b border-gray-200 flex items-center justify-between"},[b[19]||(b[19]=e("h3",{class:"text-xl font-semibold text-gray-900 font-roboto"},"All Notifications",-1)),e("button",{onClick:h,class:"text-gray-400 hover:text-gray-600 transition-colors duration-200"},[...b[18]||(b[18]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),e("div",FK,[d.value.length===0?(m(),f("div",OK,[...b[20]||(b[20]=[e("div",{class:"text-gray-400 mb-4"},[e("svg",{class:"w-16 h-16 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 17h5l-5 5v-5z"})])],-1),e("p",{class:"text-gray-600"},"No notifications found",-1)])])):(m(),f("div",zK,[(m(!0),f(he,null,ke(d.value,x=>(m(),f("div",{key:x.id,class:ie(["p-4 rounded-lg border transition-colors duration-200",x.isRead?"bg-gray-50 border-gray-200":"bg-blue-50 border-blue-200"])},[e("div",HK,[e("div",qK,[e("p",GK,y(x.message),1),e("p",WK,y(S(x.createdAt)),1)]),e("div",JK,[x.isRead?Y("",!0):(m(),f("span",YK," New "))])])],2))),128))]))]),e("div",{class:"px-6 py-4 border-t border-gray-200 bg-gray-50"},[e("button",{onClick:B,class:"w-full bg-indigo-600 text-white py-2 px-4 rounded-lg hover:bg-indigo-700 transition-colors duration-200 font-medium"}," Mark All as Read ")])])])):Y("",!0),n.value?(m(),f("div",{key:1,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",onClick:C},[e("div",{class:"bg-white rounded-xl shadow-xl max-w-2xl w-full mx-4 max-h-[80vh] overflow-hidden",onClick:b[1]||(b[1]=Oe(()=>{},["stop"]))},[e("div",{class:"px-6 py-4 border-b border-gray-200 flex items-center justify-between"},[b[22]||(b[22]=e("h3",{class:"text-xl font-semibold text-gray-900 font-roboto"},"Temple Details",-1)),e("button",{onClick:C,class:"text-gray-400 hover:text-gray-600 transition-colors duration-200"},[...b[21]||(b[21]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),e("div",KK,[e("div",XK,[e("div",null,[b[27]||(b[27]=e("h4",{class:"text-lg font-semibold text-gray-900 mb-3"},"Basic Information",-1)),e("div",ZK,[e("div",null,[b[23]||(b[23]=e("label",{class:"text-sm font-medium text-gray-700"},"Temple Name",-1)),e("p",QK,y(i.value.name),1)]),e("div",null,[b[24]||(b[24]=e("label",{class:"text-sm font-medium text-gray-700"},"Address",-1)),e("p",eX,y(i.value.address),1)]),e("div",tX,[e("div",null,[b[25]||(b[25]=e("label",{class:"text-sm font-medium text-gray-700"},"Phone",-1)),e("p",oX,y(i.value.phone),1)]),e("div",null,[b[26]||(b[26]=e("label",{class:"text-sm font-medium text-gray-700"},"Email",-1)),e("p",sX,y(i.value.email),1)])])])]),b[28]||(b[28]=$e('<div data-v-03a61261><h4 class="text-lg font-semibold text-gray-900 mb-3" data-v-03a61261>Temple Timings</h4><div class="bg-gray-50 rounded-lg p-4" data-v-03a61261><div class="grid grid-cols-1 sm:grid-cols-2 gap-4" data-v-03a61261><div data-v-03a61261><label class="text-sm font-medium text-gray-700" data-v-03a61261>Morning</label><p class="text-gray-900" data-v-03a61261>5:30 AM - 12:00 PM</p></div><div data-v-03a61261><label class="text-sm font-medium text-gray-700" data-v-03a61261>Evening</label><p class="text-gray-900" data-v-03a61261>4:00 PM - 9:00 PM</p></div></div></div></div><div data-v-03a61261><h4 class="text-lg font-semibold text-gray-900 mb-3" data-v-03a61261>Daily Schedule</h4><div class="bg-gray-50 rounded-lg p-4 space-y-2" data-v-03a61261><div class="flex justify-between" data-v-03a61261><span class="text-gray-700" data-v-03a61261>Suprabhatam</span><span class="text-gray-900" data-v-03a61261>5:30 AM</span></div><div class="flex justify-between" data-v-03a61261><span class="text-gray-700" data-v-03a61261>Abhishekam</span><span class="text-gray-900" data-v-03a61261>6:00 AM</span></div><div class="flex justify-between" data-v-03a61261><span class="text-gray-700" data-v-03a61261>Archana</span><span class="text-gray-900" data-v-03a61261>7:00 AM</span></div><div class="flex justify-between" data-v-03a61261><span class="text-gray-700" data-v-03a61261>Afternoon Aarti</span><span class="text-gray-900" data-v-03a61261>12:00 PM</span></div><div class="flex justify-between" data-v-03a61261><span class="text-gray-700" data-v-03a61261>Evening Aarti</span><span class="text-gray-900" data-v-03a61261>7:00 PM</span></div><div class="flex justify-between" data-v-03a61261><span class="text-gray-700" data-v-03a61261>Night Aarti</span><span class="text-gray-900" data-v-03a61261>8:30 PM</span></div></div></div><div data-v-03a61261><h4 class="text-lg font-semibold text-gray-900 mb-3" data-v-03a61261>Temple Management</h4><div class="bg-gray-50 rounded-lg p-4 space-y-3" data-v-03a61261><div data-v-03a61261><label class="text-sm font-medium text-gray-700" data-v-03a61261>Head Priest</label><p class="text-gray-900" data-v-03a61261>Sri Venkateswara Sharma</p></div><div data-v-03a61261><label class="text-sm font-medium text-gray-700" data-v-03a61261>Temple Administrator</label><p class="text-gray-900" data-v-03a61261>Sri Rajesh Kumar</p></div><div data-v-03a61261><label class="text-sm font-medium text-gray-700" data-v-03a61261>Volunteer Coordinator</label><p class="text-gray-900" data-v-03a61261>Smt. Lakshmi Devi</p><p class="text-sm text-gray-600" data-v-03a61261>coordinator@srivenkateswara.temple</p></div></div></div>',3))])])])])):Y("",!0)]))}},rX=Qe(nX,[["__scopeId","data-v-03a61261"]]),aX={class:"min-h-screen bg-gray-50"},iX={class:"bg-white shadow-sm border-b border-gray-200"},lX={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},dX={class:"py-6"},uX={class:"flex flex-col sm:flex-row sm:items-center sm:justify-between"},cX={class:"mt-4 sm:mt-0 flex flex-col sm:flex-row gap-3"},pX=["disabled"],mX={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6"},gX={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8"},fX={class:"bg-white overflow-hidden shadow-md rounded-xl"},vX={class:"p-6"},hX={class:"flex items-center"},yX={class:"ml-4"},xX={class:"text-2xl font-bold text-gray-900"},bX={class:"bg-white overflow-hidden shadow-md rounded-xl"},wX={class:"p-6"},kX={class:"flex items-center"},_X={class:"ml-4"},$X={class:"text-2xl font-bold text-gray-900"},SX={class:"bg-white overflow-hidden shadow-md rounded-xl"},DX={class:"p-6"},CX={class:"flex items-center"},TX={class:"ml-4"},EX={class:"text-2xl font-bold text-gray-900"},AX={class:"bg-white overflow-hidden shadow-md rounded-xl"},IX={class:"p-6"},MX={class:"flex items-center"},RX={class:"ml-4"},PX={class:"text-2xl font-bold text-gray-900"},jX={class:"bg-white shadow-md rounded-xl mb-6"},NX={class:"border-b border-gray-200"},LX={class:"-mb-px flex space-x-8 px-6","aria-label":"Tabs"},BX=["onClick"],VX={class:"bg-white shadow-md rounded-xl"},UX={class:"px-6 py-4 border-b border-gray-200"},FX={class:"flex flex-col sm:flex-row sm:items-center sm:justify-between"},OX={class:"text-lg font-semibold text-gray-900 font-['Roboto']"},zX={class:"mt-3 sm:mt-0 flex items-center space-x-3"},HX={class:"relative"},qX={class:"divide-y divide-gray-200"},GX={key:0,class:"p-8 text-center"},WX={key:1,class:"p-8 text-center"},JX={class:"mt-1 text-sm text-gray-500"},YX={class:"flex flex-col lg:flex-row lg:items-center lg:justify-between"},KX={class:"flex-1 min-w-0"},XX={class:"flex items-center space-x-3"},ZX={class:"text-lg font-semibold text-gray-900 font-['Roboto'] truncate"},QX={class:"mt-2 flex flex-col sm:flex-row sm:items-center text-sm text-gray-500 space-y-1 sm:space-y-0 sm:space-x-6"},eZ={class:"flex items-center"},tZ={class:"flex items-center"},oZ={class:"flex items-center"},sZ={class:"mt-2 text-sm text-gray-600 font-sans"},nZ={key:0,class:"mt-2 flex items-center text-sm text-gray-500"},rZ={class:"mt-4 lg:mt-0 lg:ml-6 flex flex-col sm:flex-row gap-2"},aZ=["onClick"],iZ=["onClick"],lZ=["onClick"],dZ={key:0,class:"fixed inset-0 z-50 overflow-y-auto"},uZ={class:"flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0"},cZ={class:"inline-block align-bottom bg-white rounded-xl text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full"},pZ={class:"bg-white px-6 pt-6 pb-4"},mZ={class:"flex items-center justify-between"},gZ={class:"px-6 pb-6"},fZ={class:"space-y-4"},vZ={class:"grid grid-cols-2 gap-2"},hZ=["value"],yZ={class:"ml-2 text-sm text-gray-700 font-sans"},xZ={class:"space-y-2"},bZ=["value"],wZ={class:"ml-2 text-sm text-gray-700 font-sans"},kZ={class:"bg-gray-50 px-6 py-4 flex flex-col sm:flex-row-reverse gap-3"},_Z={__name:"MyAssignments",setup(t){const o=V(!1),s=V(""),n=V("all"),r=V(!1),i=V({totalAssignments:12,completed:8,pending:3,thisWeek:2}),a=V([{id:"all",name:"All",count:12},{id:"pending",name:"Pending",count:3},{id:"accepted",name:"Accepted",count:6},{id:"completed",name:"Completed",count:8},{id:"upcoming",name:"Upcoming",count:4}]),l=V({days:["Monday","Wednesday","Friday"],timeSlots:["Morning (6AM-12PM)","Evening (6PM-10PM)"]}),d=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],c=["Early Morning (4AM-8AM)","Morning (6AM-12PM)","Afternoon (12PM-6PM)","Evening (6PM-10PM)","Night (10PM-12AM)"],u=V([{id:1,title:"Temple Cleaning - Main Hall",description:"Assist with daily cleaning and maintenance of the main prayer hall including floor mopping, decoration arrangement, and general upkeep.",date:"2025-06-22",startTime:"6:00 AM",endTime:"8:00 AM",location:"Main Prayer Hall",status:"pending",coordinator:"Radhika Sharma"},{id:2,title:"Festival Decoration Setup",description:"Help set up decorations for the upcoming Janmashtami celebration. Tasks include hanging garlands, arranging flowers, and setting up stage decorations.",date:"2025-06-23",startTime:"4:00 PM",endTime:"8:00 PM",location:"Temple Courtyard",status:"accepted",coordinator:"Priya Nair"},{id:3,title:"Prasadam Distribution",description:"Assist in preparing and distributing prasadam to devotees during evening aarti. Includes serving, crowd management, and cleanup.",date:"2025-06-21",startTime:"6:00 PM",endTime:"8:30 PM",location:"Distribution Counter",status:"completed",coordinator:"Amit Kumar"},{id:4,title:"Library Organization",description:"Help organize religious books and scriptures in the temple library. Tasks include cataloging, shelving, and maintaining reading area.",date:"2025-06-24",startTime:"10:00 AM",endTime:"1:00 PM",location:"Temple Library",status:"accepted",coordinator:"Dr. Sunita Mehta"},{id:5,title:"Youth Program Coordination",description:"Assist with organizing and conducting youth spiritual education program. Help with activities, storytelling, and managing children.",date:"2025-06-25",startTime:"3:00 PM",endTime:"5:00 PM",location:"Community Hall",status:"pending",coordinator:"Rajesh Gupta"}]),p=te(()=>{let k=u.value;if(n.value!=="all")if(n.value==="upcoming"){const b=new Date().toISOString().split("T")[0];k=k.filter(x=>x.date>=b&&(x.status==="accepted"||x.status==="pending"))}else k=k.filter(b=>b.status===n.value);if(s.value){const b=s.value.toLowerCase();k=k.filter(x=>x.title.toLowerCase().includes(b)||x.description.toLowerCase().includes(b)||x.location.toLowerCase().includes(b)||x.coordinator.toLowerCase().includes(b))}return k}),v=k=>{const b=a.value.find(x=>x.id===k);return b?b.name:"All"},g=k=>({pending:"bg-yellow-400",accepted:"bg-blue-400",completed:"bg-green-400",declined:"bg-red-400"})[k]||"bg-gray-400",h=k=>({pending:"bg-yellow-100 text-yellow-800",accepted:"bg-blue-100 text-blue-800",completed:"bg-green-100 text-green-800",declined:"bg-red-100 text-red-800"})[k]||"bg-gray-100 text-gray-800",D=k=>new Date(k).toLocaleDateString("en-US",{weekday:"short",year:"numeric",month:"short",day:"numeric"}),C=async()=>{o.value=!0;try{await new Promise(k=>setTimeout(k,1e3)),console.log("Refreshing assignments...")}catch(k){console.error("Error refreshing assignments:",k)}finally{o.value=!1}},B=async k=>{try{await new Promise(x=>setTimeout(x,500));const b=u.value.find(x=>x.id===k);b&&(b.status="accepted"),i.value.pending-=1,console.log("Assignment accepted successfully!")}catch(b){console.error("Error accepting assignment:",b)}},_=async k=>{try{await new Promise(x=>setTimeout(x,500));const b=u.value.find(x=>x.id===k);b&&(b.status="declined"),i.value.pending-=1,console.log("Assignment declined.")}catch(b){console.error("Error declining assignment:",b)}},T=k=>{console.log("Viewing assignment details:",k),alert(`Assignment Details:

Title: ${k.title}
Date: ${D(k.date)}
Time: ${k.startTime} - ${k.endTime}
Location: ${k.location}
Coordinator: ${k.coordinator}

Description: ${k.description}`)},S=async()=>{try{await new Promise(k=>setTimeout(k,1e3)),console.log("Saving availability:",l.value),r.value=!1,console.log("Availability updated successfully!")}catch(k){console.error("Error saving availability:",k)}};return Ee(()=>{C()}),(k,b)=>(m(),f("div",aX,[e("div",iX,[e("div",lX,[e("div",dX,[e("div",uX,[b[8]||(b[8]=e("div",null,[e("h1",{class:"text-2xl font-bold text-gray-900 font-['Roboto']"},"My Assignments"),e("p",{class:"mt-1 text-sm text-gray-600 font-sans"}," View and manage your volunteering assignments and schedules ")],-1)),e("div",cX,[e("button",{onClick:C,disabled:o.value,class:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-lg text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200"},[(m(),f("svg",{class:ie(["w-4 h-4 mr-2",{"animate-spin":o.value}]),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[...b[6]||(b[6]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"},null,-1)])],2)),b[7]||(b[7]=Q(" Refresh ",-1))],8,pX)])])])])]),e("div",mX,[e("div",gX,[e("div",fX,[e("div",vX,[e("div",hX,[b[10]||(b[10]=e("div",{class:"flex-shrink-0"},[e("div",{class:"w-10 h-10 bg-indigo-100 rounded-lg flex items-center justify-center"},[e("svg",{class:"w-6 h-6 text-indigo-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})])])],-1)),e("div",yX,[b[9]||(b[9]=e("dt",{class:"text-sm font-medium text-gray-500 font-sans"},"Total Assignments",-1)),e("dd",xX,y(i.value.totalAssignments),1)])])])]),e("div",bX,[e("div",wX,[e("div",kX,[b[12]||(b[12]=e("div",{class:"flex-shrink-0"},[e("div",{class:"w-10 h-10 bg-green-100 rounded-lg flex items-center justify-center"},[e("svg",{class:"w-6 h-6 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})])])],-1)),e("div",_X,[b[11]||(b[11]=e("dt",{class:"text-sm font-medium text-gray-500 font-sans"},"Completed",-1)),e("dd",$X,y(i.value.completed),1)])])])]),e("div",SX,[e("div",DX,[e("div",CX,[b[14]||(b[14]=e("div",{class:"flex-shrink-0"},[e("div",{class:"w-10 h-10 bg-yellow-100 rounded-lg flex items-center justify-center"},[e("svg",{class:"w-6 h-6 text-yellow-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})])])],-1)),e("div",TX,[b[13]||(b[13]=e("dt",{class:"text-sm font-medium text-gray-500 font-sans"},"Pending",-1)),e("dd",EX,y(i.value.pending),1)])])])]),e("div",AX,[e("div",IX,[e("div",MX,[b[16]||(b[16]=e("div",{class:"flex-shrink-0"},[e("div",{class:"w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center"},[e("svg",{class:"w-6 h-6 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})])])],-1)),e("div",RX,[b[15]||(b[15]=e("dt",{class:"text-sm font-medium text-gray-500 font-sans"},"This Week",-1)),e("dd",PX,y(i.value.thisWeek),1)])])])])]),e("div",jX,[e("div",NX,[e("nav",LX,[(m(!0),f(he,null,ke(a.value,x=>(m(),f("button",{key:x.id,onClick:F=>n.value=x.id,class:ie([n.value===x.id?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300","whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm transition-all duration-200"])},[Q(y(x.name)+" ",1),x.count?(m(),f("span",{key:0,class:ie([n.value===x.id?"bg-indigo-100 text-indigo-600":"bg-gray-100 text-gray-900","ml-2 py-0.5 px-2.5 rounded-full text-xs font-medium"])},y(x.count),3)):Y("",!0)],10,BX))),128))])])]),e("div",VX,[e("div",UX,[e("div",FX,[e("h3",OX,y(v(n.value))+" Assignments ",1),e("div",zX,[e("div",HX,[de(e("input",{"onUpdate:modelValue":b[0]||(b[0]=x=>s.value=x),type:"text",placeholder:"Search assignments...",class:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-lg leading-5 bg-white placeholder-gray-500 focus:outline-none focus:placeholder-gray-400 focus:ring-1 focus:ring-indigo-500 focus:border-indigo-500 text-sm"},null,512),[[xe,s.value]]),b[17]||(b[17]=e("div",{class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},[e("svg",{class:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})])],-1))])])])]),e("div",qX,[o.value?(m(),f("div",GX,[...b[18]||(b[18]=[e("div",{class:"inline-flex items-center px-4 py-2 font-semibold leading-6 text-sm shadow rounded-md text-indigo-600 bg-indigo-50"},[e("svg",{class:"animate-spin -ml-1 mr-3 h-5 w-5 text-indigo-600",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]),Q(" Loading assignments... ")],-1)])])):p.value.length===0?(m(),f("div",WX,[b[19]||(b[19]=e("svg",{class:"mx-auto h-12 w-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})],-1)),b[20]||(b[20]=e("h3",{class:"mt-2 text-sm font-medium text-gray-900"},"No assignments found",-1)),e("p",JX,y(s.value?"Try adjusting your search criteria.":"No assignments match the current filter."),1)])):(m(!0),f(he,{key:2},ke(p.value,x=>(m(),f("div",{key:x.id,class:"p-6 hover:bg-gray-50 transition-colors duration-200"},[e("div",YX,[e("div",KX,[e("div",XX,[e("div",{class:ie(["flex-shrink-0 w-3 h-3 rounded-full",g(x.status)])},null,2),e("h4",ZX,y(x.title),1),e("span",{class:ie(["inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium",h(x.status)])},y(x.status),3)]),e("div",QX,[e("div",eZ,[b[21]||(b[21]=e("svg",{class:"flex-shrink-0 mr-1.5 h-4 w-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})],-1)),Q(" "+y(D(x.date)),1)]),e("div",tZ,[b[22]||(b[22]=e("svg",{class:"flex-shrink-0 mr-1.5 h-4 w-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),Q(" "+y(x.startTime)+" - "+y(x.endTime),1)]),e("div",oZ,[b[23]||(b[23]=e("svg",{class:"flex-shrink-0 mr-1.5 h-4 w-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})],-1)),Q(" "+y(x.location),1)])]),e("p",sZ,y(x.description),1),x.coordinator?(m(),f("div",nZ,[b[24]||(b[24]=e("svg",{class:"flex-shrink-0 mr-1.5 h-4 w-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})],-1)),Q(" Coordinator: "+y(x.coordinator),1)])):Y("",!0)]),e("div",rZ,[x.status==="pending"?(m(),f("button",{key:0,onClick:F=>B(x.id),class:"inline-flex items-center px-3 py-2 border border-transparent text-sm leading-4 font-medium rounded-lg text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 transition-all duration-200"}," Accept ",8,aZ)):Y("",!0),x.status==="pending"?(m(),f("button",{key:1,onClick:F=>_(x.id),class:"inline-flex items-center px-3 py-2 border border-red-300 text-sm leading-4 font-medium rounded-lg text-red-700 bg-red-50 hover:bg-red-100 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 transition-all duration-200"}," Decline ",8,iZ)):Y("",!0),e("button",{onClick:F=>T(x),class:"inline-flex items-center px-3 py-2 border border-gray-300 text-sm leading-4 font-medium rounded-lg text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 transition-all duration-200"}," View Details ",8,lZ)])])]))),128))])])]),r.value?(m(),f("div",dZ,[e("div",uZ,[e("div",{class:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity",onClick:b[1]||(b[1]=x=>r.value=!1)}),b[30]||(b[30]=e("span",{class:"hidden sm:inline-block sm:align-middle sm:h-screen"},"",-1)),e("div",cZ,[e("div",pZ,[e("div",mZ,[b[26]||(b[26]=e("h3",{class:"text-lg leading-6 font-bold text-gray-900 font-['Roboto']"}," Update Availability ",-1)),e("button",{onClick:b[2]||(b[2]=x=>r.value=!1),class:"text-gray-400 hover:text-gray-600 transition-colors duration-200"},[...b[25]||(b[25]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),b[27]||(b[27]=e("p",{class:"mt-2 text-sm text-gray-600 font-sans"}," Set your availability preferences for volunteer assignments. ",-1))]),e("div",gZ,[e("div",fZ,[e("div",null,[b[28]||(b[28]=e("label",{class:"block text-sm font-medium text-gray-700 font-sans mb-2"}," Preferred Days ",-1)),e("div",vZ,[(m(),f(he,null,ke(d,x=>e("label",{key:x,class:"flex items-center"},[de(e("input",{"onUpdate:modelValue":b[3]||(b[3]=F=>l.value.days=F),value:x,type:"checkbox",class:"h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded"},null,8,hZ),[[ot,l.value.days]]),e("span",yZ,y(x),1)])),64))])]),e("div",null,[b[29]||(b[29]=e("label",{class:"block text-sm font-medium text-gray-700 font-sans mb-2"}," Preferred Time Slots ",-1)),e("div",xZ,[(m(),f(he,null,ke(c,x=>e("label",{key:x,class:"flex items-center"},[de(e("input",{"onUpdate:modelValue":b[4]||(b[4]=F=>l.value.timeSlots=F),value:x,type:"checkbox",class:"h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded"},null,8,bZ),[[ot,l.value.timeSlots]]),e("span",wZ,y(x),1)])),64))])])])]),e("div",kZ,[e("button",{onClick:S,class:"w-full inline-flex justify-center px-4 py-2 border border-transparent text-sm font-medium rounded-lg text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 transition-all duration-200 sm:w-auto"}," Save Changes "),e("button",{onClick:b[5]||(b[5]=x=>r.value=!1),class:"w-full inline-flex justify-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-lg text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 transition-all duration-200 sm:w-auto"}," Cancel ")])])])])):Y("",!0)]))}},$Z={class:"min-h-screen bg-gray-50 p-4 sm:p-6 lg:p-8"},SZ={class:"mb-8"},DZ={class:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4"},CZ={class:"flex flex-col sm:flex-row gap-3"},TZ=["value"],EZ=["disabled"],AZ={key:0,class:"animate-spin -ml-1 mr-2 h-4 w-4 text-white inline",fill:"none",viewBox:"0 0 24 24"},IZ={class:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8"},MZ={class:"bg-white rounded-2xl shadow-md p-6 border border-gray-200"},RZ={class:"flex items-center"},PZ={class:"ml-4"},jZ={class:"text-2xl font-bold text-gray-900"},NZ={class:"bg-white rounded-2xl shadow-md p-6 border border-gray-200"},LZ={class:"flex items-center"},BZ={class:"ml-4"},VZ={class:"text-2xl font-bold text-gray-900"},UZ={class:"bg-white rounded-2xl shadow-md p-6 border border-gray-200"},FZ={class:"flex items-center"},OZ={class:"ml-4"},zZ={class:"text-2xl font-bold text-gray-900"},HZ={class:"bg-white rounded-2xl shadow-md border border-gray-200 mb-8"},qZ={class:"p-6 border-b border-gray-200"},GZ={class:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4"},WZ={class:"flex bg-gray-100 rounded-xl p-1"},JZ={key:0,class:"p-6"},YZ={key:0,class:"text-center py-12"},KZ={key:1,class:"space-y-4"},XZ={class:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4"},ZZ={class:"flex-1"},QZ={class:"flex items-center gap-3 mb-2"},eQ={class:"text-lg font-semibold text-gray-900 mb-1"},tQ={class:"text-gray-600 mb-2"},oQ={class:"flex flex-col sm:flex-row sm:items-center gap-2 text-sm text-gray-500"},sQ={class:"flex items-center gap-1"},nQ={class:"flex items-center gap-1"},rQ={class:"flex items-center gap-1"},aQ={class:"flex flex-col sm:flex-row gap-2"},iQ=["onClick"],lQ=["onClick"],dQ={key:1,class:"p-6"},uQ={class:"p-6 border-b border-gray-200"},cQ={class:"flex items-center justify-between"},pQ={class:"text-xl font-bold text-gray-900",style:{"font-family":"'Roboto', sans-serif"}},mQ={class:"p-6"},gQ={class:"space-y-4"},fQ={class:"text-gray-900"},vQ={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},hQ={class:"text-gray-900"},yQ={class:"text-gray-900"},xQ={class:"text-gray-900"},bQ={key:0},wQ={class:"text-gray-900"},kQ={__name:"MySchedule",setup(t){const o=V(!1),s=V(new Date().getMonth()),n=V("list"),r=V(!1),i=V(null),a=V([{id:1,type:"seva",title:"Morning Prayer Service",description:"Assist with morning prayers and temple setup",date:"2025-06-22",time:"06:00 AM - 08:00 AM",location:"Main Temple Hall",status:"upcoming",notes:"Please arrive 15 minutes early for briefing"},{id:2,type:"event",title:"Ganesha Chaturthi Celebration",description:"Help with event setup and crowd management",date:"2025-06-25",time:"10:00 AM - 06:00 PM",location:"Temple Grounds",status:"upcoming",notes:"Lunch will be provided"},{id:3,type:"seva",title:"Temple Cleaning Drive",description:"Weekly temple cleaning and maintenance",date:"2025-06-18",time:"07:00 AM - 09:00 AM",location:"Entire Temple Complex",status:"completed"},{id:4,type:"seva",title:"Food Distribution",description:"Distribute prasad to devotees",date:"2025-06-28",time:"12:00 PM - 02:00 PM",location:"Temple Kitchen",status:"upcoming"},{id:5,type:"event",title:"Spiritual Discourse",description:"Help with audio/video setup and seating arrangement",date:"2025-06-30",time:"05:00 PM - 08:00 PM",location:"Discourse Hall",status:"upcoming"}]),l=[{value:0,label:"January"},{value:1,label:"February"},{value:2,label:"March"},{value:3,label:"April"},{value:4,label:"May"},{value:5,label:"June"},{value:6,label:"July"},{value:7,label:"August"},{value:8,label:"September"},{value:9,label:"October"},{value:10,label:"November"},{value:11,label:"December"}],d=te(()=>a.value.filter(B=>new Date(B.date).getMonth()===s.value)),c=te(()=>{const B=d.value.length,_=a.value.filter(S=>S.status==="completed").length,T=a.value.filter(S=>S.status==="upcoming").length;return{thisMonth:B,completed:_,upcoming:T}}),u=async()=>{o.value=!0,await new Promise(B=>setTimeout(B,1e3)),o.value=!1},p=()=>{},v=B=>{const _=a.value.find(T=>T.id===B);_&&(_.status="completed")},g=B=>{i.value=B,r.value=!0},h=()=>{r.value=!1,i.value=null},D=B=>new Date(B).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"}),C=B=>{switch(B){case"completed":return"bg-green-100 text-green-800";case"upcoming":return"bg-orange-100 text-orange-800";case"cancelled":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}};return Ee(()=>{}),(B,_)=>{var T,S,k,b,x,F,E,O;return m(),f("div",$Z,[e("div",SZ,[e("div",DZ,[_[5]||(_[5]=e("div",null,[e("h1",{class:"text-3xl font-bold text-gray-900",style:{"font-family":"'Roboto', sans-serif"}},"My Schedule"),e("p",{class:"mt-2 text-gray-600"},"View your upcoming seva assignments and events")],-1)),e("div",CZ,[de(e("select",{"onUpdate:modelValue":_[0]||(_[0]=N=>s.value=N),onChange:p,class:"px-4 py-2 border border-gray-300 rounded-xl bg-white text-gray-700 focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-all duration-200"},[(m(),f(he,null,ke(l,N=>e("option",{key:N.value,value:N.value},y(N.label),9,TZ)),64))],544),[[Ce,s.value]]),e("button",{onClick:u,disabled:o.value,class:"px-6 py-2 bg-indigo-600 text-white rounded-xl hover:bg-indigo-700 focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 shadow-md"},[o.value?(m(),f("svg",AZ,[..._[4]||(_[4]=[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)])])):Y("",!0),Q(" "+y(o.value?"Loading...":"Refresh"),1)],8,EZ)])])]),e("div",IZ,[e("div",MZ,[e("div",RZ,[_[7]||(_[7]=e("div",{class:"p-3 bg-indigo-100 rounded-xl"},[e("svg",{class:"h-6 w-6 text-indigo-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})])],-1)),e("div",PZ,[_[6]||(_[6]=e("p",{class:"text-sm font-medium text-gray-600"},"This Month",-1)),e("p",jZ,y(c.value.thisMonth),1)])])]),e("div",NZ,[e("div",LZ,[_[9]||(_[9]=e("div",{class:"p-3 bg-green-100 rounded-xl"},[e("svg",{class:"h-6 w-6 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1)),e("div",BZ,[_[8]||(_[8]=e("p",{class:"text-sm font-medium text-gray-600"},"Completed",-1)),e("p",VZ,y(c.value.completed),1)])])]),e("div",UZ,[e("div",FZ,[_[11]||(_[11]=e("div",{class:"p-3 bg-orange-100 rounded-xl"},[e("svg",{class:"h-6 w-6 text-orange-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1)),e("div",OZ,[_[10]||(_[10]=e("p",{class:"text-sm font-medium text-gray-600"},"Upcoming",-1)),e("p",zZ,y(c.value.upcoming),1)])])])]),e("div",HZ,[e("div",qZ,[e("div",GZ,[_[12]||(_[12]=e("h2",{class:"text-xl font-bold text-gray-900",style:{"font-family":"'Roboto', sans-serif"}},"Schedule View",-1)),e("div",WZ,[e("button",{onClick:_[1]||(_[1]=N=>n.value="list"),class:ie(["px-4 py-2 rounded-lg text-sm font-medium transition-all duration-200",n.value==="list"?"bg-white text-indigo-600 shadow-sm":"text-gray-600 hover:text-gray-900"])}," List View ",2),e("button",{onClick:_[2]||(_[2]=N=>n.value="calendar"),class:ie(["px-4 py-2 rounded-lg text-sm font-medium transition-all duration-200",n.value==="calendar"?"bg-white text-indigo-600 shadow-sm":"text-gray-600 hover:text-gray-900"])}," Calendar View ",2)])])]),n.value==="list"?(m(),f("div",JZ,[d.value.length===0?(m(),f("div",YZ,[..._[13]||(_[13]=[e("svg",{class:"mx-auto h-12 w-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})],-1),e("h3",{class:"mt-4 text-lg font-medium text-gray-900"},"No scheduled items",-1),e("p",{class:"mt-2 text-gray-600"},"You don't have any assignments for the selected period.",-1)])])):(m(),f("div",KZ,[(m(!0),f(he,null,ke(d.value,N=>(m(),f("div",{key:N.id,class:"bg-gray-50 rounded-xl p-6 border border-gray-200 hover:shadow-md transition-all duration-200"},[e("div",XZ,[e("div",ZZ,[e("div",QZ,[e("span",{class:ie(["px-2 py-1 rounded-lg text-xs font-medium",N.type==="seva"?"bg-indigo-100 text-indigo-800":"bg-purple-100 text-purple-800"])},y(N.type==="seva"?"Seva":"Event"),3),e("span",{class:ie(["px-2 py-1 rounded-lg text-xs font-medium",C(N.status)])},y(N.status),3)]),e("h3",eQ,y(N.title),1),e("p",tQ,y(N.description),1),e("div",oQ,[e("div",sQ,[_[14]||(_[14]=e("svg",{class:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})],-1)),Q(" "+y(D(N.date)),1)]),e("div",nQ,[_[15]||(_[15]=e("svg",{class:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),Q(" "+y(N.time),1)]),e("div",rQ,[_[16]||(_[16]=e("svg",{class:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})],-1)),Q(" "+y(N.location),1)])])]),e("div",aQ,[N.status==="upcoming"?(m(),f("button",{key:0,onClick:L=>v(N.id),class:"px-4 py-2 bg-green-600 text-white rounded-xl hover:bg-green-700 focus:ring-2 focus:ring-green-500 focus:ring-offset-2 transition-all duration-200 text-sm font-medium"}," Mark Complete ",8,iQ)):Y("",!0),e("button",{onClick:L=>g(N),class:"px-4 py-2 bg-indigo-100 text-indigo-700 rounded-xl hover:bg-indigo-200 focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 transition-all duration-200 text-sm font-medium"}," View Details ",8,lQ)])])]))),128))]))])):(m(),f("div",dQ,[..._[17]||(_[17]=[$e('<div class="bg-gray-50 rounded-xl p-8 text-center"><svg class="mx-auto h-12 w-12 text-gray-400 mb-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"></path></svg><h3 class="text-lg font-medium text-gray-900 mb-2">Calendar View</h3><p class="text-gray-600">Calendar view will be implemented in the next phase</p></div>',1)])]))]),r.value?(m(),f("div",{key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",onClick:h},[e("div",{class:"bg-white rounded-2xl shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",onClick:_[3]||(_[3]=Oe(()=>{},["stop"]))},[e("div",uQ,[e("div",cQ,[e("h3",pQ,y((T=i.value)==null?void 0:T.title),1),e("button",{onClick:h,class:"p-2 hover:bg-gray-100 rounded-xl transition-all duration-200"},[..._[18]||(_[18]=[e("svg",{class:"h-5 w-5 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])])]),e("div",mQ,[e("div",gQ,[e("div",null,[_[19]||(_[19]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Description",-1)),e("p",fQ,y((S=i.value)==null?void 0:S.description),1)]),e("div",vQ,[e("div",null,[_[20]||(_[20]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Date",-1)),e("p",hQ,y(D((k=i.value)==null?void 0:k.date)),1)]),e("div",null,[_[21]||(_[21]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Time",-1)),e("p",yQ,y((b=i.value)==null?void 0:b.time),1)])]),e("div",null,[_[22]||(_[22]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Location",-1)),e("p",xQ,y((x=i.value)==null?void 0:x.location),1)]),e("div",null,[_[23]||(_[23]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Status",-1)),e("span",{class:ie(["px-3 py-1 rounded-lg text-sm font-medium",C((F=i.value)==null?void 0:F.status)])},y((E=i.value)==null?void 0:E.status),3)]),(O=i.value)!=null&&O.notes?(m(),f("div",bQ,[_[24]||(_[24]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Notes",-1)),e("p",wQ,y(i.value.notes),1)])):Y("",!0)])]),e("div",{class:"p-6 border-t border-gray-200 flex justify-end"},[e("button",{onClick:h,class:"px-6 py-2 bg-gray-100 text-gray-700 rounded-xl hover:bg-gray-200 focus:ring-2 focus:ring-gray-500 focus:ring-offset-2 transition-all duration-200 font-medium"}," Close ")])])])):Y("",!0)])}}},_Q={class:"notifications-page min-h-screen bg-gradient-to-br from-indigo-50 via-white to-purple-50 py-8 px-4 sm:px-6 lg:px-8"},$Q={class:"max-w-4xl mx-auto"},SQ={class:"grid grid-cols-1 sm:grid-cols-3 gap-6 mb-8"},DQ={class:"bg-white rounded-2xl shadow-lg border border-indigo-100 p-6 transform hover:scale-105 transition-all duration-300"},CQ={class:"flex items-center"},TQ={class:"p-3 rounded-xl bg-indigo-100"},EQ={class:"ml-4"},AQ={class:"text-2xl font-bold text-gray-900"},IQ={class:"bg-white rounded-2xl shadow-lg border border-amber-100 p-6 transform hover:scale-105 transition-all duration-300"},MQ={class:"flex items-center"},RQ={class:"p-3 rounded-xl bg-amber-100"},PQ={class:"ml-4"},jQ={class:"text-2xl font-bold text-gray-900"},NQ={class:"bg-white rounded-2xl shadow-lg border border-green-100 p-6 transform hover:scale-105 transition-all duration-300"},LQ={class:"flex items-center"},BQ={class:"p-3 rounded-xl bg-green-100"},VQ={class:"ml-4"},UQ={class:"text-2xl font-bold text-gray-900"},FQ={class:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 mb-8"},OQ={class:"flex flex-wrap gap-3"},zQ={class:"w-full sm:w-auto"},HQ={key:0,class:"flex justify-center items-center py-16"},qQ={class:"relative"},GQ={class:"absolute inset-0 flex items-center justify-center"},WQ={key:1,class:"bg-white rounded-2xl shadow-xl border border-gray-100 p-12 text-center my-8 transform hover:scale-105 transition-all duration-300"},JQ={class:"flex justify-center mb-6"},YQ={class:"relative"},KQ={class:"h-20 w-20 rounded-full bg-gradient-to-br from-indigo-100 to-purple-100 flex items-center justify-center"},XQ={class:"absolute -top-1 -right-1 h-6 w-6 rounded-full bg-gradient-to-r from-indigo-500 to-purple-500 flex items-center justify-center"},ZQ={class:"text-gray-500 text-lg max-w-md mx-auto leading-relaxed"},QQ={key:2,class:"space-y-6"},eee={__name:"NotificationsView",setup(t){const o=up(),{notifications:s,unreadCount:n,isLoading:r,markAsRead:i,markAllAsRead:a,removeNotification:l,clearRead:d,fetchNotifications:c,NOTIFICATION_TYPES:u,CATEGORIES:p}=o,v=V("all"),g=[{value:"all",label:"All Notifications"},{value:"unread",label:"Unread Only"},{value:"temple",label:"Temple Updates"},{value:"seva",label:"Seva Bookings"},{value:"donation",label:"Donations"},{value:"event",label:"Events"},{value:"system",label:"System Updates"}],h=te(()=>v.value==="all"?s:v.value==="unread"?s.filter(C=>!C.isRead):s.filter(C=>C.category===v.value)),D=te(()=>v.value==="all"?"You have no notifications at the moment...":v.value==="unread"?"All caught up! You have no unread notifications.":`You have no ${{temple:"temple updates",seva:"seva booking",donation:"donation",event:"event",system:"system"}[v.value]||v.value} notifications.`);return Ee(()=>c("current-user-id")),(C,B)=>(m(),f("div",_Q,[e("div",$Q,[B[8]||(B[8]=e("div",{class:"mb-8"},[e("div",{class:"text-center sm:text-left"},[e("h1",{class:"text-4xl font-bold bg-gradient-to-r from-indigo-800 to-purple-700 bg-clip-text text-transparent mb-3"}," Notifications "),e("p",{class:"text-gray-600 text-lg font-medium"},"Manage all your notifications in one place")])],-1)),e("div",SQ,[e("div",DQ,[e("div",CQ,[e("div",TQ,[re(_e(Ar),{class:"h-6 w-6 text-indigo-600"})]),e("div",EQ,[B[1]||(B[1]=e("p",{class:"text-sm font-medium text-gray-600"},"Total",-1)),e("p",AQ,y(_e(s).length),1)])])]),e("div",IQ,[e("div",MQ,[e("div",RQ,[re(_e(PN),{class:"h-6 w-6 text-amber-600"})]),e("div",PQ,[B[2]||(B[2]=e("p",{class:"text-sm font-medium text-gray-600"},"Unread",-1)),e("p",jQ,y(_e(n)),1)])])]),e("div",NQ,[e("div",LQ,[e("div",BQ,[re(_e(na),{class:"h-6 w-6 text-green-600"})]),e("div",VQ,[B[3]||(B[3]=e("p",{class:"text-sm font-medium text-gray-600"},"Read",-1)),e("p",UQ,y(_e(s).length-_e(n)),1)])])])]),e("div",FQ,[e("div",OQ,[_e(n)>0?(m(),Re(lt,{key:0,onClick:_e(a),variant:"secondary",size:"sm",class:"inline-flex items-center bg-indigo-100 text-indigo-700 hover:bg-indigo-200 border-0 rounded-xl px-6 py-2 font-semibold transition-all duration-200 transform hover:scale-105"},{default:fe(()=>[re(_e(na),{class:"h-4 w-4 mr-2"}),B[4]||(B[4]=Q(" Mark all as read ",-1))]),_:1},8,["onClick"])):Y("",!0),_e(s).length>0?(m(),Re(lt,{key:1,onClick:_e(d),variant:"secondary",size:"sm",class:"inline-flex items-center bg-amber-100 text-amber-700 hover:bg-amber-200 border-0 rounded-xl px-6 py-2 font-semibold transition-all duration-200 transform hover:scale-105"},{default:fe(()=>[re(_e(LN),{class:"h-4 w-4 mr-2"}),B[5]||(B[5]=Q(" Clear read notifications ",-1))]),_:1},8,["onClick"])):Y("",!0)]),e("div",zQ,[re(zn,{modelValue:v.value,"onUpdate:modelValue":B[0]||(B[0]=_=>v.value=_),options:g,placeholder:"Filter notifications",class:"min-w-[200px] rounded-xl border-indigo-200 focus:border-indigo-500 focus:ring-indigo-500"},null,8,["modelValue"])])]),_e(r)?(m(),f("div",HQ,[e("div",qQ,[B[6]||(B[6]=e("div",{class:"w-16 h-16 border-4 border-indigo-200 border-t-indigo-600 rounded-full animate-spin"},null,-1)),e("div",GQ,[re(_e(Ar),{class:"h-6 w-6 text-indigo-600"})])])])):h.value.length===0?(m(),f("div",WQ,[e("div",JQ,[e("div",YQ,[e("div",KQ,[re(_e(Ar),{class:"h-10 w-10 text-indigo-600"})]),e("div",XQ,[re(_e(RN),{class:"h-3 w-3 text-white"})])])]),B[7]||(B[7]=e("h3",{class:"text-2xl font-bold text-gray-900 mb-3"},"No notifications",-1)),e("p",ZQ,y(D.value),1)])):(m(),f("div",QQ,[(m(!0),f(he,null,ke(h.value,_=>(m(),f("div",{key:_.id,class:ie(["group bg-white rounded-2xl shadow-lg overflow-hidden transition-all duration-300 transform hover:scale-102 hover:shadow-xl",_.isRead?"border border-gray-100 opacity-80 hover:opacity-100":"border border-indigo-100 border-l-4 border-l-indigo-500 shadow-indigo-100"])},null,2))),128))]))])]))}},tee={class:"p-6"},oee={key:0,class:"flex justify-center items-center py-12"},see={key:1,class:"bg-red-50 border border-red-200 rounded-lg p-4 mb-6"},nee={class:"flex"},ree={class:"ml-3"},aee={class:"text-sm text-red-700 mt-1"},iee={key:2,class:"space-y-6"},lee={class:"bg-white shadow-md rounded-lg p-6"},dee={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},uee={class:"flex items-center"},cee={class:"flex items-center"},pee={class:"flex items-center"},mee={class:"px-2 py-1 bg-indigo-100 text-indigo-800 rounded-full text-sm"},gee={class:"flex items-center"},fee={class:"flex items-center"},vee={class:"flex items-center"},hee={key:0,class:"mt-4"},yee={class:"flex items-start"},xee={key:0},bee={key:1},wee={key:0,class:"bg-white shadow-md rounded-lg p-6"},kee={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},_ee={key:0,class:"flex items-center"},$ee={key:1,class:"flex items-center"},See={key:2,class:"flex items-center"},Dee={key:3,class:"flex items-center"},Cee={key:4,class:"flex items-center"},Tee={key:1,class:"bg-white shadow-md rounded-lg p-6"},Eee={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Aee={key:0,class:"flex items-center"},Iee={key:1,class:"flex items-center"},Mee={key:2,class:"flex items-center"},Ree={key:3,class:"flex items-center"},Pee={key:2,class:"bg-white shadow-md rounded-lg p-6"},jee={class:"flex flex-wrap gap-2"},Nee={class:"bg-white shadow-md rounded-lg p-6"},Lee={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Bee={class:"flex items-center"},Vee={class:"flex items-center"},Uee={class:"flex items-center"},Fee={class:"font-mono text-sm"},Oee={key:3,class:"bg-yellow-50 border border-yellow-200 rounded-lg p-6 text-center"},zee={__name:"UserProfileView",setup(t){const o=Ke(),s=Ze(),{showToast:n}=je(),r=V(!1),i=V(null),a=V({}),l=te(()=>JSON.parse(localStorage.getItem("temple_user_data")||"{}").email||"Not provided"),d=te(()=>{const _=localStorage.getItem("temple_user_role");return _?_.charAt(0).toUpperCase()+_.slice(1):"Devotee"}),c=te(()=>a.value.gotra||a.value.nakshatra||a.value.rashi||a.value.lagna||a.value.veda_shaka),u=te(()=>a.value.father_name||a.value.mother_name||a.value.spouse_name||a.value.children&&a.value.children.length>0),p=te(()=>{const _=[];return a.value.seva_abhisheka&&_.push("abhisheka"),a.value.seva_arti&&_.push("arti"),a.value.seva_annadana&&_.push("annadana"),a.value.seva_archana&&_.push("archana"),a.value.seva_kalyanam&&_.push("kalyanam"),a.value.seva_homam&&_.push("homam"),_}),v=te(()=>[a.value.full_name,a.value.dob,a.value.phone,a.value.gotra].filter(Boolean).length<2),g=_=>{if(!_)return"Not provided";try{return new Date(_).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})}catch{return"Invalid date"}},h=_=>_?_.charAt(0).toUpperCase()+_.slice(1):"Not provided",D=_=>_.charAt(0).toUpperCase()+_.slice(1),C=async()=>{var _,T;try{r.value=!0,i.value=null,console.log("Loading user profile...");const S=await no.getProfile();S&&S.data?(a.value=S.data,console.log("Profile loaded:",a.value)):(console.log("No profile data found"),a.value={})}catch(S){console.error("Error loading profile:",S),i.value=S.message||"Failed to load profile",!((_=S.message)!=null&&_.includes("404"))&&!((T=S.message)!=null&&T.includes("not found"))&&n(i.value,"error"),a.value={}}finally{r.value=!1}},B=()=>{const _=s.params.id;_?o.push(`/entity/${_}/devotee/edit-profile`):o.push("/devotee/edit-profile")};return Ee(()=>{C()}),(_,T)=>(m(),f("div",tee,[e("div",{class:"flex justify-between items-center mb-6"},[T[0]||(T[0]=e("h1",{class:"text-2xl font-bold"},"My Profile",-1)),e("button",{onClick:B,class:"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors"}," Edit Profile ")]),r.value?(m(),f("div",oee,[...T[1]||(T[1]=[e("div",{class:"animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600"},null,-1),e("span",{class:"ml-3 text-gray-600"},"Loading profile...",-1)])])):Y("",!0),i.value&&!r.value?(m(),f("div",see,[e("div",nee,[T[3]||(T[3]=e("div",{class:"text-red-400"},[e("svg",{class:"h-5 w-5",fill:"currentColor",viewBox:"0 0 20 20"},[e("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"})])],-1)),e("div",ree,[T[2]||(T[2]=e("h3",{class:"text-sm font-medium text-red-800"},"Error Loading Profile",-1)),e("p",aee,y(i.value),1)])])])):Y("",!0),r.value?Y("",!0):(m(),f("div",iee,[e("div",lee,[T[11]||(T[11]=e("h2",{class:"text-xl font-semibold mb-4 border-b pb-2"},"Personal Information",-1)),e("div",dee,[e("div",uee,[T[4]||(T[4]=e("span",{class:"font-medium w-32"},"Name:",-1)),e("span",null,y(a.value.full_name||"Not provided"),1)]),e("div",cee,[T[5]||(T[5]=e("span",{class:"font-medium w-32"},"Email:",-1)),e("span",null,y(l.value||"Not provided"),1)]),e("div",pee,[T[6]||(T[6]=e("span",{class:"font-medium w-32"},"Role:",-1)),e("span",mee,y(d.value||"Devotee"),1)]),e("div",gee,[T[7]||(T[7]=e("span",{class:"font-medium w-32"},"Phone:",-1)),e("span",null,y(a.value.phone||"Not provided"),1)]),e("div",fee,[T[8]||(T[8]=e("span",{class:"font-medium w-32"},"Gender:",-1)),e("span",null,y(h(a.value.gender)),1)]),e("div",vee,[T[9]||(T[9]=e("span",{class:"font-medium w-32"},"Date of Birth:",-1)),e("span",null,y(g(a.value.dob)),1)])]),a.value.street_address||a.value.city?(m(),f("div",hee,[e("div",yee,[T[10]||(T[10]=e("span",{class:"font-medium w-32"},"Address:",-1)),e("div",null,[a.value.street_address?(m(),f("div",xee,y(a.value.street_address),1)):Y("",!0),e("div",null,y([a.value.city,a.value.state,a.value.pincode].filter(Boolean).join(", ")),1),a.value.country?(m(),f("div",bee,y(a.value.country),1)):Y("",!0)])])])):Y("",!0)]),c.value?(m(),f("div",wee,[T[17]||(T[17]=e("h2",{class:"text-xl font-semibold mb-4 border-b pb-2"},"Spiritual Information",-1)),e("div",kee,[a.value.gotra?(m(),f("div",_ee,[T[12]||(T[12]=e("span",{class:"font-medium w-32"},"Gotra:",-1)),e("span",null,y(a.value.gotra),1)])):Y("",!0),a.value.nakshatra?(m(),f("div",$ee,[T[13]||(T[13]=e("span",{class:"font-medium w-32"},"Nakshatra:",-1)),e("span",null,y(a.value.nakshatra),1)])):Y("",!0),a.value.rashi?(m(),f("div",See,[T[14]||(T[14]=e("span",{class:"font-medium w-32"},"Rashi:",-1)),e("span",null,y(a.value.rashi),1)])):Y("",!0),a.value.lagna?(m(),f("div",Dee,[T[15]||(T[15]=e("span",{class:"font-medium w-32"},"Lagna:",-1)),e("span",null,y(a.value.lagna),1)])):Y("",!0),a.value.veda_shaka?(m(),f("div",Cee,[T[16]||(T[16]=e("span",{class:"font-medium w-32"},"Veda Shaka:",-1)),e("span",null,y(a.value.veda_shaka),1)])):Y("",!0)])])):Y("",!0),u.value?(m(),f("div",Tee,[T[22]||(T[22]=e("h2",{class:"text-xl font-semibold mb-4 border-b pb-2"},"Family Information",-1)),e("div",Eee,[a.value.father_name?(m(),f("div",Aee,[T[18]||(T[18]=e("span",{class:"font-medium w-32"},"Father:",-1)),e("span",null,y(a.value.father_name),1)])):Y("",!0),a.value.mother_name?(m(),f("div",Iee,[T[19]||(T[19]=e("span",{class:"font-medium w-32"},"Mother:",-1)),e("span",null,y(a.value.mother_name),1)])):Y("",!0),a.value.spouse_name?(m(),f("div",Mee,[T[20]||(T[20]=e("span",{class:"font-medium w-32"},"Spouse:",-1)),e("span",null,y(a.value.spouse_name),1)])):Y("",!0),a.value.children&&a.value.children.length>0?(m(),f("div",Ree,[T[21]||(T[21]=e("span",{class:"font-medium w-32"},"Children:",-1)),e("span",null,y(a.value.children.length),1)])):Y("",!0)])])):Y("",!0),p.value.length>0?(m(),f("div",Pee,[T[23]||(T[23]=e("h2",{class:"text-xl font-semibold mb-4 border-b pb-2"},"Seva Preferences",-1)),e("div",jee,[(m(!0),f(he,null,ke(p.value,S=>(m(),f("span",{key:S,class:"px-3 py-1 bg-green-100 text-green-800 rounded-full text-sm"},y(D(S)),1))),128))])])):Y("",!0),e("div",Nee,[T[28]||(T[28]=e("h2",{class:"text-xl font-semibold mb-4 border-b pb-2"},"Account Information",-1)),e("div",Lee,[e("div",Bee,[T[24]||(T[24]=e("span",{class:"font-medium w-32"},"Member Since:",-1)),e("span",null,y(g(a.value.created_at)),1)]),e("div",Vee,[T[25]||(T[25]=e("span",{class:"font-medium w-32"},"Last Updated:",-1)),e("span",null,y(g(a.value.updated_at)),1)]),e("div",Uee,[T[26]||(T[26]=e("span",{class:"font-medium w-32"},"Profile ID:",-1)),e("span",Fee,y(a.value.id||"N/A"),1)]),T[27]||(T[27]=e("div",{class:"flex items-center"},[e("span",{class:"font-medium w-32"},"Status:"),e("span",{class:"px-2 py-1 bg-green-100 text-green-800 rounded-full text-sm"}," Active ")],-1))])]),v.value?(m(),f("div",Oee,[T[29]||(T[29]=$e('<div class="text-yellow-600 mb-4"><svg class="h-12 w-12 mx-auto" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path></svg></div><h3 class="text-lg font-medium text-yellow-800 mb-2">Complete Your Profile</h3><p class="text-yellow-700 mb-4"> Your profile is mostly empty. Complete it to get the most out of your temple experience. </p>',3)),e("button",{onClick:B,class:"px-4 py-2 bg-yellow-600 text-white rounded-lg hover:bg-yellow-700 transition-colors"}," Complete Profile ")])):Y("",!0)]))]))}},Hee={class:"settings-container"},qee={class:"p-4"},Gee={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},Wee={class:"mt-4"},Jee={class:"p-4"},Yee={class:"grid grid-cols-1 gap-4"},Kee={class:"mt-4"},Xee={class:"p-4"},Zee={class:"space-y-4"},Qee={class:"flex items-center justify-between"},ete={class:"relative inline-flex items-center cursor-pointer"},tte={class:"flex items-center justify-between"},ote={class:"relative inline-flex items-center cursor-pointer"},ste={class:"flex items-center justify-between"},nte={class:"relative inline-flex items-center cursor-pointer"},rte={class:"mt-4"},ate={__name:"SettingsView",setup(t){const{showToast:o}=je(),s=V({fullName:"",email:"",phone:"",language:"en"}),n=V({currentPassword:"",newPassword:"",confirmPassword:""}),r=V({email:!0,sms:!1,events:!0}),i=[{value:"en",label:"English"},{value:"hi",label:"Hindi"},{value:"ta",label:"Tamil"},{value:"te",label:"Telugu"},{value:"mr",label:"Marathi"}];Ee(async()=>{try{s.value={fullName:"Arjun Sharma",email:"arjun.sharma@example.com",phone:"+91 98765 43210",language:"en"}}catch{o("Error loading profile data","error")}});const a=async()=>{try{await new Promise(c=>setTimeout(c,1e3)),o("Profile updated successfully","success")}catch{o("Failed to update profile","error")}},l=async()=>{try{if(n.value.newPassword!==n.value.confirmPassword){o("New passwords do not match","error");return}await new Promise(c=>setTimeout(c,1e3)),n.value={currentPassword:"",newPassword:"",confirmPassword:""},o("Password changed successfully","success")}catch{o("Failed to change password","error")}},d=async()=>{try{await new Promise(c=>setTimeout(c,1e3)),o("Notification settings saved","success")}catch{o("Failed to save notification settings","error")}};return(c,u)=>(m(),f("div",Hee,[u[22]||(u[22]=e("h1",{class:"text-2xl font-bold mb-6"},"Account Settings",-1)),re(vt,{class:"mb-6"},{header:fe(()=>[...u[10]||(u[10]=[e("h2",{class:"text-xl font-semibold"},"Profile Information",-1)])]),default:fe(()=>[e("div",qee,[e("form",{onSubmit:Oe(a,["prevent"])},[e("div",Gee,[re(st,{modelValue:s.value.fullName,"onUpdate:modelValue":u[0]||(u[0]=p=>s.value.fullName=p),label:"Full Name",placeholder:"Enter your full name",required:""},null,8,["modelValue"]),re(st,{modelValue:s.value.email,"onUpdate:modelValue":u[1]||(u[1]=p=>s.value.email=p),label:"Email Address",type:"email",placeholder:"Enter your email",disabled:""},null,8,["modelValue"]),re(st,{modelValue:s.value.phone,"onUpdate:modelValue":u[2]||(u[2]=p=>s.value.phone=p),label:"Phone Number",placeholder:"Enter your phone number"},null,8,["modelValue"]),re(zn,{modelValue:s.value.language,"onUpdate:modelValue":u[3]||(u[3]=p=>s.value.language=p),label:"Preferred Language",options:i},null,8,["modelValue"])]),e("div",Wee,[re(lt,{type:"submit",variant:"primary"},{default:fe(()=>[...u[11]||(u[11]=[Q(" Save Changes ",-1)])]),_:1})])],32)])]),_:1}),re(vt,{class:"mb-6"},{header:fe(()=>[...u[12]||(u[12]=[e("h2",{class:"text-xl font-semibold"},"Change Password",-1)])]),default:fe(()=>[e("div",Jee,[e("form",{onSubmit:Oe(l,["prevent"])},[e("div",Yee,[re(st,{modelValue:n.value.currentPassword,"onUpdate:modelValue":u[4]||(u[4]=p=>n.value.currentPassword=p),label:"Current Password",type:"password",placeholder:"Enter your current password",required:""},null,8,["modelValue"]),re(st,{modelValue:n.value.newPassword,"onUpdate:modelValue":u[5]||(u[5]=p=>n.value.newPassword=p),label:"New Password",type:"password",placeholder:"Enter your new password",required:""},null,8,["modelValue"]),re(st,{modelValue:n.value.confirmPassword,"onUpdate:modelValue":u[6]||(u[6]=p=>n.value.confirmPassword=p),label:"Confirm New Password",type:"password",placeholder:"Confirm your new password",required:""},null,8,["modelValue"])]),e("div",Kee,[re(lt,{type:"submit",variant:"primary"},{default:fe(()=>[...u[13]||(u[13]=[Q(" Update Password ",-1)])]),_:1})])],32)])]),_:1}),re(vt,null,{header:fe(()=>[...u[14]||(u[14]=[e("h2",{class:"text-xl font-semibold"},"Notification Settings",-1)])]),default:fe(()=>[e("div",Xee,[e("div",Zee,[e("div",Qee,[u[16]||(u[16]=e("div",null,[e("h3",{class:"font-medium"},"Email Notifications"),e("p",{class:"text-gray-600 text-sm"},"Receive updates and alerts via email")],-1)),e("label",ete,[de(e("input",{type:"checkbox","onUpdate:modelValue":u[7]||(u[7]=p=>r.value.email=p),class:"sr-only peer"},null,512),[[ot,r.value.email]]),u[15]||(u[15]=e("div",{class:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-indigo-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-indigo-600"},null,-1))])]),e("div",tte,[u[18]||(u[18]=e("div",null,[e("h3",{class:"font-medium"},"SMS Notifications"),e("p",{class:"text-gray-600 text-sm"},"Receive important alerts via SMS")],-1)),e("label",ote,[de(e("input",{type:"checkbox","onUpdate:modelValue":u[8]||(u[8]=p=>r.value.sms=p),class:"sr-only peer"},null,512),[[ot,r.value.sms]]),u[17]||(u[17]=e("div",{class:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-indigo-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-indigo-600"},null,-1))])]),e("div",ste,[u[20]||(u[20]=e("div",null,[e("h3",{class:"font-medium"},"Event Reminders"),e("p",{class:"text-gray-600 text-sm"},"Receive reminders about upcoming events")],-1)),e("label",nte,[de(e("input",{type:"checkbox","onUpdate:modelValue":u[9]||(u[9]=p=>r.value.events=p),class:"sr-only peer"},null,512),[[ot,r.value.events]]),u[19]||(u[19]=e("div",{class:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-indigo-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-indigo-600"},null,-1))])])]),e("div",rte,[re(lt,{onClick:d,variant:"primary"},{default:fe(()=>[...u[21]||(u[21]=[Q(" Save Notification Settings ",-1)])]),_:1})])])]),_:1})]))}},ite=Qe(ate,[["__scopeId","data-v-ebdbc313"]]),lte={name:"SupportView",components:{BaseCard:vt,BaseButton:lt},setup(){const{showToast:t}=je(),o=Je([{question:"How do I reset my password?",answer:'You can reset your password by clicking on the "Forgot Password" link on the login page. You will receive an email with instructions to reset your password.',open:!1},{question:"How can I add a new temple to my account?",answer:'If you are a Temple Administrator, you can add a new temple by navigating to the "Manage Temples" section in your dashboard and clicking on the "Add Temple" button.',open:!1},{question:"How do I book a seva?",answer:'As a devotee, you can book a seva by selecting your temple, navigating to the "Sevas" section, choosing the seva you want to book, and following the booking process.',open:!1},{question:"How do I make a donation?",answer:'You can make a donation by selecting your temple, navigating to the "Donations" section, choosing the donation type, and following the payment process.',open:!1},{question:"How can I volunteer for temple activities?",answer:'You can volunteer by selecting your temple, navigating to the "Volunteer" section, and registering as a volunteer. Temple administrators will review your application.',open:!1}]);return{faqs:o,toggleFaq:n=>{o[n].open=!o[n].open}}}},dte={class:"support-container"},ute={class:"p-4"},cte=["onClick"],pte={key:0,class:"mt-2 text-gray-600 transition-all"};function mte(t,o,s,n,r,i){const a=He("BaseCard");return m(),f("div",dte,[re(a,{class:"mb-8"},{header:fe(()=>[...o[0]||(o[0]=[e("h1",{class:"text-2xl font-bold text-indigo-800"},"Support Center",-1)])]),default:fe(()=>[e("div",ute,[o[3]||(o[3]=e("p",{class:"mb-4 text-gray-700"},"Welcome to the Temple SaaS Support Center. We're here to help you with any questions or issues you may have.",-1)),o[4]||(o[4]=e("div",{class:"bg-indigo-50 p-4 rounded-lg mb-6"},[e("h2",{class:"text-lg font-semibold text-indigo-700 mb-2"},"Contact Support"),e("p",{class:"mb-4"},"Our support team is available Monday-Friday, 9am-5pm IST"),e("div",{class:"flex items-center mb-2"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-indigo-600 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})]),e("span",null,"support@templesaas.com")]),e("div",{class:"flex items-center"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-indigo-600 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"})]),e("span",null,"+91 8000 123456")])],-1)),e("div",null,[o[2]||(o[2]=e("h2",{class:"text-lg font-semibold text-indigo-700 mb-4"},"Frequently Asked Questions",-1)),(m(!0),f(he,null,ke(n.faqs,(l,d)=>(m(),f("div",{key:d,class:"mb-4 border-b border-gray-200 pb-4"},[e("h3",{onClick:c=>n.toggleFaq(d),class:"flex justify-between items-center text-md font-medium text-gray-800 cursor-pointer hover:text-indigo-600"},[Q(y(l.question)+" ",1),(m(),f("svg",{xmlns:"http://www.w3.org/2000/svg",class:ie(["h-5 w-5 transform transition-transform",l.open?"rotate-180":""]),fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[...o[1]||(o[1]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"},null,-1)])],2))],8,cte),l.open?(m(),f("div",pte,y(l.answer),1)):Y("",!0)]))),128))])])]),_:1})])}const gte=Qe(lte,[["render",mte],["__scopeId","data-v-1181c3cb"]]),fte={class:"min-h-screen bg-gradient-to-br from-indigo-50 via-white to-indigo-100 flex items-center justify-center px-4 sm:px-6 lg:px-8"},vte={__name:"NotFound",setup(t){const o=Ke(),s=()=>{o.push("/")},n=()=>{window.history.length>1?o.go(-1):o.push("/")};return(r,i)=>(m(),f("div",fte,[e("div",{class:"max-w-md w-full space-y-8 text-center"},[i[2]||(i[2]=$e('<div class="relative" data-v-2f879d05><div class="absolute inset-0 bg-indigo-200 rounded-full opacity-20 animate-pulse" data-v-2f879d05></div><div class="relative bg-white rounded-full p-8 shadow-lg border border-indigo-100" data-v-2f879d05><div class="flex items-center justify-center" data-v-2f879d05><svg class="w-24 h-24 text-indigo-600 animate-bounce" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-2f879d05><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4" data-v-2f879d05></path></svg></div></div></div><div class="space-y-2" data-v-2f879d05><h1 class="text-8xl font-black text-indigo-600 tracking-tight" data-v-2f879d05> 404 </h1><div class="h-1 w-32 bg-gradient-to-r from-indigo-500 to-indigo-700 rounded-full mx-auto" data-v-2f879d05></div></div><div class="space-y-4" data-v-2f879d05><h2 class="text-2xl font-bold text-gray-900 sm:text-3xl" data-v-2f879d05> Page Not Found </h2><p class="text-gray-600 text-lg leading-relaxed" data-v-2f879d05> The page you&#39;re looking for doesn&#39;t exist or has been moved. Let&#39;s get you back to your spiritual journey. </p></div>',3)),e("div",{class:"space-y-4 pt-6"},[e("button",{onClick:s,class:"w-full flex items-center justify-center px-8 py-3 border border-transparent text-base font-medium rounded-xl text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 transform transition-all duration-200 hover:scale-105 shadow-lg hover:shadow-xl"},[...i[0]||(i[0]=[e("svg",{class:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})],-1),Q(" Go to Home ",-1)])]),e("button",{onClick:n,class:"w-full flex items-center justify-center px-8 py-3 border-2 border-indigo-200 text-base font-medium rounded-xl text-indigo-700 bg-white hover:bg-indigo-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 transform transition-all duration-200 hover:scale-105"},[...i[1]||(i[1]=[e("svg",{class:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 19l-7-7m0 0l7-7m-7 7h18"})],-1),Q(" Go Back ",-1)])])]),i[3]||(i[3]=$e('<div class="pt-8 border-t border-indigo-100" data-v-2f879d05><p class="text-sm text-gray-500" data-v-2f879d05> Still having trouble? <a href="#" class="font-medium text-indigo-600 hover:text-indigo-500 transition-colors duration-200" data-v-2f879d05> Contact support </a></p></div><div class="absolute top-0 left-0 w-full h-full overflow-hidden pointer-events-none" data-v-2f879d05><div class="absolute top-20 left-10 w-4 h-4 bg-indigo-300 rounded-full opacity-20 animate-pulse" data-v-2f879d05></div><div class="absolute top-40 right-16 w-6 h-6 bg-indigo-400 rounded-full opacity-15 animate-pulse" style="animation-delay:1s;" data-v-2f879d05></div><div class="absolute bottom-32 left-20 w-3 h-3 bg-indigo-500 rounded-full opacity-25 animate-pulse" style="animation-delay:2s;" data-v-2f879d05></div><div class="absolute bottom-20 right-8 w-5 h-5 bg-indigo-300 rounded-full opacity-20 animate-pulse" style="animation-delay:0.5s;" data-v-2f879d05></div></div>',2))])]))}},hte=Qe(vte,[["__scopeId","data-v-2f879d05"]]),yte={class:"min-h-screen bg-gradient-to-br from-indigo-50 via-white to-indigo-100 flex items-center justify-center px-4 sm:px-6 lg:px-8"},xte={class:"max-w-md w-full space-y-8 text-center"},bte={class:"pt-8 border-t border-gray-200"},wte={class:"bg-indigo-50 rounded-xl p-6 shadow-sm"},kte={class:"bg-white rounded-lg p-3 text-left"},_te={class:"text-xs text-gray-600 space-y-1 font-mono"},$te={__name:"Unauthorized",setup(t){const o=Ke(),s=Ze(),n=V(""),r=V("");Ee(()=>{n.value=new Date().toLocaleString(),r.value=s.fullPath});const i=()=>{window.history.length>1?o.go(-1):o.push("/")},a=()=>{o.push("/login")},l=()=>{o.push("/")};return(d,c)=>(m(),f("div",yte,[e("div",xte,[c[7]||(c[7]=$e('<div class="mx-auto flex items-center justify-center h-32 w-32 rounded-full bg-gradient-to-br from-red-100 to-red-200 shadow-lg" data-v-71220cdd><svg class="h-16 w-16 text-red-600" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2" data-v-71220cdd><path stroke-linecap="round" stroke-linejoin="round" d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z" data-v-71220cdd></path></svg></div><div class="space-y-2" data-v-71220cdd><h1 class="text-8xl font-bold text-indigo-600 tracking-tight" data-v-71220cdd> 401 </h1><div class="h-1 w-20 bg-gradient-to-r from-indigo-500 to-indigo-700 mx-auto rounded-full" data-v-71220cdd></div></div><div class="space-y-4" data-v-71220cdd><h2 class="text-3xl font-bold text-gray-900 font-roboto" data-v-71220cdd> Access Denied </h2><p class="text-lg text-gray-600 leading-relaxed font-sans" data-v-71220cdd> Sorry, you don&#39;t have permission to access this page. Please contact your administrator or try logging in with appropriate credentials. </p></div>',3)),e("div",{class:"space-y-4 pt-6"},[e("div",{class:"flex flex-col sm:flex-row gap-4 justify-center"},[e("button",{onClick:i,class:"inline-flex items-center justify-center px-6 py-3 border border-transparent text-base font-medium rounded-xl text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 transition-all duration-200 shadow-md hover:shadow-lg transform hover:-translate-y-0.5"},[...c[0]||(c[0]=[e("svg",{class:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 19l-7-7m0 0l7-7m-7 7h18"})],-1),Q(" Go Back ",-1)])]),e("button",{onClick:a,class:"inline-flex items-center justify-center px-6 py-3 border-2 border-indigo-600 text-base font-medium rounded-xl text-indigo-600 bg-white hover:bg-indigo-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 transition-all duration-200 shadow-md hover:shadow-lg transform hover:-translate-y-0.5"},[...c[1]||(c[1]=[e("svg",{class:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 16l-4-4m0 0l4-4m-4 4h14m-5 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h7a3 3 0 013 3v1"})],-1),Q(" Login ",-1)])])]),e("div",{class:"pt-4"},[e("button",{onClick:l,class:"text-indigo-600 hover:text-indigo-800 font-medium transition-colors duration-200 underline decoration-2 underline-offset-4 hover:decoration-indigo-800"}," Return to Homepage ")])]),e("div",bte,[e("div",wte,[c[5]||(c[5]=e("h3",{class:"text-lg font-semibold text-indigo-900 mb-2 font-roboto"}," Need Help? ",-1)),c[6]||(c[6]=e("p",{class:"text-indigo-700 text-sm mb-4 font-sans"}," If you believe this is an error, please contact support with the following details: ",-1)),e("div",kte,[e("div",_te,[c[4]||(c[4]=e("div",null,[e("span",{class:"font-semibold"},"Error Code:"),Q(" 401")],-1)),e("div",null,[c[2]||(c[2]=e("span",{class:"font-semibold"},"Timestamp:",-1)),Q(" "+y(n.value),1)]),e("div",null,[c[3]||(c[3]=e("span",{class:"font-semibold"},"Page:",-1)),Q(" "+y(r.value),1)])])])])])])]))}},Ste=Qe($te,[["__scopeId","data-v-71220cdd"]]),Dte={class:"min-h-screen bg-gradient-to-br from-indigo-50 via-white to-indigo-100 flex items-center justify-center px-4 sm:px-6 lg:px-8"},Cte={class:"max-w-lg w-full text-center"},Tte={class:"bg-white rounded-2xl shadow-lg p-8 sm:p-10 border border-gray-100"},Ete={class:"space-y-4 sm:space-y-0 sm:space-x-4 sm:flex sm:justify-center"},Ate=["disabled"],Ite={key:0,class:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},Mte={key:1,class:"mr-2 h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},Rte={class:"mt-8 text-gray-400 text-sm"},Pte={__name:"ServerError",setup(t){const o=Ke(),s=V(!1),n=V("");Ee(()=>{n.value=Math.random().toString(36).substr(2,9).toUpperCase()});const r=async()=>{s.value=!0;try{await new Promise(a=>setTimeout(a,2e3)),window.location.reload()}catch(a){console.error("Retry failed:",a)}finally{s.value=!1}},i=()=>{o.push("/")};return(a,l)=>(m(),f("div",Dte,[e("div",Cte,[l[5]||(l[5]=e("div",{class:"mb-8"},[e("div",{class:"mx-auto flex items-center justify-center h-24 w-24 rounded-full bg-red-100 shadow-lg"},[e("svg",{class:"h-12 w-12 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})])])],-1)),e("div",Tte,[l[3]||(l[3]=$e('<div class="mb-6" data-v-00a572bd><h1 class="text-6xl sm:text-7xl font-bold text-indigo-600 mb-2" data-v-00a572bd> 500 </h1><div class="h-1 w-20 bg-gradient-to-r from-indigo-500 to-indigo-700 mx-auto rounded-full" data-v-00a572bd></div></div><h2 class="text-2xl sm:text-3xl font-bold text-gray-900 mb-4" style="font-family:&#39;Roboto&#39;, sans-serif;" data-v-00a572bd> Server Error </h2><p class="text-gray-600 text-lg mb-6 leading-relaxed" style="font-family:sans-serif;" data-v-00a572bd> Oops! Something went wrong on our end. Our technical team has been notified and is working to resolve this issue. </p><div class="bg-indigo-50 rounded-xl p-4 mb-8 border border-indigo-100" data-v-00a572bd><p class="text-indigo-800 text-sm font-medium mb-2" data-v-00a572bd> What happened? </p><p class="text-indigo-700 text-sm leading-relaxed" data-v-00a572bd> The server encountered an unexpected condition that prevented it from fulfilling your request. This is typically a temporary issue. </p></div>',4)),e("div",Ete,[e("button",{onClick:r,disabled:s.value,class:"w-full sm:w-auto inline-flex items-center justify-center px-6 py-3 bg-indigo-600 text-white font-semibold rounded-xl shadow-md hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 transform hover:scale-105"},[s.value?(m(),f("svg",Ite,[...l[0]||(l[0]=[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)])])):(m(),f("svg",Mte,[...l[1]||(l[1]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"},null,-1)])])),Q(" "+y(s.value?"Retrying...":"Try Again"),1)],8,Ate),e("button",{onClick:i,class:"w-full sm:w-auto inline-flex items-center justify-center px-6 py-3 bg-white text-indigo-600 font-semibold rounded-xl border-2 border-indigo-600 hover:bg-indigo-50 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 transition-all duration-200 transform hover:scale-105"},[...l[2]||(l[2]=[e("svg",{class:"mr-2 h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})],-1),Q(" Go Home ",-1)])])]),l[4]||(l[4]=$e('<div class="mt-8 pt-6 border-t border-gray-200" data-v-00a572bd><p class="text-gray-500 text-sm mb-3" data-v-00a572bd> Need immediate assistance? </p><div class="flex flex-col sm:flex-row items-center justify-center space-y-2 sm:space-y-0 sm:space-x-6" data-v-00a572bd><a href="mailto:support@templesaas.com" class="inline-flex items-center text-indigo-600 hover:text-indigo-800 text-sm font-medium transition-colors duration-200" data-v-00a572bd><svg class="mr-2 h-4 w-4" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-00a572bd><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z" data-v-00a572bd></path></svg> Email Support </a><a href="tel:+1234567890" class="inline-flex items-center text-indigo-600 hover:text-indigo-800 text-sm font-medium transition-colors duration-200" data-v-00a572bd><svg class="mr-2 h-4 w-4" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-v-00a572bd><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z" data-v-00a572bd></path></svg> Call Support </a></div></div>',1))]),e("p",Rte," Error ID: "+y(n.value)+"  "+y(new Date().toLocaleString()),1)])]))}},jte=Qe(Pte,[["__scopeId","data-v-00a572bd"]]),Nte=[{path:"/",component:dp,children:[{path:"",name:"Landing",component:p7,meta:{title:"Temple Management SaaS - Manage Your Temple Digitally",description:"Manage your temple, devotees, sevas & donations with ease"}},{path:"/terms",name:"Terms",component:S7,meta:{title:"Terms of Service"}},{path:"/privacy",name:"Privacy",component:H7,meta:{title:"Privacy Policy"}}]},{path:"/login",name:"Login",component:d8,meta:{title:"Login",layout:"AuthLayout"}},{path:"/register",name:"Register",component:gS,meta:{title:"Register",layout:"AuthLayout"}},{path:"/forgot-password",name:"ForgotPassword",component:_S,meta:{title:"Forgot Password",layout:"AuthLayout"}},{path:"/auth-pages/reset-password",name:"BackendResetPassword",component:Tu,props:t=>({token:t.query.token}),meta:{title:"Reset Password",layout:"AuthLayout",requiresAuth:!1}},{path:"/debug-reset",name:"DebugReset",component:Tu,meta:{title:"Debug Reset Password",layout:"AuthLayout",requiresAuth:!1}},{path:"/notifications",name:"Notifications",component:eee,meta:{requiresAuth:!0,title:"Notifications",breadcrumb:"Notifications",layout:"DashboardLayout"}},{path:"/profile",name:"Profile",component:zee,meta:{requiresAuth:!0,title:"My Profile",breadcrumb:"My Profile",layout:"DashboardLayout"}},{path:"/settings",name:"Settings",component:ite,meta:{requiresAuth:!0,title:"Account Settings",breadcrumb:"Settings",layout:"DashboardLayout"}},{path:"/support",name:"Support",component:gte,meta:{requiresAuth:!0,title:"Support Center",breadcrumb:"Support",layout:"DashboardLayout"}},{path:"/tenant-selection",name:"TenantSelection",component:zk,meta:{requiresAuth:!0,allowedRoles:["superadmin","super_admin","standard_user","standarduser","monitoring_user","monitoringuser"],title:"Temple Selection",layout:"DashboardLayout"}},{path:"/tenant",component:Ao,meta:{requiresAuth:!0,allowedRoles:["tenant","templeadmin"]},children:[{path:"dashboard",name:"TenantDashboard",component:Er,meta:{title:"Tenant Dashboard",breadcrumb:"Dashboard"}},{path:"user-management",name:"TenantUserManagement",component:()=>ft(()=>import("./UserManagement-CFnMDz-D.js"),__vite__mapDeps([13,14])),meta:{title:"Tenant User Management",breadcrumb:"User Management",requiresAuth:!0,allowedRoles:["tenant","templeadmin"]}},{path:"entities/create",name:"CreateTemple",component:Sy,meta:{title:"Create Temple",breadcrumb:"Create Temple"}},{path:"entities/:id",name:"TempleDetails",component:jx,props:!0,meta:{title:"Temple Details",breadcrumb:"Temple Details"}},{path:"entities/:id/edit",name:"EditTemple",component:r4,props:!0,meta:{title:"Edit Temple",breadcrumb:"Edit Temple"}},{path:":tenantId/dashboard",name:"TenantSpecificDashboard",component:Er,props:!0,meta:{title:"Tenant Dashboard",breadcrumb:"Dashboard"}},{path:"reports/temple-register",name:"TempleRegisterReport",component:u5,meta:{title:"Temple Register Report",breadcrumb:"Temple Register",requiresAuth:!0,allowedRoles:["tenant","templeadmin"]}},{path:"reports/temple-activities",name:"TempleActivitiesReport",component:w3,meta:{title:"Temple Activities Report",breadcrumb:"Temple Activities",requiresAuth:!0,allowedRoles:["tenant","templeadmin"]}},{path:"reports/birthdays",name:"BirthdaysReport",component:tk,meta:{title:"Birthdays Report",breadcrumb:"Birthdays",requiresAuth:!0,allowedRoles:["tenant","templeadmin"]}},{path:"reports/audit-logs",name:"AuditLogsReport",component:A9,meta:{title:"Audit Logs Report",breadcrumb:"Audit Logs",requiresAuth:!0,allowedRoles:["tenant","templeadmin"]}}]},{path:"/tenant/:tenantId/dashboard",name:"TenantDirectDashboard",component:Er,props:!0,meta:{requiresAuth:!0,allowedRoles:["tenant","templeadmin"],title:"Tenant Dashboard",breadcrumb:"Dashboard",layout:"DashboardLayout"}},{path:"/entity/:id",component:Ao,props:!0,meta:{requiresAuth:!0,allowedRoles:["tenant","entity_admin","templeadmin","standard_user","standarduser","monitoring_user","monitoringuser"]},children:[{path:"/entity/:id/dashboard",name:"EntityDirectDashboard",component:()=>ft(()=>Promise.resolve().then(()=>GD),void 0),meta:{title:"Entity Dashboard",requiresAuth:!0,allowedRoles:["tenant","entity_admin","templeadmin","standard_user","standarduser","monitoring_user","monitoringuser"]}},{path:"dashboard",name:"EntityDashboard",component:cp,props:!0,meta:{title:"Temple Dashboard",breadcrumb:"Dashboard",allowedRoles:["tenant","entity_admin","templeadmin","standard_user","standarduser","monitoring_user","monitoringuser"]}},{path:"devotees",name:"DevoteeManagement",component:QT,props:!0,meta:{title:"Devotee Management",breadcrumb:"Devotees",allowedRoles:["tenant","entity_admin","templeadmin","standard_user","standarduser","monitoring_user","monitoringuser"]}},{path:"sevas",name:"SevaManagement",component:BI,props:!0,meta:{title:"Seva Management",breadcrumb:"Sevas",allowedRoles:["tenant","entity_admin","templeadmin","standard_user","standarduser"]}},{path:"donations",name:"DonationManagement",component:KP,props:!0,meta:{title:"Donation Management",breadcrumb:"Donations",allowedRoles:["tenant","entity_admin","templeadmin","standard_user","standarduser"]}},{path:"events",name:"EventManagement",component:TN,props:!0,meta:{title:"Event Management",breadcrumb:"Events",allowedRoles:["tenant","entity_admin","templeadmin","standard_user","standarduser"]}},{path:"communication",name:"CommunicationCenter",component:sU,props:!0,meta:{title:"Communication Center",breadcrumb:"Communication",allowedRoles:["tenant","entity_admin","templeadmin","standard_user","standarduser"]}},{path:"message",name:"MessageComposer",component:op,props:!0,meta:{title:"Compose Message",breadcrumb:"Message Composer",allowedRoles:["tenant","entity_admin","templeadmin","standard_user","standarduser"]}},{path:"volunteers",name:"VolunteerManagement",component:PF,props:!0,meta:{title:"Volunteer Management",breadcrumb:"Volunteers",allowedRoles:["tenant","entity_admin","templeadmin","standard_user","standarduser"]}}]},{path:"/devotee",component:Ao,meta:{requiresAuth:!0,allowedRoles:["devotee"]},children:[{path:"temple-selection",name:"DevoteeTempleSelection",component:uO,meta:{title:"Select Temple",breadcrumb:"Temple Selection"}},{path:"profile/create",name:"DevoteeProfileCreation",component:Ru,meta:{title:"Complete Profile",breadcrumb:"Profile Creation"}},{path:"profile/edit",name:"DevoteeProfileEdit",component:Pu,meta:{title:"Edit Profile",breadcrumb:"Edit Profile",role:"devotee"}}]},{path:"/entity/:id/devotee",component:Ao,props:!0,meta:{requiresAuth:!0,allowedRoles:["devotee"]},children:[{path:"profile/create",name:"DevoteeEntityProfileCreation",component:Ru,props:!0,meta:{title:"Complete Profile",breadcrumb:"Profile Creation"}},{path:"dashboard",name:"DevoteeDashboard",component:HG,props:!0,meta:{title:"My Dashboard",breadcrumb:"Dashboard"}},{path:"profile/edit",name:"DevoteeProfileEdit",component:Pu,props:!0,meta:{title:"Edit Profile",breadcrumb:"Edit Profile"}},{path:"seva-booking",name:"SevaBooking",component:kW,props:!0,meta:{title:"Book Seva",breadcrumb:"Seva Booking"}},{path:"donations",name:"DevoteeDonationHistory",component:nJ,props:!0,meta:{title:"My Donations",breadcrumb:"Donation History"}},{path:"events",name:"DevoteeMyEvents",component:OJ,props:!0,meta:{title:"Temple Events",breadcrumb:"My Events"}},{path:"my-seva-bookings",name:"DevoteeMySevaBookings",component:()=>ft(()=>import("./MySevaBookings-BSIwY95C.js"),[]),props:!0,meta:{title:"My Seva Bookings",breadcrumb:"My Seva Bookings"}}]},{path:"/volunteer",component:Ao,meta:{requiresAuth:!0,allowedRoles:["volunteer"]},children:[{path:"temple-selection",name:"VolunteerTempleSelection",component:QY,meta:{title:"Select Temple",breadcrumb:"Temple Selection"}}]},{path:"/entity/:id/volunteer",component:Ao,props:!0,meta:{requiresAuth:!0,allowedRoles:["volunteer"]},children:[{path:"dashboard",name:"VolunteerDashboard",component:rX,props:!0,meta:{title:"Volunteer Dashboard",breadcrumb:"Dashboard"}},{path:"assignments",name:"MyAssignments",component:_Z,props:!0,meta:{title:"My Assignments",breadcrumb:"Assignments"}},{path:"schedule",name:"MySchedule",component:kQ,props:!0,meta:{title:"My Schedule",breadcrumb:"Schedule"}}]},{path:"/superadmin",component:Ao,meta:{requiresAuth:!0,allowedRoles:["superadmin","super_admin"]},children:H1},{path:"/temple-selection",redirect:t=>"/devotee/temple-selection"},{path:"/unauthorized",name:"Unauthorized",component:Ste,meta:{title:"Access Denied"}},{path:"/server-error",name:"ServerError",component:jte,meta:{title:"Server Error"}},{path:"/:pathMatch(.*)*",name:"NotFound",component:hte,meta:{title:"Page Not Found"}}],Zs=ev({history:Ef(),routes:Nte,scrollBehavior(t,o,s){return s||{top:0}}});Zs.beforeEach((t,o,s)=>{if(t.meta.title&&(document.title=t.meta.title),console.log(" Route navigation:",{to:t.path,name:t.name,requiresAuth:t.meta.requiresAuth,allowedRoles:t.meta.allowedRoles}),t.meta.requiresAuth)return z1(t,o,s);s()});Zs.beforeEach((t,o,s)=>{const n=tt();if(!n.isAuthenticated||!n.user){s();return}const r=(n.user.role||"").toLowerCase().trim();if(console.log(" SPECIAL ROLE CHECK:",{userRole:r,currentPath:t.path,needsTenantSelection:n.needsTenantSelection}),n.needsTenantSelection&&t.path!=="/tenant-selection"){console.log(" REDIRECTING special user to tenant selection"),s("/tenant-selection");return}s()});const tt=Vo("auth",()=>{const t=localStorage.getItem("user_data"),o=V(t&&t!=="undefined"?JSON.parse(t):null),s=V(localStorage.getItem("auth_token")||null),n=V(!1),r=V(null),i=V(localStorage.getItem("current_tenant_id")||null),a=V(localStorage.getItem("assigned_tenant_id")||null),l=te(()=>!!s.value&&!!o.value),d=te(()=>{if(!o.value)return null;if(typeof o.value.role=="string"){const P=o.value.role.toLowerCase().trim();return P==="monitoringuser"||P==="monitoring_user"?"monitoring_user":P==="standarduser"||P==="standard_user"?"standard_user":P==="superadmin"||P==="super_admin"?"superadmin":P==="templeadmin"||P==="tenant"?"templeadmin":P}const z={1:"superadmin",2:"templeadmin",3:"devotee",4:"volunteer",5:"standard_user",6:"monitoring_user"},I=o.value.roleId?z[o.value.roleId]:null;return console.log(" Role mapping:",{roleId:o.value.roleId,mappedRole:I,userObject:o.value}),I}),c=z=>{try{const P=z.split(".")[1].replace(/-/g,"+").replace(/_/g,"/"),W=decodeURIComponent(atob(P).split("").map(function(we){return"%"+("00"+we.charCodeAt(0).toString(16)).slice(-2)}).join(""));return JSON.parse(W)}catch(I){return console.error("Error parsing JWT token:",I),{}}},u=z=>{var W,we,me,De;const I=(z||"").toLowerCase().trim();if(console.log(" Getting dashboard path for role:",I),I==="standard_user"||I==="standarduser"||I==="monitoring_user"||I==="monitoringuser")return a.value?(console.log(` ${I} redirecting to assigned tenant: ${a.value}`),`/tenant/${a.value}/dashboard`):(console.log(` ${I} with no assigned tenant -> tenant selection`),"/tenant-selection");if(I==="superadmin"||I==="super_admin")return console.log(" Super admin -> /superadmin/dashboard"),"/superadmin/dashboard";const P=((W=o.value)==null?void 0:W.entityId)||((me=(we=o.value)==null?void 0:we.current_entity)==null?void 0:me.id);if(I==="templeadmin"||I==="tenant"){const ge=((De=o.value)==null?void 0:De.id)||i.value;return ge?`/tenant/${ge}/dashboard`:"/tenant/dashboard"}else{if(I==="devotee")return"/devotee/temple-selection";if(I==="volunteer")return P?`/entity/${P}/volunteer/dashboard`:"/volunteer/temple-selection"}return console.log(" Unknown role, defaulting to home"),"/"},p=te(()=>o.value?u(d.value):"/login"),v=te(()=>{var I;const z=((I=d.value)==null?void 0:I.toLowerCase())||"";return z==="tenant"||z==="templeadmin"}),g=te(()=>{var I;return(((I=d.value)==null?void 0:I.toLowerCase())||"")==="devotee"}),h=te(()=>{var I;return(((I=d.value)==null?void 0:I.toLowerCase())||"")==="volunteer"}),D=te(()=>{var I;const z=((I=d.value)==null?void 0:I.toLowerCase())||"";return z==="superadmin"||z==="super_admin"}),C=te(()=>{var I;const z=((I=d.value)==null?void 0:I.toLowerCase())||"";return z==="standard_user"||z==="standarduser"}),B=te(()=>{var I;const z=((I=d.value)==null?void 0:I.toLowerCase())||"";return z==="monitoring_user"||z==="monitoringuser"}),_=te(()=>g.value||h.value),T=te(()=>{var I;const z=((I=d.value)==null?void 0:I.toLowerCase())||"";return(z==="standard_user"||z==="standarduser"||z==="monitoring_user"||z==="monitoringuser")&&!a.value}),S=async()=>{if(!s.value)return!1;try{return console.log("Refreshing auth token..."),ce.defaults.headers.common.Authorization=`Bearer ${s.value}`,localStorage.setItem("token_last_refreshed",new Date().getTime()),localStorage.setItem("auth_token",s.value),!0}catch(z){return console.error("Token refresh failed:",z),!1}},k=()=>{const z=localStorage.getItem("auth_token");if(z){l.value=!0;const I=localStorage.getItem("user_id"),P=localStorage.getItem("user_role");return!o.value&&I&&(o.value={id:I,role:P||"unknown"}),axios.defaults.headers.common.Authorization=`Bearer ${z}`,console.log("Auth check: Authenticated with token"),!0}else return l.value=!1,o.value=null,console.log("Auth check: Not authenticated (no token)"),!1},b=te(()=>{var z,I,P;return(I=(z=o.value)==null?void 0:z.role)!=null&&I.roleName?o.value.role.roleName.toLowerCase():(P=o.value)!=null&&P.role?o.value.role.toLowerCase():d.value?d.value.toLowerCase():""}),x=z=>{if(!l.value)return!1;const I=b.value;return I?I===z.toLowerCase()||I===z.toLowerCase().replace("_",""):!1},F=()=>{console.log("Clearing all browser storage"),localStorage.clear(),sessionStorage.clear(),document.cookie.split(";").forEach(function(z){document.cookie=z.replace(/^ +/,"").replace(/=.*/,"=;expires="+new Date().toUTCString()+";path=/")}),console.log("All storage cleared")},E=()=>{console.log("Resetting all application state"),F(),delete ce.defaults.headers.common.Authorization,delete ce.defaults.headers.common["X-Tenant-ID"],console.log("Application state reset complete")},O=async()=>{try{if(s.value)try{await ce.post("/auth/logout")}catch(z){console.warn("Logout endpoint error:",z)}}catch(z){console.error("Logout error:",z)}finally{E(),o.value=null,s.value=null,i.value=null,a.value=null,window.location.href=window.location.origin+"/login"}},N=async()=>{console.log("Initializing auth store...");const z=localStorage.getItem("auth_token");if(z){s.value=z;try{const P=c(z);P.assigned_tenant_id&&(a.value=P.assigned_tenant_id,localStorage.setItem("assigned_tenant_id",P.assigned_tenant_id),console.log(" Found assigned tenant ID in token:",P.assigned_tenant_id),ce.defaults.headers.common["X-Tenant-ID"]=P.assigned_tenant_id,console.log(" Set X-Tenant-ID header from token:",P.assigned_tenant_id))}catch(P){console.error("Failed to parse token for assigned tenant ID:",P)}const I=localStorage.getItem("user_data");if(I&&I!=="undefined")try{if(o.value=JSON.parse(I),ce.defaults.headers.common.Authorization=`Bearer ${s.value}`,console.log("Auth initialized with stored user:",o.value),console.log("User role computed as:",d.value),console.log("Set Authorization header with token"),localStorage.setItem("token_last_refreshed",new Date().getTime()),!a.value){const P=localStorage.getItem("current_tenant_id");P&&(ce.defaults.headers.common["X-Tenant-ID"]=P,i.value=P,console.log("Set X-Tenant-ID header from localStorage:",P))}return!0}catch(P){return console.error("Failed to parse stored user_data:",P),!1}else return console.warn("Token exists but no valid user data found"),!1}return!1};return{user:o,token:s,loading:n,error:r,currentTenantId:i,assignedTenantId:a,normalizedRole:b,hasRole:x,checkAuth:k,isAuthenticated:l,userRole:d,isTenant:v,isDevotee:g,isVolunteer:h,isSuperAdmin:D,isStandardUser:C,isMonitoringUser:B,isEndUser:_,dashboardRoute:p,needsTenantSelection:T,initialize:N,login:async z=>{var I,P,W,we;n.value=!0,r.value=null;try{console.log(" Starting login request"),E(),console.log(" Performing backend login");const me=await ce.post("/auth/login",z);console.log(" Login response received:",me.data);const De=me.data,ge=De.accessToken||De.token||De.access_token||De.jwt,ue=De.user||De.userData||De;if(!ge)throw new Error("No authentication token received from server");console.log(" Raw user data from backend:",ue),s.value=ge,o.value=ue,localStorage.setItem("auth_token",ge),localStorage.setItem("user_data",JSON.stringify(ue));try{const w=c(ge);console.log(" Token payload:",w),w.assigned_tenant_id&&(a.value=w.assigned_tenant_id,localStorage.setItem("assigned_tenant_id",w.assigned_tenant_id),console.log(" Found assigned tenant ID in token:",w.assigned_tenant_id),ce.defaults.headers.common["X-Tenant-ID"]=w.assigned_tenant_id,console.log(" Set X-Tenant-ID header from token:",w.assigned_tenant_id))}catch(w){console.error("Failed to parse token for assigned tenant ID:",w)}if(console.log(" Computed user role after login:",d.value),console.log(" Role computed from roleId:",ue.roleId),localStorage.setItem("token_last_refreshed",new Date().getTime()),ce.defaults.headers.common.Authorization=`Bearer ${ge}`,console.log(" Set Authorization header with token"),!a.value&&(ue.roleId===2||ue.role==="templeadmin"||ue.role==="tenant")){const w=ue.id;i.value=w,localStorage.setItem("current_tenant_id",w),ce.defaults.headers.common["X-Tenant-ID"]=w,console.log(" Set X-Tenant-ID header from user data:",w)}const $=u(d.value);return console.log(" Login successful, redirecting to:",$),console.log(" User role:",d.value),console.log(" Full user object:",ue),{success:!0,user:ue,redirectPath:$}}catch(me){return console.error(" Login error:",me),r.value=((P=(I=me.response)==null?void 0:I.data)==null?void 0:P.message)||((we=(W=me.response)==null?void 0:W.data)==null?void 0:we.error)||me.message||"Login failed",{success:!1,error:r.value}}finally{n.value=!1,console.log(" Login process completed, loading set to false")}},logout:O,register:async z=>{var I,P;n.value=!0,r.value=null;try{const we=(await ce.post("/v1/auth/register",z)).data,me=z.role==="templeadmin"?"/auth/pending-approval":z.role==="devotee"?"/devotee/temple-selection":"/volunteer/temple-selection";return{success:!0,message:we.message||"Registration successful!",redirectPath:me}}catch(W){return console.error("Registration failed:",W),r.value=((P=(I=W.response)==null?void 0:I.data)==null?void 0:P.message)||W.message||"Registration failed",{success:!1,error:r.value}}finally{n.value=!1}},joinTemple:async z=>{var I,P;n.value=!0,r.value=null;try{const W=g.value?"/v1/devotee/join-temple":"/v1/volunteer/join-temple",me=(await ce.post(W,{templeId:z})).data,De=me.temple||me.entity||me,ge={...o.value,entityId:z,current_entity:De};return o.value=ge,localStorage.setItem("user_data",JSON.stringify(ge)),localStorage.setItem("current_entity_id",z),{success:!0,message:"Successfully joined temple!",redirectPath:u(d.value)}}catch(W){return console.error("Failed to join temple:",W),r.value=((P=(I=W.response)==null?void 0:I.data)==null?void 0:P.message)||W.message||"Failed to join temple",{success:!1,error:r.value}}finally{n.value=!1}},selectTenant:async z=>{if(!z)return console.error("No tenant ID provided"),{success:!1,error:"No tenant ID provided"};try{console.log(" Selecting tenant ID:",z),localStorage.setItem("selected_tenant_id",z),localStorage.setItem("current_tenant_id",z),localStorage.setItem("current_entity_id",z),i.value=z,ce.defaults.headers.common["X-Tenant-ID"]=z;const I=(d.value||"").toLowerCase();let P;return I==="superadmin"||I==="super_admin"||I==="standard_user"||I==="standarduser"||I==="monitoring_user"||I==="monitoringuser"?P=`/entity/${z}/dashboard`:P=`/tenant/${z}/dashboard`,{success:!0,redirectPath:P}}catch(I){return console.error("Error selecting tenant:",I),{success:!1,error:"Failed to select tenant"}}},getDashboardPath:u,resetAppState:E,clearAllStorage:F,debugTenantData:()=>{console.log("------- DEBUG TENANT DATA -------"),console.log("Current user:",o.value),console.log("Current tenant ID:",i.value),console.log("Assigned tenant ID:",a.value),console.log("Is tenant?",v.value),console.log("Dashboard route:",p.value),console.log("Auth headers:",ce.defaults.headers.common),console.log("Local storage:",{auth_token:localStorage.getItem("auth_token"),user_data:localStorage.getItem("user_data"),current_tenant_id:localStorage.getItem("current_tenant_id"),selected_tenant_id:localStorage.getItem("selected_tenant_id"),current_entity_id:localStorage.getItem("current_entity_id"),assigned_tenant_id:localStorage.getItem("assigned_tenant_id")}),console.log("Token payload:",c(localStorage.getItem("auth_token"))),console.log("--------------------------------")},forgotPassword:async z=>{var I,P;n.value=!0,r.value=null;try{const W=await ce.post("/v1/auth/forgot-password",{email:z});return{success:!0,message:"Password reset instructions sent to your email"}}catch(W){return console.error("Forgot password error:",W),r.value=((P=(I=W.response)==null?void 0:I.data)==null?void 0:P.message)||W.message||"Failed to send reset instructions",{success:!1,error:r.value}}finally{n.value=!1}},resetPassword:async(z,I)=>{var P,W;n.value=!0,r.value=null;try{const we=await ce.post("/v1/auth/reset-password",{token:z,newPassword:I});return{success:!0,message:"Password has been reset successfully"}}catch(we){return console.error("Reset password error:",we),r.value=((W=(P=we.response)==null?void 0:P.data)==null?void 0:W.message)||we.message||"Failed to reset password",{success:!1,error:r.value}}finally{n.value=!1}},refreshToken:S,verifyToken:async()=>{if(!s.value)return!1;try{ce.defaults.headers.common.Authorization=`Bearer ${s.value}`;const z=new Date().getTime(),I=parseInt(localStorage.getItem("token_last_refreshed")||"0");return z-I>1e4&&localStorage.setItem("token_last_refreshed",z.toString()),!0}catch(z){return console.error("Token verification failed:",z),!1}},parseJwt:c,initializeAuth:N,clearError:()=>{r.value=null}}}),Lte={class:"min-h-screen bg-gradient-to-br from-indigo-50 via-white to-indigo-50"},Bte={class:"bg-white shadow-lg border-b border-indigo-100 sticky top-0 z-40"},Vte={class:"px-6 py-4"},Ute={class:"flex items-center justify-between"},Fte={class:"flex items-center space-x-4"},Ote={key:0,class:"absolute right-0 mt-2 w-48 bg-white rounded-xl shadow-lg border border-gray-100 py-2 z-50"},zte={class:"flex"},Hte={class:"w-64 bg-white shadow-lg min-h-screen border-r border-indigo-100"},qte={class:"p-6"},Gte={class:"space-y-2"},Wte={class:"flex-1 p-8"},Jte={key:0},Yte={class:"grid grid-cols-1 lg:grid-cols-2 gap-6"},Kte={class:"bg-white rounded-xl shadow-sm border border-gray-200"},Xte={class:"p-6"},Zte={class:"space-y-4"},Qte={class:"font-medium text-gray-900 font-sans"},eoe={class:"text-sm text-gray-600 font-sans"},toe={class:"flex space-x-2"},ooe=["onClick"],soe=["onClick"],noe={class:"bg-white rounded-xl shadow-sm border border-gray-200"},roe={class:"p-6"},aoe={class:"space-y-4"},ioe={class:"flex items-center justify-between mb-2"},loe={class:"font-medium text-gray-900 font-sans"},doe={class:"flex space-x-2"},uoe=["onClick"],coe=["onClick"],poe={__name:"SuperAdminLayout",setup(t){const o=Ke(),s=V(!1),n=V(null),r=()=>{o.push("/login")},i=()=>{s.value=!s.value},a=l=>{n.value&&!n.value.contains(l.target)&&(s.value=!1)};return Ee(()=>{document.addEventListener("click",a)}),Ut(()=>{document.removeEventListener("click",a)}),(l,d)=>{const c=He("router-link"),u=He("router-view");return m(),f("div",Lte,[e("header",Bte,[e("div",Vte,[e("div",Ute,[d[5]||(d[5]=$e('<div class="flex items-center space-x-4"><div class="w-10 h-10 bg-gradient-to-br from-indigo-600 to-indigo-800 rounded-xl flex items-center justify-center"><svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"></path></svg></div><div><h1 class="text-xl font-bold text-gray-900 font-roboto">Temple SaaS</h1><p class="text-sm text-indigo-600 font-medium font-sans">Super Admin Portal</p></div></div>',1)),e("div",Fte,[d[4]||(d[4]=$e('<button class="p-2 text-gray-600 hover:text-gray-900 hover:bg-indigo-50 rounded-lg transition-colors"><svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 17h5l-5 5-5-5h5v-5a7.07 7.07 0 017-7 7.07 7.07 0 017 7v5z"></path></svg></button><button class="p-2 text-gray-600 hover:text-gray-900 hover:bg-indigo-50 rounded-lg transition-colors"><svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path></svg></button>',2)),e("div",{class:"relative",ref_key:"profileDropdownRef",ref:n},[e("button",{onClick:i,class:"flex items-center space-x-3 p-2 rounded-xl hover:bg-indigo-50 transition-all duration-200"},[...d[0]||(d[0]=[$e('<div class="w-8 h-8 bg-gradient-to-br from-indigo-600 to-indigo-800 rounded-lg flex items-center justify-center"><span class="text-white font-semibold text-sm">SA</span></div><div class="text-left"><p class="text-sm font-semibold text-gray-900 font-sans">Super Admin</p><p class="text-xs text-gray-500 font-sans">admin@templesaas.com</p></div><svg class="w-4 h-4 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg>',3)])]),s.value?(m(),f("div",Ote,[d[1]||(d[1]=e("a",{href:"#",class:"block px-4 py-2 text-sm text-gray-700 hover:bg-indigo-50 hover:text-indigo-600 transition-colors font-sans"}," Profile Settings ",-1)),d[2]||(d[2]=e("a",{href:"#",class:"block px-4 py-2 text-sm text-gray-700 hover:bg-indigo-50 hover:text-indigo-600 transition-colors font-sans"}," System Logs ",-1)),d[3]||(d[3]=e("hr",{class:"my-2 border-gray-100"},null,-1)),e("button",{onClick:r,class:"block w-full text-left px-4 py-2 text-sm text-red-600 hover:bg-red-50 transition-colors font-sans"}," Logout ")])):Y("",!0)],512)])])])]),e("div",zte,[e("aside",Hte,[e("nav",qte,[e("div",Gte,[re(c,{to:"/superadmin/dashboard",class:ie(["flex items-center space-x-3 p-3 rounded-xl text-gray-700 hover:bg-indigo-50 hover:text-indigo-600 transition-all duration-200 group",{"bg-indigo-50 text-indigo-600 border border-indigo-200":l.$route.path==="/superadmin/dashboard"}])},{default:fe(()=>[...d[6]||(d[6]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2V6zM14 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V6zM4 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2v-2zM14 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z"})],-1),e("span",{class:"font-medium font-sans"},"Dashboard",-1)])]),_:1},8,["class"])]),d[7]||(d[7]=$e('<hr class="my-6 border-gray-200"><div class="space-y-4"><h3 class="text-xs font-semibold text-gray-500 uppercase tracking-wider font-sans">Quick Overview</h3><div class="bg-gradient-to-br from-indigo-50 to-indigo-100 p-4 rounded-xl"><div class="flex items-center justify-between"><div><p class="text-2xl font-bold text-indigo-600 font-sans">24</p><p class="text-sm text-indigo-600 font-sans">Active Temples</p></div><div class="w-10 h-10 bg-indigo-600 rounded-lg flex items-center justify-center"><svg class="w-5 h-5 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"></path></svg></div></div></div><div class="bg-gradient-to-br from-green-50 to-green-100 p-4 rounded-xl"><div class="flex items-center justify-between"><div><p class="text-2xl font-bold text-green-600 font-sans">1,247</p><p class="text-sm text-green-600 font-sans">Total Users</p></div><div class="w-10 h-10 bg-green-600 rounded-lg flex items-center justify-center"><svg class="w-5 h-5 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197m13.5-9a2.5 2.5 0 11-5 0 2.5 2.5 0 015 0z"></path></svg></div></div></div></div>',2))])]),e("main",Wte,[l.$route.path==="/superadmin/dashboard"||!l.$route.path.includes("/superadmin/")?(m(),f("div",Jte,[d[13]||(d[13]=$e('<div class="mb-6"><h2 class="text-2xl font-bold text-gray-900 font-roboto">Super Admin Dashboard</h2><p class="text-gray-600 mt-1 font-sans">Manage tenant and temple approvals</p></div><div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8"><div class="bg-white p-6 rounded-xl shadow-sm border border-gray-200"><div class="flex items-center justify-between"><div><p class="text-sm font-medium text-gray-600 font-sans">Pending Tenants</p><p class="text-2xl font-bold text-gray-900 font-sans">12</p></div><div class="p-3 bg-yellow-100 rounded-full"><svg class="w-6 h-6 text-yellow-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path></svg></div></div></div><div class="bg-white p-6 rounded-xl shadow-sm border border-gray-200"><div class="flex items-center justify-between"><div><p class="text-sm font-medium text-gray-600 font-sans">Pending Temples</p><p class="text-2xl font-bold text-gray-900 font-sans">8</p></div><div class="p-3 bg-blue-100 rounded-full"><svg class="w-6 h-6 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"></path></svg></div></div></div><div class="bg-white p-6 rounded-xl shadow-sm border border-gray-200"><div class="flex items-center justify-between"><div><p class="text-sm font-medium text-gray-600 font-sans">Total Active</p><p class="text-2xl font-bold text-gray-900 font-sans">156</p></div><div class="p-3 bg-green-100 rounded-full"><svg class="w-6 h-6 text-green-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2V6zM14 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V6zM4 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2v-2zM14 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z"></path></svg></div></div></div></div>',2)),e("div",Yte,[e("div",Kte,[d[9]||(d[9]=e("div",{class:"p-6 border-b border-gray-200"},[e("h3",{class:"text-lg font-semibold text-gray-900 font-roboto"},"Pending Tenant Approvals")],-1)),e("div",Xte,[e("div",Zte,[(m(),f(he,null,ke([1,2,3],p=>e("div",{key:p,class:"flex items-center justify-between p-4 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors"},[e("div",null,[e("h4",Qte,"Temple Admin "+y(p),1),e("p",eoe,"admin"+y(p)+"@temple.com",1),d[8]||(d[8]=e("p",{class:"text-xs text-gray-500 font-sans"},"Applied 2 days ago",-1))]),e("div",toe,[e("button",{onClick:v=>l.approveTenant(p),class:"px-3 py-1 bg-green-600 text-white text-sm rounded-lg hover:bg-green-700 transition-colors font-sans"}," Approve ",8,ooe),e("button",{onClick:v=>l.rejectTenant(p),class:"px-3 py-1 bg-red-600 text-white text-sm rounded-lg hover:bg-red-700 transition-colors font-sans"}," Reject ",8,soe)])])),64))])])]),e("div",noe,[d[12]||(d[12]=e("div",{class:"p-6 border-b border-gray-200"},[e("h3",{class:"text-lg font-semibold text-gray-900 font-roboto"},"Pending Temple Approvals")],-1)),e("div",roe,[e("div",aoe,[(m(),f(he,null,ke([1,2],p=>e("div",{key:p,class:"flex flex-col p-4 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors"},[e("div",ioe,[e("h4",loe,"Sri Venkateswara Temple "+y(p),1),e("div",doe,[e("button",{onClick:v=>l.approveTemple(p),class:"px-3 py-1 bg-green-600 text-white text-sm rounded-lg hover:bg-green-700 transition-colors font-sans"}," Approve ",8,uoe),e("button",{onClick:v=>l.rejectTemple(p),class:"px-3 py-1 bg-red-600 text-white text-sm rounded-lg hover:bg-red-700 transition-colors font-sans"}," Reject ",8,coe)])]),d[10]||(d[10]=e("p",{class:"text-sm text-gray-600 font-sans"},"Bangalore, Karnataka",-1)),d[11]||(d[11]=e("p",{class:"text-xs text-gray-500 font-sans"},"Submitted 1 day ago",-1))])),64))])])])])])):(m(),Re(u,{key:1}))])])])}}},moe={id:"app",class:"min-h-screen bg-gray-50"},goe={key:0,class:"fixed inset-0 z-50 flex items-center justify-center bg-white bg-opacity-90 backdrop-blur-sm"},foe={class:"flex flex-col items-center space-y-4"},voe={class:"text-indigo-600 font-medium"},hoe={class:"fixed top-4 right-4 z-50 space-y-2"},yoe={class:"p-4"},xoe={class:"flex items-start"},boe={class:"flex-shrink-0"},woe={class:"ml-3 w-0 flex-1"},koe={class:"text-sm font-medium text-gray-900"},_oe={key:0,class:"mt-1 text-sm text-gray-500"},$oe={class:"ml-4 flex-shrink-0 flex"},Soe=["onClick"],Doe={key:1,class:"min-h-screen flex flex-col items-center justify-center bg-gray-50"},Coe={class:"flex min-h-screen items-center justify-center p-4"},Toe={key:0,class:"relative bg-white rounded-2xl shadow-2xl max-w-lg w-full mx-auto overflow-hidden"},Eoe={key:0,class:"fixed bottom-4 left-4 right-4 md:left-auto md:right-4 md:w-80 bg-red-600 text-white px-4 py-3 rounded-2xl shadow-lg flex items-center space-x-3 z-30"},Aoe={key:0,class:"fixed bottom-4 left-4 right-4 md:left-auto md:right-4 md:w-96 bg-white border border-gray-200 rounded-2xl shadow-2xl p-4 z-30"},Ioe={class:"flex items-start space-x-3"},Moe={class:"flex-shrink-0"},Roe={class:"h-10 w-10 bg-indigo-100 rounded-xl flex items-center justify-center"},Poe={__name:"App",setup(t){const o=Ke(),s=Ze(),n=tt(),r=V(!1),i=V(!0),a=V(!1),l=V(navigator.onLine),d=V([]);let c=0;const u=V(!1),p=V(!1);let v=null;const g={AuthLayout:Wo(s_),PublicLayout:Wo(dp),DashboardLayout:Wo(Ao),SuperAdminLayout:Wo(poe)},h=te(()=>{const H=s.meta.layout||"PublicLayout";return console.log("Current layout:",H,"for route:",s.path),g[H]||g.PublicLayout});te(()=>n.isAuthenticated),te(()=>{var H;return!((H=s.meta)!=null&&H.requiresAuth)});const D=te(()=>["/login","/register","/forgot-password","/reset-password"].includes(s.path)||s.path.startsWith("/auth/")),C=(H,J,z="",I=5e3)=>{const P=++c,W={id:P,type:H,title:J,message:z};return d.value.push(W),I>0&&setTimeout(()=>{B(P)},I),P},B=H=>{const J=d.value.findIndex(z=>z.id===H);J>-1&&d.value.splice(J,1)},_=H=>{const J={success:"border-green-500",error:"border-red-500",warning:"border-yellow-500",info:"border-indigo-500"};return J[H]||J.info},T=H=>{const J={success:"text-green-500",error:"text-red-500",warning:"text-yellow-500",info:"text-indigo-500"};return J[H]||J.info},S=H=>{const J={success:np,error:ap,warning:Ea,info:rp};return J[H]||J.info},k=H=>H.path.includes("/auth/")?"slide-left":H.path.includes("/dashboard/")?"fade":H.path.includes("/profile/")?"slide-right":"fade",b=()=>{u.value=!0,document.body.style.overflow="hidden"},x=()=>{u.value=!1,document.body.style.overflow="auto"},F=H=>{H.preventDefault(),v=H,p.value=!0},E=async()=>{if(!v)return;v.prompt();const{outcome:H}=await v.userChoice;H==="accepted"&&C("success","App Installed!","Temple Manager has been added to your home screen"),v=null,p.value=!1},O=()=>{p.value=!1,v=null},N=()=>{l.value=!0,C("success","Back Online","Internet connection restored")},L=()=>{l.value=!1},M=H=>{console.error("Global error:",H),C("error","Something went wrong","Please try again or contact support")},X=async()=>{var H,J,z,I,P,W,we,me,De;console.log("App mounting, initializing auth...");try{i.value=!0;const ge=await n.initialize();if(console.log("Auth initialized, authenticated:",ge),ge){if(D.value){const ue=n.userRole;console.log("Authenticated user with role:",ue);let $;if(ue==="superadmin"||ue==="super_admin")$="/superadmin/dashboard";else if(ue==="templeadmin"||ue==="tenant")$="/tenant/dashboard";else if(ue==="devotee"){const w=((H=n.user)==null?void 0:H.entityId)||((z=(J=n.user)==null?void 0:J.current_entity)==null?void 0:z.id);$=w?`/entity/${w}/devotee/dashboard`:"/devotee/temple-selection"}else if(ue==="volunteer"){const w=((I=n.user)==null?void 0:I.entityId)||((W=(P=n.user)==null?void 0:P.current_entity)==null?void 0:W.id);$=w?`/entity/${w}/volunteer/dashboard`:"/volunteer/temple-selection"}else $="/";console.log("Redirecting authenticated user to dashboard:",$),o.replace($)}}else(we=s.meta)!=null&&we.requiresAuth&&(console.log("Redirecting unauthenticated user from protected route to login"),o.replace("/login"));if(ge&&!D.value){const ue=((me=n.user)==null?void 0:me.fullName)||((De=n.user)==null?void 0:De.name)||"User";C("success",`Welcome back, ${ue}!`)}}catch(ge){console.error("Failed to initialize auth:",ge),a.value=!0,C("error","Authentication Error","Failed to initialize application")}finally{i.value=!1}},ee=()=>{window.location.reload()},oe=async()=>{try{await n.logout(),C("info","Session reset","Please log in again"),o.replace("/login")}catch(H){console.error("Error during reset:",H),localStorage.clear(),window.location.href="/login"}},ae=()=>{r.value=!0,setTimeout(()=>{r.value=!1},500)};return Ee(async()=>{await X(),window.addEventListener("online",N),window.addEventListener("offline",L),window.addEventListener("beforeinstallprompt",F),window.addEventListener("error",M),document.documentElement.style.setProperty("--color-primary","#4f46e5"),document.documentElement.style.setProperty("--color-primary-dark","#3730a3"),document.documentElement.style.setProperty("--color-primary-light","#6366f1"),o.beforeEach((H,J,z)=>{H.path!==J.path&&ae(),z()}),document.addEventListener("keydown",H=>{H.key==="Escape"&&u.value&&x()})}),Ut(()=>{window.removeEventListener("online",N),window.removeEventListener("offline",L),window.removeEventListener("beforeinstallprompt",F),window.removeEventListener("error",M),document.body.style.overflow="auto"}),window.showToast=C,window.showModal=b,window.hideModal=x,(H,J)=>{const z=He("router-view");return m(),f("div",moe,[re(It,{name:"fade","enter-active-class":"transition-opacity duration-300 ease-out","leave-active-class":"transition-opacity duration-200 ease-in","enter-from-class":"opacity-0","enter-to-class":"opacity-100","leave-from-class":"opacity-100","leave-to-class":"opacity-0"},{default:fe(()=>[r.value||i.value?(m(),f("div",goe,[e("div",foe,[J[0]||(J[0]=e("div",{class:"animate-spin rounded-full h-12 w-12 border-4 border-indigo-200 border-t-indigo-600"},null,-1)),e("p",voe,y(i.value?"Initializing application...":"Loading..."),1)])])):Y("",!0)]),_:1}),(m(),Re(jn,{to:"body"},[e("div",hoe,[re(Ig,{name:"toast","enter-active-class":"transition-all duration-300 ease-out","leave-active-class":"transition-all duration-200 ease-in","enter-from-class":"opacity-0 transform translate-x-full","enter-to-class":"opacity-100 transform translate-x-0","leave-from-class":"opacity-100 transform translate-x-0","leave-to-class":"opacity-0 transform translate-x-full"},{default:fe(()=>[(m(!0),f(he,null,ke(d.value,I=>(m(),f("div",{key:I.id,class:ie(["max-w-sm w-full bg-white shadow-lg rounded-2xl pointer-events-auto overflow-hidden border-l-4",_(I.type)])},[e("div",yoe,[e("div",xoe,[e("div",boe,[(m(),Re(xt(S(I.type)),{class:ie(["h-6 w-6",T(I.type)])},null,8,["class"]))]),e("div",woe,[e("p",koe,y(I.title),1),I.message?(m(),f("p",_oe,y(I.message),1)):Y("",!0)]),e("div",$oe,[e("button",{onClick:P=>B(I.id),class:"bg-white rounded-md inline-flex text-gray-400 hover:text-gray-600 focus:outline-none focus:ring-2 focus:ring-indigo-500 transition-colors duration-200"},[J[1]||(J[1]=e("span",{class:"sr-only"},"Close",-1)),re(_e(Aa),{class:"h-5 w-5"})],8,Soe)])])])],2))),128))]),_:1})])])),i.value?a.value?(m(),f("div",Doe,[e("div",{class:"text-center max-w-md px-4"},[J[2]||(J[2]=e("h1",{class:"text-2xl font-bold text-indigo-600 mb-4"},"Something went wrong",-1)),J[3]||(J[3]=e("p",{class:"text-gray-600 mb-6"},"There was a problem starting the application. Please try again.",-1)),e("div",{class:"space-y-4"},[e("button",{onClick:ee,class:"w-full py-2 px-4 bg-indigo-600 text-white rounded hover:bg-indigo-700"}," Refresh Page "),e("button",{onClick:oe,class:"w-full py-2 px-4 border border-gray-300 bg-white text-gray-700 rounded hover:bg-gray-50"}," Reset & Logout ")])])])):Y("",!0):(m(),Re(xt(h.value),{key:0},{default:fe(()=>[re(z,null,{default:fe(({Component:I,route:P})=>[re(It,{name:k(P),mode:"out-in","enter-active-class":"transition-all duration-300 ease-out","leave-active-class":"transition-all duration-200 ease-in"},{default:fe(()=>[(m(),Re(xt(I),{key:P.path}))]),_:2},1032,["name"])]),_:1})]),_:1})),(m(),Re(jn,{to:"body"},[re(It,{name:"modal","enter-active-class":"transition-opacity duration-300 ease-out","leave-active-class":"transition-opacity duration-200 ease-in","enter-from-class":"opacity-0","enter-to-class":"opacity-100","leave-from-class":"opacity-100","leave-to-class":"opacity-0"},{default:fe(()=>[u.value?(m(),f("div",{key:0,class:"fixed inset-0 z-40 overflow-y-auto",onClick:Oe(x,["self"])},[e("div",Coe,[J[4]||(J[4]=e("div",{class:"fixed inset-0 bg-black bg-opacity-25 backdrop-blur-sm transition-opacity"},null,-1)),re(It,{name:"modal-content","enter-active-class":"transition-all duration-300 ease-out","leave-active-class":"transition-all duration-200 ease-in","enter-from-class":"opacity-0 transform scale-95","enter-to-class":"opacity-100 transform scale-100","leave-from-class":"opacity-100 transform scale-100","leave-to-class":"opacity-0 transform scale-95"},{default:fe(()=>[u.value?(m(),f("div",Toe,[Dt(H.$slots,"modal-content",{},void 0,!0)])):Y("",!0)]),_:3})])])):Y("",!0)]),_:3})])),re(It,{name:"slide-up","enter-active-class":"transition-transform duration-300 ease-out","leave-active-class":"transition-transform duration-200 ease-in","enter-from-class":"transform translate-y-full","enter-to-class":"transform translate-y-0","leave-from-class":"transform translate-y-0","leave-to-class":"transform translate-y-full"},{default:fe(()=>[l.value?Y("",!0):(m(),f("div",Eoe,[re(_e(Ny),{class:"h-5 w-5 text-red-200"}),J[5]||(J[5]=e("div",{class:"flex-1"},[e("p",{class:"font-medium text-sm"},"No Internet Connection"),e("p",{class:"text-xs text-red-200"},"Some features may be limited")],-1))]))]),_:1}),re(It,{name:"slide-up","enter-active-class":"transition-transform duration-300 ease-out","leave-active-class":"transition-transform duration-200 ease-in","enter-from-class":"transform translate-y-full","enter-to-class":"transform translate-y-0","leave-from-class":"transform translate-y-0","leave-to-class":"transform translate-y-full"},{default:fe(()=>[p.value?(m(),f("div",Aoe,[e("div",Ioe,[e("div",Moe,[e("div",Roe,[re(_e(Ty),{class:"h-6 w-6 text-indigo-600"})])]),J[6]||(J[6]=e("div",{class:"flex-1 min-w-0"},[e("h3",{class:"text-sm font-bold text-gray-900",style:{"font-family":"'Roboto', sans-serif"}}," Install Temple Manager "),e("p",{class:"text-xs text-gray-500 mt-1"}," Add to your home screen for quick access ")],-1))]),e("div",{class:"mt-4 flex space-x-2"},[e("button",{onClick:E,class:"flex-1 bg-indigo-600 text-white text-xs font-medium py-2 px-3 rounded-xl hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 transition-colors duration-200"}," Install "),e("button",{onClick:O,class:"flex-1 bg-gray-100 text-gray-700 text-xs font-medium py-2 px-3 rounded-xl hover:bg-gray-200 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2 transition-colors duration-200"}," Not Now ")])])):Y("",!0)]),_:1})])}}},joe=Qe(Poe,[["__scopeId","data-v-3d3e1419"]]),jt=Og(joe),Noe=qg();jt.use(Noe);jt.use(Zs);jt.config.errorHandler=(t,o,s)=>{console.error("Global error:",t),console.error("Component instance:",o),console.error("Error info:",s);try{const{showToast:n}=je();n("An unexpected error occurred. Please try again.","error")}catch(n){console.error("Failed to show error toast:",n)}};jt.config.performance=!1;jt.config.globalProperties.$constants={APP_NAME:"Temple SaaS Platform",APP_VERSION:"1.0.0",ROLES:{SUPER_ADMIN:"superadmin",TENANT:"tenant",DEVOTEE:"devotee",VOLUNTEER:"volunteer"},STATUS:{PENDING:"PENDING",APPROVED:"APPROVED",REJECTED:"REJECTED",ACTIVE:"ACTIVE",INACTIVE:"INACTIVE"},TEMPLE_STATUS:{PENDING:"PENDING",APPROVED:"APPROVED",REJECTED:"REJECTED",UNDER_REVIEW:"UNDER_REVIEW"},SEVA_TYPES:{DAILY:"daily",WEEKLY:"weekly",MONTHLY:"monthly",FESTIVAL:"festival",SPECIAL:"special"},DONATION_TYPES:{GENERAL:"general",SEVA:"seva",FESTIVAL:"festival",DEVELOPMENT:"development",FOOD:"food",MAINTENANCE:"maintenance"},COMMUNICATION_CHANNELS:{EMAIL:"email",SMS:"sms",WHATSAPP:"whatsapp",IN_APP:"in_app"},FILE_LIMITS:{MAX_SIZE:5*1024*1024,ALLOWED_TYPES:["image/jpeg","image/png","image/jpg","application/pdf","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document"]},THEME:{PRIMARY:"indigo-600",SECONDARY:"indigo-500",ACCENT:"indigo-800",SUCCESS:"green-600",ERROR:"red-600",WARNING:"yellow-600",INFO:"blue-600",GRAY:"gray-600"},BREAKPOINTS:{SM:"640px",MD:"768px",LG:"1024px",XL:"1280px","2XL":"1536px"}};const hs=ln(),gp=je();jt.provide("auth",hs);jt.provide("toast",gp);jt.config.globalProperties.$auth=hs;jt.config.globalProperties.$toast=gp;jt.directive("permission",{mounted(t,o){try{const{hasPermission:s}=hs,n=o.value;(!s||!s(n))&&(t.style.display="none")}catch(s){console.error("Permission directive error:",s),t.style.display="none"}},updated(t,o){try{const{hasPermission:s}=hs,n=o.value;!s||!s(n)?t.style.display="none":t.style.display=""}catch(s){console.error("Permission directive error:",s),t.style.display="none"}}});jt.directive("role",{mounted(t,o){try{const{user:s}=hs,n=Array.isArray(o.value)?o.value:[o.value];(!(s!=null&&s.value)||!n.includes(s.value.role))&&(t.style.display="none")}catch(s){console.error("Role directive error:",s),t.style.display="none"}},updated(t,o){try{const{user:s}=hs,n=Array.isArray(o.value)?o.value:[o.value];!(s!=null&&s.value)||!n.includes(s.value.role)?t.style.display="none":t.style.display=""}catch(s){console.error("Role directive error:",s),t.style.display="none"}}});jt.directive("loading",{mounted(t,o){Nu(t,o.value)},updated(t,o){Nu(t,o.value)}});function Nu(t,o){try{if(o){if(t.classList.add("opacity-50","pointer-events-none","cursor-not-allowed"),!t.querySelector(".loading-spinner")){const s=document.createElement("div");s.className="loading-spinner absolute inset-0 flex items-center justify-center bg-white bg-opacity-75",s.innerHTML=`
          <div class="animate-spin rounded-full h-6 w-6 border-b-2 border-indigo-600"></div>
        `,window.getComputedStyle(t).position==="static"&&(t.style.position="relative"),t.appendChild(s)}}else{t.classList.remove("opacity-50","pointer-events-none","cursor-not-allowed");const s=t.querySelector(".loading-spinner");s&&s.remove()}}catch(s){console.error("Loading directive error:",s)}}jt.mixin({methods:{formatCurrency(t,o="INR"){try{return new Intl.NumberFormat("en-IN",{style:"currency",currency:o,minimumFractionDigits:0}).format(t)}catch(s){return console.error("Currency formatting error:",s),`${t}`}},formatDate(t,o="short"){try{const s={short:{year:"numeric",month:"short",day:"numeric"},long:{year:"numeric",month:"long",day:"numeric",weekday:"long"},time:{hour:"2-digit",minute:"2-digit"},datetime:{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}};return new Intl.DateTimeFormat("en-IN",s[o]||s.short).format(new Date(t))}catch(s){return console.error("Date formatting error:",s),new Date(t).toLocaleDateString()}},truncate(t,o=50){return t?t.length>o?t.substring(0,o)+"...":t:""},capitalize(t){return t?t.charAt(0).toUpperCase()+t.slice(1):""},generateAvatar(t){return t?t.split(" ").map(s=>s.charAt(0)).join("").toUpperCase().substring(0,2):""},getStatusColor(t){return{PENDING:"bg-yellow-100 text-yellow-800",APPROVED:"bg-green-100 text-green-800",REJECTED:"bg-red-100 text-red-800",ACTIVE:"bg-green-100 text-green-800",INACTIVE:"bg-gray-100 text-gray-800",UNDER_REVIEW:"bg-blue-100 text-blue-800"}[t]||"bg-gray-100 text-gray-800"},safeGet(t,o,s=null){try{return o.split(".").reduce((n,r)=>n==null?void 0:n[r],t)??s}catch{return s}}}});try{jt.mount("#app")}catch(t){console.error("Failed to mount app:",t);const o=document.getElementById("app");o&&(o.innerHTML=`
      <div class="min-h-screen flex items-center justify-center bg-gray-50">
        <div class="text-center">
          <h1 class="text-2xl font-bold text-red-600 mb-4">Application Failed to Start</h1>
          <p class="text-gray-600 mb-4">Please refresh the page or contact support.</p>
          <button onclick="window.location.reload()" class="bg-indigo-600 text-white px-4 py-2 rounded">
            Refresh Page
          </button>
        </div>
      </div>
    `)}export{Ke as A,Pa as B,Ze as C,Ue as D,fe as E,he as F,Q as G,He as H,$e as I,Ia as J,nt as K,Qo as L,j8 as M,ot as N,st as O,lt as P,Loe as Q,ip as R,vt as S,Co as T,Uo as U,Ne as V,lp as W,ce as X,ft as Y,ose as Z,Qe as _,dk as a,ck as b,te as c,Vo as d,je as e,Je as f,lk as g,f as h,e as i,Y as j,Ce as k,ke as l,cs as m,ie as n,m as o,Oe as p,tt as q,V as r,Ee as s,y as t,uk as u,xe as v,de as w,Re as x,_e as y,re as z};
